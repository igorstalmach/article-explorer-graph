function AL(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const s=Object.getOwnPropertyDescriptor(i,o);s&&Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function pc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function $V(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),r}var NL={exports:{}},lx={},PL={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm=Symbol.for("react.element"),zV=Symbol.for("react.portal"),kV=Symbol.for("react.fragment"),VV=Symbol.for("react.strict_mode"),GV=Symbol.for("react.profiler"),HV=Symbol.for("react.provider"),jV=Symbol.for("react.context"),WV=Symbol.for("react.forward_ref"),qV=Symbol.for("react.suspense"),XV=Symbol.for("react.memo"),KV=Symbol.for("react.lazy"),cA=Symbol.iterator;function YV(n){return n===null||typeof n!="object"?null:(n=cA&&n[cA]||n["@@iterator"],typeof n=="function"?n:null)}var OL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IL=Object.assign,DL={};function Qf(n,e,r){this.props=n,this.context=e,this.refs=DL,this.updater=r||OL}Qf.prototype.isReactComponent={};Qf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Qf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function LL(){}LL.prototype=Qf.prototype;function UE(n,e,r){this.props=n,this.context=e,this.refs=DL,this.updater=r||OL}var BE=UE.prototype=new LL;BE.constructor=UE;IL(BE,Qf.prototype);BE.isPureReactComponent=!0;var uA=Array.isArray,FL=Object.prototype.hasOwnProperty,$E={current:null},UL={key:!0,ref:!0,__self:!0,__source:!0};function BL(n,e,r){var i,o={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)FL.call(e,i)&&!UL.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)o[i]===void 0&&(o[i]=l[i]);return{$$typeof:Zm,type:n,key:s,ref:a,props:o,_owner:$E.current}}function QV(n,e){return{$$typeof:Zm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function zE(n){return typeof n=="object"&&n!==null&&n.$$typeof===Zm}function ZV(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var dA=/\/+/g;function Y_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ZV(""+n.key):e.toString(36)}function u0(n,e,r,i,o){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Zm:case zV:a=!0}}if(a)return a=n,o=o(a),n=i===""?"."+Y_(a,0):i,uA(o)?(r="",n!=null&&(r=n.replace(dA,"$&/")+"/"),u0(o,e,r,"",function(u){return u})):o!=null&&(zE(o)&&(o=QV(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(dA,"$&/")+"/")+n)),e.push(o)),1;if(a=0,i=i===""?".":i+":",uA(n))for(var l=0;l<n.length;l++){s=n[l];var c=i+Y_(s,l);a+=u0(s,e,r,c,o)}else if(c=YV(n),typeof c=="function")for(n=c.call(n),l=0;!(s=n.next()).done;)s=s.value,c=i+Y_(s,l++),a+=u0(s,e,r,c,o);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Fg(n,e,r){if(n==null)return n;var i=[],o=0;return u0(n,i,"","",function(s){return e.call(r,s,o++)}),i}function JV(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Li={current:null},d0={transition:null},e6={ReactCurrentDispatcher:Li,ReactCurrentBatchConfig:d0,ReactCurrentOwner:$E};function $L(){throw Error("act(...) is not supported in production builds of React.")}an.Children={map:Fg,forEach:function(n,e,r){Fg(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return Fg(n,function(){e++}),e},toArray:function(n){return Fg(n,function(e){return e})||[]},only:function(n){if(!zE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};an.Component=Qf;an.Fragment=kV;an.Profiler=GV;an.PureComponent=UE;an.StrictMode=VV;an.Suspense=qV;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e6;an.act=$L;an.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=IL({},n.props),o=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=$E.current),e.key!==void 0&&(o=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)FL.call(e,c)&&!UL.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Zm,type:n.type,key:o,ref:s,props:i,_owner:a}};an.createContext=function(n){return n={$$typeof:jV,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:HV,_context:n},n.Consumer=n};an.createElement=BL;an.createFactory=function(n){var e=BL.bind(null,n);return e.type=n,e};an.createRef=function(){return{current:null}};an.forwardRef=function(n){return{$$typeof:WV,render:n}};an.isValidElement=zE;an.lazy=function(n){return{$$typeof:KV,_payload:{_status:-1,_result:n},_init:JV}};an.memo=function(n,e){return{$$typeof:XV,type:n,compare:e===void 0?null:e}};an.startTransition=function(n){var e=d0.transition;d0.transition={};try{n()}finally{d0.transition=e}};an.unstable_act=$L;an.useCallback=function(n,e){return Li.current.useCallback(n,e)};an.useContext=function(n){return Li.current.useContext(n)};an.useDebugValue=function(){};an.useDeferredValue=function(n){return Li.current.useDeferredValue(n)};an.useEffect=function(n,e){return Li.current.useEffect(n,e)};an.useId=function(){return Li.current.useId()};an.useImperativeHandle=function(n,e,r){return Li.current.useImperativeHandle(n,e,r)};an.useInsertionEffect=function(n,e){return Li.current.useInsertionEffect(n,e)};an.useLayoutEffect=function(n,e){return Li.current.useLayoutEffect(n,e)};an.useMemo=function(n,e){return Li.current.useMemo(n,e)};an.useReducer=function(n,e,r){return Li.current.useReducer(n,e,r)};an.useRef=function(n){return Li.current.useRef(n)};an.useState=function(n){return Li.current.useState(n)};an.useSyncExternalStore=function(n,e,r){return Li.current.useSyncExternalStore(n,e,r)};an.useTransition=function(){return Li.current.useTransition()};an.version="18.3.1";PL.exports=an;var b=PL.exports;const se=pc(b),cx=AL({__proto__:null,default:se},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=b,n6=Symbol.for("react.element"),r6=Symbol.for("react.fragment"),i6=Object.prototype.hasOwnProperty,o6=t6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s6={key:!0,ref:!0,__self:!0,__source:!0};function zL(n,e,r){var i,o={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)i6.call(e,i)&&!s6.hasOwnProperty(i)&&(o[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:n6,type:n,key:s,ref:a,props:o,_owner:o6.current}}lx.Fragment=r6;lx.jsx=zL;lx.jsxs=zL;NL.exports=lx;var Tt=NL.exports,kL={exports:{}},Ro={},VL={exports:{}},GL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,V){var U=O.length;O.push(V);e:for(;0<U;){var k=U-1>>>1,W=O[k];if(0<o(W,V))O[k]=V,O[U]=W,U=k;else break e}}function r(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var V=O[0],U=O.pop();if(U!==V){O[0]=U;e:for(var k=0,W=O.length,J=W>>>1;k<J;){var z=2*(k+1)-1,j=O[z],X=z+1,Q=O[X];if(0>o(j,U))X<W&&0>o(Q,j)?(O[k]=Q,O[X]=U,k=X):(O[k]=j,O[z]=U,k=z);else if(X<W&&0>o(Q,U))O[k]=Q,O[X]=U,k=X;else break e}}return V}function o(O,V){var U=O.sortIndex-V.sortIndex;return U!==0?U:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var V=r(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=O)i(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=r(u)}}function S(O){if(y=!1,_(O),!g)if(r(c)!==null)g=!0,P(w);else{var V=r(u);V!==null&&F(S,V.startTime-O)}}function w(O,V){g=!1,y&&(y=!1,m(T),T=-1),p=!0;var U=h;try{for(_(V),f=r(c);f!==null&&(!(f.expirationTime>V)||O&&!N());){var k=f.callback;if(typeof k=="function"){f.callback=null,h=f.priorityLevel;var W=k(f.expirationTime<=V);V=n.unstable_now(),typeof W=="function"?f.callback=W:f===r(c)&&i(c),_(V)}else i(c);f=r(c)}if(f!==null)var J=!0;else{var z=r(u);z!==null&&F(S,z.startTime-V),J=!1}return J}finally{f=null,h=U,p=!1}}var C=!1,E=null,T=-1,M=5,R=-1;function N(){return!(n.unstable_now()-R<M)}function D(){if(E!==null){var O=n.unstable_now();R=O;var V=!0;try{V=E(!0,O)}finally{V?L():(C=!1,E=null)}}else C=!1}var L;if(typeof x=="function")L=function(){x(D)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=D,L=function(){I.postMessage(null)}}else L=function(){v(D,0)};function P(O){E=O,C||(C=!0,L())}function F(O,V){T=v(function(){O(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,P(w))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(O){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var U=h;h=V;try{return O()}finally{h=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=h;h=O;try{return V()}finally{h=U}},n.unstable_scheduleCallback=function(O,V,U){var k=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?k+U:k):U=k,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=U+W,O={id:d++,callback:V,priorityLevel:O,startTime:U,expirationTime:W,sortIndex:-1},U>k?(O.sortIndex=U,e(u,O),r(c)===null&&O===r(u)&&(y?(m(T),T=-1):y=!0,F(S,U-k))):(O.sortIndex=W,e(c,O),g||p||(g=!0,P(w))),O},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(O){var V=h;return function(){var U=h;h=V;try{return O.apply(this,arguments)}finally{h=U}}}})(GL);VL.exports=GL;var a6=VL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l6=b,Eo=a6;function tt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HL=new Set,Gp={};function Ou(n,e){lf(n,e),lf(n+"Capture",e)}function lf(n,e){for(Gp[n]=e,n=0;n<e.length;n++)HL.add(e[n])}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),K1=Object.prototype.hasOwnProperty,c6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fA={},hA={};function u6(n){return K1.call(hA,n)?!0:K1.call(fA,n)?!1:c6.test(n)?hA[n]=!0:(fA[n]=!0,!1)}function d6(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function f6(n,e,r,i){if(e===null||typeof e>"u"||d6(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fi(n,e,r,i,o,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){si[n]=new Fi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];si[e]=new Fi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){si[n]=new Fi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){si[n]=new Fi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){si[n]=new Fi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){si[n]=new Fi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){si[n]=new Fi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){si[n]=new Fi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){si[n]=new Fi(n,5,!1,n.toLowerCase(),null,!1,!1)});var kE=/[\-:]([a-z])/g;function VE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(kE,VE);si[e]=new Fi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(kE,VE);si[e]=new Fi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(kE,VE);si[e]=new Fi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){si[n]=new Fi(n,1,!1,n.toLowerCase(),null,!1,!1)});si.xlinkHref=new Fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){si[n]=new Fi(n,1,!1,n.toLowerCase(),null,!0,!0)});function GE(n,e,r,i){var o=si.hasOwnProperty(e)?si[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f6(e,r,o,i)&&(r=null),i||o===null?u6(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):o.mustUseProperty?n[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,i=o.attributeNamespace,r===null?n.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var al=l6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ug=Symbol.for("react.element"),Sd=Symbol.for("react.portal"),wd=Symbol.for("react.fragment"),HE=Symbol.for("react.strict_mode"),Y1=Symbol.for("react.profiler"),jL=Symbol.for("react.provider"),WL=Symbol.for("react.context"),jE=Symbol.for("react.forward_ref"),Q1=Symbol.for("react.suspense"),Z1=Symbol.for("react.suspense_list"),WE=Symbol.for("react.memo"),Dl=Symbol.for("react.lazy"),qL=Symbol.for("react.offscreen"),pA=Symbol.iterator;function yh(n){return n===null||typeof n!="object"?null:(n=pA&&n[pA]||n["@@iterator"],typeof n=="function"?n:null)}var sr=Object.assign,Q_;function sp(n){if(Q_===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Q_=e&&e[1]||""}return`
`+Q_+n}var Z_=!1;function J_(n,e){if(!n||Z_)return"";Z_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=i.stack.split(`
`),a=o.length-1,l=s.length-1;1<=a&&0<=l&&o[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(o[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||o[a]!==s[l]){var c=`
`+o[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{Z_=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?sp(n):""}function h6(n){switch(n.tag){case 5:return sp(n.type);case 16:return sp("Lazy");case 13:return sp("Suspense");case 19:return sp("SuspenseList");case 0:case 2:case 15:return n=J_(n.type,!1),n;case 11:return n=J_(n.type.render,!1),n;case 1:return n=J_(n.type,!0),n;default:return""}}function J1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case wd:return"Fragment";case Sd:return"Portal";case Y1:return"Profiler";case HE:return"StrictMode";case Q1:return"Suspense";case Z1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case WL:return(n.displayName||"Context")+".Consumer";case jL:return(n._context.displayName||"Context")+".Provider";case jE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case WE:return e=n.displayName||null,e!==null?e:J1(n.type)||"Memo";case Dl:e=n._payload,n=n._init;try{return J1(n(e))}catch{}}return null}function p6(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J1(e);case 8:return e===HE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ac(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function XL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m6(n){var e=XL(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Bg(n){n._valueTracker||(n._valueTracker=m6(n))}function KL(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=XL(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function G0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ew(n,e){var r=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function mA(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=ac(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YL(n,e){e=e.checked,e!=null&&GE(n,"checked",e,!1)}function tw(n,e){YL(n,e);var r=ac(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?nw(n,e.type,r):e.hasOwnProperty("defaultValue")&&nw(n,e.type,ac(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function gA(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function nw(n,e,r){(e!=="number"||G0(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var ap=Array.isArray;function jd(n,e,r,i){if(n=n.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<n.length;r++)o=e.hasOwnProperty("$"+n[r].value),n[r].selected!==o&&(n[r].selected=o),o&&i&&(n[r].defaultSelected=!0)}else{for(r=""+ac(r),e=null,o=0;o<n.length;o++){if(n[o].value===r){n[o].selected=!0,i&&(n[o].defaultSelected=!0);return}e!==null||n[o].disabled||(e=n[o])}e!==null&&(e.selected=!0)}}function rw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vA(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(tt(92));if(ap(r)){if(1<r.length)throw Error(tt(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:ac(r)}}function QL(n,e){var r=ac(e.value),i=ac(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function yA(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function ZL(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?ZL(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $g,JL=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,o){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,o)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for($g=$g||document.createElement("div"),$g.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$g.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Hp(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var _p={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g6=["Webkit","ms","Moz","O"];Object.keys(_p).forEach(function(n){g6.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),_p[e]=_p[n]})});function eF(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||_p.hasOwnProperty(n)&&_p[n]?(""+e).trim():e+"px"}function tF(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=eF(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,o):n[r]=o}}var v6=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ow(n,e){if(e){if(v6[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function sw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aw=null;function qE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var lw=null,Wd=null,qd=null;function xA(n){if(n=tg(n)){if(typeof lw!="function")throw Error(tt(280));var e=n.stateNode;e&&(e=px(e),lw(n.stateNode,n.type,e))}}function nF(n){Wd?qd?qd.push(n):qd=[n]:Wd=n}function rF(){if(Wd){var n=Wd,e=qd;if(qd=Wd=null,xA(n),e)for(n=0;n<e.length;n++)xA(e[n])}}function iF(n,e){return n(e)}function oF(){}var eb=!1;function sF(n,e,r){if(eb)return n(e,r);eb=!0;try{return iF(n,e,r)}finally{eb=!1,(Wd!==null||qd!==null)&&(oF(),rF())}}function jp(n,e){var r=n.stateNode;if(r===null)return null;var i=px(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(tt(231,e,typeof r));return r}var cw=!1;if(Ka)try{var xh={};Object.defineProperty(xh,"passive",{get:function(){cw=!0}}),window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{cw=!1}function y6(n,e,r,i,o,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var bp=!1,H0=null,j0=!1,uw=null,x6={onError:function(n){bp=!0,H0=n}};function _6(n,e,r,i,o,s,a,l,c){bp=!1,H0=null,y6.apply(x6,arguments)}function b6(n,e,r,i,o,s,a,l,c){if(_6.apply(this,arguments),bp){if(bp){var u=H0;bp=!1,H0=null}else throw Error(tt(198));j0||(j0=!0,uw=u)}}function Iu(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function aF(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function _A(n){if(Iu(n)!==n)throw Error(tt(188))}function S6(n){var e=n.alternate;if(!e){if(e=Iu(n),e===null)throw Error(tt(188));return e!==n?null:n}for(var r=n,i=e;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return _A(o),n;if(s===i)return _A(o),e;s=s.sibling}throw Error(tt(188))}if(r.return!==i.return)r=o,i=s;else{for(var a=!1,l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a)throw Error(tt(189))}}if(r.alternate!==i)throw Error(tt(190))}if(r.tag!==3)throw Error(tt(188));return r.stateNode.current===r?n:e}function lF(n){return n=S6(n),n!==null?cF(n):null}function cF(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=cF(n);if(e!==null)return e;n=n.sibling}return null}var uF=Eo.unstable_scheduleCallback,bA=Eo.unstable_cancelCallback,w6=Eo.unstable_shouldYield,C6=Eo.unstable_requestPaint,hr=Eo.unstable_now,E6=Eo.unstable_getCurrentPriorityLevel,XE=Eo.unstable_ImmediatePriority,dF=Eo.unstable_UserBlockingPriority,W0=Eo.unstable_NormalPriority,T6=Eo.unstable_LowPriority,fF=Eo.unstable_IdlePriority,ux=null,Ys=null;function M6(n){if(Ys&&typeof Ys.onCommitFiberRoot=="function")try{Ys.onCommitFiberRoot(ux,n,void 0,(n.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:N6,R6=Math.log,A6=Math.LN2;function N6(n){return n>>>=0,n===0?32:31-(R6(n)/A6|0)|0}var zg=64,kg=4194304;function lp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function q0(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,o=n.suspendedLanes,s=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~o;l!==0?i=lp(l):(s&=a,s!==0&&(i=lp(s)))}else a=r&~o,a!==0?i=lp(a):s!==0&&(i=lp(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-Es(e),o=1<<r,i|=n[r],e&=~o;return i}function P6(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O6(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,o=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-Es(s),l=1<<a,c=o[a];c===-1?(!(l&r)||l&i)&&(o[a]=P6(l,e)):c<=e&&(n.expiredLanes|=l),s&=~l}}function dw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hF(){var n=zg;return zg<<=1,!(zg&4194240)&&(zg=64),n}function tb(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function Jm(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Es(e),n[e]=r}function I6(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var o=31-Es(r),s=1<<o;e[o]=0,i[o]=-1,n[o]=-1,r&=~s}}function KE(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-Es(r),o=1<<i;o&e|n[i]&e&&(n[i]|=e),r&=~o}}var Pn=0;function pF(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var mF,YE,gF,vF,yF,fw=!1,Vg=[],Xl=null,Kl=null,Yl=null,Wp=new Map,qp=new Map,Bl=[],D6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SA(n,e){switch(n){case"focusin":case"focusout":Xl=null;break;case"dragenter":case"dragleave":Kl=null;break;case"mouseover":case"mouseout":Yl=null;break;case"pointerover":case"pointerout":Wp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qp.delete(e.pointerId)}}function _h(n,e,r,i,o,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=tg(e),e!==null&&YE(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),n)}function L6(n,e,r,i,o){switch(e){case"focusin":return Xl=_h(Xl,n,e,r,i,o),!0;case"dragenter":return Kl=_h(Kl,n,e,r,i,o),!0;case"mouseover":return Yl=_h(Yl,n,e,r,i,o),!0;case"pointerover":var s=o.pointerId;return Wp.set(s,_h(Wp.get(s)||null,n,e,r,i,o)),!0;case"gotpointercapture":return s=o.pointerId,qp.set(s,_h(qp.get(s)||null,n,e,r,i,o)),!0}return!1}function xF(n){var e=Jc(n.target);if(e!==null){var r=Iu(e);if(r!==null){if(e=r.tag,e===13){if(e=aF(r),e!==null){n.blockedOn=e,yF(n.priority,function(){gF(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function f0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=hw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);aw=i,r.target.dispatchEvent(i),aw=null}else return e=tg(r),e!==null&&YE(e),n.blockedOn=r,!1;e.shift()}return!0}function wA(n,e,r){f0(n)&&r.delete(e)}function F6(){fw=!1,Xl!==null&&f0(Xl)&&(Xl=null),Kl!==null&&f0(Kl)&&(Kl=null),Yl!==null&&f0(Yl)&&(Yl=null),Wp.forEach(wA),qp.forEach(wA)}function bh(n,e){n.blockedOn===e&&(n.blockedOn=null,fw||(fw=!0,Eo.unstable_scheduleCallback(Eo.unstable_NormalPriority,F6)))}function Xp(n){function e(o){return bh(o,n)}if(0<Vg.length){bh(Vg[0],n);for(var r=1;r<Vg.length;r++){var i=Vg[r];i.blockedOn===n&&(i.blockedOn=null)}}for(Xl!==null&&bh(Xl,n),Kl!==null&&bh(Kl,n),Yl!==null&&bh(Yl,n),Wp.forEach(e),qp.forEach(e),r=0;r<Bl.length;r++)i=Bl[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<Bl.length&&(r=Bl[0],r.blockedOn===null);)xF(r),r.blockedOn===null&&Bl.shift()}var Xd=al.ReactCurrentBatchConfig,X0=!0;function U6(n,e,r,i){var o=Pn,s=Xd.transition;Xd.transition=null;try{Pn=1,QE(n,e,r,i)}finally{Pn=o,Xd.transition=s}}function B6(n,e,r,i){var o=Pn,s=Xd.transition;Xd.transition=null;try{Pn=4,QE(n,e,r,i)}finally{Pn=o,Xd.transition=s}}function QE(n,e,r,i){if(X0){var o=hw(n,e,r,i);if(o===null)db(n,e,i,K0,r),SA(n,i);else if(L6(o,n,e,r,i))i.stopPropagation();else if(SA(n,i),e&4&&-1<D6.indexOf(n)){for(;o!==null;){var s=tg(o);if(s!==null&&mF(s),s=hw(n,e,r,i),s===null&&db(n,e,i,K0,r),s===o)break;o=s}o!==null&&i.stopPropagation()}else db(n,e,i,null,r)}}var K0=null;function hw(n,e,r,i){if(K0=null,n=qE(i),n=Jc(n),n!==null)if(e=Iu(n),e===null)n=null;else if(r=e.tag,r===13){if(n=aF(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return K0=n,null}function _F(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E6()){case XE:return 1;case dF:return 4;case W0:case T6:return 16;case fF:return 536870912;default:return 16}default:return 16}}var Gl=null,ZE=null,h0=null;function bF(){if(h0)return h0;var n,e=ZE,r=e.length,i,o="value"in Gl?Gl.value:Gl.textContent,s=o.length;for(n=0;n<r&&e[n]===o[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===o[s-i];i++);return h0=o.slice(n,1<i?1-i:void 0)}function p0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Gg(){return!0}function CA(){return!1}function Ao(n){function e(r,i,o,s,a){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gg:CA,this.isPropagationStopped=CA,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gg)},persist:function(){},isPersistent:Gg}),e}var Zf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JE=Ao(Zf),eg=sr({},Zf,{view:0,detail:0}),$6=Ao(eg),nb,rb,Sh,dx=sr({},eg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eT,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sh&&(Sh&&n.type==="mousemove"?(nb=n.screenX-Sh.screenX,rb=n.screenY-Sh.screenY):rb=nb=0,Sh=n),nb)},movementY:function(n){return"movementY"in n?n.movementY:rb}}),EA=Ao(dx),z6=sr({},dx,{dataTransfer:0}),k6=Ao(z6),V6=sr({},eg,{relatedTarget:0}),ib=Ao(V6),G6=sr({},Zf,{animationName:0,elapsedTime:0,pseudoElement:0}),H6=Ao(G6),j6=sr({},Zf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),W6=Ao(j6),q6=sr({},Zf,{data:0}),TA=Ao(q6),X6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Y6[n])?!!e[n]:!1}function eT(){return Q6}var Z6=sr({},eg,{key:function(n){if(n.key){var e=X6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=p0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?K6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eT,charCode:function(n){return n.type==="keypress"?p0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?p0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),J6=Ao(Z6),eG=sr({},dx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MA=Ao(eG),tG=sr({},eg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eT}),nG=Ao(tG),rG=sr({},Zf,{propertyName:0,elapsedTime:0,pseudoElement:0}),iG=Ao(rG),oG=sr({},dx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sG=Ao(oG),aG=[9,13,27,32],tT=Ka&&"CompositionEvent"in window,Sp=null;Ka&&"documentMode"in document&&(Sp=document.documentMode);var lG=Ka&&"TextEvent"in window&&!Sp,SF=Ka&&(!tT||Sp&&8<Sp&&11>=Sp),RA=" ",AA=!1;function wF(n,e){switch(n){case"keyup":return aG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CF(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Cd=!1;function cG(n,e){switch(n){case"compositionend":return CF(e);case"keypress":return e.which!==32?null:(AA=!0,RA);case"textInput":return n=e.data,n===RA&&AA?null:n;default:return null}}function uG(n,e){if(Cd)return n==="compositionend"||!tT&&wF(n,e)?(n=bF(),h0=ZE=Gl=null,Cd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SF&&e.locale!=="ko"?null:e.data;default:return null}}var dG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!dG[n.type]:e==="textarea"}function EF(n,e,r,i){nF(i),e=Y0(e,"onChange"),0<e.length&&(r=new JE("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var wp=null,Kp=null;function fG(n){FF(n,0)}function fx(n){var e=Md(n);if(KL(e))return n}function hG(n,e){if(n==="change")return e}var TF=!1;if(Ka){var ob;if(Ka){var sb="oninput"in document;if(!sb){var PA=document.createElement("div");PA.setAttribute("oninput","return;"),sb=typeof PA.oninput=="function"}ob=sb}else ob=!1;TF=ob&&(!document.documentMode||9<document.documentMode)}function OA(){wp&&(wp.detachEvent("onpropertychange",MF),Kp=wp=null)}function MF(n){if(n.propertyName==="value"&&fx(Kp)){var e=[];EF(e,Kp,n,qE(n)),sF(fG,e)}}function pG(n,e,r){n==="focusin"?(OA(),wp=e,Kp=r,wp.attachEvent("onpropertychange",MF)):n==="focusout"&&OA()}function mG(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fx(Kp)}function gG(n,e){if(n==="click")return fx(e)}function vG(n,e){if(n==="input"||n==="change")return fx(e)}function yG(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ns=typeof Object.is=="function"?Object.is:yG;function Yp(n,e){if(Ns(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!K1.call(e,o)||!Ns(n[o],e[o]))return!1}return!0}function IA(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function DA(n,e){var r=IA(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=IA(r)}}function RF(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?RF(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function AF(){for(var n=window,e=G0();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=G0(n.document)}return e}function nT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function xG(n){var e=AF(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&RF(r.ownerDocument.documentElement,r)){if(i!==null&&nT(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=r.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!n.extend&&s>i&&(o=i,i=s,s=o),o=DA(r,s);var a=DA(r,i);o&&a&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _G=Ka&&"documentMode"in document&&11>=document.documentMode,Ed=null,pw=null,Cp=null,mw=!1;function LA(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mw||Ed==null||Ed!==G0(i)||(i=Ed,"selectionStart"in i&&nT(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Cp&&Yp(Cp,i)||(Cp=i,i=Y0(pw,"onSelect"),0<i.length&&(e=new JE("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=Ed)))}function Hg(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var Td={animationend:Hg("Animation","AnimationEnd"),animationiteration:Hg("Animation","AnimationIteration"),animationstart:Hg("Animation","AnimationStart"),transitionend:Hg("Transition","TransitionEnd")},ab={},NF={};Ka&&(NF=document.createElement("div").style,"AnimationEvent"in window||(delete Td.animationend.animation,delete Td.animationiteration.animation,delete Td.animationstart.animation),"TransitionEvent"in window||delete Td.transitionend.transition);function hx(n){if(ab[n])return ab[n];if(!Td[n])return n;var e=Td[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in NF)return ab[n]=e[r];return n}var PF=hx("animationend"),OF=hx("animationiteration"),IF=hx("animationstart"),DF=hx("transitionend"),LF=new Map,FA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mc(n,e){LF.set(n,e),Ou(e,[n])}for(var lb=0;lb<FA.length;lb++){var cb=FA[lb],bG=cb.toLowerCase(),SG=cb[0].toUpperCase()+cb.slice(1);mc(bG,"on"+SG)}mc(PF,"onAnimationEnd");mc(OF,"onAnimationIteration");mc(IF,"onAnimationStart");mc("dblclick","onDoubleClick");mc("focusin","onFocus");mc("focusout","onBlur");mc(DF,"onTransitionEnd");lf("onMouseEnter",["mouseout","mouseover"]);lf("onMouseLeave",["mouseout","mouseover"]);lf("onPointerEnter",["pointerout","pointerover"]);lf("onPointerLeave",["pointerout","pointerover"]);Ou("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ou("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ou("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ou("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ou("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ou("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wG=new Set("cancel close invalid load scroll toggle".split(" ").concat(cp));function UA(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,b6(i,e,void 0,n),n.currentTarget=null}function FF(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&o.isPropagationStopped())break e;UA(o,l,u),s=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&o.isPropagationStopped())break e;UA(o,l,u),s=c}}}if(j0)throw n=uw,j0=!1,uw=null,n}function Gn(n,e){var r=e[_w];r===void 0&&(r=e[_w]=new Set);var i=n+"__bubble";r.has(i)||(UF(e,n,2,!1),r.add(i))}function ub(n,e,r){var i=0;e&&(i|=4),UF(r,n,i,e)}var jg="_reactListening"+Math.random().toString(36).slice(2);function Qp(n){if(!n[jg]){n[jg]=!0,HL.forEach(function(r){r!=="selectionchange"&&(wG.has(r)||ub(r,!1,n),ub(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[jg]||(e[jg]=!0,ub("selectionchange",!1,e))}}function UF(n,e,r,i){switch(_F(e)){case 1:var o=U6;break;case 4:o=B6;break;default:o=QE}r=o.bind(null,e,r,n),o=void 0,!cw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?n.addEventListener(e,r,{capture:!0,passive:o}):n.addEventListener(e,r,!0):o!==void 0?n.addEventListener(e,r,{passive:o}):n.addEventListener(e,r,!1)}function db(n,e,r,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;l!==null;){if(a=Jc(l),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}l=l.parentNode}}i=i.return}sF(function(){var u=s,d=qE(r),f=[];e:{var h=LF.get(n);if(h!==void 0){var p=JE,g=n;switch(n){case"keypress":if(p0(r)===0)break e;case"keydown":case"keyup":p=J6;break;case"focusin":g="focus",p=ib;break;case"focusout":g="blur",p=ib;break;case"beforeblur":case"afterblur":p=ib;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=EA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=k6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=nG;break;case PF:case OF:case IF:p=H6;break;case DF:p=iG;break;case"scroll":p=$6;break;case"wheel":p=sG;break;case"copy":case"cut":case"paste":p=W6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=MA}var y=(e&4)!==0,v=!y&&n==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var x=u,_;x!==null;){_=x;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,m!==null&&(S=jp(x,m),S!=null&&y.push(Zp(x,S,_)))),v)break;x=x.return}0<y.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",h&&r!==aw&&(g=r.relatedTarget||r.fromElement)&&(Jc(g)||g[Ya]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Jc(g):null,g!==null&&(v=Iu(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=EA,S="onMouseLeave",m="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(y=MA,S="onPointerLeave",m="onPointerEnter",x="pointer"),v=p==null?h:Md(p),_=g==null?h:Md(g),h=new y(S,x+"leave",p,r,d),h.target=v,h.relatedTarget=_,S=null,Jc(d)===u&&(y=new y(m,x+"enter",g,r,d),y.target=_,y.relatedTarget=v,S=y),v=S,p&&g)t:{for(y=p,m=g,x=0,_=y;_;_=qu(_))x++;for(_=0,S=m;S;S=qu(S))_++;for(;0<x-_;)y=qu(y),x--;for(;0<_-x;)m=qu(m),_--;for(;x--;){if(y===m||m!==null&&y===m.alternate)break t;y=qu(y),m=qu(m)}y=null}else y=null;p!==null&&BA(f,h,p,y,!1),g!==null&&v!==null&&BA(f,v,g,y,!0)}}e:{if(h=u?Md(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=hG;else if(NA(h))if(TF)w=vG;else{w=mG;var C=pG}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=gG);if(w&&(w=w(n,u))){EF(f,w,r,d);break e}C&&C(n,h,u),n==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&nw(h,"number",h.value)}switch(C=u?Md(u):window,n){case"focusin":(NA(C)||C.contentEditable==="true")&&(Ed=C,pw=u,Cp=null);break;case"focusout":Cp=pw=Ed=null;break;case"mousedown":mw=!0;break;case"contextmenu":case"mouseup":case"dragend":mw=!1,LA(f,r,d);break;case"selectionchange":if(_G)break;case"keydown":case"keyup":LA(f,r,d)}var E;if(tT)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Cd?wF(n,r)&&(T="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(SF&&r.locale!=="ko"&&(Cd||T!=="onCompositionStart"?T==="onCompositionEnd"&&Cd&&(E=bF()):(Gl=d,ZE="value"in Gl?Gl.value:Gl.textContent,Cd=!0)),C=Y0(u,T),0<C.length&&(T=new TA(T,n,null,r,d),f.push({event:T,listeners:C}),E?T.data=E:(E=CF(r),E!==null&&(T.data=E)))),(E=lG?cG(n,r):uG(n,r))&&(u=Y0(u,"onBeforeInput"),0<u.length&&(d=new TA("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=E))}FF(f,e)})}function Zp(n,e,r){return{instance:n,listener:e,currentTarget:r}}function Y0(n,e){for(var r=e+"Capture",i=[];n!==null;){var o=n,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=jp(n,r),s!=null&&i.unshift(Zp(n,s,o)),s=jp(n,e),s!=null&&i.push(Zp(n,s,o))),n=n.return}return i}function qu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function BA(n,e,r,i,o){for(var s=e._reactName,a=[];r!==null&&r!==i;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,o?(c=jp(r,s),c!=null&&a.unshift(Zp(r,c,l))):o||(c=jp(r,s),c!=null&&a.push(Zp(r,c,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var CG=/\r\n?/g,EG=/\u0000|\uFFFD/g;function $A(n){return(typeof n=="string"?n:""+n).replace(CG,`
`).replace(EG,"")}function Wg(n,e,r){if(e=$A(e),$A(n)!==e&&r)throw Error(tt(425))}function Q0(){}var gw=null,vw=null;function yw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xw=typeof setTimeout=="function"?setTimeout:void 0,TG=typeof clearTimeout=="function"?clearTimeout:void 0,zA=typeof Promise=="function"?Promise:void 0,MG=typeof queueMicrotask=="function"?queueMicrotask:typeof zA<"u"?function(n){return zA.resolve(null).then(n).catch(RG)}:xw;function RG(n){setTimeout(function(){throw n})}function fb(n,e){var r=e,i=0;do{var o=r.nextSibling;if(n.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){n.removeChild(o),Xp(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Xp(e)}function Ql(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function kA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var Jf=Math.random().toString(36).slice(2),Hs="__reactFiber$"+Jf,Jp="__reactProps$"+Jf,Ya="__reactContainer$"+Jf,_w="__reactEvents$"+Jf,AG="__reactListeners$"+Jf,NG="__reactHandles$"+Jf;function Jc(n){var e=n[Hs];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Ya]||r[Hs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=kA(n);n!==null;){if(r=n[Hs])return r;n=kA(n)}return e}n=r,r=n.parentNode}return null}function tg(n){return n=n[Hs]||n[Ya],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Md(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(tt(33))}function px(n){return n[Jp]||null}var bw=[],Rd=-1;function gc(n){return{current:n}}function Xn(n){0>Rd||(n.current=bw[Rd],bw[Rd]=null,Rd--)}function kn(n,e){Rd++,bw[Rd]=n.current,n.current=e}var lc={},gi=gc(lc),Qi=gc(!1),mu=lc;function cf(n,e){var r=n.type.contextTypes;if(!r)return lc;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),o}function Zi(n){return n=n.childContextTypes,n!=null}function Z0(){Xn(Qi),Xn(gi)}function VA(n,e,r){if(gi.current!==lc)throw Error(tt(168));kn(gi,e),kn(Qi,r)}function BF(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(tt(108,p6(n)||"Unknown",o));return sr({},r,i)}function J0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||lc,mu=gi.current,kn(gi,n),kn(Qi,Qi.current),!0}function GA(n,e,r){var i=n.stateNode;if(!i)throw Error(tt(169));r?(n=BF(n,e,mu),i.__reactInternalMemoizedMergedChildContext=n,Xn(Qi),Xn(gi),kn(gi,n)):Xn(Qi),kn(Qi,r)}var Aa=null,mx=!1,hb=!1;function $F(n){Aa===null?Aa=[n]:Aa.push(n)}function PG(n){mx=!0,$F(n)}function vc(){if(!hb&&Aa!==null){hb=!0;var n=0,e=Pn;try{var r=Aa;for(Pn=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}Aa=null,mx=!1}catch(o){throw Aa!==null&&(Aa=Aa.slice(n+1)),uF(XE,vc),o}finally{Pn=e,hb=!1}}return null}var Ad=[],Nd=0,ey=null,ty=0,zo=[],ko=0,gu=null,Fa=1,Ua="";function Bc(n,e){Ad[Nd++]=ty,Ad[Nd++]=ey,ey=n,ty=e}function zF(n,e,r){zo[ko++]=Fa,zo[ko++]=Ua,zo[ko++]=gu,gu=n;var i=Fa;n=Ua;var o=32-Es(i)-1;i&=~(1<<o),r+=1;var s=32-Es(e)+o;if(30<s){var a=o-o%5;s=(i&(1<<a)-1).toString(32),i>>=a,o-=a,Fa=1<<32-Es(e)+o|r<<o|i,Ua=s+n}else Fa=1<<s|r<<o|i,Ua=n}function rT(n){n.return!==null&&(Bc(n,1),zF(n,1,0))}function iT(n){for(;n===ey;)ey=Ad[--Nd],Ad[Nd]=null,ty=Ad[--Nd],Ad[Nd]=null;for(;n===gu;)gu=zo[--ko],zo[ko]=null,Ua=zo[--ko],zo[ko]=null,Fa=zo[--ko],zo[ko]=null}var wo=null,bo=null,Jn=!1,gs=null;function kF(n,e){var r=Ho(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function HA(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wo=n,bo=Ql(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wo=n,bo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=gu!==null?{id:Fa,overflow:Ua}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ho(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,wo=n,bo=null,!0):!1;default:return!1}}function Sw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ww(n){if(Jn){var e=bo;if(e){var r=e;if(!HA(n,e)){if(Sw(n))throw Error(tt(418));e=Ql(r.nextSibling);var i=wo;e&&HA(n,e)?kF(i,r):(n.flags=n.flags&-4097|2,Jn=!1,wo=n)}}else{if(Sw(n))throw Error(tt(418));n.flags=n.flags&-4097|2,Jn=!1,wo=n}}}function jA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wo=n}function qg(n){if(n!==wo)return!1;if(!Jn)return jA(n),Jn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!yw(n.type,n.memoizedProps)),e&&(e=bo)){if(Sw(n))throw VF(),Error(tt(418));for(;e;)kF(n,e),e=Ql(e.nextSibling)}if(jA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(tt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){bo=Ql(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}bo=null}}else bo=wo?Ql(n.stateNode.nextSibling):null;return!0}function VF(){for(var n=bo;n;)n=Ql(n.nextSibling)}function uf(){bo=wo=null,Jn=!1}function oT(n){gs===null?gs=[n]:gs.push(n)}var OG=al.ReactCurrentBatchConfig;function wh(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(tt(309));var i=r.stateNode}if(!i)throw Error(tt(147,n));var o=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=o.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(tt(284));if(!r._owner)throw Error(tt(290,n))}return n}function Xg(n,e){throw n=Object.prototype.toString.call(e),Error(tt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function WA(n){var e=n._init;return e(n._payload)}function GF(n){function e(m,x){if(n){var _=m.deletions;_===null?(m.deletions=[x],m.flags|=16):_.push(x)}}function r(m,x){if(!n)return null;for(;x!==null;)e(m,x),x=x.sibling;return null}function i(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function o(m,x){return m=tc(m,x),m.index=0,m.sibling=null,m}function s(m,x,_){return m.index=_,n?(_=m.alternate,_!==null?(_=_.index,_<x?(m.flags|=2,x):_):(m.flags|=2,x)):(m.flags|=1048576,x)}function a(m){return n&&m.alternate===null&&(m.flags|=2),m}function l(m,x,_,S){return x===null||x.tag!==6?(x=_b(_,m.mode,S),x.return=m,x):(x=o(x,_),x.return=m,x)}function c(m,x,_,S){var w=_.type;return w===wd?d(m,x,_.props.children,S,_.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Dl&&WA(w)===x.type)?(S=o(x,_.props),S.ref=wh(m,x,_),S.return=m,S):(S=b0(_.type,_.key,_.props,null,m.mode,S),S.ref=wh(m,x,_),S.return=m,S)}function u(m,x,_,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=bb(_,m.mode,S),x.return=m,x):(x=o(x,_.children||[]),x.return=m,x)}function d(m,x,_,S,w){return x===null||x.tag!==7?(x=au(_,m.mode,S,w),x.return=m,x):(x=o(x,_),x.return=m,x)}function f(m,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=_b(""+x,m.mode,_),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ug:return _=b0(x.type,x.key,x.props,null,m.mode,_),_.ref=wh(m,null,x),_.return=m,_;case Sd:return x=bb(x,m.mode,_),x.return=m,x;case Dl:var S=x._init;return f(m,S(x._payload),_)}if(ap(x)||yh(x))return x=au(x,m.mode,_,null),x.return=m,x;Xg(m,x)}return null}function h(m,x,_,S){var w=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:l(m,x,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ug:return _.key===w?c(m,x,_,S):null;case Sd:return _.key===w?u(m,x,_,S):null;case Dl:return w=_._init,h(m,x,w(_._payload),S)}if(ap(_)||yh(_))return w!==null?null:d(m,x,_,S,null);Xg(m,_)}return null}function p(m,x,_,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(_)||null,l(x,m,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ug:return m=m.get(S.key===null?_:S.key)||null,c(x,m,S,w);case Sd:return m=m.get(S.key===null?_:S.key)||null,u(x,m,S,w);case Dl:var C=S._init;return p(m,x,_,C(S._payload),w)}if(ap(S)||yh(S))return m=m.get(_)||null,d(x,m,S,w,null);Xg(x,S)}return null}function g(m,x,_,S){for(var w=null,C=null,E=x,T=x=0,M=null;E!==null&&T<_.length;T++){E.index>T?(M=E,E=null):M=E.sibling;var R=h(m,E,_[T],S);if(R===null){E===null&&(E=M);break}n&&E&&R.alternate===null&&e(m,E),x=s(R,x,T),C===null?w=R:C.sibling=R,C=R,E=M}if(T===_.length)return r(m,E),Jn&&Bc(m,T),w;if(E===null){for(;T<_.length;T++)E=f(m,_[T],S),E!==null&&(x=s(E,x,T),C===null?w=E:C.sibling=E,C=E);return Jn&&Bc(m,T),w}for(E=i(m,E);T<_.length;T++)M=p(E,m,T,_[T],S),M!==null&&(n&&M.alternate!==null&&E.delete(M.key===null?T:M.key),x=s(M,x,T),C===null?w=M:C.sibling=M,C=M);return n&&E.forEach(function(N){return e(m,N)}),Jn&&Bc(m,T),w}function y(m,x,_,S){var w=yh(_);if(typeof w!="function")throw Error(tt(150));if(_=w.call(_),_==null)throw Error(tt(151));for(var C=w=null,E=x,T=x=0,M=null,R=_.next();E!==null&&!R.done;T++,R=_.next()){E.index>T?(M=E,E=null):M=E.sibling;var N=h(m,E,R.value,S);if(N===null){E===null&&(E=M);break}n&&E&&N.alternate===null&&e(m,E),x=s(N,x,T),C===null?w=N:C.sibling=N,C=N,E=M}if(R.done)return r(m,E),Jn&&Bc(m,T),w;if(E===null){for(;!R.done;T++,R=_.next())R=f(m,R.value,S),R!==null&&(x=s(R,x,T),C===null?w=R:C.sibling=R,C=R);return Jn&&Bc(m,T),w}for(E=i(m,E);!R.done;T++,R=_.next())R=p(E,m,T,R.value,S),R!==null&&(n&&R.alternate!==null&&E.delete(R.key===null?T:R.key),x=s(R,x,T),C===null?w=R:C.sibling=R,C=R);return n&&E.forEach(function(D){return e(m,D)}),Jn&&Bc(m,T),w}function v(m,x,_,S){if(typeof _=="object"&&_!==null&&_.type===wd&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ug:e:{for(var w=_.key,C=x;C!==null;){if(C.key===w){if(w=_.type,w===wd){if(C.tag===7){r(m,C.sibling),x=o(C,_.props.children),x.return=m,m=x;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Dl&&WA(w)===C.type){r(m,C.sibling),x=o(C,_.props),x.ref=wh(m,C,_),x.return=m,m=x;break e}r(m,C);break}else e(m,C);C=C.sibling}_.type===wd?(x=au(_.props.children,m.mode,S,_.key),x.return=m,m=x):(S=b0(_.type,_.key,_.props,null,m.mode,S),S.ref=wh(m,x,_),S.return=m,m=S)}return a(m);case Sd:e:{for(C=_.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){r(m,x.sibling),x=o(x,_.children||[]),x.return=m,m=x;break e}else{r(m,x);break}else e(m,x);x=x.sibling}x=bb(_,m.mode,S),x.return=m,m=x}return a(m);case Dl:return C=_._init,v(m,x,C(_._payload),S)}if(ap(_))return g(m,x,_,S);if(yh(_))return y(m,x,_,S);Xg(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(r(m,x.sibling),x=o(x,_),x.return=m,m=x):(r(m,x),x=_b(_,m.mode,S),x.return=m,m=x),a(m)):r(m,x)}return v}var df=GF(!0),HF=GF(!1),ny=gc(null),ry=null,Pd=null,sT=null;function aT(){sT=Pd=ry=null}function lT(n){var e=ny.current;Xn(ny),n._currentValue=e}function Cw(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Kd(n,e){ry=n,sT=Pd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Hi=!0),n.firstContext=null)}function Yo(n){var e=n._currentValue;if(sT!==n)if(n={context:n,memoizedValue:e,next:null},Pd===null){if(ry===null)throw Error(tt(308));Pd=n,ry.dependencies={lanes:0,firstContext:n}}else Pd=Pd.next=n;return e}var eu=null;function cT(n){eu===null?eu=[n]:eu.push(n)}function jF(n,e,r,i){var o=e.interleaved;return o===null?(r.next=r,cT(e)):(r.next=o.next,o.next=r),e.interleaved=r,Qa(n,i)}function Qa(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var Ll=!1;function uT(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WF(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Va(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Zl(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,vn&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Qa(n,r)}return o=i.interleaved,o===null?(e.next=e,cT(i)):(e.next=o.next,o.next=e),i.interleaved=e,Qa(n,r)}function m0(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,KE(n,r)}}function qA(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?o=s=e:s=s.next=e}else o=s=e;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function iy(n,e,r,i){var o=n.updateQueue;Ll=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=o.baseState;a=0,d=u=c=null,l=s;do{var h=l.lane,p=l.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=n,y=l;switch(h=e,p=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=sr({},f,h);break e;case 2:Ll=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(c=f),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);yu|=a,n.lanes=a,n.memoizedState=f}}function XA(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(tt(191,o));o.call(i)}}}var ng={},Qs=gc(ng),em=gc(ng),tm=gc(ng);function tu(n){if(n===ng)throw Error(tt(174));return n}function dT(n,e){switch(kn(tm,e),kn(em,n),kn(Qs,ng),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=iw(e,n)}Xn(Qs),kn(Qs,e)}function ff(){Xn(Qs),Xn(em),Xn(tm)}function qF(n){tu(tm.current);var e=tu(Qs.current),r=iw(e,n.type);e!==r&&(kn(em,n),kn(Qs,r))}function fT(n){em.current===n&&(Xn(Qs),Xn(em))}var nr=gc(0);function oy(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pb=[];function hT(){for(var n=0;n<pb.length;n++)pb[n]._workInProgressVersionPrimary=null;pb.length=0}var g0=al.ReactCurrentDispatcher,mb=al.ReactCurrentBatchConfig,vu=0,or=null,Lr=null,Xr=null,sy=!1,Ep=!1,nm=0,IG=0;function li(){throw Error(tt(321))}function pT(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!Ns(n[r],e[r]))return!1;return!0}function mT(n,e,r,i,o,s){if(vu=s,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,g0.current=n===null||n.memoizedState===null?UG:BG,n=r(i,o),Ep){s=0;do{if(Ep=!1,nm=0,25<=s)throw Error(tt(301));s+=1,Xr=Lr=null,e.updateQueue=null,g0.current=$G,n=r(i,o)}while(Ep)}if(g0.current=ay,e=Lr!==null&&Lr.next!==null,vu=0,Xr=Lr=or=null,sy=!1,e)throw Error(tt(300));return n}function gT(){var n=nm!==0;return nm=0,n}function zs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?or.memoizedState=Xr=n:Xr=Xr.next=n,Xr}function Qo(){if(Lr===null){var n=or.alternate;n=n!==null?n.memoizedState:null}else n=Lr.next;var e=Xr===null?or.memoizedState:Xr.next;if(e!==null)Xr=e,Lr=n;else{if(n===null)throw Error(tt(310));Lr=n,n={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Xr===null?or.memoizedState=Xr=n:Xr=Xr.next=n}return Xr}function rm(n,e){return typeof e=="function"?e(n):e}function gb(n){var e=Qo(),r=e.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=n;var i=Lr,o=i.baseQueue,s=r.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}i.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,i=i.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((vu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=i):c=c.next=f,or.lanes|=d,yu|=d}u=u.next}while(u!==null&&u!==s);c===null?a=i:c.next=l,Ns(i,e.memoizedState)||(Hi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}if(n=r.interleaved,n!==null){o=n;do s=o.lane,or.lanes|=s,yu|=s,o=o.next;while(o!==n)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function vb(n){var e=Qo(),r=e.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=n;var i=r.dispatch,o=r.pending,s=e.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do s=n(s,a.action),a=a.next;while(a!==o);Ns(s,e.memoizedState)||(Hi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,i]}function XF(){}function KF(n,e){var r=or,i=Qo(),o=e(),s=!Ns(i.memoizedState,o);if(s&&(i.memoizedState=o,Hi=!0),i=i.queue,vT(ZF.bind(null,r,i,n),[n]),i.getSnapshot!==e||s||Xr!==null&&Xr.memoizedState.tag&1){if(r.flags|=2048,im(9,QF.bind(null,r,i,o,e),void 0,null),Yr===null)throw Error(tt(349));vu&30||YF(r,e,o)}return o}function YF(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function QF(n,e,r,i){e.value=r,e.getSnapshot=i,JF(e)&&e3(n)}function ZF(n,e,r){return r(function(){JF(e)&&e3(n)})}function JF(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!Ns(n,r)}catch{return!0}}function e3(n){var e=Qa(n,1);e!==null&&Ts(e,n,1,-1)}function KA(n){var e=zs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:n},e.queue=n,n=n.dispatch=FG.bind(null,or,n),[e.memoizedState,n]}function im(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function t3(){return Qo().memoizedState}function v0(n,e,r,i){var o=zs();or.flags|=n,o.memoizedState=im(1|e,r,void 0,i===void 0?null:i)}function gx(n,e,r,i){var o=Qo();i=i===void 0?null:i;var s=void 0;if(Lr!==null){var a=Lr.memoizedState;if(s=a.destroy,i!==null&&pT(i,a.deps)){o.memoizedState=im(e,r,s,i);return}}or.flags|=n,o.memoizedState=im(1|e,r,s,i)}function YA(n,e){return v0(8390656,8,n,e)}function vT(n,e){return gx(2048,8,n,e)}function n3(n,e){return gx(4,2,n,e)}function r3(n,e){return gx(4,4,n,e)}function i3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function o3(n,e,r){return r=r!=null?r.concat([n]):null,gx(4,4,i3.bind(null,e,n),r)}function yT(){}function s3(n,e){var r=Qo();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&pT(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function a3(n,e){var r=Qo();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&pT(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function l3(n,e,r){return vu&21?(Ns(r,e)||(r=hF(),or.lanes|=r,yu|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Hi=!0),n.memoizedState=r)}function DG(n,e){var r=Pn;Pn=r!==0&&4>r?r:4,n(!0);var i=mb.transition;mb.transition={};try{n(!1),e()}finally{Pn=r,mb.transition=i}}function c3(){return Qo().memoizedState}function LG(n,e,r){var i=ec(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},u3(n))d3(e,r);else if(r=jF(n,e,r,i),r!==null){var o=Ni();Ts(r,n,i,o),f3(r,e,i)}}function FG(n,e,r){var i=ec(n),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(u3(n))d3(e,o);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,r);if(o.hasEagerState=!0,o.eagerState=l,Ns(l,a)){var c=e.interleaved;c===null?(o.next=o,cT(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}r=jF(n,e,o,i),r!==null&&(o=Ni(),Ts(r,n,i,o),f3(r,e,i))}}function u3(n){var e=n.alternate;return n===or||e!==null&&e===or}function d3(n,e){Ep=sy=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function f3(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,KE(n,r)}}var ay={readContext:Yo,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useInsertionEffect:li,useLayoutEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useMutableSource:li,useSyncExternalStore:li,useId:li,unstable_isNewReconciler:!1},UG={readContext:Yo,useCallback:function(n,e){return zs().memoizedState=[n,e===void 0?null:e],n},useContext:Yo,useEffect:YA,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,v0(4194308,4,i3.bind(null,e,n),r)},useLayoutEffect:function(n,e){return v0(4194308,4,n,e)},useInsertionEffect:function(n,e){return v0(4,2,n,e)},useMemo:function(n,e){var r=zs();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=zs();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=LG.bind(null,or,n),[i.memoizedState,n]},useRef:function(n){var e=zs();return n={current:n},e.memoizedState=n},useState:KA,useDebugValue:yT,useDeferredValue:function(n){return zs().memoizedState=n},useTransition:function(){var n=KA(!1),e=n[0];return n=DG.bind(null,n[1]),zs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=or,o=zs();if(Jn){if(r===void 0)throw Error(tt(407));r=r()}else{if(r=e(),Yr===null)throw Error(tt(349));vu&30||YF(i,e,r)}o.memoizedState=r;var s={value:r,getSnapshot:e};return o.queue=s,YA(ZF.bind(null,i,s,n),[n]),i.flags|=2048,im(9,QF.bind(null,i,s,r,e),void 0,null),r},useId:function(){var n=zs(),e=Yr.identifierPrefix;if(Jn){var r=Ua,i=Fa;r=(i&~(1<<32-Es(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=nm++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=IG++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},BG={readContext:Yo,useCallback:s3,useContext:Yo,useEffect:vT,useImperativeHandle:o3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:a3,useReducer:gb,useRef:t3,useState:function(){return gb(rm)},useDebugValue:yT,useDeferredValue:function(n){var e=Qo();return l3(e,Lr.memoizedState,n)},useTransition:function(){var n=gb(rm)[0],e=Qo().memoizedState;return[n,e]},useMutableSource:XF,useSyncExternalStore:KF,useId:c3,unstable_isNewReconciler:!1},$G={readContext:Yo,useCallback:s3,useContext:Yo,useEffect:vT,useImperativeHandle:o3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:a3,useReducer:vb,useRef:t3,useState:function(){return vb(rm)},useDebugValue:yT,useDeferredValue:function(n){var e=Qo();return Lr===null?e.memoizedState=n:l3(e,Lr.memoizedState,n)},useTransition:function(){var n=vb(rm)[0],e=Qo().memoizedState;return[n,e]},useMutableSource:XF,useSyncExternalStore:KF,useId:c3,unstable_isNewReconciler:!1};function ds(n,e){if(n&&n.defaultProps){e=sr({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function Ew(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:sr({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var vx={isMounted:function(n){return(n=n._reactInternals)?Iu(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Ni(),o=ec(n),s=Va(i,o);s.payload=e,r!=null&&(s.callback=r),e=Zl(n,s,o),e!==null&&(Ts(e,n,o,i),m0(e,n,o))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Ni(),o=ec(n),s=Va(i,o);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Zl(n,s,o),e!==null&&(Ts(e,n,o,i),m0(e,n,o))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Ni(),i=ec(n),o=Va(r,i);o.tag=2,e!=null&&(o.callback=e),e=Zl(n,o,i),e!==null&&(Ts(e,n,i,r),m0(e,n,i))}};function QA(n,e,r,i,o,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Yp(r,i)||!Yp(o,s):!0}function h3(n,e,r){var i=!1,o=lc,s=e.contextType;return typeof s=="object"&&s!==null?s=Yo(s):(o=Zi(e)?mu:gi.current,i=e.contextTypes,s=(i=i!=null)?cf(n,o):lc),e=new e(r,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vx,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=s),e}function ZA(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&vx.enqueueReplaceState(e,e.state,null)}function Tw(n,e,r,i){var o=n.stateNode;o.props=r,o.state=n.memoizedState,o.refs={},uT(n);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Yo(s):(s=Zi(e)?mu:gi.current,o.context=cf(n,s)),o.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ew(n,e,s,r),o.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&vx.enqueueReplaceState(o,o.state,null),iy(n,r,o,i),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308)}function hf(n,e){try{var r="",i=e;do r+=h6(i),i=i.return;while(i);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:o,digest:null}}function yb(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function Mw(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var zG=typeof WeakMap=="function"?WeakMap:Map;function p3(n,e,r){r=Va(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){cy||(cy=!0,Uw=i),Mw(n,e)},r}function m3(n,e,r){r=Va(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;r.payload=function(){return i(o)},r.callback=function(){Mw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Mw(n,e),typeof i!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function JA(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new zG;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(r)||(o.add(r),n=eH.bind(null,n,e,r),e.then(n,n))}function e2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function t2(n,e,r,i,o){return n.mode&1?(n.flags|=65536,n.lanes=o,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Va(-1,1),e.tag=2,Zl(r,e,1))),r.lanes|=1),n)}var kG=al.ReactCurrentOwner,Hi=!1;function Ei(n,e,r,i){e.child=n===null?HF(e,null,r,i):df(e,n.child,r,i)}function n2(n,e,r,i,o){r=r.render;var s=e.ref;return Kd(e,o),i=mT(n,e,r,i,s,o),r=gT(),n!==null&&!Hi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Za(n,e,o)):(Jn&&r&&rT(e),e.flags|=1,Ei(n,e,i,o),e.child)}function r2(n,e,r,i,o){if(n===null){var s=r.type;return typeof s=="function"&&!TT(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,g3(n,e,s,i,o)):(n=b0(r.type,null,i,e,e.mode,o),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&o)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Yp,r(a,i)&&n.ref===e.ref)return Za(n,e,o)}return e.flags|=1,n=tc(s,i),n.ref=e.ref,n.return=e,e.child=n}function g3(n,e,r,i,o){if(n!==null){var s=n.memoizedProps;if(Yp(s,i)&&n.ref===e.ref)if(Hi=!1,e.pendingProps=i=s,(n.lanes&o)!==0)n.flags&131072&&(Hi=!0);else return e.lanes=n.lanes,Za(n,e,o)}return Rw(n,e,r,i,o)}function v3(n,e,r){var i=e.pendingProps,o=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Id,vo),vo|=r;else{if(!(r&1073741824))return n=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,kn(Id,vo),vo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,kn(Id,vo),vo|=i}else s!==null?(i=s.baseLanes|r,e.memoizedState=null):i=r,kn(Id,vo),vo|=i;return Ei(n,e,o,r),e.child}function y3(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rw(n,e,r,i,o){var s=Zi(r)?mu:gi.current;return s=cf(e,s),Kd(e,o),r=mT(n,e,r,i,s,o),i=gT(),n!==null&&!Hi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Za(n,e,o)):(Jn&&i&&rT(e),e.flags|=1,Ei(n,e,r,o),e.child)}function i2(n,e,r,i,o){if(Zi(r)){var s=!0;J0(e)}else s=!1;if(Kd(e,o),e.stateNode===null)y0(n,e),h3(e,r,i),Tw(e,r,i,o),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Yo(u):(u=Zi(r)?mu:gi.current,u=cf(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||c!==u)&&ZA(e,a,i,u),Ll=!1;var h=e.memoizedState;a.state=h,iy(e,i,a,o),c=e.memoizedState,l!==i||h!==c||Qi.current||Ll?(typeof d=="function"&&(Ew(e,r,d,i),c=e.memoizedState),(l=Ll||QA(e,r,l,i,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,WF(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:ds(e.type,l),a.props=u,f=e.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Yo(c):(c=Zi(r)?mu:gi.current,c=cf(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&ZA(e,a,i,c),Ll=!1,h=e.memoizedState,a.state=h,iy(e,i,a,o);var g=e.memoizedState;l!==f||h!==g||Qi.current||Ll?(typeof p=="function"&&(Ew(e,r,p,i),g=e.memoizedState),(u=Ll||QA(e,r,u,i,h,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return Aw(n,e,r,i,s,o)}function Aw(n,e,r,i,o,s){y3(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return o&&GA(e,r,!1),Za(n,e,s);i=e.stateNode,kG.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=df(e,n.child,null,s),e.child=df(e,null,l,s)):Ei(n,e,l,s),e.memoizedState=i.state,o&&GA(e,r,!0),e.child}function x3(n){var e=n.stateNode;e.pendingContext?VA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&VA(n,e.context,!1),dT(n,e.containerInfo)}function o2(n,e,r,i,o){return uf(),oT(o),e.flags|=256,Ei(n,e,r,i),e.child}var Nw={dehydrated:null,treeContext:null,retryLane:0};function Pw(n){return{baseLanes:n,cachePool:null,transitions:null}}function _3(n,e,r){var i=e.pendingProps,o=nr.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(o|=1),kn(nr,o&1),n===null)return ww(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=_x(a,i,0,null),n=au(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Pw(r),e.memoizedState=Nw,n):xT(e,a));if(o=n.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return VG(n,e,a,i,l,o,r);if(s){s=i.fallback,a=e.mode,o=n.child,l=o.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=tc(o,c),i.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=tc(l,s):(s=au(s,a,r,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?Pw(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~r,e.memoizedState=Nw,i}return s=n.child,n=s.sibling,i=tc(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function xT(n,e){return e=_x({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Kg(n,e,r,i){return i!==null&&oT(i),df(e,n.child,null,r),n=xT(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function VG(n,e,r,i,o,s,a){if(r)return e.flags&256?(e.flags&=-257,i=yb(Error(tt(422))),Kg(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=_x({mode:"visible",children:i.children},o,0,null),s=au(s,o,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&df(e,n.child,null,a),e.child.memoizedState=Pw(a),e.memoizedState=Nw,s);if(!(e.mode&1))return Kg(n,e,a,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(tt(419)),i=yb(s,i,void 0),Kg(n,e,a,i)}if(l=(a&n.childLanes)!==0,Hi||l){if(i=Yr,i!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Qa(n,o),Ts(i,n,o,-1))}return ET(),i=yb(Error(tt(421))),Kg(n,e,a,i)}return o.data==="$?"?(e.flags|=128,e.child=n.child,e=tH.bind(null,n),o._reactRetry=e,null):(n=s.treeContext,bo=Ql(o.nextSibling),wo=e,Jn=!0,gs=null,n!==null&&(zo[ko++]=Fa,zo[ko++]=Ua,zo[ko++]=gu,Fa=n.id,Ua=n.overflow,gu=e),e=xT(e,i.children),e.flags|=4096,e)}function s2(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Cw(n.return,e,r)}function xb(n,e,r,i,o){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=o)}function b3(n,e,r){var i=e.pendingProps,o=i.revealOrder,s=i.tail;if(Ei(n,e,i.children,r),i=nr.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&s2(n,r,e);else if(n.tag===19)s2(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(kn(nr,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)n=r.alternate,n!==null&&oy(n)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),xb(e,!1,o,r,s);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(n=o.alternate,n!==null&&oy(n)===null){e.child=o;break}n=o.sibling,o.sibling=r,r=o,o=n}xb(e,!0,r,null,s);break;case"together":xb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function y0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Za(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),yu|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(tt(153));if(e.child!==null){for(n=e.child,r=tc(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=tc(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function GG(n,e,r){switch(e.tag){case 3:x3(e),uf();break;case 5:qF(e);break;case 1:Zi(e.type)&&J0(e);break;case 4:dT(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;kn(ny,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(kn(nr,nr.current&1),e.flags|=128,null):r&e.child.childLanes?_3(n,e,r):(kn(nr,nr.current&1),n=Za(n,e,r),n!==null?n.sibling:null);kn(nr,nr.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return b3(n,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),kn(nr,nr.current),i)break;return null;case 22:case 23:return e.lanes=0,v3(n,e,r)}return Za(n,e,r)}var S3,Ow,w3,C3;S3=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ow=function(){};w3=function(n,e,r,i){var o=n.memoizedProps;if(o!==i){n=e.stateNode,tu(Qs.current);var s=null;switch(r){case"input":o=ew(n,o),i=ew(n,i),s=[];break;case"select":o=sr({},o,{value:void 0}),i=sr({},i,{value:void 0}),s=[];break;case"textarea":o=rw(n,o),i=rw(n,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Q0)}ow(r,i);var a;r=null;for(u in o)if(!i.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gp.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=o!=null?o[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Gn("scroll",n),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};C3=function(n,e,r,i){r!==i&&(e.flags|=4)};function Ch(n,e){if(!Jn)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ci(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var o=n.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=n,o=o.sibling;else for(o=n.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=n,o=o.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function HG(n,e,r){var i=e.pendingProps;switch(iT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ci(e),null;case 1:return Zi(e.type)&&Z0(),ci(e),null;case 3:return i=e.stateNode,ff(),Xn(Qi),Xn(gi),hT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(qg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gs!==null&&(zw(gs),gs=null))),Ow(n,e),ci(e),null;case 5:fT(e);var o=tu(tm.current);if(r=e.type,n!==null&&e.stateNode!=null)w3(n,e,r,i,o),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(tt(166));return ci(e),null}if(n=tu(Qs.current),qg(e)){i=e.stateNode,r=e.type;var s=e.memoizedProps;switch(i[Hs]=e,i[Jp]=s,n=(e.mode&1)!==0,r){case"dialog":Gn("cancel",i),Gn("close",i);break;case"iframe":case"object":case"embed":Gn("load",i);break;case"video":case"audio":for(o=0;o<cp.length;o++)Gn(cp[o],i);break;case"source":Gn("error",i);break;case"img":case"image":case"link":Gn("error",i),Gn("load",i);break;case"details":Gn("toggle",i);break;case"input":mA(i,s),Gn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Gn("invalid",i);break;case"textarea":vA(i,s),Gn("invalid",i)}ow(r,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Wg(i.textContent,l,n),o=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Wg(i.textContent,l,n),o=["children",""+l]):Gp.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Gn("scroll",i)}switch(r){case"input":Bg(i),gA(i,s,!0);break;case"textarea":Bg(i),yA(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Q0)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ZL(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Hs]=e,n[Jp]=i,S3(n,e,!1,!1),e.stateNode=n;e:{switch(a=sw(r,i),r){case"dialog":Gn("cancel",n),Gn("close",n),o=i;break;case"iframe":case"object":case"embed":Gn("load",n),o=i;break;case"video":case"audio":for(o=0;o<cp.length;o++)Gn(cp[o],n);o=i;break;case"source":Gn("error",n),o=i;break;case"img":case"image":case"link":Gn("error",n),Gn("load",n),o=i;break;case"details":Gn("toggle",n),o=i;break;case"input":mA(n,i),o=ew(n,i),Gn("invalid",n);break;case"option":o=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},o=sr({},i,{value:void 0}),Gn("invalid",n);break;case"textarea":vA(n,i),o=rw(n,i),Gn("invalid",n);break;default:o=i}ow(r,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?tF(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JL(n,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Hp(n,c):typeof c=="number"&&Hp(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gp.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Gn("scroll",n):c!=null&&GE(n,s,c,a))}switch(r){case"input":Bg(n),gA(n,i,!1);break;case"textarea":Bg(n),yA(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ac(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?jd(n,!!i.multiple,s,!1):i.defaultValue!=null&&jd(n,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(n.onclick=Q0)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ci(e),null;case 6:if(n&&e.stateNode!=null)C3(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(tt(166));if(r=tu(tm.current),tu(Qs.current),qg(e)){if(i=e.stateNode,r=e.memoizedProps,i[Hs]=e,(s=i.nodeValue!==r)&&(n=wo,n!==null))switch(n.tag){case 3:Wg(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wg(i.nodeValue,r,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Hs]=e,e.stateNode=i}return ci(e),null;case 13:if(Xn(nr),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Jn&&bo!==null&&e.mode&1&&!(e.flags&128))VF(),uf(),e.flags|=98560,s=!1;else if(s=qg(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(tt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Hs]=e}else uf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ci(e),s=!1}else gs!==null&&(zw(gs),gs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||nr.current&1?Ur===0&&(Ur=3):ET())),e.updateQueue!==null&&(e.flags|=4),ci(e),null);case 4:return ff(),Ow(n,e),n===null&&Qp(e.stateNode.containerInfo),ci(e),null;case 10:return lT(e.type._context),ci(e),null;case 17:return Zi(e.type)&&Z0(),ci(e),null;case 19:if(Xn(nr),s=e.memoizedState,s===null)return ci(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Ch(s,!1);else{if(Ur!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=oy(n),a!==null){for(e.flags|=128,Ch(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)s=r,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return kn(nr,nr.current&1|2),e.child}n=n.sibling}s.tail!==null&&hr()>pf&&(e.flags|=128,i=!0,Ch(s,!1),e.lanes=4194304)}else{if(!i)if(n=oy(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ch(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Jn)return ci(e),null}else 2*hr()-s.renderingStartTime>pf&&r!==1073741824&&(e.flags|=128,i=!0,Ch(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hr(),e.sibling=null,r=nr.current,kn(nr,i?r&1|2:r&1),e):(ci(e),null);case 22:case 23:return CT(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?vo&1073741824&&(ci(e),e.subtreeFlags&6&&(e.flags|=8192)):ci(e),null;case 24:return null;case 25:return null}throw Error(tt(156,e.tag))}function jG(n,e){switch(iT(e),e.tag){case 1:return Zi(e.type)&&Z0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ff(),Xn(Qi),Xn(gi),hT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return fT(e),null;case 13:if(Xn(nr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(tt(340));uf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Xn(nr),null;case 4:return ff(),null;case 10:return lT(e.type._context),null;case 22:case 23:return CT(),null;case 24:return null;default:return null}}var Yg=!1,pi=!1,WG=typeof WeakSet=="function"?WeakSet:Set,St=null;function Od(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){lr(n,e,i)}else r.current=null}function Iw(n,e,r){try{r()}catch(i){lr(n,e,i)}}var a2=!1;function qG(n,e){if(gw=X0,n=AF(),nT(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=n,h=null;t:for(;;){for(var p;f!==r||o!==0&&f.nodeType!==3||(l=a+o),f!==s||i!==0&&f.nodeType!==3||(c=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===n)break t;if(h===r&&++u===o&&(l=a),h===s&&++d===i&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(vw={focusedElem:n,selectionRange:r},X0=!1,St=e;St!==null;)if(e=St,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,St=n;else for(;St!==null;){e=St;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,m=e.stateNode,x=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:ds(e.type,y),v);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(S){lr(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,St=n;break}St=e.return}return g=a2,a2=!1,g}function Tp(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&n)===n){var s=o.destroy;o.destroy=void 0,s!==void 0&&Iw(e,r,s)}o=o.next}while(o!==i)}}function yx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Dw(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function E3(n){var e=n.alternate;e!==null&&(n.alternate=null,E3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Hs],delete e[Jp],delete e[_w],delete e[AG],delete e[NG])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function T3(n){return n.tag===5||n.tag===3||n.tag===4}function l2(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||T3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lw(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Q0));else if(i!==4&&(n=n.child,n!==null))for(Lw(n,e,r),n=n.sibling;n!==null;)Lw(n,e,r),n=n.sibling}function Fw(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Fw(n,e,r),n=n.sibling;n!==null;)Fw(n,e,r),n=n.sibling}var ei=null,fs=!1;function gl(n,e,r){for(r=r.child;r!==null;)M3(n,e,r),r=r.sibling}function M3(n,e,r){if(Ys&&typeof Ys.onCommitFiberUnmount=="function")try{Ys.onCommitFiberUnmount(ux,r)}catch{}switch(r.tag){case 5:pi||Od(r,e);case 6:var i=ei,o=fs;ei=null,gl(n,e,r),ei=i,fs=o,ei!==null&&(fs?(n=ei,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):ei.removeChild(r.stateNode));break;case 18:ei!==null&&(fs?(n=ei,r=r.stateNode,n.nodeType===8?fb(n.parentNode,r):n.nodeType===1&&fb(n,r),Xp(n)):fb(ei,r.stateNode));break;case 4:i=ei,o=fs,ei=r.stateNode.containerInfo,fs=!0,gl(n,e,r),ei=i,fs=o;break;case 0:case 11:case 14:case 15:if(!pi&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Iw(r,e,a),o=o.next}while(o!==i)}gl(n,e,r);break;case 1:if(!pi&&(Od(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){lr(r,e,l)}gl(n,e,r);break;case 21:gl(n,e,r);break;case 22:r.mode&1?(pi=(i=pi)||r.memoizedState!==null,gl(n,e,r),pi=i):gl(n,e,r);break;default:gl(n,e,r)}}function c2(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new WG),e.forEach(function(i){var o=nH.bind(null,n,i);r.has(i)||(r.add(i),i.then(o,o))})}}function is(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var s=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:ei=l.stateNode,fs=!1;break e;case 3:ei=l.stateNode.containerInfo,fs=!0;break e;case 4:ei=l.stateNode.containerInfo,fs=!0;break e}l=l.return}if(ei===null)throw Error(tt(160));M3(s,a,o),ei=null,fs=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){lr(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R3(e,n),e=e.sibling}function R3(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(is(e,n),Us(n),i&4){try{Tp(3,n,n.return),yx(3,n)}catch(y){lr(n,n.return,y)}try{Tp(5,n,n.return)}catch(y){lr(n,n.return,y)}}break;case 1:is(e,n),Us(n),i&512&&r!==null&&Od(r,r.return);break;case 5:if(is(e,n),Us(n),i&512&&r!==null&&Od(r,r.return),n.flags&32){var o=n.stateNode;try{Hp(o,"")}catch(y){lr(n,n.return,y)}}if(i&4&&(o=n.stateNode,o!=null)){var s=n.memoizedProps,a=r!==null?r.memoizedProps:s,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&YL(o,s),sw(l,a);var u=sw(l,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?tF(o,f):d==="dangerouslySetInnerHTML"?JL(o,f):d==="children"?Hp(o,f):GE(o,d,f,u)}switch(l){case"input":tw(o,s);break;case"textarea":QL(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?jd(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?jd(o,!!s.multiple,s.defaultValue,!0):jd(o,!!s.multiple,s.multiple?[]:"",!1))}o[Jp]=s}catch(y){lr(n,n.return,y)}}break;case 6:if(is(e,n),Us(n),i&4){if(n.stateNode===null)throw Error(tt(162));o=n.stateNode,s=n.memoizedProps;try{o.nodeValue=s}catch(y){lr(n,n.return,y)}}break;case 3:if(is(e,n),Us(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Xp(e.containerInfo)}catch(y){lr(n,n.return,y)}break;case 4:is(e,n),Us(n);break;case 13:is(e,n),Us(n),o=n.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(ST=hr())),i&4&&c2(n);break;case 22:if(d=r!==null&&r.memoizedState!==null,n.mode&1?(pi=(u=pi)||d,is(e,n),pi=u):is(e,n),Us(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(St=n,d=n.child;d!==null;){for(f=St=d;St!==null;){switch(h=St,p=h.child,h.tag){case 0:case 11:case 14:case 15:Tp(4,h,h.return);break;case 1:Od(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,r=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){lr(i,r,y)}}break;case 5:Od(h,h.return);break;case 22:if(h.memoizedState!==null){d2(f);continue}}p!==null?(p.return=h,St=p):d2(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=eF("display",a))}catch(y){lr(n,n.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){lr(n,n.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:is(e,n),Us(n),i&4&&c2(n);break;case 21:break;default:is(e,n),Us(n)}}function Us(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(T3(r)){var i=r;break e}r=r.return}throw Error(tt(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Hp(o,""),i.flags&=-33);var s=l2(n);Fw(n,s,o);break;case 3:case 4:var a=i.stateNode.containerInfo,l=l2(n);Lw(n,l,a);break;default:throw Error(tt(161))}}catch(c){lr(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function XG(n,e,r){St=n,A3(n)}function A3(n,e,r){for(var i=(n.mode&1)!==0;St!==null;){var o=St,s=o.child;if(o.tag===22&&i){var a=o.memoizedState!==null||Yg;if(!a){var l=o.alternate,c=l!==null&&l.memoizedState!==null||pi;l=Yg;var u=pi;if(Yg=a,(pi=c)&&!u)for(St=o;St!==null;)a=St,c=a.child,a.tag===22&&a.memoizedState!==null?f2(o):c!==null?(c.return=a,St=c):f2(o);for(;s!==null;)St=s,A3(s),s=s.sibling;St=o,Yg=l,pi=u}u2(n)}else o.subtreeFlags&8772&&s!==null?(s.return=o,St=s):u2(n)}}function u2(n){for(;St!==null;){var e=St;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pi||yx(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!pi)if(r===null)i.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:ds(e.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&XA(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}XA(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Xp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}pi||e.flags&512&&Dw(e)}catch(h){lr(e,e.return,h)}}if(e===n){St=null;break}if(r=e.sibling,r!==null){r.return=e.return,St=r;break}St=e.return}}function d2(n){for(;St!==null;){var e=St;if(e===n){St=null;break}var r=e.sibling;if(r!==null){r.return=e.return,St=r;break}St=e.return}}function f2(n){for(;St!==null;){var e=St;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{yx(4,e)}catch(c){lr(e,r,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(c){lr(e,o,c)}}var s=e.return;try{Dw(e)}catch(c){lr(e,s,c)}break;case 5:var a=e.return;try{Dw(e)}catch(c){lr(e,a,c)}}}catch(c){lr(e,e.return,c)}if(e===n){St=null;break}var l=e.sibling;if(l!==null){l.return=e.return,St=l;break}St=e.return}}var KG=Math.ceil,ly=al.ReactCurrentDispatcher,_T=al.ReactCurrentOwner,Wo=al.ReactCurrentBatchConfig,vn=0,Yr=null,Cr=null,ri=0,vo=0,Id=gc(0),Ur=0,om=null,yu=0,xx=0,bT=0,Mp=null,ki=null,ST=0,pf=1/0,Ma=null,cy=!1,Uw=null,Jl=null,Qg=!1,Hl=null,uy=0,Rp=0,Bw=null,x0=-1,_0=0;function Ni(){return vn&6?hr():x0!==-1?x0:x0=hr()}function ec(n){return n.mode&1?vn&2&&ri!==0?ri&-ri:OG.transition!==null?(_0===0&&(_0=hF()),_0):(n=Pn,n!==0||(n=window.event,n=n===void 0?16:_F(n.type)),n):1}function Ts(n,e,r,i){if(50<Rp)throw Rp=0,Bw=null,Error(tt(185));Jm(n,r,i),(!(vn&2)||n!==Yr)&&(n===Yr&&(!(vn&2)&&(xx|=r),Ur===4&&$l(n,ri)),Ji(n,i),r===1&&vn===0&&!(e.mode&1)&&(pf=hr()+500,mx&&vc()))}function Ji(n,e){var r=n.callbackNode;O6(n,e);var i=q0(n,n===Yr?ri:0);if(i===0)r!==null&&bA(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&bA(r),e===1)n.tag===0?PG(h2.bind(null,n)):$F(h2.bind(null,n)),MG(function(){!(vn&6)&&vc()}),r=null;else{switch(pF(i)){case 1:r=XE;break;case 4:r=dF;break;case 16:r=W0;break;case 536870912:r=fF;break;default:r=W0}r=U3(r,N3.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function N3(n,e){if(x0=-1,_0=0,vn&6)throw Error(tt(327));var r=n.callbackNode;if(Yd()&&n.callbackNode!==r)return null;var i=q0(n,n===Yr?ri:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=dy(n,i);else{e=i;var o=vn;vn|=2;var s=O3();(Yr!==n||ri!==e)&&(Ma=null,pf=hr()+500,su(n,e));do try{ZG();break}catch(l){P3(n,l)}while(!0);aT(),ly.current=s,vn=o,Cr!==null?e=0:(Yr=null,ri=0,e=Ur)}if(e!==0){if(e===2&&(o=dw(n),o!==0&&(i=o,e=$w(n,o))),e===1)throw r=om,su(n,0),$l(n,i),Ji(n,hr()),r;if(e===6)$l(n,i);else{if(o=n.current.alternate,!(i&30)&&!YG(o)&&(e=dy(n,i),e===2&&(s=dw(n),s!==0&&(i=s,e=$w(n,s))),e===1))throw r=om,su(n,0),$l(n,i),Ji(n,hr()),r;switch(n.finishedWork=o,n.finishedLanes=i,e){case 0:case 1:throw Error(tt(345));case 2:$c(n,ki,Ma);break;case 3:if($l(n,i),(i&130023424)===i&&(e=ST+500-hr(),10<e)){if(q0(n,0)!==0)break;if(o=n.suspendedLanes,(o&i)!==i){Ni(),n.pingedLanes|=n.suspendedLanes&o;break}n.timeoutHandle=xw($c.bind(null,n,ki,Ma),e);break}$c(n,ki,Ma);break;case 4:if($l(n,i),(i&4194240)===i)break;for(e=n.eventTimes,o=-1;0<i;){var a=31-Es(i);s=1<<a,a=e[a],a>o&&(o=a),i&=~s}if(i=o,i=hr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*KG(i/1960))-i,10<i){n.timeoutHandle=xw($c.bind(null,n,ki,Ma),i);break}$c(n,ki,Ma);break;case 5:$c(n,ki,Ma);break;default:throw Error(tt(329))}}}return Ji(n,hr()),n.callbackNode===r?N3.bind(null,n):null}function $w(n,e){var r=Mp;return n.current.memoizedState.isDehydrated&&(su(n,e).flags|=256),n=dy(n,e),n!==2&&(e=ki,ki=r,e!==null&&zw(e)),n}function zw(n){ki===null?ki=n:ki.push.apply(ki,n)}function YG(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],s=o.getSnapshot;o=o.value;try{if(!Ns(s(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $l(n,e){for(e&=~bT,e&=~xx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-Es(e),i=1<<r;n[r]=-1,e&=~i}}function h2(n){if(vn&6)throw Error(tt(327));Yd();var e=q0(n,0);if(!(e&1))return Ji(n,hr()),null;var r=dy(n,e);if(n.tag!==0&&r===2){var i=dw(n);i!==0&&(e=i,r=$w(n,i))}if(r===1)throw r=om,su(n,0),$l(n,e),Ji(n,hr()),r;if(r===6)throw Error(tt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,$c(n,ki,Ma),Ji(n,hr()),null}function wT(n,e){var r=vn;vn|=1;try{return n(e)}finally{vn=r,vn===0&&(pf=hr()+500,mx&&vc())}}function xu(n){Hl!==null&&Hl.tag===0&&!(vn&6)&&Yd();var e=vn;vn|=1;var r=Wo.transition,i=Pn;try{if(Wo.transition=null,Pn=1,n)return n()}finally{Pn=i,Wo.transition=r,vn=e,!(vn&6)&&vc()}}function CT(){vo=Id.current,Xn(Id)}function su(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,TG(r)),Cr!==null)for(r=Cr.return;r!==null;){var i=r;switch(iT(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Z0();break;case 3:ff(),Xn(Qi),Xn(gi),hT();break;case 5:fT(i);break;case 4:ff();break;case 13:Xn(nr);break;case 19:Xn(nr);break;case 10:lT(i.type._context);break;case 22:case 23:CT()}r=r.return}if(Yr=n,Cr=n=tc(n.current,null),ri=vo=e,Ur=0,om=null,bT=xx=yu=0,ki=Mp=null,eu!==null){for(e=0;e<eu.length;e++)if(r=eu[e],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=o,i.next=a}r.pending=i}eu=null}return n}function P3(n,e){do{var r=Cr;try{if(aT(),g0.current=ay,sy){for(var i=or.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}sy=!1}if(vu=0,Xr=Lr=or=null,Ep=!1,nm=0,_T.current=null,r===null||r.return===null){Ur=1,om=e,Cr=null;break}e:{var s=n,a=r.return,l=r,c=e;if(e=ri,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=e2(a);if(p!==null){p.flags&=-257,t2(p,a,l,s,e),p.mode&1&&JA(s,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(c),e.updateQueue=y}else g.add(c);break e}else{if(!(e&1)){JA(s,u,e),ET();break e}c=Error(tt(426))}}else if(Jn&&l.mode&1){var v=e2(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),t2(v,a,l,s,e),oT(hf(c,l));break e}}s=c=hf(c,l),Ur!==4&&(Ur=2),Mp===null?Mp=[s]:Mp.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=p3(s,c,e);qA(s,m);break e;case 1:l=c;var x=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Jl===null||!Jl.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=m3(s,l,e);qA(s,S);break e}}s=s.return}while(s!==null)}D3(r)}catch(w){e=w,Cr===r&&r!==null&&(Cr=r=r.return);continue}break}while(!0)}function O3(){var n=ly.current;return ly.current=ay,n===null?ay:n}function ET(){(Ur===0||Ur===3||Ur===2)&&(Ur=4),Yr===null||!(yu&268435455)&&!(xx&268435455)||$l(Yr,ri)}function dy(n,e){var r=vn;vn|=2;var i=O3();(Yr!==n||ri!==e)&&(Ma=null,su(n,e));do try{QG();break}catch(o){P3(n,o)}while(!0);if(aT(),vn=r,ly.current=i,Cr!==null)throw Error(tt(261));return Yr=null,ri=0,Ur}function QG(){for(;Cr!==null;)I3(Cr)}function ZG(){for(;Cr!==null&&!w6();)I3(Cr)}function I3(n){var e=F3(n.alternate,n,vo);n.memoizedProps=n.pendingProps,e===null?D3(n):Cr=e,_T.current=null}function D3(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=jG(r,e),r!==null){r.flags&=32767,Cr=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ur=6,Cr=null;return}}else if(r=HG(r,e,vo),r!==null){Cr=r;return}if(e=e.sibling,e!==null){Cr=e;return}Cr=e=n}while(e!==null);Ur===0&&(Ur=5)}function $c(n,e,r){var i=Pn,o=Wo.transition;try{Wo.transition=null,Pn=1,JG(n,e,r,i)}finally{Wo.transition=o,Pn=i}return null}function JG(n,e,r,i){do Yd();while(Hl!==null);if(vn&6)throw Error(tt(327));r=n.finishedWork;var o=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(tt(177));n.callbackNode=null,n.callbackPriority=0;var s=r.lanes|r.childLanes;if(I6(n,s),n===Yr&&(Cr=Yr=null,ri=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Qg||(Qg=!0,U3(W0,function(){return Yd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Wo.transition,Wo.transition=null;var a=Pn;Pn=1;var l=vn;vn|=4,_T.current=null,qG(n,r),R3(r,n),xG(vw),X0=!!gw,vw=gw=null,n.current=r,XG(r),C6(),vn=l,Pn=a,Wo.transition=s}else n.current=r;if(Qg&&(Qg=!1,Hl=n,uy=o),s=n.pendingLanes,s===0&&(Jl=null),M6(r.stateNode),Ji(n,hr()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)o=e[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(cy)throw cy=!1,n=Uw,Uw=null,n;return uy&1&&n.tag!==0&&Yd(),s=n.pendingLanes,s&1?n===Bw?Rp++:(Rp=0,Bw=n):Rp=0,vc(),null}function Yd(){if(Hl!==null){var n=pF(uy),e=Wo.transition,r=Pn;try{if(Wo.transition=null,Pn=16>n?16:n,Hl===null)var i=!1;else{if(n=Hl,Hl=null,uy=0,vn&6)throw Error(tt(331));var o=vn;for(vn|=4,St=n.current;St!==null;){var s=St,a=s.child;if(St.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(St=u;St!==null;){var d=St;switch(d.tag){case 0:case 11:case 15:Tp(8,d,s)}var f=d.child;if(f!==null)f.return=d,St=f;else for(;St!==null;){d=St;var h=d.sibling,p=d.return;if(E3(d),d===u){St=null;break}if(h!==null){h.return=p,St=h;break}St=p}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}St=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,St=a;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Tp(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,St=m;break e}St=s.return}}var x=n.current;for(St=x;St!==null;){a=St;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,St=_;else e:for(a=x;St!==null;){if(l=St,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yx(9,l)}}catch(w){lr(l,l.return,w)}if(l===a){St=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,St=S;break e}St=l.return}}if(vn=o,vc(),Ys&&typeof Ys.onPostCommitFiberRoot=="function")try{Ys.onPostCommitFiberRoot(ux,n)}catch{}i=!0}return i}finally{Pn=r,Wo.transition=e}}return!1}function p2(n,e,r){e=hf(r,e),e=p3(n,e,1),n=Zl(n,e,1),e=Ni(),n!==null&&(Jm(n,1,e),Ji(n,e))}function lr(n,e,r){if(n.tag===3)p2(n,n,r);else for(;e!==null;){if(e.tag===3){p2(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Jl===null||!Jl.has(i))){n=hf(r,n),n=m3(e,n,1),e=Zl(e,n,1),n=Ni(),e!==null&&(Jm(e,1,n),Ji(e,n));break}}e=e.return}}function eH(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Ni(),n.pingedLanes|=n.suspendedLanes&r,Yr===n&&(ri&r)===r&&(Ur===4||Ur===3&&(ri&130023424)===ri&&500>hr()-ST?su(n,0):bT|=r),Ji(n,e)}function L3(n,e){e===0&&(n.mode&1?(e=kg,kg<<=1,!(kg&130023424)&&(kg=4194304)):e=1);var r=Ni();n=Qa(n,e),n!==null&&(Jm(n,e,r),Ji(n,r))}function tH(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),L3(n,r)}function nH(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,o=n.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(tt(314))}i!==null&&i.delete(e),L3(n,r)}var F3;F3=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||Qi.current)Hi=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return Hi=!1,GG(n,e,r);Hi=!!(n.flags&131072)}else Hi=!1,Jn&&e.flags&1048576&&zF(e,ty,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;y0(n,e),n=e.pendingProps;var o=cf(e,gi.current);Kd(e,r),o=mT(null,e,i,n,o,r);var s=gT();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zi(i)?(s=!0,J0(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,uT(e),o.updater=vx,e.stateNode=o,o._reactInternals=e,Tw(e,i,n,r),e=Aw(null,e,i,!0,s,r)):(e.tag=0,Jn&&s&&rT(e),Ei(null,e,o,r),e=e.child),e;case 16:i=e.elementType;e:{switch(y0(n,e),n=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=iH(i),n=ds(i,n),o){case 0:e=Rw(null,e,i,n,r);break e;case 1:e=i2(null,e,i,n,r);break e;case 11:e=n2(null,e,i,n,r);break e;case 14:e=r2(null,e,i,ds(i.type,n),r);break e}throw Error(tt(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ds(i,o),Rw(n,e,i,o,r);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ds(i,o),i2(n,e,i,o,r);case 3:e:{if(x3(e),n===null)throw Error(tt(387));i=e.pendingProps,s=e.memoizedState,o=s.element,WF(n,e),iy(e,i,null,r);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=hf(Error(tt(423)),e),e=o2(n,e,i,r,o);break e}else if(i!==o){o=hf(Error(tt(424)),e),e=o2(n,e,i,r,o);break e}else for(bo=Ql(e.stateNode.containerInfo.firstChild),wo=e,Jn=!0,gs=null,r=HF(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(uf(),i===o){e=Za(n,e,r);break e}Ei(n,e,i,r)}e=e.child}return e;case 5:return qF(e),n===null&&ww(e),i=e.type,o=e.pendingProps,s=n!==null?n.memoizedProps:null,a=o.children,yw(i,o)?a=null:s!==null&&yw(i,s)&&(e.flags|=32),y3(n,e),Ei(n,e,a,r),e.child;case 6:return n===null&&ww(e),null;case 13:return _3(n,e,r);case 4:return dT(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=df(e,null,i,r):Ei(n,e,i,r),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ds(i,o),n2(n,e,i,o,r);case 7:return Ei(n,e,e.pendingProps,r),e.child;case 8:return Ei(n,e,e.pendingProps.children,r),e.child;case 12:return Ei(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,kn(ny,i._currentValue),i._currentValue=a,s!==null)if(Ns(s.value,a)){if(s.children===o.children&&!Qi.current){e=Za(n,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Va(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Cw(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(tt(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Cw(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ei(n,e,o.children,r),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,Kd(e,r),o=Yo(o),i=i(o),e.flags|=1,Ei(n,e,i,r),e.child;case 14:return i=e.type,o=ds(i,e.pendingProps),o=ds(i.type,o),r2(n,e,i,o,r);case 15:return g3(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ds(i,o),y0(n,e),e.tag=1,Zi(i)?(n=!0,J0(e)):n=!1,Kd(e,r),h3(e,i,o),Tw(e,i,o,r),Aw(null,e,i,!0,n,r);case 19:return b3(n,e,r);case 22:return v3(n,e,r)}throw Error(tt(156,e.tag))};function U3(n,e){return uF(n,e)}function rH(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ho(n,e,r,i){return new rH(n,e,r,i)}function TT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function iH(n){if(typeof n=="function")return TT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===jE)return 11;if(n===WE)return 14}return 2}function tc(n,e){var r=n.alternate;return r===null?(r=Ho(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function b0(n,e,r,i,o,s){var a=2;if(i=n,typeof n=="function")TT(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case wd:return au(r.children,o,s,e);case HE:a=8,o|=8;break;case Y1:return n=Ho(12,r,e,o|2),n.elementType=Y1,n.lanes=s,n;case Q1:return n=Ho(13,r,e,o),n.elementType=Q1,n.lanes=s,n;case Z1:return n=Ho(19,r,e,o),n.elementType=Z1,n.lanes=s,n;case qL:return _x(r,o,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case jL:a=10;break e;case WL:a=9;break e;case jE:a=11;break e;case WE:a=14;break e;case Dl:a=16,i=null;break e}throw Error(tt(130,n==null?n:typeof n,""))}return e=Ho(a,r,e,o),e.elementType=n,e.type=i,e.lanes=s,e}function au(n,e,r,i){return n=Ho(7,n,i,e),n.lanes=r,n}function _x(n,e,r,i){return n=Ho(22,n,i,e),n.elementType=qL,n.lanes=r,n.stateNode={isHidden:!1},n}function _b(n,e,r){return n=Ho(6,n,null,e),n.lanes=r,n}function bb(n,e,r){return e=Ho(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function oH(n,e,r,i,o){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tb(0),this.expirationTimes=tb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tb(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function MT(n,e,r,i,o,s,a,l,c){return n=new oH(n,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ho(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},uT(s),n}function sH(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sd,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function B3(n){if(!n)return lc;n=n._reactInternals;e:{if(Iu(n)!==n||n.tag!==1)throw Error(tt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tt(171))}if(n.tag===1){var r=n.type;if(Zi(r))return BF(n,r,e)}return e}function $3(n,e,r,i,o,s,a,l,c){return n=MT(r,i,!0,n,o,s,a,l,c),n.context=B3(null),r=n.current,i=Ni(),o=ec(r),s=Va(i,o),s.callback=e??null,Zl(r,s,o),n.current.lanes=o,Jm(n,o,i),Ji(n,i),n}function bx(n,e,r,i){var o=e.current,s=Ni(),a=ec(o);return r=B3(r),e.context===null?e.context=r:e.pendingContext=r,e=Va(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Zl(o,e,a),n!==null&&(Ts(n,o,a,s),m0(n,o,a)),a}function fy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function m2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function RT(n,e){m2(n,e),(n=n.alternate)&&m2(n,e)}function aH(){return null}var z3=typeof reportError=="function"?reportError:function(n){console.error(n)};function AT(n){this._internalRoot=n}Sx.prototype.render=AT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(tt(409));bx(n,e,null,null)};Sx.prototype.unmount=AT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;xu(function(){bx(null,n,null,null)}),e[Ya]=null}};function Sx(n){this._internalRoot=n}Sx.prototype.unstable_scheduleHydration=function(n){if(n){var e=vF();n={blockedOn:null,target:n,priority:e};for(var r=0;r<Bl.length&&e!==0&&e<Bl[r].priority;r++);Bl.splice(r,0,n),r===0&&xF(n)}};function NT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function wx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function g2(){}function lH(n,e,r,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var u=fy(a);s.call(u)}}var a=$3(e,i,n,0,null,!1,!1,"",g2);return n._reactRootContainer=a,n[Ya]=a.current,Qp(n.nodeType===8?n.parentNode:n),xu(),a}for(;o=n.lastChild;)n.removeChild(o);if(typeof i=="function"){var l=i;i=function(){var u=fy(c);l.call(u)}}var c=MT(n,0,!1,null,null,!1,!1,"",g2);return n._reactRootContainer=c,n[Ya]=c.current,Qp(n.nodeType===8?n.parentNode:n),xu(function(){bx(e,c,r,i)}),c}function Cx(n,e,r,i,o){var s=r._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var l=o;o=function(){var c=fy(a);l.call(c)}}bx(e,a,n,o)}else a=lH(r,e,n,o,i);return fy(a)}mF=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=lp(e.pendingLanes);r!==0&&(KE(e,r|1),Ji(e,hr()),!(vn&6)&&(pf=hr()+500,vc()))}break;case 13:xu(function(){var i=Qa(n,1);if(i!==null){var o=Ni();Ts(i,n,1,o)}}),RT(n,1)}};YE=function(n){if(n.tag===13){var e=Qa(n,134217728);if(e!==null){var r=Ni();Ts(e,n,134217728,r)}RT(n,134217728)}};gF=function(n){if(n.tag===13){var e=ec(n),r=Qa(n,e);if(r!==null){var i=Ni();Ts(r,n,e,i)}RT(n,e)}};vF=function(){return Pn};yF=function(n,e){var r=Pn;try{return Pn=n,e()}finally{Pn=r}};lw=function(n,e,r){switch(e){case"input":if(tw(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var o=px(i);if(!o)throw Error(tt(90));KL(i),tw(i,o)}}}break;case"textarea":QL(n,r);break;case"select":e=r.value,e!=null&&jd(n,!!r.multiple,e,!1)}};iF=wT;oF=xu;var cH={usingClientEntryPoint:!1,Events:[tg,Md,px,nF,rF,wT]},Eh={findFiberByHostInstance:Jc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uH={bundleType:Eh.bundleType,version:Eh.version,rendererPackageName:Eh.rendererPackageName,rendererConfig:Eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=lF(n),n===null?null:n.stateNode},findFiberByHostInstance:Eh.findFiberByHostInstance||aH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zg.isDisabled&&Zg.supportsFiber)try{ux=Zg.inject(uH),Ys=Zg}catch{}}Ro.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cH;Ro.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NT(e))throw Error(tt(200));return sH(n,e,null,r)};Ro.createRoot=function(n,e){if(!NT(n))throw Error(tt(299));var r=!1,i="",o=z3;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=MT(n,1,!1,null,null,r,!1,i,o),n[Ya]=e.current,Qp(n.nodeType===8?n.parentNode:n),new AT(e)};Ro.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(tt(188)):(n=Object.keys(n).join(","),Error(tt(268,n)));return n=lF(e),n=n===null?null:n.stateNode,n};Ro.flushSync=function(n){return xu(n)};Ro.hydrate=function(n,e,r){if(!wx(e))throw Error(tt(200));return Cx(null,n,e,!0,r)};Ro.hydrateRoot=function(n,e,r){if(!NT(n))throw Error(tt(405));var i=r!=null&&r.hydratedSources||null,o=!1,s="",a=z3;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=$3(e,null,n,1,r??null,o,!1,s,a),n[Ya]=e.current,Qp(n),i)for(n=0;n<i.length;n++)r=i[n],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new Sx(e)};Ro.render=function(n,e,r){if(!wx(e))throw Error(tt(200));return Cx(null,n,e,!1,r)};Ro.unmountComponentAtNode=function(n){if(!wx(n))throw Error(tt(40));return n._reactRootContainer?(xu(function(){Cx(null,null,n,!1,function(){n._reactRootContainer=null,n[Ya]=null})}),!0):!1};Ro.unstable_batchedUpdates=wT;Ro.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!wx(r))throw Error(tt(200));if(n==null||n._reactInternals===void 0)throw Error(tt(38));return Cx(n,e,r,!1,i)};Ro.version="18.3.1-next-f1338f8080-20240426";function k3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k3)}catch(n){console.error(n)}}k3(),kL.exports=Ro;var ea=kL.exports;const kw=pc(ea),dH=AL({__proto__:null,default:kw},[ea]);var V3,v2=ea;V3=v2.createRoot,v2.hydrateRoot;var G3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(s=o(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var l in s)e.call(s,l)&&s[l]&&(a=o(a,l));return a}function o(s,a){return a?s?s+" "+a:s+a:s}n.exports?(r.default=r,n.exports=r):window.classNames=r})()})(G3);var fH=G3.exports;const _e=pc(fH);function ut(){return ut=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},ut.apply(null,arguments)}function Rt(n){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(n)}var hH=Symbol.for("react.element"),pH=Symbol.for("react.transitional.element"),mH=Symbol.for("react.fragment");function H3(n){return n&&Rt(n)==="object"&&(n.$$typeof===hH||n.$$typeof===pH)&&n.type===mH}function Ja(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return se.Children.forEach(n,function(i){i==null&&!e.keepEmpty||(Array.isArray(i)?r=r.concat(Ja(i)):H3(i)&&i.props?r=r.concat(Ja(i.props.children,e)):r.push(i))}),r}var Vw={},gH=function(e){};function vH(n,e){}function yH(n,e){}function xH(){Vw={}}function j3(n,e,r){!e&&!Vw[r]&&(n(!1,r),Vw[r]=!0)}function eo(n,e){j3(vH,n,e)}function _H(n,e){j3(yH,n,e)}eo.preMessage=gH;eo.resetWarned=xH;eo.noteOnce=_H;function bH(n,e){if(Rt(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(Rt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function W3(n){var e=bH(n,"string");return Rt(e)=="symbol"?e:e+""}function ee(n,e,r){return(e=W3(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function y2(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function re(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y2(Object(r),!0).forEach(function(i){ee(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function sm(n){return n instanceof HTMLElement||n instanceof SVGElement}function SH(n){return n&&Rt(n)==="object"&&sm(n.nativeElement)?n.nativeElement:sm(n)?n:null}function Ap(n){var e=SH(n);if(e)return e;if(n instanceof se.Component){var r;return(r=kw.findDOMNode)===null||r===void 0?void 0:r.call(kw,n)}return null}var q3={exports:{}},On={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT=Symbol.for("react.element"),OT=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),Tx=Symbol.for("react.strict_mode"),Mx=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),Ax=Symbol.for("react.context"),wH=Symbol.for("react.server_context"),Nx=Symbol.for("react.forward_ref"),Px=Symbol.for("react.suspense"),Ox=Symbol.for("react.suspense_list"),Ix=Symbol.for("react.memo"),Dx=Symbol.for("react.lazy"),CH=Symbol.for("react.offscreen"),X3;X3=Symbol.for("react.module.reference");function ts(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case PT:switch(n=n.type,n){case Ex:case Mx:case Tx:case Px:case Ox:return n;default:switch(n=n&&n.$$typeof,n){case wH:case Ax:case Nx:case Dx:case Ix:case Rx:return n;default:return e}}case OT:return e}}}On.ContextConsumer=Ax;On.ContextProvider=Rx;On.Element=PT;On.ForwardRef=Nx;On.Fragment=Ex;On.Lazy=Dx;On.Memo=Ix;On.Portal=OT;On.Profiler=Mx;On.StrictMode=Tx;On.Suspense=Px;On.SuspenseList=Ox;On.isAsyncMode=function(){return!1};On.isConcurrentMode=function(){return!1};On.isContextConsumer=function(n){return ts(n)===Ax};On.isContextProvider=function(n){return ts(n)===Rx};On.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===PT};On.isForwardRef=function(n){return ts(n)===Nx};On.isFragment=function(n){return ts(n)===Ex};On.isLazy=function(n){return ts(n)===Dx};On.isMemo=function(n){return ts(n)===Ix};On.isPortal=function(n){return ts(n)===OT};On.isProfiler=function(n){return ts(n)===Mx};On.isStrictMode=function(n){return ts(n)===Tx};On.isSuspense=function(n){return ts(n)===Px};On.isSuspenseList=function(n){return ts(n)===Ox};On.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Ex||n===Mx||n===Tx||n===Px||n===Ox||n===CH||typeof n=="object"&&n!==null&&(n.$$typeof===Dx||n.$$typeof===Ix||n.$$typeof===Rx||n.$$typeof===Ax||n.$$typeof===Nx||n.$$typeof===X3||n.getModuleId!==void 0)};On.typeOf=ts;q3.exports=On;var Sb=q3.exports;function Lx(n,e,r){var i=b.useRef({});return(!("value"in i.current)||r(i.current.condition,e))&&(i.current.value=n(),i.current.condition=e),i.current.value}var IT=function(e,r){typeof e=="function"?e(r):Rt(e)==="object"&&e&&"current"in e&&(e.current=r)},ca=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r.filter(Boolean);return o.length<=1?o[0]:function(s){r.forEach(function(a){IT(a,s)})}},eh=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return Lx(function(){return ca.apply(void 0,r)},r,function(o,s){return o.length!==s.length||o.every(function(a,l){return a!==s[l]})})},rg=function(e){var r,i;if(!e)return!1;if(K3(e)&&e.props.propertyIsEnumerable("ref"))return!0;var o=Sb.isMemo(e)?e.type.type:e.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==Sb.ForwardRef||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render)&&e.$$typeof!==Sb.ForwardRef)};function K3(n){return b.isValidElement(n)&&!H3(n)}var Fx=function(e){if(e&&K3(e)){var r=e;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null},Gw=b.createContext(null);function EH(n){var e=n.children,r=n.onBatchResize,i=b.useRef(0),o=b.useRef([]),s=b.useContext(Gw),a=b.useCallback(function(l,c,u){i.current+=1;var d=i.current;o.current.push({size:l,element:c,data:u}),Promise.resolve().then(function(){d===i.current&&(r==null||r(o.current),o.current=[])}),s==null||s(l,c,u)},[r,s]);return b.createElement(Gw.Provider,{value:a},e)}var Y3=function(){if(typeof Map<"u")return Map;function n(e,r){var i=-1;return e.some(function(o,s){return o[0]===r?(i=s,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var i=n(this.__entries__,r),o=this.__entries__[i];return o&&o[1]},e.prototype.set=function(r,i){var o=n(this.__entries__,r);~o?this.__entries__[o][1]=i:this.__entries__.push([r,i])},e.prototype.delete=function(r){var i=this.__entries__,o=n(i,r);~o&&i.splice(o,1)},e.prototype.has=function(r){return!!~n(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,i){i===void 0&&(i=null);for(var o=0,s=this.__entries__;o<s.length;o++){var a=s[o];r.call(i,a[1],a[0])}},e}()}(),Hw=typeof window<"u"&&typeof document<"u"&&window.document===document,hy=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),TH=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(hy):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),MH=2;function RH(n,e){var r=!1,i=!1,o=0;function s(){r&&(r=!1,n()),i&&l()}function a(){TH(s)}function l(){var c=Date.now();if(r){if(c-o<MH)return;i=!0}else r=!0,i=!1,setTimeout(a,e);o=c}return l}var AH=20,NH=["top","right","bottom","left","width","height","size","weight"],PH=typeof MutationObserver<"u",OH=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=RH(this.refresh.bind(this),AH)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var r=this.observers_,i=r.indexOf(e);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!Hw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),PH?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!Hw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var r=e.propertyName,i=r===void 0?"":r,o=NH.some(function(s){return!!~i.indexOf(s)});o&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),Q3=function(n,e){for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];Object.defineProperty(n,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return n},mf=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||hy},Z3=Ux(0,0,0,0);function py(n){return parseFloat(n)||0}function x2(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(i,o){var s=n["border-"+o+"-width"];return i+py(s)},0)}function IH(n){for(var e=["top","right","bottom","left"],r={},i=0,o=e;i<o.length;i++){var s=o[i],a=n["padding-"+s];r[s]=py(a)}return r}function DH(n){var e=n.getBBox();return Ux(0,0,e.width,e.height)}function LH(n){var e=n.clientWidth,r=n.clientHeight;if(!e&&!r)return Z3;var i=mf(n).getComputedStyle(n),o=IH(i),s=o.left+o.right,a=o.top+o.bottom,l=py(i.width),c=py(i.height);if(i.boxSizing==="border-box"&&(Math.round(l+s)!==e&&(l-=x2(i,"left","right")+s),Math.round(c+a)!==r&&(c-=x2(i,"top","bottom")+a)),!UH(n)){var u=Math.round(l+s)-e,d=Math.round(c+a)-r;Math.abs(u)!==1&&(l-=u),Math.abs(d)!==1&&(c-=d)}return Ux(o.left,o.top,l,c)}var FH=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof mf(n).SVGGraphicsElement}:function(n){return n instanceof mf(n).SVGElement&&typeof n.getBBox=="function"}}();function UH(n){return n===mf(n).document.documentElement}function BH(n){return Hw?FH(n)?DH(n):LH(n):Z3}function $H(n){var e=n.x,r=n.y,i=n.width,o=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return Q3(a,{x:e,y:r,width:i,height:o,top:r,right:e+i,bottom:o+r,left:e}),a}function Ux(n,e,r,i){return{x:n,y:e,width:r,height:i}}var zH=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ux(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=BH(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),kH=function(){function n(e,r){var i=$H(r);Q3(this,{target:e,contentRect:i})}return n}(),VH=function(){function n(e,r,i){if(this.activeObservations_=[],this.observations_=new Y3,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof mf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new zH(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof mf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(i){return new kH(i.target,i.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),J3=typeof WeakMap<"u"?new WeakMap:new Y3,eU=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=OH.getInstance(),i=new VH(e,r,this);J3.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){eU.prototype[n]=function(){var e;return(e=J3.get(this))[n].apply(e,arguments)}});var GH=function(){return typeof hy.ResizeObserver<"u"?hy.ResizeObserver:eU}(),jl=new Map;function HH(n){n.forEach(function(e){var r,i=e.target;(r=jl.get(i))===null||r===void 0||r.forEach(function(o){return o(i)})})}var tU=new GH(HH);function jH(n,e){jl.has(n)||(jl.set(n,new Set),tU.observe(n)),jl.get(n).add(e)}function WH(n,e){jl.has(n)&&(jl.get(n).delete(e),jl.get(n).size||(tU.unobserve(n),jl.delete(n)))}function Hr(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _2(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,W3(i.key),i)}}function jr(n,e,r){return e&&_2(n.prototype,e),r&&_2(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function gf(n,e){return gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gf(n,e)}function yc(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gf(n,e)}function am(n){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},am(n)}function DT(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DT=function(){return!!n})()}function nn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qH(n,e){if(e&&(Rt(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(n)}function xc(n){var e=DT();return function(){var r,i=am(n);if(e){var o=am(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return qH(this,r)}}var XH=function(n){yc(r,n);var e=xc(r);function r(){return Hr(this,r),e.apply(this,arguments)}return jr(r,[{key:"render",value:function(){return this.props.children}}]),r}(b.Component);function KH(n,e){var r=n.children,i=n.disabled,o=b.useRef(null),s=b.useRef(null),a=b.useContext(Gw),l=typeof r=="function",c=l?r(o):r,u=b.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!l&&b.isValidElement(c)&&rg(c),f=d?Fx(c):null,h=eh(f,o),p=function(){var m;return Ap(o.current)||(o.current&&Rt(o.current)==="object"?Ap((m=o.current)===null||m===void 0?void 0:m.nativeElement):null)||Ap(s.current)};b.useImperativeHandle(e,function(){return p()});var g=b.useRef(n);g.current=n;var y=b.useCallback(function(v){var m=g.current,x=m.onResize,_=m.data,S=v.getBoundingClientRect(),w=S.width,C=S.height,E=v.offsetWidth,T=v.offsetHeight,M=Math.floor(w),R=Math.floor(C);if(u.current.width!==M||u.current.height!==R||u.current.offsetWidth!==E||u.current.offsetHeight!==T){var N={width:M,height:R,offsetWidth:E,offsetHeight:T};u.current=N;var D=E===Math.round(w)?w:E,L=T===Math.round(C)?C:T,A=re(re({},N),{},{offsetWidth:D,offsetHeight:L});a==null||a(A,v,_),x&&Promise.resolve().then(function(){x(A,v)})}},[]);return b.useEffect(function(){var v=p();return v&&!i&&jH(v,y),function(){return WH(v,y)}},[o.current,i]),b.createElement(XH,{ref:s},d?b.cloneElement(c,{ref:h}):c)}var YH=b.forwardRef(KH),QH="rc-observer-key";function ZH(n,e){var r=n.children,i=typeof r=="function"?[r]:Ja(r);return i.map(function(o,s){var a=(o==null?void 0:o.key)||"".concat(QH,"-").concat(s);return b.createElement(YH,ut({},n,{key:a,ref:s===0?e:void 0}),o)})}var ll=b.forwardRef(ZH);ll.Collection=EH;function ua(n,e){var r=Object.assign({},n);return Array.isArray(e)&&e.forEach(function(i){delete r[i]}),r}function jw(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function JH(n){if(Array.isArray(n))return jw(n)}function nU(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function LT(n,e){if(n){if(typeof n=="string")return jw(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jw(n,e):void 0}}function e8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(n){return JH(n)||nU(n)||LT(n)||e8()}var rU=function(e){return+setTimeout(e,16)},iU=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(rU=function(e){return window.requestAnimationFrame(e)},iU=function(e){return window.cancelAnimationFrame(e)});var b2=0,FT=new Map;function oU(n){FT.delete(n)}var mr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;b2+=1;var i=b2;function o(s){if(s===0)oU(i),e();else{var a=rU(function(){o(s-1)});FT.set(i,a)}}return o(r),i};mr.cancel=function(n){var e=FT.get(n);return oU(n),iU(e)};function sU(n){if(Array.isArray(n))return n}function t8(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function aU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(n,e){return sU(n)||t8(n,e)||LT(n,e)||aU()}function lm(n){for(var e=0,r,i=0,o=n.length;o>=4;++i,o-=4)r=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(o){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function vi(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Ww(n,e){if(!n)return!1;if(n.contains)return n.contains(e);for(var r=e;r;){if(r===n)return!0;r=r.parentNode}return!1}var S2="data-rc-order",w2="data-rc-priority",n8="rc-util-key",qw=new Map;function lU(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.mark;return e?e.startsWith("data-")?e:"data-".concat(e):n8}function Bx(n){if(n.attachTo)return n.attachTo;var e=document.querySelector("head");return e||document.body}function r8(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function UT(n){return Array.from((qw.get(n)||n).children).filter(function(e){return e.tagName==="STYLE"})}function cU(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vi())return null;var r=e.csp,i=e.prepend,o=e.priority,s=o===void 0?0:o,a=r8(i),l=a==="prependQueue",c=document.createElement("style");c.setAttribute(S2,a),l&&s&&c.setAttribute(w2,"".concat(s)),r!=null&&r.nonce&&(c.nonce=r==null?void 0:r.nonce),c.innerHTML=n;var u=Bx(e),d=u.firstChild;if(i){if(l){var f=(e.styles||UT(u)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(S2)))return!1;var p=Number(h.getAttribute(w2)||0);return s>=p});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function uU(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Bx(e);return(e.styles||UT(r)).find(function(i){return i.getAttribute(lU(e))===n})}function cm(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=uU(n,e);if(r){var i=Bx(e);i.removeChild(r)}}function i8(n,e){var r=qw.get(n);if(!r||!Ww(document,r)){var i=cU("",e),o=i.parentNode;qw.set(n,o),n.removeChild(i)}}function Ga(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Bx(r),o=UT(i),s=re(re({},r),{},{styles:o});i8(i,s);var a=uU(e,s);if(a){var l,c;if((l=s.csp)!==null&&l!==void 0&&l.nonce&&a.nonce!==((c=s.csp)===null||c===void 0?void 0:c.nonce)){var u;a.nonce=(u=s.csp)===null||u===void 0?void 0:u.nonce}return a.innerHTML!==n&&(a.innerHTML=n),a}var d=cU(n,s);return d.setAttribute(lU(s),e),d}function o8(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function Cn(n,e){if(n==null)return{};var r,i,o=o8(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function Xw(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=new Set;function o(s,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=i.has(s);if(eo(!c,"Warning: There may be circular references"),c)return!1;if(s===a)return!0;if(r&&l>1)return!1;i.add(s);var u=l+1;if(Array.isArray(s)){if(!Array.isArray(a)||s.length!==a.length)return!1;for(var d=0;d<s.length;d++)if(!o(s[d],a[d],u))return!1;return!0}if(s&&a&&Rt(s)==="object"&&Rt(a)==="object"){var f=Object.keys(s);return f.length!==Object.keys(a).length?!1:f.every(function(h){return o(s[h],a[h],u)})}return!1}return o(n,e)}var s8="%";function Kw(n){return n.join(s8)}var a8=function(){function n(e){Hr(this,n),ee(this,"instanceId",void 0),ee(this,"cache",new Map),this.instanceId=e}return jr(n,[{key:"get",value:function(r){return this.opGet(Kw(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,i){return this.opUpdate(Kw(r),i)}},{key:"opUpdate",value:function(r,i){var o=this.cache.get(r),s=i(o);s===null?this.cache.delete(r):this.cache.set(r,s)}}]),n}(),vf="data-token-hash",Ms="data-css-hash",Wl="__cssinjs_instance__";function l8(){var n=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(Ms,"]"))||[],r=document.head.firstChild;Array.from(e).forEach(function(o){o[Wl]=o[Wl]||n,o[Wl]===n&&document.head.insertBefore(o,r)});var i={};Array.from(document.querySelectorAll("style[".concat(Ms,"]"))).forEach(function(o){var s=o.getAttribute(Ms);if(i[s]){if(o[Wl]===n){var a;(a=o.parentNode)===null||a===void 0||a.removeChild(o)}}else i[s]=!0})}return new a8(n)}var $x=b.createContext({hashPriority:"low",cache:l8(),defaultCache:!0});function c8(n,e){if(n.length!==e.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}var BT=function(){function n(){Hr(this,n),ee(this,"cache",void 0),ee(this,"keys",void 0),ee(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return jr(n,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var i,o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return r.forEach(function(l){if(!a)a=void 0;else{var c;a=(c=a)===null||c===void 0||(c=c.map)===null||c===void 0?void 0:c.get(l)}}),(i=a)!==null&&i!==void 0&&i.value&&s&&(a.value[1]=this.cacheCallTimes++),(o=a)===null||o===void 0?void 0:o.value}},{key:"get",value:function(r){var i;return(i=this.internalGet(r,!0))===null||i===void 0?void 0:i[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,i){var o=this;if(!this.has(r)){if(this.size()+1>n.MAX_CACHE_SIZE+n.MAX_CACHE_OFFSET){var s=this.keys.reduce(function(u,d){var f=Ce(u,2),h=f[1];return o.internalGet(d)[1]<h?[d,o.internalGet(d)[1]]:u},[this.keys[0],this.cacheCallTimes]),a=Ce(s,1),l=a[0];this.delete(l)}this.keys.push(r)}var c=this.cache;r.forEach(function(u,d){if(d===r.length-1)c.set(u,{value:[i,o.cacheCallTimes++]});else{var f=c.get(u);f?f.map||(f.map=new Map):c.set(u,{map:new Map}),c=c.get(u).map}})}},{key:"deleteByPath",value:function(r,i){var o=r.get(i[0]);if(i.length===1){var s;return o.map?r.set(i[0],{map:o.map}):r.delete(i[0]),(s=o.value)===null||s===void 0?void 0:s[0]}var a=this.deleteByPath(o.map,i.slice(1));return(!o.map||o.map.size===0)&&!o.value&&r.delete(i[0]),a}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(i){return!c8(i,r)}),this.deleteByPath(this.cache,r)}}]),n}();ee(BT,"MAX_CACHE_SIZE",20);ee(BT,"MAX_CACHE_OFFSET",5);var C2=0,dU=function(){function n(e){Hr(this,n),ee(this,"derivatives",void 0),ee(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=C2,e.length===0&&(e.length>0,void 0),C2+=1}return jr(n,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(i,o){return o(r,i)},void 0)}}]),n}(),wb=new BT;function Yw(n){var e=Array.isArray(n)?n:[n];return wb.has(e)||wb.set(e,new dU(e)),wb.get(e)}var u8=new WeakMap,Cb={};function d8(n,e){for(var r=u8,i=0;i<e.length;i+=1){var o=e[i];r.has(o)||r.set(o,new WeakMap),r=r.get(o)}return r.has(Cb)||r.set(Cb,n()),r.get(Cb)}var E2=new WeakMap;function Np(n){var e=E2.get(n)||"";return e||(Object.keys(n).forEach(function(r){var i=n[r];e+=r,i instanceof dU?e+=i.id:i&&Rt(i)==="object"?e+=Np(i):e+=i}),e=lm(e),E2.set(n,e)),e}function T2(n,e){return lm("".concat(e,"_").concat(Np(n)))}var Qw=vi();function De(n){return typeof n=="number"?"".concat(n,"px"):n}function my(n,e,r){var i,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s)return n;var a=re(re({},o),{},(i={},ee(i,vf,e),ee(i,Ms,r),i)),l=Object.keys(a).map(function(c){var u=a[c];return u?"".concat(c,'="').concat(u,'"'):null}).filter(function(c){return c}).join(" ");return"<style ".concat(l,">").concat(n,"</style>")}var S0=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},f8=function(e,r,i){return Object.keys(e).length?".".concat(r).concat(i!=null&&i.scope?".".concat(i.scope):"","{").concat(Object.entries(e).map(function(o){var s=Ce(o,2),a=s[0],l=s[1];return"".concat(a,":").concat(l,";")}).join(""),"}"):""},fU=function(e,r,i){var o={},s={};return Object.entries(e).forEach(function(a){var l,c,u=Ce(a,2),d=u[0],f=u[1];if(i!=null&&(l=i.preserve)!==null&&l!==void 0&&l[d])s[d]=f;else if((typeof f=="string"||typeof f=="number")&&!(i!=null&&(c=i.ignore)!==null&&c!==void 0&&c[d])){var h,p=S0(d,i==null?void 0:i.prefix);o[p]=typeof f=="number"&&!(i!=null&&(h=i.unitless)!==null&&h!==void 0&&h[d])?"".concat(f,"px"):String(f),s[d]="var(".concat(p,")")}}),[s,f8(o,r,{scope:i==null?void 0:i.scope})]},M2=vi()?b.useLayoutEffect:b.useEffect,_n=function(e,r){var i=b.useRef(!0);M2(function(){return e(i.current)},r),M2(function(){return i.current=!1,function(){i.current=!0}},[])},R2=function(e,r){_n(function(i){if(!i)return e()},r)},h8=re({},cx),A2=h8.useInsertionEffect,p8=function(e,r,i){b.useMemo(e,i),_n(function(){return r(!0)},i)},m8=A2?function(n,e,r){return A2(function(){return n(),e()},r)}:p8,g8=re({},cx),v8=g8.useInsertionEffect,y8=function(e){var r=[],i=!1;function o(s){i||r.push(s)}return b.useEffect(function(){return i=!1,function(){i=!0,r.length&&r.forEach(function(s){return s()})}},e),o},x8=function(){return function(e){e()}},_8=typeof v8<"u"?y8:x8;function $T(n,e,r,i,o){var s=b.useContext($x),a=s.cache,l=[n].concat(st(e)),c=Kw(l),u=_8([c]),d=function(g){a.opUpdate(c,function(y){var v=y||[void 0,void 0],m=Ce(v,2),x=m[0],_=x===void 0?0:x,S=m[1],w=S,C=w||r(),E=[_,C];return g?g(E):E})};b.useMemo(function(){d()},[c]);var f=a.opGet(c),h=f[1];return m8(function(){o==null||o(h)},function(p){return d(function(g){var y=Ce(g,2),v=y[0],m=y[1];return p&&v===0&&(o==null||o(h)),[v+1,m]}),function(){a.opUpdate(c,function(g){var y=g||[],v=Ce(y,2),m=v[0],x=m===void 0?0:m,_=v[1],S=x-1;return S===0?(u(function(){(p||!a.opGet(c))&&(i==null||i(_,!1))}),null):[x-1,_]})}},[c]),h}var b8={},S8="css",jc=new Map;function w8(n){jc.set(n,(jc.get(n)||0)+1)}function C8(n,e){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(vf,'="').concat(n,'"]'));r.forEach(function(i){if(i[Wl]===e){var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)}})}}var E8=0;function T8(n,e){jc.set(n,(jc.get(n)||0)-1);var r=Array.from(jc.keys()),i=r.filter(function(o){var s=jc.get(o)||0;return s<=0});r.length-i.length>E8&&i.forEach(function(o){C8(o,e),jc.delete(o)})}var M8=function(e,r,i,o){var s=i.getDerivativeToken(e),a=re(re({},s),r);return o&&(a=o(a)),a},hU="token";function R8(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=b.useContext($x),o=i.cache.instanceId,s=i.container,a=r.salt,l=a===void 0?"":a,c=r.override,u=c===void 0?b8:c,d=r.formatToken,f=r.getComputedToken,h=r.cssVar,p=d8(function(){return Object.assign.apply(Object,[{}].concat(st(e)))},e),g=Np(p),y=Np(u),v=h?Np(h):"",m=$T(hU,[l,n.id,g,y,v],function(){var x,_=f?f(p,u,n):M8(p,u,n,d),S=re({},_),w="";if(h){var C=fU(_,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),E=Ce(C,2);_=E[0],w=E[1]}var T=T2(_,l);_._tokenKey=T,S._tokenKey=T2(S,l);var M=(x=h==null?void 0:h.key)!==null&&x!==void 0?x:T;_._themeKey=M,w8(M);var R="".concat(S8,"-").concat(lm(T));return _._hashId=R,[_,R,S,w,(h==null?void 0:h.key)||""]},function(x){T8(x[0]._themeKey,o)},function(x){var _=Ce(x,4),S=_[0],w=_[3];if(h&&w){var C=Ga(w,lm("css-variables-".concat(S._themeKey)),{mark:Ms,prepend:"queue",attachTo:s,priority:-999});C[Wl]=o,C.setAttribute(vf,S._themeKey)}});return m}var A8=function(e,r,i){var o=Ce(e,5),s=o[2],a=o[3],l=o[4],c=i||{},u=c.plain;if(!a)return null;var d=s._tokenKey,f=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(f)},p=my(a,l,d,h,u);return[f,d,p]},N8={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pU="comm",mU="rule",gU="decl",P8="@import",O8="@keyframes",I8="@layer",vU=Math.abs,zT=String.fromCharCode;function yU(n){return n.trim()}function w0(n,e,r){return n.replace(e,r)}function D8(n,e,r){return n.indexOf(e,r)}function um(n,e){return n.charCodeAt(e)|0}function yf(n,e,r){return n.slice(e,r)}function Vs(n){return n.length}function L8(n){return n.length}function Jg(n,e){return e.push(n),n}var zx=1,xf=1,xU=0,Zo=0,br=0,th="";function kT(n,e,r,i,o,s,a,l){return{value:n,root:e,parent:r,type:i,props:o,children:s,line:zx,column:xf,length:a,return:"",siblings:l}}function F8(){return br}function U8(){return br=Zo>0?um(th,--Zo):0,xf--,br===10&&(xf=1,zx--),br}function Rs(){return br=Zo<xU?um(th,Zo++):0,xf++,br===10&&(xf=1,zx++),br}function ql(){return um(th,Zo)}function C0(){return Zo}function kx(n,e){return yf(th,n,e)}function dm(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function B8(n){return zx=xf=1,xU=Vs(th=n),Zo=0,[]}function $8(n){return th="",n}function Eb(n){return yU(kx(Zo-1,Zw(n===91?n+2:n===40?n+1:n)))}function z8(n){for(;(br=ql())&&br<33;)Rs();return dm(n)>2||dm(br)>3?"":" "}function k8(n,e){for(;--e&&Rs()&&!(br<48||br>102||br>57&&br<65||br>70&&br<97););return kx(n,C0()+(e<6&&ql()==32&&Rs()==32))}function Zw(n){for(;Rs();)switch(br){case n:return Zo;case 34:case 39:n!==34&&n!==39&&Zw(br);break;case 40:n===41&&Zw(n);break;case 92:Rs();break}return Zo}function V8(n,e){for(;Rs()&&n+br!==57;)if(n+br===84&&ql()===47)break;return"/*"+kx(e,Zo-1)+"*"+zT(n===47?n:Rs())}function G8(n){for(;!dm(ql());)Rs();return kx(n,Zo)}function H8(n){return $8(E0("",null,null,null,[""],n=B8(n),0,[0],n))}function E0(n,e,r,i,o,s,a,l,c){for(var u=0,d=0,f=a,h=0,p=0,g=0,y=1,v=1,m=1,x=0,_="",S=o,w=s,C=i,E=_;v;)switch(g=x,x=Rs()){case 40:if(g!=108&&um(E,f-1)==58){D8(E+=w0(Eb(x),"&","&\f"),"&\f",vU(u?l[u-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:E+=Eb(x);break;case 9:case 10:case 13:case 32:E+=z8(g);break;case 92:E+=k8(C0()-1,7);continue;case 47:switch(ql()){case 42:case 47:Jg(j8(V8(Rs(),C0()),e,r,c),c),(dm(g||1)==5||dm(ql()||1)==5)&&Vs(E)&&yf(E,-1,void 0)!==" "&&(E+=" ");break;default:E+="/"}break;case 123*y:l[u++]=Vs(E)*m;case 125*y:case 59:case 0:switch(x){case 0:case 125:v=0;case 59+d:m==-1&&(E=w0(E,/\f/g,"")),p>0&&(Vs(E)-f||y===0&&g===47)&&Jg(p>32?P2(E+";",i,r,f-1,c):P2(w0(E," ","")+";",i,r,f-2,c),c);break;case 59:E+=";";default:if(Jg(C=N2(E,e,r,u,d,o,l,_,S=[],w=[],f,s),s),x===123)if(d===0)E0(E,e,C,C,S,s,f,l,w);else switch(h===99&&um(E,3)===110?100:h){case 100:case 108:case 109:case 115:E0(n,C,C,i&&Jg(N2(n,C,C,0,0,o,l,_,o,S=[],f,w),w),o,w,f,l,i?S:w);break;default:E0(E,C,C,C,[""],w,0,l,w)}}u=d=p=0,y=m=1,_=E="",f=a;break;case 58:f=1+Vs(E),p=g;default:if(y<1){if(x==123)--y;else if(x==125&&y++==0&&U8()==125)continue}switch(E+=zT(x),x*y){case 38:m=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(Vs(E)-1)*m,m=1;break;case 64:ql()===45&&(E+=Eb(Rs())),h=ql(),d=f=Vs(_=E+=G8(C0())),x++;break;case 45:g===45&&Vs(E)==2&&(y=0)}}return s}function N2(n,e,r,i,o,s,a,l,c,u,d,f){for(var h=o-1,p=o===0?s:[""],g=L8(p),y=0,v=0,m=0;y<i;++y)for(var x=0,_=yf(n,h+1,h=vU(v=a[y])),S=n;x<g;++x)(S=yU(v>0?p[x]+" "+_:w0(_,/&\f/g,p[x])))&&(c[m++]=S);return kT(n,e,r,o===0?mU:l,c,u,d,f)}function j8(n,e,r,i){return kT(n,e,r,pU,zT(F8()),yf(n,2,-2),0,i)}function P2(n,e,r,i,o){return kT(n,e,r,gU,yf(n,0,i),yf(n,i+1,-1),i,o)}function Jw(n,e){for(var r="",i=0;i<n.length;i++)r+=e(n[i],i,n,e)||"";return r}function W8(n,e,r,i){switch(n.type){case I8:if(n.children.length)break;case P8:case gU:return n.return=n.return||n.value;case pU:return"";case O8:return n.return=n.value+"{"+Jw(n.children,i)+"}";case mU:if(!Vs(n.value=n.props.join(",")))return""}return Vs(r=Jw(n.children,i))?n.return=n.value+"{"+r+"}":""}var O2="data-ant-cssinjs-cache-path",_U="_FILE_STYLE__",lu,bU=!0;function q8(){if(!lu&&(lu={},vi())){var n=document.createElement("div");n.className=O2,n.style.position="fixed",n.style.visibility="hidden",n.style.top="-9999px",document.body.appendChild(n);var e=getComputedStyle(n).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(o){var s=o.split(":"),a=Ce(s,2),l=a[0],c=a[1];lu[l]=c});var r=document.querySelector("style[".concat(O2,"]"));if(r){var i;bU=!1,(i=r.parentNode)===null||i===void 0||i.removeChild(r)}document.body.removeChild(n)}}function X8(n){return q8(),!!lu[n]}function K8(n){var e=lu[n],r=null;if(e&&vi())if(bU)r=_U;else{var i=document.querySelector("style[".concat(Ms,'="').concat(lu[n],'"]'));i?r=i.innerHTML:delete lu[n]}return[r,e]}var Y8="_skip_check_",SU="_multi_value_";function T0(n){var e=Jw(H8(n),W8);return e.replace(/\{%%%\:[^;];}/g,";")}function Q8(n){return Rt(n)==="object"&&n&&(Y8 in n||SU in n)}function I2(n,e,r){if(!e)return n;var i=".".concat(e),o=r==="low"?":where(".concat(i,")"):i,s=n.split(",").map(function(a){var l,c=a.trim().split(/\s+/),u=c[0]||"",d=((l=u.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return u="".concat(d).concat(o).concat(u.slice(d.length)),[u].concat(st(c.slice(1))).join(" ")});return s.join(",")}var Z8=function n(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},o=i.root,s=i.injectHash,a=i.parentSelectors,l=r.hashId,c=r.layer;r.path;var u=r.hashPriority,d=r.transformers,f=d===void 0?[]:d;r.linters;var h="",p={};function g(m){var x=m.getName(l);if(!p[x]){var _=n(m.style,r,{root:!1,parentSelectors:a}),S=Ce(_,1),w=S[0];p[x]="@keyframes ".concat(m.getName(l)).concat(w)}}function y(m){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return m.forEach(function(_){Array.isArray(_)?y(_,x):_&&x.push(_)}),x}var v=y(Array.isArray(e)?e:[e]);return v.forEach(function(m){var x=typeof m=="string"&&!o?{}:m;if(typeof x=="string")h+="".concat(x,`
`);else if(x._keyframe)g(x);else{var _=f.reduce(function(S,w){var C;return(w==null||(C=w.visit)===null||C===void 0?void 0:C.call(w,S))||S},x);Object.keys(_).forEach(function(S){var w=_[S];if(Rt(w)==="object"&&w&&(S!=="animationName"||!w._keyframe)&&!Q8(w)){var C=!1,E=S.trim(),T=!1;(o||s)&&l?E.startsWith("@")?C=!0:E==="&"?E=I2("",l,u):E=I2(S,l,u):o&&!l&&(E==="&"||E==="")&&(E="",T=!0);var M=n(w,r,{root:T,injectHash:C,parentSelectors:[].concat(st(a),[E])}),R=Ce(M,2),N=R[0],D=R[1];p=re(re({},p),D),h+="".concat(E).concat(N)}else{let I=function(P,F){var O=P.replace(/[A-Z]/g,function(U){return"-".concat(U.toLowerCase())}),V=F;!N8[P]&&typeof V=="number"&&V!==0&&(V="".concat(V,"px")),P==="animationName"&&F!==null&&F!==void 0&&F._keyframe&&(g(F),V=F.getName(l)),h+="".concat(O,":").concat(V,";")};var L,A=(L=w==null?void 0:w.value)!==null&&L!==void 0?L:w;Rt(w)==="object"&&w!==null&&w!==void 0&&w[SU]&&Array.isArray(A)?A.forEach(function(P){I(S,P)}):I(S,A)}})}}),o?c&&(h&&(h="@layer ".concat(c.name," {").concat(h,"}")),c.dependencies&&(p["@layer ".concat(c.name)]=c.dependencies.map(function(m){return"@layer ".concat(m,", ").concat(c.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,p]};function wU(n,e){return lm("".concat(n.join("%")).concat(e))}function J8(){return null}var CU="style";function eC(n,e){var r=n.token,i=n.path,o=n.hashId,s=n.layer,a=n.nonce,l=n.clientOnly,c=n.order,u=c===void 0?0:c,d=b.useContext($x),f=d.autoClear;d.mock;var h=d.defaultCache,p=d.hashPriority,g=d.container,y=d.ssrInline,v=d.transformers,m=d.linters,x=d.cache,_=d.layer,S=r._tokenKey,w=[S];_&&w.push("layer"),w.push.apply(w,st(i));var C=Qw,E=$T(CU,w,function(){var D=w.join("|");if(X8(D)){var L=K8(D),A=Ce(L,2),I=A[0],P=A[1];if(I)return[I,S,P,{},l,u]}var F=e(),O=Z8(F,{hashId:o,hashPriority:p,layer:_?s:void 0,path:i.join("-"),transformers:v,linters:m}),V=Ce(O,2),U=V[0],k=V[1],W=T0(U),J=wU(w,W);return[W,S,J,k,l,u]},function(D,L){var A=Ce(D,3),I=A[2];(L||f)&&Qw&&cm(I,{mark:Ms})},function(D){var L=Ce(D,4),A=L[0];L[1];var I=L[2],P=L[3];if(C&&A!==_U){var F={mark:Ms,prepend:_?!1:"queue",attachTo:g,priority:u},O=typeof a=="function"?a():a;O&&(F.csp={nonce:O});var V=[],U=[];Object.keys(P).forEach(function(W){W.startsWith("@layer")?V.push(W):U.push(W)}),V.forEach(function(W){Ga(T0(P[W]),"_layer-".concat(W),re(re({},F),{},{prepend:!0}))});var k=Ga(A,I,F);k[Wl]=x.instanceId,k.setAttribute(vf,S),U.forEach(function(W){Ga(T0(P[W]),"_effect-".concat(W),F)})}}),T=Ce(E,3),M=T[0],R=T[1],N=T[2];return function(D){var L;if(!y||C||!h)L=b.createElement(J8,null);else{var A;L=b.createElement("style",ut({},(A={},ee(A,vf,R),ee(A,Ms,N),A),{dangerouslySetInnerHTML:{__html:M}}))}return b.createElement(b.Fragment,null,L,D)}}var ej=function(e,r,i){var o=Ce(e,6),s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=i||{},h=f.plain;if(u)return null;var p=s,g={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)};return p=my(s,a,l,g,h),c&&Object.keys(c).forEach(function(y){if(!r[y]){r[y]=!0;var v=T0(c[y]),m=my(v,a,"_effect-".concat(y),g,h);y.startsWith("@layer")?p=m+p:p+=m}}),[d,l,p]},EU="cssVar",tj=function(e,r){var i=e.key,o=e.prefix,s=e.unitless,a=e.ignore,l=e.token,c=e.scope,u=c===void 0?"":c,d=b.useContext($x),f=d.cache.instanceId,h=d.container,p=l._tokenKey,g=[].concat(st(e.path),[i,u,p]),y=$T(EU,g,function(){var v=r(),m=fU(v,i,{prefix:o,unitless:s,ignore:a,scope:u}),x=Ce(m,2),_=x[0],S=x[1],w=wU(g,S);return[_,S,w,i]},function(v){var m=Ce(v,3),x=m[2];Qw&&cm(x,{mark:Ms})},function(v){var m=Ce(v,3),x=m[1],_=m[2];if(x){var S=Ga(x,_,{mark:Ms,prepend:"queue",attachTo:h,priority:-999});S[Wl]=f,S.setAttribute(vf,i)}});return y},nj=function(e,r,i){var o=Ce(e,4),s=o[1],a=o[2],l=o[3],c=i||{},u=c.plain;if(!s)return null;var d=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},h=my(s,l,a,f,u);return[d,a,h]},Th;Th={},ee(Th,CU,ej),ee(Th,hU,A8),ee(Th,EU,nj);var hn=function(){function n(e,r){Hr(this,n),ee(this,"name",void 0),ee(this,"style",void 0),ee(this,"_keyframe",!0),this.name=e,this.style=r}return jr(n,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),n}();function Xu(n){return n.notSplit=!0,n}Xu(["borderTop","borderBottom"]),Xu(["borderTop"]),Xu(["borderBottom"]),Xu(["borderLeft","borderRight"]),Xu(["borderLeft"]),Xu(["borderRight"]);var VT=b.createContext({});function TU(n){return sU(n)||nU(n)||LT(n)||aU()}function js(n,e){for(var r=n,i=0;i<e.length;i+=1){if(r==null)return;r=r[e[i]]}return r}function MU(n,e,r,i){if(!e.length)return r;var o=TU(e),s=o[0],a=o.slice(1),l;return!n&&typeof s=="number"?l=[]:Array.isArray(n)?l=st(n):l=re({},n),i&&r===void 0&&a.length===1?delete l[s][a[0]]:l[s]=MU(l[s],a,r,i),l}function hs(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&i&&r===void 0&&!js(n,e.slice(0,-1))?n:MU(n,e,r,i)}function rj(n){return Rt(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function D2(n){return Array.isArray(n)?[]:{}}var ij=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Dd(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=D2(e[0]);return e.forEach(function(o){function s(a,l){var c=new Set(l),u=js(o,a),d=Array.isArray(u);if(d||rj(u)){if(!c.has(u)){c.add(u);var f=js(i,a);d?i=hs(i,a,[]):(!f||Rt(f)!=="object")&&(i=hs(i,a,D2(u))),ij(u).forEach(function(h){s([].concat(st(a),[h]),c)})}}else i=hs(i,a,u)}s([])}),i}function oj(){}const sj=b.createContext({}),GT=()=>{const n=()=>{};return n.deprecated=oj,n},aj=b.createContext(void 0);var RU={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},lj={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},cj=re(re({},lj),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const AU={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},L2={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},cj),timePickerLocale:Object.assign({},AU)},so="${label} is not a valid ${type}",_u={locale:"en",Pagination:RU,DatePicker:L2,TimePicker:AU,Calendar:L2,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:so,method:so,array:so,object:so,number:so,date:so,boolean:so,integer:so,float:so,regexp:so,email:so,url:so,hex:so},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let M0=Object.assign({},_u.Modal),R0=[];const F2=()=>R0.reduce((n,e)=>Object.assign(Object.assign({},n),e),_u.Modal);function uj(n){if(n){const e=Object.assign({},n);return R0.push(e),M0=F2(),()=>{R0=R0.filter(r=>r!==e),M0=F2()}}M0=Object.assign({},_u.Modal)}function NU(){return M0}const HT=b.createContext(void 0),_c=(n,e)=>{const r=b.useContext(HT),i=b.useMemo(()=>{var s;const a=e||_u[n],l=(s=r==null?void 0:r[n])!==null&&s!==void 0?s:{};return Object.assign(Object.assign({},typeof a=="function"?a():a),l||{})},[n,e,r]),o=b.useMemo(()=>{const s=r==null?void 0:r.locale;return r!=null&&r.exist&&!s?_u.locale:s},[r]);return[i,o]},dj="internalMark",fj=n=>{const{locale:e={},children:r,_ANT_MARK__:i}=n;b.useEffect(()=>uj(e==null?void 0:e.Modal),[e]);const o=b.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return b.createElement(HT.Provider,{value:o},r)},Wr=Math.round;function Tb(n,e){const r=n.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],i=r.map(o=>parseFloat(o));for(let o=0;o<3;o+=1)i[o]=e(i[o]||0,r[o]||"",o);return r[3]?i[3]=r[3].includes("%")?i[3]/100:i[3]:i[3]=1,i}const U2=(n,e,r)=>r===0?n:n/100;function Mh(n,e){const r=e||255;return n>r?r:n<0?0:n}class Ln{constructor(e){ee(this,"isValid",!0),ee(this,"r",0),ee(this,"g",0),ee(this,"b",0),ee(this,"a",1),ee(this,"_h",void 0),ee(this,"_s",void 0),ee(this,"_l",void 0),ee(this,"_v",void 0),ee(this,"_max",void 0),ee(this,"_min",void 0),ee(this,"_brightness",void 0);function r(o){return o[0]in e&&o[1]in e&&o[2]in e}if(e)if(typeof e=="string"){let s=function(a){return o.startsWith(a)};var i=s;const o=e.trim();/^#?[A-F\d]{3,8}$/i.test(o)?this.fromHexString(o):s("rgb")?this.fromRgbString(o):s("hsl")?this.fromHslString(o):(s("hsv")||s("hsb"))&&this.fromHsvString(o)}else if(e instanceof Ln)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(r("rgb"))this.r=Mh(e.r),this.g=Mh(e.g),this.b=Mh(e.b),this.a=typeof e.a=="number"?Mh(e.a,1):1;else if(r("hsl"))this.fromHsl(e);else if(r("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const r=this.toHsv();return r.h=e,this._c(r)}getLuminance(){function e(s){const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}const r=e(this.r),i=e(this.g),o=e(this.b);return .2126*r+.7152*i+.0722*o}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=Wr(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const r=this.getHue(),i=this.getSaturation();let o=this.getLightness()-e/100;return o<0&&(o=0),this._c({h:r,s:i,l:o,a:this.a})}lighten(e=10){const r=this.getHue(),i=this.getSaturation();let o=this.getLightness()+e/100;return o>1&&(o=1),this._c({h:r,s:i,l:o,a:this.a})}mix(e,r=50){const i=this._c(e),o=r/100,s=l=>(i[l]-this[l])*o+this[l],a={r:Wr(s("r")),g:Wr(s("g")),b:Wr(s("b")),a:Wr(s("a")*100)/100};return this._c(a)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const r=this._c(e),i=this.a+r.a*(1-this.a),o=s=>Wr((this[s]*this.a+r[s]*r.a*(1-this.a))/i);return this._c({r:o("r"),g:o("g"),b:o("b"),a:i})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const r=(this.r||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.g||0).toString(16);e+=i.length===2?i:"0"+i;const o=(this.b||0).toString(16);if(e+=o.length===2?o:"0"+o,typeof this.a=="number"&&this.a>=0&&this.a<1){const s=Wr(this.a*255).toString(16);e+=s.length===2?s:"0"+s}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),r=Wr(this.getSaturation()*100),i=Wr(this.getLightness()*100);return this.a!==1?`hsla(${e},${r}%,${i}%,${this.a})`:`hsl(${e},${r}%,${i}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,r,i){const o=this.clone();return o[e]=Mh(r,i),o}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const r=e.replace("#","");function i(o,s){return parseInt(r[o]+r[s||o],16)}r.length<6?(this.r=i(0),this.g=i(1),this.b=i(2),this.a=r[3]?i(3)/255:1):(this.r=i(0,1),this.g=i(2,3),this.b=i(4,5),this.a=r[6]?i(6,7)/255:1)}fromHsl({h:e,s:r,l:i,a:o}){if(this._h=e%360,this._s=r,this._l=i,this.a=typeof o=="number"?o:1,r<=0){const h=Wr(i*255);this.r=h,this.g=h,this.b=h}let s=0,a=0,l=0;const c=e/60,u=(1-Math.abs(2*i-1))*r,d=u*(1-Math.abs(c%2-1));c>=0&&c<1?(s=u,a=d):c>=1&&c<2?(s=d,a=u):c>=2&&c<3?(a=u,l=d):c>=3&&c<4?(a=d,l=u):c>=4&&c<5?(s=d,l=u):c>=5&&c<6&&(s=u,l=d);const f=i-u/2;this.r=Wr((s+f)*255),this.g=Wr((a+f)*255),this.b=Wr((l+f)*255)}fromHsv({h:e,s:r,v:i,a:o}){this._h=e%360,this._s=r,this._v=i,this.a=typeof o=="number"?o:1;const s=Wr(i*255);if(this.r=s,this.g=s,this.b=s,r<=0)return;const a=e/60,l=Math.floor(a),c=a-l,u=Wr(i*(1-r)*255),d=Wr(i*(1-r*c)*255),f=Wr(i*(1-r*(1-c))*255);switch(l){case 0:this.g=f,this.b=u;break;case 1:this.r=d,this.b=u;break;case 2:this.r=u,this.b=f;break;case 3:this.r=u,this.g=d;break;case 4:this.r=f,this.g=u;break;case 5:default:this.g=u,this.b=d;break}}fromHsvString(e){const r=Tb(e,U2);this.fromHsv({h:r[0],s:r[1],v:r[2],a:r[3]})}fromHslString(e){const r=Tb(e,U2);this.fromHsl({h:r[0],s:r[1],l:r[2],a:r[3]})}fromRgbString(e){const r=Tb(e,(i,o)=>o.includes("%")?Wr(i/100*255):i);this.r=r[0],this.g=r[1],this.b=r[2],this.a=r[3]}}var ev=2,B2=.16,hj=.05,pj=.05,mj=.15,PU=5,OU=4,gj=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function $2(n,e,r){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=r?Math.round(n.h)-ev*e:Math.round(n.h)+ev*e:i=r?Math.round(n.h)+ev*e:Math.round(n.h)-ev*e,i<0?i+=360:i>=360&&(i-=360),i}function z2(n,e,r){if(n.h===0&&n.s===0)return n.s;var i;return r?i=n.s-B2*e:e===OU?i=n.s+B2:i=n.s+hj*e,i>1&&(i=1),r&&e===PU&&i>.1&&(i=.1),i<.06&&(i=.06),Math.round(i*100)/100}function k2(n,e,r){var i;return r?i=n.v+pj*e:i=n.v-mj*e,i=Math.max(0,Math.min(1,i)),Math.round(i*100)/100}function fm(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],i=new Ln(n),o=i.toHsv(),s=PU;s>0;s-=1){var a=new Ln({h:$2(o,s,!0),s:z2(o,s,!0),v:k2(o,s,!0)});r.push(a)}r.push(i);for(var l=1;l<=OU;l+=1){var c=new Ln({h:$2(o,l),s:z2(o,l),v:k2(o,l)});r.push(c)}return e.theme==="dark"?gj.map(function(u){var d=u.index,f=u.amount;return new Ln(e.backgroundColor||"#141414").mix(r[d],f).toHexString()}):r.map(function(u){return u.toHexString()})}var Mb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},tC=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];tC.primary=tC[5];var nC=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];nC.primary=nC[5];var rC=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];rC.primary=rC[5];var gy=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];gy.primary=gy[5];var iC=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];iC.primary=iC[5];var oC=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];oC.primary=oC[5];var sC=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];sC.primary=sC[5];var aC=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];aC.primary=aC[5];var vy=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];vy.primary=vy[5];var lC=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];lC.primary=lC[5];var cC=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];cC.primary=cC[5];var uC=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];uC.primary=uC[5];var dC=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];dC.primary=dC[5];var Rb={red:tC,volcano:nC,orange:rC,gold:gy,yellow:iC,lime:oC,green:sC,cyan:aC,blue:vy,geekblue:lC,purple:cC,magenta:uC,grey:dC};const IU={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},hm=Object.assign(Object.assign({},IU),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function vj(n,e){let{generateColorPalettes:r,generateNeutralColorPalettes:i}=e;const{colorSuccess:o,colorWarning:s,colorError:a,colorInfo:l,colorPrimary:c,colorBgBase:u,colorTextBase:d}=n,f=r(c),h=r(o),p=r(s),g=r(a),y=r(l),v=i(u,d),m=n.colorLink||n.colorInfo,x=r(m),_=new Ln(g[1]).mix(new Ln(g[3]),50).toHexString();return Object.assign(Object.assign({},v),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgFilledHover:_,colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:p[1],colorWarningBgHover:p[2],colorWarningBorder:p[3],colorWarningBorderHover:p[4],colorWarningHover:p[4],colorWarning:p[6],colorWarningActive:p[7],colorWarningTextHover:p[8],colorWarningText:p[9],colorWarningTextActive:p[10],colorInfoBg:y[1],colorInfoBgHover:y[2],colorInfoBorder:y[3],colorInfoBorderHover:y[4],colorInfoHover:y[4],colorInfo:y[6],colorInfoActive:y[7],colorInfoTextHover:y[8],colorInfoText:y[9],colorInfoTextActive:y[10],colorLinkHover:x[4],colorLink:x[6],colorLinkActive:x[7],colorBgMask:new Ln("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const yj=n=>{let e=n,r=n,i=n,o=n;return n<6&&n>=5?e=n+1:n<16&&n>=6?e=n+2:n>=16&&(e=16),n<7&&n>=5?r=4:n<8&&n>=7?r=5:n<14&&n>=8?r=6:n<16&&n>=14?r=7:n>=16&&(r=8),n<6&&n>=2?i=1:n>=6&&(i=2),n>4&&n<8?o=4:n>=8&&(o=6),{borderRadius:n,borderRadiusXS:i,borderRadiusSM:r,borderRadiusLG:e,borderRadiusOuter:o}};function xj(n){const{motionUnit:e,motionBase:r,borderRadius:i,lineWidth:o}=n;return Object.assign({motionDurationFast:`${(r+e).toFixed(1)}s`,motionDurationMid:`${(r+e*2).toFixed(1)}s`,motionDurationSlow:`${(r+e*3).toFixed(1)}s`,lineWidthBold:o+1},yj(i))}const _j=n=>{const{controlHeight:e}=n;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function A0(n){return(n+8)/n}function bj(n){const e=new Array(10).fill(null).map((r,i)=>{const o=i-1,s=n*Math.pow(Math.E,o/5),a=i>1?Math.floor(s):Math.ceil(s);return Math.floor(a/2)*2});return e[1]=n,e.map(r=>({size:r,lineHeight:A0(r)}))}const Sj=n=>{const e=bj(n),r=e.map(d=>d.size),i=e.map(d=>d.lineHeight),o=r[1],s=r[0],a=r[2],l=i[1],c=i[0],u=i[2];return{fontSizeSM:s,fontSize:o,fontSizeLG:a,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:l,lineHeightLG:u,lineHeightSM:c,fontHeight:Math.round(l*o),fontHeightLG:Math.round(u*a),fontHeightSM:Math.round(c*s),lineHeightHeading1:i[6],lineHeightHeading2:i[5],lineHeightHeading3:i[4],lineHeightHeading4:i[3],lineHeightHeading5:i[2]}};function wj(n){const{sizeUnit:e,sizeStep:r}=n;return{sizeXXL:e*(r+8),sizeXL:e*(r+4),sizeLG:e*(r+2),sizeMD:e*(r+1),sizeMS:e*r,size:e*r,sizeSM:e*(r-1),sizeXS:e*(r-2),sizeXXS:e*(r-3)}}const Po=(n,e)=>new Ln(n).setA(e).toRgbString(),Rh=(n,e)=>new Ln(n).darken(e).toHexString(),Cj=n=>{const e=fm(n);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},Ej=(n,e)=>{const r=n||"#fff",i=e||"#000";return{colorBgBase:r,colorTextBase:i,colorText:Po(i,.88),colorTextSecondary:Po(i,.65),colorTextTertiary:Po(i,.45),colorTextQuaternary:Po(i,.25),colorFill:Po(i,.15),colorFillSecondary:Po(i,.06),colorFillTertiary:Po(i,.04),colorFillQuaternary:Po(i,.02),colorBgSolid:Po(i,1),colorBgSolidHover:Po(i,.75),colorBgSolidActive:Po(i,.95),colorBgLayout:Rh(r,4),colorBgContainer:Rh(r,0),colorBgElevated:Rh(r,0),colorBgSpotlight:Po(i,.85),colorBgBlur:"transparent",colorBorder:Rh(r,15),colorBorderSecondary:Rh(r,6)}};function Tj(n){Mb.pink=Mb.magenta,Rb.pink=Rb.magenta;const e=Object.keys(IU).map(r=>{const i=n[r]===Mb[r]?Rb[r]:fm(n[r]);return new Array(10).fill(1).reduce((o,s,a)=>(o[`${r}-${a+1}`]=i[a],o[`${r}${a+1}`]=i[a],o),{})}).reduce((r,i)=>(r=Object.assign(Object.assign({},r),i),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),e),vj(n,{generateColorPalettes:Cj,generateNeutralColorPalettes:Ej})),Sj(n.fontSize)),wj(n)),_j(n)),xj(n))}const DU=Yw(Tj),fC={token:hm,override:{override:hm},hashed:!0},LU=se.createContext(fC),yy="ant",Vx="anticon",Mj=["outlined","borderless","filled"],Rj=(n,e)=>e||(n?`${yy}-${n}`:yy),$t=b.createContext({getPrefixCls:Rj,iconPrefixCls:Vx}),{Consumer:DTe}=$t,Aj=`-ant-${Date.now()}-${Math.random()}`;function Nj(n,e){const r={},i=(a,l)=>{let c=a.clone();return c=(l==null?void 0:l(c))||c,c.toRgbString()},o=(a,l)=>{const c=new Ln(a),u=fm(c.toRgbString());r[`${l}-color`]=i(c),r[`${l}-color-disabled`]=u[1],r[`${l}-color-hover`]=u[4],r[`${l}-color-active`]=u[6],r[`${l}-color-outline`]=c.clone().setA(.2).toRgbString(),r[`${l}-color-deprecated-bg`]=u[0],r[`${l}-color-deprecated-border`]=u[2]};if(e.primaryColor){o(e.primaryColor,"primary");const a=new Ln(e.primaryColor),l=fm(a.toRgbString());l.forEach((u,d)=>{r[`primary-${d+1}`]=u}),r["primary-color-deprecated-l-35"]=i(a,u=>u.lighten(35)),r["primary-color-deprecated-l-20"]=i(a,u=>u.lighten(20)),r["primary-color-deprecated-t-20"]=i(a,u=>u.tint(20)),r["primary-color-deprecated-t-50"]=i(a,u=>u.tint(50)),r["primary-color-deprecated-f-12"]=i(a,u=>u.setA(u.a*.12));const c=new Ln(l[0]);r["primary-color-active-deprecated-f-30"]=i(c,u=>u.setA(u.a*.3)),r["primary-color-active-deprecated-d-02"]=i(c,u=>u.darken(2))}return e.successColor&&o(e.successColor,"success"),e.warningColor&&o(e.warningColor,"warning"),e.errorColor&&o(e.errorColor,"error"),e.infoColor&&o(e.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(a=>`--${n}-${a}: ${r[a]};`).join(`
`)}
  }
  `.trim()}function Pj(n,e){const r=Nj(n,e);vi()&&Ga(r,`${Aj}-dynamic-theme`)}const el=b.createContext(!1),FU=n=>{let{children:e,disabled:r}=n;const i=b.useContext(el);return b.createElement(el.Provider,{value:r??i},e)},_f=b.createContext(void 0),Oj=n=>{let{children:e,size:r}=n;const i=b.useContext(_f);return b.createElement(_f.Provider,{value:r||i},e)};function Ij(){const n=b.useContext(el),e=b.useContext(_f);return{componentDisabled:n,componentSize:e}}var UU=jr(function n(){Hr(this,n)}),BU="CALC_UNIT",Dj=new RegExp(BU,"g");function Ab(n){return typeof n=="number"?"".concat(n).concat(BU):n}var Lj=function(n){yc(r,n);var e=xc(r);function r(i,o){var s;Hr(this,r),s=e.call(this),ee(nn(s),"result",""),ee(nn(s),"unitlessCssVar",void 0),ee(nn(s),"lowPriority",void 0);var a=Rt(i);return s.unitlessCssVar=o,i instanceof r?s.result="(".concat(i.result,")"):a==="number"?s.result=Ab(i):a==="string"&&(s.result=i),s}return jr(r,[{key:"add",value:function(o){return o instanceof r?this.result="".concat(this.result," + ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," + ").concat(Ab(o))),this.lowPriority=!0,this}},{key:"sub",value:function(o){return o instanceof r?this.result="".concat(this.result," - ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," - ").concat(Ab(o))),this.lowPriority=!0,this}},{key:"mul",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof r?this.result="".concat(this.result," * ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," * ").concat(o)),this.lowPriority=!1,this}},{key:"div",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof r?this.result="".concat(this.result," / ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," / ").concat(o)),this.lowPriority=!1,this}},{key:"getResult",value:function(o){return this.lowPriority||o?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(o){var s=this,a=o||{},l=a.unit,c=!0;return typeof l=="boolean"?c=l:Array.from(this.unitlessCssVar).some(function(u){return s.result.includes(u)})&&(c=!1),this.result=this.result.replace(Dj,c?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),r}(UU),Fj=function(n){yc(r,n);var e=xc(r);function r(i){var o;return Hr(this,r),o=e.call(this),ee(nn(o),"result",0),i instanceof r?o.result=i.result:typeof i=="number"&&(o.result=i),o}return jr(r,[{key:"add",value:function(o){return o instanceof r?this.result+=o.result:typeof o=="number"&&(this.result+=o),this}},{key:"sub",value:function(o){return o instanceof r?this.result-=o.result:typeof o=="number"&&(this.result-=o),this}},{key:"mul",value:function(o){return o instanceof r?this.result*=o.result:typeof o=="number"&&(this.result*=o),this}},{key:"div",value:function(o){return o instanceof r?this.result/=o.result:typeof o=="number"&&(this.result/=o),this}},{key:"equal",value:function(){return this.result}}]),r}(UU),Uj=function(e,r){var i=e==="css"?Lj:Fj;return function(o){return new i(o,r)}},V2=function(e,r){return"".concat([r,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Sr(n){var e=b.useRef();e.current=n;var r=b.useCallback(function(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(i=e.current)===null||i===void 0?void 0:i.call.apply(i,[e].concat(s))},[]);return r}function bf(n){var e=b.useRef(!1),r=b.useState(n),i=Ce(r,2),o=i[0],s=i[1];b.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function a(l,c){c&&e.current||s(l)}return[o,a]}function Nb(n){return n!==void 0}function no(n,e){var r=e||{},i=r.defaultValue,o=r.value,s=r.onChange,a=r.postState,l=bf(function(){return Nb(o)?o:Nb(i)?typeof i=="function"?i():i:typeof n=="function"?n():n}),c=Ce(l,2),u=c[0],d=c[1],f=o!==void 0?o:u,h=a?a(f):f,p=Sr(s),g=bf([f]),y=Ce(g,2),v=y[0],m=y[1];R2(function(){var _=v[0];u!==_&&p(u,_)},[v]),R2(function(){Nb(o)||d(o)},[o]);var x=Sr(function(_,S){d(_,S),m([f],S)});return[h,x]}function G2(n,e,r,i){var o=re({},e[n]);if(i!=null&&i.deprecatedTokens){var s=i.deprecatedTokens;s.forEach(function(l){var c=Ce(l,2),u=c[0],d=c[1];if(o!=null&&o[u]||o!=null&&o[d]){var f;(f=o[d])!==null&&f!==void 0||(o[d]=o==null?void 0:o[u])}})}var a=re(re({},r),o);return Object.keys(a).forEach(function(l){a[l]===e[l]&&delete a[l]}),a}var $U=typeof CSSINJS_STATISTIC<"u",hC=!0;function Un(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(!$U)return Object.assign.apply(Object,[{}].concat(e));hC=!1;var i={};return e.forEach(function(o){if(Rt(o)==="object"){var s=Object.keys(o);s.forEach(function(a){Object.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return o[a]}})})}}),hC=!0,i}var H2={};function Bj(){}var $j=function(e){var r,i=e,o=Bj;return $U&&typeof Proxy<"u"&&(r=new Set,i=new Proxy(e,{get:function(a,l){if(hC){var c;(c=r)===null||c===void 0||c.add(l)}return a[l]}}),o=function(a,l){var c;H2[a]={global:Array.from(r),component:re(re({},(c=H2[a])===null||c===void 0?void 0:c.component),l)}}),{token:i,keys:r,flush:o}};function j2(n,e,r){if(typeof r=="function"){var i;return r(Un(e,(i=e[n])!==null&&i!==void 0?i:{}))}return r??{}}function zj(n){return n==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return"max(".concat(i.map(function(s){return De(s)}).join(","),")")},min:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return"min(".concat(i.map(function(s){return De(s)}).join(","),")")}}}var kj=1e3*60*10,Vj=function(){function n(){Hr(this,n),ee(this,"map",new Map),ee(this,"objectIDMap",new WeakMap),ee(this,"nextID",0),ee(this,"lastAccessBeat",new Map),ee(this,"accessBeat",0)}return jr(n,[{key:"set",value:function(r,i){this.clear();var o=this.getCompositeKey(r);this.map.set(o,i),this.lastAccessBeat.set(o,Date.now())}},{key:"get",value:function(r){var i=this.getCompositeKey(r),o=this.map.get(i);return this.lastAccessBeat.set(i,Date.now()),this.accessBeat+=1,o}},{key:"getCompositeKey",value:function(r){var i=this,o=r.map(function(s){return s&&Rt(s)==="object"?"obj_".concat(i.getObjectID(s)):"".concat(Rt(s),"_").concat(s)});return o.join("|")}},{key:"getObjectID",value:function(r){if(this.objectIDMap.has(r))return this.objectIDMap.get(r);var i=this.nextID;return this.objectIDMap.set(r,i),this.nextID+=1,i}},{key:"clear",value:function(){var r=this;if(this.accessBeat>1e4){var i=Date.now();this.lastAccessBeat.forEach(function(o,s){i-o>kj&&(r.map.delete(s),r.lastAccessBeat.delete(s))}),this.accessBeat=0}}}]),n}(),W2=new Vj;function Gj(n,e){return se.useMemo(function(){var r=W2.get(e);if(r)return r;var i=n();return W2.set(e,i),i},e)}var Hj=function(){return{}};function jj(n){var e=n.useCSP,r=e===void 0?Hj:e,i=n.useToken,o=n.usePrefix,s=n.getResetStyles,a=n.getCommonStyle,l=n.getCompUnitless;function c(h,p,g,y){var v=Array.isArray(h)?h[0]:h;function m(T){return"".concat(String(v)).concat(T.slice(0,1).toUpperCase()).concat(T.slice(1))}var x=(y==null?void 0:y.unitless)||{},_=typeof l=="function"?l(h):{},S=re(re({},_),{},ee({},m("zIndexPopup"),!0));Object.keys(x).forEach(function(T){S[m(T)]=x[T]});var w=re(re({},y),{},{unitless:S,prefixToken:m}),C=d(h,p,g,w),E=u(v,g,w);return function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,R=C(T,M),N=Ce(R,2),D=N[1],L=E(M),A=Ce(L,2),I=A[0],P=A[1];return[I,D,P]}}function u(h,p,g){var y=g.unitless,v=g.injectStyle,m=v===void 0?!0:v,x=g.prefixToken,_=g.ignore,S=function(E){var T=E.rootCls,M=E.cssVar,R=M===void 0?{}:M,N=i(),D=N.realToken;return tj({path:[h],prefix:R.prefix,key:R.key,unitless:y,ignore:_,token:D,scope:T},function(){var L=j2(h,D,p),A=G2(h,D,L,{deprecatedTokens:g==null?void 0:g.deprecatedTokens});return Object.keys(L).forEach(function(I){A[x(I)]=A[I],delete A[I]}),A}),null},w=function(E){var T=i(),M=T.cssVar;return[function(R){return m&&M?se.createElement(se.Fragment,null,se.createElement(S,{rootCls:E,cssVar:M,component:h}),R):R},M==null?void 0:M.key]};return w}function d(h,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=Array.isArray(h)?h:[h,h],m=Ce(v,1),x=m[0],_=v.join("-"),S=n.layer||{name:"antd"};return function(w){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,E=i(),T=E.theme,M=E.realToken,R=E.hashId,N=E.token,D=E.cssVar,L=o(),A=L.rootPrefixCls,I=L.iconPrefixCls,P=r(),F=D?"css":"js",O=Gj(function(){var z=new Set;return D&&Object.keys(y.unitless||{}).forEach(function(j){z.add(S0(j,D.prefix)),z.add(S0(j,V2(x,D.prefix)))}),Uj(F,z)},[F,x,D==null?void 0:D.prefix]),V=zj(F),U=V.max,k=V.min,W={theme:T,token:N,hashId:R,nonce:function(){return P.nonce},clientOnly:y.clientOnly,layer:S,order:y.order||-999};typeof s=="function"&&eC(re(re({},W),{},{clientOnly:!1,path:["Shared",A]}),function(){return s(N,{prefix:{rootPrefixCls:A,iconPrefixCls:I},csp:P})});var J=eC(re(re({},W),{},{path:[_,w,I]}),function(){if(y.injectStyle===!1)return[];var z=$j(N),j=z.token,X=z.flush,Q=j2(x,M,g),ne=".".concat(w),ye=G2(x,M,Q,{deprecatedTokens:y.deprecatedTokens});D&&Q&&Rt(Q)==="object"&&Object.keys(Q).forEach(function(ge){Q[ge]="var(".concat(S0(ge,V2(x,D.prefix)),")")});var me=Un(j,{componentCls:ne,prefixCls:w,iconCls:".".concat(I),antCls:".".concat(A),calc:O,max:U,min:k},D?Q:ye),fe=p(me,{hashId:R,prefixCls:w,rootPrefixCls:A,iconPrefixCls:I});X(x,ye);var le=typeof a=="function"?a(me,w,C,y.resetFont):null;return[y.resetStyle===!1?null:le,fe]});return[J,R]}}function f(h,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=d(h,p,g,re({resetStyle:!1,order:-998},y)),m=function(_){var S=_.prefixCls,w=_.rootCls,C=w===void 0?S:w;return v(S,C),null};return m}return{genStyleHooks:c,genSubStyleComponent:f,genComponentStyleHook:d}}const Sf=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],Wj="5.23.0";function Pb(n){return n>=0&&n<=255}function tv(n,e){const{r,g:i,b:o,a:s}=new Ln(n).toRgb();if(s<1)return n;const{r:a,g:l,b:c}=new Ln(e).toRgb();for(let u=.01;u<=1;u+=.01){const d=Math.round((r-a*(1-u))/u),f=Math.round((i-l*(1-u))/u),h=Math.round((o-c*(1-u))/u);if(Pb(d)&&Pb(f)&&Pb(h))return new Ln({r:d,g:f,b:h,a:Math.round(u*100)/100}).toRgbString()}return new Ln({r,g:i,b:o,a:1}).toRgbString()}var qj=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function zU(n){const{override:e}=n,r=qj(n,["override"]),i=Object.assign({},e);Object.keys(hm).forEach(h=>{delete i[h]});const o=Object.assign(Object.assign({},r),i),s=480,a=576,l=768,c=992,u=1200,d=1600;if(o.motion===!1){const h="0s";o.motionDurationFast=h,o.motionDurationMid=h,o.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},o),{colorFillContent:o.colorFillSecondary,colorFillContentHover:o.colorFill,colorFillAlter:o.colorFillQuaternary,colorBgContainerDisabled:o.colorFillTertiary,colorBorderBg:o.colorBgContainer,colorSplit:tv(o.colorBorderSecondary,o.colorBgContainer),colorTextPlaceholder:o.colorTextQuaternary,colorTextDisabled:o.colorTextQuaternary,colorTextHeading:o.colorText,colorTextLabel:o.colorTextSecondary,colorTextDescription:o.colorTextTertiary,colorTextLightSolid:o.colorWhite,colorHighlight:o.colorError,colorBgTextHover:o.colorFillSecondary,colorBgTextActive:o.colorFill,colorIcon:o.colorTextTertiary,colorIconHover:o.colorText,colorErrorOutline:tv(o.colorErrorBg,o.colorBgContainer),colorWarningOutline:tv(o.colorWarningBg,o.colorBgContainer),fontSizeIcon:o.fontSizeSM,lineWidthFocus:o.lineWidth*3,lineWidth:o.lineWidth,controlOutlineWidth:o.lineWidth*2,controlInteractiveSize:o.controlHeight/2,controlItemBgHover:o.colorFillTertiary,controlItemBgActive:o.colorPrimaryBg,controlItemBgActiveHover:o.colorPrimaryBgHover,controlItemBgActiveDisabled:o.colorFill,controlTmpOutline:o.colorFillQuaternary,controlOutline:tv(o.colorPrimaryBg,o.colorBgContainer),lineType:o.lineType,borderRadius:o.borderRadius,borderRadiusXS:o.borderRadiusXS,borderRadiusSM:o.borderRadiusSM,borderRadiusLG:o.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:o.sizeXXS,paddingXS:o.sizeXS,paddingSM:o.sizeSM,padding:o.size,paddingMD:o.sizeMD,paddingLG:o.sizeLG,paddingXL:o.sizeXL,paddingContentHorizontalLG:o.sizeLG,paddingContentVerticalLG:o.sizeMS,paddingContentHorizontal:o.sizeMS,paddingContentVertical:o.sizeSM,paddingContentHorizontalSM:o.size,paddingContentVerticalSM:o.sizeXS,marginXXS:o.sizeXXS,marginXS:o.sizeXS,marginSM:o.sizeSM,margin:o.size,marginMD:o.sizeMD,marginLG:o.sizeLG,marginXL:o.sizeXL,marginXXL:o.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:s,screenXSMin:s,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:c-1,screenLG:c,screenLGMin:c,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:d-1,screenXXL:d,screenXXLMin:d,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ln("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ln("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ln("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),i)}var q2=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const kU={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},Xj={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},Kj={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},VU=(n,e,r)=>{const i=r.getDerivativeToken(n),{override:o}=e,s=q2(e,["override"]);let a=Object.assign(Object.assign({},i),{override:o});return a=zU(a),s&&Object.entries(s).forEach(l=>{let[c,u]=l;const{theme:d}=u,f=q2(u,["theme"]);let h=f;d&&(h=VU(Object.assign(Object.assign({},a),f),{override:f},d)),a[c]=h}),a};function io(){const{token:n,hashed:e,theme:r,override:i,cssVar:o}=se.useContext(LU),s=`${Wj}-${e||""}`,a=r||DU,[l,c,u]=R8(a,[hm,n],{salt:s,override:i,getComputedToken:VU,formatToken:zU,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:kU,ignore:Xj,preserve:Kj}});return[a,u,e?c:"",l,o]}const pC={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ns=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:n.colorText,fontSize:n.fontSize,lineHeight:n.lineHeight,listStyle:"none",fontFamily:e?"inherit":n.fontFamily}},Gx=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),GU=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),Yj=n=>({a:{color:n.colorLink,textDecoration:n.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${n.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive},"&:active, &:hover":{textDecoration:n.linkHoverDecoration,outline:0},"&:focus":{textDecoration:n.linkFocusDecoration,outline:0},"&[disabled]":{color:n.colorTextDisabled,cursor:"not-allowed"}}}),Qj=(n,e,r,i)=>{const o=`[class^="${e}"], [class*=" ${e}"]`,s=r?`.${r}`:o,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let l={};return i!==!1&&(l={fontFamily:n.fontFamily,fontSize:n.fontSize}),{[s]:Object.assign(Object.assign(Object.assign({},l),a),{[o]:a})}},mC=(n,e)=>({outline:`${De(n.lineWidthFocus)} solid ${n.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),ig=(n,e)=>({"&:focus-visible":Object.assign({},mC(n,e))}),HU=n=>({[`.${n}`]:Object.assign(Object.assign({},Gx()),{[`.${n} .${n}-icon`]:{display:"block"}})}),jU=n=>Object.assign(Object.assign({color:n.colorLink,textDecoration:n.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${n.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},ig(n)),{"&:focus, &:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive}}),{genStyleHooks:ai,genComponentStyleHook:Zj,genSubStyleComponent:jT}=jj({usePrefix:()=>{const{getPrefixCls:n,iconPrefixCls:e}=b.useContext($t);return{rootPrefixCls:n(),iconPrefixCls:e}},useToken:()=>{const[n,e,r,i,o]=io();return{theme:n,realToken:e,hashId:r,token:i,cssVar:o}},useCSP:()=>{const{csp:n}=b.useContext($t);return n??{}},getResetStyles:(n,e)=>{var r;return[{"&":Yj(n)},HU((r=e==null?void 0:e.prefix.iconPrefixCls)!==null&&r!==void 0?r:Vx)]},getCommonStyle:Qj,getCompUnitless:()=>kU});function Jj(n,e){return Sf.reduce((r,i)=>{const o=n[`${i}1`],s=n[`${i}3`],a=n[`${i}6`],l=n[`${i}7`];return Object.assign(Object.assign({},r),e(i,{lightColor:o,lightBorderColor:s,darkColor:a,textColor:l}))},{})}const eW=(n,e)=>{const[r,i]=io();return eC({token:i,hashId:"",path:["ant-design-icons",n],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[HU(n)])},tW=Object.assign({},cx),{useId:X2}=tW,nW=()=>"",rW=typeof X2>"u"?nW:X2;function iW(n,e,r){var i;GT();const o=n||{},s=o.inherit===!1||!e?Object.assign(Object.assign({},fC),{hashed:(i=e==null?void 0:e.hashed)!==null&&i!==void 0?i:fC.hashed,cssVar:e==null?void 0:e.cssVar}):e,a=rW();return Lx(()=>{var l,c;if(!n)return e;const u=Object.assign({},s.components);Object.keys(n.components||{}).forEach(h=>{u[h]=Object.assign(Object.assign({},u[h]),n.components[h])});const d=`css-var-${a.replace(/:/g,"")}`,f=((l=o.cssVar)!==null&&l!==void 0?l:s.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof s.cssVar=="object"?s.cssVar:{}),typeof o.cssVar=="object"?o.cssVar:{}),{key:typeof o.cssVar=="object"&&((c=o.cssVar)===null||c===void 0?void 0:c.key)||d});return Object.assign(Object.assign(Object.assign({},s),o),{token:Object.assign(Object.assign({},s.token),o.token),components:u,cssVar:f})},[o,s],(l,c)=>l.some((u,d)=>{const f=c[d];return!Xw(u,f,!0)}))}var oW=["children"],WU=b.createContext({});function sW(n){var e=n.children,r=Cn(n,oW);return b.createElement(WU.Provider,{value:r},e)}var aW=function(n){yc(r,n);var e=xc(r);function r(){return Hr(this,r),e.apply(this,arguments)}return jr(r,[{key:"render",value:function(){return this.props.children}}]),r}(b.Component);function lW(n){var e=b.useReducer(function(l){return l+1},0),r=Ce(e,2),i=r[1],o=b.useRef(n),s=Sr(function(){return o.current}),a=Sr(function(l){o.current=typeof l=="function"?l(o.current):l,i()});return[s,a]}var Ol="none",nv="appear",rv="enter",iv="leave",K2="none",ps="prepare",Ld="start",Fd="active",WT="end",qU="prepared";function Y2(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit".concat(n)]="webkit".concat(e),r["Moz".concat(n)]="moz".concat(e),r["ms".concat(n)]="MS".concat(e),r["O".concat(n)]="o".concat(e.toLowerCase()),r}function cW(n,e){var r={animationend:Y2("Animation","AnimationEnd"),transitionend:Y2("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete r.animationend.animation,"TransitionEvent"in e||delete r.transitionend.transition),r}var uW=cW(vi(),typeof window<"u"?window:{}),XU={};if(vi()){var dW=document.createElement("div");XU=dW.style}var ov={};function KU(n){if(ov[n])return ov[n];var e=uW[n];if(e)for(var r=Object.keys(e),i=r.length,o=0;o<i;o+=1){var s=r[o];if(Object.prototype.hasOwnProperty.call(e,s)&&s in XU)return ov[n]=e[s],ov[n]}return""}var YU=KU("animationend"),QU=KU("transitionend"),ZU=!!(YU&&QU),Q2=YU||"animationend",Z2=QU||"transitionend";function J2(n,e){if(!n)return null;if(Rt(n)==="object"){var r=e.replace(/-\w/g,function(i){return i[1].toUpperCase()});return n[r]}return"".concat(n,"-").concat(e)}const fW=function(n){var e=b.useRef();function r(o){o&&(o.removeEventListener(Z2,n),o.removeEventListener(Q2,n))}function i(o){e.current&&e.current!==o&&r(e.current),o&&o!==e.current&&(o.addEventListener(Z2,n),o.addEventListener(Q2,n),e.current=o)}return b.useEffect(function(){return function(){r(e.current)}},[]),[i,r]};var JU=vi()?b.useLayoutEffect:b.useEffect;const hW=function(){var n=b.useRef(null);function e(){mr.cancel(n.current)}function r(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=mr(function(){o<=1?i({isCanceled:function(){return s!==n.current}}):r(i,o-1)});n.current=s}return b.useEffect(function(){return function(){e()}},[]),[r,e]};var pW=[ps,Ld,Fd,WT],mW=[ps,qU],eB=!1,gW=!0;function tB(n){return n===Fd||n===WT}const vW=function(n,e,r){var i=bf(K2),o=Ce(i,2),s=o[0],a=o[1],l=hW(),c=Ce(l,2),u=c[0],d=c[1];function f(){a(ps,!0)}var h=e?mW:pW;return JU(function(){if(s!==K2&&s!==WT){var p=h.indexOf(s),g=h[p+1],y=r(s);y===eB?a(g,!0):g&&u(function(v){function m(){v.isCanceled()||a(g,!0)}y===!0?m():Promise.resolve(y).then(m)})}},[n,s]),b.useEffect(function(){return function(){d()}},[]),[f,s]};function yW(n,e,r,i){var o=i.motionEnter,s=o===void 0?!0:o,a=i.motionAppear,l=a===void 0?!0:a,c=i.motionLeave,u=c===void 0?!0:c,d=i.motionDeadline,f=i.motionLeaveImmediately,h=i.onAppearPrepare,p=i.onEnterPrepare,g=i.onLeavePrepare,y=i.onAppearStart,v=i.onEnterStart,m=i.onLeaveStart,x=i.onAppearActive,_=i.onEnterActive,S=i.onLeaveActive,w=i.onAppearEnd,C=i.onEnterEnd,E=i.onLeaveEnd,T=i.onVisibleChanged,M=bf(),R=Ce(M,2),N=R[0],D=R[1],L=lW(Ol),A=Ce(L,2),I=A[0],P=A[1],F=bf(null),O=Ce(F,2),V=O[0],U=O[1],k=I(),W=b.useRef(!1),J=b.useRef(null);function z(){return r()}var j=b.useRef(!1);function X(){P(Ol),U(null,!0)}var Q=Sr(function(H){var B=I();if(B!==Ol){var K=z();if(!(H&&!H.deadline&&H.target!==K)){var oe=j.current,pe;B===nv&&oe?pe=w==null?void 0:w(K,H):B===rv&&oe?pe=C==null?void 0:C(K,H):B===iv&&oe&&(pe=E==null?void 0:E(K,H)),oe&&pe!==!1&&X()}}}),ne=fW(Q),ye=Ce(ne,1),me=ye[0],fe=function(B){switch(B){case nv:return ee(ee(ee({},ps,h),Ld,y),Fd,x);case rv:return ee(ee(ee({},ps,p),Ld,v),Fd,_);case iv:return ee(ee(ee({},ps,g),Ld,m),Fd,S);default:return{}}},le=b.useMemo(function(){return fe(k)},[k]),ge=vW(k,!n,function(H){if(H===ps){var B=le[ps];return B?B(z()):eB}if(be in le){var K;U(((K=le[be])===null||K===void 0?void 0:K.call(le,z(),null))||null)}return be===Fd&&k!==Ol&&(me(z()),d>0&&(clearTimeout(J.current),J.current=setTimeout(function(){Q({deadline:!0})},d))),be===qU&&X(),gW}),q=Ce(ge,2),ve=q[0],be=q[1],xe=tB(be);j.current=xe;var we=b.useRef(null);JU(function(){if(!(W.current&&we.current===e)){D(e);var H=W.current;W.current=!0;var B;!H&&e&&l&&(B=nv),H&&e&&s&&(B=rv),(H&&!e&&u||!H&&f&&!e&&u)&&(B=iv);var K=fe(B);B&&(n||K[ps])?(P(B),ve()):P(Ol),we.current=e}},[e]),b.useEffect(function(){(k===nv&&!l||k===rv&&!s||k===iv&&!u)&&P(Ol)},[l,s,u]),b.useEffect(function(){return function(){W.current=!1,clearTimeout(J.current)}},[]);var qe=b.useRef(!1);b.useEffect(function(){N&&(qe.current=!0),N!==void 0&&k===Ol&&((qe.current||N)&&(T==null||T(N)),qe.current=!0)},[N,k]);var Fe=V;return le[ps]&&be===Ld&&(Fe=re({transition:"none"},Fe)),[k,be,Fe,N??e]}function xW(n){var e=n;Rt(n)==="object"&&(e=n.transitionSupport);function r(o,s){return!!(o.motionName&&e&&s!==!1)}var i=b.forwardRef(function(o,s){var a=o.visible,l=a===void 0?!0:a,c=o.removeOnLeave,u=c===void 0?!0:c,d=o.forceRender,f=o.children,h=o.motionName,p=o.leavedClassName,g=o.eventProps,y=b.useContext(WU),v=y.motion,m=r(o,v),x=b.useRef(),_=b.useRef();function S(){try{return x.current instanceof HTMLElement?x.current:Ap(_.current)}catch{return null}}var w=yW(m,l,S,o),C=Ce(w,4),E=C[0],T=C[1],M=C[2],R=C[3],N=b.useRef(R);R&&(N.current=!0);var D=b.useCallback(function(O){x.current=O,IT(s,O)},[s]),L,A=re(re({},g),{},{visible:l});if(!f)L=null;else if(E===Ol)R?L=f(re({},A),D):!u&&N.current&&p?L=f(re(re({},A),{},{className:p}),D):d||!u&&!p?L=f(re(re({},A),{},{style:{display:"none"}}),D):L=null;else{var I;T===ps?I="prepare":tB(T)?I="active":T===Ld&&(I="start");var P=J2(h,"".concat(E,"-").concat(I));L=f(re(re({},A),{},{className:_e(J2(h,E),ee(ee({},P,P&&I),h,typeof h=="string")),style:M}),D)}if(b.isValidElement(L)&&rg(L)){var F=Fx(L);F||(L=b.cloneElement(L,{ref:D}))}return b.createElement(aW,{ref:_},L)});return i.displayName="CSSMotion",i}const Du=xW(ZU);var gC="add",vC="keep",yC="remove",Ob="removed";function _W(n){var e;return n&&Rt(n)==="object"&&"key"in n?e=n:e={key:n},re(re({},e),{},{key:String(e.key)})}function xC(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(_W)}function bW(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],i=0,o=e.length,s=xC(n),a=xC(e);s.forEach(function(u){for(var d=!1,f=i;f<o;f+=1){var h=a[f];if(h.key===u.key){i<f&&(r=r.concat(a.slice(i,f).map(function(p){return re(re({},p),{},{status:gC})})),i=f),r.push(re(re({},h),{},{status:vC})),i+=1,d=!0;break}}d||r.push(re(re({},u),{},{status:yC}))}),i<o&&(r=r.concat(a.slice(i).map(function(u){return re(re({},u),{},{status:gC})})));var l={};r.forEach(function(u){var d=u.key;l[d]=(l[d]||0)+1});var c=Object.keys(l).filter(function(u){return l[u]>1});return c.forEach(function(u){r=r.filter(function(d){var f=d.key,h=d.status;return f!==u||h!==yC}),r.forEach(function(d){d.key===u&&(d.status=vC)})}),r}var SW=["component","children","onVisibleChanged","onAllRemoved"],wW=["status"],CW=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function EW(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du,r=function(i){yc(s,i);var o=xc(s);function s(){var a;Hr(this,s);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=o.call.apply(o,[this].concat(c)),ee(nn(a),"state",{keyEntities:[]}),ee(nn(a),"removeKey",function(d){a.setState(function(f){var h=f.keyEntities.map(function(p){return p.key!==d?p:re(re({},p),{},{status:Ob})});return{keyEntities:h}},function(){var f=a.state.keyEntities,h=f.filter(function(p){var g=p.status;return g!==Ob}).length;h===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return jr(s,[{key:"render",value:function(){var l=this,c=this.state.keyEntities,u=this.props,d=u.component,f=u.children,h=u.onVisibleChanged;u.onAllRemoved;var p=Cn(u,SW),g=d||b.Fragment,y={};return CW.forEach(function(v){y[v]=p[v],delete p[v]}),delete p.keys,b.createElement(g,p,c.map(function(v,m){var x=v.status,_=Cn(v,wW),S=x===gC||x===vC;return b.createElement(e,ut({},y,{key:_.key,visible:S,eventProps:_,onVisibleChanged:function(C){h==null||h(C,{key:_.key}),C||l.removeKey(_.key)}}),function(w,C){return f(re(re({},w),{},{index:m}),C)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,c){var u=l.keys,d=c.keyEntities,f=xC(u),h=bW(d,f);return{keyEntities:h.filter(function(p){var g=d.find(function(y){var v=y.key;return p.key===v});return!(g&&g.status===Ob&&p.status===yC)})}}}]),s}(b.Component);return ee(r,"defaultProps",{component:"div"}),r}const TW=EW(ZU);function MW(n){const{children:e}=n,[,r]=io(),{motion:i}=r,o=b.useRef(!1);return o.current=o.current||i===!1,o.current?b.createElement(sW,{motion:i},e):e}const RW=()=>null;var AW=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const NW=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let xy,nB,rB,iB;function N0(){return xy||yy}function PW(){return nB||Vx}function OW(n){return Object.keys(n).some(e=>e.endsWith("Color"))}const IW=n=>{const{prefixCls:e,iconPrefixCls:r,theme:i,holderRender:o}=n;e!==void 0&&(xy=e),r!==void 0&&(nB=r),"holderRender"in n&&(iB=o),i&&(OW(i)?Pj(N0(),i):rB=i)},oB=()=>({getPrefixCls:(n,e)=>e||(n?`${N0()}-${n}`:N0()),getIconPrefixCls:PW,getRootPrefixCls:()=>xy||N0(),getTheme:()=>rB,holderRender:iB}),DW=n=>{const{children:e,csp:r,autoInsertSpaceInButton:i,alert:o,anchor:s,form:a,locale:l,componentSize:c,direction:u,space:d,splitter:f,virtual:h,dropdownMatchSelectWidth:p,popupMatchSelectWidth:g,popupOverflow:y,legacyLocale:v,parentContext:m,iconPrefixCls:x,theme:_,componentDisabled:S,segmented:w,statistic:C,spin:E,calendar:T,carousel:M,cascader:R,collapse:N,typography:D,checkbox:L,descriptions:A,divider:I,drawer:P,skeleton:F,steps:O,image:V,layout:U,list:k,mentions:W,modal:J,progress:z,result:j,slider:X,breadcrumb:Q,menu:ne,pagination:ye,input:me,textArea:fe,empty:le,badge:ge,radio:q,rate:ve,switch:be,transfer:xe,avatar:we,message:qe,tag:Fe,table:H,card:B,tabs:K,timeline:oe,timePicker:pe,upload:ce,notification:Ue,tree:Re,colorPicker:Le,datePicker:Je,rangePicker:Me,flex:ze,wave:Ee,dropdown:Pe,warning:ke,tour:Ve,tooltip:$e,popover:xt,popconfirm:te,floatButtonGroup:Qe,variant:Se,inputNumber:Oe,treeSelect:Ze}=n,We=b.useCallback((ft,bt)=>{const{prefixCls:Dt}=n;if(bt)return bt;const yn=Dt||m.getPrefixCls("");return ft?`${yn}-${ft}`:yn},[m.getPrefixCls,n.prefixCls]),wt=x||m.iconPrefixCls||Vx,At=r||m.csp;eW(wt,At);const dt=iW(_,m.theme,{prefixCls:We("")}),Xe={csp:At,autoInsertSpaceInButton:i,alert:o,anchor:s,locale:l||v,direction:u,space:d,splitter:f,virtual:h,popupMatchSelectWidth:g??p,popupOverflow:y,getPrefixCls:We,iconPrefixCls:wt,theme:dt,segmented:w,statistic:C,spin:E,calendar:T,carousel:M,cascader:R,collapse:N,typography:D,checkbox:L,descriptions:A,divider:I,drawer:P,skeleton:F,steps:O,image:V,input:me,textArea:fe,layout:U,list:k,mentions:W,modal:J,progress:z,result:j,slider:X,breadcrumb:Q,menu:ne,pagination:ye,empty:le,badge:ge,radio:q,rate:ve,switch:be,transfer:xe,avatar:we,message:qe,tag:Fe,table:H,card:B,tabs:K,timeline:oe,timePicker:pe,upload:ce,notification:Ue,tree:Re,colorPicker:Le,datePicker:Je,rangePicker:Me,flex:ze,wave:Ee,dropdown:Pe,warning:ke,tour:Ve,tooltip:$e,popover:xt,popconfirm:te,floatButtonGroup:Qe,variant:Se,inputNumber:Oe,treeSelect:Ze},rt=Object.assign({},m);Object.keys(Xe).forEach(ft=>{Xe[ft]!==void 0&&(rt[ft]=Xe[ft])}),NW.forEach(ft=>{const bt=n[ft];bt&&(rt[ft]=bt)}),typeof i<"u"&&(rt.button=Object.assign({autoInsertSpace:i},rt.button));const Ft=Lx(()=>rt,rt,(ft,bt)=>{const Dt=Object.keys(ft),yn=Object.keys(bt);return Dt.length!==yn.length||Dt.some(un=>ft[un]!==bt[un])}),bn=b.useMemo(()=>({prefixCls:wt,csp:At}),[wt,At]);let Ke=b.createElement(b.Fragment,null,b.createElement(RW,{dropdownMatchSelectWidth:p}),e);const ot=b.useMemo(()=>{var ft,bt,Dt,yn;return Dd(((ft=_u.Form)===null||ft===void 0?void 0:ft.defaultValidateMessages)||{},((Dt=(bt=Ft.locale)===null||bt===void 0?void 0:bt.Form)===null||Dt===void 0?void 0:Dt.defaultValidateMessages)||{},((yn=Ft.form)===null||yn===void 0?void 0:yn.validateMessages)||{},(a==null?void 0:a.validateMessages)||{})},[Ft,a==null?void 0:a.validateMessages]);Object.keys(ot).length>0&&(Ke=b.createElement(aj.Provider,{value:ot},Ke)),l&&(Ke=b.createElement(fj,{locale:l,_ANT_MARK__:dj},Ke)),(wt||At)&&(Ke=b.createElement(VT.Provider,{value:bn},Ke)),c&&(Ke=b.createElement(Oj,{size:c},Ke)),Ke=b.createElement(MW,null,Ke);const yt=b.useMemo(()=>{const ft=dt||{},{algorithm:bt,token:Dt,components:yn,cssVar:un}=ft,Bn=AW(ft,["algorithm","token","components","cssVar"]),en=bt&&(!Array.isArray(bt)||bt.length>0)?Yw(bt):DU,En={};Object.entries(yn||{}).forEach(Vn=>{let[Nr,vt]=Vn;const $=Object.assign({},vt);"algorithm"in $&&($.algorithm===!0?$.theme=en:(Array.isArray($.algorithm)||typeof $.algorithm=="function")&&($.theme=Yw($.algorithm)),delete $.algorithm),En[Nr]=$});const ar=Object.assign(Object.assign({},hm),Dt);return Object.assign(Object.assign({},Bn),{theme:en,token:ar,components:En,override:Object.assign({override:ar},En),cssVar:un})},[dt]);return _&&(Ke=b.createElement(LU.Provider,{value:yt},Ke)),Ft.warning&&(Ke=b.createElement(sj.Provider,{value:Ft.warning},Ke)),S!==void 0&&(Ke=b.createElement(FU,{disabled:S},Ke)),b.createElement($t.Provider,{value:Ft},Ke)},cl=n=>{const e=b.useContext($t),r=b.useContext(HT);return b.createElement(DW,Object.assign({parentContext:e,legacyLocale:r},n))};cl.ConfigContext=$t;cl.SizeContext=_f;cl.config=IW;cl.useConfig=Ij;Object.defineProperty(cl,"SizeContext",{get:()=>_f});var LW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function sB(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}function FW(n){return sB(n)instanceof ShadowRoot}function _y(n){return FW(n)?sB(n):null}function UW(n){return n.replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function BW(n,e){eo(n,"[@ant-design/icons] ".concat(e))}function eN(n){return Rt(n)==="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(Rt(n.icon)==="object"||typeof n.icon=="function")}function tN(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).reduce(function(e,r){var i=n[r];switch(r){case"class":e.className=i,delete e.class;break;default:delete e[r],e[UW(r)]=i}return e},{})}function _C(n,e,r){return r?se.createElement(n.tag,re(re({key:e},tN(n.attrs)),r),(n.children||[]).map(function(i,o){return _C(i,"".concat(e,"-").concat(n.tag,"-").concat(o))})):se.createElement(n.tag,re({key:e},tN(n.attrs)),(n.children||[]).map(function(i,o){return _C(i,"".concat(e,"-").concat(n.tag,"-").concat(o))}))}function aB(n){return fm(n)[0]}function lB(n){return n?Array.isArray(n)?n:[n]:[]}var $W=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,zW=function(e){var r=b.useContext(VT),i=r.csp,o=r.prefixCls,s=$W;o&&(s=s.replace(/anticon/g,o)),b.useEffect(function(){var a=e.current,l=_y(a);Ga(s,"@ant-design-icons",{prepend:!0,csp:i,attachTo:l})},[])},kW=["icon","className","onClick","style","primaryColor","secondaryColor"],Pp={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function VW(n){var e=n.primaryColor,r=n.secondaryColor;Pp.primaryColor=e,Pp.secondaryColor=r||aB(e),Pp.calculated=!!r}function GW(){return re({},Pp)}var nh=function(e){var r=e.icon,i=e.className,o=e.onClick,s=e.style,a=e.primaryColor,l=e.secondaryColor,c=Cn(e,kW),u=b.useRef(),d=Pp;if(a&&(d={primaryColor:a,secondaryColor:l||aB(a)}),zW(u),BW(eN(r),"icon should be icon definiton, but got ".concat(r)),!eN(r))return null;var f=r;return f&&typeof f.icon=="function"&&(f=re(re({},f),{},{icon:f.icon(d.primaryColor,d.secondaryColor)})),_C(f.icon,"svg-".concat(f.name),re(re({className:i,onClick:o,style:s,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c),{},{ref:u}))};nh.displayName="IconReact";nh.getTwoToneColors=GW;nh.setTwoToneColors=VW;function cB(n){var e=lB(n),r=Ce(e,2),i=r[0],o=r[1];return nh.setTwoToneColors({primaryColor:i,secondaryColor:o})}function HW(){var n=nh.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var jW=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];cB(vy.primary);var vr=b.forwardRef(function(n,e){var r=n.className,i=n.icon,o=n.spin,s=n.rotate,a=n.tabIndex,l=n.onClick,c=n.twoToneColor,u=Cn(n,jW),d=b.useContext(VT),f=d.prefixCls,h=f===void 0?"anticon":f,p=d.rootClassName,g=_e(p,h,ee(ee({},"".concat(h,"-").concat(i.name),!!i.name),"".concat(h,"-spin"),!!o||i.name==="loading"),r),y=a;y===void 0&&l&&(y=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,m=lB(c),x=Ce(m,2),_=x[0],S=x[1];return b.createElement("span",ut({role:"img","aria-label":i.name},u,{ref:e,tabIndex:y,onClick:l,className:g}),b.createElement(nh,{icon:i,primaryColor:_,secondaryColor:S,style:v}))});vr.displayName="AntdIcon";vr.getTwoToneColor=HW;vr.setTwoToneColor=cB;var WW=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:LW}))},uB=b.forwardRef(WW),qW={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},XW=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:qW}))},Hx=b.forwardRef(XW),KW={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},YW=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:KW}))},og=b.forwardRef(YW),QW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},ZW=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:QW}))},dB=b.forwardRef(ZW),JW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},e9=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:JW}))},fB=b.forwardRef(e9),t9=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,n9=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,r9="".concat(t9," ").concat(n9).split(/[\s\n]+/),i9="aria-",o9="data-";function nN(n,e){return n.indexOf(e)===0}function ta(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;e===!1?r={aria:!0,data:!0,attr:!0}:e===!0?r={aria:!0}:r=re({},e);var i={};return Object.keys(n).forEach(function(o){(r.aria&&(o==="role"||nN(o,i9))||r.data&&nN(o,o9)||r.attr&&r9.includes(o))&&(i[o]=n[o])}),i}function hB(n){return n&&se.isValidElement(n)&&n.type===se.Fragment}const s9=(n,e,r)=>se.isValidElement(n)?se.cloneElement(n,typeof r=="function"?r(n.props||{}):r):e;function cc(n,e){return s9(n,n,e)}const bc=n=>{const[,,,,e]=io();return e?`${n}-css-var`:""};var He={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var r=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||r>=He.F1&&r<=He.F12)return!1;switch(r){case He.ALT:case He.CAPS_LOCK:case He.CONTEXT_MENU:case He.CTRL:case He.DOWN:case He.END:case He.ESC:case He.HOME:case He.INSERT:case He.LEFT:case He.MAC_FF_META:case He.META:case He.NUMLOCK:case He.NUM_CENTER:case He.PAGE_DOWN:case He.PAGE_UP:case He.PAUSE:case He.PRINT_SCREEN:case He.RIGHT:case He.SHIFT:case He.UP:case He.WIN_KEY:case He.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=He.ZERO&&e<=He.NINE||e>=He.NUM_ZERO&&e<=He.NUM_MULTIPLY||e>=He.A&&e<=He.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case He.SPACE:case He.QUESTION_MARK:case He.NUM_PLUS:case He.NUM_MINUS:case He.NUM_PERIOD:case He.NUM_DIVISION:case He.SEMICOLON:case He.DASH:case He.EQUALS:case He.COMMA:case He.PERIOD:case He.SLASH:case He.APOSTROPHE:case He.SINGLE_QUOTE:case He.OPEN_SQUARE_BRACKET:case He.BACKSLASH:case He.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},pB=b.forwardRef(function(n,e){var r=n.prefixCls,i=n.style,o=n.className,s=n.duration,a=s===void 0?4.5:s,l=n.showProgress,c=n.pauseOnHover,u=c===void 0?!0:c,d=n.eventKey,f=n.content,h=n.closable,p=n.closeIcon,g=p===void 0?"x":p,y=n.props,v=n.onClick,m=n.onNoticeClose,x=n.times,_=n.hovering,S=b.useState(!1),w=Ce(S,2),C=w[0],E=w[1],T=b.useState(0),M=Ce(T,2),R=M[0],N=M[1],D=b.useState(0),L=Ce(D,2),A=L[0],I=L[1],P=_||C,F=a>0&&l,O=function(){m(d)},V=function(j){(j.key==="Enter"||j.code==="Enter"||j.keyCode===He.ENTER)&&O()};b.useEffect(function(){if(!P&&a>0){var z=Date.now()-A,j=setTimeout(function(){O()},a*1e3-A);return function(){u&&clearTimeout(j),I(Date.now()-z)}}},[a,P,x]),b.useEffect(function(){if(!P&&F&&(u||A===0)){var z=performance.now(),j,X=function Q(){cancelAnimationFrame(j),j=requestAnimationFrame(function(ne){var ye=ne+A-z,me=Math.min(ye/(a*1e3),1);N(me*100),me<1&&Q()})};return X(),function(){u&&cancelAnimationFrame(j)}}},[a,A,P,F,x]);var U=b.useMemo(function(){return Rt(h)==="object"&&h!==null?h:h?{closeIcon:g}:{}},[h,g]),k=ta(U,!0),W=100-(!R||R<0?0:R>100?100:R),J="".concat(r,"-notice");return b.createElement("div",ut({},y,{ref:e,className:_e(J,o,ee({},"".concat(J,"-closable"),h)),style:i,onMouseEnter:function(j){var X;E(!0),y==null||(X=y.onMouseEnter)===null||X===void 0||X.call(y,j)},onMouseLeave:function(j){var X;E(!1),y==null||(X=y.onMouseLeave)===null||X===void 0||X.call(y,j)},onClick:v}),b.createElement("div",{className:"".concat(J,"-content")},f),h&&b.createElement("a",ut({tabIndex:0,className:"".concat(J,"-close"),onKeyDown:V,"aria-label":"Close"},k,{onClick:function(j){j.preventDefault(),j.stopPropagation(),O()}}),U.closeIcon),F&&b.createElement("progress",{className:"".concat(J,"-progress"),max:"100",value:W},W+"%"))}),mB=se.createContext({}),a9=function(e){var r=e.children,i=e.classNames;return se.createElement(mB.Provider,{value:{classNames:i}},r)},rN=8,iN=3,oN=16,l9=function(e){var r={offset:rN,threshold:iN,gap:oN};if(e&&Rt(e)==="object"){var i,o,s;r.offset=(i=e.offset)!==null&&i!==void 0?i:rN,r.threshold=(o=e.threshold)!==null&&o!==void 0?o:iN,r.gap=(s=e.gap)!==null&&s!==void 0?s:oN}return[!!e,r]},c9=["className","style","classNames","styles"],u9=function(e){var r=e.configList,i=e.placement,o=e.prefixCls,s=e.className,a=e.style,l=e.motion,c=e.onAllNoticeRemoved,u=e.onNoticeClose,d=e.stack,f=b.useContext(mB),h=f.classNames,p=b.useRef({}),g=b.useState(null),y=Ce(g,2),v=y[0],m=y[1],x=b.useState([]),_=Ce(x,2),S=_[0],w=_[1],C=r.map(function(P){return{config:P,key:String(P.key)}}),E=l9(d),T=Ce(E,2),M=T[0],R=T[1],N=R.offset,D=R.threshold,L=R.gap,A=M&&(S.length>0||C.length<=D),I=typeof l=="function"?l(i):l;return b.useEffect(function(){M&&S.length>1&&w(function(P){return P.filter(function(F){return C.some(function(O){var V=O.key;return F===V})})})},[S,C,M]),b.useEffect(function(){var P;if(M&&p.current[(P=C[C.length-1])===null||P===void 0?void 0:P.key]){var F;m(p.current[(F=C[C.length-1])===null||F===void 0?void 0:F.key])}},[C,M]),se.createElement(TW,ut({key:i,className:_e(o,"".concat(o,"-").concat(i),h==null?void 0:h.list,s,ee(ee({},"".concat(o,"-stack"),!!M),"".concat(o,"-stack-expanded"),A)),style:a,keys:C,motionAppear:!0},I,{onAllRemoved:function(){c(i)}}),function(P,F){var O=P.config,V=P.className,U=P.style,k=P.index,W=O,J=W.key,z=W.times,j=String(J),X=O,Q=X.className,ne=X.style,ye=X.classNames,me=X.styles,fe=Cn(X,c9),le=C.findIndex(function(oe){return oe.key===j}),ge={};if(M){var q=C.length-1-(le>-1?le:k-1),ve=i==="top"||i==="bottom"?"-50%":"0";if(q>0){var be,xe,we;ge.height=A?(be=p.current[j])===null||be===void 0?void 0:be.offsetHeight:v==null?void 0:v.offsetHeight;for(var qe=0,Fe=0;Fe<q;Fe++){var H;qe+=((H=p.current[C[C.length-1-Fe].key])===null||H===void 0?void 0:H.offsetHeight)+L}var B=(A?qe:q*N)*(i.startsWith("top")?1:-1),K=!A&&v!==null&&v!==void 0&&v.offsetWidth&&(xe=p.current[j])!==null&&xe!==void 0&&xe.offsetWidth?((v==null?void 0:v.offsetWidth)-N*2*(q<3?q:3))/((we=p.current[j])===null||we===void 0?void 0:we.offsetWidth):1;ge.transform="translate3d(".concat(ve,", ").concat(B,"px, 0) scaleX(").concat(K,")")}else ge.transform="translate3d(".concat(ve,", 0, 0)")}return se.createElement("div",{ref:F,className:_e("".concat(o,"-notice-wrapper"),V,ye==null?void 0:ye.wrapper),style:re(re(re({},U),ge),me==null?void 0:me.wrapper),onMouseEnter:function(){return w(function(pe){return pe.includes(j)?pe:[].concat(st(pe),[j])})},onMouseLeave:function(){return w(function(pe){return pe.filter(function(ce){return ce!==j})})}},se.createElement(pB,ut({},fe,{ref:function(pe){le>-1?p.current[j]=pe:delete p.current[j]},prefixCls:o,classNames:ye,styles:me,className:_e(Q,h==null?void 0:h.notice),style:ne,times:z,key:J,eventKey:J,onNoticeClose:u,hovering:M&&S.length>0})))})},d9=b.forwardRef(function(n,e){var r=n.prefixCls,i=r===void 0?"rc-notification":r,o=n.container,s=n.motion,a=n.maxCount,l=n.className,c=n.style,u=n.onAllRemoved,d=n.stack,f=n.renderNotifications,h=b.useState([]),p=Ce(h,2),g=p[0],y=p[1],v=function(M){var R,N=g.find(function(D){return D.key===M});N==null||(R=N.onClose)===null||R===void 0||R.call(N),y(function(D){return D.filter(function(L){return L.key!==M})})};b.useImperativeHandle(e,function(){return{open:function(M){y(function(R){var N=st(R),D=N.findIndex(function(I){return I.key===M.key}),L=re({},M);if(D>=0){var A;L.times=(((A=R[D])===null||A===void 0?void 0:A.times)||0)+1,N[D]=L}else L.times=0,N.push(L);return a>0&&N.length>a&&(N=N.slice(-a)),N})},close:function(M){v(M)},destroy:function(){y([])}}});var m=b.useState({}),x=Ce(m,2),_=x[0],S=x[1];b.useEffect(function(){var T={};g.forEach(function(M){var R=M.placement,N=R===void 0?"topRight":R;N&&(T[N]=T[N]||[],T[N].push(M))}),Object.keys(_).forEach(function(M){T[M]=T[M]||[]}),S(T)},[g]);var w=function(M){S(function(R){var N=re({},R),D=N[M]||[];return D.length||delete N[M],N})},C=b.useRef(!1);if(b.useEffect(function(){Object.keys(_).length>0?C.current=!0:C.current&&(u==null||u(),C.current=!1)},[_]),!o)return null;var E=Object.keys(_);return ea.createPortal(b.createElement(b.Fragment,null,E.map(function(T){var M=_[T],R=b.createElement(u9,{key:T,configList:M,placement:T,prefixCls:i,className:l==null?void 0:l(T),style:c==null?void 0:c(T),motion:s,onNoticeClose:v,onAllNoticeRemoved:w,stack:d});return f?f(R,{prefixCls:i,key:T}):R})),o)}),f9=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],h9=function(){return document.body},sN=0;function p9(){for(var n={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(function(o){o&&Object.keys(o).forEach(function(s){var a=o[s];a!==void 0&&(n[s]=a)})}),n}function m9(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.getContainer,r=e===void 0?h9:e,i=n.motion,o=n.prefixCls,s=n.maxCount,a=n.className,l=n.style,c=n.onAllRemoved,u=n.stack,d=n.renderNotifications,f=Cn(n,f9),h=b.useState(),p=Ce(h,2),g=p[0],y=p[1],v=b.useRef(),m=b.createElement(d9,{container:g,ref:v,prefixCls:o,motion:i,maxCount:s,className:a,style:l,onAllRemoved:c,stack:u,renderNotifications:d}),x=b.useState([]),_=Ce(x,2),S=_[0],w=_[1],C=b.useMemo(function(){return{open:function(T){var M=p9(f,T);(M.key===null||M.key===void 0)&&(M.key="rc-notification-".concat(sN),sN+=1),w(function(R){return[].concat(st(R),[{type:"open",config:M}])})},close:function(T){w(function(M){return[].concat(st(M),[{type:"close",key:T}])})},destroy:function(){w(function(T){return[].concat(st(T),[{type:"destroy"}])})}}},[]);return b.useEffect(function(){y(r())}),b.useEffect(function(){v.current&&S.length&&(S.forEach(function(E){switch(E.type){case"open":v.current.open(E.config);break;case"close":v.current.close(E.key);break;case"destroy":v.current.destroy();break}}),w(function(E){return E.filter(function(T){return!S.includes(T)})}))},[S]),[C,m]}var g9={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},v9=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:g9}))},sg=b.forwardRef(v9);const qT=se.createContext(void 0),Il=100,y9=10,gB=Il*y9,vB={Modal:Il,Drawer:Il,Popover:Il,Popconfirm:Il,Tooltip:Il,Tour:Il,FloatButton:Il},x9={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function _9(n){return n in vB}const XT=(n,e)=>{const[,r]=io(),i=se.useContext(qT),o=_9(n);let s;if(e!==void 0)s=[e,e];else{let a=i??0;o?a+=(i?0:r.zIndexPopupBase)+vB[n]:a+=x9[n],s=[i===void 0?e:a,a]}return s},b9=n=>{const{componentCls:e,iconCls:r,boxShadow:i,colorText:o,colorSuccess:s,colorError:a,colorWarning:l,colorInfo:c,fontSizeLG:u,motionEaseInOutCirc:d,motionDurationSlow:f,marginXS:h,paddingXS:p,borderRadiusLG:g,zIndexPopup:y,contentPadding:v,contentBg:m}=n,x=`${e}-notice`,_=new hn("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:p,transform:"translateY(0)",opacity:1}}),S=new hn("MessageMoveOut",{"0%":{maxHeight:n.height,padding:p,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),w={padding:p,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${r}`]:{marginInlineEnd:h,fontSize:u},[`${x}-content`]:{display:"inline-block",padding:v,background:m,borderRadius:g,boxShadow:i,pointerEvents:"all"},[`${e}-success > ${r}`]:{color:s},[`${e}-error > ${r}`]:{color:a},[`${e}-warning > ${r}`]:{color:l},[`${e}-info > ${r},
      ${e}-loading > ${r}`]:{color:c}};return[{[e]:Object.assign(Object.assign({},ns(n)),{color:o,position:"fixed",top:h,width:"100%",pointerEvents:"none",zIndex:y,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:_,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:S,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[`${x}-wrapper`]:Object.assign({},w)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},w),{padding:0,textAlign:"start"})}]},S9=n=>({zIndexPopup:n.zIndexPopupBase+gB+10,contentBg:n.colorBgElevated,contentPadding:`${(n.controlHeightLG-n.fontSize*n.lineHeight)/2}px ${n.paddingSM}px`}),yB=ai("Message",n=>{const e=Un(n,{height:150});return[b9(e)]},S9);var w9=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const C9={info:b.createElement(fB,null),success:b.createElement(uB,null),error:b.createElement(Hx,null),warning:b.createElement(dB,null),loading:b.createElement(sg,null)},xB=n=>{let{prefixCls:e,type:r,icon:i,children:o}=n;return b.createElement("div",{className:_e(`${e}-custom-content`,`${e}-${r}`)},i||C9[r],b.createElement("span",null,o))},E9=n=>{const{prefixCls:e,className:r,type:i,icon:o,content:s}=n,a=w9(n,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=b.useContext($t),c=e||l("message"),u=bc(c),[d,f,h]=yB(c,u);return d(b.createElement(pB,Object.assign({},a,{prefixCls:c,className:_e(r,f,`${c}-notice-pure-panel`,h,u),eventKey:"pure",duration:null,content:b.createElement(xB,{prefixCls:c,type:i,icon:o},s)})))};function T9(n,e){return{motionName:e??`${n}-move-up`}}function KT(n){let e;const r=new Promise(o=>{e=n(()=>{o(!0)})}),i=()=>{e==null||e()};return i.then=(o,s)=>r.then(o,s),i.promise=r,i}var M9=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const R9=8,A9=3,N9=n=>{let{children:e,prefixCls:r}=n;const i=bc(r),[o,s,a]=yB(r,i);return o(b.createElement(a9,{classNames:{list:_e(s,a,i)}},e))},P9=(n,e)=>{let{prefixCls:r,key:i}=e;return b.createElement(N9,{prefixCls:r,key:i},n)},O9=b.forwardRef((n,e)=>{const{top:r,prefixCls:i,getContainer:o,maxCount:s,duration:a=A9,rtl:l,transitionName:c,onAllRemoved:u}=n,{getPrefixCls:d,getPopupContainer:f,message:h,direction:p}=b.useContext($t),g=i||d("message"),y=()=>({left:"50%",transform:"translateX(-50%)",top:r??R9}),v=()=>_e({[`${g}-rtl`]:l??p==="rtl"}),m=()=>T9(g,c),x=b.createElement("span",{className:`${g}-close-x`},b.createElement(og,{className:`${g}-close-icon`})),[_,S]=m9({prefixCls:g,style:y,className:v,motion:m,closable:!1,closeIcon:x,duration:a,getContainer:()=>(o==null?void 0:o())||(f==null?void 0:f())||document.body,maxCount:s,onAllRemoved:u,renderNotifications:P9});return b.useImperativeHandle(e,()=>Object.assign(Object.assign({},_),{prefixCls:g,message:h})),S});let aN=0;function _B(n){const e=b.useRef(null);return GT(),[b.useMemo(()=>{const i=c=>{var u;(u=e.current)===null||u===void 0||u.close(c)},o=c=>{if(!e.current){const C=()=>{};return C.then=()=>{},C}const{open:u,prefixCls:d,message:f}=e.current,h=`${d}-notice`,{content:p,icon:g,type:y,key:v,className:m,style:x,onClose:_}=c,S=M9(c,["content","icon","type","key","className","style","onClose"]);let w=v;return w==null&&(aN+=1,w=`antd-message-${aN}`),KT(C=>(u(Object.assign(Object.assign({},S),{key:w,content:b.createElement(xB,{prefixCls:d,type:y,icon:g},p),placement:"top",className:_e(y&&`${h}-${y}`,m,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),x),onClose:()=>{_==null||_(),C()}})),()=>{i(w)}))},a={open:o,destroy:c=>{var u;c!==void 0?i(c):(u=e.current)===null||u===void 0||u.destroy()}};return["info","success","warning","error","loading"].forEach(c=>{const u=(d,f,h)=>{let p;d&&typeof d=="object"&&"content"in d?p=d:p={content:d};let g,y;typeof f=="function"?y=f:(g=f,y=h);const v=Object.assign(Object.assign({onClose:y,duration:g},p),{type:c});return o(v)};a[c]=u}),a},[]),b.createElement(O9,Object.assign({key:"message-holder"},n,{ref:e}))]}function I9(n){return _B(n)}function D9(){const[n,e]=b.useState([]),r=b.useCallback(i=>(e(o=>[].concat(st(o),[i])),()=>{e(o=>o.filter(s=>s!==i))}),[]);return[n,r]}function Oi(){Oi=function(){return e};var n,e={},r=Object.prototype,i=r.hasOwnProperty,o=Object.defineProperty||function(P,F,O){P[F]=O.value},s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(P,F,O){return Object.defineProperty(P,F,{value:O,enumerable:!0,configurable:!0,writable:!0}),P[F]}try{u({},"")}catch{u=function(O,V,U){return O[V]=U}}function d(P,F,O,V){var U=F&&F.prototype instanceof m?F:m,k=Object.create(U.prototype),W=new A(V||[]);return o(k,"_invoke",{value:R(P,O,W)}),k}function f(P,F,O){try{return{type:"normal",arg:P.call(F,O)}}catch(V){return{type:"throw",arg:V}}}e.wrap=d;var h="suspendedStart",p="suspendedYield",g="executing",y="completed",v={};function m(){}function x(){}function _(){}var S={};u(S,a,function(){return this});var w=Object.getPrototypeOf,C=w&&w(w(I([])));C&&C!==r&&i.call(C,a)&&(S=C);var E=_.prototype=m.prototype=Object.create(S);function T(P){["next","throw","return"].forEach(function(F){u(P,F,function(O){return this._invoke(F,O)})})}function M(P,F){function O(U,k,W,J){var z=f(P[U],P,k);if(z.type!=="throw"){var j=z.arg,X=j.value;return X&&Rt(X)=="object"&&i.call(X,"__await")?F.resolve(X.__await).then(function(Q){O("next",Q,W,J)},function(Q){O("throw",Q,W,J)}):F.resolve(X).then(function(Q){j.value=Q,W(j)},function(Q){return O("throw",Q,W,J)})}J(z.arg)}var V;o(this,"_invoke",{value:function(k,W){function J(){return new F(function(z,j){O(k,W,z,j)})}return V=V?V.then(J,J):J()}})}function R(P,F,O){var V=h;return function(U,k){if(V===g)throw Error("Generator is already running");if(V===y){if(U==="throw")throw k;return{value:n,done:!0}}for(O.method=U,O.arg=k;;){var W=O.delegate;if(W){var J=N(W,O);if(J){if(J===v)continue;return J}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(V===h)throw V=y,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);V=g;var z=f(P,F,O);if(z.type==="normal"){if(V=O.done?y:p,z.arg===v)continue;return{value:z.arg,done:O.done}}z.type==="throw"&&(V=y,O.method="throw",O.arg=z.arg)}}}function N(P,F){var O=F.method,V=P.iterator[O];if(V===n)return F.delegate=null,O==="throw"&&P.iterator.return&&(F.method="return",F.arg=n,N(P,F),F.method==="throw")||O!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+O+"' method")),v;var U=f(V,P.iterator,F.arg);if(U.type==="throw")return F.method="throw",F.arg=U.arg,F.delegate=null,v;var k=U.arg;return k?k.done?(F[P.resultName]=k.value,F.next=P.nextLoc,F.method!=="return"&&(F.method="next",F.arg=n),F.delegate=null,v):k:(F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,v)}function D(P){var F={tryLoc:P[0]};1 in P&&(F.catchLoc=P[1]),2 in P&&(F.finallyLoc=P[2],F.afterLoc=P[3]),this.tryEntries.push(F)}function L(P){var F=P.completion||{};F.type="normal",delete F.arg,P.completion=F}function A(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(D,this),this.reset(!0)}function I(P){if(P||P===""){var F=P[a];if(F)return F.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var O=-1,V=function U(){for(;++O<P.length;)if(i.call(P,O))return U.value=P[O],U.done=!1,U;return U.value=n,U.done=!0,U};return V.next=V}}throw new TypeError(Rt(P)+" is not iterable")}return x.prototype=_,o(E,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:x,configurable:!0}),x.displayName=u(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(P){var F=typeof P=="function"&&P.constructor;return!!F&&(F===x||(F.displayName||F.name)==="GeneratorFunction")},e.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,_):(P.__proto__=_,u(P,c,"GeneratorFunction")),P.prototype=Object.create(E),P},e.awrap=function(P){return{__await:P}},T(M.prototype),u(M.prototype,l,function(){return this}),e.AsyncIterator=M,e.async=function(P,F,O,V,U){U===void 0&&(U=Promise);var k=new M(d(P,F,O,V),U);return e.isGeneratorFunction(F)?k:k.next().then(function(W){return W.done?W.value:k.next()})},T(E),u(E,c,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),e.keys=function(P){var F=Object(P),O=[];for(var V in F)O.push(V);return O.reverse(),function U(){for(;O.length;){var k=O.pop();if(k in F)return U.value=k,U.done=!1,U}return U.done=!0,U}},e.values=I,A.prototype={constructor:A,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!F)for(var O in this)O.charAt(0)==="t"&&i.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=n)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var O=this;function V(j,X){return W.type="throw",W.arg=F,O.next=j,X&&(O.method="next",O.arg=n),!!X}for(var U=this.tryEntries.length-1;U>=0;--U){var k=this.tryEntries[U],W=k.completion;if(k.tryLoc==="root")return V("end");if(k.tryLoc<=this.prev){var J=i.call(k,"catchLoc"),z=i.call(k,"finallyLoc");if(J&&z){if(this.prev<k.catchLoc)return V(k.catchLoc,!0);if(this.prev<k.finallyLoc)return V(k.finallyLoc)}else if(J){if(this.prev<k.catchLoc)return V(k.catchLoc,!0)}else{if(!z)throw Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return V(k.finallyLoc)}}}},abrupt:function(F,O){for(var V=this.tryEntries.length-1;V>=0;--V){var U=this.tryEntries[V];if(U.tryLoc<=this.prev&&i.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var k=U;break}}k&&(F==="break"||F==="continue")&&k.tryLoc<=O&&O<=k.finallyLoc&&(k=null);var W=k?k.completion:{};return W.type=F,W.arg=O,k?(this.method="next",this.next=k.finallyLoc,v):this.complete(W)},complete:function(F,O){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&O&&(this.next=O),v},finish:function(F){for(var O=this.tryEntries.length-1;O>=0;--O){var V=this.tryEntries[O];if(V.finallyLoc===F)return this.complete(V.completion,V.afterLoc),L(V),v}},catch:function(F){for(var O=this.tryEntries.length-1;O>=0;--O){var V=this.tryEntries[O];if(V.tryLoc===F){var U=V.completion;if(U.type==="throw"){var k=U.arg;L(V)}return k}}throw Error("illegal catch attempt")},delegateYield:function(F,O,V){return this.delegate={iterator:I(F),resultName:O,nextLoc:V},this.method==="next"&&(this.arg=n),v}},e}function lN(n,e,r,i,o,s,a){try{var l=n[s](a),c=l.value}catch(u){return void r(u)}l.done?e(c):Promise.resolve(c).then(i,o)}function Lu(n){return function(){var e=this,r=arguments;return new Promise(function(i,o){var s=n.apply(e,r);function a(c){lN(s,i,o,a,l,"next",c)}function l(c){lN(s,i,o,a,l,"throw",c)}a(void 0)})}}var ag=re({},dH),L9=ag.version,Ib=ag.render,F9=ag.unmountComponentAtNode,jx;try{var U9=Number((L9||"").split(".")[0]);U9>=18&&(jx=ag.createRoot)}catch{}function cN(n){var e=ag.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&Rt(e)==="object"&&(e.usingClientEntryPoint=n)}var by="__rc_react_root__";function B9(n,e){cN(!0);var r=e[by]||jx(e);cN(!1),r.render(n),e[by]=r}function $9(n,e){Ib==null||Ib(n,e)}function z9(n,e){if(jx){B9(n,e);return}$9(n,e)}function k9(n){return bC.apply(this,arguments)}function bC(){return bC=Lu(Oi().mark(function n(e){return Oi().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.resolve().then(function(){var o;(o=e[by])===null||o===void 0||o.unmount(),delete e[by]}));case 1:case"end":return i.stop()}},n)})),bC.apply(this,arguments)}function V9(n){F9(n)}function G9(n){return SC.apply(this,arguments)}function SC(){return SC=Lu(Oi().mark(function n(e){return Oi().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(jx===void 0){i.next=2;break}return i.abrupt("return",k9(e));case 2:V9(e);case 3:case"end":return i.stop()}},n)})),SC.apply(this,arguments)}const H9=(n,e)=>(z9(n,e),()=>G9(e));let j9=H9;function YT(){return j9}const wf=(n,e,r)=>r!==void 0?r:`${n}-${e}`,bB=function(n){if(!n)return!1;if(n instanceof Element){if(n.offsetParent)return!0;if(n.getBBox){var e=n.getBBox(),r=e.width,i=e.height;if(r||i)return!0}if(n.getBoundingClientRect){var o=n.getBoundingClientRect(),s=o.width,a=o.height;if(s||a)return!0}}return!1},W9=n=>{const{componentCls:e,colorPrimary:r}=n;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${n.motionEaseOutCirc}`,`opacity 2s ${n.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${n.motionDurationSlow} ${n.motionEaseInOut}`,`opacity ${n.motionDurationSlow} ${n.motionEaseInOut}`].join(",")}}}}},q9=Zj("Wave",n=>[W9(n)]),SB=`${yy}-wave-target`;function Db(n){return n&&n!=="#fff"&&n!=="#ffffff"&&n!=="rgb(255, 255, 255)"&&n!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&n!=="transparent"}function X9(n){const{borderTopColor:e,borderColor:r,backgroundColor:i}=getComputedStyle(n);return Db(e)?e:Db(r)?r:Db(i)?i:null}function Lb(n){return Number.isNaN(n)?0:n}const K9=n=>{const{className:e,target:r,component:i,registerUnmount:o}=n,s=b.useRef(null),a=b.useRef(null);b.useEffect(()=>{a.current=o()},[]);const[l,c]=b.useState(null),[u,d]=b.useState([]),[f,h]=b.useState(0),[p,g]=b.useState(0),[y,v]=b.useState(0),[m,x]=b.useState(0),[_,S]=b.useState(!1),w={left:f,top:p,width:y,height:m,borderRadius:u.map(T=>`${T}px`).join(" ")};l&&(w["--wave-color"]=l);function C(){const T=getComputedStyle(r);c(X9(r));const M=T.position==="static",{borderLeftWidth:R,borderTopWidth:N}=T;h(M?r.offsetLeft:Lb(-parseFloat(R))),g(M?r.offsetTop:Lb(-parseFloat(N))),v(r.offsetWidth),x(r.offsetHeight);const{borderTopLeftRadius:D,borderTopRightRadius:L,borderBottomLeftRadius:A,borderBottomRightRadius:I}=T;d([D,L,I,A].map(P=>Lb(parseFloat(P))))}if(b.useEffect(()=>{if(r){const T=mr(()=>{C(),S(!0)});let M;return typeof ResizeObserver<"u"&&(M=new ResizeObserver(C),M.observe(r)),()=>{mr.cancel(T),M==null||M.disconnect()}}},[]),!_)return null;const E=(i==="Checkbox"||i==="Radio")&&(r==null?void 0:r.classList.contains(SB));return b.createElement(Du,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(T,M)=>{var R,N;if(M.deadline||M.propertyName==="opacity"){const D=(R=s.current)===null||R===void 0?void 0:R.parentElement;(N=a.current)===null||N===void 0||N.call(a).then(()=>{D==null||D.remove()})}return!1}},(T,M)=>{let{className:R}=T;return b.createElement("div",{ref:ca(s,M),className:_e(e,R,{"wave-quick":E}),style:w})})},Y9=(n,e)=>{var r;const{component:i}=e;if(i==="Checkbox"&&!(!((r=n.querySelector("input"))===null||r===void 0)&&r.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",n==null||n.insertBefore(o,n==null?void 0:n.firstChild);const s=YT();let a=null;function l(){return a}a=s(b.createElement(K9,Object.assign({},e,{target:n,registerUnmount:l})),o)},Q9=(n,e,r)=>{const{wave:i}=b.useContext($t),[,o,s]=io(),a=Sr(u=>{const d=n.current;if(i!=null&&i.disabled||!d)return;const f=d.querySelector(`.${SB}`)||d,{showEffect:h}=i||{};(h||Y9)(f,{className:e,token:o,component:r,event:u,hashId:s})}),l=b.useRef(null);return u=>{mr.cancel(l.current),l.current=mr(()=>{a(u)})}},wB=n=>{const{children:e,disabled:r,component:i}=n,{getPrefixCls:o}=b.useContext($t),s=b.useRef(null),a=o("wave"),[,l]=q9(a),c=Q9(s,_e(a,l),i);if(se.useEffect(()=>{const d=s.current;if(!d||d.nodeType!==1||r)return;const f=h=>{!bB(h.target)||!d.getAttribute||d.getAttribute("disabled")||d.disabled||d.className.includes("disabled")||d.className.includes("-leave")||c(h)};return d.addEventListener("click",f,!0),()=>{d.removeEventListener("click",f,!0)}},[r]),!se.isValidElement(e))return e??null;const u=rg(e)?ca(Fx(e),s):s;return cc(e,{ref:u})},da=n=>{const e=se.useContext(_f);return se.useMemo(()=>n?typeof n=="string"?n??e:n instanceof Function?n(e):e:e,[n,e])},Z9=n=>{const{componentCls:e}=n;return{[e]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},J9=n=>{const{componentCls:e,antCls:r}=n;return{[e]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${e}-item:empty`]:{display:"none"},[`${e}-item > ${r}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},e7=n=>{const{componentCls:e}=n;return{[e]:{"&-gap-row-small":{rowGap:n.spaceGapSmallSize},"&-gap-row-middle":{rowGap:n.spaceGapMiddleSize},"&-gap-row-large":{rowGap:n.spaceGapLargeSize},"&-gap-col-small":{columnGap:n.spaceGapSmallSize},"&-gap-col-middle":{columnGap:n.spaceGapMiddleSize},"&-gap-col-large":{columnGap:n.spaceGapLargeSize}}}},CB=ai("Space",n=>{const e=Un(n,{spaceGapSmallSize:n.paddingXS,spaceGapMiddleSize:n.padding,spaceGapLargeSize:n.paddingLG});return[J9(e),e7(e),Z9(e)]},()=>({}),{resetStyle:!1});var EB=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Wx=b.createContext(null),qx=(n,e)=>{const r=b.useContext(Wx),i=b.useMemo(()=>{if(!r)return"";const{compactDirection:o,isFirstItem:s,isLastItem:a}=r,l=o==="vertical"?"-vertical-":"-";return _e(`${n}-compact${l}item`,{[`${n}-compact${l}first-item`]:s,[`${n}-compact${l}last-item`]:a,[`${n}-compact${l}item-rtl`]:e==="rtl"})},[n,e,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:i}},t7=n=>{let{children:e}=n;return b.createElement(Wx.Provider,{value:null},e)},n7=n=>{var{children:e}=n,r=EB(n,["children"]);return b.createElement(Wx.Provider,{value:r},e)},r7=n=>{const{getPrefixCls:e,direction:r}=b.useContext($t),{size:i,direction:o,block:s,prefixCls:a,className:l,rootClassName:c,children:u}=n,d=EB(n,["size","direction","block","prefixCls","className","rootClassName","children"]),f=da(_=>i??_),h=e("space-compact",a),[p,g]=CB(h),y=_e(h,g,{[`${h}-rtl`]:r==="rtl",[`${h}-block`]:s,[`${h}-vertical`]:o==="vertical"},l,c),v=b.useContext(Wx),m=Ja(u),x=b.useMemo(()=>m.map((_,S)=>{const w=(_==null?void 0:_.key)||`${h}-item-${S}`;return b.createElement(n7,{key:w,compactSize:f,compactDirection:o,isFirstItem:S===0&&(!v||(v==null?void 0:v.isFirstItem)),isLastItem:S===m.length-1&&(!v||(v==null?void 0:v.isLastItem))},_)}),[i,m,v]);return m.length===0?null:p(b.createElement("div",Object.assign({className:y},d),x))};var i7=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const TB=b.createContext(void 0),o7=n=>{const{getPrefixCls:e,direction:r}=b.useContext($t),{prefixCls:i,size:o,className:s}=n,a=i7(n,["prefixCls","size","className"]),l=e("btn-group",i),[,,c]=io();let u="";switch(o){case"large":u="lg";break;case"small":u="sm";break}const d=_e(l,{[`${l}-${u}`]:u,[`${l}-rtl`]:r==="rtl"},s,c);return b.createElement(TB.Provider,{value:o},b.createElement("div",Object.assign({},a,{className:d})))},uN=/^[\u4E00-\u9FA5]{2}$/,wC=uN.test.bind(uN);function MB(n){return n==="danger"?{danger:!0}:{type:n}}function dN(n){return typeof n=="string"}function Fb(n){return n==="text"||n==="link"}function s7(n,e){if(n==null)return;const r=e?" ":"";return typeof n!="string"&&typeof n!="number"&&dN(n.type)&&wC(n.props.children)?cc(n,{children:n.props.children.split("").join(r)}):dN(n)?wC(n)?se.createElement("span",null,n.split("").join(r)):se.createElement("span",null,n):hB(n)?se.createElement("span",null,n):n}function a7(n,e){let r=!1;const i=[];return se.Children.forEach(n,o=>{const s=typeof o,a=s==="string"||s==="number";if(r&&a){const l=i.length-1,c=i[l];i[l]=`${c}${o}`}else i.push(o);r=a}),se.Children.map(i,o=>s7(o,e))}["default","primary","danger"].concat(st(Sf));const CC=b.forwardRef((n,e)=>{const{className:r,style:i,children:o,prefixCls:s}=n,a=_e(`${s}-icon`,r);return se.createElement("span",{ref:e,className:a,style:i},o)}),fN=b.forwardRef((n,e)=>{const{prefixCls:r,className:i,style:o,iconClassName:s}=n,a=_e(`${r}-loading-icon`,i);return se.createElement(CC,{prefixCls:r,className:a,style:o,ref:e},se.createElement(sg,{className:s}))}),Ub=()=>({width:0,opacity:0,transform:"scale(0)"}),Bb=n=>({width:n.scrollWidth,opacity:1,transform:"scale(1)"}),l7=n=>{const{prefixCls:e,loading:r,existIcon:i,className:o,style:s,mount:a}=n,l=!!r;return i?se.createElement(fN,{prefixCls:e,className:o,style:s}):se.createElement(Du,{visible:l,motionName:`${e}-loading-icon-motion`,motionAppear:!a,motionEnter:!a,motionLeave:!a,removeOnLeave:!0,onAppearStart:Ub,onAppearActive:Bb,onEnterStart:Ub,onEnterActive:Bb,onLeaveStart:Bb,onLeaveActive:Ub},(c,u)=>{let{className:d,style:f}=c;const h=Object.assign(Object.assign({},s),f);return se.createElement(fN,{prefixCls:e,className:_e(o,d),style:h,ref:u})})},hN=(n,e)=>({[`> span, > ${n}`]:{"&:not(:last-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),c7=n=>{const{componentCls:e,fontSize:r,lineWidth:i,groupBorderColor:o,colorErrorHover:s}=n;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:n.calc(i).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:r}},hN(`${e}-primary`,o),hN(`${e}-danger`,s)]}};var u7=["b"],d7=["v"],$b=function(e){return Math.round(Number(e||0))},f7=function(e){if(e instanceof Ln)return e;if(e&&Rt(e)==="object"&&"h"in e&&"b"in e){var r=e,i=r.b,o=Cn(r,u7);return re(re({},o),{},{v:i})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},pm=function(n){yc(r,n);var e=xc(r);function r(i){return Hr(this,r),e.call(this,f7(i))}return jr(r,[{key:"toHsbString",value:function(){var o=this.toHsb(),s=$b(o.s*100),a=$b(o.b*100),l=$b(o.h),c=o.a,u="hsb(".concat(l,", ").concat(s,"%, ").concat(a,"%)"),d="hsba(".concat(l,", ").concat(s,"%, ").concat(a,"%, ").concat(c.toFixed(c===0?0:2),")");return c===1?u:d}},{key:"toHsb",value:function(){var o=this.toHsv(),s=o.v,a=Cn(o,d7);return re(re({},a),{},{b:s,a:this.a})}}]),r}(Ln),h7=function(e){return e instanceof pm?e:new pm(e)};h7("#1677ff");const p7=(n,e)=>(n==null?void 0:n.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",m7=(n,e)=>n?p7(n,e):"";let g7=function(){function n(e){Hr(this,n);var r;if(this.cleared=!1,e instanceof n){this.metaColor=e.metaColor.clone(),this.colors=(r=e.colors)===null||r===void 0?void 0:r.map(o=>({color:new n(o.color),percent:o.percent})),this.cleared=e.cleared;return}const i=Array.isArray(e);i&&e.length?(this.colors=e.map(o=>{let{color:s,percent:a}=o;return{color:new n(s),percent:a}}),this.metaColor=new pm(this.colors[0].color.metaColor)):this.metaColor=new pm(i?"":e),(!e||i&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return jr(n,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return m7(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:r}=this;return r?`linear-gradient(90deg, ${r.map(o=>`${o.color.toRgbString()} ${o.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(r){return!r||this.isGradient()!==r.isGradient()?!1:this.isGradient()?this.colors.length===r.colors.length&&this.colors.every((i,o)=>{const s=r.colors[o];return i.percent===s.percent&&i.color.equals(s.color)}):this.toHexString()===r.toHexString()}}])}();var v7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},y7=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:v7}))},pN=b.forwardRef(y7);const x7=n=>({animationDuration:n,animationFillMode:"both"}),_7=n=>({animationDuration:n,animationFillMode:"both"}),Xx=function(n,e,r,i){const s=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${s}${n}-enter,
      ${s}${n}-appear
    `]:Object.assign(Object.assign({},x7(i)),{animationPlayState:"paused"}),[`${s}${n}-leave`]:Object.assign(Object.assign({},_7(i)),{animationPlayState:"paused"}),[`
      ${s}${n}-enter${n}-enter-active,
      ${s}${n}-appear${n}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${s}${n}-leave${n}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},b7=new hn("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),S7=new hn("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),w7=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:r}=n,i=`${r}-fade`,o=e?"&":"";return[Xx(i,b7,S7,n.motionDurationMid,e),{[`
        ${o}${i}-enter,
        ${o}${i}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${o}${i}-leave`]:{animationTimingFunction:"linear"}}]},C7=new hn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),E7=new hn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),T7=new hn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),M7=new hn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),R7=new hn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),A7=new hn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),N7=new hn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),P7=new hn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),O7={"move-up":{inKeyframes:N7,outKeyframes:P7},"move-down":{inKeyframes:C7,outKeyframes:E7},"move-left":{inKeyframes:T7,outKeyframes:M7},"move-right":{inKeyframes:R7,outKeyframes:A7}},mN=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=O7[e];return[Xx(i,o,s,n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{opacity:0,animationTimingFunction:n.motionEaseOutCirc},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},RB=new hn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),AB=new hn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),NB=new hn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),PB=new hn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),I7=new hn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),D7=new hn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),L7=new hn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),F7=new hn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),U7={"slide-up":{inKeyframes:RB,outKeyframes:AB},"slide-down":{inKeyframes:NB,outKeyframes:PB},"slide-left":{inKeyframes:I7,outKeyframes:D7},"slide-right":{inKeyframes:L7,outKeyframes:F7}},gN=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=U7[e];return[Xx(i,o,s,n.motionDurationMid),{[`
      ${i}-enter,
      ${i}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:n.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInQuint}}]},B7=new hn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),$7=new hn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),vN=new hn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),yN=new hn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),z7=new hn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),k7=new hn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),V7=new hn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),G7=new hn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),H7=new hn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),j7=new hn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),W7=new hn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),q7=new hn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),X7={zoom:{inKeyframes:B7,outKeyframes:$7},"zoom-big":{inKeyframes:vN,outKeyframes:yN},"zoom-big-fast":{inKeyframes:vN,outKeyframes:yN},"zoom-left":{inKeyframes:V7,outKeyframes:G7},"zoom-right":{inKeyframes:H7,outKeyframes:j7},"zoom-up":{inKeyframes:z7,outKeyframes:k7},"zoom-down":{inKeyframes:W7,outKeyframes:q7}},OB=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=X7[e];return[Xx(i,o,s,e==="zoom-big-fast"?n.motionDurationFast:n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:n.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},K7=(n,e)=>{const{r,g:i,b:o,a:s}=n.toRgb(),a=new pm(n.toRgbString()).onBackground(e).toHsv();return s<=.5?a.v>.5:r*.299+i*.587+o*.114>192},IB=n=>{const{paddingInline:e,onlyIconSize:r}=n;return Un(n,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:r})},DB=n=>{var e,r,i,o,s,a;const l=(e=n.contentFontSize)!==null&&e!==void 0?e:n.fontSize,c=(r=n.contentFontSizeSM)!==null&&r!==void 0?r:n.fontSize,u=(i=n.contentFontSizeLG)!==null&&i!==void 0?i:n.fontSizeLG,d=(o=n.contentLineHeight)!==null&&o!==void 0?o:A0(l),f=(s=n.contentLineHeightSM)!==null&&s!==void 0?s:A0(c),h=(a=n.contentLineHeightLG)!==null&&a!==void 0?a:A0(u),p=K7(new g7(n.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlTmpOutline}`,primaryShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlOutline}`,dangerShadow:`0 ${n.controlOutlineWidth}px 0 ${n.colorErrorOutline}`,primaryColor:n.colorTextLightSolid,dangerColor:n.colorTextLightSolid,borderColorDisabled:n.colorBorder,defaultGhostColor:n.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:n.colorBgContainer,paddingInline:n.paddingContentHorizontal-n.lineWidth,paddingInlineLG:n.paddingContentHorizontal-n.lineWidth,paddingInlineSM:8-n.lineWidth,onlyIconSize:n.fontSizeLG,onlyIconSizeSM:n.fontSizeLG-2,onlyIconSizeLG:n.fontSizeLG+2,groupBorderColor:n.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:n.colorText,textTextHoverColor:n.colorText,textTextActiveColor:n.colorText,textHoverBg:n.colorFillTertiary,defaultColor:n.colorText,defaultBg:n.colorBgContainer,defaultBorderColor:n.colorBorder,defaultBorderColorDisabled:n.colorBorder,defaultHoverBg:n.colorBgContainer,defaultHoverColor:n.colorPrimaryHover,defaultHoverBorderColor:n.colorPrimaryHover,defaultActiveBg:n.colorBgContainer,defaultActiveColor:n.colorPrimaryActive,defaultActiveBorderColor:n.colorPrimaryActive,solidTextColor:p,contentFontSize:l,contentFontSizeSM:c,contentFontSizeLG:u,contentLineHeight:d,contentLineHeightSM:f,contentLineHeightLG:h,paddingBlock:Math.max((n.controlHeight-l*d)/2-n.lineWidth,0),paddingBlockSM:Math.max((n.controlHeightSM-c*f)/2-n.lineWidth,0),paddingBlockLG:Math.max((n.controlHeightLG-u*h)/2-n.lineWidth,0)}},Y7=n=>{const{componentCls:e,iconCls:r,fontWeight:i,opacityLoading:o,motionDurationSlow:s,motionEaseInOut:a,marginXS:l,calc:c}=n;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:n.marginXS,alignItems:"center",justifyContent:"center",fontWeight:i,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`,cursor:"pointer",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:n.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:Gx(),"> a":{color:"currentColor"},"&:not(:disabled)":ig(n),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:o,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(u=>`${u} ${s} ${a}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:c(l).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:c(l).mul(-1).equal()}}}}}},LB=(n,e,r)=>({[`&:not(:disabled):not(${n}-disabled)`]:{"&:hover":e,"&:active":r}}),Q7=n=>({minWidth:n.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Z7=n=>({borderRadius:n.controlHeight,paddingInlineStart:n.calc(n.controlHeight).div(2).equal(),paddingInlineEnd:n.calc(n.controlHeight).div(2).equal()}),J7=n=>({cursor:"not-allowed",borderColor:n.borderColorDisabled,color:n.colorTextDisabled,background:n.colorBgContainerDisabled,boxShadow:"none"}),QT=(n,e,r,i,o,s,a,l)=>({[`&${n}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,background:e,borderColor:i||void 0,boxShadow:"none"},LB(n,Object.assign({background:e},a),Object.assign({background:e},l))),{"&:disabled":{cursor:"not-allowed",color:o||void 0,borderColor:s||void 0}})}),eq=n=>({[`&:disabled, &${n.componentCls}-disabled`]:Object.assign({},J7(n))}),tq=n=>({[`&:disabled, &${n.componentCls}-disabled`]:{cursor:"not-allowed",color:n.colorTextDisabled}}),Kx=(n,e,r,i)=>{const s=i&&["link","text"].includes(i)?tq:eq;return Object.assign(Object.assign({},s(n)),LB(n.componentCls,e,r))},Yx=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-solid`]:Object.assign({color:e,background:r},Kx(n,i,o))}),Qx=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-outlined, &${n.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:r},Kx(n,i,o))}),Zx=n=>({[`&${n.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),Jx=(n,e,r,i)=>({[`&${n.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},Kx(n,r,i))}),uc=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-${r}`]:Object.assign({color:e,boxShadow:"none"},Kx(n,i,o,r))}),nq=n=>{const{componentCls:e}=n;return Sf.reduce((r,i)=>{const o=n[`${i}6`],s=n[`${i}1`],a=n[`${i}5`],l=n[`${i}2`],c=n[`${i}3`],u=n[`${i}7`],d=`0 ${n.controlOutlineWidth} 0 ${n[`${i}1`]}`;return Object.assign(Object.assign({},r),{[`&${e}-color-${i}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:o,boxShadow:d},Yx(n,n.colorTextLightSolid,o,{background:a},{background:u})),Qx(n,o,n.colorBgContainer,{color:a,borderColor:a,background:n.colorBgContainer},{color:u,borderColor:u,background:n.colorBgContainer})),Zx(n)),Jx(n,s,{background:l},{background:c})),uc(n,o,"link",{color:a},{color:u})),uc(n,o,"text",{color:a,background:s},{color:u,background:c}))})},{})},rq=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.defaultColor,boxShadow:n.defaultShadow},Yx(n,n.solidTextColor,n.colorBgSolid,{color:n.solidTextColor,background:n.colorBgSolidHover},{color:n.solidTextColor,background:n.colorBgSolidActive})),Zx(n)),Jx(n,n.colorFillTertiary,{background:n.colorFillSecondary},{background:n.colorFill})),uc(n,n.textTextColor,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),QT(n.componentCls,n.ghostBg,n.defaultGhostColor,n.defaultGhostBorderColor,n.colorTextDisabled,n.colorBorder)),iq=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorPrimary,boxShadow:n.primaryShadow},Qx(n,n.colorPrimary,n.colorBgContainer,{color:n.colorPrimaryTextHover,borderColor:n.colorPrimaryHover,background:n.colorBgContainer},{color:n.colorPrimaryTextActive,borderColor:n.colorPrimaryActive,background:n.colorBgContainer})),Zx(n)),Jx(n,n.colorPrimaryBg,{background:n.colorPrimaryBgHover},{background:n.colorPrimaryBorder})),uc(n,n.colorLink,"text",{color:n.colorPrimaryTextHover,background:n.colorPrimaryBg},{color:n.colorPrimaryTextActive,background:n.colorPrimaryBorder})),QT(n.componentCls,n.ghostBg,n.colorPrimary,n.colorPrimary,n.colorTextDisabled,n.colorBorder,{color:n.colorPrimaryHover,borderColor:n.colorPrimaryHover},{color:n.colorPrimaryActive,borderColor:n.colorPrimaryActive})),oq=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorError,boxShadow:n.dangerShadow},Yx(n,n.dangerColor,n.colorError,{background:n.colorErrorHover},{background:n.colorErrorActive})),Qx(n,n.colorError,n.colorBgContainer,{color:n.colorErrorHover,borderColor:n.colorErrorBorderHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),Zx(n)),Jx(n,n.colorErrorBg,{background:n.colorErrorBgFilledHover},{background:n.colorErrorBgActive})),uc(n,n.colorError,"text",{color:n.colorErrorHover,background:n.colorErrorBg},{color:n.colorErrorHover,background:n.colorErrorBgActive})),uc(n,n.colorError,"link",{color:n.colorErrorHover},{color:n.colorErrorActive})),QT(n.componentCls,n.ghostBg,n.colorError,n.colorError,n.colorTextDisabled,n.colorBorder,{color:n.colorErrorHover,borderColor:n.colorErrorHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),sq=n=>{const{componentCls:e}=n;return Object.assign({[`${e}-color-default`]:rq(n),[`${e}-color-primary`]:iq(n),[`${e}-color-dangerous`]:oq(n)},nq(n))},aq=n=>Object.assign(Object.assign(Object.assign(Object.assign({},Qx(n,n.defaultBorderColor,n.defaultBg,{color:n.defaultHoverColor,borderColor:n.defaultHoverBorderColor,background:n.defaultHoverBg},{color:n.defaultActiveColor,borderColor:n.defaultActiveBorderColor,background:n.defaultActiveBg})),uc(n,n.textTextColor,"text",{color:n.textTextHoverColor,background:n.textHoverBg},{color:n.textTextActiveColor,background:n.colorBgTextActive})),Yx(n,n.primaryColor,n.colorPrimary,{background:n.colorPrimaryHover,color:n.primaryColor},{background:n.colorPrimaryActive,color:n.primaryColor})),uc(n,n.colorLink,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),ZT=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:i,fontSize:o,borderRadius:s,buttonPaddingHorizontal:a,iconCls:l,buttonPaddingVertical:c,buttonIconOnlyFontSize:u}=n;return[{[e]:{fontSize:o,height:i,padding:`${De(c)} ${De(a)}`,borderRadius:s,[`&${r}-icon-only`]:{width:i,[l]:{fontSize:u,verticalAlign:"calc(-0.125em - 1px)"}}}},{[`${r}${r}-circle${e}`]:Q7(n)},{[`${r}${r}-round${e}`]:Z7(n)}]},lq=n=>{const e=Un(n,{fontSize:n.contentFontSize});return ZT(e,n.componentCls)},cq=n=>{const e=Un(n,{controlHeight:n.controlHeightSM,fontSize:n.contentFontSizeSM,padding:n.paddingXS,buttonPaddingHorizontal:n.paddingInlineSM,buttonPaddingVertical:0,borderRadius:n.borderRadiusSM,buttonIconOnlyFontSize:n.onlyIconSizeSM});return ZT(e,`${n.componentCls}-sm`)},uq=n=>{const e=Un(n,{controlHeight:n.controlHeightLG,fontSize:n.contentFontSizeLG,buttonPaddingHorizontal:n.paddingInlineLG,buttonPaddingVertical:0,borderRadius:n.borderRadiusLG,buttonIconOnlyFontSize:n.onlyIconSizeLG});return ZT(e,`${n.componentCls}-lg`)},dq=n=>{const{componentCls:e}=n;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},fq=ai("Button",n=>{const e=IB(n);return[Y7(e),lq(e),cq(e),uq(e),dq(e),sq(e),aq(e),c7(e)]},DB,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function hq(n,e,r){const{focusElCls:i,focus:o,borderElCls:s}=r,a=s?"> *":"",l=["hover",o?"focus":null,"active"].filter(Boolean).map(c=>`&:${c} ${a}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},i?{[`&${i}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function pq(n,e,r){const{borderElCls:i}=r,o=i?`> ${i}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${o}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${o}, &${n}-sm ${o}, &${n}-lg ${o}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${o}, &${n}-sm ${o}, &${n}-lg ${o}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function JT(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=n,i=`${r}-compact`;return{[i]:Object.assign(Object.assign({},hq(n,i,e)),pq(r,i,e))}}function mq(n,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:n.calc(n.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function gq(n,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function vq(n){const e=`${n.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},mq(n,e)),gq(n.componentCls,e))}}const yq=n=>{const{componentCls:e,colorPrimaryHover:r,lineWidth:i,calc:o}=n,s=o(i).mul(-1).equal(),a=l=>({[`${e}-compact${l?"-vertical":""}-item${e}-primary:not([disabled])`]:{"& + &::before":{position:"absolute",top:l?s:0,insetInlineStart:l?0:s,backgroundColor:r,content:'""',width:l?"100%":i,height:l?i:"100%"}}});return Object.assign(Object.assign({},a()),a(!0))},xq=jT(["Button","compact"],n=>{const e=IB(n);return[JT(e),vq(e),yq(e)]},DB);var _q=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function bq(n){if(typeof n=="object"&&n){let e=n==null?void 0:n.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!n,delay:0}}const Sq={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},wq=se.forwardRef((n,e)=>{var r,i,o,s;const{loading:a=!1,prefixCls:l,color:c,variant:u,type:d,danger:f=!1,shape:h="default",size:p,styles:g,disabled:y,className:v,rootClassName:m,children:x,icon:_,iconPosition:S="start",ghost:w=!1,block:C=!1,htmlType:E="button",classNames:T,style:M={},autoInsertSpace:R,autoFocus:N}=n,D=_q(n,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),L=d||"default",[A,I]=b.useMemo(()=>{if(c&&u)return[c,u];const Ee=Sq[L]||[];return f?["danger",Ee[1]]:Ee},[d,c,u,f]),F=A==="danger"?"dangerous":A,{getPrefixCls:O,direction:V,button:U}=b.useContext($t),k=(r=R??(U==null?void 0:U.autoInsertSpace))!==null&&r!==void 0?r:!0,W=O("btn",l),[J,z,j]=fq(W),X=b.useContext(el),Q=y??X,ne=b.useContext(TB),ye=b.useMemo(()=>bq(a),[a]),[me,fe]=b.useState(ye.loading),[le,ge]=b.useState(!1),q=b.useRef(null),ve=eh(e,q),be=b.Children.count(x)===1&&!_&&!Fb(I),xe=b.useRef(!0);se.useEffect(()=>(xe.current=!1,()=>{xe.current=!0}),[]),b.useEffect(()=>{let Ee=null;ye.delay>0?Ee=setTimeout(()=>{Ee=null,fe(!0)},ye.delay):fe(ye.loading);function Pe(){Ee&&(clearTimeout(Ee),Ee=null)}return Pe},[ye]),b.useEffect(()=>{if(!q.current||!k)return;const Ee=q.current.textContent||"";be&&wC(Ee)?le||ge(!0):le&&ge(!1)}),b.useEffect(()=>{N&&q.current&&q.current.focus()},[]);const we=se.useCallback(Ee=>{var Pe;if(me||Q){Ee.preventDefault();return}(Pe=n.onClick)===null||Pe===void 0||Pe.call(n,Ee)},[n.onClick,me,Q]),{compactSize:qe,compactItemClassnames:Fe}=qx(W,V),H={large:"lg",small:"sm",middle:void 0},B=da(Ee=>{var Pe,ke;return(ke=(Pe=p??qe)!==null&&Pe!==void 0?Pe:ne)!==null&&ke!==void 0?ke:Ee}),K=B&&(i=H[B])!==null&&i!==void 0?i:"",oe=me?"loading":_,pe=ua(D,["navigate"]),ce=_e(W,z,j,{[`${W}-${h}`]:h!=="default"&&h,[`${W}-${L}`]:L,[`${W}-dangerous`]:f,[`${W}-color-${F}`]:F,[`${W}-variant-${I}`]:I,[`${W}-${K}`]:K,[`${W}-icon-only`]:!x&&x!==0&&!!oe,[`${W}-background-ghost`]:w&&!Fb(I),[`${W}-loading`]:me,[`${W}-two-chinese-chars`]:le&&k&&!me,[`${W}-block`]:C,[`${W}-rtl`]:V==="rtl",[`${W}-icon-end`]:S==="end"},Fe,v,m,U==null?void 0:U.className),Ue=Object.assign(Object.assign({},U==null?void 0:U.style),M),Re=_e(T==null?void 0:T.icon,(o=U==null?void 0:U.classNames)===null||o===void 0?void 0:o.icon),Le=Object.assign(Object.assign({},(g==null?void 0:g.icon)||{}),((s=U==null?void 0:U.styles)===null||s===void 0?void 0:s.icon)||{}),Je=_&&!me?se.createElement(CC,{prefixCls:W,className:Re,style:Le},_):typeof a=="object"&&a.icon?se.createElement(CC,{prefixCls:W,className:Re,style:Le},a.icon):se.createElement(l7,{existIcon:!!_,prefixCls:W,loading:me,mount:xe.current}),Me=x||x===0?a7(x,be&&k):null;if(pe.href!==void 0)return J(se.createElement("a",Object.assign({},pe,{className:_e(ce,{[`${W}-disabled`]:Q}),href:Q?void 0:pe.href,style:Ue,onClick:we,ref:ve,tabIndex:Q?-1:0}),Je,Me));let ze=se.createElement("button",Object.assign({},D,{type:E,className:ce,style:Ue,onClick:we,disabled:Q,ref:ve}),Je,Me,Fe&&se.createElement(xq,{prefixCls:W}));return Fb(I)||(ze=se.createElement(wB,{component:"Button",disabled:me},ze)),J(ze)}),Fu=wq;Fu.Group=o7;Fu.__ANT_BUTTON=!0;function zb(n){return!!(n!=null&&n.then)}const FB=n=>{const{type:e,children:r,prefixCls:i,buttonProps:o,close:s,autoFocus:a,emitEvent:l,isSilent:c,quitOnNullishReturnValue:u,actionFn:d}=n,f=b.useRef(!1),h=b.useRef(null),[p,g]=bf(!1),y=function(){s==null||s.apply(void 0,arguments)};b.useEffect(()=>{let x=null;return a&&(x=setTimeout(()=>{var _;(_=h.current)===null||_===void 0||_.focus({preventScroll:!0})})),()=>{x&&clearTimeout(x)}},[]);const v=x=>{zb(x)&&(g(!0),x.then(function(){g(!1,!0),y.apply(void 0,arguments),f.current=!1},_=>{if(g(!1,!0),f.current=!1,!(c!=null&&c()))return Promise.reject(_)}))},m=x=>{if(f.current)return;if(f.current=!0,!d){y();return}let _;if(l){if(_=d(x),u&&!zb(_)){f.current=!1,y(x);return}}else if(d.length)_=d(s),f.current=!1;else if(_=d(),!zb(_)){y();return}v(_)};return b.createElement(Fu,Object.assign({},MB(e),{onClick:m,loading:p,prefixCls:i},o,{ref:h}),r)},lg=se.createContext({}),{Provider:UB}=lg,xN=()=>{const{autoFocusButton:n,cancelButtonProps:e,cancelTextLocale:r,isSilent:i,mergedOkCancel:o,rootPrefixCls:s,close:a,onCancel:l,onConfirm:c}=b.useContext(lg);return o?se.createElement(FB,{isSilent:i,actionFn:l,close:function(){a==null||a.apply(void 0,arguments),c==null||c(!1)},autoFocus:n==="cancel",buttonProps:e,prefixCls:`${s}-btn`},r):null},_N=()=>{const{autoFocusButton:n,close:e,isSilent:r,okButtonProps:i,rootPrefixCls:o,okTextLocale:s,okType:a,onConfirm:l,onOk:c}=b.useContext(lg);return se.createElement(FB,{isSilent:r,type:a||"primary",actionFn:c,close:function(){e==null||e.apply(void 0,arguments),l==null||l(!0)},autoFocus:n==="ok",buttonProps:i,prefixCls:`${o}-btn`},s)};var BB=b.createContext(null),bN=[];function Cq(n,e){var r=b.useState(function(){if(!vi())return null;var g=document.createElement("div");return g}),i=Ce(r,1),o=i[0],s=b.useRef(!1),a=b.useContext(BB),l=b.useState(bN),c=Ce(l,2),u=c[0],d=c[1],f=a||(s.current?void 0:function(g){d(function(y){var v=[g].concat(st(y));return v})});function h(){o.parentElement||document.body.appendChild(o),s.current=!0}function p(){var g;(g=o.parentElement)===null||g===void 0||g.removeChild(o),s.current=!1}return _n(function(){return n?a?a(h):h():p(),p},[n]),_n(function(){u.length&&(u.forEach(function(g){return g()}),d(bN))},[u]),[o,f]}function Eq(n){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=e;var i=r.style;i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll";var o,s;if(n){var a=getComputedStyle(n);i.scrollbarColor=a.scrollbarColor,i.scrollbarWidth=a.scrollbarWidth;var l=getComputedStyle(n,"::-webkit-scrollbar"),c=parseInt(l.width,10),u=parseInt(l.height,10);try{var d=c?"width: ".concat(l.width,";"):"",f=u?"height: ".concat(l.height,";"):"";Ga(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(d,`
`).concat(f,`
}`),e)}catch(g){console.error(g),o=c,s=u}}document.body.appendChild(r);var h=n&&o&&!isNaN(o)?o:r.offsetWidth-r.clientWidth,p=n&&s&&!isNaN(s)?s:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),cm(e),{width:h,height:p}}function Tq(n){return typeof document>"u"||!n||!(n instanceof Element)?{width:0,height:0}:Eq(n)}function Mq(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Rq="rc-util-locker-".concat(Date.now()),SN=0;function Aq(n){var e=!!n,r=b.useState(function(){return SN+=1,"".concat(Rq,"_").concat(SN)}),i=Ce(r,1),o=i[0];_n(function(){if(e){var s=Tq(document.body).width,a=Mq();Ga(`
html body {
  overflow-y: hidden;
  `.concat(a?"width: calc(100% - ".concat(s,"px);"):"",`
}`),o)}else cm(o);return function(){cm(o)}},[e,o])}var Nq=!1;function Pq(n){return Nq}var wN=function(e){return e===!1?!1:!vi()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},eM=b.forwardRef(function(n,e){var r=n.open,i=n.autoLock,o=n.getContainer;n.debug;var s=n.autoDestroy,a=s===void 0?!0:s,l=n.children,c=b.useState(r),u=Ce(c,2),d=u[0],f=u[1],h=d||r;b.useEffect(function(){(a||r)&&f(r)},[r,a]);var p=b.useState(function(){return wN(o)}),g=Ce(p,2),y=g[0],v=g[1];b.useEffect(function(){var N=wN(o);v(N??null)});var m=Cq(h&&!y),x=Ce(m,2),_=x[0],S=x[1],w=y??_;Aq(i&&r&&vi()&&(w===_||w===document.body));var C=null;if(l&&rg(l)&&e){var E=l;C=E.ref}var T=eh(C,e);if(!h||!vi()||y===void 0)return null;var M=w===!1||Pq(),R=l;return e&&(R=b.cloneElement(l,{ref:T})),b.createElement(BB.Provider,{value:S},M?R:ea.createPortal(R,w))}),$B=b.createContext({});function Oq(){var n=re({},cx);return n.useId}var CN=0,EN=Oq();const zB=EN?function(e){var r=EN();return e||r}:function(e){var r=b.useState("ssr-id"),i=Ce(r,2),o=i[0],s=i[1];return b.useEffect(function(){var a=CN;CN+=1,s("rc_unique_".concat(a))},[]),e||o};function TN(n,e,r){var i=e;return!i&&r&&(i="".concat(n,"-").concat(r)),i}function MN(n,e){var r=n["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var o=n.document;r=o.documentElement[i],typeof r!="number"&&(r=o.body[i])}return r}function Iq(n){var e=n.getBoundingClientRect(),r={left:e.left,top:e.top},i=n.ownerDocument,o=i.defaultView||i.parentWindow;return r.left+=MN(o),r.top+=MN(o,!0),r}const Dq=b.memo(function(n){var e=n.children;return e},function(n,e){var r=e.shouldUpdate;return!r});var Lq={width:0,height:0,overflow:"hidden",outline:"none"},Fq={outline:"none"},kB=se.forwardRef(function(n,e){var r=n.prefixCls,i=n.className,o=n.style,s=n.title,a=n.ariaId,l=n.footer,c=n.closable,u=n.closeIcon,d=n.onClose,f=n.children,h=n.bodyStyle,p=n.bodyProps,g=n.modalRender,y=n.onMouseDown,v=n.onMouseUp,m=n.holderRef,x=n.visible,_=n.forceRender,S=n.width,w=n.height,C=n.classNames,E=n.styles,T=se.useContext($B),M=T.panel,R=eh(m,M),N=b.useRef(),D=b.useRef();se.useImperativeHandle(e,function(){return{focus:function(){var W;(W=N.current)===null||W===void 0||W.focus({preventScroll:!0})},changeActive:function(W){var J=document,z=J.activeElement;W&&z===D.current?N.current.focus({preventScroll:!0}):!W&&z===N.current&&D.current.focus({preventScroll:!0})}}});var L={};S!==void 0&&(L.width=S),w!==void 0&&(L.height=w);var A=l?se.createElement("div",{className:_e("".concat(r,"-footer"),C==null?void 0:C.footer),style:re({},E==null?void 0:E.footer)},l):null,I=s?se.createElement("div",{className:_e("".concat(r,"-header"),C==null?void 0:C.header),style:re({},E==null?void 0:E.header)},se.createElement("div",{className:"".concat(r,"-title"),id:a},s)):null,P=b.useMemo(function(){return Rt(c)==="object"&&c!==null?c:c?{closeIcon:u??se.createElement("span",{className:"".concat(r,"-close-x")})}:{}},[c,u,r]),F=ta(P,!0),O=Rt(c)==="object"&&c.disabled,V=c?se.createElement("button",ut({type:"button",onClick:d,"aria-label":"Close"},F,{className:"".concat(r,"-close"),disabled:O}),P.closeIcon):null,U=se.createElement("div",{className:_e("".concat(r,"-content"),C==null?void 0:C.content),style:E==null?void 0:E.content},V,I,se.createElement("div",ut({className:_e("".concat(r,"-body"),C==null?void 0:C.body),style:re(re({},h),E==null?void 0:E.body)},p),f),A);return se.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":s?a:null,"aria-modal":"true",ref:R,style:re(re({},o),L),className:_e(r,i),onMouseDown:y,onMouseUp:v},se.createElement("div",{ref:N,tabIndex:0,style:Fq},se.createElement(Dq,{shouldUpdate:x||_},g?g(U):U)),se.createElement("div",{tabIndex:0,ref:D,style:Lq}))}),VB=b.forwardRef(function(n,e){var r=n.prefixCls,i=n.title,o=n.style,s=n.className,a=n.visible,l=n.forceRender,c=n.destroyOnClose,u=n.motionName,d=n.ariaId,f=n.onVisibleChanged,h=n.mousePosition,p=b.useRef(),g=b.useState(),y=Ce(g,2),v=y[0],m=y[1],x={};v&&(x.transformOrigin=v);function _(){var S=Iq(p.current);m(h&&(h.x||h.y)?"".concat(h.x-S.left,"px ").concat(h.y-S.top,"px"):"")}return b.createElement(Du,{visible:a,onVisibleChanged:f,onAppearPrepare:_,onEnterPrepare:_,forceRender:l,motionName:u,removeOnLeave:c,ref:p},function(S,w){var C=S.className,E=S.style;return b.createElement(kB,ut({},n,{ref:e,title:i,ariaId:d,prefixCls:r,holderRef:w,style:re(re(re({},E),o),x),className:_e(s,C)}))})});VB.displayName="Content";var Uq=function(e){var r=e.prefixCls,i=e.style,o=e.visible,s=e.maskProps,a=e.motionName,l=e.className;return b.createElement(Du,{key:"mask",visible:o,motionName:a,leavedClassName:"".concat(r,"-mask-hidden")},function(c,u){var d=c.className,f=c.style;return b.createElement("div",ut({ref:u,style:re(re({},f),i),className:_e("".concat(r,"-mask"),d,l)},s))})},Bq=function(e){var r=e.prefixCls,i=r===void 0?"rc-dialog":r,o=e.zIndex,s=e.visible,a=s===void 0?!1:s,l=e.keyboard,c=l===void 0?!0:l,u=e.focusTriggerAfterClose,d=u===void 0?!0:u,f=e.wrapStyle,h=e.wrapClassName,p=e.wrapProps,g=e.onClose,y=e.afterOpenChange,v=e.afterClose,m=e.transitionName,x=e.animation,_=e.closable,S=_===void 0?!0:_,w=e.mask,C=w===void 0?!0:w,E=e.maskTransitionName,T=e.maskAnimation,M=e.maskClosable,R=M===void 0?!0:M,N=e.maskStyle,D=e.maskProps,L=e.rootClassName,A=e.classNames,I=e.styles,P=b.useRef(),F=b.useRef(),O=b.useRef(),V=b.useState(a),U=Ce(V,2),k=U[0],W=U[1],J=zB();function z(){Ww(F.current,document.activeElement)||(P.current=document.activeElement)}function j(){if(!Ww(F.current,document.activeElement)){var ve;(ve=O.current)===null||ve===void 0||ve.focus()}}function X(ve){if(ve)j();else{if(W(!1),C&&P.current&&d){try{P.current.focus({preventScroll:!0})}catch{}P.current=null}k&&(v==null||v())}y==null||y(ve)}function Q(ve){g==null||g(ve)}var ne=b.useRef(!1),ye=b.useRef(),me=function(){clearTimeout(ye.current),ne.current=!0},fe=function(){ye.current=setTimeout(function(){ne.current=!1})},le=null;R&&(le=function(be){ne.current?ne.current=!1:F.current===be.target&&Q(be)});function ge(ve){if(c&&ve.keyCode===He.ESC){ve.stopPropagation(),Q(ve);return}a&&ve.keyCode===He.TAB&&O.current.changeActive(!ve.shiftKey)}b.useEffect(function(){a&&(W(!0),z())},[a]),b.useEffect(function(){return function(){clearTimeout(ye.current)}},[]);var q=re(re(re({zIndex:o},f),I==null?void 0:I.wrapper),{},{display:k?null:"none"});return b.createElement("div",ut({className:_e("".concat(i,"-root"),L)},ta(e,{data:!0})),b.createElement(Uq,{prefixCls:i,visible:C&&a,motionName:TN(i,E,T),style:re(re({zIndex:o},N),I==null?void 0:I.mask),maskProps:D,className:A==null?void 0:A.mask}),b.createElement("div",ut({tabIndex:-1,onKeyDown:ge,className:_e("".concat(i,"-wrap"),h,A==null?void 0:A.wrapper),ref:F,onClick:le,style:q},p),b.createElement(VB,ut({},e,{onMouseDown:me,onMouseUp:fe,ref:O,closable:S,ariaId:J,prefixCls:i,visible:a&&k,onClose:Q,onVisibleChanged:X,motionName:TN(i,m,x)}))))},GB=function(e){var r=e.visible,i=e.getContainer,o=e.forceRender,s=e.destroyOnClose,a=s===void 0?!1:s,l=e.afterClose,c=e.panelRef,u=b.useState(r),d=Ce(u,2),f=d[0],h=d[1],p=b.useMemo(function(){return{panel:c}},[c]);return b.useEffect(function(){r&&h(!0)},[r]),!o&&a&&!f?null:b.createElement($B.Provider,{value:p},b.createElement(eM,{open:r||o||f,autoDestroy:!1,getContainer:i,autoLock:r||f},b.createElement(Bq,ut({},e,{destroyOnClose:a,afterClose:function(){l==null||l(),h(!1)}}))))};GB.displayName="Dialog";var nu="RC_FORM_INTERNAL_HOOKS",In=function(){eo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Cf=b.createContext({getFieldValue:In,getFieldsValue:In,getFieldError:In,getFieldWarning:In,getFieldsError:In,isFieldsTouched:In,isFieldTouched:In,isFieldValidating:In,isFieldsValidating:In,resetFields:In,setFields:In,setFieldValue:In,setFieldsValue:In,validateFields:In,submit:In,getInternalHooks:function(){return In(),{dispatch:In,initEntityValue:In,registerField:In,useSubscribe:In,setInitialValues:In,destroyForm:In,setCallbacks:In,registerWatch:In,getFields:In,setValidateMessages:In,setPreserve:In,getInitialValue:In}}}),Sy=b.createContext(null);function EC(n){return n==null?[]:Array.isArray(n)?n:[n]}function $q(n){return n&&!!n._init}function TC(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var MC=TC();function zq(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function kq(n,e,r){if(DT())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return r&&gf(o,r.prototype),o}function wy(n){var e=typeof Map=="function"?new Map:void 0;return wy=function(i){if(i===null||!zq(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,o)}function o(){return kq(i,arguments,am(this).constructor)}return o.prototype=Object.create(i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),gf(o,i)},wy(n)}var Vq=/%[sdj%]/g,Gq=function(){};function RC(n){if(!n||!n.length)return null;var e={};return n.forEach(function(r){var i=r.field;e[i]=e[i]||[],e[i].push(r)}),e}function So(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var o=0,s=r.length;if(typeof n=="function")return n.apply(null,r);if(typeof n=="string"){var a=n.replace(Vq,function(l){if(l==="%%")return"%";if(o>=s)return l;switch(l){case"%s":return String(r[o++]);case"%d":return Number(r[o++]);case"%j":try{return JSON.stringify(r[o++])}catch{return"[Circular]"}break;default:return l}});return a}return n}function Hq(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function kr(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||Hq(e)&&typeof n=="string"&&!n)}function jq(n,e,r){var i=[],o=0,s=n.length;function a(l){i.push.apply(i,st(l||[])),o++,o===s&&r(i)}n.forEach(function(l){e(l,a)})}function RN(n,e,r){var i=0,o=n.length;function s(a){if(a&&a.length){r(a);return}var l=i;i=i+1,l<o?e(n[l],s):r([])}s([])}function Wq(n){var e=[];return Object.keys(n).forEach(function(r){e.push.apply(e,st(n[r]||[]))}),e}var AN=function(n){yc(r,n);var e=xc(r);function r(i,o){var s;return Hr(this,r),s=e.call(this,"Async Validation Error"),ee(nn(s),"errors",void 0),ee(nn(s),"fields",void 0),s.errors=i,s.fields=o,s}return jr(r)}(wy(Error));function qq(n,e,r,i,o){if(e.first){var s=new Promise(function(h,p){var g=function(m){return i(m),m.length?p(new AN(m,RC(m))):h(o)},y=Wq(n);RN(y,r,g)});return s.catch(function(h){return h}),s}var a=e.firstFields===!0?Object.keys(n):e.firstFields||[],l=Object.keys(n),c=l.length,u=0,d=[],f=new Promise(function(h,p){var g=function(v){if(d.push.apply(d,v),u++,u===c)return i(d),d.length?p(new AN(d,RC(d))):h(o)};l.length||(i(d),h(o)),l.forEach(function(y){var v=n[y];a.indexOf(y)!==-1?RN(v,r,g):jq(v,r,g)})});return f.catch(function(h){return h}),f}function Xq(n){return!!(n&&n.message!==void 0)}function Kq(n,e){for(var r=n,i=0;i<e.length;i++){if(r==null)return r;r=r[e[i]]}return r}function NN(n,e){return function(r){var i;return n.fullFields?i=Kq(e,n.fullFields):i=e[r.field||n.fullField],Xq(r)?(r.field=r.field||n.fullField,r.fieldValue=i,r):{message:typeof r=="function"?r():r,fieldValue:i,field:r.field||n.fullField}}}function PN(n,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];Rt(i)==="object"&&Rt(n[r])==="object"?n[r]=re(re({},n[r]),i):n[r]=i}}return n}var Ku="enum",Yq=function(e,r,i,o,s){e[Ku]=Array.isArray(e[Ku])?e[Ku]:[],e[Ku].indexOf(r)===-1&&o.push(So(s.messages[Ku],e.fullField,e[Ku].join(", ")))},Qq=function(e,r,i,o,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||o.push(So(s.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(r)||o.push(So(s.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},Zq=function(e,r,i,o,s){var a=typeof e.len=="number",l=typeof e.min=="number",c=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=r,f=null,h=typeof r=="number",p=typeof r=="string",g=Array.isArray(r);if(h?f="number":p?f="string":g&&(f="array"),!f)return!1;g&&(d=r.length),p&&(d=r.replace(u,"_").length),a?d!==e.len&&o.push(So(s.messages[f].len,e.fullField,e.len)):l&&!c&&d<e.min?o.push(So(s.messages[f].min,e.fullField,e.min)):c&&!l&&d>e.max?o.push(So(s.messages[f].max,e.fullField,e.max)):l&&c&&(d<e.min||d>e.max)&&o.push(So(s.messages[f].range,e.fullField,e.min,e.max))},HB=function(e,r,i,o,s,a){e.required&&(!i.hasOwnProperty(e.field)||kr(r,a||e.type))&&o.push(So(s.messages.required,e.fullField))},sv;const Jq=function(){if(sv)return sv;var n="[a-fA-F\\d:]",e=function(C){return C&&C.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",o=["(?:".concat(i,":){7}(?:").concat(i,"|:)"),"(?:".concat(i,":){6}(?:").concat(r,"|:").concat(i,"|:)"),"(?:".concat(i,":){5}(?::").concat(r,"|(?::").concat(i,"){1,2}|:)"),"(?:".concat(i,":){4}(?:(?::").concat(i,"){0,1}:").concat(r,"|(?::").concat(i,"){1,3}|:)"),"(?:".concat(i,":){3}(?:(?::").concat(i,"){0,2}:").concat(r,"|(?::").concat(i,"){1,4}|:)"),"(?:".concat(i,":){2}(?:(?::").concat(i,"){0,3}:").concat(r,"|(?::").concat(i,"){1,5}|:)"),"(?:".concat(i,":){1}(?:(?::").concat(i,"){0,4}:").concat(r,"|(?::").concat(i,"){1,6}|:)"),"(?::(?:(?::".concat(i,"){0,5}:").concat(r,"|(?::").concat(i,"){1,7}|:))")],s="(?:%[0-9a-zA-Z]{1,})?",a="(?:".concat(o.join("|"),")").concat(s),l=new RegExp("(?:^".concat(r,"$)|(?:^").concat(a,"$)")),c=new RegExp("^".concat(r,"$")),u=new RegExp("^".concat(a,"$")),d=function(C){return C&&C.exact?l:new RegExp("(?:".concat(e(C)).concat(r).concat(e(C),")|(?:").concat(e(C)).concat(a).concat(e(C),")"),"g")};d.v4=function(w){return w&&w.exact?c:new RegExp("".concat(e(w)).concat(r).concat(e(w)),"g")},d.v6=function(w){return w&&w.exact?u:new RegExp("".concat(e(w)).concat(a).concat(e(w)),"g")};var f="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",p=d.v4().source,g=d.v6().source,y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",v="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",x="(?::\\d{2,5})?",_='(?:[/?#][^\\s"]*)?',S="(?:".concat(f,"|www\\.)").concat(h,"(?:localhost|").concat(p,"|").concat(g,"|").concat(y).concat(v).concat(m,")").concat(x).concat(_);return sv=new RegExp("(?:^".concat(S,"$)"),"i"),sv};var ON={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},up={integer:function(e){return up.number(e)&&parseInt(e,10)===e},float:function(e){return up.number(e)&&!up.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Rt(e)==="object"&&!up.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(ON.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Jq())},hex:function(e){return typeof e=="string"&&!!e.match(ON.hex)}},eX=function(e,r,i,o,s){if(e.required&&r===void 0){HB(e,r,i,o,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;a.indexOf(l)>-1?up[l](r)||o.push(So(s.messages.types[l],e.fullField,e.type)):l&&Rt(r)!==e.type&&o.push(So(s.messages.types[l],e.fullField,e.type))},tX=function(e,r,i,o,s){(/^\s+$/.test(r)||r==="")&&o.push(So(s.messages.whitespace,e.fullField))};const cn={required:HB,whitespace:tX,type:eX,range:Zq,enum:Yq,pattern:Qq};var nX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s)}i(a)},rX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(r==null&&!e.required)return i();cn.required(e,r,o,a,s,"array"),r!=null&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},iX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},oX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r,"date")&&!e.required)return i();if(cn.required(e,r,o,a,s),!kr(r,"date")){var c;r instanceof Date?c=r:c=new Date(r),cn.type(e,c,o,a,s),c&&cn.range(e,c.getTime(),o,a,s)}}i(a)},sX="enum",aX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn[sX](e,r,o,a,s)}i(a)},lX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},cX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},uX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},dX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(r===""&&(r=void 0),kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},fX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},hX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r,"string")&&!e.required)return i();cn.required(e,r,o,a,s),kr(r,"string")||cn.pattern(e,r,o,a,s)}i(a)},pX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r)&&!e.required)return i();cn.required(e,r,o,a,s),kr(r)||cn.type(e,r,o,a,s)}i(a)},mX=function(e,r,i,o,s){var a=[],l=Array.isArray(r)?"array":Rt(r);cn.required(e,r,o,a,s,l),i(a)},gX=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(kr(r,"string")&&!e.required)return i();cn.required(e,r,o,a,s,"string"),kr(r,"string")||(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s),cn.pattern(e,r,o,a,s),e.whitespace===!0&&cn.whitespace(e,r,o,a,s))}i(a)},kb=function(e,r,i,o,s){var a=e.type,l=[],c=e.required||!e.required&&o.hasOwnProperty(e.field);if(c){if(kr(r,a)&&!e.required)return i();cn.required(e,r,o,l,s,a),kr(r,a)||cn.type(e,r,o,l,s)}i(l)};const Op={string:gX,method:uX,number:dX,boolean:iX,regexp:pX,integer:cX,float:lX,array:rX,object:fX,enum:aX,pattern:hX,date:oX,url:kb,hex:kb,email:kb,required:mX,any:nX};var cg=function(){function n(e){Hr(this,n),ee(this,"rules",null),ee(this,"_messages",MC),this.define(e)}return jr(n,[{key:"define",value:function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(Rt(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(o){var s=r[o];i.rules[o]=Array.isArray(s)?s:[s]})}},{key:"messages",value:function(r){return r&&(this._messages=PN(TC(),r)),this._messages}},{key:"validate",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=r,l=o,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(g){var y=[],v={};function m(_){if(Array.isArray(_)){var S;y=(S=y).concat.apply(S,st(_))}else y.push(_)}for(var x=0;x<g.length;x++)m(g[x]);y.length?(v=RC(y),c(y,v)):c(null,a)}if(l.messages){var d=this.messages();d===MC&&(d=TC()),PN(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(g){var y=i.rules[g],v=a[g];y.forEach(function(m){var x=m;typeof x.transform=="function"&&(a===r&&(a=re({},a)),v=a[g]=x.transform(v),v!=null&&(x.type=x.type||(Array.isArray(v)?"array":Rt(v)))),typeof x=="function"?x={validator:x}:x=re({},x),x.validator=i.getValidationMethod(x),x.validator&&(x.field=g,x.fullField=x.fullField||g,x.type=i.getType(x),f[g]=f[g]||[],f[g].push({rule:x,value:v,source:a,field:g}))})});var p={};return qq(f,l,function(g,y){var v=g.rule,m=(v.type==="object"||v.type==="array")&&(Rt(v.fields)==="object"||Rt(v.defaultField)==="object");m=m&&(v.required||!v.required&&g.value),v.field=g.field;function x(E,T){return re(re({},T),{},{fullField:"".concat(v.fullField,".").concat(E),fullFields:v.fullFields?[].concat(st(v.fullFields),[E]):[E]})}function _(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=Array.isArray(E)?E:[E];!l.suppressWarning&&T.length&&n.warning("async-validator:",T),T.length&&v.message!==void 0&&(T=[].concat(v.message));var M=T.map(NN(v,a));if(l.first&&M.length)return p[v.field]=1,y(M);if(!m)y(M);else{if(v.required&&!g.value)return v.message!==void 0?M=[].concat(v.message).map(NN(v,a)):l.error&&(M=[l.error(v,So(l.messages.required,v.field))]),y(M);var R={};v.defaultField&&Object.keys(g.value).map(function(L){R[L]=v.defaultField}),R=re(re({},R),g.rule.fields);var N={};Object.keys(R).forEach(function(L){var A=R[L],I=Array.isArray(A)?A:[A];N[L]=I.map(x.bind(null,L))});var D=new n(N);D.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),D.validate(g.value,g.rule.options||l,function(L){var A=[];M&&M.length&&A.push.apply(A,st(M)),L&&L.length&&A.push.apply(A,st(L)),y(A.length?A:null)})}}var S;if(v.asyncValidator)S=v.asyncValidator(v,g.value,_,g.source,l);else if(v.validator){try{S=v.validator(v,g.value,_,g.source,l)}catch(E){var w,C;(w=(C=console).error)===null||w===void 0||w.call(C,E),l.suppressValidatorError||setTimeout(function(){throw E},0),_(E.message)}S===!0?_():S===!1?_(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||"".concat(v.fullField||v.field," fails")):S instanceof Array?_(S):S instanceof Error&&_(S.message)}S&&S.then&&S.then(function(){return _()},function(E){return _(E)})},function(g){u(g)},a)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Op.hasOwnProperty(r.type))throw new Error(So("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),o=i.indexOf("message");return o!==-1&&i.splice(o,1),i.length===1&&i[0]==="required"?Op.required:Op[this.getType(r)]||void 0}}]),n}();ee(cg,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Op[e]=r});ee(cg,"warning",Gq);ee(cg,"messages",MC);ee(cg,"validators",Op);var ao="'${name}' is not a valid ${type}",jB={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ao,method:ao,array:ao,object:ao,number:ao,date:ao,boolean:ao,integer:ao,float:ao,regexp:ao,email:ao,url:ao,hex:ao},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},IN=cg;function vX(n,e){return n.replace(/\\?\$\{\w+\}/g,function(r){if(r.startsWith("\\"))return r.slice(1);var i=r.slice(2,-1);return e[i]})}var DN="CODE_LOGIC_ERROR";function AC(n,e,r,i,o){return NC.apply(this,arguments)}function NC(){return NC=Lu(Oi().mark(function n(e,r,i,o,s){var a,l,c,u,d,f,h,p,g;return Oi().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a=re({},i),delete a.ruleIndex,IN.warning=function(){},a.validator&&(l=a.validator,a.validator=function(){try{return l.apply(void 0,arguments)}catch(m){return console.error(m),Promise.reject(DN)}}),c=null,a&&a.type==="array"&&a.defaultField&&(c=a.defaultField,delete a.defaultField),u=new IN(ee({},e,[a])),d=Dd(jB,o.validateMessages),u.messages(d),f=[],v.prev=10,v.next=13,Promise.resolve(u.validate(ee({},e,r),re({},o)));case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(10),v.t0.errors&&(f=v.t0.errors.map(function(m,x){var _=m.message,S=_===DN?d.default:_;return b.isValidElement(S)?b.cloneElement(S,{key:"error_".concat(x)}):S}));case 18:if(!(!f.length&&c)){v.next=23;break}return v.next=21,Promise.all(r.map(function(m,x){return AC("".concat(e,".").concat(x),m,c,o,s)}));case 21:return h=v.sent,v.abrupt("return",h.reduce(function(m,x){return[].concat(st(m),st(x))},[]));case 23:return p=re(re({},i),{},{name:e,enum:(i.enum||[]).join(", ")},s),g=f.map(function(m){return typeof m=="string"?vX(m,p):m}),v.abrupt("return",g);case 26:case"end":return v.stop()}},n,null,[[10,15]])})),NC.apply(this,arguments)}function yX(n,e,r,i,o,s){var a=n.join("."),l=r.map(function(d,f){var h=d.validator,p=re(re({},d),{},{ruleIndex:f});return h&&(p.validator=function(g,y,v){var m=!1,x=function(){for(var w=arguments.length,C=new Array(w),E=0;E<w;E++)C[E]=arguments[E];Promise.resolve().then(function(){eo(!m,"Your validator function has already return a promise. `callback` will be ignored."),m||v.apply(void 0,C)})},_=h(g,y,x);m=_&&typeof _.then=="function"&&typeof _.catch=="function",eo(m,"`callback` is deprecated. Please return a promise instead."),m&&_.then(function(){v()}).catch(function(S){v(S||" ")})}),p}).sort(function(d,f){var h=d.warningOnly,p=d.ruleIndex,g=f.warningOnly,y=f.ruleIndex;return!!h==!!g?p-y:h?1:-1}),c;if(o===!0)c=new Promise(function(){var d=Lu(Oi().mark(function f(h,p){var g,y,v;return Oi().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:g=0;case 1:if(!(g<l.length)){x.next=12;break}return y=l[g],x.next=5,AC(a,e,y,i,s);case 5:if(v=x.sent,!v.length){x.next=9;break}return p([{errors:v,rule:y}]),x.abrupt("return");case 9:g+=1,x.next=1;break;case 12:h([]);case 13:case"end":return x.stop()}},f)}));return function(f,h){return d.apply(this,arguments)}}());else{var u=l.map(function(d){return AC(a,e,d,i,s).then(function(f){return{errors:f,rule:d}})});c=(o?_X(u):xX(u)).then(function(d){return Promise.reject(d)})}return c.catch(function(d){return d}),c}function xX(n){return PC.apply(this,arguments)}function PC(){return PC=Lu(Oi().mark(function n(e){return Oi().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(e).then(function(o){var s,a=(s=[]).concat.apply(s,st(o));return a}));case 1:case"end":return i.stop()}},n)})),PC.apply(this,arguments)}function _X(n){return OC.apply(this,arguments)}function OC(){return OC=Lu(Oi().mark(function n(e){var r;return Oi().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=0,o.abrupt("return",new Promise(function(s){e.forEach(function(a){a.then(function(l){l.errors.length&&s([l]),r+=1,r===e.length&&s([])})})}));case 2:case"end":return o.stop()}},n)})),OC.apply(this,arguments)}function fr(n){return EC(n)}function LN(n,e){var r={};return e.forEach(function(i){var o=js(n,i);r=hs(r,i,o)}),r}function Qd(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n&&n.some(function(i){return WB(e,i,r)})}function WB(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!n||!e||!r&&n.length!==e.length?!1:e.every(function(i,o){return n[o]===i})}function bX(n,e){if(n===e)return!0;if(!n&&e||n&&!e||!n||!e||Rt(n)!=="object"||Rt(e)!=="object")return!1;var r=Object.keys(n),i=Object.keys(e),o=new Set([].concat(r,i));return st(o).every(function(s){var a=n[s],l=e[s];return typeof a=="function"&&typeof l=="function"?!0:a===l})}function SX(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&Rt(e.target)==="object"&&n in e.target?e.target[n]:e}function FN(n,e,r){var i=n.length;if(e<0||e>=i||r<0||r>=i)return n;var o=n[e],s=e-r;return s>0?[].concat(st(n.slice(0,r)),[o],st(n.slice(r,e)),st(n.slice(e+1,i))):s<0?[].concat(st(n.slice(0,e)),st(n.slice(e+1,r+1)),[o],st(n.slice(r+1,i))):n}var wX=["name"],Oo=[];function Vb(n,e,r,i,o,s){return typeof n=="function"?n(e,r,"source"in s?{source:s.source}:{}):i!==o}var tM=function(n){yc(r,n);var e=xc(r);function r(i){var o;if(Hr(this,r),o=e.call(this,i),ee(nn(o),"state",{resetCount:0}),ee(nn(o),"cancelRegisterFunc",null),ee(nn(o),"mounted",!1),ee(nn(o),"touched",!1),ee(nn(o),"dirty",!1),ee(nn(o),"validatePromise",void 0),ee(nn(o),"prevValidating",void 0),ee(nn(o),"errors",Oo),ee(nn(o),"warnings",Oo),ee(nn(o),"cancelRegister",function(){var c=o.props,u=c.preserve,d=c.isListField,f=c.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(d,u,fr(f)),o.cancelRegisterFunc=null}),ee(nn(o),"getNamePath",function(){var c=o.props,u=c.name,d=c.fieldContext,f=d.prefixName,h=f===void 0?[]:f;return u!==void 0?[].concat(st(h),st(u)):[]}),ee(nn(o),"getRules",function(){var c=o.props,u=c.rules,d=u===void 0?[]:u,f=c.fieldContext;return d.map(function(h){return typeof h=="function"?h(f):h})}),ee(nn(o),"refresh",function(){o.mounted&&o.setState(function(c){var u=c.resetCount;return{resetCount:u+1}})}),ee(nn(o),"metaCache",null),ee(nn(o),"triggerMetaEvent",function(c){var u=o.props.onMetaChange;if(u){var d=re(re({},o.getMeta()),{},{destroy:c});Xw(o.metaCache,d)||u(d),o.metaCache=d}else o.metaCache=null}),ee(nn(o),"onStoreChange",function(c,u,d){var f=o.props,h=f.shouldUpdate,p=f.dependencies,g=p===void 0?[]:p,y=f.onReset,v=d.store,m=o.getNamePath(),x=o.getValue(c),_=o.getValue(v),S=u&&Qd(u,m);switch(d.type==="valueUpdate"&&d.source==="external"&&!Xw(x,_)&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=Oo,o.warnings=Oo,o.triggerMetaEvent()),d.type){case"reset":if(!u||S){o.touched=!1,o.dirty=!1,o.validatePromise=void 0,o.errors=Oo,o.warnings=Oo,o.triggerMetaEvent(),y==null||y(),o.refresh();return}break;case"remove":{if(h&&Vb(h,c,v,x,_,d)){o.reRender();return}break}case"setField":{var w=d.data;if(S){"touched"in w&&(o.touched=w.touched),"validating"in w&&!("originRCField"in w)&&(o.validatePromise=w.validating?Promise.resolve([]):null),"errors"in w&&(o.errors=w.errors||Oo),"warnings"in w&&(o.warnings=w.warnings||Oo),o.dirty=!0,o.triggerMetaEvent(),o.reRender();return}else if("value"in w&&Qd(u,m,!0)){o.reRender();return}if(h&&!m.length&&Vb(h,c,v,x,_,d)){o.reRender();return}break}case"dependenciesUpdate":{var C=g.map(fr);if(C.some(function(E){return Qd(d.relatedFields,E)})){o.reRender();return}break}default:if(S||(!g.length||m.length||h)&&Vb(h,c,v,x,_,d)){o.reRender();return}break}h===!0&&o.reRender()}),ee(nn(o),"validateRules",function(c){var u=o.getNamePath(),d=o.getValue(),f=c||{},h=f.triggerName,p=f.validateOnly,g=p===void 0?!1:p,y=Promise.resolve().then(Lu(Oi().mark(function v(){var m,x,_,S,w,C,E;return Oi().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(o.mounted){M.next=2;break}return M.abrupt("return",[]);case 2:if(m=o.props,x=m.validateFirst,_=x===void 0?!1:x,S=m.messageVariables,w=m.validateDebounce,C=o.getRules(),h&&(C=C.filter(function(R){return R}).filter(function(R){var N=R.validateTrigger;if(!N)return!0;var D=EC(N);return D.includes(h)})),!(w&&h)){M.next=10;break}return M.next=8,new Promise(function(R){setTimeout(R,w)});case 8:if(o.validatePromise===y){M.next=10;break}return M.abrupt("return",[]);case 10:return E=yX(u,d,C,c,_,S),E.catch(function(R){return R}).then(function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oo;if(o.validatePromise===y){var N;o.validatePromise=null;var D=[],L=[];(N=R.forEach)===null||N===void 0||N.call(R,function(A){var I=A.rule.warningOnly,P=A.errors,F=P===void 0?Oo:P;I?L.push.apply(L,st(F)):D.push.apply(D,st(F))}),o.errors=D,o.warnings=L,o.triggerMetaEvent(),o.reRender()}}),M.abrupt("return",E);case 13:case"end":return M.stop()}},v)})));return g||(o.validatePromise=y,o.dirty=!0,o.errors=Oo,o.warnings=Oo,o.triggerMetaEvent(),o.reRender()),y}),ee(nn(o),"isFieldValidating",function(){return!!o.validatePromise}),ee(nn(o),"isFieldTouched",function(){return o.touched}),ee(nn(o),"isFieldDirty",function(){if(o.dirty||o.props.initialValue!==void 0)return!0;var c=o.props.fieldContext,u=c.getInternalHooks(nu),d=u.getInitialValue;return d(o.getNamePath())!==void 0}),ee(nn(o),"getErrors",function(){return o.errors}),ee(nn(o),"getWarnings",function(){return o.warnings}),ee(nn(o),"isListField",function(){return o.props.isListField}),ee(nn(o),"isList",function(){return o.props.isList}),ee(nn(o),"isPreserve",function(){return o.props.preserve}),ee(nn(o),"getMeta",function(){o.prevValidating=o.isFieldValidating();var c={touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,warnings:o.warnings,name:o.getNamePath(),validated:o.validatePromise===null};return c}),ee(nn(o),"getOnlyChild",function(c){if(typeof c=="function"){var u=o.getMeta();return re(re({},o.getOnlyChild(c(o.getControlled(),u,o.props.fieldContext))),{},{isFunction:!0})}var d=Ja(c);return d.length!==1||!b.isValidElement(d[0])?{child:d,isFunction:!1}:{child:d[0],isFunction:!1}}),ee(nn(o),"getValue",function(c){var u=o.props.fieldContext.getFieldsValue,d=o.getNamePath();return js(c||u(!0),d)}),ee(nn(o),"getControlled",function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.props,d=u.name,f=u.trigger,h=u.validateTrigger,p=u.getValueFromEvent,g=u.normalize,y=u.valuePropName,v=u.getValueProps,m=u.fieldContext,x=h!==void 0?h:m.validateTrigger,_=o.getNamePath(),S=m.getInternalHooks,w=m.getFieldsValue,C=S(nu),E=C.dispatch,T=o.getValue(),M=v||function(A){return ee({},y,A)},R=c[f],N=d!==void 0?M(T):{},D=re(re({},c),N);D[f]=function(){o.touched=!0,o.dirty=!0,o.triggerMetaEvent();for(var A,I=arguments.length,P=new Array(I),F=0;F<I;F++)P[F]=arguments[F];p?A=p.apply(void 0,P):A=SX.apply(void 0,[y].concat(P)),g&&(A=g(A,T,w(!0))),A!==T&&E({type:"updateValue",namePath:_,value:A}),R&&R.apply(void 0,P)};var L=EC(x||[]);return L.forEach(function(A){var I=D[A];D[A]=function(){I&&I.apply(void 0,arguments);var P=o.props.rules;P&&P.length&&E({type:"validateField",namePath:_,triggerName:A})}}),D}),i.fieldContext){var s=i.fieldContext.getInternalHooks,a=s(nu),l=a.initEntityValue;l(nn(o))}return o}return jr(r,[{key:"componentDidMount",value:function(){var o=this.props,s=o.shouldUpdate,a=o.fieldContext;if(this.mounted=!0,a){var l=a.getInternalHooks,c=l(nu),u=c.registerField;this.cancelRegisterFunc=u(this)}s===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var o=this.state.resetCount,s=this.props.children,a=this.getOnlyChild(s),l=a.child,c=a.isFunction,u;return c?u=l:b.isValidElement(l)?u=b.cloneElement(l,this.getControlled(l.props)):(eo(!l,"`children` of Field is not validate ReactElement."),u=l),b.createElement(b.Fragment,{key:o},u)}}]),r}(b.Component);ee(tM,"contextType",Cf);ee(tM,"defaultProps",{trigger:"onChange",valuePropName:"value"});function qB(n){var e,r=n.name,i=Cn(n,wX),o=b.useContext(Cf),s=b.useContext(Sy),a=r!==void 0?fr(r):void 0,l=(e=i.isListField)!==null&&e!==void 0?e:!!s,c="keep";return l||(c="_".concat((a||[]).join("_"))),b.createElement(tM,ut({key:c,name:a,isListField:l},i,{fieldContext:o}))}function CX(n){var e=n.name,r=n.initialValue,i=n.children,o=n.rules,s=n.validateTrigger,a=n.isListField,l=b.useContext(Cf),c=b.useContext(Sy),u=b.useRef({keys:[],id:0}),d=u.current,f=b.useMemo(function(){var y=fr(l.prefixName)||[];return[].concat(st(y),st(fr(e)))},[l.prefixName,e]),h=b.useMemo(function(){return re(re({},l),{},{prefixName:f})},[l,f]),p=b.useMemo(function(){return{getKey:function(v){var m=f.length,x=v[m];return[d.keys[x],v.slice(m+1)]}}},[f]);if(typeof i!="function")return eo(!1,"Form.List only accepts function as children."),null;var g=function(v,m,x){var _=x.source;return _==="internal"?!1:v!==m};return b.createElement(Sy.Provider,{value:p},b.createElement(Cf.Provider,{value:h},b.createElement(qB,{name:[],shouldUpdate:g,rules:o,validateTrigger:s,initialValue:r,isList:!0,isListField:a??!!c},function(y,v){var m=y.value,x=m===void 0?[]:m,_=y.onChange,S=l.getFieldValue,w=function(){var M=S(f||[]);return M||[]},C={add:function(M,R){var N=w();R>=0&&R<=N.length?(d.keys=[].concat(st(d.keys.slice(0,R)),[d.id],st(d.keys.slice(R))),_([].concat(st(N.slice(0,R)),[M],st(N.slice(R))))):(d.keys=[].concat(st(d.keys),[d.id]),_([].concat(st(N),[M]))),d.id+=1},remove:function(M){var R=w(),N=new Set(Array.isArray(M)?M:[M]);N.size<=0||(d.keys=d.keys.filter(function(D,L){return!N.has(L)}),_(R.filter(function(D,L){return!N.has(L)})))},move:function(M,R){if(M!==R){var N=w();M<0||M>=N.length||R<0||R>=N.length||(d.keys=FN(d.keys,M,R),_(FN(N,M,R)))}}},E=x||[];return Array.isArray(E)||(E=[]),i(E.map(function(T,M){var R=d.keys[M];return R===void 0&&(d.keys[M]=d.id,R=d.keys[M],d.id+=1),{name:M,key:R,isListField:!0}}),C,v)})))}function EX(n){var e=!1,r=n.length,i=[];return n.length?new Promise(function(o,s){n.forEach(function(a,l){a.catch(function(c){return e=!0,c}).then(function(c){r-=1,i[l]=c,!(r>0)&&(e&&s(i),o(i))})})}):Promise.resolve([])}var XB="__@field_split__";function Gb(n){return n.map(function(e){return"".concat(Rt(e),":").concat(e)}).join(XB)}var Yu=function(){function n(){Hr(this,n),ee(this,"kvs",new Map)}return jr(n,[{key:"set",value:function(r,i){this.kvs.set(Gb(r),i)}},{key:"get",value:function(r){return this.kvs.get(Gb(r))}},{key:"update",value:function(r,i){var o=this.get(r),s=i(o);s?this.set(r,s):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(Gb(r))}},{key:"map",value:function(r){return st(this.kvs.entries()).map(function(i){var o=Ce(i,2),s=o[0],a=o[1],l=s.split(XB);return r({key:l.map(function(c){var u=c.match(/^([^:]*):(.*)$/),d=Ce(u,3),f=d[1],h=d[2];return f==="number"?Number(h):h}),value:a})})}},{key:"toJSON",value:function(){var r={};return this.map(function(i){var o=i.key,s=i.value;return r[o.join(".")]=s,null}),r}}]),n}(),TX=["name"],MX=jr(function n(e){var r=this;Hr(this,n),ee(this,"formHooked",!1),ee(this,"forceRootUpdate",void 0),ee(this,"subscribable",!0),ee(this,"store",{}),ee(this,"fieldEntities",[]),ee(this,"initialValues",{}),ee(this,"callbacks",{}),ee(this,"validateMessages",null),ee(this,"preserve",null),ee(this,"lastValidatePromise",null),ee(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),ee(this,"getInternalHooks",function(i){return i===nu?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(eo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),ee(this,"useSubscribe",function(i){r.subscribable=i}),ee(this,"prevWithoutPreserves",null),ee(this,"setInitialValues",function(i,o){if(r.initialValues=i||{},o){var s,a=Dd(i,r.store);(s=r.prevWithoutPreserves)===null||s===void 0||s.map(function(l){var c=l.key;a=hs(a,c,js(i,c))}),r.prevWithoutPreserves=null,r.updateStore(a)}}),ee(this,"destroyForm",function(i){if(i)r.updateStore({});else{var o=new Yu;r.getFieldEntities(!0).forEach(function(s){r.isMergedPreserve(s.isPreserve())||o.set(s.getNamePath(),!0)}),r.prevWithoutPreserves=o}}),ee(this,"getInitialValue",function(i){var o=js(r.initialValues,i);return i.length?Dd(o):o}),ee(this,"setCallbacks",function(i){r.callbacks=i}),ee(this,"setValidateMessages",function(i){r.validateMessages=i}),ee(this,"setPreserve",function(i){r.preserve=i}),ee(this,"watchList",[]),ee(this,"registerWatch",function(i){return r.watchList.push(i),function(){r.watchList=r.watchList.filter(function(o){return o!==i})}}),ee(this,"notifyWatch",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var o=r.getFieldsValue(),s=r.getFieldsValue(!0);r.watchList.forEach(function(a){a(o,s,i)})}}),ee(this,"timeoutId",null),ee(this,"warningUnhooked",function(){}),ee(this,"updateStore",function(i){r.store=i}),ee(this,"getFieldEntities",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?r.fieldEntities.filter(function(o){return o.getNamePath().length}):r.fieldEntities}),ee(this,"getFieldsMap",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=new Yu;return r.getFieldEntities(i).forEach(function(s){var a=s.getNamePath();o.set(a,s)}),o}),ee(this,"getFieldEntitiesForNamePathList",function(i){if(!i)return r.getFieldEntities(!0);var o=r.getFieldsMap(!0);return i.map(function(s){var a=fr(s);return o.get(a)||{INVALIDATE_NAME_PATH:fr(s)}})}),ee(this,"getFieldsValue",function(i,o){r.warningUnhooked();var s,a,l;if(i===!0||Array.isArray(i)?(s=i,a=o):i&&Rt(i)==="object"&&(l=i.strict,a=i.filter),s===!0&&!a)return r.store;var c=r.getFieldEntitiesForNamePathList(Array.isArray(s)?s:null),u=[];return c.forEach(function(d){var f,h,p="INVALIDATE_NAME_PATH"in d?d.INVALIDATE_NAME_PATH:d.getNamePath();if(l){var g,y;if((g=(y=d).isList)!==null&&g!==void 0&&g.call(y))return}else if(!s&&(f=(h=d).isListField)!==null&&f!==void 0&&f.call(h))return;if(!a)u.push(p);else{var v="getMeta"in d?d.getMeta():null;a(v)&&u.push(p)}}),LN(r.store,u.map(fr))}),ee(this,"getFieldValue",function(i){r.warningUnhooked();var o=fr(i);return js(r.store,o)}),ee(this,"getFieldsError",function(i){r.warningUnhooked();var o=r.getFieldEntitiesForNamePathList(i);return o.map(function(s,a){return s&&!("INVALIDATE_NAME_PATH"in s)?{name:s.getNamePath(),errors:s.getErrors(),warnings:s.getWarnings()}:{name:fr(i[a]),errors:[],warnings:[]}})}),ee(this,"getFieldError",function(i){r.warningUnhooked();var o=fr(i),s=r.getFieldsError([o])[0];return s.errors}),ee(this,"getFieldWarning",function(i){r.warningUnhooked();var o=fr(i),s=r.getFieldsError([o])[0];return s.warnings}),ee(this,"isFieldsTouched",function(){r.warningUnhooked();for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var a=o[0],l=o[1],c,u=!1;o.length===0?c=null:o.length===1?Array.isArray(a)?(c=a.map(fr),u=!1):(c=null,u=a):(c=a.map(fr),u=l);var d=r.getFieldEntities(!0),f=function(v){return v.isFieldTouched()};if(!c)return u?d.every(function(y){return f(y)||y.isList()}):d.some(f);var h=new Yu;c.forEach(function(y){h.set(y,[])}),d.forEach(function(y){var v=y.getNamePath();c.forEach(function(m){m.every(function(x,_){return v[_]===x})&&h.update(m,function(x){return[].concat(st(x),[y])})})});var p=function(v){return v.some(f)},g=h.map(function(y){var v=y.value;return v});return u?g.every(p):g.some(p)}),ee(this,"isFieldTouched",function(i){return r.warningUnhooked(),r.isFieldsTouched([i])}),ee(this,"isFieldsValidating",function(i){r.warningUnhooked();var o=r.getFieldEntities();if(!i)return o.some(function(a){return a.isFieldValidating()});var s=i.map(fr);return o.some(function(a){var l=a.getNamePath();return Qd(s,l)&&a.isFieldValidating()})}),ee(this,"isFieldValidating",function(i){return r.warningUnhooked(),r.isFieldsValidating([i])}),ee(this,"resetWithFieldInitialValue",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=new Yu,s=r.getFieldEntities(!0);s.forEach(function(c){var u=c.props.initialValue,d=c.getNamePath();if(u!==void 0){var f=o.get(d)||new Set;f.add({entity:c,value:u}),o.set(d,f)}});var a=function(u){u.forEach(function(d){var f=d.props.initialValue;if(f!==void 0){var h=d.getNamePath(),p=r.getInitialValue(h);if(p!==void 0)eo(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var g=o.get(h);if(g&&g.size>1)eo(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var y=r.getFieldValue(h),v=d.isListField();!v&&(!i.skipExist||y===void 0)&&r.updateStore(hs(r.store,h,st(g)[0].value))}}}})},l;i.entities?l=i.entities:i.namePathList?(l=[],i.namePathList.forEach(function(c){var u=o.get(c);if(u){var d;(d=l).push.apply(d,st(st(u).map(function(f){return f.entity})))}})):l=s,a(l)}),ee(this,"resetFields",function(i){r.warningUnhooked();var o=r.store;if(!i){r.updateStore(Dd(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(o,null,{type:"reset"}),r.notifyWatch();return}var s=i.map(fr);s.forEach(function(a){var l=r.getInitialValue(a);r.updateStore(hs(r.store,a,l))}),r.resetWithFieldInitialValue({namePathList:s}),r.notifyObservers(o,s,{type:"reset"}),r.notifyWatch(s)}),ee(this,"setFields",function(i){r.warningUnhooked();var o=r.store,s=[];i.forEach(function(a){var l=a.name,c=Cn(a,TX),u=fr(l);s.push(u),"value"in c&&r.updateStore(hs(r.store,u,c.value)),r.notifyObservers(o,[u],{type:"setField",data:a})}),r.notifyWatch(s)}),ee(this,"getFields",function(){var i=r.getFieldEntities(!0),o=i.map(function(s){var a=s.getNamePath(),l=s.getMeta(),c=re(re({},l),{},{name:a,value:r.getFieldValue(a)});return Object.defineProperty(c,"originRCField",{value:!0}),c});return o}),ee(this,"initEntityValue",function(i){var o=i.props.initialValue;if(o!==void 0){var s=i.getNamePath(),a=js(r.store,s);a===void 0&&r.updateStore(hs(r.store,s,o))}}),ee(this,"isMergedPreserve",function(i){var o=i!==void 0?i:r.preserve;return o??!0}),ee(this,"registerField",function(i){r.fieldEntities.push(i);var o=i.getNamePath();if(r.notifyWatch([o]),i.props.initialValue!==void 0){var s=r.store;r.resetWithFieldInitialValue({entities:[i],skipExist:!0}),r.notifyObservers(s,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(a,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(f){return f!==i}),!r.isMergedPreserve(l)&&(!a||c.length>1)){var u=a?void 0:r.getInitialValue(o);if(o.length&&r.getFieldValue(o)!==u&&r.fieldEntities.every(function(f){return!WB(f.getNamePath(),o)})){var d=r.store;r.updateStore(hs(d,o,u,!0)),r.notifyObservers(d,[o],{type:"remove"}),r.triggerDependenciesUpdate(d,o)}}r.notifyWatch([o])}}),ee(this,"dispatch",function(i){switch(i.type){case"updateValue":{var o=i.namePath,s=i.value;r.updateValue(o,s);break}case"validateField":{var a=i.namePath,l=i.triggerName;r.validateFields([a],{triggerName:l});break}}}),ee(this,"notifyObservers",function(i,o,s){if(r.subscribable){var a=re(re({},s),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(l){var c=l.onStoreChange;c(i,o,a)})}else r.forceRootUpdate()}),ee(this,"triggerDependenciesUpdate",function(i,o){var s=r.getDependencyChildrenFields(o);return s.length&&r.validateFields(s),r.notifyObservers(i,s,{type:"dependenciesUpdate",relatedFields:[o].concat(st(s))}),s}),ee(this,"updateValue",function(i,o){var s=fr(i),a=r.store;r.updateStore(hs(r.store,s,o)),r.notifyObservers(a,[s],{type:"valueUpdate",source:"internal"}),r.notifyWatch([s]);var l=r.triggerDependenciesUpdate(a,s),c=r.callbacks.onValuesChange;if(c){var u=LN(r.store,[s]);c(u,r.getFieldsValue())}r.triggerOnFieldsChange([s].concat(st(l)))}),ee(this,"setFieldsValue",function(i){r.warningUnhooked();var o=r.store;if(i){var s=Dd(r.store,i);r.updateStore(s)}r.notifyObservers(o,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),ee(this,"setFieldValue",function(i,o){r.setFields([{name:i,value:o,errors:[],warnings:[]}])}),ee(this,"getDependencyChildrenFields",function(i){var o=new Set,s=[],a=new Yu;r.getFieldEntities().forEach(function(c){var u=c.props.dependencies;(u||[]).forEach(function(d){var f=fr(d);a.update(f,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(c),h})})});var l=function c(u){var d=a.get(u)||new Set;d.forEach(function(f){if(!o.has(f)){o.add(f);var h=f.getNamePath();f.isFieldDirty()&&h.length&&(s.push(h),c(h))}})};return l(i),s}),ee(this,"triggerOnFieldsChange",function(i,o){var s=r.callbacks.onFieldsChange;if(s){var a=r.getFields();if(o){var l=new Yu;o.forEach(function(u){var d=u.name,f=u.errors;l.set(d,f)}),a.forEach(function(u){u.errors=l.get(u.name)||u.errors})}var c=a.filter(function(u){var d=u.name;return Qd(i,d)});c.length&&s(c,a)}}),ee(this,"validateFields",function(i,o){r.warningUnhooked();var s,a;Array.isArray(i)||typeof i=="string"||typeof o=="string"?(s=i,a=o):a=i;var l=!!s,c=l?s.map(fr):[],u=[],d=String(Date.now()),f=new Set,h=a||{},p=h.recursive,g=h.dirty;r.getFieldEntities(!0).forEach(function(x){if(l||c.push(x.getNamePath()),!(!x.props.rules||!x.props.rules.length)&&!(g&&!x.isFieldDirty())){var _=x.getNamePath();if(f.add(_.join(d)),!l||Qd(c,_,p)){var S=x.validateRules(re({validateMessages:re(re({},jB),r.validateMessages)},a));u.push(S.then(function(){return{name:_,errors:[],warnings:[]}}).catch(function(w){var C,E=[],T=[];return(C=w.forEach)===null||C===void 0||C.call(w,function(M){var R=M.rule.warningOnly,N=M.errors;R?T.push.apply(T,st(N)):E.push.apply(E,st(N))}),E.length?Promise.reject({name:_,errors:E,warnings:T}):{name:_,errors:E,warnings:T}}))}}});var y=EX(u);r.lastValidatePromise=y,y.catch(function(x){return x}).then(function(x){var _=x.map(function(S){var w=S.name;return w});r.notifyObservers(r.store,_,{type:"validateFinish"}),r.triggerOnFieldsChange(_,x)});var v=y.then(function(){return r.lastValidatePromise===y?Promise.resolve(r.getFieldsValue(c)):Promise.reject([])}).catch(function(x){var _=x.filter(function(S){return S&&S.errors.length});return Promise.reject({values:r.getFieldsValue(c),errorFields:_,outOfDate:r.lastValidatePromise!==y})});v.catch(function(x){return x});var m=c.filter(function(x){return f.has(x.join(d))});return r.triggerOnFieldsChange(m),v}),ee(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(i){var o=r.callbacks.onFinish;if(o)try{o(i)}catch(s){console.error(s)}}).catch(function(i){var o=r.callbacks.onFinishFailed;o&&o(i)})}),this.forceRootUpdate=e});function KB(n){var e=b.useRef(),r=b.useState({}),i=Ce(r,2),o=i[1];if(!e.current)if(n)e.current=n;else{var s=function(){o({})},a=new MX(s);e.current=a.getForm()}return[e.current]}var IC=b.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),RX=function(e){var r=e.validateMessages,i=e.onFormChange,o=e.onFormFinish,s=e.children,a=b.useContext(IC),l=b.useRef({});return b.createElement(IC.Provider,{value:re(re({},a),{},{validateMessages:re(re({},a.validateMessages),r),triggerFormChange:function(u,d){i&&i(u,{changedFields:d,forms:l.current}),a.triggerFormChange(u,d)},triggerFormFinish:function(u,d){o&&o(u,{values:d,forms:l.current}),a.triggerFormFinish(u,d)},registerForm:function(u,d){u&&(l.current=re(re({},l.current),{},ee({},u,d))),a.registerForm(u,d)},unregisterForm:function(u){var d=re({},l.current);delete d[u],l.current=d,a.unregisterForm(u)}})},s)},AX=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],NX=function(e,r){var i=e.name,o=e.initialValues,s=e.fields,a=e.form,l=e.preserve,c=e.children,u=e.component,d=u===void 0?"form":u,f=e.validateMessages,h=e.validateTrigger,p=h===void 0?"onChange":h,g=e.onValuesChange,y=e.onFieldsChange,v=e.onFinish,m=e.onFinishFailed,x=e.clearOnDestroy,_=Cn(e,AX),S=b.useRef(null),w=b.useContext(IC),C=KB(a),E=Ce(C,1),T=E[0],M=T.getInternalHooks(nu),R=M.useSubscribe,N=M.setInitialValues,D=M.setCallbacks,L=M.setValidateMessages,A=M.setPreserve,I=M.destroyForm;b.useImperativeHandle(r,function(){return re(re({},T),{},{nativeElement:S.current})}),b.useEffect(function(){return w.registerForm(i,T),function(){w.unregisterForm(i)}},[w,T,i]),L(re(re({},w.validateMessages),f)),D({onValuesChange:g,onFieldsChange:function(z){if(w.triggerFormChange(i,z),y){for(var j=arguments.length,X=new Array(j>1?j-1:0),Q=1;Q<j;Q++)X[Q-1]=arguments[Q];y.apply(void 0,[z].concat(X))}},onFinish:function(z){w.triggerFormFinish(i,z),v&&v(z)},onFinishFailed:m}),A(l);var P=b.useRef(null);N(o,!P.current),P.current||(P.current=!0),b.useEffect(function(){return function(){return I(x)}},[]);var F,O=typeof c=="function";if(O){var V=T.getFieldsValue(!0);F=c(V,T)}else F=c;R(!O);var U=b.useRef();b.useEffect(function(){bX(U.current||[],s||[])||T.setFields(s||[]),U.current=s},[s,T]);var k=b.useMemo(function(){return re(re({},T),{},{validateTrigger:p})},[T,p]),W=b.createElement(Sy.Provider,{value:null},b.createElement(Cf.Provider,{value:k},F));return d===!1?W:b.createElement(d,ut({},_,{ref:S,onSubmit:function(z){z.preventDefault(),z.stopPropagation(),T.submit()},onReset:function(z){var j;z.preventDefault(),T.resetFields(),(j=_.onReset)===null||j===void 0||j.call(_,z)}}),W)};function UN(n){try{return JSON.stringify(n)}catch{return Math.random()}}function PX(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=e[0],o=e[1],s=o===void 0?{}:o,a=$q(s)?{form:s}:s,l=a.form,c=b.useState(),u=Ce(c,2),d=u[0],f=u[1],h=b.useMemo(function(){return UN(d)},[d]),p=b.useRef(h);p.current=h;var g=b.useContext(Cf),y=l||g,v=y&&y._init,m=fr(i),x=b.useRef(m);return x.current=m,b.useEffect(function(){if(v){var _=y.getFieldsValue,S=y.getInternalHooks,w=S(nu),C=w.registerWatch,E=function(N,D){var L=a.preserve?D:N;return typeof i=="function"?i(L):js(L,x.current)},T=C(function(R,N){var D=E(R,N),L=UN(D);p.current!==L&&(p.current=L,f(D))}),M=E(_(),_(!0));return d!==M&&f(M),T}},[v]),d}var OX=b.forwardRef(NX),ug=OX;ug.FormProvider=RX;ug.Field=qB;ug.List=CX;ug.useForm=KB;ug.useWatch=PX;const tl=b.createContext({}),IX=n=>{let{children:e,status:r,override:i}=n;const o=b.useContext(tl),s=b.useMemo(()=>{const a=Object.assign({},o);return i&&delete a.isFormItemInput,r&&(delete a.status,delete a.hasFeedback,delete a.feedbackIcon),a},[r,i,o]);return b.createElement(tl.Provider,{value:s},e)},DX=b.createContext(void 0),Cy=n=>{const{space:e,form:r,children:i}=n;if(i==null)return null;let o=i;return r&&(o=se.createElement(IX,{override:!0,status:!0},o)),e&&(o=se.createElement(t7,null,o)),o};function BN(n){if(n)return{closable:n.closable,closeIcon:n.closeIcon}}function $N(n){const{closable:e,closeIcon:r}=n||{};return se.useMemo(()=>{if(!e&&(e===!1||r===!1||r===null))return!1;if(e===void 0&&r===void 0)return null;let i={closeIcon:typeof r!="boolean"&&r!==null?r:void 0};return e&&typeof e=="object"&&(i=Object.assign(Object.assign({},i),e)),i},[e,r])}function zN(){const n={};for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(o=>{o&&Object.keys(o).forEach(s=>{o[s]!==void 0&&(n[s]=o[s])})}),n}const LX={};function FX(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:LX;const i=$N(n),o=$N(e),s=typeof i!="boolean"?!!(i!=null&&i.disabled):!1,a=se.useMemo(()=>Object.assign({closeIcon:se.createElement(og,null)},r),[r]),l=se.useMemo(()=>i===!1?!1:i?zN(a,o,i):o===!1?!1:o?zN(a,o):a.closable?a:!1,[i,o,a]);return se.useMemo(()=>{if(l===!1)return[!1,null,s];const{closeIconRender:c}=a,{closeIcon:u}=l;let d=u;if(d!=null){c&&(d=c(u));const f=ta(l,!0);Object.keys(f).length&&(d=se.isValidElement(d)?se.cloneElement(d,f):se.createElement("span",Object.assign({},f),d))}return[!0,d,s]},[l,a])}var YB=function(e){if(vi()&&window.document.documentElement){var r=Array.isArray(e)?e:[e],i=window.document.documentElement;return r.some(function(o){return o in i.style})}return!1},UX=function(e,r){if(!YB(e))return!1;var i=document.createElement("div"),o=i.style[e];return i.style[e]=r,i.style[e]!==o};function kN(n,e){return!Array.isArray(n)&&e!==void 0?UX(n,e):YB(n)}const BX=()=>vi()&&window.document.documentElement,e_=n=>{const{prefixCls:e,className:r,style:i,size:o,shape:s}=n,a=_e({[`${e}-lg`]:o==="large",[`${e}-sm`]:o==="small"}),l=_e({[`${e}-circle`]:s==="circle",[`${e}-square`]:s==="square",[`${e}-round`]:s==="round"}),c=b.useMemo(()=>typeof o=="number"?{width:o,height:o,lineHeight:`${o}px`}:{},[o]);return b.createElement("span",{className:_e(e,a,l,r),style:Object.assign(Object.assign({},c),i)})},$X=new hn("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),t_=n=>({height:n,lineHeight:De(n)}),Zd=n=>Object.assign({width:n},t_(n)),zX=n=>({background:n.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:$X,animationDuration:n.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),Hb=(n,e)=>Object.assign({width:e(n).mul(5).equal(),minWidth:e(n).mul(5).equal()},t_(n)),kX=n=>{const{skeletonAvatarCls:e,gradientFromColor:r,controlHeight:i,controlHeightLG:o,controlHeightSM:s}=n;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:r},Zd(i)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},Zd(o)),[`${e}${e}-sm`]:Object.assign({},Zd(s))}},VX=n=>{const{controlHeight:e,borderRadiusSM:r,skeletonInputCls:i,controlHeightLG:o,controlHeightSM:s,gradientFromColor:a,calc:l}=n;return{[i]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:r},Hb(e,l)),[`${i}-lg`]:Object.assign({},Hb(o,l)),[`${i}-sm`]:Object.assign({},Hb(s,l))}},VN=n=>Object.assign({width:n},t_(n)),GX=n=>{const{skeletonImageCls:e,imageSizeBase:r,gradientFromColor:i,borderRadiusSM:o,calc:s}=n;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:i,borderRadius:o},VN(s(r).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},VN(r)),{maxWidth:s(r).mul(4).equal(),maxHeight:s(r).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},jb=(n,e,r)=>{const{skeletonButtonCls:i}=n;return{[`${r}${i}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${r}${i}-round`]:{borderRadius:e}}},Wb=(n,e)=>Object.assign({width:e(n).mul(2).equal(),minWidth:e(n).mul(2).equal()},t_(n)),HX=n=>{const{borderRadiusSM:e,skeletonButtonCls:r,controlHeight:i,controlHeightLG:o,controlHeightSM:s,gradientFromColor:a,calc:l}=n;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:e,width:l(i).mul(2).equal(),minWidth:l(i).mul(2).equal()},Wb(i,l))},jb(n,i,r)),{[`${r}-lg`]:Object.assign({},Wb(o,l))}),jb(n,o,`${r}-lg`)),{[`${r}-sm`]:Object.assign({},Wb(s,l))}),jb(n,s,`${r}-sm`))},jX=n=>{const{componentCls:e,skeletonAvatarCls:r,skeletonTitleCls:i,skeletonParagraphCls:o,skeletonButtonCls:s,skeletonInputCls:a,skeletonImageCls:l,controlHeight:c,controlHeightLG:u,controlHeightSM:d,gradientFromColor:f,padding:h,marginSM:p,borderRadius:g,titleHeight:y,blockRadius:v,paragraphLiHeight:m,controlHeightXS:x,paragraphMarginTop:_}=n;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:h,verticalAlign:"top",[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:f},Zd(c)),[`${r}-circle`]:{borderRadius:"50%"},[`${r}-lg`]:Object.assign({},Zd(u)),[`${r}-sm`]:Object.assign({},Zd(d))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[i]:{width:"100%",height:y,background:f,borderRadius:v,[`+ ${o}`]:{marginBlockStart:d}},[o]:{padding:0,"> li":{width:"100%",height:m,listStyle:"none",background:f,borderRadius:v,"+ li":{marginBlockStart:x}}},[`${o}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${i}, ${o} > li`]:{borderRadius:g}}},[`${e}-with-avatar ${e}-content`]:{[i]:{marginBlockStart:p,[`+ ${o}`]:{marginBlockStart:_}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},HX(n)),kX(n)),VX(n)),GX(n)),[`${e}${e}-block`]:{width:"100%",[s]:{width:"100%"},[a]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${i},
        ${o} > li,
        ${r},
        ${s},
        ${a},
        ${l}
      `]:Object.assign({},zX(n))}}},WX=n=>{const{colorFillContent:e,colorFill:r}=n,i=e,o=r;return{color:i,colorGradientEnd:o,gradientFromColor:i,gradientToColor:o,titleHeight:n.controlHeight/2,blockRadius:n.borderRadiusSM,paragraphMarginTop:n.marginLG+n.marginXXS,paragraphLiHeight:n.controlHeight/2}},rh=ai("Skeleton",n=>{const{componentCls:e,calc:r}=n,i=Un(n,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:r(n.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${n.gradientFromColor} 25%, ${n.gradientToColor} 37%, ${n.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[jX(i)]},WX,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),qX=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,shape:s="circle",size:a="default"}=n,{getPrefixCls:l}=b.useContext($t),c=l("skeleton",e),[u,d,f]=rh(c),h=ua(n,["prefixCls","className"]),p=_e(c,`${c}-element`,{[`${c}-active`]:o},r,i,d,f);return u(b.createElement("div",{className:p},b.createElement(e_,Object.assign({prefixCls:`${c}-avatar`,shape:s,size:a},h))))},XX=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,block:s=!1,size:a="default"}=n,{getPrefixCls:l}=b.useContext($t),c=l("skeleton",e),[u,d,f]=rh(c),h=ua(n,["prefixCls"]),p=_e(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:s},r,i,d,f);return u(b.createElement("div",{className:p},b.createElement(e_,Object.assign({prefixCls:`${c}-button`,size:a},h))))},KX="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",YX=n=>{const{prefixCls:e,className:r,rootClassName:i,style:o,active:s}=n,{getPrefixCls:a}=b.useContext($t),l=a("skeleton",e),[c,u,d]=rh(l),f=_e(l,`${l}-element`,{[`${l}-active`]:s},r,i,u,d);return c(b.createElement("div",{className:f},b.createElement("div",{className:_e(`${l}-image`,r),style:o},b.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},b.createElement("title",null,"Image placeholder"),b.createElement("path",{d:KX,className:`${l}-image-path`})))))},QX=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,block:s,size:a="default"}=n,{getPrefixCls:l}=b.useContext($t),c=l("skeleton",e),[u,d,f]=rh(c),h=ua(n,["prefixCls"]),p=_e(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:s},r,i,d,f);return u(b.createElement("div",{className:p},b.createElement(e_,Object.assign({prefixCls:`${c}-input`,size:a},h))))},ZX=n=>{const{prefixCls:e,className:r,rootClassName:i,style:o,active:s,children:a}=n,{getPrefixCls:l}=b.useContext($t),c=l("skeleton",e),[u,d,f]=rh(c),h=_e(c,`${c}-element`,{[`${c}-active`]:s},d,r,i,f);return u(b.createElement("div",{className:h},b.createElement("div",{className:_e(`${c}-image`,r),style:o},a)))},JX=(n,e)=>{const{width:r,rows:i=2}=e;if(Array.isArray(r))return r[n];if(i-1===n)return r},eK=n=>{const{prefixCls:e,className:r,style:i,rows:o}=n,s=st(new Array(o)).map((a,l)=>b.createElement("li",{key:l,style:{width:JX(l,n)}}));return b.createElement("ul",{className:_e(e,r),style:i},s)},tK=n=>{let{prefixCls:e,className:r,width:i,style:o}=n;return b.createElement("h3",{className:_e(e,r),style:Object.assign({width:i},o)})};function qb(n){return n&&typeof n=="object"?n:{}}function nK(n,e){return n&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function rK(n,e){return!n&&e?{width:"38%"}:n&&e?{width:"50%"}:{}}function iK(n,e){const r={};return(!n||!e)&&(r.width="61%"),!n&&e?r.rows=3:r.rows=2,r}const ih=n=>{const{prefixCls:e,loading:r,className:i,rootClassName:o,style:s,children:a,avatar:l=!1,title:c=!0,paragraph:u=!0,active:d,round:f}=n,{getPrefixCls:h,direction:p,skeleton:g}=b.useContext($t),y=h("skeleton",e),[v,m,x]=rh(y);if(r||!("loading"in n)){const _=!!l,S=!!c,w=!!u;let C;if(_){const M=Object.assign(Object.assign({prefixCls:`${y}-avatar`},nK(S,w)),qb(l));C=b.createElement("div",{className:`${y}-header`},b.createElement(e_,Object.assign({},M)))}let E;if(S||w){let M;if(S){const N=Object.assign(Object.assign({prefixCls:`${y}-title`},rK(_,w)),qb(c));M=b.createElement(tK,Object.assign({},N))}let R;if(w){const N=Object.assign(Object.assign({prefixCls:`${y}-paragraph`},iK(_,S)),qb(u));R=b.createElement(eK,Object.assign({},N))}E=b.createElement("div",{className:`${y}-content`},M,R)}const T=_e(y,{[`${y}-with-avatar`]:_,[`${y}-active`]:d,[`${y}-rtl`]:p==="rtl",[`${y}-round`]:f},g==null?void 0:g.className,i,o,m,x);return v(b.createElement("div",{className:T,style:Object.assign(Object.assign({},g==null?void 0:g.style),s)},C,E))}return a??null};ih.Button=XX;ih.Avatar=qX;ih.Input=QX;ih.Image=YX;ih.Node=ZX;function GN(){}const oK=b.createContext({add:GN,remove:GN});function sK(n){const e=b.useContext(oK),r=b.useRef(null);return Sr(o=>{if(o){const s=n?o.querySelector(n):o;e.add(s),r.current=s}else e.remove(r.current)})}const HN=()=>{const{cancelButtonProps:n,cancelTextLocale:e,onCancel:r}=b.useContext(lg);return se.createElement(Fu,Object.assign({onClick:r},n),e)},jN=()=>{const{confirmLoading:n,okButtonProps:e,okType:r,okTextLocale:i,onOk:o}=b.useContext(lg);return se.createElement(Fu,Object.assign({},MB(r),{loading:n,onClick:o},e),i)};function QB(n,e){return se.createElement("span",{className:`${n}-close-x`},e||se.createElement(og,{className:`${n}-close-icon`}))}const ZB=n=>{const{okText:e,okType:r="primary",cancelText:i,confirmLoading:o,onOk:s,onCancel:a,okButtonProps:l,cancelButtonProps:c,footer:u}=n,[d]=_c("Modal",NU()),f=e||(d==null?void 0:d.okText),h=i||(d==null?void 0:d.cancelText),p={confirmLoading:o,okButtonProps:l,cancelButtonProps:c,okTextLocale:f,cancelTextLocale:h,okType:r,onOk:s,onCancel:a},g=se.useMemo(()=>p,st(Object.values(p)));let y;return typeof u=="function"||typeof u>"u"?(y=se.createElement(se.Fragment,null,se.createElement(HN,null),se.createElement(jN,null)),typeof u=="function"&&(y=u(y,{OkBtn:jN,CancelBtn:HN})),y=se.createElement(UB,{value:g},y)):y=u,se.createElement(FU,{disabled:!1},y)},aK=n=>{const{componentCls:e}=n;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},lK=n=>{const{componentCls:e}=n;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},cK=(n,e)=>{const{prefixCls:r,componentCls:i,gridColumns:o}=n,s={};for(let a=o;a>=0;a--)a===0?(s[`${i}${e}-${a}`]={display:"none"},s[`${i}-push-${a}`]={insetInlineStart:"auto"},s[`${i}-pull-${a}`]={insetInlineEnd:"auto"},s[`${i}${e}-push-${a}`]={insetInlineStart:"auto"},s[`${i}${e}-pull-${a}`]={insetInlineEnd:"auto"},s[`${i}${e}-offset-${a}`]={marginInlineStart:0},s[`${i}${e}-order-${a}`]={order:0}):(s[`${i}${e}-${a}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${a/o*100}%`,maxWidth:`${a/o*100}%`}],s[`${i}${e}-push-${a}`]={insetInlineStart:`${a/o*100}%`},s[`${i}${e}-pull-${a}`]={insetInlineEnd:`${a/o*100}%`},s[`${i}${e}-offset-${a}`]={marginInlineStart:`${a/o*100}%`},s[`${i}${e}-order-${a}`]={order:a});return s[`${i}${e}-flex`]={flex:`var(--${r}${e}-flex)`},s},DC=(n,e)=>cK(n,e),uK=(n,e,r)=>({[`@media (min-width: ${De(e)})`]:Object.assign({},DC(n,r))}),dK=()=>({}),fK=()=>({}),hK=ai("Grid",aK,dK),JB=n=>({xs:n.screenXSMin,sm:n.screenSMMin,md:n.screenMDMin,lg:n.screenLGMin,xl:n.screenXLMin,xxl:n.screenXXLMin}),pK=ai("Grid",n=>{const e=Un(n,{gridColumns:24}),r=JB(e);return delete r.xs,[lK(e),DC(e,""),DC(e,"-xs"),Object.keys(r).map(i=>uK(e,r[i],`-${i}`)).reduce((i,o)=>Object.assign(Object.assign({},i),o),{})]},fK);function WN(n){return{position:n,inset:0}}const mK=n=>{const{componentCls:e,antCls:r}=n;return[{[`${e}-root`]:{[`${e}${r}-zoom-enter, ${e}${r}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:n.motionDurationSlow,userSelect:"none"},[`${e}${r}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},WN("fixed")),{zIndex:n.zIndexPopupBase,height:"100%",backgroundColor:n.colorBgMask,pointerEvents:"none",[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},WN("fixed")),{zIndex:n.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:w7(n)}]},gK=n=>{const{componentCls:e}=n;return[{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${n.screenSMMax}px)`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${De(n.marginXS)} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},ns(n)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${De(n.calc(n.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:n.paddingLG,[`${e}-title`]:{margin:0,color:n.titleColor,fontWeight:n.fontWeightStrong,fontSize:n.titleFontSize,lineHeight:n.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:n.contentBg,backgroundClip:"padding-box",border:0,borderRadius:n.borderRadiusLG,boxShadow:n.boxShadow,pointerEvents:"auto",padding:n.contentPadding},[`${e}-close`]:Object.assign({position:"absolute",top:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),insetInlineEnd:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),zIndex:n.calc(n.zIndexPopupBase).add(10).equal(),padding:0,color:n.modalCloseIconColor,fontWeight:n.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:n.borderRadiusSM,width:n.modalCloseBtnSize,height:n.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${n.motionDurationMid}, background-color ${n.motionDurationMid}`,"&-x":{display:"flex",fontSize:n.fontSizeLG,fontStyle:"normal",lineHeight:De(n.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:n.modalCloseIconHoverColor,backgroundColor:n.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:n.colorBgTextActive}},ig(n)),[`${e}-header`]:{color:n.colorText,background:n.headerBg,borderRadius:`${De(n.borderRadiusLG)} ${De(n.borderRadiusLG)} 0 0`,marginBottom:n.headerMarginBottom,padding:n.headerPadding,borderBottom:n.headerBorderBottom},[`${e}-body`]:{fontSize:n.fontSize,lineHeight:n.lineHeight,wordWrap:"break-word",padding:n.bodyPadding,[`${e}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${De(n.margin)} auto`}},[`${e}-footer`]:{textAlign:"end",background:n.footerBg,marginTop:n.footerMarginTop,padding:n.footerPadding,borderTop:n.footerBorderTop,borderRadius:n.footerBorderRadius,[`> ${n.antCls}-btn + ${n.antCls}-btn`]:{marginInlineStart:n.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,
          ${e}-body,
          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},vK=n=>{const{componentCls:e}=n;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},yK=n=>{const{componentCls:e}=n,r=JB(n);delete r.xs;const i=Object.keys(r).map(o=>({[`@media (min-width: ${De(r[o])})`]:{width:`var(--${e.replace(".","")}-${o}-width)`}}));return{[`${e}-root`]:{[e]:[{width:`var(--${e.replace(".","")}-xs-width)`}].concat(st(i))}}},e$=n=>{const e=n.padding,r=n.fontSizeHeading5,i=n.lineHeightHeading5;return Un(n,{modalHeaderHeight:n.calc(n.calc(i).mul(r).equal()).add(n.calc(e).mul(2).equal()).equal(),modalFooterBorderColorSplit:n.colorSplit,modalFooterBorderStyle:n.lineType,modalFooterBorderWidth:n.lineWidth,modalCloseIconColor:n.colorIcon,modalCloseIconHoverColor:n.colorIconHover,modalCloseBtnSize:n.controlHeight,modalConfirmIconSize:n.fontHeight,modalTitleHeight:n.calc(n.titleFontSize).mul(n.titleLineHeight).equal()})},t$=n=>({footerBg:"transparent",headerBg:n.colorBgElevated,titleLineHeight:n.lineHeightHeading5,titleFontSize:n.fontSizeHeading5,contentBg:n.colorBgElevated,titleColor:n.colorTextHeading,contentPadding:n.wireframe?0:`${De(n.paddingMD)} ${De(n.paddingContentHorizontalLG)}`,headerPadding:n.wireframe?`${De(n.padding)} ${De(n.paddingLG)}`:0,headerBorderBottom:n.wireframe?`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",headerMarginBottom:n.wireframe?0:n.marginXS,bodyPadding:n.wireframe?n.paddingLG:0,footerPadding:n.wireframe?`${De(n.paddingXS)} ${De(n.padding)}`:0,footerBorderTop:n.wireframe?`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",footerBorderRadius:n.wireframe?`0 0 ${De(n.borderRadiusLG)} ${De(n.borderRadiusLG)}`:0,footerMarginTop:n.wireframe?0:n.marginSM,confirmBodyPadding:n.wireframe?`${De(n.padding*2)} ${De(n.padding*2)} ${De(n.paddingLG)}`:0,confirmIconMarginInlineEnd:n.wireframe?n.margin:n.marginSM,confirmBtnsMarginTop:n.wireframe?n.marginLG:n.marginSM}),n$=ai("Modal",n=>{const e=e$(n);return[gK(e),vK(e),mK(e),OB(e,"zoom"),yK(e)]},t$,{unitless:{titleLineHeight:!0}});var xK=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};let LC;const _K=n=>{LC={x:n.pageX,y:n.pageY},setTimeout(()=>{LC=null},100)};BX()&&document.documentElement.addEventListener("click",_K,!0);const r$=n=>{var e;const{getPopupContainer:r,getPrefixCls:i,direction:o,modal:s}=b.useContext($t),a=X=>{const{onCancel:Q}=n;Q==null||Q(X)},l=X=>{const{onOk:Q}=n;Q==null||Q(X)},{prefixCls:c,className:u,rootClassName:d,open:f,wrapClassName:h,centered:p,getContainer:g,focusTriggerAfterClose:y=!0,style:v,visible:m,width:x=520,footer:_,classNames:S,styles:w,children:C,loading:E}=n,T=xK(n,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),M=i("modal",c),R=i(),N=bc(M),[D,L,A]=n$(M,N),I=_e(h,{[`${M}-centered`]:!!p,[`${M}-wrap-rtl`]:o==="rtl"}),P=_!==null&&!E?b.createElement(ZB,Object.assign({},n,{onOk:l,onCancel:a})):null,[F,O,V]=FX(BN(n),BN(s),{closable:!0,closeIcon:b.createElement(og,{className:`${M}-close-icon`}),closeIconRender:X=>QB(M,X)}),U=sK(`.${M}-content`),[k,W]=XT("Modal",T.zIndex),[J,z]=b.useMemo(()=>x&&typeof x=="object"?[void 0,x]:[x,void 0],[x]),j=b.useMemo(()=>{const X={};return z&&Object.keys(z).forEach(Q=>{const ne=z[Q];ne!==void 0&&(X[`--${M}-${Q}-width`]=typeof ne=="number"?`${ne}px`:ne)}),X},[z]);return D(b.createElement(Cy,{form:!0,space:!0},b.createElement(qT.Provider,{value:W},b.createElement(GB,Object.assign({width:J},T,{zIndex:k,getContainer:g===void 0?r:g,prefixCls:M,rootClassName:_e(L,d,A,N),footer:P,visible:f??m,mousePosition:(e=T.mousePosition)!==null&&e!==void 0?e:LC,onClose:a,closable:F&&{disabled:V,closeIcon:O},closeIcon:O,focusTriggerAfterClose:y,transitionName:wf(R,"zoom",n.transitionName),maskTransitionName:wf(R,"fade",n.maskTransitionName),className:_e(L,u,s==null?void 0:s.className),style:Object.assign(Object.assign(Object.assign({},s==null?void 0:s.style),v),j),classNames:Object.assign(Object.assign(Object.assign({},s==null?void 0:s.classNames),S),{wrapper:_e(I,S==null?void 0:S.wrapper)}),styles:Object.assign(Object.assign({},s==null?void 0:s.styles),w),panelRef:U}),E?b.createElement(ih,{active:!0,title:!1,paragraph:{rows:4},className:`${M}-body-skeleton`}):C))))},bK=n=>{const{componentCls:e,titleFontSize:r,titleLineHeight:i,modalConfirmIconSize:o,fontSize:s,lineHeight:a,modalTitleHeight:l,fontHeight:c,confirmBodyPadding:u}=n,d=`${e}-confirm`;return{[d]:{"&-rtl":{direction:"rtl"},[`${n.antCls}-modal-header`]:{display:"none"},[`${d}-body-wrapper`]:Object.assign({},GU()),[`&${e} ${e}-body`]:{padding:u},[`${d}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:n.confirmIconMarginInlineEnd,marginTop:n.calc(n.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${n.iconCls}`]:{marginTop:n.calc(n.calc(l).sub(o).equal()).div(2).equal()}},[`${d}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:n.marginXS,maxWidth:`calc(100% - ${De(n.marginSM)})`},[`${n.iconCls} + ${d}-paragraph`]:{maxWidth:`calc(100% - ${De(n.calc(n.modalConfirmIconSize).add(n.marginSM).equal())})`},[`${d}-title`]:{color:n.colorTextHeading,fontWeight:n.fontWeightStrong,fontSize:r,lineHeight:i},[`${d}-content`]:{color:n.colorText,fontSize:s,lineHeight:a},[`${d}-btns`]:{textAlign:"end",marginTop:n.confirmBtnsMarginTop,[`${n.antCls}-btn + ${n.antCls}-btn`]:{marginBottom:0,marginInlineStart:n.marginXS}}},[`${d}-error ${d}-body > ${n.iconCls}`]:{color:n.colorError},[`${d}-warning ${d}-body > ${n.iconCls},
        ${d}-confirm ${d}-body > ${n.iconCls}`]:{color:n.colorWarning},[`${d}-info ${d}-body > ${n.iconCls}`]:{color:n.colorInfo},[`${d}-success ${d}-body > ${n.iconCls}`]:{color:n.colorSuccess}}},SK=jT(["Modal","confirm"],n=>{const e=e$(n);return[bK(e)]},t$,{order:-1e3});var wK=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function i$(n){const{prefixCls:e,icon:r,okText:i,cancelText:o,confirmPrefixCls:s,type:a,okCancel:l,footer:c,locale:u}=n,d=wK(n,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=r;if(!r&&r!==null)switch(a){case"info":f=b.createElement(fB,null);break;case"success":f=b.createElement(uB,null);break;case"error":f=b.createElement(Hx,null);break;default:f=b.createElement(dB,null)}const h=l??a==="confirm",p=n.autoFocusButton===null?!1:n.autoFocusButton||"ok",[g]=_c("Modal"),y=u||g,v=i||(h?y==null?void 0:y.okText:y==null?void 0:y.justOkText),m=o||(y==null?void 0:y.cancelText),x=Object.assign({autoFocusButton:p,cancelTextLocale:m,okTextLocale:v,mergedOkCancel:h},d),_=b.useMemo(()=>x,st(Object.values(x))),S=b.createElement(b.Fragment,null,b.createElement(xN,null),b.createElement(_N,null)),w=n.title!==void 0&&n.title!==null,C=`${s}-body`;return b.createElement("div",{className:`${s}-body-wrapper`},b.createElement("div",{className:_e(C,{[`${C}-has-title`]:w})},f,b.createElement("div",{className:`${s}-paragraph`},w&&b.createElement("span",{className:`${s}-title`},n.title),b.createElement("div",{className:`${s}-content`},n.content))),c===void 0||typeof c=="function"?b.createElement(UB,{value:_},b.createElement("div",{className:`${s}-btns`},typeof c=="function"?c(S,{OkBtn:_N,CancelBtn:xN}):S)):c,b.createElement(SK,{prefixCls:e}))}const CK=n=>{const{close:e,zIndex:r,maskStyle:i,direction:o,prefixCls:s,wrapClassName:a,rootPrefixCls:l,bodyStyle:c,closable:u=!1,onConfirm:d,styles:f}=n,h=`${s}-confirm`,p=n.width||416,g=n.style||{},y=n.mask===void 0?!0:n.mask,v=n.maskClosable===void 0?!1:n.maskClosable,m=_e(h,`${h}-${n.type}`,{[`${h}-rtl`]:o==="rtl"},n.className),[,x]=io(),_=b.useMemo(()=>r!==void 0?r:x.zIndexPopupBase+gB,[r,x]);return b.createElement(r$,Object.assign({},n,{className:m,wrapClassName:_e({[`${h}-centered`]:!!n.centered},a),onCancel:()=>{e==null||e({triggerCancel:!0}),d==null||d(!1)},title:"",footer:null,transitionName:wf(l||"","zoom",n.transitionName),maskTransitionName:wf(l||"","fade",n.maskTransitionName),mask:y,maskClosable:v,style:g,styles:Object.assign({body:c,mask:i},f),width:p,zIndex:_,closable:u}),b.createElement(i$,Object.assign({},n,{confirmPrefixCls:h})))},o$=n=>{const{rootPrefixCls:e,iconPrefixCls:r,direction:i,theme:o}=n;return b.createElement(cl,{prefixCls:e,iconPrefixCls:r,direction:i,theme:o},b.createElement(CK,Object.assign({},n)))},ru=[];let s$="";function a$(){return s$}const EK=n=>{var e,r;const{prefixCls:i,getContainer:o,direction:s}=n,a=NU(),l=b.useContext($t),c=a$()||l.getPrefixCls(),u=i||`${c}-modal`;let d=o;return d===!1&&(d=void 0),se.createElement(o$,Object.assign({},n,{rootPrefixCls:c,prefixCls:u,iconPrefixCls:l.iconPrefixCls,theme:l.theme,direction:s??l.direction,locale:(r=(e=l.locale)===null||e===void 0?void 0:e.Modal)!==null&&r!==void 0?r:a,getContainer:d}))};function dg(n){const e=oB(),r=document.createDocumentFragment();let i=Object.assign(Object.assign({},n),{close:c,open:!0}),o,s;function a(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];if(h.some(v=>v==null?void 0:v.triggerCancel)){var y;(d=n.onCancel)===null||d===void 0||(y=d).call.apply(y,[n,()=>{}].concat(st(h.slice(1))))}for(let v=0;v<ru.length;v++)if(ru[v]===c){ru.splice(v,1);break}s()}function l(d){clearTimeout(o),o=setTimeout(()=>{const f=e.getPrefixCls(void 0,a$()),h=e.getIconPrefixCls(),p=e.getTheme(),g=se.createElement(EK,Object.assign({},d));s=YT()(se.createElement(cl,{prefixCls:f,iconPrefixCls:h,theme:p},e.holderRender?e.holderRender(g):g),r)})}function c(){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];i=Object.assign(Object.assign({},i),{open:!1,afterClose:()=>{typeof n.afterClose=="function"&&n.afterClose(),a.apply(this,f)}}),i.visible&&delete i.visible,l(i)}function u(d){typeof d=="function"?i=d(i):i=Object.assign(Object.assign({},i),d),l(i)}return l(i),ru.push(c),{destroy:c,update:u}}function l$(n){return Object.assign(Object.assign({},n),{type:"warning"})}function c$(n){return Object.assign(Object.assign({},n),{type:"info"})}function u$(n){return Object.assign(Object.assign({},n),{type:"success"})}function d$(n){return Object.assign(Object.assign({},n),{type:"error"})}function f$(n){return Object.assign(Object.assign({},n),{type:"confirm"})}function TK(n){let{rootPrefixCls:e}=n;s$=e}var MK=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const RK=(n,e)=>{var r,{afterClose:i,config:o}=n,s=MK(n,["afterClose","config"]);const[a,l]=b.useState(!0),[c,u]=b.useState(o),{direction:d,getPrefixCls:f}=b.useContext($t),h=f("modal"),p=f(),g=()=>{var x;i(),(x=c.afterClose)===null||x===void 0||x.call(c)},y=function(){var x;l(!1);for(var _=arguments.length,S=new Array(_),w=0;w<_;w++)S[w]=arguments[w];if(S.some(T=>T==null?void 0:T.triggerCancel)){var E;(x=c.onCancel)===null||x===void 0||(E=x).call.apply(E,[c,()=>{}].concat(st(S.slice(1))))}};b.useImperativeHandle(e,()=>({destroy:y,update:x=>{u(_=>Object.assign(Object.assign({},_),x))}}));const v=(r=c.okCancel)!==null&&r!==void 0?r:c.type==="confirm",[m]=_c("Modal",_u.Modal);return b.createElement(o$,Object.assign({prefixCls:h,rootPrefixCls:p},c,{close:y,open:a,afterClose:g,okText:c.okText||(v?m==null?void 0:m.okText:m==null?void 0:m.justOkText),direction:c.direction||d,cancelText:c.cancelText||(m==null?void 0:m.cancelText)},s))},AK=b.forwardRef(RK);let qN=0;const NK=b.memo(b.forwardRef((n,e)=>{const[r,i]=D9();return b.useImperativeHandle(e,()=>({patchElement:i}),[]),b.createElement(b.Fragment,null,r)}));function PK(){const n=b.useRef(null),[e,r]=b.useState([]);b.useEffect(()=>{e.length&&(st(e).forEach(a=>{a()}),r([]))},[e]);const i=b.useCallback(s=>function(l){var c;qN+=1;const u=b.createRef();let d;const f=new Promise(v=>{d=v});let h=!1,p;const g=b.createElement(AK,{key:`modal-${qN}`,config:s(l),ref:u,afterClose:()=>{p==null||p()},isSilent:()=>h,onConfirm:v=>{d(v)}});return p=(c=n.current)===null||c===void 0?void 0:c.patchElement(g),p&&ru.push(p),{destroy:()=>{function v(){var m;(m=u.current)===null||m===void 0||m.destroy()}u.current?v():r(m=>[].concat(st(m),[v]))},update:v=>{function m(){var x;(x=u.current)===null||x===void 0||x.update(v)}u.current?m():r(x=>[].concat(st(x),[m]))},then:v=>(h=!0,f.then(v))}},[]);return[b.useMemo(()=>({info:i(c$),success:i(u$),error:i(d$),warning:i(l$),confirm:i(f$)}),[]),b.createElement(NK,{key:"modal-holder",ref:n})]}const OK=se.createContext({});function h$(n){return e=>b.createElement(cl,{theme:{token:{motion:!1,zIndexPopupBase:0}}},b.createElement(n,Object.assign({},e)))}const IK=(n,e,r,i,o)=>h$(a=>{const{prefixCls:l,style:c}=a,u=b.useRef(null),[d,f]=b.useState(0),[h,p]=b.useState(0),[g,y]=no(!1,{value:a.open}),{getPrefixCls:v}=b.useContext($t),m=v("select",l);b.useEffect(()=>{if(y(!0),typeof ResizeObserver<"u"){const S=new ResizeObserver(C=>{const E=C[0].target;f(E.offsetHeight+8),p(E.offsetWidth)}),w=setInterval(()=>{var C;const E=`.${m}-dropdown`,T=(C=u.current)===null||C===void 0?void 0:C.querySelector(E);T&&(clearInterval(w),S.observe(T))},10);return()=>{clearInterval(w),S.disconnect()}}},[]);let x=Object.assign(Object.assign({},a),{style:Object.assign(Object.assign({},c),{margin:0}),open:g,visible:g,getPopupContainer:()=>u.current});Object.assign(x,{[e]:{overflow:{adjustX:!1,adjustY:!1}}});const _={paddingBottom:d,position:"relative",minWidth:h};return b.createElement("div",{ref:u,style:_},b.createElement(n,Object.assign({},x)))}),p$=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n==null?void 0:n.substr(0,4))};var n_=function(e){var r=e.className,i=e.customizeIcon,o=e.customizeIconProps,s=e.children,a=e.onMouseDown,l=e.onClick,c=typeof i=="function"?i(o):i;return b.createElement("span",{className:r,onMouseDown:function(d){d.preventDefault(),a==null||a(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},c!==void 0?c:b.createElement("span",{className:_e(r.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},s))},DK=function(e,r,i,o,s){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=se.useMemo(function(){if(Rt(o)==="object")return o.clearIcon;if(s)return s},[o,s]),d=se.useMemo(function(){return!!(!a&&o&&(i.length||l)&&!(c==="combobox"&&l===""))},[o,a,i.length,l,c]);return{allowClear:d,clearIcon:se.createElement(n_,{className:"".concat(e,"-clear"),onMouseDown:r,customizeIcon:u},"×")}},m$=b.createContext(null);function LK(){return b.useContext(m$)}function FK(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=b.useState(!1),r=Ce(e,2),i=r[0],o=r[1],s=b.useRef(null),a=function(){window.clearTimeout(s.current)};b.useEffect(function(){return a},[]);var l=function(u,d){a(),s.current=window.setTimeout(function(){o(u),d&&d()},n)};return[i,l,a]}function g$(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=b.useRef(null),r=b.useRef(null);b.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function i(o){(o||e.current===null)&&(e.current=o),window.clearTimeout(r.current),r.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},i]}function UK(n,e,r,i){var o=b.useRef(null);o.current={open:e,triggerOpen:r,customizedTrigger:i},b.useEffect(function(){function s(a){var l;if(!((l=o.current)!==null&&l!==void 0&&l.customizedTrigger)){var c=a.target;c.shadowRoot&&a.composed&&(c=a.composedPath()[0]||c),o.current.open&&n().filter(function(u){return u}).every(function(u){return!u.contains(c)&&u!==c})&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",s),function(){return window.removeEventListener("mousedown",s)}},[])}function BK(n){return n&&![He.ESC,He.SHIFT,He.BACKSPACE,He.TAB,He.WIN_KEY,He.ALT,He.META,He.WIN_KEY_RIGHT,He.CTRL,He.SEMICOLON,He.EQUALS,He.CAPS_LOCK,He.CONTEXT_MENU,He.F1,He.F2,He.F3,He.F4,He.F5,He.F6,He.F7,He.F8,He.F9,He.F10,He.F11,He.F12].includes(n)}var $K=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Qu=void 0;function zK(n,e){var r=n.prefixCls,i=n.invalidate,o=n.item,s=n.renderItem,a=n.responsive,l=n.responsiveDisabled,c=n.registerSize,u=n.itemKey,d=n.className,f=n.style,h=n.children,p=n.display,g=n.order,y=n.component,v=y===void 0?"div":y,m=Cn(n,$K),x=a&&!p;function _(T){c(u,T)}b.useEffect(function(){return function(){_(null)}},[]);var S=s&&o!==Qu?s(o,{index:g}):h,w;i||(w={opacity:x?0:1,height:x?0:Qu,overflowY:x?"hidden":Qu,order:a?g:Qu,pointerEvents:x?"none":Qu,position:x?"absolute":Qu});var C={};x&&(C["aria-hidden"]=!0);var E=b.createElement(v,ut({className:_e(!i&&r,d),style:re(re({},w),f)},C,m,{ref:e}),S);return a&&(E=b.createElement(ll,{onResize:function(M){var R=M.offsetWidth;_(R)},disabled:l},E)),E}var Ip=b.forwardRef(zK);Ip.displayName="Item";function kK(n){if(typeof MessageChannel>"u")mr(n);else{var e=new MessageChannel;e.port1.onmessage=function(){return n()},e.port2.postMessage(void 0)}}function VK(){var n=b.useRef(null),e=function(i){n.current||(n.current=[],kK(function(){ea.unstable_batchedUpdates(function(){n.current.forEach(function(o){o()}),n.current=null})})),n.current.push(i)};return e}function Ah(n,e){var r=b.useState(e),i=Ce(r,2),o=i[0],s=i[1],a=Sr(function(l){n(function(){s(l)})});return[o,a]}var Ey=se.createContext(null),GK=["component"],HK=["className"],jK=["className"],WK=function(e,r){var i=b.useContext(Ey);if(!i){var o=e.component,s=o===void 0?"div":o,a=Cn(e,GK);return b.createElement(s,ut({},a,{ref:r}))}var l=i.className,c=Cn(i,HK),u=e.className,d=Cn(e,jK);return b.createElement(Ey.Provider,{value:null},b.createElement(Ip,ut({ref:r,className:_e(l,u)},c,d)))},v$=b.forwardRef(WK);v$.displayName="RawItem";var qK=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],y$="responsive",x$="invalidate";function XK(n){return"+ ".concat(n.length," ...")}function KK(n,e){var r=n.prefixCls,i=r===void 0?"rc-overflow":r,o=n.data,s=o===void 0?[]:o,a=n.renderItem,l=n.renderRawItem,c=n.itemKey,u=n.itemWidth,d=u===void 0?10:u,f=n.ssr,h=n.style,p=n.className,g=n.maxCount,y=n.renderRest,v=n.renderRawRest,m=n.suffix,x=n.component,_=x===void 0?"div":x,S=n.itemComponent,w=n.onVisibleChange,C=Cn(n,qK),E=f==="full",T=VK(),M=Ah(T,null),R=Ce(M,2),N=R[0],D=R[1],L=N||0,A=Ah(T,new Map),I=Ce(A,2),P=I[0],F=I[1],O=Ah(T,0),V=Ce(O,2),U=V[0],k=V[1],W=Ah(T,0),J=Ce(W,2),z=J[0],j=J[1],X=Ah(T,0),Q=Ce(X,2),ne=Q[0],ye=Q[1],me=b.useState(null),fe=Ce(me,2),le=fe[0],ge=fe[1],q=b.useState(null),ve=Ce(q,2),be=ve[0],xe=ve[1],we=b.useMemo(function(){return be===null&&E?Number.MAX_SAFE_INTEGER:be||0},[be,N]),qe=b.useState(!1),Fe=Ce(qe,2),H=Fe[0],B=Fe[1],K="".concat(i,"-item"),oe=Math.max(U,z),pe=g===y$,ce=s.length&&pe,Ue=g===x$,Re=ce||typeof g=="number"&&s.length>g,Le=b.useMemo(function(){var dt=s;return ce?N===null&&E?dt=s:dt=s.slice(0,Math.min(s.length,L/d)):typeof g=="number"&&(dt=s.slice(0,g)),dt},[s,d,N,g,ce]),Je=b.useMemo(function(){return ce?s.slice(we+1):s.slice(Le.length)},[s,Le,ce,we]),Me=b.useCallback(function(dt,Xe){var rt;return typeof c=="function"?c(dt):(rt=c&&(dt==null?void 0:dt[c]))!==null&&rt!==void 0?rt:Xe},[c]),ze=b.useCallback(a||function(dt){return dt},[a]);function Ee(dt,Xe,rt){be===dt&&(Xe===void 0||Xe===le)||(xe(dt),rt||(B(dt<s.length-1),w==null||w(dt)),Xe!==void 0&&ge(Xe))}function Pe(dt,Xe){D(Xe.clientWidth)}function ke(dt,Xe){F(function(rt){var Ft=new Map(rt);return Xe===null?Ft.delete(dt):Ft.set(dt,Xe),Ft})}function Ve(dt,Xe){j(Xe),k(z)}function $e(dt,Xe){ye(Xe)}function xt(dt){return P.get(Me(Le[dt],dt))}_n(function(){if(L&&typeof oe=="number"&&Le){var dt=ne,Xe=Le.length,rt=Xe-1;if(!Xe){Ee(0,null);return}for(var Ft=0;Ft<Xe;Ft+=1){var bn=xt(Ft);if(E&&(bn=bn||0),bn===void 0){Ee(Ft-1,void 0,!0);break}if(dt+=bn,rt===0&&dt<=L||Ft===rt-1&&dt+xt(rt)<=L){Ee(rt,null);break}else if(dt+oe>L){Ee(Ft-1,dt-bn-ne+z);break}}m&&xt(0)+ne>L&&ge(null)}},[L,P,z,ne,Me,Le]);var te=H&&!!Je.length,Qe={};le!==null&&ce&&(Qe={position:"absolute",left:le,top:0});var Se={prefixCls:K,responsive:ce,component:S,invalidate:Ue},Oe=l?function(dt,Xe){var rt=Me(dt,Xe);return b.createElement(Ey.Provider,{key:rt,value:re(re({},Se),{},{order:Xe,item:dt,itemKey:rt,registerSize:ke,display:Xe<=we})},l(dt,Xe))}:function(dt,Xe){var rt=Me(dt,Xe);return b.createElement(Ip,ut({},Se,{order:Xe,key:rt,item:dt,renderItem:ze,itemKey:rt,registerSize:ke,display:Xe<=we}))},Ze={order:te?we:Number.MAX_SAFE_INTEGER,className:"".concat(K,"-rest"),registerSize:Ve,display:te},We=y||XK,wt=v?b.createElement(Ey.Provider,{value:re(re({},Se),Ze)},v(Je)):b.createElement(Ip,ut({},Se,Ze),typeof We=="function"?We(Je):We),At=b.createElement(_,ut({className:_e(!Ue&&i,p),style:h,ref:e},C),Le.map(Oe),Re?wt:null,m&&b.createElement(Ip,ut({},Se,{responsive:pe,responsiveDisabled:!ce,order:we,className:"".concat(K,"-suffix"),registerSize:$e,display:!0,style:Qe}),m));return pe?b.createElement(ll,{onResize:Pe,disabled:!ce},At):At}var fg=b.forwardRef(KK);fg.displayName="Overflow";fg.Item=v$;fg.RESPONSIVE=y$;fg.INVALIDATE=x$;var YK=function(e,r){var i,o=e.prefixCls,s=e.id,a=e.inputElement,l=e.disabled,c=e.tabIndex,u=e.autoFocus,d=e.autoComplete,f=e.editable,h=e.activeDescendantId,p=e.value,g=e.maxLength,y=e.onKeyDown,v=e.onMouseDown,m=e.onChange,x=e.onPaste,_=e.onCompositionStart,S=e.onCompositionEnd,w=e.open,C=e.attrs,E=a||b.createElement("input",null),T=E,M=T.ref,R=T.props,N=R.onKeyDown,D=R.onChange,L=R.onMouseDown,A=R.onCompositionStart,I=R.onCompositionEnd,P=R.style;return"maxLength"in E.props,E=b.cloneElement(E,re(re(re({type:"search"},R),{},{id:s,ref:ca(r,M),disabled:l,tabIndex:c,autoComplete:d||"off",autoFocus:u,className:_e("".concat(o,"-selection-search-input"),(i=E)===null||i===void 0||(i=i.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-expanded":w||!1,"aria-haspopup":"listbox","aria-owns":"".concat(s,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(s,"_list"),"aria-activedescendant":w?h:void 0},C),{},{value:f?p:"",maxLength:g,readOnly:!f,unselectable:f?null:"on",style:re(re({},P),{},{opacity:f?null:0}),onKeyDown:function(O){y(O),N&&N(O)},onMouseDown:function(O){v(O),L&&L(O)},onChange:function(O){m(O),D&&D(O)},onCompositionStart:function(O){_(O),A&&A(O)},onCompositionEnd:function(O){S(O),I&&I(O)},onPaste:x})),E},_$=b.forwardRef(YK);function b$(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var QK=typeof window<"u"&&window.document&&window.document.documentElement,ZK=QK;function JK(n){return n!=null}function eY(n){return!n&&n!==0}function XN(n){return["string","number"].includes(Rt(n))}function S$(n){var e=void 0;return n&&(XN(n.title)?e=n.title.toString():XN(n.label)&&(e=n.label.toString())),e}function tY(n,e){ZK?b.useLayoutEffect(n,e):b.useEffect(n,e)}function nY(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var KN=function(e){e.preventDefault(),e.stopPropagation()},rY=function(e){var r=e.id,i=e.prefixCls,o=e.values,s=e.open,a=e.searchValue,l=e.autoClearSearchValue,c=e.inputRef,u=e.placeholder,d=e.disabled,f=e.mode,h=e.showSearch,p=e.autoFocus,g=e.autoComplete,y=e.activeDescendantId,v=e.tabIndex,m=e.removeIcon,x=e.maxTagCount,_=e.maxTagTextLength,S=e.maxTagPlaceholder,w=S===void 0?function(ge){return"+ ".concat(ge.length," ...")}:S,C=e.tagRender,E=e.onToggleOpen,T=e.onRemove,M=e.onInputChange,R=e.onInputPaste,N=e.onInputKeyDown,D=e.onInputMouseDown,L=e.onInputCompositionStart,A=e.onInputCompositionEnd,I=b.useRef(null),P=b.useState(0),F=Ce(P,2),O=F[0],V=F[1],U=b.useState(!1),k=Ce(U,2),W=k[0],J=k[1],z="".concat(i,"-selection"),j=s||f==="multiple"&&l===!1||f==="tags"?a:"",X=f==="tags"||f==="multiple"&&l===!1||h&&(s||W);tY(function(){V(I.current.scrollWidth)},[j]);var Q=function(q,ve,be,xe,we){return b.createElement("span",{title:S$(q),className:_e("".concat(z,"-item"),ee({},"".concat(z,"-item-disabled"),be))},b.createElement("span",{className:"".concat(z,"-item-content")},ve),xe&&b.createElement(n_,{className:"".concat(z,"-item-remove"),onMouseDown:KN,onClick:we,customizeIcon:m},"×"))},ne=function(q,ve,be,xe,we,qe){var Fe=function(B){KN(B),E(!s)};return b.createElement("span",{onMouseDown:Fe},C({label:ve,value:q,disabled:be,closable:xe,onClose:we,isMaxTag:!!qe}))},ye=function(q){var ve=q.disabled,be=q.label,xe=q.value,we=!d&&!ve,qe=be;if(typeof _=="number"&&(typeof be=="string"||typeof be=="number")){var Fe=String(qe);Fe.length>_&&(qe="".concat(Fe.slice(0,_),"..."))}var H=function(K){K&&K.stopPropagation(),T(q)};return typeof C=="function"?ne(xe,qe,ve,we,H):Q(q,qe,ve,we,H)},me=function(q){var ve=typeof w=="function"?w(q):w;return typeof C=="function"?ne(void 0,ve,!1,!1,void 0,!0):Q({title:ve},ve,!1)},fe=b.createElement("div",{className:"".concat(z,"-search"),style:{width:O},onFocus:function(){J(!0)},onBlur:function(){J(!1)}},b.createElement(_$,{ref:c,open:s,prefixCls:i,id:r,inputElement:null,disabled:d,autoFocus:p,autoComplete:g,editable:X,activeDescendantId:y,value:j,onKeyDown:N,onMouseDown:D,onChange:M,onPaste:R,onCompositionStart:L,onCompositionEnd:A,tabIndex:v,attrs:ta(e,!0)}),b.createElement("span",{ref:I,className:"".concat(z,"-search-mirror"),"aria-hidden":!0},j," ")),le=b.createElement(fg,{prefixCls:"".concat(z,"-overflow"),data:o,renderItem:ye,renderRest:me,suffix:fe,itemKey:nY,maxCount:x});return b.createElement("span",{className:"".concat(z,"-wrap")},le,!o.length&&!j&&b.createElement("span",{className:"".concat(z,"-placeholder")},u))},iY=function(e){var r=e.inputElement,i=e.prefixCls,o=e.id,s=e.inputRef,a=e.disabled,l=e.autoFocus,c=e.autoComplete,u=e.activeDescendantId,d=e.mode,f=e.open,h=e.values,p=e.placeholder,g=e.tabIndex,y=e.showSearch,v=e.searchValue,m=e.activeValue,x=e.maxLength,_=e.onInputKeyDown,S=e.onInputMouseDown,w=e.onInputChange,C=e.onInputPaste,E=e.onInputCompositionStart,T=e.onInputCompositionEnd,M=e.title,R=b.useState(!1),N=Ce(R,2),D=N[0],L=N[1],A=d==="combobox",I=A||y,P=h[0],F=v||"";A&&m&&!D&&(F=m),b.useEffect(function(){A&&L(!1)},[A,m]);var O=d!=="combobox"&&!f&&!y?!1:!!F,V=M===void 0?S$(P):M,U=b.useMemo(function(){return P?null:b.createElement("span",{className:"".concat(i,"-selection-placeholder"),style:O?{visibility:"hidden"}:void 0},p)},[P,O,p,i]);return b.createElement("span",{className:"".concat(i,"-selection-wrap")},b.createElement("span",{className:"".concat(i,"-selection-search")},b.createElement(_$,{ref:s,prefixCls:i,id:o,open:f,inputElement:r,disabled:a,autoFocus:l,autoComplete:c,editable:I,activeDescendantId:u,value:F,onKeyDown:_,onMouseDown:S,onChange:function(W){L(!0),w(W)},onPaste:C,onCompositionStart:E,onCompositionEnd:T,tabIndex:g,attrs:ta(e,!0),maxLength:A?x:void 0})),!A&&P?b.createElement("span",{className:"".concat(i,"-selection-item"),title:V,style:O?{visibility:"hidden"}:void 0},P.label):null,U)},oY=function(e,r){var i=b.useRef(null),o=b.useRef(!1),s=e.prefixCls,a=e.open,l=e.mode,c=e.showSearch,u=e.tokenWithEnter,d=e.disabled,f=e.prefix,h=e.autoClearSearchValue,p=e.onSearch,g=e.onSearchSubmit,y=e.onToggleOpen,v=e.onInputKeyDown,m=e.domRef;b.useImperativeHandle(r,function(){return{focus:function(V){i.current.focus(V)},blur:function(){i.current.blur()}}});var x=g$(0),_=Ce(x,2),S=_[0],w=_[1],C=function(V){var U=V.which,k=i.current instanceof HTMLTextAreaElement;!k&&a&&(U===He.UP||U===He.DOWN)&&V.preventDefault(),v&&v(V),U===He.ENTER&&l==="tags"&&!o.current&&!a&&(g==null||g(V.target.value)),!(k&&!a&&~[He.UP,He.DOWN,He.LEFT,He.RIGHT].indexOf(U))&&BK(U)&&y(!0)},E=function(){w(!0)},T=b.useRef(null),M=function(V){p(V,!0,o.current)!==!1&&y(!0)},R=function(){o.current=!0},N=function(V){o.current=!1,l!=="combobox"&&M(V.target.value)},D=function(V){var U=V.target.value;if(u&&T.current&&/[\r\n]/.test(T.current)){var k=T.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");U=U.replace(k,T.current)}T.current=null,M(U)},L=function(V){var U=V.clipboardData,k=U==null?void 0:U.getData("text");T.current=k||""},A=function(V){var U=V.target;if(U!==i.current){var k=document.body.style.msTouchAction!==void 0;k?setTimeout(function(){i.current.focus()}):i.current.focus()}},I=function(V){var U=S();V.target!==i.current&&!U&&!(l==="combobox"&&d)&&V.preventDefault(),(l!=="combobox"&&(!c||!U)||!a)&&(a&&h!==!1&&p("",!0,!1),y())},P={inputRef:i,onInputKeyDown:C,onInputMouseDown:E,onInputChange:D,onInputPaste:L,onInputCompositionStart:R,onInputCompositionEnd:N},F=l==="multiple"||l==="tags"?b.createElement(rY,ut({},e,P)):b.createElement(iY,ut({},e,P));return b.createElement("div",{ref:m,className:"".concat(s,"-selector"),onClick:A,onMouseDown:I},f&&b.createElement("div",{className:"".concat(s,"-prefix")},f),F)},sY=b.forwardRef(oY);function aY(n){var e=n.prefixCls,r=n.align,i=n.arrow,o=n.arrowPos,s=i||{},a=s.className,l=s.content,c=o.x,u=c===void 0?0:c,d=o.y,f=d===void 0?0:d,h=b.useRef();if(!r||!r.points)return null;var p={position:"absolute"};if(r.autoArrow!==!1){var g=r.points[0],y=r.points[1],v=g[0],m=g[1],x=y[0],_=y[1];v===x||!["t","b"].includes(v)?p.top=f:v==="t"?p.top=0:p.bottom=0,m===_||!["l","r"].includes(m)?p.left=u:m==="l"?p.left=0:p.right=0}return b.createElement("div",{ref:h,className:_e("".concat(e,"-arrow"),a),style:p},l)}function lY(n){var e=n.prefixCls,r=n.open,i=n.zIndex,o=n.mask,s=n.motion;return o?b.createElement(Du,ut({},s,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(a){var l=a.className;return b.createElement("div",{style:{zIndex:i},className:_e("".concat(e,"-mask"),l)})}):null}var cY=b.memo(function(n){var e=n.children;return e},function(n,e){return e.cache}),uY=b.forwardRef(function(n,e){var r=n.popup,i=n.className,o=n.prefixCls,s=n.style,a=n.target,l=n.onVisibleChanged,c=n.open,u=n.keepDom,d=n.fresh,f=n.onClick,h=n.mask,p=n.arrow,g=n.arrowPos,y=n.align,v=n.motion,m=n.maskMotion,x=n.forceRender,_=n.getPopupContainer,S=n.autoDestroy,w=n.portal,C=n.zIndex,E=n.onMouseEnter,T=n.onMouseLeave,M=n.onPointerEnter,R=n.onPointerDownCapture,N=n.ready,D=n.offsetX,L=n.offsetY,A=n.offsetR,I=n.offsetB,P=n.onAlign,F=n.onPrepare,O=n.stretch,V=n.targetWidth,U=n.targetHeight,k=typeof r=="function"?r():r,W=c||u,J=(_==null?void 0:_.length)>0,z=b.useState(!_||!J),j=Ce(z,2),X=j[0],Q=j[1];if(_n(function(){!X&&J&&a&&Q(!0)},[X,J,a]),!X)return null;var ne="auto",ye={left:"-1000vw",top:"-1000vh",right:ne,bottom:ne};if(N||!c){var me,fe=y.points,le=y.dynamicInset||((me=y._experimental)===null||me===void 0?void 0:me.dynamicInset),ge=le&&fe[0][1]==="r",q=le&&fe[0][0]==="b";ge?(ye.right=A,ye.left=ne):(ye.left=D,ye.right=ne),q?(ye.bottom=I,ye.top=ne):(ye.top=L,ye.bottom=ne)}var ve={};return O&&(O.includes("height")&&U?ve.height=U:O.includes("minHeight")&&U&&(ve.minHeight=U),O.includes("width")&&V?ve.width=V:O.includes("minWidth")&&V&&(ve.minWidth=V)),c||(ve.pointerEvents="none"),b.createElement(w,{open:x||W,getContainer:_&&function(){return _(a)},autoDestroy:S},b.createElement(lY,{prefixCls:o,open:c,zIndex:C,mask:h,motion:m}),b.createElement(ll,{onResize:P,disabled:!c},function(be){return b.createElement(Du,ut({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(o,"-hidden")},v,{onAppearPrepare:F,onEnterPrepare:F,visible:c,onVisibleChanged:function(we){var qe;v==null||(qe=v.onVisibleChanged)===null||qe===void 0||qe.call(v,we),l(we)}}),function(xe,we){var qe=xe.className,Fe=xe.style,H=_e(o,qe,i);return b.createElement("div",{ref:ca(be,e,we),className:H,style:re(re(re(re({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},ye),ve),Fe),{},{boxSizing:"border-box",zIndex:C},s),onMouseEnter:E,onMouseLeave:T,onPointerEnter:M,onClick:f,onPointerDownCapture:R},p&&b.createElement(aY,{prefixCls:o,arrow:p,arrowPos:g,align:y}),b.createElement(cY,{cache:!c&&!d},k))})}))}),dY=b.forwardRef(function(n,e){var r=n.children,i=n.getTriggerDOMNode,o=rg(r),s=b.useCallback(function(l){IT(e,i?i(l):l)},[i]),a=eh(s,Fx(r));return o?b.cloneElement(r,{ref:a}):r}),YN=b.createContext(null);function QN(n){return n?Array.isArray(n)?n:[n]:[]}function fY(n,e,r,i){return b.useMemo(function(){var o=QN(r??e),s=QN(i??e),a=new Set(o),l=new Set(s);return n&&(a.has("hover")&&(a.delete("hover"),a.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[a,l]},[n,e,r,i])}function hY(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?n[0]===e[0]:n[0]===e[0]&&n[1]===e[1]}function pY(n,e,r,i){for(var o=r.points,s=Object.keys(n),a=0;a<s.length;a+=1){var l,c=s[a];if(hY((l=n[c])===null||l===void 0?void 0:l.points,o,i))return"".concat(e,"-placement-").concat(c)}return""}function ZN(n,e,r,i){return e||(r?{motionName:"".concat(n,"-").concat(r)}:i?{motionName:i}:null)}function hg(n){return n.ownerDocument.defaultView}function FC(n){for(var e=[],r=n==null?void 0:n.parentElement,i=["hidden","scroll","clip","auto"];r;){var o=hg(r).getComputedStyle(r),s=o.overflowX,a=o.overflowY,l=o.overflow;[s,a,l].some(function(c){return i.includes(c)})&&e.push(r),r=r.parentElement}return e}function mm(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?e:n}function Nh(n){return mm(parseFloat(n),0)}function JN(n,e){var r=re({},n);return(e||[]).forEach(function(i){if(!(i instanceof HTMLBodyElement||i instanceof HTMLHtmlElement)){var o=hg(i).getComputedStyle(i),s=o.overflow,a=o.overflowClipMargin,l=o.borderTopWidth,c=o.borderBottomWidth,u=o.borderLeftWidth,d=o.borderRightWidth,f=i.getBoundingClientRect(),h=i.offsetHeight,p=i.clientHeight,g=i.offsetWidth,y=i.clientWidth,v=Nh(l),m=Nh(c),x=Nh(u),_=Nh(d),S=mm(Math.round(f.width/g*1e3)/1e3),w=mm(Math.round(f.height/h*1e3)/1e3),C=(g-y-x-_)*S,E=(h-p-v-m)*w,T=v*w,M=m*w,R=x*S,N=_*S,D=0,L=0;if(s==="clip"){var A=Nh(a);D=A*S,L=A*w}var I=f.x+R-D,P=f.y+T-L,F=I+f.width+2*D-R-N-C,O=P+f.height+2*L-T-M-E;r.left=Math.max(r.left,I),r.top=Math.max(r.top,P),r.right=Math.min(r.right,F),r.bottom=Math.min(r.bottom,O)}}),r}function eP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),i=r.match(/^(.*)\%$/);return i?n*(parseFloat(i[1])/100):parseFloat(r)}function tP(n,e){var r=e||[],i=Ce(r,2),o=i[0],s=i[1];return[eP(n.width,o),eP(n.height,s)]}function nP(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function Zu(n,e){var r=e[0],i=e[1],o,s;return r==="t"?s=n.y:r==="b"?s=n.y+n.height:s=n.y+n.height/2,i==="l"?o=n.x:i==="r"?o=n.x+n.width:o=n.x+n.width/2,{x:o,y:s}}function vl(n,e){var r={t:"b",b:"t",l:"r",r:"l"};return n.map(function(i,o){return o===e?r[i]||"c":i}).join("")}function mY(n,e,r,i,o,s,a){var l=b.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[i]||{}}),c=Ce(l,2),u=c[0],d=c[1],f=b.useRef(0),h=b.useMemo(function(){return e?FC(e):[]},[e]),p=b.useRef({}),g=function(){p.current={}};n||g();var y=Sr(function(){if(e&&r&&n){let bi=function(ju,ml){var Wu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe,Og=z.x+ju,Ig=z.y+ml,X_=Og+ge,Ct=Ig+le,Bt=Math.max(Og,Wu.left),Kn=Math.max(Ig,Wu.top),dr=Math.min(X_,Wu.right),Yn=Math.min(Ct,Wu.bottom);return Math.max(0,(dr-Bt)*(Yn-Kn))},Hu=function(){En=z.y+rt,ar=En+le,Vn=z.x+Xe,Nr=Vn+ge};var sA=bi,aA=Hu,x,_,S,w,C=e,E=C.ownerDocument,T=hg(C),M=T.getComputedStyle(C),R=M.width,N=M.height,D=M.position,L=C.style.left,A=C.style.top,I=C.style.right,P=C.style.bottom,F=C.style.overflow,O=re(re({},o[i]),s),V=E.createElement("div");(x=C.parentElement)===null||x===void 0||x.appendChild(V),V.style.left="".concat(C.offsetLeft,"px"),V.style.top="".concat(C.offsetTop,"px"),V.style.position=D,V.style.height="".concat(C.offsetHeight,"px"),V.style.width="".concat(C.offsetWidth,"px"),C.style.left="0",C.style.top="0",C.style.right="auto",C.style.bottom="auto",C.style.overflow="hidden";var U;if(Array.isArray(r))U={x:r[0],y:r[1],width:0,height:0};else{var k,W,J=r.getBoundingClientRect();J.x=(k=J.x)!==null&&k!==void 0?k:J.left,J.y=(W=J.y)!==null&&W!==void 0?W:J.top,U={x:J.x,y:J.y,width:J.width,height:J.height}}var z=C.getBoundingClientRect();z.x=(_=z.x)!==null&&_!==void 0?_:z.left,z.y=(S=z.y)!==null&&S!==void 0?S:z.top;var j=E.documentElement,X=j.clientWidth,Q=j.clientHeight,ne=j.scrollWidth,ye=j.scrollHeight,me=j.scrollTop,fe=j.scrollLeft,le=z.height,ge=z.width,q=U.height,ve=U.width,be={left:0,top:0,right:X,bottom:Q},xe={left:-fe,top:-me,right:ne-fe,bottom:ye-me},we=O.htmlRegion,qe="visible",Fe="visibleFirst";we!=="scroll"&&we!==Fe&&(we=qe);var H=we===Fe,B=JN(xe,h),K=JN(be,h),oe=we===qe?K:B,pe=H?K:oe;C.style.left="auto",C.style.top="auto",C.style.right="0",C.style.bottom="0";var ce=C.getBoundingClientRect();C.style.left=L,C.style.top=A,C.style.right=I,C.style.bottom=P,C.style.overflow=F,(w=C.parentElement)===null||w===void 0||w.removeChild(V);var Ue=mm(Math.round(ge/parseFloat(R)*1e3)/1e3),Re=mm(Math.round(le/parseFloat(N)*1e3)/1e3);if(Ue===0||Re===0||sm(r)&&!bB(r))return;var Le=O.offset,Je=O.targetOffset,Me=tP(z,Le),ze=Ce(Me,2),Ee=ze[0],Pe=ze[1],ke=tP(U,Je),Ve=Ce(ke,2),$e=Ve[0],xt=Ve[1];U.x-=$e,U.y-=xt;var te=O.points||[],Qe=Ce(te,2),Se=Qe[0],Oe=Qe[1],Ze=nP(Oe),We=nP(Se),wt=Zu(U,Ze),At=Zu(z,We),dt=re({},O),Xe=wt.x-At.x+Ee,rt=wt.y-At.y+Pe,Ft=bi(Xe,rt),bn=bi(Xe,rt,K),Ke=Zu(U,["t","l"]),ot=Zu(z,["t","l"]),yt=Zu(U,["b","r"]),ft=Zu(z,["b","r"]),bt=O.overflow||{},Dt=bt.adjustX,yn=bt.adjustY,un=bt.shiftX,Bn=bt.shiftY,en=function(ml){return typeof ml=="boolean"?ml:ml>=0},En,ar,Vn,Nr;Hu();var vt=en(yn),$=We[0]===Ze[0];if(vt&&We[0]==="t"&&(ar>pe.bottom||p.current.bt)){var Z=rt;$?Z-=le-q:Z=Ke.y-ft.y-Pe;var de=bi(Xe,Z),he=bi(Xe,Z,K);de>Ft||de===Ft&&(!H||he>=bn)?(p.current.bt=!0,rt=Z,Pe=-Pe,dt.points=[vl(We,0),vl(Ze,0)]):p.current.bt=!1}if(vt&&We[0]==="b"&&(En<pe.top||p.current.tb)){var ae=rt;$?ae+=le-q:ae=yt.y-ot.y-Pe;var Ge=bi(Xe,ae),at=bi(Xe,ae,K);Ge>Ft||Ge===Ft&&(!H||at>=bn)?(p.current.tb=!0,rt=ae,Pe=-Pe,dt.points=[vl(We,0),vl(Ze,0)]):p.current.tb=!1}var ht=en(Dt),mt=We[1]===Ze[1];if(ht&&We[1]==="l"&&(Nr>pe.right||p.current.rl)){var Et=Xe;mt?Et-=ge-ve:Et=Ke.x-ft.x-Ee;var Ye=bi(Et,rt),et=bi(Et,rt,K);Ye>Ft||Ye===Ft&&(!H||et>=bn)?(p.current.rl=!0,Xe=Et,Ee=-Ee,dt.points=[vl(We,1),vl(Ze,1)]):p.current.rl=!1}if(ht&&We[1]==="r"&&(Vn<pe.left||p.current.lr)){var _t=Xe;mt?_t+=ge-ve:_t=yt.x-ot.x-Ee;var zt=bi(_t,rt),pn=bi(_t,rt,K);zt>Ft||zt===Ft&&(!H||pn>=bn)?(p.current.lr=!0,Xe=_t,Ee=-Ee,dt.points=[vl(We,1),vl(Ze,1)]):p.current.lr=!1}Hu();var dn=un===!0?0:un;typeof dn=="number"&&(Vn<K.left&&(Xe-=Vn-K.left-Ee,U.x+ve<K.left+dn&&(Xe+=U.x-K.left+ve-dn)),Nr>K.right&&(Xe-=Nr-K.right-Ee,U.x>K.right-dn&&(Xe+=U.x-K.right+dn)));var kt=Bn===!0?0:Bn;typeof kt=="number"&&(En<K.top&&(rt-=En-K.top-Pe,U.y+q<K.top+kt&&(rt+=U.y-K.top+q-kt)),ar>K.bottom&&(rt-=ar-K.bottom-Pe,U.y>K.bottom-kt&&(rt+=U.y-K.bottom+kt)));var Nt=z.x+Xe,$n=Nt+ge,Wt=z.y+rt,Pr=Wt+le,Gt=U.x,Ot=Gt+ve,zn=U.y,Kt=zn+q,ln=Math.max(Nt,Gt),mn=Math.min($n,Ot),Tn=(ln+mn)/2,An=Tn-Nt,_i=Math.max(Wt,zn),Or=Math.min(Pr,Kt),rs=(_i+Or)/2,pl=rs-Wt;a==null||a(e,dt);var Ls=ce.right-z.x-(Xe+z.width),Fs=ce.bottom-z.y-(rt+z.height);Ue===1&&(Xe=Math.round(Xe),Ls=Math.round(Ls)),Re===1&&(rt=Math.round(rt),Fs=Math.round(Fs));var q_={ready:!0,offsetX:Xe/Ue,offsetY:rt/Re,offsetR:Ls/Ue,offsetB:Fs/Re,arrowX:An/Ue,arrowY:pl/Re,scaleX:Ue,scaleY:Re,align:dt};d(q_)}}),v=function(){f.current+=1;var _=f.current;Promise.resolve().then(function(){f.current===_&&y()})},m=function(){d(function(_){return re(re({},_),{},{ready:!1})})};return _n(m,[i]),_n(function(){n||m()},[n]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,v]}function gY(n,e,r,i,o){_n(function(){if(n&&e&&r){let h=function(){i(),o()};var f=h,s=e,a=r,l=FC(s),c=FC(a),u=hg(a),d=new Set([u].concat(st(l),st(c)));return d.forEach(function(p){p.addEventListener("scroll",h,{passive:!0})}),u.addEventListener("resize",h,{passive:!0}),i(),function(){d.forEach(function(p){p.removeEventListener("scroll",h),u.removeEventListener("resize",h)})}}},[n,e,r])}function vY(n,e,r,i,o,s,a,l){var c=b.useRef(n);c.current=n;var u=b.useRef(!1);b.useEffect(function(){if(e&&i&&(!o||s)){var f=function(){u.current=!1},h=function(v){var m;c.current&&!a(((m=v.composedPath)===null||m===void 0||(m=m.call(v))===null||m===void 0?void 0:m[0])||v.target)&&!u.current&&l(!1)},p=hg(i);p.addEventListener("pointerdown",f,!0),p.addEventListener("mousedown",h,!0),p.addEventListener("contextmenu",h,!0);var g=_y(r);return g&&(g.addEventListener("mousedown",h,!0),g.addEventListener("contextmenu",h,!0)),function(){p.removeEventListener("pointerdown",f,!0),p.removeEventListener("mousedown",h,!0),p.removeEventListener("contextmenu",h,!0),g&&(g.removeEventListener("mousedown",h,!0),g.removeEventListener("contextmenu",h,!0))}}},[e,r,i,o,s]);function d(){u.current=!0}return d}var yY=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function xY(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eM,e=b.forwardRef(function(r,i){var o=r.prefixCls,s=o===void 0?"rc-trigger-popup":o,a=r.children,l=r.action,c=l===void 0?"hover":l,u=r.showAction,d=r.hideAction,f=r.popupVisible,h=r.defaultPopupVisible,p=r.onPopupVisibleChange,g=r.afterPopupVisibleChange,y=r.mouseEnterDelay,v=r.mouseLeaveDelay,m=v===void 0?.1:v,x=r.focusDelay,_=r.blurDelay,S=r.mask,w=r.maskClosable,C=w===void 0?!0:w,E=r.getPopupContainer,T=r.forceRender,M=r.autoDestroy,R=r.destroyPopupOnHide,N=r.popup,D=r.popupClassName,L=r.popupStyle,A=r.popupPlacement,I=r.builtinPlacements,P=I===void 0?{}:I,F=r.popupAlign,O=r.zIndex,V=r.stretch,U=r.getPopupClassNameFromAlign,k=r.fresh,W=r.alignPoint,J=r.onPopupClick,z=r.onPopupAlign,j=r.arrow,X=r.popupMotion,Q=r.maskMotion,ne=r.popupTransitionName,ye=r.popupAnimation,me=r.maskTransitionName,fe=r.maskAnimation,le=r.className,ge=r.getTriggerDOMNode,q=Cn(r,yY),ve=M||R||!1,be=b.useState(!1),xe=Ce(be,2),we=xe[0],qe=xe[1];_n(function(){qe(p$())},[]);var Fe=b.useRef({}),H=b.useContext(YN),B=b.useMemo(function(){return{registerSubPopup:function(Bt,Kn){Fe.current[Bt]=Kn,H==null||H.registerSubPopup(Bt,Kn)}}},[H]),K=zB(),oe=b.useState(null),pe=Ce(oe,2),ce=pe[0],Ue=pe[1],Re=b.useRef(null),Le=Sr(function(Ct){Re.current=Ct,sm(Ct)&&ce!==Ct&&Ue(Ct),H==null||H.registerSubPopup(K,Ct)}),Je=b.useState(null),Me=Ce(Je,2),ze=Me[0],Ee=Me[1],Pe=b.useRef(null),ke=Sr(function(Ct){sm(Ct)&&ze!==Ct&&(Ee(Ct),Pe.current=Ct)}),Ve=b.Children.only(a),$e=(Ve==null?void 0:Ve.props)||{},xt={},te=Sr(function(Ct){var Bt,Kn,dr=ze;return(dr==null?void 0:dr.contains(Ct))||((Bt=_y(dr))===null||Bt===void 0?void 0:Bt.host)===Ct||Ct===dr||(ce==null?void 0:ce.contains(Ct))||((Kn=_y(ce))===null||Kn===void 0?void 0:Kn.host)===Ct||Ct===ce||Object.values(Fe.current).some(function(Yn){return(Yn==null?void 0:Yn.contains(Ct))||Ct===Yn})}),Qe=ZN(s,X,ye,ne),Se=ZN(s,Q,fe,me),Oe=b.useState(h||!1),Ze=Ce(Oe,2),We=Ze[0],wt=Ze[1],At=f??We,dt=Sr(function(Ct){f===void 0&&wt(Ct)});_n(function(){wt(f||!1)},[f]);var Xe=b.useRef(At);Xe.current=At;var rt=b.useRef([]);rt.current=[];var Ft=Sr(function(Ct){var Bt;dt(Ct),((Bt=rt.current[rt.current.length-1])!==null&&Bt!==void 0?Bt:At)!==Ct&&(rt.current.push(Ct),p==null||p(Ct))}),bn=b.useRef(),Ke=function(){clearTimeout(bn.current)},ot=function(Bt){var Kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ke(),Kn===0?Ft(Bt):bn.current=setTimeout(function(){Ft(Bt)},Kn*1e3)};b.useEffect(function(){return Ke},[]);var yt=b.useState(!1),ft=Ce(yt,2),bt=ft[0],Dt=ft[1];_n(function(Ct){(!Ct||At)&&Dt(!0)},[At]);var yn=b.useState(null),un=Ce(yn,2),Bn=un[0],en=un[1],En=b.useState(null),ar=Ce(En,2),Vn=ar[0],Nr=ar[1],vt=function(Bt){Nr([Bt.clientX,Bt.clientY])},$=mY(At,ce,W&&Vn!==null?Vn:ze,A,P,F,z),Z=Ce($,11),de=Z[0],he=Z[1],ae=Z[2],Ge=Z[3],at=Z[4],ht=Z[5],mt=Z[6],Et=Z[7],Ye=Z[8],et=Z[9],_t=Z[10],zt=fY(we,c,u,d),pn=Ce(zt,2),dn=pn[0],kt=pn[1],Nt=dn.has("click"),$n=kt.has("click")||kt.has("contextMenu"),Wt=Sr(function(){bt||_t()}),Pr=function(){Xe.current&&W&&$n&&ot(!1)};gY(At,ze,ce,Wt,Pr),_n(function(){Wt()},[Vn,A]),_n(function(){At&&!(P!=null&&P[A])&&Wt()},[JSON.stringify(F)]);var Gt=b.useMemo(function(){var Ct=pY(P,s,et,W);return _e(Ct,U==null?void 0:U(et))},[et,U,P,s,W]);b.useImperativeHandle(i,function(){return{nativeElement:Pe.current,popupElement:Re.current,forceAlign:Wt}});var Ot=b.useState(0),zn=Ce(Ot,2),Kt=zn[0],ln=zn[1],mn=b.useState(0),Tn=Ce(mn,2),An=Tn[0],_i=Tn[1],Or=function(){if(V&&ze){var Bt=ze.getBoundingClientRect();ln(Bt.width),_i(Bt.height)}},rs=function(){Or(),Wt()},pl=function(Bt){Dt(!1),_t(),g==null||g(Bt)},Ls=function(){return new Promise(function(Bt){Or(),en(function(){return Bt})})};_n(function(){Bn&&(_t(),Bn(),en(null))},[Bn]);function Fs(Ct,Bt,Kn,dr){xt[Ct]=function(Yn){var Dg;dr==null||dr(Yn),ot(Bt,Kn);for(var K_=arguments.length,lA=new Array(K_>1?K_-1:0),Lg=1;Lg<K_;Lg++)lA[Lg-1]=arguments[Lg];(Dg=$e[Ct])===null||Dg===void 0||Dg.call.apply(Dg,[$e,Yn].concat(lA))}}(Nt||$n)&&(xt.onClick=function(Ct){var Bt;Xe.current&&$n?ot(!1):!Xe.current&&Nt&&(vt(Ct),ot(!0));for(var Kn=arguments.length,dr=new Array(Kn>1?Kn-1:0),Yn=1;Yn<Kn;Yn++)dr[Yn-1]=arguments[Yn];(Bt=$e.onClick)===null||Bt===void 0||Bt.call.apply(Bt,[$e,Ct].concat(dr))});var q_=vY(At,$n,ze,ce,S,C,te,ot),sA=dn.has("hover"),aA=kt.has("hover"),bi,Hu;sA&&(Fs("onMouseEnter",!0,y,function(Ct){vt(Ct)}),Fs("onPointerEnter",!0,y,function(Ct){vt(Ct)}),bi=function(Bt){(At||bt)&&ce!==null&&ce!==void 0&&ce.contains(Bt.target)&&ot(!0,y)},W&&(xt.onMouseMove=function(Ct){var Bt;(Bt=$e.onMouseMove)===null||Bt===void 0||Bt.call($e,Ct)})),aA&&(Fs("onMouseLeave",!1,m),Fs("onPointerLeave",!1,m),Hu=function(){ot(!1,m)}),dn.has("focus")&&Fs("onFocus",!0,x),kt.has("focus")&&Fs("onBlur",!1,_),dn.has("contextMenu")&&(xt.onContextMenu=function(Ct){var Bt;Xe.current&&kt.has("contextMenu")?ot(!1):(vt(Ct),ot(!0)),Ct.preventDefault();for(var Kn=arguments.length,dr=new Array(Kn>1?Kn-1:0),Yn=1;Yn<Kn;Yn++)dr[Yn-1]=arguments[Yn];(Bt=$e.onContextMenu)===null||Bt===void 0||Bt.call.apply(Bt,[$e,Ct].concat(dr))}),le&&(xt.className=_e($e.className,le));var ju=re(re({},$e),xt),ml={},Wu=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Wu.forEach(function(Ct){q[Ct]&&(ml[Ct]=function(){for(var Bt,Kn=arguments.length,dr=new Array(Kn),Yn=0;Yn<Kn;Yn++)dr[Yn]=arguments[Yn];(Bt=ju[Ct])===null||Bt===void 0||Bt.call.apply(Bt,[ju].concat(dr)),q[Ct].apply(q,dr)})});var Og=b.cloneElement(Ve,re(re({},ju),ml)),Ig={x:ht,y:mt},X_=j?re({},j!==!0?j:{}):null;return b.createElement(b.Fragment,null,b.createElement(ll,{disabled:!At,ref:ke,onResize:rs},b.createElement(dY,{getTriggerDOMNode:ge},Og)),b.createElement(YN.Provider,{value:B},b.createElement(uY,{portal:n,ref:Le,prefixCls:s,popup:N,className:_e(D,Gt),style:L,target:ze,onMouseEnter:bi,onMouseLeave:Hu,onPointerEnter:bi,zIndex:O,open:At,keepDom:bt,fresh:k,onClick:J,onPointerDownCapture:q_,mask:S,motion:Qe,maskMotion:Se,onVisibleChanged:pl,onPrepare:Ls,forceRender:T,autoDestroy:ve,getPopupContainer:E,align:et,arrow:X_,arrowPos:Ig,ready:de,offsetX:he,offsetY:ae,offsetR:Ge,offsetB:at,onAlign:Wt,stretch:V,targetWidth:Kt/Et,targetHeight:An/Ye})))});return e}const w$=xY(eM);var _Y=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],bY=function(e){var r=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},SY=function(e,r){var i=e.prefixCls;e.disabled;var o=e.visible,s=e.children,a=e.popupElement,l=e.animation,c=e.transitionName,u=e.dropdownStyle,d=e.dropdownClassName,f=e.direction,h=f===void 0?"ltr":f,p=e.placement,g=e.builtinPlacements,y=e.dropdownMatchSelectWidth,v=e.dropdownRender,m=e.dropdownAlign,x=e.getPopupContainer,_=e.empty,S=e.getTriggerDOMNode,w=e.onPopupVisibleChange,C=e.onPopupMouseEnter,E=Cn(e,_Y),T="".concat(i,"-dropdown"),M=a;v&&(M=v(a));var R=b.useMemo(function(){return g||bY(y)},[g,y]),N=l?"".concat(T,"-").concat(l):c,D=typeof y=="number",L=b.useMemo(function(){return D?null:y===!1?"minWidth":"width"},[y,D]),A=u;D&&(A=re(re({},A),{},{width:y}));var I=b.useRef(null);return b.useImperativeHandle(r,function(){return{getPopupElement:function(){var F;return(F=I.current)===null||F===void 0?void 0:F.popupElement}}}),b.createElement(w$,ut({},E,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:p||(h==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:R,prefixCls:T,popupTransitionName:N,popup:b.createElement("div",{onMouseEnter:C},M),ref:I,stretch:L,popupAlign:m,popupVisible:o,getPopupContainer:x,popupClassName:_e(d,ee({},"".concat(T,"-empty"),_)),popupStyle:A,getTriggerDOMNode:S,onPopupVisibleChange:w}),s)},wY=b.forwardRef(SY);function rP(n,e){var r=n.key,i;return"value"in n&&(i=n.value),r??(i!==void 0?i:"rc-index-key-".concat(e))}function UC(n){return typeof n<"u"&&!Number.isNaN(n)}function C$(n,e){var r=n||{},i=r.label,o=r.value,s=r.options,a=r.groupLabel,l=i||(e?"children":"label");return{label:l,value:o||"value",options:s||"options",groupLabel:a||l}}function CY(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.fieldNames,i=e.childrenAsData,o=[],s=C$(r,!1),a=s.label,l=s.value,c=s.options,u=s.groupLabel;function d(f,h){Array.isArray(f)&&f.forEach(function(p){if(h||!(c in p)){var g=p[l];o.push({key:rP(p,o.length),groupOption:h,data:p,label:p[a],value:g})}else{var y=p[u];y===void 0&&i&&(y=p.label),o.push({key:rP(p,o.length),group:!0,data:p,label:y}),d(p[c],!0)}})}return d(n,!1),o}function BC(n){var e=re({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return eo(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var EY=function(e,r,i){if(!r||!r.length)return null;var o=!1,s=function l(c,u){var d=TU(u),f=d[0],h=d.slice(1);if(!f)return[c];var p=c.split(f);return o=o||p.length>1,p.reduce(function(g,y){return[].concat(st(g),st(l(y,h)))},[]).filter(Boolean)},a=s(e,r);return o?typeof i<"u"?a.slice(0,i):a:null},nM=b.createContext(null);function TY(n){var e=n.visible,r=n.values;if(!e)return null;var i=50;return b.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(r.slice(0,i).map(function(o){var s=o.label,a=o.value;return["number","string"].includes(Rt(s))?s:a}).join(", ")),r.length>i?", ...":null)}var MY=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],RY=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],$C=function(e){return e==="tags"||e==="multiple"},AY=b.forwardRef(function(n,e){var r,i=n.id,o=n.prefixCls,s=n.className,a=n.showSearch,l=n.tagRender,c=n.direction,u=n.omitDomProps,d=n.displayValues,f=n.onDisplayValuesChange,h=n.emptyOptions,p=n.notFoundContent,g=p===void 0?"Not Found":p,y=n.onClear,v=n.mode,m=n.disabled,x=n.loading,_=n.getInputElement,S=n.getRawInputElement,w=n.open,C=n.defaultOpen,E=n.onDropdownVisibleChange,T=n.activeValue,M=n.onActiveValueChange,R=n.activeDescendantId,N=n.searchValue,D=n.autoClearSearchValue,L=n.onSearch,A=n.onSearchSplit,I=n.tokenSeparators,P=n.allowClear,F=n.prefix,O=n.suffixIcon,V=n.clearIcon,U=n.OptionList,k=n.animation,W=n.transitionName,J=n.dropdownStyle,z=n.dropdownClassName,j=n.dropdownMatchSelectWidth,X=n.dropdownRender,Q=n.dropdownAlign,ne=n.placement,ye=n.builtinPlacements,me=n.getPopupContainer,fe=n.showAction,le=fe===void 0?[]:fe,ge=n.onFocus,q=n.onBlur,ve=n.onKeyUp,be=n.onKeyDown,xe=n.onMouseDown,we=Cn(n,MY),qe=$C(v),Fe=(a!==void 0?a:qe)||v==="combobox",H=re({},we);RY.forEach(function(Gt){delete H[Gt]}),u==null||u.forEach(function(Gt){delete H[Gt]});var B=b.useState(!1),K=Ce(B,2),oe=K[0],pe=K[1];b.useEffect(function(){pe(p$())},[]);var ce=b.useRef(null),Ue=b.useRef(null),Re=b.useRef(null),Le=b.useRef(null),Je=b.useRef(null),Me=b.useRef(!1),ze=FK(),Ee=Ce(ze,3),Pe=Ee[0],ke=Ee[1],Ve=Ee[2];b.useImperativeHandle(e,function(){var Gt,Ot;return{focus:(Gt=Le.current)===null||Gt===void 0?void 0:Gt.focus,blur:(Ot=Le.current)===null||Ot===void 0?void 0:Ot.blur,scrollTo:function(Kt){var ln;return(ln=Je.current)===null||ln===void 0?void 0:ln.scrollTo(Kt)},nativeElement:ce.current||Ue.current}});var $e=b.useMemo(function(){var Gt;if(v!=="combobox")return N;var Ot=(Gt=d[0])===null||Gt===void 0?void 0:Gt.value;return typeof Ot=="string"||typeof Ot=="number"?String(Ot):""},[N,v,d]),xt=v==="combobox"&&typeof _=="function"&&_()||null,te=typeof S=="function"&&S(),Qe=eh(Ue,te==null||(r=te.props)===null||r===void 0?void 0:r.ref),Se=b.useState(!1),Oe=Ce(Se,2),Ze=Oe[0],We=Oe[1];_n(function(){We(!0)},[]);var wt=no(!1,{defaultValue:C,value:w}),At=Ce(wt,2),dt=At[0],Xe=At[1],rt=Ze?dt:!1,Ft=!g&&h;(m||Ft&&rt&&v==="combobox")&&(rt=!1);var bn=Ft?!1:rt,Ke=b.useCallback(function(Gt){var Ot=Gt!==void 0?Gt:!rt;m||(Xe(Ot),rt!==Ot&&(E==null||E(Ot)))},[m,rt,Xe,E]),ot=b.useMemo(function(){return(I||[]).some(function(Gt){return[`
`,`\r
`].includes(Gt)})},[I]),yt=b.useContext(nM)||{},ft=yt.maxCount,bt=yt.rawValues,Dt=function(Ot,zn,Kt){if(!(qe&&UC(ft)&&(bt==null?void 0:bt.size)>=ft)){var ln=!0,mn=Ot;M==null||M(null);var Tn=EY(Ot,I,UC(ft)?ft-bt.size:void 0),An=Kt?null:Tn;return v!=="combobox"&&An&&(mn="",A==null||A(An),Ke(!1),ln=!1),L&&$e!==mn&&L(mn,{source:zn?"typing":"effect"}),ln}},yn=function(Ot){!Ot||!Ot.trim()||L(Ot,{source:"submit"})};b.useEffect(function(){!rt&&!qe&&v!=="combobox"&&Dt("",!1,!1)},[rt]),b.useEffect(function(){dt&&m&&Xe(!1),m&&!Me.current&&ke(!1)},[m]);var un=g$(),Bn=Ce(un,2),en=Bn[0],En=Bn[1],ar=b.useRef(!1),Vn=function(Ot){var zn=en(),Kt=Ot.key,ln=Kt==="Enter";if(ln&&(v!=="combobox"&&Ot.preventDefault(),rt||Ke(!0)),En(!!$e),Kt==="Backspace"&&!zn&&qe&&!$e&&d.length){for(var mn=st(d),Tn=null,An=mn.length-1;An>=0;An-=1){var _i=mn[An];if(!_i.disabled){mn.splice(An,1),Tn=_i;break}}Tn&&f(mn,{type:"remove",values:[Tn]})}for(var Or=arguments.length,rs=new Array(Or>1?Or-1:0),pl=1;pl<Or;pl++)rs[pl-1]=arguments[pl];if(rt&&(!ln||!ar.current)){var Ls;(Ls=Je.current)===null||Ls===void 0||Ls.onKeyDown.apply(Ls,[Ot].concat(rs))}ln&&(ar.current=!0),be==null||be.apply(void 0,[Ot].concat(rs))},Nr=function(Ot){for(var zn=arguments.length,Kt=new Array(zn>1?zn-1:0),ln=1;ln<zn;ln++)Kt[ln-1]=arguments[ln];if(rt){var mn;(mn=Je.current)===null||mn===void 0||mn.onKeyUp.apply(mn,[Ot].concat(Kt))}Ot.key==="Enter"&&(ar.current=!1),ve==null||ve.apply(void 0,[Ot].concat(Kt))},vt=function(Ot){var zn=d.filter(function(Kt){return Kt!==Ot});f(zn,{type:"remove",values:[Ot]})},$=b.useRef(!1),Z=function(){ke(!0),m||(ge&&!$.current&&ge.apply(void 0,arguments),le.includes("focus")&&Ke(!0)),$.current=!0},de=function(){Me.current=!0,ke(!1,function(){$.current=!1,Me.current=!1,Ke(!1)}),!m&&($e&&(v==="tags"?L($e,{source:"submit"}):v==="multiple"&&L("",{source:"blur"})),q&&q.apply(void 0,arguments))},he=[];b.useEffect(function(){return function(){he.forEach(function(Gt){return clearTimeout(Gt)}),he.splice(0,he.length)}},[]);var ae=function(Ot){var zn,Kt=Ot.target,ln=(zn=Re.current)===null||zn===void 0?void 0:zn.getPopupElement();if(ln&&ln.contains(Kt)){var mn=setTimeout(function(){var Or=he.indexOf(mn);if(Or!==-1&&he.splice(Or,1),Ve(),!oe&&!ln.contains(document.activeElement)){var rs;(rs=Le.current)===null||rs===void 0||rs.focus()}});he.push(mn)}for(var Tn=arguments.length,An=new Array(Tn>1?Tn-1:0),_i=1;_i<Tn;_i++)An[_i-1]=arguments[_i];xe==null||xe.apply(void 0,[Ot].concat(An))},Ge=b.useState({}),at=Ce(Ge,2),ht=at[1];function mt(){ht({})}var Et;te&&(Et=function(Ot){Ke(Ot)}),UK(function(){var Gt;return[ce.current,(Gt=Re.current)===null||Gt===void 0?void 0:Gt.getPopupElement()]},bn,Ke,!!te);var Ye=b.useMemo(function(){return re(re({},n),{},{notFoundContent:g,open:rt,triggerOpen:bn,id:i,showSearch:Fe,multiple:qe,toggleOpen:Ke})},[n,g,bn,rt,i,Fe,qe,Ke]),et=!!O||x,_t;et&&(_t=b.createElement(n_,{className:_e("".concat(o,"-arrow"),ee({},"".concat(o,"-arrow-loading"),x)),customizeIcon:O,customizeIconProps:{loading:x,searchValue:$e,open:rt,focused:Pe,showSearch:Fe}}));var zt=function(){var Ot;y==null||y(),(Ot=Le.current)===null||Ot===void 0||Ot.focus(),f([],{type:"clear",values:d}),Dt("",!1,!1)},pn=DK(o,zt,d,P,V,m,$e,v),dn=pn.allowClear,kt=pn.clearIcon,Nt=b.createElement(U,{ref:Je}),$n=_e(o,s,ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({},"".concat(o,"-focused"),Pe),"".concat(o,"-multiple"),qe),"".concat(o,"-single"),!qe),"".concat(o,"-allow-clear"),P),"".concat(o,"-show-arrow"),et),"".concat(o,"-disabled"),m),"".concat(o,"-loading"),x),"".concat(o,"-open"),rt),"".concat(o,"-customize-input"),xt),"".concat(o,"-show-search"),Fe)),Wt=b.createElement(wY,{ref:Re,disabled:m,prefixCls:o,visible:bn,popupElement:Nt,animation:k,transitionName:W,dropdownStyle:J,dropdownClassName:z,direction:c,dropdownMatchSelectWidth:j,dropdownRender:X,dropdownAlign:Q,placement:ne,builtinPlacements:ye,getPopupContainer:me,empty:h,getTriggerDOMNode:function(Ot){return Ue.current||Ot},onPopupVisibleChange:Et,onPopupMouseEnter:mt},te?b.cloneElement(te,{ref:Qe}):b.createElement(sY,ut({},n,{domRef:Ue,prefixCls:o,inputElement:xt,ref:Le,id:i,prefix:F,showSearch:Fe,autoClearSearchValue:D,mode:v,activeDescendantId:R,tagRender:l,values:d,open:rt,onToggleOpen:Ke,activeValue:T,searchValue:$e,onSearch:Dt,onSearchSubmit:yn,onRemove:vt,tokenWithEnter:ot}))),Pr;return te?Pr=Wt:Pr=b.createElement("div",ut({className:$n},H,{ref:ce,onMouseDown:ae,onKeyDown:Vn,onKeyUp:Nr,onFocus:Z,onBlur:de}),b.createElement(TY,{visible:Pe&&!rt,values:d}),Wt,_t,dn&&kt),b.createElement(m$.Provider,{value:Ye},Pr)}),rM=function(){return null};rM.isSelectOptGroup=!0;var iM=function(){return null};iM.isSelectOption=!0;var E$=b.forwardRef(function(n,e){var r=n.height,i=n.offsetY,o=n.offsetX,s=n.children,a=n.prefixCls,l=n.onInnerResize,c=n.innerProps,u=n.rtl,d=n.extra,f={},h={display:"flex",flexDirection:"column"};return i!==void 0&&(f={height:r,position:"relative",overflow:"hidden"},h=re(re({},h),{},ee(ee(ee(ee(ee({transform:"translateY(".concat(i,"px)")},u?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),b.createElement("div",{style:f},b.createElement(ll,{onResize:function(g){var y=g.offsetHeight;y&&l&&l()}},b.createElement("div",ut({style:h,className:_e(ee({},"".concat(a,"-holder-inner"),a)),ref:e},c),s,d)))});E$.displayName="Filler";function NY(n){var e=n.children,r=n.setRef,i=b.useCallback(function(o){r(o)},[]);return b.cloneElement(e,{ref:i})}function PY(n,e,r,i,o,s,a,l){var c=l.getKey;return n.slice(e,r+1).map(function(u,d){var f=e+d,h=a(u,f,{style:{width:i},offsetX:o}),p=c(u);return b.createElement(NY,{key:p,setRef:function(y){return s(u,y)}},h)})}function OY(n,e,r){var i=n.length,o=e.length,s,a;if(i===0&&o===0)return null;i<o?(s=n,a=e):(s=e,a=n);var l={__EMPTY_ITEM__:!0};function c(g){return g!==void 0?r(g):l}for(var u=null,d=Math.abs(i-o)!==1,f=0;f<a.length;f+=1){var h=c(s[f]),p=c(a[f]);if(h!==p){u=f,d=d||h!==c(a[f+1]);break}}return u===null?null:{index:u,multiple:d}}function IY(n,e,r){var i=b.useState(n),o=Ce(i,2),s=o[0],a=o[1],l=b.useState(null),c=Ce(l,2),u=c[0],d=c[1];return b.useEffect(function(){var f=OY(s||[],n||[],e);(f==null?void 0:f.index)!==void 0&&d(n[f.index]),a(n)},[n]),[u]}var iP=(typeof navigator>"u"?"undefined":Rt(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const T$=function(n,e,r,i){var o=b.useRef(!1),s=b.useRef(null);function a(){clearTimeout(s.current),o.current=!0,s.current=setTimeout(function(){o.current=!1},50)}var l=b.useRef({top:n,bottom:e,left:r,right:i});return l.current.top=n,l.current.bottom=e,l.current.left=r,l.current.right=i,function(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=c?u<0&&l.current.left||u>0&&l.current.right:u<0&&l.current.top||u>0&&l.current.bottom;return d&&f?(clearTimeout(s.current),o.current=!1):(!f||o.current)&&a(),!o.current&&f}};function DY(n,e,r,i,o,s,a){var l=b.useRef(0),c=b.useRef(null),u=b.useRef(null),d=b.useRef(!1),f=T$(e,r,i,o);function h(x,_){if(mr.cancel(c.current),!f(!1,_)){var S=x;if(!S._virtualHandled)S._virtualHandled=!0;else return;l.current+=_,u.current=_,iP||S.preventDefault(),c.current=mr(function(){var w=d.current?10:1;a(l.current*w,!1),l.current=0})}}function p(x,_){a(_,!0),iP||x.preventDefault()}var g=b.useRef(null),y=b.useRef(null);function v(x){if(n){mr.cancel(y.current),y.current=mr(function(){g.current=null},2);var _=x.deltaX,S=x.deltaY,w=x.shiftKey,C=_,E=S;(g.current==="sx"||!g.current&&w&&S&&!_)&&(C=S,E=0,g.current="sx");var T=Math.abs(C),M=Math.abs(E);g.current===null&&(g.current=s&&T>M?"x":"y"),g.current==="y"?h(x,E):p(x,C)}}function m(x){n&&(d.current=x.detail===u.current)}return[v,m]}function LY(n,e,r,i){var o=b.useMemo(function(){return[new Map,[]]},[n,r.id,i]),s=Ce(o,2),a=s[0],l=s[1],c=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,h=a.get(d),p=a.get(f);if(h===void 0||p===void 0)for(var g=n.length,y=l.length;y<g;y+=1){var v,m=n[y],x=e(m);a.set(x,y);var _=(v=r.get(x))!==null&&v!==void 0?v:i;if(l[y]=(l[y-1]||0)+_,x===d&&(h=y),x===f&&(p=y),h!==void 0&&p!==void 0)break}return{top:l[h-1]||0,bottom:l[p]}};return c}var FY=function(){function n(){Hr(this,n),ee(this,"maps",void 0),ee(this,"id",0),ee(this,"diffKeys",new Set),this.maps=Object.create(null)}return jr(n,[{key:"set",value:function(r,i){this.maps[r]=i,this.id+=1,this.diffKeys.add(r)}},{key:"get",value:function(r){return this.maps[r]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),n}();function oP(n){var e=parseFloat(n);return isNaN(e)?0:e}function UY(n,e,r){var i=b.useState(0),o=Ce(i,2),s=o[0],a=o[1],l=b.useRef(new Map),c=b.useRef(new FY),u=b.useRef(0);function d(){u.current+=1}function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;d();var g=function(){l.current.forEach(function(m,x){if(m&&m.offsetParent){var _=Ap(m),S=_.offsetHeight,w=getComputedStyle(_),C=w.marginTop,E=w.marginBottom,T=oP(C),M=oP(E),R=S+T+M;c.current.get(x)!==R&&c.current.set(x,R)}}),a(function(m){return m+1})};if(p)g();else{u.current+=1;var y=u.current;Promise.resolve().then(function(){y===u.current&&g()})}}function h(p,g){var y=n(p);l.current.get(y),g?(l.current.set(y,g),f()):l.current.delete(y)}return b.useEffect(function(){return d},[]),[h,f,c.current,s]}var sP=14/15;function BY(n,e,r){var i=b.useRef(!1),o=b.useRef(0),s=b.useRef(0),a=b.useRef(null),l=b.useRef(null),c,u=function(p){if(i.current){var g=Math.ceil(p.touches[0].pageX),y=Math.ceil(p.touches[0].pageY),v=o.current-g,m=s.current-y,x=Math.abs(v)>Math.abs(m);x?o.current=g:s.current=y;var _=r(x,x?v:m,!1,p);_&&p.preventDefault(),clearInterval(l.current),_&&(l.current=setInterval(function(){x?v*=sP:m*=sP;var S=Math.floor(x?v:m);(!r(x,S,!0)||Math.abs(S)<=.1)&&clearInterval(l.current)},16))}},d=function(){i.current=!1,c()},f=function(p){c(),p.touches.length===1&&!i.current&&(i.current=!0,o.current=Math.ceil(p.touches[0].pageX),s.current=Math.ceil(p.touches[0].pageY),a.current=p.target,a.current.addEventListener("touchmove",u,{passive:!1}),a.current.addEventListener("touchend",d,{passive:!0}))};c=function(){a.current&&(a.current.removeEventListener("touchmove",u),a.current.removeEventListener("touchend",d))},_n(function(){return n&&e.current.addEventListener("touchstart",f,{passive:!0}),function(){var h;(h=e.current)===null||h===void 0||h.removeEventListener("touchstart",f),c(),clearInterval(l.current)}},[n])}function aP(n){return Math.floor(Math.pow(n,.5))}function zC(n,e){var r="touches"in n?n.touches[0]:n;return r[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}function $Y(n,e,r){b.useEffect(function(){var i=e.current;if(n&&i){var o=!1,s,a,l=function(){mr.cancel(s)},c=function h(){l(),s=mr(function(){r(a),h()})},u=function(p){var g=p;g._virtualHandled||(g._virtualHandled=!0,o=!0)},d=function(){o=!1,l()},f=function(p){if(o){var g=zC(p,!1),y=i.getBoundingClientRect(),v=y.top,m=y.bottom;if(g<=v){var x=v-g;a=-aP(x),c()}else if(g>=m){var _=g-m;a=aP(_),c()}else l()}};return i.addEventListener("mousedown",u),i.ownerDocument.addEventListener("mouseup",d),i.ownerDocument.addEventListener("mousemove",f),function(){i.removeEventListener("mousedown",u),i.ownerDocument.removeEventListener("mouseup",d),i.ownerDocument.removeEventListener("mousemove",f),l()}}},[n])}var zY=10;function kY(n,e,r,i,o,s,a,l){var c=b.useRef(),u=b.useState(null),d=Ce(u,2),f=d[0],h=d[1];return _n(function(){if(f&&f.times<zY){if(!n.current){h(function(V){return re({},V)});return}s();var p=f.targetAlign,g=f.originAlign,y=f.index,v=f.offset,m=n.current.clientHeight,x=!1,_=p,S=null;if(m){for(var w=p||g,C=0,E=0,T=0,M=Math.min(e.length-1,y),R=0;R<=M;R+=1){var N=o(e[R]);E=C;var D=r.get(N);T=E+(D===void 0?i:D),C=T}for(var L=w==="top"?v:m-v,A=M;A>=0;A-=1){var I=o(e[A]),P=r.get(I);if(P===void 0){x=!0;break}if(L-=P,L<=0)break}switch(w){case"top":S=E-v;break;case"bottom":S=T-m+v;break;default:{var F=n.current.scrollTop,O=F+m;E<F?_="top":T>O&&(_="bottom")}}S!==null&&a(S),S!==f.lastTop&&(x=!0)}x&&h(re(re({},f),{},{times:f.times+1,targetAlign:_,lastTop:S}))}},[f,n.current]),function(p){if(p==null){l();return}if(mr.cancel(c.current),typeof p=="number")a(p);else if(p&&Rt(p)==="object"){var g,y=p.align;"index"in p?g=p.index:g=e.findIndex(function(x){return o(x)===p.key});var v=p.offset,m=v===void 0?0:v;h({times:0,index:g,offset:m,originAlign:y})}}}var lP=b.forwardRef(function(n,e){var r=n.prefixCls,i=n.rtl,o=n.scrollOffset,s=n.scrollRange,a=n.onStartMove,l=n.onStopMove,c=n.onScroll,u=n.horizontal,d=n.spinSize,f=n.containerSize,h=n.style,p=n.thumbStyle,g=b.useState(!1),y=Ce(g,2),v=y[0],m=y[1],x=b.useState(null),_=Ce(x,2),S=_[0],w=_[1],C=b.useState(null),E=Ce(C,2),T=E[0],M=E[1],R=!i,N=b.useRef(),D=b.useRef(),L=b.useState(!1),A=Ce(L,2),I=A[0],P=A[1],F=b.useRef(),O=function(){clearTimeout(F.current),P(!0),F.current=setTimeout(function(){P(!1)},3e3)},V=s-f||0,U=f-d||0,k=b.useMemo(function(){if(o===0||V===0)return 0;var me=o/V;return me*U},[o,V,U]),W=function(fe){fe.stopPropagation(),fe.preventDefault()},J=b.useRef({top:k,dragging:v,pageY:S,startTop:T});J.current={top:k,dragging:v,pageY:S,startTop:T};var z=function(fe){m(!0),w(zC(fe,u)),M(J.current.top),a(),fe.stopPropagation(),fe.preventDefault()};b.useEffect(function(){var me=function(q){q.preventDefault()},fe=N.current,le=D.current;return fe.addEventListener("touchstart",me,{passive:!1}),le.addEventListener("touchstart",z,{passive:!1}),function(){fe.removeEventListener("touchstart",me),le.removeEventListener("touchstart",z)}},[]);var j=b.useRef();j.current=V;var X=b.useRef();X.current=U,b.useEffect(function(){if(v){var me,fe=function(q){var ve=J.current,be=ve.dragging,xe=ve.pageY,we=ve.startTop;mr.cancel(me);var qe=N.current.getBoundingClientRect(),Fe=f/(u?qe.width:qe.height);if(be){var H=(zC(q,u)-xe)*Fe,B=we;!R&&u?B-=H:B+=H;var K=j.current,oe=X.current,pe=oe?B/oe:0,ce=Math.ceil(pe*K);ce=Math.max(ce,0),ce=Math.min(ce,K),me=mr(function(){c(ce,u)})}},le=function(){m(!1),l()};return window.addEventListener("mousemove",fe,{passive:!0}),window.addEventListener("touchmove",fe,{passive:!0}),window.addEventListener("mouseup",le,{passive:!0}),window.addEventListener("touchend",le,{passive:!0}),function(){window.removeEventListener("mousemove",fe),window.removeEventListener("touchmove",fe),window.removeEventListener("mouseup",le),window.removeEventListener("touchend",le),mr.cancel(me)}}},[v]),b.useEffect(function(){return O(),function(){clearTimeout(F.current)}},[o]),b.useImperativeHandle(e,function(){return{delayHidden:O}});var Q="".concat(r,"-scrollbar"),ne={position:"absolute",visibility:I?null:"hidden"},ye={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(ne.height=8,ne.left=0,ne.right=0,ne.bottom=0,ye.height="100%",ye.width=d,R?ye.left=k:ye.right=k):(ne.width=8,ne.top=0,ne.bottom=0,R?ne.right=0:ne.left=0,ye.width="100%",ye.height=d,ye.top=k),b.createElement("div",{ref:N,className:_e(Q,ee(ee(ee({},"".concat(Q,"-horizontal"),u),"".concat(Q,"-vertical"),!u),"".concat(Q,"-visible"),I)),style:re(re({},ne),h),onMouseDown:W,onMouseMove:O},b.createElement("div",{ref:D,className:_e("".concat(Q,"-thumb"),ee({},"".concat(Q,"-thumb-moving"),v)),style:re(re({},ye),p),onMouseDown:z}))}),VY=20;function cP(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=n/e*n;return isNaN(r)&&(r=0),r=Math.max(r,VY),Math.floor(r)}var GY=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],HY=[],jY={overflowY:"auto",overflowAnchor:"none"};function WY(n,e){var r=n.prefixCls,i=r===void 0?"rc-virtual-list":r,o=n.className,s=n.height,a=n.itemHeight,l=n.fullHeight,c=l===void 0?!0:l,u=n.style,d=n.data,f=n.children,h=n.itemKey,p=n.virtual,g=n.direction,y=n.scrollWidth,v=n.component,m=v===void 0?"div":v,x=n.onScroll,_=n.onVirtualScroll,S=n.onVisibleChange,w=n.innerProps,C=n.extraRender,E=n.styles,T=Cn(n,GY),M=b.useCallback(function(vt){return typeof h=="function"?h(vt):vt==null?void 0:vt[h]},[h]),R=UY(M),N=Ce(R,4),D=N[0],L=N[1],A=N[2],I=N[3],P=!!(p!==!1&&s&&a),F=b.useMemo(function(){return Object.values(A.maps).reduce(function(vt,$){return vt+$},0)},[A.id,A.maps]),O=P&&d&&(Math.max(a*d.length,F)>s||!!y),V=g==="rtl",U=_e(i,ee({},"".concat(i,"-rtl"),V),o),k=d||HY,W=b.useRef(),J=b.useRef(),z=b.useRef(),j=b.useState(0),X=Ce(j,2),Q=X[0],ne=X[1],ye=b.useState(0),me=Ce(ye,2),fe=me[0],le=me[1],ge=b.useState(!1),q=Ce(ge,2),ve=q[0],be=q[1],xe=function(){be(!0)},we=function(){be(!1)},qe={getKey:M};function Fe(vt){ne(function($){var Z;typeof vt=="function"?Z=vt($):Z=vt;var de=Oe(Z);return W.current.scrollTop=de,de})}var H=b.useRef({start:0,end:k.length}),B=b.useRef(),K=IY(k,M),oe=Ce(K,1),pe=oe[0];B.current=pe;var ce=b.useMemo(function(){if(!P)return{scrollHeight:void 0,start:0,end:k.length-1,offset:void 0};if(!O){var vt;return{scrollHeight:((vt=J.current)===null||vt===void 0?void 0:vt.offsetHeight)||0,start:0,end:k.length-1,offset:void 0}}for(var $=0,Z,de,he,ae=k.length,Ge=0;Ge<ae;Ge+=1){var at=k[Ge],ht=M(at),mt=A.get(ht),Et=$+(mt===void 0?a:mt);Et>=Q&&Z===void 0&&(Z=Ge,de=$),Et>Q+s&&he===void 0&&(he=Ge),$=Et}return Z===void 0&&(Z=0,de=0,he=Math.ceil(s/a)),he===void 0&&(he=k.length-1),he=Math.min(he+1,k.length-1),{scrollHeight:$,start:Z,end:he,offset:de}},[O,P,Q,k,I,s]),Ue=ce.scrollHeight,Re=ce.start,Le=ce.end,Je=ce.offset;H.current.start=Re,H.current.end=Le,b.useLayoutEffect(function(){var vt=A.getRecord();if(vt.size===1){var $=Array.from(vt)[0],Z=M(k[Re]);if(Z===$){var de=A.get($),he=de-a;Fe(function(ae){return ae+he})}}A.resetRecord()},[Ue]);var Me=b.useState({width:0,height:s}),ze=Ce(Me,2),Ee=ze[0],Pe=ze[1],ke=function($){Pe({width:$.offsetWidth,height:$.offsetHeight})},Ve=b.useRef(),$e=b.useRef(),xt=b.useMemo(function(){return cP(Ee.width,y)},[Ee.width,y]),te=b.useMemo(function(){return cP(Ee.height,Ue)},[Ee.height,Ue]),Qe=Ue-s,Se=b.useRef(Qe);Se.current=Qe;function Oe(vt){var $=vt;return Number.isNaN(Se.current)||($=Math.min($,Se.current)),$=Math.max($,0),$}var Ze=Q<=0,We=Q>=Qe,wt=fe<=0,At=fe>=y,dt=T$(Ze,We,wt,At),Xe=function(){return{x:V?-fe:fe,y:Q}},rt=b.useRef(Xe()),Ft=Sr(function(vt){if(_){var $=re(re({},Xe()),vt);(rt.current.x!==$.x||rt.current.y!==$.y)&&(_($),rt.current=$)}});function bn(vt,$){var Z=vt;$?(ea.flushSync(function(){le(Z)}),Ft()):Fe(Z)}function Ke(vt){var $=vt.currentTarget.scrollTop;$!==Q&&Fe($),x==null||x(vt),Ft()}var ot=function($){var Z=$,de=y?y-Ee.width:0;return Z=Math.max(Z,0),Z=Math.min(Z,de),Z},yt=Sr(function(vt,$){$?(ea.flushSync(function(){le(function(Z){var de=Z+(V?-vt:vt);return ot(de)})}),Ft()):Fe(function(Z){var de=Z+vt;return de})}),ft=DY(P,Ze,We,wt,At,!!y,yt),bt=Ce(ft,2),Dt=bt[0],yn=bt[1];BY(P,W,function(vt,$,Z,de){var he=de;return dt(vt,$,Z)?!1:!he||!he._virtualHandled?(he&&(he._virtualHandled=!0),Dt({preventDefault:function(){},deltaX:vt?$:0,deltaY:vt?0:$}),!0):!1}),$Y(O,W,function(vt){Fe(function($){return $+vt})}),_n(function(){function vt(Z){var de=Ze&&Z.detail<0,he=We&&Z.detail>0;P&&!de&&!he&&Z.preventDefault()}var $=W.current;return $.addEventListener("wheel",Dt,{passive:!1}),$.addEventListener("DOMMouseScroll",yn,{passive:!0}),$.addEventListener("MozMousePixelScroll",vt,{passive:!1}),function(){$.removeEventListener("wheel",Dt),$.removeEventListener("DOMMouseScroll",yn),$.removeEventListener("MozMousePixelScroll",vt)}},[P,Ze,We]),_n(function(){if(y){var vt=ot(fe);le(vt),Ft({x:vt})}},[Ee.width,y]);var un=function(){var $,Z;($=Ve.current)===null||$===void 0||$.delayHidden(),(Z=$e.current)===null||Z===void 0||Z.delayHidden()},Bn=kY(W,k,A,a,M,function(){return L(!0)},Fe,un);b.useImperativeHandle(e,function(){return{nativeElement:z.current,getScrollInfo:Xe,scrollTo:function($){function Z(de){return de&&Rt(de)==="object"&&("left"in de||"top"in de)}Z($)?($.left!==void 0&&le(ot($.left)),Bn($.top)):Bn($)}}}),_n(function(){if(S){var vt=k.slice(Re,Le+1);S(vt,k)}},[Re,Le,k]);var en=LY(k,M,A,a),En=C==null?void 0:C({start:Re,end:Le,virtual:O,offsetX:fe,offsetY:Je,rtl:V,getSize:en}),ar=PY(k,Re,Le,y,fe,D,f,qe),Vn=null;s&&(Vn=re(ee({},c?"height":"maxHeight",s),jY),P&&(Vn.overflowY="hidden",y&&(Vn.overflowX="hidden"),ve&&(Vn.pointerEvents="none")));var Nr={};return V&&(Nr.dir="rtl"),b.createElement("div",ut({ref:z,style:re(re({},u),{},{position:"relative"}),className:U},Nr,T),b.createElement(ll,{onResize:ke},b.createElement(m,{className:"".concat(i,"-holder"),style:Vn,ref:W,onScroll:Ke,onMouseEnter:un},b.createElement(E$,{prefixCls:i,height:Ue,offsetX:fe,offsetY:Je,scrollWidth:y,onInnerResize:L,ref:J,innerProps:w,rtl:V,extra:En},ar))),O&&Ue>s&&b.createElement(lP,{ref:Ve,prefixCls:i,scrollOffset:Q,scrollRange:Ue,rtl:V,onScroll:bn,onStartMove:xe,onStopMove:we,spinSize:te,containerSize:Ee.height,style:E==null?void 0:E.verticalScrollBar,thumbStyle:E==null?void 0:E.verticalScrollBarThumb}),O&&y>Ee.width&&b.createElement(lP,{ref:$e,prefixCls:i,scrollOffset:fe,scrollRange:y,rtl:V,onScroll:bn,onStartMove:xe,onStopMove:we,spinSize:xt,containerSize:Ee.width,horizontal:!0,style:E==null?void 0:E.horizontalScrollBar,thumbStyle:E==null?void 0:E.horizontalScrollBarThumb}))}var M$=b.forwardRef(WY);M$.displayName="List";function qY(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var XY=["disabled","title","children","style","className"];function uP(n){return typeof n=="string"||typeof n=="number"}var KY=function(e,r){var i=LK(),o=i.prefixCls,s=i.id,a=i.open,l=i.multiple,c=i.mode,u=i.searchValue,d=i.toggleOpen,f=i.notFoundContent,h=i.onPopupScroll,p=b.useContext(nM),g=p.maxCount,y=p.flattenOptions,v=p.onActiveValue,m=p.defaultActiveFirstOption,x=p.onSelect,_=p.menuItemSelectedIcon,S=p.rawValues,w=p.fieldNames,C=p.virtual,E=p.direction,T=p.listHeight,M=p.listItemHeight,R=p.optionRender,N="".concat(o,"-item"),D=Lx(function(){return y},[a,y],function(fe,le){return le[0]&&fe[1]!==le[1]}),L=b.useRef(null),A=b.useMemo(function(){return l&&UC(g)&&(S==null?void 0:S.size)>=g},[l,g,S==null?void 0:S.size]),I=function(le){le.preventDefault()},P=function(le){var ge;(ge=L.current)===null||ge===void 0||ge.scrollTo(typeof le=="number"?{index:le}:le)},F=b.useCallback(function(fe){return c==="combobox"?!1:S.has(fe)},[c,st(S).toString(),S.size]),O=function(le){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,q=D.length,ve=0;ve<q;ve+=1){var be=(le+ve*ge+q)%q,xe=D[be]||{},we=xe.group,qe=xe.data;if(!we&&!(qe!=null&&qe.disabled)&&(F(qe.value)||!A))return be}return-1},V=b.useState(function(){return O(0)}),U=Ce(V,2),k=U[0],W=U[1],J=function(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;W(le);var q={source:ge?"keyboard":"mouse"},ve=D[le];if(!ve){v(null,-1,q);return}v(ve.value,le,q)};b.useEffect(function(){J(m!==!1?O(0):-1)},[D.length,u]);var z=b.useCallback(function(fe){return c==="combobox"?String(fe).toLowerCase()===u.toLowerCase():S.has(fe)},[c,u,st(S).toString(),S.size]);b.useEffect(function(){var fe=setTimeout(function(){if(!l&&a&&S.size===1){var ge=Array.from(S)[0],q=D.findIndex(function(ve){var be=ve.data;return be.value===ge});q!==-1&&(J(q),P(q))}});if(a){var le;(le=L.current)===null||le===void 0||le.scrollTo(void 0)}return function(){return clearTimeout(fe)}},[a,u]);var j=function(le){le!==void 0&&x(le,{selected:!S.has(le)}),l||d(!1)};if(b.useImperativeHandle(r,function(){return{onKeyDown:function(le){var ge=le.which,q=le.ctrlKey;switch(ge){case He.N:case He.P:case He.UP:case He.DOWN:{var ve=0;if(ge===He.UP?ve=-1:ge===He.DOWN?ve=1:qY()&&q&&(ge===He.N?ve=1:ge===He.P&&(ve=-1)),ve!==0){var be=O(k+ve,ve);P(be),J(be,!0)}break}case He.TAB:case He.ENTER:{var xe,we=D[k];we&&!(we!=null&&(xe=we.data)!==null&&xe!==void 0&&xe.disabled)&&!A?j(we.value):j(void 0),a&&le.preventDefault();break}case He.ESC:d(!1),a&&le.stopPropagation()}},onKeyUp:function(){},scrollTo:function(le){P(le)}}}),D.length===0)return b.createElement("div",{role:"listbox",id:"".concat(s,"_list"),className:"".concat(N,"-empty"),onMouseDown:I},f);var X=Object.keys(w).map(function(fe){return w[fe]}),Q=function(le){return le.label};function ne(fe,le){var ge=fe.group;return{role:ge?"presentation":"option",id:"".concat(s,"_list_").concat(le)}}var ye=function(le){var ge=D[le];if(!ge)return null;var q=ge.data||{},ve=q.value,be=ge.group,xe=ta(q,!0),we=Q(ge);return ge?b.createElement("div",ut({"aria-label":typeof we=="string"&&!be?we:null},xe,{key:le},ne(ge,le),{"aria-selected":z(ve)}),ve):null},me={role:"listbox",id:"".concat(s,"_list")};return b.createElement(b.Fragment,null,C&&b.createElement("div",ut({},me,{style:{height:0,width:0,overflow:"hidden"}}),ye(k-1),ye(k),ye(k+1)),b.createElement(M$,{itemKey:"key",ref:L,data:D,height:T,itemHeight:M,fullHeight:!1,onMouseDown:I,onScroll:h,virtual:C,direction:E,innerProps:C?null:me},function(fe,le){var ge=fe.group,q=fe.groupOption,ve=fe.data,be=fe.label,xe=fe.value,we=ve.key;if(ge){var qe,Fe=(qe=ve.title)!==null&&qe!==void 0?qe:uP(be)?be.toString():void 0;return b.createElement("div",{className:_e(N,"".concat(N,"-group"),ve.className),title:Fe},be!==void 0?be:we)}var H=ve.disabled,B=ve.title;ve.children;var K=ve.style,oe=ve.className,pe=Cn(ve,XY),ce=ua(pe,X),Ue=F(xe),Re=H||!Ue&&A,Le="".concat(N,"-option"),Je=_e(N,Le,oe,ee(ee(ee(ee({},"".concat(Le,"-grouped"),q),"".concat(Le,"-active"),k===le&&!Re),"".concat(Le,"-disabled"),Re),"".concat(Le,"-selected"),Ue)),Me=Q(fe),ze=!_||typeof _=="function"||Ue,Ee=typeof Me=="number"?Me:Me||xe,Pe=uP(Ee)?Ee.toString():void 0;return B!==void 0&&(Pe=B),b.createElement("div",ut({},ta(ce),C?{}:ne(fe,le),{"aria-selected":z(xe),className:Je,title:Pe,onMouseMove:function(){k===le||Re||J(le)},onClick:function(){Re||j(xe)},style:K}),b.createElement("div",{className:"".concat(Le,"-content")},typeof R=="function"?R(fe,{index:le}):Ee),b.isValidElement(_)||Ue,ze&&b.createElement(n_,{className:"".concat(N,"-option-state"),customizeIcon:_,customizeIconProps:{value:xe,disabled:Re,isSelected:Ue}},Ue?"✓":null))}))},YY=b.forwardRef(KY);const QY=function(n,e){var r=b.useRef({values:new Map,options:new Map}),i=b.useMemo(function(){var s=r.current,a=s.values,l=s.options,c=n.map(function(f){if(f.label===void 0){var h;return re(re({},f),{},{label:(h=a.get(f.value))===null||h===void 0?void 0:h.label})}return f}),u=new Map,d=new Map;return c.forEach(function(f){u.set(f.value,f),d.set(f.value,e.get(f.value)||l.get(f.value))}),r.current.values=u,r.current.options=d,c},[n,e]),o=b.useCallback(function(s){return e.get(s)||r.current.options.get(s)},[e]);return[i,o]};function Xb(n,e){return b$(n).join("").toUpperCase().includes(e)}const ZY=function(n,e,r,i,o){return b.useMemo(function(){if(!r||i===!1)return n;var s=e.options,a=e.label,l=e.value,c=[],u=typeof i=="function",d=r.toUpperCase(),f=u?i:function(p,g){return o?Xb(g[o],d):g[s]?Xb(g[a!=="children"?a:"label"],d):Xb(g[l],d)},h=u?function(p){return BC(p)}:function(p){return p};return n.forEach(function(p){if(p[s]){var g=f(r,h(p));if(g)c.push(p);else{var y=p[s].filter(function(v){return f(r,h(v))});y.length&&c.push(re(re({},p),{},ee({},s,y)))}return}f(r,h(p))&&c.push(p)}),c},[n,i,o,r,e])};var dP=0,JY=vi();function eQ(){var n;return JY?(n=dP,dP+=1):n="TEST_OR_SSR",n}function tQ(n){var e=b.useState(),r=Ce(e,2),i=r[0],o=r[1];return b.useEffect(function(){o("rc_select_".concat(eQ()))},[]),n||i}var nQ=["children","value"],rQ=["children"];function iQ(n){var e=n,r=e.key,i=e.props,o=i.children,s=i.value,a=Cn(i,nQ);return re({key:r,value:s!==void 0?s:r,children:o},a)}function R$(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ja(n).map(function(r,i){if(!b.isValidElement(r)||!r.type)return null;var o=r,s=o.type.isSelectOptGroup,a=o.key,l=o.props,c=l.children,u=Cn(l,rQ);return e||!s?iQ(r):re(re({key:"__RC_SELECT_GRP__".concat(a===null?i:a,"__"),label:a},u),{},{options:R$(c)})}).filter(function(r){return r})}var oQ=function(e,r,i,o,s){return b.useMemo(function(){var a=e,l=!e;l&&(a=R$(r));var c=new Map,u=new Map,d=function(p,g,y){y&&typeof y=="string"&&p.set(g[y],g)},f=function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<p.length;y+=1){var v=p[y];!v[i.options]||g?(c.set(v[i.value],v),d(u,v,i.label),d(u,v,o),d(u,v,s)):h(v[i.options],!0)}};return f(a),{options:a,valueOptions:c,labelOptions:u}},[e,r,i,o,s])};function fP(n){var e=b.useRef();e.current=n;var r=b.useCallback(function(){return e.current.apply(e,arguments)},[]);return r}var sQ=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],aQ=["inputValue"];function lQ(n){return!n||Rt(n)!=="object"}var cQ=b.forwardRef(function(n,e){var r=n.id,i=n.mode,o=n.prefixCls,s=o===void 0?"rc-select":o,a=n.backfill,l=n.fieldNames,c=n.inputValue,u=n.searchValue,d=n.onSearch,f=n.autoClearSearchValue,h=f===void 0?!0:f,p=n.onSelect,g=n.onDeselect,y=n.dropdownMatchSelectWidth,v=y===void 0?!0:y,m=n.filterOption,x=n.filterSort,_=n.optionFilterProp,S=n.optionLabelProp,w=n.options,C=n.optionRender,E=n.children,T=n.defaultActiveFirstOption,M=n.menuItemSelectedIcon,R=n.virtual,N=n.direction,D=n.listHeight,L=D===void 0?200:D,A=n.listItemHeight,I=A===void 0?20:A,P=n.labelRender,F=n.value,O=n.defaultValue,V=n.labelInValue,U=n.onChange,k=n.maxCount,W=Cn(n,sQ),J=tQ(r),z=$C(i),j=!!(!w&&E),X=b.useMemo(function(){return m===void 0&&i==="combobox"?!1:m},[m,i]),Q=b.useMemo(function(){return C$(l,j)},[JSON.stringify(l),j]),ne=no("",{value:u!==void 0?u:c,postState:function(ot){return ot||""}}),ye=Ce(ne,2),me=ye[0],fe=ye[1],le=oQ(w,E,Q,_,S),ge=le.valueOptions,q=le.labelOptions,ve=le.options,be=b.useCallback(function(Ke){var ot=b$(Ke);return ot.map(function(yt){var ft,bt,Dt,yn,un;if(lQ(yt))ft=yt;else{var Bn;Dt=yt.key,bt=yt.label,ft=(Bn=yt.value)!==null&&Bn!==void 0?Bn:Dt}var en=ge.get(ft);if(en){var En;bt===void 0&&(bt=en==null?void 0:en[S||Q.label]),Dt===void 0&&(Dt=(En=en==null?void 0:en.key)!==null&&En!==void 0?En:ft),yn=en==null?void 0:en.disabled,un=en==null?void 0:en.title}return{label:bt,value:ft,key:Dt,disabled:yn,title:un}})},[Q,S,ge]),xe=no(O,{value:F}),we=Ce(xe,2),qe=we[0],Fe=we[1],H=b.useMemo(function(){var Ke,ot=z&&qe===null?[]:qe,yt=be(ot);return i==="combobox"&&eY((Ke=yt[0])===null||Ke===void 0?void 0:Ke.value)?[]:yt},[qe,be,i,z]),B=QY(H,ge),K=Ce(B,2),oe=K[0],pe=K[1],ce=b.useMemo(function(){if(!i&&oe.length===1){var Ke=oe[0];if(Ke.value===null&&(Ke.label===null||Ke.label===void 0))return[]}return oe.map(function(ot){var yt;return re(re({},ot),{},{label:(yt=typeof P=="function"?P(ot):ot.label)!==null&&yt!==void 0?yt:ot.value})})},[i,oe,P]),Ue=b.useMemo(function(){return new Set(oe.map(function(Ke){return Ke.value}))},[oe]);b.useEffect(function(){if(i==="combobox"){var Ke,ot=(Ke=oe[0])===null||Ke===void 0?void 0:Ke.value;fe(JK(ot)?String(ot):"")}},[oe]);var Re=fP(function(Ke,ot){var yt=ot??Ke;return ee(ee({},Q.value,Ke),Q.label,yt)}),Le=b.useMemo(function(){if(i!=="tags")return ve;var Ke=st(ve),ot=function(ft){return ge.has(ft)};return st(oe).sort(function(yt,ft){return yt.value<ft.value?-1:1}).forEach(function(yt){var ft=yt.value;ot(ft)||Ke.push(Re(ft,yt.label))}),Ke},[Re,ve,ge,oe,i]),Je=ZY(Le,Q,me,X,_),Me=b.useMemo(function(){return i!=="tags"||!me||Je.some(function(Ke){return Ke[_||"value"]===me})||Je.some(function(Ke){return Ke[Q.value]===me})?Je:[Re(me)].concat(st(Je))},[Re,_,i,Je,me,Q]),ze=function Ke(ot){var yt=st(ot).sort(function(ft,bt){return x(ft,bt,{searchValue:me})});return yt.map(function(ft){return Array.isArray(ft.options)?re(re({},ft),{},{options:ft.options.length>0?Ke(ft.options):ft.options}):ft})},Ee=b.useMemo(function(){return x?ze(Me):Me},[Me,x,me]),Pe=b.useMemo(function(){return CY(Ee,{fieldNames:Q,childrenAsData:j})},[Ee,Q,j]),ke=function(ot){var yt=be(ot);if(Fe(yt),U&&(yt.length!==oe.length||yt.some(function(Dt,yn){var un;return((un=oe[yn])===null||un===void 0?void 0:un.value)!==(Dt==null?void 0:Dt.value)}))){var ft=V?yt:yt.map(function(Dt){return Dt.value}),bt=yt.map(function(Dt){return BC(pe(Dt.value))});U(z?ft:ft[0],z?bt:bt[0])}},Ve=b.useState(null),$e=Ce(Ve,2),xt=$e[0],te=$e[1],Qe=b.useState(0),Se=Ce(Qe,2),Oe=Se[0],Ze=Se[1],We=T!==void 0?T:i!=="combobox",wt=b.useCallback(function(Ke,ot){var yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ft=yt.source,bt=ft===void 0?"keyboard":ft;Ze(ot),a&&i==="combobox"&&Ke!==null&&bt==="keyboard"&&te(String(Ke))},[a,i]),At=function(ot,yt,ft){var bt=function(){var vt,$=pe(ot);return[V?{label:$==null?void 0:$[Q.label],value:ot,key:(vt=$==null?void 0:$.key)!==null&&vt!==void 0?vt:ot}:ot,BC($)]};if(yt&&p){var Dt=bt(),yn=Ce(Dt,2),un=yn[0],Bn=yn[1];p(un,Bn)}else if(!yt&&g&&ft!=="clear"){var en=bt(),En=Ce(en,2),ar=En[0],Vn=En[1];g(ar,Vn)}},dt=fP(function(Ke,ot){var yt,ft=z?ot.selected:!0;ft?yt=z?[].concat(st(oe),[Ke]):[Ke]:yt=oe.filter(function(bt){return bt.value!==Ke}),ke(yt),At(Ke,ft),i==="combobox"?te(""):(!$C||h)&&(fe(""),te(""))}),Xe=function(ot,yt){ke(ot);var ft=yt.type,bt=yt.values;(ft==="remove"||ft==="clear")&&bt.forEach(function(Dt){At(Dt.value,!1,ft)})},rt=function(ot,yt){if(fe(ot),te(null),yt.source==="submit"){var ft=(ot||"").trim();if(ft){var bt=Array.from(new Set([].concat(st(Ue),[ft])));ke(bt),At(ft,!0),fe("")}return}yt.source!=="blur"&&(i==="combobox"&&ke(ot),d==null||d(ot))},Ft=function(ot){var yt=ot;i!=="tags"&&(yt=ot.map(function(bt){var Dt=q.get(bt);return Dt==null?void 0:Dt.value}).filter(function(bt){return bt!==void 0}));var ft=Array.from(new Set([].concat(st(Ue),st(yt))));ke(ft),ft.forEach(function(bt){At(bt,!0)})},bn=b.useMemo(function(){var Ke=R!==!1&&v!==!1;return re(re({},le),{},{flattenOptions:Pe,onActiveValue:wt,defaultActiveFirstOption:We,onSelect:dt,menuItemSelectedIcon:M,rawValues:Ue,fieldNames:Q,virtual:Ke,direction:N,listHeight:L,listItemHeight:I,childrenAsData:j,maxCount:k,optionRender:C})},[k,le,Pe,wt,We,dt,M,Ue,Q,R,v,N,L,I,j,C]);return b.createElement(nM.Provider,{value:bn},b.createElement(AY,ut({},W,{id:J,prefixCls:s,ref:e,omitDomProps:aQ,mode:i,displayValues:ce,onDisplayValuesChange:Xe,direction:N,searchValue:me,onSearch:rt,autoClearSearchValue:h,onSearchSplit:Ft,dropdownMatchSelectWidth:v,OptionList:YY,emptyOptions:!Pe.length,activeValue:xt,activeDescendantId:"".concat(J,"_list_").concat(Oe)})))}),oM=cQ;oM.Option=iM;oM.OptGroup=rM;function Ty(n,e,r){return _e({[`${n}-status-success`]:e==="success",[`${n}-status-warning`]:e==="warning",[`${n}-status-error`]:e==="error",[`${n}-status-validating`]:e==="validating",[`${n}-has-feedback`]:r})}const r_=(n,e)=>e||n,uQ=()=>{const[,n]=io(),[e]=_c("Empty"),i=new Ln(n.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return b.createElement("svg",{style:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},b.createElement("title",null,(e==null?void 0:e.description)||"Empty"),b.createElement("g",{fill:"none",fillRule:"evenodd"},b.createElement("g",{transform:"translate(24 31.67)"},b.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),b.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),b.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),b.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),b.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),b.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),b.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},b.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),b.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},dQ=()=>{const[,n]=io(),[e]=_c("Empty"),{colorFill:r,colorFillTertiary:i,colorFillQuaternary:o,colorBgContainer:s}=n,{borderColor:a,shadowColor:l,contentColor:c}=b.useMemo(()=>({borderColor:new Ln(r).onBackground(s).toHexString(),shadowColor:new Ln(i).onBackground(s).toHexString(),contentColor:new Ln(o).onBackground(s).toHexString()}),[r,i,o,s]);return b.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},b.createElement("title",null,(e==null?void 0:e.description)||"Empty"),b.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},b.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),b.createElement("g",{fillRule:"nonzero",stroke:a},b.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),b.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))},fQ=n=>{const{componentCls:e,margin:r,marginXS:i,marginXL:o,fontSize:s,lineHeight:a}=n;return{[e]:{marginInline:i,fontSize:s,lineHeight:a,textAlign:"center",[`${e}-image`]:{height:n.emptyImgHeight,marginBottom:i,opacity:n.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:n.colorTextDescription},[`${e}-footer`]:{marginTop:r},"&-normal":{marginBlock:o,color:n.colorTextDescription,[`${e}-description`]:{color:n.colorTextDescription},[`${e}-image`]:{height:n.emptyImgHeightMD}},"&-small":{marginBlock:i,color:n.colorTextDescription,[`${e}-image`]:{height:n.emptyImgHeightSM}}}}},hQ=ai("Empty",n=>{const{componentCls:e,controlHeightLG:r,calc:i}=n,o=Un(n,{emptyImgCls:`${e}-img`,emptyImgHeight:i(r).mul(2.5).equal(),emptyImgHeightMD:r,emptyImgHeightSM:i(r).mul(.875).equal()});return[fQ(o)]});var pQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const A$=b.createElement(uQ,null),N$=b.createElement(dQ,null),Wc=n=>{var e,r,i,o,s,a,l,c;const{className:u,rootClassName:d,prefixCls:f,image:h=A$,description:p,children:g,imageStyle:y,style:v,classNames:m,styles:x}=n,_=pQ(n,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:S,direction:w,empty:C}=b.useContext($t),E=S("empty",f),[T,M,R]=hQ(E),[N]=_c("Empty"),D=typeof p<"u"?p:N==null?void 0:N.description,L=typeof D=="string"?D:"empty";let A=null;return typeof h=="string"?A=b.createElement("img",{alt:L,src:h}):A=h,T(b.createElement("div",Object.assign({className:_e(M,R,E,C==null?void 0:C.className,{[`${E}-normal`]:h===N$,[`${E}-rtl`]:w==="rtl"},u,d,(e=C==null?void 0:C.classNames)===null||e===void 0?void 0:e.root,m==null?void 0:m.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},(r=C==null?void 0:C.styles)===null||r===void 0?void 0:r.root),C==null?void 0:C.style),x==null?void 0:x.root),v)},_),b.createElement("div",{className:_e(`${E}-image`,(i=C==null?void 0:C.classNames)===null||i===void 0?void 0:i.image,m==null?void 0:m.image),style:Object.assign(Object.assign(Object.assign({},y),(o=C==null?void 0:C.styles)===null||o===void 0?void 0:o.image),x==null?void 0:x.image)},A),D&&b.createElement("div",{className:_e(`${E}-description`,(s=C==null?void 0:C.classNames)===null||s===void 0?void 0:s.description,m==null?void 0:m.description),style:Object.assign(Object.assign({},(a=C==null?void 0:C.styles)===null||a===void 0?void 0:a.description),x==null?void 0:x.description)},D),g&&b.createElement("div",{className:_e(`${E}-footer`,(l=C==null?void 0:C.classNames)===null||l===void 0?void 0:l.footer,m==null?void 0:m.footer),style:Object.assign(Object.assign({},(c=C==null?void 0:C.styles)===null||c===void 0?void 0:c.footer),x==null?void 0:x.footer)},g)))};Wc.PRESENTED_IMAGE_DEFAULT=A$;Wc.PRESENTED_IMAGE_SIMPLE=N$;const P$=n=>{const{componentName:e}=n,{getPrefixCls:r}=b.useContext($t),i=r("empty");switch(e){case"Table":case"List":return se.createElement(Wc,{image:Wc.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return se.createElement(Wc,{image:Wc.PRESENTED_IMAGE_SIMPLE,className:`${i}-small`});case"Table.filter":return null;default:return se.createElement(Wc,null)}},sM=function(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var i,o;const{variant:s,[n]:a}=b.useContext($t),l=b.useContext(DX),c=a==null?void 0:a.variant;let u;typeof e<"u"?u=e:r===!1?u="borderless":u=(o=(i=l??c)!==null&&i!==void 0?i:s)!==null&&o!==void 0?o:"outlined";const d=Mj.includes(u);return[u,d]},mQ=n=>{const r={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:n==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},r),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},r),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},r),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},r),{points:["br","tr"],offset:[0,-4]})}};function gQ(n,e){return n||mQ(e)}const hP=n=>{const{optionHeight:e,optionFontSize:r,optionLineHeight:i,optionPadding:o}=n;return{position:"relative",display:"block",minHeight:e,padding:o,color:n.colorText,fontWeight:"normal",fontSize:r,lineHeight:i,boxSizing:"border-box"}},vQ=n=>{const{antCls:e,componentCls:r}=n,i=`${r}-item`,o=`&${e}-slide-up-enter${e}-slide-up-enter-active`,s=`&${e}-slide-up-appear${e}-slide-up-appear-active`,a=`&${e}-slide-up-leave${e}-slide-up-leave-active`,l=`${r}-dropdown-placement-`;return[{[`${r}-dropdown`]:Object.assign(Object.assign({},ns(n)),{position:"absolute",top:-9999,zIndex:n.zIndexPopup,boxSizing:"border-box",padding:n.paddingXXS,overflow:"hidden",fontSize:n.fontSize,fontVariant:"initial",backgroundColor:n.colorBgElevated,borderRadius:n.borderRadiusLG,outline:"none",boxShadow:n.boxShadowSecondary,[`
          ${o}${l}bottomLeft,
          ${s}${l}bottomLeft
        `]:{animationName:RB},[`
          ${o}${l}topLeft,
          ${s}${l}topLeft,
          ${o}${l}topRight,
          ${s}${l}topRight
        `]:{animationName:NB},[`${a}${l}bottomLeft`]:{animationName:AB},[`
          ${a}${l}topLeft,
          ${a}${l}topRight
        `]:{animationName:PB},"&-hidden":{display:"none"},[i]:Object.assign(Object.assign({},hP(n)),{cursor:"pointer",transition:`background ${n.motionDurationSlow} ease`,borderRadius:n.borderRadiusSM,"&-group":{color:n.colorTextDescription,fontSize:n.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},pC),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${i}-option-disabled)`]:{backgroundColor:n.optionActiveBg},[`&-selected:not(${i}-option-disabled)`]:{color:n.optionSelectedColor,fontWeight:n.optionSelectedFontWeight,backgroundColor:n.optionSelectedBg,[`${i}-option-state`]:{color:n.colorPrimary},[`&:has(+ ${i}-option-selected:not(${i}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${i}-option-selected:not(${i}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${i}-option-selected`]:{backgroundColor:n.colorBgContainerDisabled},color:n.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:n.calc(n.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},hP(n)),{color:n.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},gN(n,"slide-up"),gN(n,"slide-down"),mN(n,"move-up"),mN(n,"move-down")]},yQ=n=>{const{multipleSelectItemHeight:e,paddingXXS:r,lineWidth:i,INTERNAL_FIXED_ITEM_MARGIN:o}=n,s=n.max(n.calc(r).sub(i).equal(),0),a=n.max(n.calc(s).sub(o).equal(),0);return{basePadding:s,containerPadding:a,itemHeight:De(e),itemLineHeight:De(n.calc(e).sub(n.calc(n.lineWidth).mul(2)).equal())}},xQ=n=>{const{multipleSelectItemHeight:e,selectHeight:r,lineWidth:i}=n;return n.calc(r).sub(e).div(2).sub(i).equal()},_Q=n=>{const{componentCls:e,iconCls:r,borderRadiusSM:i,motionDurationSlow:o,paddingXS:s,multipleItemColorDisabled:a,multipleItemBorderColorDisabled:l,colorIcon:c,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:d}=n;return{[`${e}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:d,borderRadius:i,cursor:"default",transition:`font-size ${o}, line-height ${o}, height ${o}`,marginInlineEnd:n.calc(d).mul(2).equal(),paddingInlineStart:s,paddingInlineEnd:n.calc(s).div(2).equal(),[`${e}-disabled&`]:{color:a,borderColor:l,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:n.calc(s).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},Gx()),{display:"inline-flex",alignItems:"center",color:c,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${r}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},bQ=(n,e)=>{const{componentCls:r,INTERNAL_FIXED_ITEM_MARGIN:i}=n,o=`${r}-selection-overflow`,s=n.multipleSelectItemHeight,a=xQ(n),l=e?`${r}-${e}`:"",c=yQ(n);return{[`${r}-multiple${l}`]:Object.assign(Object.assign({},_Q(n)),{[`${r}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:c.basePadding,paddingBlock:c.containerPadding,borderRadius:n.borderRadius,[`${r}-disabled&`]:{background:n.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${De(i)} 0`,lineHeight:De(s),visibility:"hidden",content:'"\\a0"'}},[`${r}-selection-item`]:{height:c.itemHeight,lineHeight:De(c.itemLineHeight)},[`${r}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:De(s),marginBlock:i}},[`${r}-prefix`]:{marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal()},[`${o}-item + ${o}-item,
        ${r}-prefix + ${r}-selection-wrap
      `]:{[`${r}-selection-search`]:{marginInlineStart:0},[`${r}-selection-placeholder`]:{insetInlineStart:0}},[`${o}-item-suffix`]:{minHeight:c.itemHeight,marginBlock:i},[`${r}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(a).equal(),"\n          &-input,\n          &-mirror\n        ":{height:s,fontFamily:n.fontFamily,lineHeight:De(s),transition:`all ${n.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${r}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal(),insetInlineEnd:n.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${n.motionDurationSlow}`}})}};function Kb(n,e){const{componentCls:r}=n,i=e?`${r}-${e}`:"",o={[`${r}-multiple${i}`]:{fontSize:n.fontSize,[`${r}-selector`]:{[`${r}-show-search&`]:{cursor:"text"}},[`
        &${r}-show-arrow ${r}-selector,
        &${r}-allow-clear ${r}-selector
      `]:{paddingInlineEnd:n.calc(n.fontSizeIcon).add(n.controlPaddingHorizontal).equal()}}};return[bQ(n,e),o]}const SQ=n=>{const{componentCls:e}=n,r=Un(n,{selectHeight:n.controlHeightSM,multipleSelectItemHeight:n.multipleItemHeightSM,borderRadius:n.borderRadiusSM,borderRadiusSM:n.borderRadiusXS}),i=Un(n,{fontSize:n.fontSizeLG,selectHeight:n.controlHeightLG,multipleSelectItemHeight:n.multipleItemHeightLG,borderRadius:n.borderRadiusLG,borderRadiusSM:n.borderRadius});return[Kb(n),Kb(r,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},Kb(i,"lg")]};function Yb(n,e){const{componentCls:r,inputPaddingHorizontalBase:i,borderRadius:o}=n,s=n.calc(n.controlHeight).sub(n.calc(n.lineWidth).mul(2)).equal(),a=e?`${r}-${e}`:"";return{[`${r}-single${a}`]:{fontSize:n.fontSize,height:n.controlHeight,[`${r}-selector`]:Object.assign(Object.assign({},ns(n,!0)),{display:"flex",borderRadius:o,flex:"1 1 auto",[`${r}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${r}-selection-item,
          ${r}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:De(s),transition:`all ${n.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${r}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${r}-selection-item:empty:after`,`${r}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${r}-show-arrow ${r}-selection-item,
        &${r}-show-arrow ${r}-selection-search,
        &${r}-show-arrow ${r}-selection-placeholder
      `]:{paddingInlineEnd:n.showArrowPaddingInlineEnd},[`&${r}-open ${r}-selection-item`]:{color:n.colorTextPlaceholder},[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${De(i)}`,[`${r}-selection-search-input`]:{height:s},"&:after":{lineHeight:De(s)}}},[`&${r}-customize-input`]:{[`${r}-selector`]:{"&:after":{display:"none"},[`${r}-selection-search`]:{position:"static",width:"100%"},[`${r}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${De(i)}`,"&:after":{display:"none"}}}}}}}function wQ(n){const{componentCls:e}=n,r=n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal();return[Yb(n),Yb(Un(n,{controlHeight:n.controlHeightSM,borderRadius:n.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selector`]:{padding:`0 ${De(r)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:n.calc(r).add(n.calc(n.fontSize).mul(1.5)).equal()},[`
            &${e}-show-arrow ${e}-selection-item,
            &${e}-show-arrow ${e}-selection-placeholder
          `]:{paddingInlineEnd:n.calc(n.fontSize).mul(1.5).equal()}}}},Yb(Un(n,{controlHeight:n.singleItemHeightLG,fontSize:n.fontSizeLG,borderRadius:n.borderRadiusLG}),"lg")]}const CQ=n=>{const{fontSize:e,lineHeight:r,lineWidth:i,controlHeight:o,controlHeightSM:s,controlHeightLG:a,paddingXXS:l,controlPaddingHorizontal:c,zIndexPopupBase:u,colorText:d,fontWeightStrong:f,controlItemBgActive:h,controlItemBgHover:p,colorBgContainer:g,colorFillSecondary:y,colorBgContainerDisabled:v,colorTextDisabled:m,colorPrimaryHover:x,colorPrimary:_,controlOutline:S}=n,w=l*2,C=i*2,E=Math.min(o-w,o-C),T=Math.min(s-w,s-C),M=Math.min(a-w,a-C);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(l/2),zIndexPopup:u+50,optionSelectedColor:d,optionSelectedFontWeight:f,optionSelectedBg:h,optionActiveBg:p,optionPadding:`${(o-e*r)/2}px ${c}px`,optionFontSize:e,optionLineHeight:r,optionHeight:o,selectorBg:g,clearBg:g,singleItemHeightLG:a,multipleItemBg:y,multipleItemBorderColor:"transparent",multipleItemHeight:E,multipleItemHeightSM:T,multipleItemHeightLG:M,multipleSelectorBgDisabled:v,multipleItemColorDisabled:m,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(n.fontSize*1.25),hoverBorderColor:x,activeBorderColor:_,activeOutlineColor:S,selectAffixPadding:l}},O$=(n,e)=>{const{componentCls:r,antCls:i,controlOutlineWidth:o}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{border:`${De(n.lineWidth)} ${n.lineType} ${e.borderColor}`,background:n.selectorBg},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{borderColor:e.hoverBorderHover},[`${r}-focused& ${r}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${De(o)} ${e.activeOutlineColor}`,outline:0},[`${r}-prefix`]:{color:e.color}}}},pP=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},O$(n,e))}),EQ=n=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},O$(n,{borderColor:n.colorBorder,hoverBorderHover:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeOutlineColor:n.activeOutlineColor,color:n.colorText})),pP(n,{status:"error",borderColor:n.colorError,hoverBorderHover:n.colorErrorHover,activeBorderColor:n.colorError,activeOutlineColor:n.colorErrorOutline,color:n.colorError})),pP(n,{status:"warning",borderColor:n.colorWarning,hoverBorderHover:n.colorWarningHover,activeBorderColor:n.colorWarning,activeOutlineColor:n.colorWarningOutline,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}})}),I$=(n,e)=>{const{componentCls:r,antCls:i}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{background:e.bg,border:`${De(n.lineWidth)} ${n.lineType} transparent`,color:e.color},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{background:e.hoverBg},[`${r}-focused& ${r}-selector`]:{background:n.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},mP=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},I$(n,e))}),TQ=n=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},I$(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor,color:n.colorText})),mP(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,color:n.colorError})),mP(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{borderColor:n.colorBorder,background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.colorBgContainer,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}})}),MQ=n=>({"&-borderless":{[`${n.componentCls}-selector`]:{background:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`},[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`},[`&${n.componentCls}-status-error`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorError}},[`&${n.componentCls}-status-warning`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorWarning}}}}),RQ=n=>({[n.componentCls]:Object.assign(Object.assign(Object.assign({},EQ(n)),TQ(n)),MQ(n))}),AQ=n=>{const{componentCls:e}=n;return{position:"relative",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},NQ=n=>{const{componentCls:e}=n;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},PQ=n=>{const{antCls:e,componentCls:r,inputPaddingHorizontalBase:i,iconCls:o}=n;return{[r]:Object.assign(Object.assign({},ns(n)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${r}-customize-input) ${r}-selector`]:Object.assign(Object.assign({},AQ(n)),NQ(n)),[`${r}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},pC),{[`> ${e}-typography`]:{display:"inline"}}),[`${r}-selection-placeholder`]:Object.assign(Object.assign({},pC),{flex:1,color:n.colorTextPlaceholder,pointerEvents:"none"}),[`${r}-arrow`]:Object.assign(Object.assign({},Gx()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${n.motionDurationSlow} ease`,[o]:{verticalAlign:"top",transition:`transform ${n.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${r}-suffix)`]:{pointerEvents:"auto"}},[`${r}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${r}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${r}-prefix`]:{flex:"none",marginInlineEnd:n.selectAffixPadding},[`${r}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,zIndex:1,display:"inline-block",width:n.fontSizeIcon,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${n.motionDurationMid} ease, opacity ${n.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:n.colorTextTertiary}},[`&:hover ${r}-clear`]:{opacity:1,background:n.colorBgBase,borderRadius:"50%"}}),[`${r}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${r}-has-feedback`]:{[`${r}-clear`]:{insetInlineEnd:n.calc(i).add(n.fontSize).add(n.paddingXS).equal()}}}}}},OQ=n=>{const{componentCls:e}=n;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},PQ(n),wQ(n),SQ(n),vQ(n),{[`${e}-rtl`]:{direction:"rtl"}},JT(n,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]},IQ=ai("Select",(n,e)=>{let{rootPrefixCls:r}=e;const i=Un(n,{rootPrefixCls:r,inputPaddingHorizontalBase:n.calc(n.paddingSM).sub(1).equal(),multipleSelectItemHeight:n.multipleItemHeight,selectHeight:n.controlHeight});return[OQ(i),RQ(i)]},CQ,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var DQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},LQ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:DQ}))},D$=b.forwardRef(LQ),FQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},UQ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:FQ}))},BQ=b.forwardRef(UQ),$Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},zQ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:$Q}))},L$=b.forwardRef(zQ);function kQ(n){let{suffixIcon:e,clearIcon:r,menuItemSelectedIcon:i,removeIcon:o,loading:s,multiple:a,hasFeedback:l,prefixCls:c,showSuffixIcon:u,feedbackIcon:d,showArrow:f,componentName:h}=n;const p=r??b.createElement(Hx,null),g=x=>e===null&&!l&&!f?null:b.createElement(b.Fragment,null,u!==!1&&x,l&&d);let y=null;if(e!==void 0)y=g(e);else if(s)y=g(b.createElement(sg,{spin:!0}));else{const x=`${c}-suffix`;y=_=>{let{open:S,showSearch:w}=_;return g(S&&w?b.createElement(L$,{className:x}):b.createElement(BQ,{className:x}))}}let v=null;i!==void 0?v=i:a?v=b.createElement(D$,null):v=null;let m=null;return o!==void 0?m=o:m=b.createElement(og,null),{clearIcon:p,suffixIcon:y,itemIcon:v,removeIcon:m}}function VQ(n,e){return e!==void 0?e:n!==null}var GQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const F$="SECRET_COMBOBOX_MODE_DO_NOT_USE",HQ=(n,e)=>{var r;const{prefixCls:i,bordered:o,className:s,rootClassName:a,getPopupContainer:l,popupClassName:c,dropdownClassName:u,listHeight:d=256,placement:f,listItemHeight:h,size:p,disabled:g,notFoundContent:y,status:v,builtinPlacements:m,dropdownMatchSelectWidth:x,popupMatchSelectWidth:_,direction:S,style:w,allowClear:C,variant:E,dropdownStyle:T,transitionName:M,tagRender:R,maxCount:N,prefix:D}=n,L=GQ(n,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:A,getPrefixCls:I,renderEmpty:P,direction:F,virtual:O,popupMatchSelectWidth:V,popupOverflow:U,select:k}=b.useContext($t),[,W]=io(),J=h??(W==null?void 0:W.controlHeight),z=I("select",i),j=I(),X=S??F,{compactSize:Q,compactItemClassnames:ne}=qx(z,X),[ye,me]=sM("select",E,o),fe=bc(z),[le,ge,q]=IQ(z,fe),ve=b.useMemo(()=>{const{mode:xt}=n;if(xt!=="combobox")return xt===F$?"combobox":xt},[n.mode]),be=ve==="multiple"||ve==="tags",xe=VQ(n.suffixIcon,n.showArrow),we=(r=_??x)!==null&&r!==void 0?r:V,{status:qe,hasFeedback:Fe,isFormItemInput:H,feedbackIcon:B}=b.useContext(tl),K=r_(qe,v);let oe;y!==void 0?oe=y:ve==="combobox"?oe=null:oe=(P==null?void 0:P("Select"))||b.createElement(P$,{componentName:"Select"});const{suffixIcon:pe,itemIcon:ce,removeIcon:Ue,clearIcon:Re}=kQ(Object.assign(Object.assign({},L),{multiple:be,hasFeedback:Fe,feedbackIcon:B,showSuffixIcon:xe,prefixCls:z,componentName:"Select"})),Le=C===!0?{clearIcon:Re}:C,Je=ua(L,["suffixIcon","itemIcon"]),Me=_e(c||u,{[`${z}-dropdown-${X}`]:X==="rtl"},a,q,fe,ge),ze=da(xt=>{var te;return(te=p??Q)!==null&&te!==void 0?te:xt}),Ee=b.useContext(el),Pe=g??Ee,ke=_e({[`${z}-lg`]:ze==="large",[`${z}-sm`]:ze==="small",[`${z}-rtl`]:X==="rtl",[`${z}-${ye}`]:me,[`${z}-in-form-item`]:H},Ty(z,K,Fe),ne,k==null?void 0:k.className,s,a,q,fe,ge),Ve=b.useMemo(()=>f!==void 0?f:X==="rtl"?"bottomRight":"bottomLeft",[f,X]),[$e]=XT("SelectLike",T==null?void 0:T.zIndex);return le(b.createElement(oM,Object.assign({ref:e,virtual:O,showSearch:k==null?void 0:k.showSearch},Je,{style:Object.assign(Object.assign({},k==null?void 0:k.style),w),dropdownMatchSelectWidth:we,transitionName:wf(j,"slide-up",M),builtinPlacements:gQ(m,U),listHeight:d,listItemHeight:J,mode:ve,prefixCls:z,placement:Ve,direction:X,prefix:D,suffixIcon:pe,menuItemSelectedIcon:ce,removeIcon:Ue,allowClear:Le,notFoundContent:oe,className:ke,getPopupContainer:l||A,dropdownClassName:Me,disabled:Pe,dropdownStyle:Object.assign(Object.assign({},T),{zIndex:$e}),maxCount:be?N:void 0,tagRender:be?R:void 0})))},Uu=b.forwardRef(HQ),jQ=IK(Uu,"dropdownAlign");Uu.SECRET_COMBOBOX_MODE_DO_NOT_USE=F$;Uu.Option=iM;Uu.OptGroup=rM;Uu._InternalPanelDoNotUseOrYouWillBeFired=jQ;const bu=["xxl","xl","lg","md","sm","xs"],WQ=n=>({xs:`(max-width: ${n.screenXSMax}px)`,sm:`(min-width: ${n.screenSM}px)`,md:`(min-width: ${n.screenMD}px)`,lg:`(min-width: ${n.screenLG}px)`,xl:`(min-width: ${n.screenXL}px)`,xxl:`(min-width: ${n.screenXXL}px)`}),qQ=n=>{const e=n,r=[].concat(bu).reverse();return r.forEach((i,o)=>{const s=i.toUpperCase(),a=`screen${s}Min`,l=`screen${s}`;if(!(e[a]<=e[l]))throw new Error(`${a}<=${l} fails : !(${e[a]}<=${e[l]})`);if(o<r.length-1){const c=`screen${s}Max`;if(!(e[l]<=e[c]))throw new Error(`${l}<=${c} fails : !(${e[l]}<=${e[c]})`);const d=`screen${r[o+1].toUpperCase()}Min`;if(!(e[c]<=e[d]))throw new Error(`${c}<=${d} fails : !(${e[c]}<=${e[d]})`)}}),n};function U$(){const[,n]=io(),e=WQ(qQ(n));return se.useMemo(()=>{const r=new Map;let i=-1,o={};return{matchHandlers:{},dispatch(s){return o=s,r.forEach(a=>a(o)),r.size>=1},subscribe(s){return r.size||this.register(),i+=1,r.set(i,s),s(o),i},unsubscribe(s){r.delete(s),r.size||this.unregister()},unregister(){Object.keys(e).forEach(s=>{const a=e[s],l=this.matchHandlers[a];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),r.clear()},register(){Object.keys(e).forEach(s=>{const a=e[s],l=u=>{let{matches:d}=u;this.dispatch(Object.assign(Object.assign({},o),{[s]:d}))},c=window.matchMedia(a);c.addListener(l),this.matchHandlers[a]={mql:c,listener:l},l(c)})},responsiveMap:e}},[n])}function XQ(){const[,n]=b.useReducer(e=>e+1,0);return n}function B$(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const e=b.useRef({}),r=XQ(),i=U$();return _n(()=>{const o=i.subscribe(s=>{e.current=s,n&&r()});return()=>i.unsubscribe(o)},[]),e.current}function $$(n){var e=n.children,r=n.prefixCls,i=n.id,o=n.overlayInnerStyle,s=n.bodyClassName,a=n.className,l=n.style;return b.createElement("div",{className:_e("".concat(r,"-content"),a),style:l},b.createElement("div",{className:_e("".concat(r,"-inner"),s),id:i,role:"tooltip",style:o},typeof e=="function"?e():e))}var Ju={shiftX:64,adjustY:1},ed={adjustX:1,shiftY:!0},Io=[0,0],KQ={left:{points:["cr","cl"],overflow:ed,offset:[-4,0],targetOffset:Io},right:{points:["cl","cr"],overflow:ed,offset:[4,0],targetOffset:Io},top:{points:["bc","tc"],overflow:Ju,offset:[0,-4],targetOffset:Io},bottom:{points:["tc","bc"],overflow:Ju,offset:[0,4],targetOffset:Io},topLeft:{points:["bl","tl"],overflow:Ju,offset:[0,-4],targetOffset:Io},leftTop:{points:["tr","tl"],overflow:ed,offset:[-4,0],targetOffset:Io},topRight:{points:["br","tr"],overflow:Ju,offset:[0,-4],targetOffset:Io},rightTop:{points:["tl","tr"],overflow:ed,offset:[4,0],targetOffset:Io},bottomRight:{points:["tr","br"],overflow:Ju,offset:[0,4],targetOffset:Io},rightBottom:{points:["bl","br"],overflow:ed,offset:[4,0],targetOffset:Io},bottomLeft:{points:["tl","bl"],overflow:Ju,offset:[0,4],targetOffset:Io},leftBottom:{points:["br","bl"],overflow:ed,offset:[-4,0],targetOffset:Io}},YQ=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],QQ=function(e,r){var i=e.overlayClassName,o=e.trigger,s=o===void 0?["hover"]:o,a=e.mouseEnterDelay,l=a===void 0?0:a,c=e.mouseLeaveDelay,u=c===void 0?.1:c,d=e.overlayStyle,f=e.prefixCls,h=f===void 0?"rc-tooltip":f,p=e.children,g=e.onVisibleChange,y=e.afterVisibleChange,v=e.transitionName,m=e.animation,x=e.motion,_=e.placement,S=_===void 0?"right":_,w=e.align,C=w===void 0?{}:w,E=e.destroyTooltipOnHide,T=E===void 0?!1:E,M=e.defaultVisible,R=e.getTooltipContainer,N=e.overlayInnerStyle;e.arrowContent;var D=e.overlay,L=e.id,A=e.showArrow,I=A===void 0?!0:A,P=e.classNames,F=e.styles,O=Cn(e,YQ),V=b.useRef(null);b.useImperativeHandle(r,function(){return V.current});var U=re({},O);"visible"in e&&(U.popupVisible=e.visible);var k=function(){return b.createElement($$,{key:"content",prefixCls:h,id:L,bodyClassName:P==null?void 0:P.body,overlayInnerStyle:re(re({},N),F==null?void 0:F.body)},D)};return b.createElement(w$,ut({popupClassName:_e(i,P==null?void 0:P.root),prefixCls:h,popup:k,action:s,builtinPlacements:KQ,popupPlacement:S,ref:V,popupAlign:C,getPopupContainer:R,onPopupVisibleChange:g,afterPopupVisibleChange:y,popupTransitionName:v,popupAnimation:m,popupMotion:x,defaultPopupVisible:M,autoDestroy:T,mouseLeaveDelay:u,popupStyle:re(re({},d),F==null?void 0:F.root),mouseEnterDelay:l,arrow:I},U),p)};const ZQ=b.forwardRef(QQ);function JQ(n){const{sizePopupArrow:e,borderRadiusXS:r,borderRadiusOuter:i}=n,o=e/2,s=0,a=o,l=i*1/Math.sqrt(2),c=o-i*(1-1/Math.sqrt(2)),u=o-r*(1/Math.sqrt(2)),d=i*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),f=2*o-u,h=d,p=2*o-l,g=c,y=2*o-s,v=a,m=o*Math.sqrt(2)+i*(Math.sqrt(2)-2),x=i*(Math.sqrt(2)-1),_=`polygon(${x}px 100%, 50% ${x}px, ${2*o-x}px 100%, ${x}px 100%)`,S=`path('M ${s} ${a} A ${i} ${i} 0 0 0 ${l} ${c} L ${u} ${d} A ${r} ${r} 0 0 1 ${f} ${h} L ${p} ${g} A ${i} ${i} 0 0 0 ${y} ${v} Z')`;return{arrowShadowWidth:m,arrowPath:S,arrowPolygon:_}}const eZ=(n,e,r)=>{const{sizePopupArrow:i,arrowPolygon:o,arrowPath:s,arrowShadowWidth:a,borderRadiusXS:l,calc:c}=n;return{pointerEvents:"none",width:i,height:i,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:i,height:c(i).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[o,s]},content:'""'},"&::after":{content:'""',position:"absolute",width:a,height:a,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${De(l)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:r,zIndex:0,background:"transparent"}}},z$=8;function k$(n){const{contentRadius:e,limitVerticalRadius:r}=n,i=e>12?e+2:12;return{arrowOffsetHorizontal:i,arrowOffsetVertical:r?z$:i}}function av(n,e){return n?e:{}}function tZ(n,e,r){const{componentCls:i,boxShadowPopoverArrow:o,arrowOffsetVertical:s,arrowOffsetHorizontal:a}=n,{arrowDistance:l=0,arrowPlacement:c={left:!0,right:!0,top:!0,bottom:!0}}={};return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},eZ(n,e,o)),{"&:before":{background:e}})]},av(!!c.top,{[[`&-placement-top > ${i}-arrow`,`&-placement-topLeft > ${i}-arrow`,`&-placement-topRight > ${i}-arrow`].join(",")]:{bottom:l,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":a,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${De(a)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),av(!!c.bottom,{[[`&-placement-bottom > ${i}-arrow`,`&-placement-bottomLeft > ${i}-arrow`,`&-placement-bottomRight > ${i}-arrow`].join(",")]:{top:l,transform:"translateY(-100%)"},[`&-placement-bottom > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":a,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${De(a)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),av(!!c.left,{[[`&-placement-left > ${i}-arrow`,`&-placement-leftTop > ${i}-arrow`,`&-placement-leftBottom > ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:l},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${i}-arrow`]:{top:s},[`&-placement-leftBottom > ${i}-arrow`]:{bottom:s}})),av(!!c.right,{[[`&-placement-right > ${i}-arrow`,`&-placement-rightTop > ${i}-arrow`,`&-placement-rightBottom > ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:l},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${i}-arrow`]:{top:s},[`&-placement-rightBottom > ${i}-arrow`]:{bottom:s}}))}}function nZ(n,e,r,i){if(i===!1)return{adjustX:!1,adjustY:!1};const o=i&&typeof i=="object"?i:{},s={};switch(n){case"top":case"bottom":s.shiftX=e.arrowOffsetHorizontal*2+r,s.shiftY=!0,s.adjustY=!0;break;case"left":case"right":s.shiftY=e.arrowOffsetVertical*2+r,s.shiftX=!0,s.adjustX=!0;break}const a=Object.assign(Object.assign({},s),o);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}const gP={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},rZ={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},iZ=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function oZ(n){const{arrowWidth:e,autoAdjustOverflow:r,arrowPointAtCenter:i,offset:o,borderRadius:s}=n,a=e/2,l={};return Object.keys(gP).forEach(c=>{const u=i&&rZ[c]||gP[c],d=Object.assign(Object.assign({},u),{offset:[0,0],dynamicInset:!0});switch(l[c]=d,iZ.has(c)&&(d.autoArrow=!1),c){case"top":case"topLeft":case"topRight":d.offset[1]=-a-o;break;case"bottom":case"bottomLeft":case"bottomRight":d.offset[1]=a+o;break;case"left":case"leftTop":case"leftBottom":d.offset[0]=-a-o;break;case"right":case"rightTop":case"rightBottom":d.offset[0]=a+o;break}const f=k$({contentRadius:s,limitVerticalRadius:!0});if(i)switch(c){case"topLeft":case"bottomLeft":d.offset[0]=-f.arrowOffsetHorizontal-a;break;case"topRight":case"bottomRight":d.offset[0]=f.arrowOffsetHorizontal+a;break;case"leftTop":case"rightTop":d.offset[1]=-f.arrowOffsetHorizontal*2+a;break;case"leftBottom":case"rightBottom":d.offset[1]=f.arrowOffsetHorizontal*2-a;break}d.overflow=nZ(c,f,e,r),d.htmlRegion="visibleFirst"}),l}const sZ=n=>{const{calc:e,componentCls:r,tooltipMaxWidth:i,tooltipColor:o,tooltipBg:s,tooltipBorderRadius:a,zIndexPopup:l,controlHeight:c,boxShadowSecondary:u,paddingSM:d,paddingXS:f,arrowOffsetHorizontal:h,sizePopupArrow:p}=n,g=e(a).add(p).add(h).equal(),y=e(a).mul(2).add(p).equal();return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},ns(n)),{position:"absolute",zIndex:l,display:"block",width:"max-content",maxWidth:i,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":s,[`${r}-inner`]:{minWidth:y,minHeight:c,padding:`${De(n.calc(d).div(2).equal())} ${De(f)}`,color:o,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:s,borderRadius:a,boxShadow:u,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:g},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:n.min(a,z$)}},[`${r}-content`]:{position:"relative"}}),Jj(n,(v,m)=>{let{darkColor:x}=m;return{[`&${r}-${v}`]:{[`${r}-inner`]:{backgroundColor:x},[`${r}-arrow`]:{"--antd-arrow-background-color":x}}}})),{"&-rtl":{direction:"rtl"}})},tZ(n,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow}}]},aZ=n=>Object.assign(Object.assign({zIndexPopup:n.zIndexPopupBase+70},k$({contentRadius:n.borderRadius,limitVerticalRadius:!0})),JQ(Un(n,{borderRadiusOuter:Math.min(n.borderRadiusOuter,4)}))),V$=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ai("Tooltip",i=>{const{borderRadius:o,colorTextLightSolid:s,colorBgSpotlight:a}=i,l=Un(i,{tooltipMaxWidth:250,tooltipColor:s,tooltipBorderRadius:o,tooltipBg:a});return[sZ(l),OB(i,"zoom-big-fast")]},aZ,{resetStyle:!1,injectStyle:e})(n)},lZ=Sf.map(n=>`${n}-inverse`);function cZ(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(st(lZ),st(Sf)).includes(n):Sf.includes(n)}function G$(n,e){const r=cZ(e),i=_e({[`${n}-${e}`]:e&&r}),o={},s={};return e&&!r&&(o.background=e,s["--antd-arrow-background-color"]=e),{className:i,overlayStyle:o,arrowStyle:s}}const uZ=n=>{const{prefixCls:e,className:r,placement:i="top",title:o,color:s,overlayInnerStyle:a}=n,{getPrefixCls:l}=b.useContext($t),c=l("tooltip",e),[u,d,f]=V$(c),h=G$(c,s),p=h.arrowStyle,g=Object.assign(Object.assign({},a),h.overlayStyle),y=_e(d,f,c,`${c}-pure`,`${c}-placement-${i}`,r,h.className);return u(b.createElement("div",{className:y,style:p},b.createElement("div",{className:`${c}-arrow`}),b.createElement($$,Object.assign({},n,{className:d,prefixCls:c,overlayInnerStyle:g}),o)))};var dZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const fZ=b.forwardRef((n,e)=>{var r,i,o,s,a,l;const{prefixCls:c,openClassName:u,getTooltipContainer:d,color:f,overlayInnerStyle:h,children:p,afterOpenChange:g,afterVisibleChange:y,destroyTooltipOnHide:v,arrow:m=!0,title:x,overlay:_,builtinPlacements:S,arrowPointAtCenter:w=!1,autoAdjustOverflow:C=!0}=n,E=!!m,[,T]=io(),{getPopupContainer:M,getPrefixCls:R,direction:N,tooltip:D}=b.useContext($t),L=GT(),A=b.useRef(null),I=()=>{var Je;(Je=A.current)===null||Je===void 0||Je.forceAlign()};b.useImperativeHandle(e,()=>{var Je;return{forceAlign:I,forcePopupAlign:()=>{L.deprecated(!1,"forcePopupAlign","forceAlign"),I()},nativeElement:(Je=A.current)===null||Je===void 0?void 0:Je.nativeElement}});const[P,F]=no(!1,{value:(r=n.open)!==null&&r!==void 0?r:n.visible,defaultValue:(i=n.defaultOpen)!==null&&i!==void 0?i:n.defaultVisible}),O=!x&&!_&&x!==0,V=Je=>{var Me,ze;F(O?!1:Je),O||((Me=n.onOpenChange)===null||Me===void 0||Me.call(n,Je),(ze=n.onVisibleChange)===null||ze===void 0||ze.call(n,Je))},U=b.useMemo(()=>{var Je,Me;let ze=w;return typeof m=="object"&&(ze=(Me=(Je=m.pointAtCenter)!==null&&Je!==void 0?Je:m.arrowPointAtCenter)!==null&&Me!==void 0?Me:w),S||oZ({arrowPointAtCenter:ze,autoAdjustOverflow:C,arrowWidth:E?T.sizePopupArrow:0,borderRadius:T.borderRadius,offset:T.marginXXS})},[w,m,S,T]),k=b.useMemo(()=>x===0?x:_||x||"",[_,x]),W=b.createElement(Cy,{space:!0},typeof k=="function"?k():k),{getPopupContainer:J,placement:z="top",mouseEnterDelay:j=.1,mouseLeaveDelay:X=.1,overlayStyle:Q,rootClassName:ne,overlayClassName:ye,styles:me,classNames:fe}=n,le=dZ(n,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),ge=R("tooltip",c),q=R(),ve=n["data-popover-inject"];let be=P;!("open"in n)&&!("visible"in n)&&O&&(be=!1);const xe=b.isValidElement(p)&&!hB(p)?p:b.createElement("span",null,p),we=xe.props,qe=!we.className||typeof we.className=="string"?_e(we.className,u||`${ge}-open`):we.className,[Fe,H,B]=V$(ge,!ve),K=G$(ge,f),oe=K.arrowStyle,pe=_e(ye,{[`${ge}-rtl`]:N==="rtl"},K.className,ne,H,B,D==null?void 0:D.className,(o=D==null?void 0:D.classNames)===null||o===void 0?void 0:o.root,fe==null?void 0:fe.root),ce=_e((s=D==null?void 0:D.classNames)===null||s===void 0?void 0:s.body,fe==null?void 0:fe.body),[Ue,Re]=XT("Tooltip",le.zIndex),Le=b.createElement(ZQ,Object.assign({},le,{zIndex:Ue,showArrow:E,placement:z,mouseEnterDelay:j,mouseLeaveDelay:X,prefixCls:ge,classNames:{root:pe,body:ce},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oe),(a=D==null?void 0:D.styles)===null||a===void 0?void 0:a.root),D==null?void 0:D.style),Q),me==null?void 0:me.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},(l=D==null?void 0:D.styles)===null||l===void 0?void 0:l.body),h),me==null?void 0:me.body),K.overlayStyle)},getTooltipContainer:J||d||M,ref:A,builtinPlacements:U,overlay:W,visible:be,onVisibleChange:V,afterVisibleChange:g??y,arrowContent:b.createElement("span",{className:`${ge}-arrow-content`}),motion:{motionName:wf(q,"zoom-big-fast",n.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!v}),be?cc(xe,{className:qe}):xe);return Fe(b.createElement(qT.Provider,{value:Re},Le))}),pg=fZ;pg._InternalPanelDoNotUseOrYouWillBeFired=uZ;var hZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},pZ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:hZ}))},vP=b.forwardRef(pZ);function aM(n){return Un(n,{inputAffixPadding:n.paddingXXS})}const lM=n=>{const{controlHeight:e,fontSize:r,lineHeight:i,lineWidth:o,controlHeightSM:s,controlHeightLG:a,fontSizeLG:l,lineHeightLG:c,paddingSM:u,controlPaddingHorizontalSM:d,controlPaddingHorizontal:f,colorFillAlter:h,colorPrimaryHover:p,colorPrimary:g,controlOutlineWidth:y,controlOutline:v,colorErrorOutline:m,colorWarningOutline:x,colorBgContainer:_}=n;return{paddingBlock:Math.max(Math.round((e-r*i)/2*10)/10-o,0),paddingBlockSM:Math.max(Math.round((s-r*i)/2*10)/10-o,0),paddingBlockLG:Math.ceil((a-l*c)/2*10)/10-o,paddingInline:u-o,paddingInlineSM:d-o,paddingInlineLG:f-o,addonBg:h,activeBorderColor:g,hoverBorderColor:p,activeShadow:`0 0 0 ${y}px ${v}`,errorActiveShadow:`0 0 0 ${y}px ${m}`,warningActiveShadow:`0 0 0 ${y}px ${x}`,hoverBg:_,activeBg:_,inputFontSize:r,inputFontSizeLG:l,inputFontSizeSM:r}},mZ=n=>({borderColor:n.hoverBorderColor,backgroundColor:n.hoverBg}),i_=n=>({color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},mZ(Un(n,{hoverBorderColor:n.colorBorder,hoverBg:n.colorBgContainerDisabled})))}),cM=(n,e)=>({background:n.colorBgContainer,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:n.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:n.activeBg}}),yP=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},cM(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}}),[`&${n.componentCls}-status-${e.status}${n.componentCls}-disabled`]:{borderColor:e.borderColor}}),gZ=(n,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},cM(n,{borderColor:n.colorBorder,hoverBorderColor:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeShadow:n.activeShadow})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},i_(n))}),yP(n,{status:"error",borderColor:n.colorError,hoverBorderColor:n.colorErrorBorderHover,activeBorderColor:n.colorError,activeShadow:n.errorActiveShadow,affixColor:n.colorError})),yP(n,{status:"warning",borderColor:n.colorWarning,hoverBorderColor:n.colorWarningBorderHover,activeBorderColor:n.colorWarning,activeShadow:n.warningActiveShadow,affixColor:n.colorWarning})),e)}),xP=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),vZ=n=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.addonBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},xP(n,{status:"error",addonBorderColor:n.colorError,addonColor:n.colorErrorText})),xP(n,{status:"warning",addonBorderColor:n.colorWarning,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group-addon`]:Object.assign({},i_(n))}})}),yZ=(n,e)=>{const{componentCls:r}=n;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${r}-disabled, &[disabled]`]:{color:n.colorTextDisabled,cursor:"not-allowed"},[`&${r}-status-error`]:{"&, & input, & textarea":{color:n.colorError}},[`&${r}-status-warning`]:{"&, & input, & textarea":{color:n.colorWarning}}},e)}},H$=(n,e)=>({background:e.bg,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:e==null?void 0:e.inputColor},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:n.activeBg}}),_P=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},H$(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}})}),xZ=(n,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},H$(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},i_(n))}),_P(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,inputColor:n.colorErrorText,affixColor:n.colorError})),_P(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,inputColor:n.colorWarningText,affixColor:n.colorWarning})),e)}),bP=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),_Z=n=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary},[`${n.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}}}},bP(n,{status:"error",addonBg:n.colorErrorBg,addonColor:n.colorErrorText})),bP(n,{status:"warning",addonBg:n.colorWarningBg,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary,color:n.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`}}}})}),bZ=n=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:n,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),j$=n=>{const{paddingBlockLG:e,lineHeightLG:r,borderRadiusLG:i,paddingInlineLG:o}=n;return{padding:`${De(e)} ${De(o)}`,fontSize:n.inputFontSizeLG,lineHeight:r,borderRadius:i}},uM=n=>({padding:`${De(n.paddingBlockSM)} ${De(n.paddingInlineSM)}`,fontSize:n.inputFontSizeSM,borderRadius:n.borderRadiusSM}),dM=n=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${De(n.paddingBlock)} ${De(n.paddingInline)}`,color:n.colorText,fontSize:n.inputFontSize,lineHeight:n.lineHeight,borderRadius:n.borderRadius,transition:`all ${n.motionDurationMid}`},bZ(n.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:n.controlHeight,lineHeight:n.lineHeight,verticalAlign:"bottom",transition:`all ${n.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},j$(n)),"&-sm":Object.assign({},uM(n)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),SZ=n=>{const{componentCls:e,antCls:r}=n;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:n.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},j$(n)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},uM(n)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${De(n.paddingInline)}`,color:n.colorText,fontWeight:"normal",fontSize:n.inputFontSize,textAlign:"center",borderRadius:n.borderRadius,transition:`all ${n.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`${De(n.calc(n.paddingBlock).add(1).mul(-1).equal())} ${De(n.calc(n.paddingInline).mul(-1).equal())}`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${De(n.lineWidth)} ${n.lineType} transparent`,boxShadow:"none"}}},[`${r}-cascader-picker`]:{margin:`-9px ${De(n.calc(n.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},GU()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:n.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderInlineEndWidth:n.lineWidth},[e]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${e},
      & > ${r}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:n.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${e},
      & > ${r}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${e},
      & > ${r}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:n.lineWidth,borderStartEndRadius:n.borderRadius,borderEndEndRadius:n.borderRadius},[`& > ${r}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:n.calc(n.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:n.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:n.borderRadius}}}})}},wZ=n=>{const{componentCls:e,controlHeightSM:r,lineWidth:i,calc:o}=n,a=o(r).sub(o(i).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ns(n)),dM(n)),gZ(n)),xZ(n)),yZ(n)),{'&[type="color"]':{height:n.controlHeight,[`&${e}-lg`]:{height:n.controlHeightLG},[`&${e}-sm`]:{height:r,paddingTop:a,paddingBottom:a}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},CZ=n=>{const{componentCls:e}=n;return{[`${e}-clear-icon`]:{margin:0,lineHeight:0,color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${n.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:n.colorTextTertiary},"&:active":{color:n.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${De(n.inputAffixPadding)}`}}}},EZ=n=>{const{componentCls:e,inputAffixPadding:r,colorTextDescription:i,motionDurationSlow:o,colorIcon:s,colorIconHover:a,iconCls:l}=n,c=`${e}-affix-wrapper`,u=`${e}-affix-wrapper-disabled`;return{[c]:Object.assign(Object.assign(Object.assign(Object.assign({},dM(n)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:n.paddingXS}},"&-show-count-suffix":{color:i},"&-show-count-has-suffix":{marginInlineEnd:n.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),CZ(n)),{[`${l}${e}-password-icon`]:{color:s,cursor:"pointer",transition:`all ${o}`,"&:hover":{color:a}}}),[u]:{[`${l}${e}-password-icon`]:{color:s,cursor:"not-allowed","&:hover":{color:s}}}}},TZ=n=>{const{componentCls:e,borderRadiusLG:r,borderRadiusSM:i}=n;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},ns(n)),SZ(n)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:r,fontSize:n.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:i}}},vZ(n)),_Z(n)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},MZ=n=>{const{componentCls:e,antCls:r}=n,i=`${e}-search`;return{[i]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${i}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:n.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:n.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:n.calc(n.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${i}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${i}-button:not(${r}-btn-primary)`]:{color:n.colorTextDescription,"&:hover":{color:n.colorPrimaryHover},"&:active":{color:n.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${i}-button`]:{height:n.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},RZ=n=>{const{componentCls:e,paddingLG:r}=n,i=`${e}-textarea`;return{[i]:{position:"relative","&-show-count":{[`> ${e}`]:{height:"100%"},[`${e}-data-count`]:{position:"absolute",bottom:n.calc(n.fontSize).mul(n.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:n.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${i}-has-feedback ${e}
      `]:{paddingInlineEnd:r},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:n.paddingInline,insetBlockStart:n.paddingXS},[`${i}-suffix`]:{position:"absolute",top:0,insetInlineEnd:n.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:n.paddingInlineSM}}}}}},AZ=n=>{const{componentCls:e}=n;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:n.colorError}}}},fM=ai("Input",n=>{const e=Un(n,aM(n));return[wZ(e),RZ(e),EZ(e),TZ(e),MZ(e),AZ(e),JT(e)]},lM,{resetFont:!1});function NZ(n,e,r){var i=r||{},o=i.noTrailing,s=o===void 0?!1:o,a=i.noLeading,l=a===void 0?!1:a,c=i.debounceMode,u=c===void 0?void 0:c,d,f=!1,h=0;function p(){d&&clearTimeout(d)}function g(v){var m=v||{},x=m.upcomingOnly,_=x===void 0?!1:x;p(),f=!_}function y(){for(var v=arguments.length,m=new Array(v),x=0;x<v;x++)m[x]=arguments[x];var _=this,S=Date.now()-h;if(f)return;function w(){h=Date.now(),e.apply(_,m)}function C(){d=void 0}!l&&u&&!d&&w(),p(),u===void 0&&S>n?l?(h=Date.now(),s||(d=setTimeout(u?C:w,n))):w():s!==!0&&(d=setTimeout(u?C:w,u===void 0?n-S:n))}return y.cancel=g,y}function PZ(n,e,r){var i={},o=i.atBegin,s=o===void 0?!1:o;return NZ(n,e,{debounceMode:s!==!1})}const W$=b.createContext({});var OZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function SP(n){return typeof n=="number"?`${n} ${n} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(n)?`0 0 ${n}`:n}const IZ=["xs","sm","md","lg","xl","xxl"],DZ=b.forwardRef((n,e)=>{const{getPrefixCls:r,direction:i}=b.useContext($t),{gutter:o,wrap:s}=b.useContext(W$),{prefixCls:a,span:l,order:c,offset:u,push:d,pull:f,className:h,children:p,flex:g,style:y}=n,v=OZ(n,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),m=r("col",a),[x,_,S]=pK(m),w={};let C={};IZ.forEach(M=>{let R={};const N=n[M];typeof N=="number"?R.span=N:typeof N=="object"&&(R=N||{}),delete v[M],C=Object.assign(Object.assign({},C),{[`${m}-${M}-${R.span}`]:R.span!==void 0,[`${m}-${M}-order-${R.order}`]:R.order||R.order===0,[`${m}-${M}-offset-${R.offset}`]:R.offset||R.offset===0,[`${m}-${M}-push-${R.push}`]:R.push||R.push===0,[`${m}-${M}-pull-${R.pull}`]:R.pull||R.pull===0,[`${m}-rtl`]:i==="rtl"}),R.flex&&(C[`${m}-${M}-flex`]=!0,w[`--${m}-${M}-flex`]=SP(R.flex))});const E=_e(m,{[`${m}-${l}`]:l!==void 0,[`${m}-order-${c}`]:c,[`${m}-offset-${u}`]:u,[`${m}-push-${d}`]:d,[`${m}-pull-${f}`]:f},h,C,_,S),T={};if(o&&o[0]>0){const M=o[0]/2;T.paddingLeft=M,T.paddingRight=M}return g&&(T.flex=SP(g),s===!1&&!T.minWidth&&(T.minWidth=0)),x(b.createElement("div",Object.assign({},v,{style:Object.assign(Object.assign(Object.assign({},T),y),w),className:E,ref:e}),p))});var LZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function wP(n,e){const[r,i]=b.useState(typeof n=="string"?n:""),o=()=>{if(typeof n=="string"&&i(n),typeof n=="object")for(let s=0;s<bu.length;s++){const a=bu[s];if(!e[a])continue;const l=n[a];if(l!==void 0){i(l);return}}};return b.useEffect(()=>{o()},[JSON.stringify(n),e]),r}const FZ=b.forwardRef((n,e)=>{const{prefixCls:r,justify:i,align:o,className:s,style:a,children:l,gutter:c=0,wrap:u}=n,d=LZ(n,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:f,direction:h}=b.useContext($t),[p,g]=b.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[y,v]=b.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),m=wP(o,y),x=wP(i,y),_=b.useRef(c),S=U$();b.useEffect(()=>{const F=S.subscribe(O=>{v(O);const V=_.current||0;(!Array.isArray(V)&&typeof V=="object"||Array.isArray(V)&&(typeof V[0]=="object"||typeof V[1]=="object"))&&g(O)});return()=>S.unsubscribe(F)},[]);const w=()=>{const F=[void 0,void 0];return(Array.isArray(c)?c:[c,void 0]).forEach((V,U)=>{if(typeof V=="object")for(let k=0;k<bu.length;k++){const W=bu[k];if(p[W]&&V[W]!==void 0){F[U]=V[W];break}}else F[U]=V}),F},C=f("row",r),[E,T,M]=hK(C),R=w(),N=_e(C,{[`${C}-no-wrap`]:u===!1,[`${C}-${x}`]:x,[`${C}-${m}`]:m,[`${C}-rtl`]:h==="rtl"},s,T,M),D={},L=R[0]!=null&&R[0]>0?R[0]/-2:void 0;L&&(D.marginLeft=L,D.marginRight=L);const[A,I]=R;D.rowGap=I;const P=b.useMemo(()=>({gutter:[A,I],wrap:u}),[A,I,u]);return E(b.createElement(W$.Provider,{value:P},b.createElement("div",Object.assign({},d,{className:N,style:Object.assign(Object.assign({},D),a),ref:e}),l)))});function UZ(n){return!!(n.addonBefore||n.addonAfter)}function BZ(n){return!!(n.prefix||n.suffix||n.allowClear)}function CP(n,e,r){var i=e.cloneNode(!0),o=Object.create(n,{target:{value:i},currentTarget:{value:i}});return i.value=r,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(i.selectionStart=e.selectionStart,i.selectionEnd=e.selectionEnd),i.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},o}function My(n,e,r,i){if(r){var o=e;if(e.type==="click"){o=CP(e,n,""),r(o);return}if(n.type!=="file"&&i!==void 0){o=CP(e,n,i),r(o);return}r(o)}}function q$(n,e){if(n){n.focus(e);var r=e||{},i=r.cursor;if(i){var o=n.value.length;switch(i){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(o,o);break;default:n.setSelectionRange(0,o)}}}}var X$=se.forwardRef(function(n,e){var r,i,o,s=n.inputElement,a=n.children,l=n.prefixCls,c=n.prefix,u=n.suffix,d=n.addonBefore,f=n.addonAfter,h=n.className,p=n.style,g=n.disabled,y=n.readOnly,v=n.focused,m=n.triggerFocus,x=n.allowClear,_=n.value,S=n.handleReset,w=n.hidden,C=n.classes,E=n.classNames,T=n.dataAttrs,M=n.styles,R=n.components,N=n.onClear,D=a??s,L=(R==null?void 0:R.affixWrapper)||"span",A=(R==null?void 0:R.groupWrapper)||"span",I=(R==null?void 0:R.wrapper)||"span",P=(R==null?void 0:R.groupAddon)||"span",F=b.useRef(null),O=function(ve){var be;(be=F.current)!==null&&be!==void 0&&be.contains(ve.target)&&(m==null||m())},V=BZ(n),U=b.cloneElement(D,{value:_,className:_e((r=D.props)===null||r===void 0?void 0:r.className,!V&&(E==null?void 0:E.variant))||null}),k=b.useRef(null);if(se.useImperativeHandle(e,function(){return{nativeElement:k.current||F.current}}),V){var W=null;if(x){var J=!g&&!y&&_,z="".concat(l,"-clear-icon"),j=Rt(x)==="object"&&x!==null&&x!==void 0&&x.clearIcon?x.clearIcon:"✖";W=se.createElement("button",{type:"button",onClick:function(ve){S==null||S(ve),N==null||N()},onMouseDown:function(ve){return ve.preventDefault()},className:_e(z,ee(ee({},"".concat(z,"-hidden"),!J),"".concat(z,"-has-suffix"),!!u))},j)}var X="".concat(l,"-affix-wrapper"),Q=_e(X,ee(ee(ee(ee(ee({},"".concat(l,"-disabled"),g),"".concat(X,"-disabled"),g),"".concat(X,"-focused"),v),"".concat(X,"-readonly"),y),"".concat(X,"-input-with-clear-btn"),u&&x&&_),C==null?void 0:C.affixWrapper,E==null?void 0:E.affixWrapper,E==null?void 0:E.variant),ne=(u||x)&&se.createElement("span",{className:_e("".concat(l,"-suffix"),E==null?void 0:E.suffix),style:M==null?void 0:M.suffix},W,u);U=se.createElement(L,ut({className:Q,style:M==null?void 0:M.affixWrapper,onClick:O},T==null?void 0:T.affixWrapper,{ref:F}),c&&se.createElement("span",{className:_e("".concat(l,"-prefix"),E==null?void 0:E.prefix),style:M==null?void 0:M.prefix},c),U,ne)}if(UZ(n)){var ye="".concat(l,"-group"),me="".concat(ye,"-addon"),fe="".concat(ye,"-wrapper"),le=_e("".concat(l,"-wrapper"),ye,C==null?void 0:C.wrapper,E==null?void 0:E.wrapper),ge=_e(fe,ee({},"".concat(fe,"-disabled"),g),C==null?void 0:C.group,E==null?void 0:E.groupWrapper);U=se.createElement(A,{className:ge,ref:k},se.createElement(I,{className:le},d&&se.createElement(P,{className:me},d),U,f&&se.createElement(P,{className:me},f)))}return se.cloneElement(U,{className:_e((i=U.props)===null||i===void 0?void 0:i.className,h)||null,style:re(re({},(o=U.props)===null||o===void 0?void 0:o.style),p),hidden:w})}),$Z=["show"];function K$(n,e){return b.useMemo(function(){var r={};e&&(r.show=Rt(e)==="object"&&e.formatter?e.formatter:!!e),r=re(re({},r),n);var i=r,o=i.show,s=Cn(i,$Z);return re(re({},s),{},{show:!!o,showFormatter:typeof o=="function"?o:void 0,strategy:s.strategy||function(a){return a.length}})},[n,e])}var zZ=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],kZ=b.forwardRef(function(n,e){var r=n.autoComplete,i=n.onChange,o=n.onFocus,s=n.onBlur,a=n.onPressEnter,l=n.onKeyDown,c=n.onKeyUp,u=n.prefixCls,d=u===void 0?"rc-input":u,f=n.disabled,h=n.htmlSize,p=n.className,g=n.maxLength,y=n.suffix,v=n.showCount,m=n.count,x=n.type,_=x===void 0?"text":x,S=n.classes,w=n.classNames,C=n.styles,E=n.onCompositionStart,T=n.onCompositionEnd,M=Cn(n,zZ),R=b.useState(!1),N=Ce(R,2),D=N[0],L=N[1],A=b.useRef(!1),I=b.useRef(!1),P=b.useRef(null),F=b.useRef(null),O=function(oe){P.current&&q$(P.current,oe)},V=no(n.defaultValue,{value:n.value}),U=Ce(V,2),k=U[0],W=U[1],J=k==null?"":String(k),z=b.useState(null),j=Ce(z,2),X=j[0],Q=j[1],ne=K$(m,v),ye=ne.max||g,me=ne.strategy(J),fe=!!ye&&me>ye;b.useImperativeHandle(e,function(){var K;return{focus:O,blur:function(){var pe;(pe=P.current)===null||pe===void 0||pe.blur()},setSelectionRange:function(pe,ce,Ue){var Re;(Re=P.current)===null||Re===void 0||Re.setSelectionRange(pe,ce,Ue)},select:function(){var pe;(pe=P.current)===null||pe===void 0||pe.select()},input:P.current,nativeElement:((K=F.current)===null||K===void 0?void 0:K.nativeElement)||P.current}}),b.useEffect(function(){I.current&&(I.current=!1),L(function(K){return K&&f?!1:K})},[f]);var le=function(oe,pe,ce){var Ue=pe;if(!A.current&&ne.exceedFormatter&&ne.max&&ne.strategy(pe)>ne.max){if(Ue=ne.exceedFormatter(pe,{max:ne.max}),pe!==Ue){var Re,Le;Q([((Re=P.current)===null||Re===void 0?void 0:Re.selectionStart)||0,((Le=P.current)===null||Le===void 0?void 0:Le.selectionEnd)||0])}}else if(ce.source==="compositionEnd")return;W(Ue),P.current&&My(P.current,oe,i,Ue)};b.useEffect(function(){if(X){var K;(K=P.current)===null||K===void 0||K.setSelectionRange.apply(K,st(X))}},[X]);var ge=function(oe){le(oe,oe.target.value,{source:"change"})},q=function(oe){A.current=!1,le(oe,oe.currentTarget.value,{source:"compositionEnd"}),T==null||T(oe)},ve=function(oe){a&&oe.key==="Enter"&&!I.current&&(I.current=!0,a(oe)),l==null||l(oe)},be=function(oe){oe.key==="Enter"&&(I.current=!1),c==null||c(oe)},xe=function(oe){L(!0),o==null||o(oe)},we=function(oe){I.current&&(I.current=!1),L(!1),s==null||s(oe)},qe=function(oe){W(""),O(),P.current&&My(P.current,oe,i)},Fe=fe&&"".concat(d,"-out-of-range"),H=function(){var oe=ua(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return se.createElement("input",ut({autoComplete:r},oe,{onChange:ge,onFocus:xe,onBlur:we,onKeyDown:ve,onKeyUp:be,className:_e(d,ee({},"".concat(d,"-disabled"),f),w==null?void 0:w.input),style:C==null?void 0:C.input,ref:P,size:h,type:_,onCompositionStart:function(ce){A.current=!0,E==null||E(ce)},onCompositionEnd:q}))},B=function(){var oe=Number(ye)>0;if(y||ne.show){var pe=ne.showFormatter?ne.showFormatter({value:J,count:me,maxLength:ye}):"".concat(me).concat(oe?" / ".concat(ye):"");return se.createElement(se.Fragment,null,ne.show&&se.createElement("span",{className:_e("".concat(d,"-show-count-suffix"),ee({},"".concat(d,"-show-count-has-suffix"),!!y),w==null?void 0:w.count),style:re({},C==null?void 0:C.count)},pe),y)}return null};return se.createElement(X$,ut({},M,{prefixCls:d,className:_e(p,Fe),handleReset:qe,value:J,focused:D,triggerFocus:O,suffix:B(),disabled:f,classes:S,classNames:w,styles:C}),H())});const VZ=n=>{const{getPrefixCls:e,direction:r}=b.useContext($t),{prefixCls:i,className:o}=n,s=e("input-group",i),a=e("input"),[l,c]=fM(a),u=_e(s,{[`${s}-lg`]:n.size==="large",[`${s}-sm`]:n.size==="small",[`${s}-compact`]:n.compact,[`${s}-rtl`]:r==="rtl"},c,o),d=b.useContext(tl),f=b.useMemo(()=>Object.assign(Object.assign({},d),{isFormItemInput:!1}),[d]);return l(b.createElement("span",{className:u,style:n.style,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onFocus:n.onFocus,onBlur:n.onBlur},b.createElement(tl.Provider,{value:f},n.children)))},Y$=n=>{let e;return typeof n=="object"&&(n!=null&&n.clearIcon)?e=n:n&&(e={clearIcon:se.createElement(Hx,null)}),e};function Q$(n,e){const r=b.useRef([]),i=()=>{r.current.push(setTimeout(()=>{var o,s,a,l;!((o=n.current)===null||o===void 0)&&o.input&&((s=n.current)===null||s===void 0?void 0:s.input.getAttribute("type"))==="password"&&(!((a=n.current)===null||a===void 0)&&a.input.hasAttribute("value"))&&((l=n.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return b.useEffect(()=>(e&&i(),()=>r.current.forEach(o=>{o&&clearTimeout(o)})),[]),i}function GZ(n){return!!(n.prefix||n.suffix||n.allowClear||n.showCount)}var HZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const o_=b.forwardRef((n,e)=>{var r;const{prefixCls:i,bordered:o=!0,status:s,size:a,disabled:l,onBlur:c,onFocus:u,suffix:d,allowClear:f,addonAfter:h,addonBefore:p,className:g,style:y,styles:v,rootClassName:m,onChange:x,classNames:_,variant:S}=n,w=HZ(n,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:C,direction:E,input:T}=se.useContext($t),M=C("input",i),R=b.useRef(null),N=bc(M),[D,L,A]=fM(M,N),{compactSize:I,compactItemClassnames:P}=qx(M,E),F=da(ge=>{var q;return(q=a??I)!==null&&q!==void 0?q:ge}),O=se.useContext(el),V=l??O,{status:U,hasFeedback:k,feedbackIcon:W}=b.useContext(tl),J=r_(U,s),z=GZ(n)||!!k;b.useRef(z);const j=Q$(R,!0),X=ge=>{j(),c==null||c(ge)},Q=ge=>{j(),u==null||u(ge)},ne=ge=>{j(),x==null||x(ge)},ye=(k||d)&&se.createElement(se.Fragment,null,d,k&&W),me=Y$(f??(T==null?void 0:T.allowClear)),[fe,le]=sM("input",S,o);return D(se.createElement(kZ,Object.assign({ref:ca(e,R),prefixCls:M,autoComplete:T==null?void 0:T.autoComplete},w,{disabled:V,onBlur:X,onFocus:Q,style:Object.assign(Object.assign({},T==null?void 0:T.style),y),styles:Object.assign(Object.assign({},T==null?void 0:T.styles),v),suffix:ye,allowClear:me,className:_e(g,m,A,N,P,T==null?void 0:T.className),onChange:ne,addonBefore:p&&se.createElement(Cy,{form:!0,space:!0},p),addonAfter:h&&se.createElement(Cy,{form:!0,space:!0},h),classNames:Object.assign(Object.assign(Object.assign({},_),T==null?void 0:T.classNames),{input:_e({[`${M}-sm`]:F==="small",[`${M}-lg`]:F==="large",[`${M}-rtl`]:E==="rtl"},_==null?void 0:_.input,(r=T==null?void 0:T.classNames)===null||r===void 0?void 0:r.input,L),variant:_e({[`${M}-${fe}`]:le},Ty(M,J)),affixWrapper:_e({[`${M}-affix-wrapper-sm`]:F==="small",[`${M}-affix-wrapper-lg`]:F==="large",[`${M}-affix-wrapper-rtl`]:E==="rtl"},L),wrapper:_e({[`${M}-group-rtl`]:E==="rtl"},L),groupWrapper:_e({[`${M}-group-wrapper-sm`]:F==="small",[`${M}-group-wrapper-lg`]:F==="large",[`${M}-group-wrapper-rtl`]:E==="rtl",[`${M}-group-wrapper-${fe}`]:le},Ty(`${M}-group-wrapper`,J,k),L)})})))}),jZ=n=>{const{componentCls:e,paddingXS:r}=n;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:r,"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:n.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:n.calc(n.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:n.paddingXS}}}},WZ=ai(["Input","OTP"],n=>{const e=Un(n,aM(n));return[jZ(e)]},lM);var qZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const XZ=b.forwardRef((n,e)=>{const{value:r,onChange:i,onActiveChange:o,index:s,mask:a}=n,l=qZ(n,["value","onChange","onActiveChange","index","mask"]),c=r&&typeof a=="string"?a:r,u=g=>{i(s,g.target.value)},d=b.useRef(null);b.useImperativeHandle(e,()=>d.current);const f=()=>{mr(()=>{var g;const y=(g=d.current)===null||g===void 0?void 0:g.input;document.activeElement===y&&y&&y.select()})},h=g=>{const{key:y,ctrlKey:v,metaKey:m}=g;y==="ArrowLeft"?o(s-1):y==="ArrowRight"?o(s+1):y==="z"&&(v||m)&&g.preventDefault(),f()},p=g=>{g.key==="Backspace"&&!r&&o(s-1),f()};return b.createElement(o_,Object.assign({type:a===!0?"password":"text"},l,{ref:d,value:c,onInput:u,onFocus:f,onKeyDown:h,onKeyUp:p,onMouseDown:f,onMouseUp:f}))});var KZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function lv(n){return(n||"").split("")}const YZ=b.forwardRef((n,e)=>{const{prefixCls:r,length:i=6,size:o,defaultValue:s,value:a,onChange:l,formatter:c,variant:u,disabled:d,status:f,autoFocus:h,mask:p,type:g,onInput:y,inputMode:v}=n,m=KZ(n,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:x,direction:_}=b.useContext($t),S=x("otp",r),w=ta(m,{aria:!0,data:!0,attr:!0}),C=bc(S),[E,T,M]=WZ(S,C),R=da(z=>o??z),N=b.useContext(tl),D=r_(N.status,f),L=b.useMemo(()=>Object.assign(Object.assign({},N),{status:D,hasFeedback:!1,feedbackIcon:null}),[N,D]),A=b.useRef(null),I=b.useRef({});b.useImperativeHandle(e,()=>({focus:()=>{var z;(z=I.current[0])===null||z===void 0||z.focus()},blur:()=>{var z;for(let j=0;j<i;j+=1)(z=I.current[j])===null||z===void 0||z.blur()},nativeElement:A.current}));const P=z=>c?c(z):z,[F,O]=b.useState(lv(P(s||"")));b.useEffect(()=>{a!==void 0&&O(lv(a))},[a]);const V=Sr(z=>{O(z),y&&y(z),l&&z.length===i&&z.every(j=>j)&&z.some((j,X)=>F[X]!==j)&&l(z.join(""))}),U=Sr((z,j)=>{let X=st(F);for(let ne=0;ne<z;ne+=1)X[ne]||(X[ne]="");j.length<=1?X[z]=j:X=X.slice(0,z).concat(lv(j)),X=X.slice(0,i);for(let ne=X.length-1;ne>=0&&!X[ne];ne-=1)X.pop();const Q=P(X.map(ne=>ne||" ").join(""));return X=lv(Q).map((ne,ye)=>ne===" "&&!X[ye]?X[ye]:ne),X}),k=(z,j)=>{var X;const Q=U(z,j),ne=Math.min(z+j.length,i-1);ne!==z&&Q[z]!==void 0&&((X=I.current[ne])===null||X===void 0||X.focus()),V(Q)},W=z=>{var j;(j=I.current[z])===null||j===void 0||j.focus()},J={variant:u,disabled:d,status:D,mask:p,type:g,inputMode:v};return E(b.createElement("div",Object.assign({},w,{ref:A,className:_e(S,{[`${S}-sm`]:R==="small",[`${S}-lg`]:R==="large",[`${S}-rtl`]:_==="rtl"},M,T)}),b.createElement(tl.Provider,{value:L},Array.from({length:i}).map((z,j)=>{const X=`otp-${j}`,Q=F[j]||"";return b.createElement(XZ,Object.assign({ref:ne=>{I.current[j]=ne},key:X,index:j,size:R,htmlSize:1,className:`${S}-input`,onChange:k,value:Q,onActiveChange:W,autoFocus:j===0&&h},J))}))))});var QZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},ZZ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:QZ}))},JZ=b.forwardRef(ZZ),eJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},tJ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:eJ}))},nJ=b.forwardRef(tJ),rJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const iJ=n=>n?b.createElement(nJ,null):b.createElement(JZ,null),oJ={click:"onClick",hover:"onMouseOver"},sJ=b.forwardRef((n,e)=>{const{disabled:r,action:i="click",visibilityToggle:o=!0,iconRender:s=iJ}=n,a=b.useContext(el),l=r??a,c=typeof o=="object"&&o.visible!==void 0,[u,d]=b.useState(()=>c?o.visible:!1),f=b.useRef(null);b.useEffect(()=>{c&&d(o.visible)},[c,o]);const h=Q$(f),p=()=>{var R;if(l)return;u&&h();const N=!u;d(N),typeof o=="object"&&((R=o.onVisibleChange)===null||R===void 0||R.call(o,N))},g=R=>{const N=oJ[i]||"",D=s(u),L={[N]:p,className:`${R}-icon`,key:"passwordIcon",onMouseDown:A=>{A.preventDefault()},onMouseUp:A=>{A.preventDefault()}};return b.cloneElement(b.isValidElement(D)?D:b.createElement("span",null,D),L)},{className:y,prefixCls:v,inputPrefixCls:m,size:x}=n,_=rJ(n,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:S}=b.useContext($t),w=S("input",m),C=S("input-password",v),E=o&&g(C),T=_e(C,y,{[`${C}-${x}`]:!!x}),M=Object.assign(Object.assign({},ua(_,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:T,prefixCls:w,suffix:E});return x&&(M.size=x),b.createElement(o_,Object.assign({ref:ca(e,f)},M))});var aJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const lJ=b.forwardRef((n,e)=>{const{prefixCls:r,inputPrefixCls:i,className:o,size:s,suffix:a,enterButton:l=!1,addonAfter:c,loading:u,disabled:d,onSearch:f,onChange:h,onCompositionStart:p,onCompositionEnd:g}=n,y=aJ(n,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:v,direction:m}=b.useContext($t),x=b.useRef(!1),_=v("input-search",r),S=v("input",i),{compactSize:w}=qx(_,m),C=da(k=>{var W;return(W=s??w)!==null&&W!==void 0?W:k}),E=b.useRef(null),T=k=>{k!=null&&k.target&&k.type==="click"&&f&&f(k.target.value,k,{source:"clear"}),h==null||h(k)},M=k=>{var W;document.activeElement===((W=E.current)===null||W===void 0?void 0:W.input)&&k.preventDefault()},R=k=>{var W,J;f&&f((J=(W=E.current)===null||W===void 0?void 0:W.input)===null||J===void 0?void 0:J.value,k,{source:"input"})},N=k=>{x.current||u||R(k)},D=typeof l=="boolean"?b.createElement(L$,null):null,L=`${_}-button`;let A;const I=l||{},P=I.type&&I.type.__ANT_BUTTON===!0;P||I.type==="button"?A=cc(I,Object.assign({onMouseDown:M,onClick:k=>{var W,J;(J=(W=I==null?void 0:I.props)===null||W===void 0?void 0:W.onClick)===null||J===void 0||J.call(W,k),R(k)},key:"enterButton"},P?{className:L,size:C}:{})):A=b.createElement(Fu,{className:L,type:l?"primary":void 0,size:C,disabled:d,key:"enterButton",onMouseDown:M,onClick:R,loading:u,icon:D},l),c&&(A=[A,cc(c,{key:"addonAfter"})]);const F=_e(_,{[`${_}-rtl`]:m==="rtl",[`${_}-${C}`]:!!C,[`${_}-with-button`]:!!l},o),O=Object.assign(Object.assign({},y),{className:F,prefixCls:S,type:"search"}),V=k=>{x.current=!0,p==null||p(k)},U=k=>{x.current=!1,g==null||g(k)};return b.createElement(o_,Object.assign({ref:ca(E,e),onPressEnter:N},O,{size:C,onCompositionStart:V,onCompositionEnd:U,addonAfter:A,suffix:a,onChange:T,disabled:d}))});var cJ=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,uJ=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Qb={},lo;function dJ(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=n.getAttribute("id")||n.getAttribute("data-reactid")||n.getAttribute("name");if(e&&Qb[r])return Qb[r];var i=window.getComputedStyle(n),o=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),s=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),a=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),l=uJ.map(function(u){return"".concat(u,":").concat(i.getPropertyValue(u))}).join(";"),c={sizingStyle:l,paddingSize:s,borderSize:a,boxSizing:o};return e&&r&&(Qb[r]=c),c}function fJ(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;lo||(lo=document.createElement("textarea"),lo.setAttribute("tab-index","-1"),lo.setAttribute("aria-hidden","true"),lo.setAttribute("name","hiddenTextarea"),document.body.appendChild(lo)),n.getAttribute("wrap")?lo.setAttribute("wrap",n.getAttribute("wrap")):lo.removeAttribute("wrap");var o=dJ(n,e),s=o.paddingSize,a=o.borderSize,l=o.boxSizing,c=o.sizingStyle;lo.setAttribute("style","".concat(c,";").concat(cJ)),lo.value=n.value||n.placeholder||"";var u=void 0,d=void 0,f,h=lo.scrollHeight;if(l==="border-box"?h+=a:l==="content-box"&&(h-=s),r!==null||i!==null){lo.value=" ";var p=lo.scrollHeight-s;r!==null&&(u=p*r,l==="border-box"&&(u=u+s+a),h=Math.max(u,h)),i!==null&&(d=p*i,l==="border-box"&&(d=d+s+a),f=h>d?"":"hidden",h=Math.min(d,h))}var g={height:h,overflowY:f,resize:"none"};return u&&(g.minHeight=u),d&&(g.maxHeight=d),g}var hJ=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Zb=0,Jb=1,eS=2,pJ=b.forwardRef(function(n,e){var r=n,i=r.prefixCls,o=r.defaultValue,s=r.value,a=r.autoSize,l=r.onResize,c=r.className,u=r.style,d=r.disabled,f=r.onChange;r.onInternalAutoSize;var h=Cn(r,hJ),p=no(o,{value:s,postState:function(z){return z??""}}),g=Ce(p,2),y=g[0],v=g[1],m=function(z){v(z.target.value),f==null||f(z)},x=b.useRef();b.useImperativeHandle(e,function(){return{textArea:x.current}});var _=b.useMemo(function(){return a&&Rt(a)==="object"?[a.minRows,a.maxRows]:[]},[a]),S=Ce(_,2),w=S[0],C=S[1],E=!!a,T=function(){try{if(document.activeElement===x.current){var z=x.current,j=z.selectionStart,X=z.selectionEnd,Q=z.scrollTop;x.current.setSelectionRange(j,X),x.current.scrollTop=Q}}catch{}},M=b.useState(eS),R=Ce(M,2),N=R[0],D=R[1],L=b.useState(),A=Ce(L,2),I=A[0],P=A[1],F=function(){D(Zb)};_n(function(){E&&F()},[s,w,C,E]),_n(function(){if(N===Zb)D(Jb);else if(N===Jb){var J=fJ(x.current,!1,w,C);D(eS),P(J)}else T()},[N]);var O=b.useRef(),V=function(){mr.cancel(O.current)},U=function(z){N===eS&&(l==null||l(z),a&&(V(),O.current=mr(function(){F()})))};b.useEffect(function(){return V},[]);var k=E?I:null,W=re(re({},u),k);return(N===Zb||N===Jb)&&(W.overflowY="hidden",W.overflowX="hidden"),b.createElement(ll,{onResize:U,disabled:!(a||l)},b.createElement("textarea",ut({},h,{ref:x,style:W,className:_e(i,c,ee({},"".concat(i,"-disabled"),d)),disabled:d,value:y,onChange:m})))}),mJ=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],gJ=se.forwardRef(function(n,e){var r,i=n.defaultValue,o=n.value,s=n.onFocus,a=n.onBlur,l=n.onChange,c=n.allowClear,u=n.maxLength,d=n.onCompositionStart,f=n.onCompositionEnd,h=n.suffix,p=n.prefixCls,g=p===void 0?"rc-textarea":p,y=n.showCount,v=n.count,m=n.className,x=n.style,_=n.disabled,S=n.hidden,w=n.classNames,C=n.styles,E=n.onResize,T=n.onClear,M=n.onPressEnter,R=n.readOnly,N=n.autoSize,D=n.onKeyDown,L=Cn(n,mJ),A=no(i,{value:o,defaultValue:i}),I=Ce(A,2),P=I[0],F=I[1],O=P==null?"":String(P),V=se.useState(!1),U=Ce(V,2),k=U[0],W=U[1],J=se.useRef(!1),z=se.useState(null),j=Ce(z,2),X=j[0],Q=j[1],ne=b.useRef(null),ye=b.useRef(null),me=function(){var Pe;return(Pe=ye.current)===null||Pe===void 0?void 0:Pe.textArea},fe=function(){me().focus()};b.useImperativeHandle(e,function(){var Ee;return{resizableTextArea:ye.current,focus:fe,blur:function(){me().blur()},nativeElement:((Ee=ne.current)===null||Ee===void 0?void 0:Ee.nativeElement)||me()}}),b.useEffect(function(){W(function(Ee){return!_&&Ee})},[_]);var le=se.useState(null),ge=Ce(le,2),q=ge[0],ve=ge[1];se.useEffect(function(){if(q){var Ee;(Ee=me()).setSelectionRange.apply(Ee,st(q))}},[q]);var be=K$(v,y),xe=(r=be.max)!==null&&r!==void 0?r:u,we=Number(xe)>0,qe=be.strategy(O),Fe=!!xe&&qe>xe,H=function(Pe,ke){var Ve=ke;!J.current&&be.exceedFormatter&&be.max&&be.strategy(ke)>be.max&&(Ve=be.exceedFormatter(ke,{max:be.max}),ke!==Ve&&ve([me().selectionStart||0,me().selectionEnd||0])),F(Ve),My(Pe.currentTarget,Pe,l,Ve)},B=function(Pe){J.current=!0,d==null||d(Pe)},K=function(Pe){J.current=!1,H(Pe,Pe.currentTarget.value),f==null||f(Pe)},oe=function(Pe){H(Pe,Pe.target.value)},pe=function(Pe){Pe.key==="Enter"&&M&&M(Pe),D==null||D(Pe)},ce=function(Pe){W(!0),s==null||s(Pe)},Ue=function(Pe){W(!1),a==null||a(Pe)},Re=function(Pe){F(""),fe(),My(me(),Pe,l)},Le=h,Je;be.show&&(be.showFormatter?Je=be.showFormatter({value:O,count:qe,maxLength:xe}):Je="".concat(qe).concat(we?" / ".concat(xe):""),Le=se.createElement(se.Fragment,null,Le,se.createElement("span",{className:_e("".concat(g,"-data-count"),w==null?void 0:w.count),style:C==null?void 0:C.count},Je)));var Me=function(Pe){var ke;E==null||E(Pe),(ke=me())!==null&&ke!==void 0&&ke.style.height&&Q(!0)},ze=!N&&!y&&!c;return se.createElement(X$,{ref:ne,value:O,allowClear:c,handleReset:Re,suffix:Le,prefixCls:g,classNames:re(re({},w),{},{affixWrapper:_e(w==null?void 0:w.affixWrapper,ee(ee({},"".concat(g,"-show-count"),y),"".concat(g,"-textarea-allow-clear"),c))}),disabled:_,focused:k,className:_e(m,Fe&&"".concat(g,"-out-of-range")),style:re(re({},x),X&&!ze?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Je=="string"?Je:void 0}},hidden:S,readOnly:R,onClear:T},se.createElement(pJ,ut({},L,{autoSize:N,maxLength:u,onKeyDown:pe,onChange:oe,onFocus:ce,onBlur:Ue,onCompositionStart:B,onCompositionEnd:K,className:_e(w==null?void 0:w.textarea),style:re(re({},C==null?void 0:C.textarea),{},{resize:x==null?void 0:x.resize}),disabled:_,prefixCls:g,onResize:Me,ref:ye,readOnly:R})))}),vJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Z$=b.forwardRef((n,e)=>{var r,i;const{prefixCls:o,bordered:s=!0,size:a,disabled:l,status:c,allowClear:u,classNames:d,rootClassName:f,className:h,style:p,styles:g,variant:y}=n,v=vJ(n,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:m,direction:x,textArea:_}=b.useContext($t),S=da(a),w=b.useContext(el),C=l??w,{status:E,hasFeedback:T,feedbackIcon:M}=b.useContext(tl),R=r_(E,c),N=b.useRef(null);b.useImperativeHandle(e,()=>{var U;return{resizableTextArea:(U=N.current)===null||U===void 0?void 0:U.resizableTextArea,focus:k=>{var W,J;q$((J=(W=N.current)===null||W===void 0?void 0:W.resizableTextArea)===null||J===void 0?void 0:J.textArea,k)},blur:()=>{var k;return(k=N.current)===null||k===void 0?void 0:k.blur()}}});const D=m("input",o),L=bc(D),[A,I,P]=fM(D,L),[F,O]=sM("textArea",y,s),V=Y$(u??(_==null?void 0:_.allowClear));return A(b.createElement(gJ,Object.assign({autoComplete:_==null?void 0:_.autoComplete},v,{style:Object.assign(Object.assign({},_==null?void 0:_.style),p),styles:Object.assign(Object.assign({},_==null?void 0:_.styles),g),disabled:C,allowClear:V,className:_e(P,L,h,f,_==null?void 0:_.className),classNames:Object.assign(Object.assign(Object.assign({},d),_==null?void 0:_.classNames),{textarea:_e({[`${D}-sm`]:S==="small",[`${D}-lg`]:S==="large"},I,d==null?void 0:d.textarea,(r=_==null?void 0:_.classNames)===null||r===void 0?void 0:r.textarea),variant:_e({[`${D}-${F}`]:O},Ty(D,R)),affixWrapper:_e(`${D}-textarea-affix-wrapper`,{[`${D}-affix-wrapper-rtl`]:x==="rtl",[`${D}-affix-wrapper-sm`]:S==="small",[`${D}-affix-wrapper-lg`]:S==="large",[`${D}-textarea-show-count`]:n.showCount||((i=n.count)===null||i===void 0?void 0:i.show)},I)}),prefixCls:D,suffix:T&&b.createElement("span",{className:`${D}-textarea-suffix`},M),ref:N})))}),oh=o_;oh.Group=VZ;oh.Search=lJ;oh.TextArea=Z$;oh.Password=sJ;oh.OTP=YZ;function EP(n){return["small","middle","large"].includes(n)}function TP(n){return n?typeof n=="number"&&!Number.isNaN(n):!1}const J$=se.createContext({latestIndex:0}),yJ=J$.Provider,xJ=n=>{let{className:e,index:r,children:i,split:o,style:s}=n;const{latestIndex:a}=b.useContext(J$);return i==null?null:b.createElement(b.Fragment,null,b.createElement("div",{className:e,style:s},i),r<a&&o&&b.createElement("span",{className:`${e}-split`},o))};var _J=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const bJ=b.forwardRef((n,e)=>{var r,i,o;const{getPrefixCls:s,space:a,direction:l}=b.useContext($t),{size:c=(r=a==null?void 0:a.size)!==null&&r!==void 0?r:"small",align:u,className:d,rootClassName:f,children:h,direction:p="horizontal",prefixCls:g,split:y,style:v,wrap:m=!1,classNames:x,styles:_}=n,S=_J(n,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[w,C]=Array.isArray(c)?c:[c,c],E=EP(C),T=EP(w),M=TP(C),R=TP(w),N=Ja(h,{keepEmpty:!0}),D=u===void 0&&p==="horizontal"?"center":u,L=s("space",g),[A,I,P]=CB(L),F=_e(L,a==null?void 0:a.className,I,`${L}-${p}`,{[`${L}-rtl`]:l==="rtl",[`${L}-align-${D}`]:D,[`${L}-gap-row-${C}`]:E,[`${L}-gap-col-${w}`]:T},d,f,P),O=_e(`${L}-item`,(i=x==null?void 0:x.item)!==null&&i!==void 0?i:(o=a==null?void 0:a.classNames)===null||o===void 0?void 0:o.item);let V=0;const U=N.map((J,z)=>{var j,X;J!=null&&(V=z);const Q=(J==null?void 0:J.key)||`${O}-${z}`;return b.createElement(xJ,{className:O,key:Q,index:z,split:y,style:(j=_==null?void 0:_.item)!==null&&j!==void 0?j:(X=a==null?void 0:a.styles)===null||X===void 0?void 0:X.item},J)}),k=b.useMemo(()=>({latestIndex:V}),[V]);if(N.length===0)return null;const W={};return m&&(W.flexWrap="wrap"),!T&&R&&(W.columnGap=w),!E&&M&&(W.rowGap=C),A(b.createElement("div",Object.assign({ref:e,className:F,style:Object.assign(Object.assign(Object.assign({},W),a==null?void 0:a.style),v)},S),b.createElement(yJ,{value:k},U)))}),ez=bJ;ez.Compact=r7;const SJ=function(){const n=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let e=1;e<arguments.length;e++){const r=e<0||arguments.length<=e?void 0:arguments[e];r&&Object.keys(r).forEach(i=>{const o=r[i];o!==void 0&&(n[i]=o)})}return n};var wJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},CJ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:wJ}))},MP=b.forwardRef(CJ),EJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},TJ=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:EJ}))},RP=b.forwardRef(TJ),MJ={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},RJ=[10,20,50,100],AJ=function(e){var r=e.pageSizeOptions,i=r===void 0?RJ:r,o=e.locale,s=e.changeSize,a=e.pageSize,l=e.goButton,c=e.quickGo,u=e.rootPrefixCls,d=e.disabled,f=e.buildOptionText,h=e.showSizeChanger,p=e.sizeChangerRender,g=se.useState(""),y=Ce(g,2),v=y[0],m=y[1],x=function(){return!v||Number.isNaN(v)?void 0:Number(v)},_=typeof f=="function"?f:function(D){return"".concat(D," ").concat(o.items_per_page)},S=function(L){m(L.target.value)},w=function(L){l||v===""||(m(""),!(L.relatedTarget&&(L.relatedTarget.className.indexOf("".concat(u,"-item-link"))>=0||L.relatedTarget.className.indexOf("".concat(u,"-item"))>=0))&&(c==null||c(x())))},C=function(L){v!==""&&(L.keyCode===He.ENTER||L.type==="click")&&(m(""),c==null||c(x()))},E=function(){return i.some(function(L){return L.toString()===a.toString()})?i:i.concat([a]).sort(function(L,A){var I=Number.isNaN(Number(L))?0:Number(L),P=Number.isNaN(Number(A))?0:Number(A);return I-P})},T="".concat(u,"-options");if(!h&&!c)return null;var M=null,R=null,N=null;return h&&p&&(M=p({disabled:d,size:a,onSizeChange:function(L){s==null||s(Number(L))},"aria-label":o.page_size,className:"".concat(T,"-size-changer"),options:E().map(function(D){return{label:_(D),value:D}})})),c&&(l&&(N=typeof l=="boolean"?se.createElement("button",{type:"button",onClick:C,onKeyUp:C,disabled:d,className:"".concat(T,"-quick-jumper-button")},o.jump_to_confirm):se.createElement("span",{onClick:C,onKeyUp:C},l)),R=se.createElement("div",{className:"".concat(T,"-quick-jumper")},o.jump_to,se.createElement("input",{disabled:d,type:"text",value:v,onChange:S,onKeyUp:C,onBlur:w,"aria-label":o.page}),o.page,N)),se.createElement("li",{className:T},M,R)},Ph=function(e){var r,i=e.rootPrefixCls,o=e.page,s=e.active,a=e.className,l=e.showTitle,c=e.onClick,u=e.onKeyPress,d=e.itemRender,f="".concat(i,"-item"),h=_e(f,"".concat(f,"-").concat(o),(r={},ee(r,"".concat(f,"-active"),s),ee(r,"".concat(f,"-disabled"),!o),r),a),p=function(){c(o)},g=function(m){u(m,c,o)},y=d(o,"page",se.createElement("a",{rel:"nofollow"},o));return y?se.createElement("li",{title:l?String(o):null,className:h,onClick:p,onKeyDown:g,tabIndex:0},y):null},NJ=function(e,r,i){return i};function AP(){}function NP(n){var e=Number(n);return typeof e=="number"&&!Number.isNaN(e)&&isFinite(e)&&Math.floor(e)===e}function Ac(n,e,r){var i=typeof n>"u"?e:n;return Math.floor((r-1)/i)+1}var PJ=function(e){var r,i=e.prefixCls,o=i===void 0?"rc-pagination":i,s=e.selectPrefixCls,a=s===void 0?"rc-select":s,l=e.className,c=e.current,u=e.defaultCurrent,d=u===void 0?1:u,f=e.total,h=f===void 0?0:f,p=e.pageSize,g=e.defaultPageSize,y=g===void 0?10:g,v=e.onChange,m=v===void 0?AP:v,x=e.hideOnSinglePage,_=e.align,S=e.showPrevNextJumpers,w=S===void 0?!0:S,C=e.showQuickJumper,E=e.showLessItems,T=e.showTitle,M=T===void 0?!0:T,R=e.onShowSizeChange,N=R===void 0?AP:R,D=e.locale,L=D===void 0?MJ:D,A=e.style,I=e.totalBoundaryShowSizeChanger,P=I===void 0?50:I,F=e.disabled,O=e.simple,V=e.showTotal,U=e.showSizeChanger,k=U===void 0?h>P:U,W=e.sizeChangerRender,J=e.pageSizeOptions,z=e.itemRender,j=z===void 0?NJ:z,X=e.jumpPrevIcon,Q=e.jumpNextIcon,ne=e.prevIcon,ye=e.nextIcon,me=se.useRef(null),fe=no(10,{value:p,defaultValue:y}),le=Ce(fe,2),ge=le[0],q=le[1],ve=no(1,{value:c,defaultValue:d,postState:function(et){return Math.max(1,Math.min(et,Ac(void 0,ge,h)))}}),be=Ce(ve,2),xe=be[0],we=be[1],qe=se.useState(xe),Fe=Ce(qe,2),H=Fe[0],B=Fe[1];b.useEffect(function(){B(xe)},[xe]);var K=Math.max(1,xe-(E?3:5)),oe=Math.min(Ac(void 0,ge,h),xe+(E?3:5));function pe(Ye,et){var _t=Ye||se.createElement("button",{type:"button","aria-label":et,className:"".concat(o,"-item-link")});return typeof Ye=="function"&&(_t=se.createElement(Ye,re({},e))),_t}function ce(Ye){var et=Ye.target.value,_t=Ac(void 0,ge,h),zt;return et===""?zt=et:Number.isNaN(Number(et))?zt=H:et>=_t?zt=_t:zt=Number(et),zt}function Ue(Ye){return NP(Ye)&&Ye!==xe&&NP(h)&&h>0}var Re=h>ge?C:!1;function Le(Ye){(Ye.keyCode===He.UP||Ye.keyCode===He.DOWN)&&Ye.preventDefault()}function Je(Ye){var et=ce(Ye);switch(et!==H&&B(et),Ye.keyCode){case He.ENTER:Ee(et);break;case He.UP:Ee(et-1);break;case He.DOWN:Ee(et+1);break}}function Me(Ye){Ee(ce(Ye))}function ze(Ye){var et=Ac(Ye,ge,h),_t=xe>et&&et!==0?et:xe;q(Ye),B(_t),N==null||N(xe,Ye),we(_t),m==null||m(_t,Ye)}function Ee(Ye){if(Ue(Ye)&&!F){var et=Ac(void 0,ge,h),_t=Ye;return Ye>et?_t=et:Ye<1&&(_t=1),_t!==H&&B(_t),we(_t),m==null||m(_t,ge),_t}return xe}var Pe=xe>1,ke=xe<Ac(void 0,ge,h);function Ve(){Pe&&Ee(xe-1)}function $e(){ke&&Ee(xe+1)}function xt(){Ee(K)}function te(){Ee(oe)}function Qe(Ye,et){if(Ye.key==="Enter"||Ye.charCode===He.ENTER||Ye.keyCode===He.ENTER){for(var _t=arguments.length,zt=new Array(_t>2?_t-2:0),pn=2;pn<_t;pn++)zt[pn-2]=arguments[pn];et.apply(void 0,zt)}}function Se(Ye){Qe(Ye,Ve)}function Oe(Ye){Qe(Ye,$e)}function Ze(Ye){Qe(Ye,xt)}function We(Ye){Qe(Ye,te)}function wt(Ye){var et=j(Ye,"prev",pe(ne,"prev page"));return se.isValidElement(et)?se.cloneElement(et,{disabled:!Pe}):et}function At(Ye){var et=j(Ye,"next",pe(ye,"next page"));return se.isValidElement(et)?se.cloneElement(et,{disabled:!ke}):et}function dt(Ye){(Ye.type==="click"||Ye.keyCode===He.ENTER)&&Ee(H)}var Xe=null,rt=ta(e,{aria:!0,data:!0}),Ft=V&&se.createElement("li",{className:"".concat(o,"-total-text")},V(h,[h===0?0:(xe-1)*ge+1,xe*ge>h?h:xe*ge])),bn=null,Ke=Ac(void 0,ge,h);if(x&&h<=ge)return null;var ot=[],yt={rootPrefixCls:o,onClick:Ee,onKeyPress:Qe,showTitle:M,itemRender:j,page:-1},ft=xe-1>0?xe-1:0,bt=xe+1<Ke?xe+1:Ke,Dt=C&&C.goButton,yn=Rt(O)==="object"?O.readOnly:!O,un=Dt,Bn=null;O&&(Dt&&(typeof Dt=="boolean"?un=se.createElement("button",{type:"button",onClick:dt,onKeyUp:dt},L.jump_to_confirm):un=se.createElement("span",{onClick:dt,onKeyUp:dt},Dt),un=se.createElement("li",{title:M?"".concat(L.jump_to).concat(xe,"/").concat(Ke):null,className:"".concat(o,"-simple-pager")},un)),Bn=se.createElement("li",{title:M?"".concat(xe,"/").concat(Ke):null,className:"".concat(o,"-simple-pager")},yn?H:se.createElement("input",{type:"text",value:H,disabled:F,onKeyDown:Le,onKeyUp:Je,onChange:Je,onBlur:Me,size:3}),se.createElement("span",{className:"".concat(o,"-slash")},"/"),Ke));var en=E?1:2;if(Ke<=3+en*2){Ke||ot.push(se.createElement(Ph,ut({},yt,{key:"noPager",page:1,className:"".concat(o,"-item-disabled")})));for(var En=1;En<=Ke;En+=1)ot.push(se.createElement(Ph,ut({},yt,{key:En,page:En,active:xe===En})))}else{var ar=E?L.prev_3:L.prev_5,Vn=E?L.next_3:L.next_5,Nr=j(K,"jump-prev",pe(X,"prev page")),vt=j(oe,"jump-next",pe(Q,"next page"));w&&(Xe=Nr?se.createElement("li",{title:M?ar:null,key:"prev",onClick:xt,tabIndex:0,onKeyDown:Ze,className:_e("".concat(o,"-jump-prev"),ee({},"".concat(o,"-jump-prev-custom-icon"),!!X))},Nr):null,bn=vt?se.createElement("li",{title:M?Vn:null,key:"next",onClick:te,tabIndex:0,onKeyDown:We,className:_e("".concat(o,"-jump-next"),ee({},"".concat(o,"-jump-next-custom-icon"),!!Q))},vt):null);var $=Math.max(1,xe-en),Z=Math.min(xe+en,Ke);xe-1<=en&&(Z=1+en*2),Ke-xe<=en&&($=Ke-en*2);for(var de=$;de<=Z;de+=1)ot.push(se.createElement(Ph,ut({},yt,{key:de,page:de,active:xe===de})));if(xe-1>=en*2&&xe!==3&&(ot[0]=se.cloneElement(ot[0],{className:_e("".concat(o,"-item-after-jump-prev"),ot[0].props.className)}),ot.unshift(Xe)),Ke-xe>=en*2&&xe!==Ke-2){var he=ot[ot.length-1];ot[ot.length-1]=se.cloneElement(he,{className:_e("".concat(o,"-item-before-jump-next"),he.props.className)}),ot.push(bn)}$!==1&&ot.unshift(se.createElement(Ph,ut({},yt,{key:1,page:1}))),Z!==Ke&&ot.push(se.createElement(Ph,ut({},yt,{key:Ke,page:Ke})))}var ae=wt(ft);if(ae){var Ge=!Pe||!Ke;ae=se.createElement("li",{title:M?L.prev_page:null,onClick:Ve,tabIndex:Ge?null:0,onKeyDown:Se,className:_e("".concat(o,"-prev"),ee({},"".concat(o,"-disabled"),Ge)),"aria-disabled":Ge},ae)}var at=At(bt);if(at){var ht,mt;O?(ht=!ke,mt=Pe?0:null):(ht=!ke||!Ke,mt=ht?null:0),at=se.createElement("li",{title:M?L.next_page:null,onClick:$e,tabIndex:mt,onKeyDown:Oe,className:_e("".concat(o,"-next"),ee({},"".concat(o,"-disabled"),ht)),"aria-disabled":ht},at)}var Et=_e(o,l,(r={},ee(r,"".concat(o,"-start"),_==="start"),ee(r,"".concat(o,"-center"),_==="center"),ee(r,"".concat(o,"-end"),_==="end"),ee(r,"".concat(o,"-simple"),O),ee(r,"".concat(o,"-disabled"),F),r));return se.createElement("ul",ut({className:Et,style:A,ref:me},rt),Ft,ae,O?Bn:ot,at,se.createElement(AJ,{locale:L,rootPrefixCls:o,disabled:F,selectPrefixCls:a,changeSize:ze,pageSize:ge,pageSizeOptions:J,quickGo:Re?Ee:null,goButton:un,showSizeChanger:k,sizeChangerRender:W}))};const OJ=n=>{const{componentCls:e}=n;return{[`${e}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed"}}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:n.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:n.colorBorder,backgroundColor:n.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:n.itemActiveBgDisabled},a:{color:n.itemActiveColorDisabled}}},[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${e}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${e}-simple-pager`]:{color:n.colorTextDisabled},[`${e}-jump-prev, ${e}-jump-next`]:{[`${e}-item-link-icon`]:{opacity:0},[`${e}-item-ellipsis`]:{opacity:1}}},[`&${e}-simple`]:{[`${e}-prev, ${e}-next`]:{[`&${e}-disabled ${e}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},IJ=n=>{const{componentCls:e}=n;return{[`&${e}-mini ${e}-total-text, &${e}-mini ${e}-simple-pager`]:{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)},[`&${e}-mini ${e}-item`]:{minWidth:n.itemSizeSM,height:n.itemSizeSM,margin:0,lineHeight:De(n.calc(n.itemSizeSM).sub(2).equal())},[`&${e}-mini:not(${e}-disabled) ${e}-item:not(${e}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive}},[`&${e}-mini ${e}-prev, &${e}-mini ${e}-next`]:{minWidth:n.itemSizeSM,height:n.itemSizeSM,margin:0,lineHeight:De(n.itemSizeSM)},[`&${e}-mini:not(${e}-disabled)`]:{[`${e}-prev, ${e}-next`]:{[`&:hover ${e}-item-link`]:{backgroundColor:n.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:n.colorBgTextActive},[`&${e}-disabled:hover ${e}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${e}-mini ${e}-prev ${e}-item-link,
    &${e}-mini ${e}-next ${e}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)}},[`&${e}-mini ${e}-jump-prev, &${e}-mini ${e}-jump-next`]:{height:n.itemSizeSM,marginInlineEnd:0,lineHeight:De(n.itemSizeSM)},[`&${e}-mini ${e}-options`]:{marginInlineStart:n.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:n.miniOptionsSizeChangerTop},"&-quick-jumper":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM),input:Object.assign(Object.assign({},uM(n)),{width:n.paginationMiniQuickJumperInputWidth,height:n.controlHeightSM})}}}},DJ=n=>{const{componentCls:e}=n;return{[`
    &${e}-simple ${e}-prev,
    &${e}-simple ${e}-next
    `]:{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM),verticalAlign:"top",[`${e}-item-link`]:{height:n.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive},"&::after":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)}}},[`&${e}-simple ${e}-simple-pager`]:{display:"inline-block",height:n.itemSizeSM,marginInlineEnd:n.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${De(n.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:n.itemInputBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadius,outline:"none",transition:`border-color ${n.motionDurationMid}`,color:"inherit","&:hover":{borderColor:n.colorPrimary},"&:focus":{borderColor:n.colorPrimaryHover,boxShadow:`${De(n.inputOutlineOffset)} 0 ${De(n.controlOutlineWidth)} ${n.controlOutline}`},"&[disabled]":{color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,cursor:"not-allowed"}}}}},LJ=n=>{const{componentCls:e}=n;return{[`${e}-jump-prev, ${e}-jump-next`]:{outline:0,[`${e}-item-container`]:{position:"relative",[`${e}-item-link-icon`]:{color:n.colorPrimary,fontSize:n.fontSizeSM,opacity:0,transition:`all ${n.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${e}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:n.colorTextDisabled,letterSpacing:n.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:n.paginationEllipsisTextIndent,opacity:1,transition:`all ${n.motionDurationMid}`}},"&:hover":{[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}}},[`
    ${e}-prev,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{marginInlineEnd:n.marginXS},[`
    ${e}-prev,
    ${e}-next,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{display:"inline-block",minWidth:n.itemSize,height:n.itemSize,color:n.colorText,fontFamily:n.fontFamily,lineHeight:De(n.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:n.borderRadius,cursor:"pointer",transition:`all ${n.motionDurationMid}`},[`${e}-prev, ${e}-next`]:{outline:0,button:{color:n.colorText,cursor:"pointer",userSelect:"none"},[`${e}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:n.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`,borderRadius:n.borderRadius,outline:"none",transition:`all ${n.motionDurationMid}`},[`&:hover ${e}-item-link`]:{backgroundColor:n.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:n.colorBgTextActive},[`&${e}-disabled:hover`]:{[`${e}-item-link`]:{backgroundColor:"transparent"}}},[`${e}-slash`]:{marginInlineEnd:n.paginationSlashMarginInlineEnd,marginInlineStart:n.paginationSlashMarginInlineStart},[`${e}-options`]:{display:"inline-block",marginInlineStart:n.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:n.controlHeight,marginInlineStart:n.marginXS,lineHeight:De(n.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},dM(n)),cM(n,{borderColor:n.colorBorder,hoverBorderColor:n.colorPrimaryHover,activeBorderColor:n.colorPrimary,activeShadow:n.activeShadow})),{"&[disabled]":Object.assign({},i_(n)),width:n.calc(n.controlHeightLG).mul(1.25).equal(),height:n.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:n.marginXS,marginInlineEnd:n.marginXS})}}}},FJ=n=>{const{componentCls:e}=n;return{[`${e}-item`]:{display:"inline-block",minWidth:n.itemSize,height:n.itemSize,marginInlineEnd:n.marginXS,fontFamily:n.fontFamily,lineHeight:De(n.calc(n.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:n.itemBg,border:`${De(n.lineWidth)} ${n.lineType} transparent`,borderRadius:n.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${De(n.paginationItemPaddingInline)}`,color:n.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${e}-item-active)`]:{"&:hover":{transition:`all ${n.motionDurationMid}`,backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive}},"&-active":{fontWeight:n.fontWeightStrong,backgroundColor:n.itemActiveBg,borderColor:n.colorPrimary,a:{color:n.colorPrimary},"&:hover":{borderColor:n.colorPrimaryHover},"&:hover a":{color:n.colorPrimaryHover}}}}},UJ=n=>{const{componentCls:e}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ns(n)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${e}-total-text`]:{display:"inline-block",height:n.itemSize,marginInlineEnd:n.marginXS,lineHeight:De(n.calc(n.itemSize).sub(2).equal()),verticalAlign:"middle"}}),FJ(n)),LJ(n)),DJ(n)),IJ(n)),OJ(n)),{[`@media only screen and (max-width: ${n.screenLG}px)`]:{[`${e}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${n.screenSM}px)`]:{[`${e}-options`]:{display:"none"}}}),[`&${n.componentCls}-rtl`]:{direction:"rtl"}}},BJ=n=>{const{componentCls:e}=n;return{[`${e}:not(${e}-disabled)`]:{[`${e}-item`]:Object.assign({},ig(n)),[`${e}-jump-prev, ${e}-jump-next`]:{"&:focus-visible":Object.assign({[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}},mC(n))},[`${e}-prev, ${e}-next`]:{[`&:focus-visible ${e}-item-link`]:Object.assign({},mC(n))}}}},tz=n=>Object.assign({itemBg:n.colorBgContainer,itemSize:n.controlHeight,itemSizeSM:n.controlHeightSM,itemActiveBg:n.colorBgContainer,itemLinkBg:n.colorBgContainer,itemActiveColorDisabled:n.colorTextDisabled,itemActiveBgDisabled:n.controlItemBgActiveDisabled,itemInputBg:n.colorBgContainer,miniOptionsSizeChangerTop:0},lM(n)),nz=n=>Un(n,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:n.calc(n.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:n.calc(n.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:n.calc(n.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:n.calc(n.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:n.marginSM,paginationSlashMarginInlineEnd:n.marginSM,paginationEllipsisTextIndent:"0.13em"},aM(n)),$J=ai("Pagination",n=>{const e=nz(n);return[UJ(e),BJ(e)]},tz),zJ=n=>{const{componentCls:e}=n;return{[`${e}${e}-bordered${e}-disabled:not(${e}-mini)`]:{"&, &:hover":{[`${e}-item-link`]:{borderColor:n.colorBorder}},"&:focus-visible":{[`${e}-item-link`]:{borderColor:n.colorBorder}},[`${e}-item, ${e}-item-link`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,[`&:hover:not(${e}-item-active)`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,a:{color:n.colorTextDisabled}},[`&${e}-item-active`]:{backgroundColor:n.itemActiveBgDisabled}},[`${e}-prev, ${e}-next`]:{"&:hover button":{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,color:n.colorTextDisabled},[`${e}-item-link`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder}}},[`${e}${e}-bordered:not(${e}-mini)`]:{[`${e}-prev, ${e}-next`]:{"&:hover button":{borderColor:n.colorPrimaryHover,backgroundColor:n.itemBg},[`${e}-item-link`]:{backgroundColor:n.itemLinkBg,borderColor:n.colorBorder},[`&:hover ${e}-item-link`]:{borderColor:n.colorPrimary,backgroundColor:n.itemBg,color:n.colorPrimary},[`&${e}-disabled`]:{[`${e}-item-link`]:{borderColor:n.colorBorder,color:n.colorTextDisabled}}},[`${e}-item`]:{backgroundColor:n.itemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,[`&:hover:not(${e}-item-active)`]:{borderColor:n.colorPrimary,backgroundColor:n.itemBg,a:{color:n.colorPrimary}},"&-active":{borderColor:n.colorPrimary}}}}},kJ=jT(["Pagination","bordered"],n=>{const e=nz(n);return[zJ(e)]},tz);function PP(n){return b.useMemo(()=>typeof n=="boolean"?[n,{}]:n&&typeof n=="object"?[!0,n]:[void 0,void 0],[n])}var VJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const GJ=n=>{const{align:e,prefixCls:r,selectPrefixCls:i,className:o,rootClassName:s,style:a,size:l,locale:c,responsive:u,showSizeChanger:d,selectComponentClass:f,pageSizeOptions:h}=n,p=VJ(n,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:g}=B$(u),[,y]=io(),{getPrefixCls:v,direction:m,pagination:x={}}=b.useContext($t),_=v("pagination",r),[S,w,C]=$J(_),E=da(l),T=E==="small"||!!(g&&!E&&u),[M]=_c("Pagination",RU),R=Object.assign(Object.assign({},M),c),[N,D]=PP(d),[L,A]=PP(x.showSizeChanger),I=N??L,P=D??A,F=f||Uu,O=b.useMemo(()=>h?h.map(z=>Number(z)):void 0,[h]),V=z=>{var j;const{disabled:X,size:Q,onSizeChange:ne,"aria-label":ye,className:me,options:fe}=z,{className:le,onChange:ge}=P||{},q=(j=fe.find(ve=>String(ve.value)===String(Q)))===null||j===void 0?void 0:j.value;return b.createElement(F,Object.assign({disabled:X,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:ve=>ve.parentNode,"aria-label":ye,options:fe},P,{value:q,onChange:(ve,be)=>{ne==null||ne(ve),ge==null||ge(ve,be)},size:T?"small":"middle",className:_e(me,le)}))},U=b.useMemo(()=>{const z=b.createElement("span",{className:`${_}-item-ellipsis`},"•••"),j=b.createElement("button",{className:`${_}-item-link`,type:"button",tabIndex:-1},m==="rtl"?b.createElement(pN,null):b.createElement(vP,null)),X=b.createElement("button",{className:`${_}-item-link`,type:"button",tabIndex:-1},m==="rtl"?b.createElement(vP,null):b.createElement(pN,null)),Q=b.createElement("a",{className:`${_}-item-link`},b.createElement("div",{className:`${_}-item-container`},m==="rtl"?b.createElement(RP,{className:`${_}-item-link-icon`}):b.createElement(MP,{className:`${_}-item-link-icon`}),z)),ne=b.createElement("a",{className:`${_}-item-link`},b.createElement("div",{className:`${_}-item-container`},m==="rtl"?b.createElement(MP,{className:`${_}-item-link-icon`}):b.createElement(RP,{className:`${_}-item-link-icon`}),z));return{prevIcon:j,nextIcon:X,jumpPrevIcon:Q,jumpNextIcon:ne}},[m,_]),k=v("select",i),W=_e({[`${_}-${e}`]:!!e,[`${_}-mini`]:T,[`${_}-rtl`]:m==="rtl",[`${_}-bordered`]:y.wireframe},x==null?void 0:x.className,o,s,w,C),J=Object.assign(Object.assign({},x==null?void 0:x.style),a);return S(b.createElement(b.Fragment,null,y.wireframe&&b.createElement(kJ,{prefixCls:_}),b.createElement(PJ,Object.assign({},U,p,{style:J,prefixCls:_,selectPrefixCls:k,className:W,locale:R,pageSizeOptions:O,showSizeChanger:I,sizeChangerRender:V}))))},Ry=100,rz=Ry/5,iz=Ry/2-rz/2,tS=iz*2*Math.PI,OP=50,IP=n=>{const{dotClassName:e,style:r,hasCircleCls:i}=n;return b.createElement("circle",{className:_e(`${e}-circle`,{[`${e}-circle-bg`]:i}),r:iz,cx:OP,cy:OP,strokeWidth:rz,style:r})},HJ=n=>{let{percent:e,prefixCls:r}=n;const i=`${r}-dot`,o=`${i}-holder`,s=`${o}-hidden`,[a,l]=b.useState(!1);_n(()=>{e!==0&&l(!0)},[e!==0]);const c=Math.max(Math.min(e,100),0);if(!a)return null;const u={strokeDashoffset:`${tS/4}`,strokeDasharray:`${tS*c/100} ${tS*(100-c)/100}`};return b.createElement("span",{className:_e(o,`${i}-progress`,c<=0&&s)},b.createElement("svg",{viewBox:`0 0 ${Ry} ${Ry}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},b.createElement(IP,{dotClassName:i,hasCircleCls:!0}),b.createElement(IP,{dotClassName:i,style:u})))};function jJ(n){const{prefixCls:e,percent:r=0}=n,i=`${e}-dot`,o=`${i}-holder`,s=`${o}-hidden`;return b.createElement(b.Fragment,null,b.createElement("span",{className:_e(o,r>0&&s)},b.createElement("span",{className:_e(i,`${e}-dot-spin`)},[1,2,3,4].map(a=>b.createElement("i",{className:`${e}-dot-item`,key:a})))),b.createElement(HJ,{prefixCls:e,percent:r}))}function WJ(n){const{prefixCls:e,indicator:r,percent:i}=n,o=`${e}-dot`;return r&&b.isValidElement(r)?cc(r,{className:_e(r.props.className,o),percent:i}):b.createElement(jJ,{prefixCls:e,percent:i})}const qJ=new hn("antSpinMove",{to:{opacity:1}}),XJ=new hn("antRotate",{to:{transform:"rotate(405deg)"}}),KJ=n=>{const{componentCls:e,calc:r}=n;return{[e]:Object.assign(Object.assign({},ns(n)),{position:"absolute",display:"none",color:n.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${n.motionDurationSlow} ${n.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${e}-text`]:{fontSize:n.fontSize,paddingTop:r(r(n.dotSize).sub(n.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:n.colorBgMask,zIndex:n.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${n.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[e]:{[`${e}-dot-holder`]:{color:n.colorWhite},[`${e}-text`]:{color:n.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${e}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:n.contentHeight,[`${e}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:r(n.dotSize).mul(-1).div(2).equal()},[`${e}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${n.colorBgContainer}`},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${e}-dot`]:{margin:r(n.dotSizeSM).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeSM).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${e}-dot`]:{margin:r(n.dotSizeLG).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeLG).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${e}-container`]:{position:"relative",transition:`opacity ${n.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:n.colorBgContainer,opacity:0,transition:`all ${n.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:n.spinDotDefault},[`${e}-dot-holder`]:{width:"1em",height:"1em",fontSize:n.dotSize,display:"inline-block",transition:`transform ${n.motionDurationSlow} ease, opacity ${n.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:n.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${e}-dot-progress`]:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",insetInlineStart:"50%"},[`${e}-dot`]:{position:"relative",display:"inline-block",fontSize:n.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),height:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:qJ,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:XJ,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(i=>`${i} ${n.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:n.colorFillSecondary}},[`&-sm ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeSM}},[`&-sm ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal(),height:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal()}},[`&-lg ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeLG}},[`&-lg ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal(),height:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal()}},[`&${e}-show-text ${e}-text`]:{display:"block"}})}},YJ=n=>{const{controlHeightLG:e,controlHeight:r}=n;return{contentHeight:400,dotSize:e/2,dotSizeSM:e*.35,dotSizeLG:r}},QJ=ai("Spin",n=>{const e=Un(n,{spinDotDefault:n.colorTextDescription});return[KJ(e)]},YJ),ZJ=200,DP=[[30,.05],[70,.03],[96,.01]];function JJ(n,e){const[r,i]=b.useState(0),o=b.useRef(null),s=e==="auto";return b.useEffect(()=>(s&&n&&(i(0),o.current=setInterval(()=>{i(a=>{const l=100-a;for(let c=0;c<DP.length;c+=1){const[u,d]=DP[c];if(a<=u)return a+l*d}return a})},ZJ)),()=>{clearInterval(o.current)}),[s,n]),s?r:e}var eee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};let oz;function tee(n,e){return!!n&&!!e&&!Number.isNaN(Number(e))}const hM=n=>{var e;const{prefixCls:r,spinning:i=!0,delay:o=0,className:s,rootClassName:a,size:l="default",tip:c,wrapperClassName:u,style:d,children:f,fullscreen:h=!1,indicator:p,percent:g}=n,y=eee(n,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:v,direction:m,spin:x}=b.useContext($t),_=v("spin",r),[S,w,C]=QJ(_),[E,T]=b.useState(()=>i&&!tee(i,o)),M=JJ(E,g);b.useEffect(()=>{if(i){const P=PZ(o,()=>{T(!0)});return P(),()=>{var F;(F=P==null?void 0:P.cancel)===null||F===void 0||F.call(P)}}T(!1)},[o,i]);const R=b.useMemo(()=>typeof f<"u"&&!h,[f,h]),N=_e(_,x==null?void 0:x.className,{[`${_}-sm`]:l==="small",[`${_}-lg`]:l==="large",[`${_}-spinning`]:E,[`${_}-show-text`]:!!c,[`${_}-rtl`]:m==="rtl"},s,!h&&a,w,C),D=_e(`${_}-container`,{[`${_}-blur`]:E}),L=(e=p??(x==null?void 0:x.indicator))!==null&&e!==void 0?e:oz,A=Object.assign(Object.assign({},x==null?void 0:x.style),d),I=b.createElement("div",Object.assign({},y,{style:A,className:N,"aria-live":"polite","aria-busy":E}),b.createElement(WJ,{prefixCls:_,indicator:L,percent:M}),c&&(R||h)?b.createElement("div",{className:`${_}-text`},c):null);return S(R?b.createElement("div",Object.assign({},y,{className:_e(`${_}-nested-loading`,u,w,C)}),E&&b.createElement("div",{key:"loading"},I),b.createElement("div",{className:D,key:"container"},f)):h?b.createElement("div",{className:_e(`${_}-fullscreen`,{[`${_}-fullscreen-show`]:E},a,w,C)},I):I)};hM.setDefaultIndicator=n=>{oz=n};const pM=se.createContext({});pM.Consumer;var sz=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const nee=n=>{var{prefixCls:e,className:r,avatar:i,title:o,description:s}=n,a=sz(n,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=b.useContext($t),c=l("list",e),u=_e(`${c}-item-meta`,r),d=se.createElement("div",{className:`${c}-item-meta-content`},o&&se.createElement("h4",{className:`${c}-item-meta-title`},o),s&&se.createElement("div",{className:`${c}-item-meta-description`},s));return se.createElement("div",Object.assign({},a,{className:u}),i&&se.createElement("div",{className:`${c}-item-meta-avatar`},i),(o||s)&&d)},ree=se.forwardRef((n,e)=>{const{prefixCls:r,children:i,actions:o,extra:s,styles:a,className:l,classNames:c,colStyle:u}=n,d=sz(n,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:f,itemLayout:h}=b.useContext(pM),{getPrefixCls:p,list:g}=b.useContext($t),y=E=>{var T,M;return _e((M=(T=g==null?void 0:g.item)===null||T===void 0?void 0:T.classNames)===null||M===void 0?void 0:M[E],c==null?void 0:c[E])},v=E=>{var T,M;return Object.assign(Object.assign({},(M=(T=g==null?void 0:g.item)===null||T===void 0?void 0:T.styles)===null||M===void 0?void 0:M[E]),a==null?void 0:a[E])},m=()=>{let E=!1;return b.Children.forEach(i,T=>{typeof T=="string"&&(E=!0)}),E&&b.Children.count(i)>1},x=()=>h==="vertical"?!!s:!m(),_=p("list",r),S=o&&o.length>0&&se.createElement("ul",{className:_e(`${_}-item-action`,y("actions")),key:"actions",style:v("actions")},o.map((E,T)=>se.createElement("li",{key:`${_}-item-action-${T}`},E,T!==o.length-1&&se.createElement("em",{className:`${_}-item-action-split`})))),w=f?"div":"li",C=se.createElement(w,Object.assign({},d,f?{}:{ref:e},{className:_e(`${_}-item`,{[`${_}-item-no-flex`]:!x()},l)}),h==="vertical"&&s?[se.createElement("div",{className:`${_}-item-main`,key:"content"},i,S),se.createElement("div",{className:_e(`${_}-item-extra`,y("extra")),key:"extra",style:v("extra")},s)]:[i,S,cc(s,{key:"extra"})]);return f?se.createElement(DZ,{ref:e,flex:1,style:u},C):C}),az=ree;az.Meta=nee;const iee=n=>{const{listBorderedCls:e,componentCls:r,paddingLG:i,margin:o,itemPaddingSM:s,itemPaddingLG:a,marginLG:l,borderRadiusLG:c}=n;return{[e]:{border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:c,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:i},[`${r}-pagination`]:{margin:`${De(o)} ${De(l)}`}},[`${e}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:s}},[`${e}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:a}}}},oee=n=>{const{componentCls:e,screenSM:r,screenMD:i,marginLG:o,marginSM:s,margin:a}=n;return{[`@media screen and (max-width:${i}px)`]:{[e]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${r}px)`]:{[e]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:s}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:n.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${De(a)}`}}}}}},see=n=>{const{componentCls:e,antCls:r,controlHeight:i,minHeight:o,paddingSM:s,marginLG:a,padding:l,itemPadding:c,colorPrimary:u,itemPaddingSM:d,itemPaddingLG:f,paddingXS:h,margin:p,colorText:g,colorTextDescription:y,motionDurationSlow:v,lineWidth:m,headerBg:x,footerBg:_,emptyTextPadding:S,metaMarginBottom:w,avatarMarginRight:C,titleMarginBottom:E,descriptionFontSize:T}=n;return{[e]:Object.assign(Object.assign({},ns(n)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:x},[`${e}-footer`]:{background:_},[`${e}-header, ${e}-footer`]:{paddingBlock:s},[`${e}-pagination`]:{marginBlockStart:a,[`${r}-pagination-options`]:{textAlign:"start"}},[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:g,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:C},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:g},[`${e}-item-meta-title`]:{margin:`0 0 ${De(n.marginXXS)} 0`,color:g,fontSize:n.fontSize,lineHeight:n.lineHeight,"> a":{color:g,transition:`all ${v}`,"&:hover":{color:u}}},[`${e}-item-meta-description`]:{color:y,fontSize:T,lineHeight:n.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:n.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${De(h)}`,color:y,fontSize:n.fontSize,lineHeight:n.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:m,height:n.calc(n.fontHeight).sub(n.calc(n.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:n.colorSplit}}},[`${e}-empty`]:{padding:`${De(l)} 0`,color:y,fontSize:n.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:S,color:n.colorTextDisabled,fontSize:n.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${r}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:a},[`${e}-item-meta`]:{marginBlockEnd:w,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:E,color:g,fontSize:n.fontSizeLG,lineHeight:n.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${De(l)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${r}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:f},[`${e}-sm ${e}-item`]:{padding:d},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},aee=n=>({contentWidth:220,itemPadding:`${De(n.paddingContentVertical)} 0`,itemPaddingSM:`${De(n.paddingContentVerticalSM)} ${De(n.paddingContentHorizontal)}`,itemPaddingLG:`${De(n.paddingContentVerticalLG)} ${De(n.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:n.padding,metaMarginBottom:n.padding,avatarMarginRight:n.padding,titleMarginBottom:n.paddingSM,descriptionFontSize:n.fontSize}),lee=ai("List",n=>{const e=Un(n,{listBorderedCls:`${n.componentCls}-bordered`,minHeight:n.controlHeightLG});return[see(e),iee(e),oee(e)]},aee);var cee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function uee(n,e){var{pagination:r=!1,prefixCls:i,bordered:o=!1,split:s=!0,className:a,rootClassName:l,style:c,children:u,itemLayout:d,loadMore:f,grid:h,dataSource:p=[],size:g,header:y,footer:v,loading:m=!1,rowKey:x,renderItem:_,locale:S}=n,w=cee(n,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const C=r&&typeof r=="object"?r:{},[E,T]=b.useState(C.defaultCurrent||1),[M,R]=b.useState(C.defaultPageSize||10),{getPrefixCls:N,renderEmpty:D,direction:L,list:A}=b.useContext($t),I={current:1,total:0},P=H=>(B,K)=>{var oe;T(B),R(K),r&&((oe=r==null?void 0:r[H])===null||oe===void 0||oe.call(r,B,K))},F=P("onChange"),O=P("onShowSizeChange"),V=(H,B)=>{if(!_)return null;let K;return typeof x=="function"?K=x(H):x?K=H[x]:K=H.key,K||(K=`list-item-${B}`),b.createElement(b.Fragment,{key:K},_(H,B))},U=()=>!!(f||r||v),k=N("list",i),[W,J,z]=lee(k);let j=m;typeof j=="boolean"&&(j={spinning:j});const X=!!(j!=null&&j.spinning),Q=da(g);let ne="";switch(Q){case"large":ne="lg";break;case"small":ne="sm";break}const ye=_e(k,{[`${k}-vertical`]:d==="vertical",[`${k}-${ne}`]:ne,[`${k}-split`]:s,[`${k}-bordered`]:o,[`${k}-loading`]:X,[`${k}-grid`]:!!h,[`${k}-something-after-last-item`]:U(),[`${k}-rtl`]:L==="rtl"},A==null?void 0:A.className,a,l,J,z),me=SJ(I,{total:p.length,current:E,pageSize:M},r||{}),fe=Math.ceil(me.total/me.pageSize);me.current>fe&&(me.current=fe);const le=r&&b.createElement("div",{className:_e(`${k}-pagination`)},b.createElement(GJ,Object.assign({align:"end"},me,{onChange:F,onShowSizeChange:O})));let ge=st(p);r&&p.length>(me.current-1)*me.pageSize&&(ge=st(p).splice((me.current-1)*me.pageSize,me.pageSize));const q=Object.keys(h||{}).some(H=>["xs","sm","md","lg","xl","xxl"].includes(H)),ve=B$(q),be=b.useMemo(()=>{for(let H=0;H<bu.length;H+=1){const B=bu[H];if(ve[B])return B}},[ve]),xe=b.useMemo(()=>{if(!h)return;const H=be&&h[be]?h[be]:h.column;if(H)return{width:`${100/H}%`,maxWidth:`${100/H}%`}},[JSON.stringify(h),be]);let we=X&&b.createElement("div",{style:{minHeight:53}});if(ge.length>0){const H=ge.map((B,K)=>V(B,K));we=h?b.createElement(FZ,{gutter:h.gutter},b.Children.map(H,B=>b.createElement("div",{key:B==null?void 0:B.key,style:xe},B))):b.createElement("ul",{className:`${k}-items`},H)}else!u&&!X&&(we=b.createElement("div",{className:`${k}-empty-text`},(S==null?void 0:S.emptyText)||(D==null?void 0:D("List"))||b.createElement(P$,{componentName:"List"})));const qe=me.position||"bottom",Fe=b.useMemo(()=>({grid:h,itemLayout:d}),[JSON.stringify(h),d]);return W(b.createElement(pM.Provider,{value:Fe},b.createElement("div",Object.assign({ref:e,style:Object.assign(Object.assign({},A==null?void 0:A.style),c),className:ye},w),(qe==="top"||qe==="both")&&le,y&&b.createElement("div",{className:`${k}-header`},y),b.createElement(hM,Object.assign({},j),we,u),v&&b.createElement("div",{className:`${k}-footer`},v),f||(qe==="bottom"||qe==="both")&&le)))}const dee=b.forwardRef(uee),dp=dee;dp.Item=az;function fee(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&n==null?[]:Array.isArray(n)?n:[n]}let Uo=null,iu=n=>n(),gm=[],vm={};function LP(){const{getContainer:n,duration:e,rtl:r,maxCount:i,top:o}=vm,s=(n==null?void 0:n())||document.body;return{getContainer:()=>s,duration:e,rtl:r,maxCount:i,top:o}}const hee=se.forwardRef((n,e)=>{const{messageConfig:r,sync:i}=n,{getPrefixCls:o}=b.useContext($t),s=vm.prefixCls||o("message"),a=b.useContext(OK),[l,c]=_B(Object.assign(Object.assign(Object.assign({},r),{prefixCls:s}),a.message));return se.useImperativeHandle(e,()=>{const u=Object.assign({},l);return Object.keys(u).forEach(d=>{u[d]=function(){return i(),l[d].apply(l,arguments)}}),{instance:u,sync:i}}),c}),pee=se.forwardRef((n,e)=>{const[r,i]=se.useState(LP),o=()=>{i(LP)};se.useEffect(o,[]);const s=oB(),a=s.getRootPrefixCls(),l=s.getIconPrefixCls(),c=s.getTheme(),u=se.createElement(hee,{ref:e,sync:o,messageConfig:r});return se.createElement(cl,{prefixCls:a,iconPrefixCls:l,theme:c},s.holderRender?s.holderRender(u):u)});function s_(){if(!Uo){const n=document.createDocumentFragment(),e={fragment:n};Uo=e,iu(()=>{YT()(se.createElement(pee,{ref:i=>{const{instance:o,sync:s}=i||{};Promise.resolve().then(()=>{!e.instance&&o&&(e.instance=o,e.sync=s,s_())})}}),n)});return}Uo.instance&&(gm.forEach(n=>{const{type:e,skipped:r}=n;if(!r)switch(e){case"open":{iu(()=>{const i=Uo.instance.open(Object.assign(Object.assign({},vm),n.config));i==null||i.then(n.resolve),n.setCloseFn(i)});break}case"destroy":iu(()=>{Uo==null||Uo.instance.destroy(n.key)});break;default:iu(()=>{var i;const o=(i=Uo.instance)[e].apply(i,st(n.args));o==null||o.then(n.resolve),n.setCloseFn(o)})}}),gm=[])}function mee(n){vm=Object.assign(Object.assign({},vm),n),iu(()=>{var e;(e=Uo==null?void 0:Uo.sync)===null||e===void 0||e.call(Uo)})}function gee(n){const e=KT(r=>{let i;const o={type:"open",config:n,resolve:r,setCloseFn:s=>{i=s}};return gm.push(o),()=>{i?iu(()=>{i()}):o.skipped=!0}});return s_(),e}function vee(n,e){const r=KT(i=>{let o;const s={type:n,args:e,resolve:i,setCloseFn:a=>{o=a}};return gm.push(s),()=>{o?iu(()=>{o()}):s.skipped=!0}});return s_(),r}const yee=n=>{gm.push({type:"destroy",key:n}),s_()},xee=["success","info","warning","error","loading"],_ee={open:gee,destroy:yee,config:mee,useMessage:I9,_InternalPanelDoNotUseOrYouWillBeFired:E9},lz=_ee;xee.forEach(n=>{lz[n]=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return vee(n,r)}});var bee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const See=n=>{const{prefixCls:e,className:r,closeIcon:i,closable:o,type:s,title:a,children:l,footer:c}=n,u=bee(n,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:d}=b.useContext($t),f=d(),h=e||d("modal"),p=bc(f),[g,y,v]=n$(h,p),m=`${h}-confirm`;let x={};return s?x={closable:o??!1,title:"",footer:"",children:b.createElement(i$,Object.assign({},n,{prefixCls:h,confirmPrefixCls:m,rootPrefixCls:f,content:l}))}:x={closable:o??!0,title:a,footer:c!==null&&b.createElement(ZB,Object.assign({},n)),children:l},g(b.createElement(kB,Object.assign({prefixCls:h,className:_e(y,`${h}-pure-panel`,s&&m,s&&`${m}-${s}`,r,v,p)},u,{closeIcon:QB(h,i),closable:o},x)))},wee=h$(See);function cz(n){return dg(l$(n))}const Is=r$;Is.useModal=PK;Is.info=function(e){return dg(c$(e))};Is.success=function(e){return dg(u$(e))};Is.error=function(e){return dg(d$(e))};Is.warning=cz;Is.warn=cz;Is.confirm=function(e){return dg(f$(e))};Is.destroyAll=function(){for(;ru.length;){const e=ru.pop();e&&e()}};Is.config=TK;Is._InternalPanelDoNotUseOrYouWillBeFired=wee;var Cee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Eee=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:Cee}))},Tee=b.forwardRef(Eee),Mee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Ree=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:Mee}))},Aee=b.forwardRef(Ree),Nee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Pee=function(e,r){return b.createElement(vr,ut({},e,{ref:r,icon:Nee}))},Oee=b.forwardRef(Pee),Iee=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],uz=b.forwardRef(function(n,e){var r,i=n.prefixCls,o=i===void 0?"rc-switch":i,s=n.className,a=n.checked,l=n.defaultChecked,c=n.disabled,u=n.loadingIcon,d=n.checkedChildren,f=n.unCheckedChildren,h=n.onClick,p=n.onChange,g=n.onKeyDown,y=Cn(n,Iee),v=no(!1,{value:a,defaultValue:l}),m=Ce(v,2),x=m[0],_=m[1];function S(T,M){var R=x;return c||(R=T,_(R),p==null||p(R,M)),R}function w(T){T.which===He.LEFT?S(!1,T):T.which===He.RIGHT&&S(!0,T),g==null||g(T)}function C(T){var M=S(!x,T);h==null||h(M,T)}var E=_e(o,s,(r={},ee(r,"".concat(o,"-checked"),x),ee(r,"".concat(o,"-disabled"),c),r));return b.createElement("button",ut({},y,{type:"button",role:"switch","aria-checked":x,disabled:c,className:E,ref:e,onKeyDown:w,onClick:C}),u,b.createElement("span",{className:"".concat(o,"-inner")},b.createElement("span",{className:"".concat(o,"-inner-checked")},d),b.createElement("span",{className:"".concat(o,"-inner-unchecked")},f)))});uz.displayName="Switch";const Dee=n=>{const{componentCls:e,trackHeightSM:r,trackPadding:i,trackMinWidthSM:o,innerMinMarginSM:s,innerMaxMarginSM:a,handleSizeSM:l,calc:c}=n,u=`${e}-inner`,d=De(c(l).add(c(i).mul(2)).equal()),f=De(c(a).mul(2).equal());return{[e]:{[`&${e}-small`]:{minWidth:o,height:r,lineHeight:De(r),[`${e}-inner`]:{paddingInlineStart:a,paddingInlineEnd:s,[`${u}-checked, ${u}-unchecked`]:{minHeight:r},[`${u}-checked`]:{marginInlineStart:`calc(-100% + ${d} - ${f})`,marginInlineEnd:`calc(100% - ${d} + ${f})`},[`${u}-unchecked`]:{marginTop:c(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${e}-handle`]:{width:l,height:l},[`${e}-loading-icon`]:{top:c(c(l).sub(n.switchLoadingIconSize)).div(2).equal(),fontSize:n.switchLoadingIconSize},[`&${e}-checked`]:{[`${e}-inner`]:{paddingInlineStart:s,paddingInlineEnd:a,[`${u}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${u}-unchecked`]:{marginInlineStart:`calc(100% - ${d} + ${f})`,marginInlineEnd:`calc(-100% + ${d} - ${f})`}},[`${e}-handle`]:{insetInlineStart:`calc(100% - ${De(c(l).add(i).equal())})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${u}`]:{[`${u}-unchecked`]:{marginInlineStart:c(n.marginXXS).div(2).equal(),marginInlineEnd:c(n.marginXXS).mul(-1).div(2).equal()}},[`&${e}-checked ${u}`]:{[`${u}-checked`]:{marginInlineStart:c(n.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:c(n.marginXXS).div(2).equal()}}}}}}},Lee=n=>{const{componentCls:e,handleSize:r,calc:i}=n;return{[e]:{[`${e}-loading-icon${n.iconCls}`]:{position:"relative",top:i(i(r).sub(n.fontSize)).div(2).equal(),color:n.switchLoadingIconColor,verticalAlign:"top"},[`&${e}-checked ${e}-loading-icon`]:{color:n.switchColor}}}},Fee=n=>{const{componentCls:e,trackPadding:r,handleBg:i,handleShadow:o,handleSize:s,calc:a}=n,l=`${e}-handle`;return{[e]:{[l]:{position:"absolute",top:r,insetInlineStart:r,width:s,height:s,transition:`all ${n.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:i,borderRadius:a(s).div(2).equal(),boxShadow:o,transition:`all ${n.switchDuration} ease-in-out`,content:'""'}},[`&${e}-checked ${l}`]:{insetInlineStart:`calc(100% - ${De(a(s).add(r).equal())})`},[`&:not(${e}-disabled):active`]:{[`${l}::before`]:{insetInlineEnd:n.switchHandleActiveInset,insetInlineStart:0},[`&${e}-checked ${l}::before`]:{insetInlineEnd:0,insetInlineStart:n.switchHandleActiveInset}}}}},Uee=n=>{const{componentCls:e,trackHeight:r,trackPadding:i,innerMinMargin:o,innerMaxMargin:s,handleSize:a,calc:l}=n,c=`${e}-inner`,u=De(l(a).add(l(i).mul(2)).equal()),d=De(l(s).mul(2).equal());return{[e]:{[c]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:s,paddingInlineEnd:o,transition:`padding-inline-start ${n.switchDuration} ease-in-out, padding-inline-end ${n.switchDuration} ease-in-out`,[`${c}-checked, ${c}-unchecked`]:{display:"block",color:n.colorTextLightSolid,fontSize:n.fontSizeSM,transition:`margin-inline-start ${n.switchDuration} ease-in-out, margin-inline-end ${n.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:r},[`${c}-checked`]:{marginInlineStart:`calc(-100% + ${u} - ${d})`,marginInlineEnd:`calc(100% - ${u} + ${d})`},[`${c}-unchecked`]:{marginTop:l(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${e}-checked ${c}`]:{paddingInlineStart:o,paddingInlineEnd:s,[`${c}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${c}-unchecked`]:{marginInlineStart:`calc(100% - ${u} + ${d})`,marginInlineEnd:`calc(-100% + ${u} - ${d})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${c}`]:{[`${c}-unchecked`]:{marginInlineStart:l(i).mul(2).equal(),marginInlineEnd:l(i).mul(-1).mul(2).equal()}},[`&${e}-checked ${c}`]:{[`${c}-checked`]:{marginInlineStart:l(i).mul(-1).mul(2).equal(),marginInlineEnd:l(i).mul(2).equal()}}}}}},Bee=n=>{const{componentCls:e,trackHeight:r,trackMinWidth:i}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},ns(n)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:i,height:r,lineHeight:De(r),verticalAlign:"middle",background:n.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${n.motionDurationMid}`,userSelect:"none",[`&:hover:not(${e}-disabled)`]:{background:n.colorTextTertiary}}),ig(n)),{[`&${e}-checked`]:{background:n.switchColor,[`&:hover:not(${e}-disabled)`]:{background:n.colorPrimaryHover}},[`&${e}-loading, &${e}-disabled`]:{cursor:"not-allowed",opacity:n.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${e}-rtl`]:{direction:"rtl"}})}},$ee=n=>{const{fontSize:e,lineHeight:r,controlHeight:i,colorWhite:o}=n,s=e*r,a=i/2,l=2,c=s-l*2,u=a-l*2;return{trackHeight:s,trackHeightSM:a,trackMinWidth:c*2+l*4,trackMinWidthSM:u*2+l*2,trackPadding:l,handleBg:o,handleSize:c,handleSizeSM:u,handleShadow:`0 2px 4px 0 ${new Ln("#00230b").setA(.2).toRgbString()}`,innerMinMargin:c/2,innerMaxMargin:c+l+l*2,innerMinMarginSM:u/2,innerMaxMarginSM:u+l+l*2}},zee=ai("Switch",n=>{const e=Un(n,{switchDuration:n.motionDurationMid,switchColor:n.colorPrimary,switchDisabledOpacity:n.opacityLoading,switchLoadingIconSize:n.calc(n.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${n.opacityLoading})`,switchHandleActiveInset:"-30%"});return[Bee(e),Uee(e),Fee(e),Lee(e),Dee(e)]},$ee);var kee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Vee=b.forwardRef((n,e)=>{const{prefixCls:r,size:i,disabled:o,loading:s,className:a,rootClassName:l,style:c,checked:u,value:d,defaultChecked:f,defaultValue:h,onChange:p}=n,g=kee(n,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[y,v]=no(!1,{value:u??d,defaultValue:f??h}),{getPrefixCls:m,direction:x,switch:_}=b.useContext($t),S=b.useContext(el),w=(o??S)||s,C=m("switch",r),E=b.createElement("div",{className:`${C}-handle`},s&&b.createElement(sg,{className:`${C}-loading-icon`})),[T,M,R]=zee(C),N=da(i),D=_e(_==null?void 0:_.className,{[`${C}-small`]:N==="small",[`${C}-loading`]:s,[`${C}-rtl`]:x==="rtl"},a,l,M,R),L=Object.assign(Object.assign({},_==null?void 0:_.style),c),A=function(){v(arguments.length<=0?void 0:arguments[0]),p==null||p.apply(void 0,arguments)};return T(b.createElement(wB,{component:"Switch"},b.createElement(uz,Object.assign({},g,{checked:y,onChange:A,prefixCls:C,className:D,style:L,disabled:w,ref:e,loadingIcon:E}))))}),dz=Vee;dz.__ANT_SWITCH=!0;const Gee=(n,e,r,i)=>{const{titleMarginBottom:o,fontWeightStrong:s}=i;return{marginBottom:o,color:r,fontWeight:s,fontSize:n,lineHeight:e}},Hee=n=>{const e=[1,2,3,4,5],r={};return e.forEach(i=>{r[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=Gee(n[`fontSizeHeading${i}`],n[`lineHeightHeading${i}`],n.colorTextHeading,n)}),r},jee=n=>{const{componentCls:e}=n;return{"a&, a":Object.assign(Object.assign({},jU(n)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:n.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Wee=n=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:gy[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:n.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),qee=n=>{const{componentCls:e,paddingSM:r}=n,i=r;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:n.calc(n.paddingSM).mul(-1).equal(),marginTop:n.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${De(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:n.calc(n.marginXS).add(2).equal(),insetBlockEnd:n.marginXS,color:n.colorTextDescription,fontWeight:"normal",fontSize:n.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},Xee=n=>({[`${n.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:n.colorSuccess}},[`${n.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),Kee=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),Yee=n=>{const{componentCls:e,titleMarginTop:r}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorText,wordBreak:"break-word",lineHeight:n.lineHeight,[`&${e}-secondary`]:{color:n.colorTextDescription},[`&${e}-success`]:{color:n.colorSuccess},[`&${e}-warning`]:{color:n.colorWarning},[`&${e}-danger`]:{color:n.colorError,"a&:active, a&:focus":{color:n.colorErrorActive},"a&:hover":{color:n.colorErrorHover}},[`&${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},Hee(n)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:r},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:r}}}),Wee(n)),jee(n)),{[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},jU(n)),{marginInlineStart:n.marginXXS})}),qee(n)),Xee(n)),Kee()),{"&-rtl":{direction:"rtl"}})}},Qee=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),fz=ai("Typography",n=>[Yee(n)],Qee),Zee=n=>{const{prefixCls:e,"aria-label":r,className:i,style:o,direction:s,maxLength:a,autoSize:l=!0,value:c,onSave:u,onCancel:d,onEnd:f,component:h,enterIcon:p=b.createElement(Oee,null)}=n,g=b.useRef(null),y=b.useRef(!1),v=b.useRef(null),[m,x]=b.useState(c);b.useEffect(()=>{x(c)},[c]),b.useEffect(()=>{var A;if(!((A=g.current)===null||A===void 0)&&A.resizableTextArea){const{textArea:I}=g.current.resizableTextArea;I.focus();const{length:P}=I.value;I.setSelectionRange(P,P)}},[]);const _=A=>{let{target:I}=A;x(I.value.replace(/[\n\r]/g,""))},S=()=>{y.current=!0},w=()=>{y.current=!1},C=A=>{let{keyCode:I}=A;y.current||(v.current=I)},E=()=>{u(m.trim())},T=A=>{let{keyCode:I,ctrlKey:P,altKey:F,metaKey:O,shiftKey:V}=A;v.current!==I||y.current||P||F||O||V||(I===He.ENTER?(E(),f==null||f()):I===He.ESC&&d())},M=()=>{E()},[R,N,D]=fz(e),L=_e(e,`${e}-edit-content`,{[`${e}-rtl`]:s==="rtl",[`${e}-${h}`]:!!h},i,N,D);return R(b.createElement("div",{className:L,style:o},b.createElement(Z$,{ref:g,maxLength:a,value:m,onChange:_,onKeyDown:C,onKeyUp:T,onCompositionStart:S,onCompositionEnd:w,onBlur:M,"aria-label":r,rows:1,autoSize:l}),p!==null?cc(p,{className:`${e}-edit-content-confirm`}):null))};var Jee=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var e=document.activeElement,r=[],i=0;i<n.rangeCount;i++)r.push(n.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||r.forEach(function(o){n.addRange(o)}),e&&e.focus()}},ete=Jee,FP={"text/plain":"Text","text/html":"Url",default:"Text"},tte="Copy to clipboard: #{key}, Enter";function nte(n){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,e)}function rte(n,e){var r,i,o,s,a,l,c=!1;e||(e={}),r=e.debug||!1;try{o=ete(),s=document.createRange(),a=document.getSelection(),l=document.createElement("span"),l.textContent=n,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var f=FP[e.format]||FP.default;window.clipboardData.setData(f,n)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,n);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(l),s.selectNodeContents(l),a.addRange(s);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");c=!0}catch(d){r&&console.error("unable to copy using execCommand: ",d),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",n),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(f){r&&console.error("unable to copy using clipboardData: ",f),r&&console.error("falling back to prompt"),i=nte("message"in e?e.message:tte),window.prompt(i,n)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(s):a.removeAllRanges()),l&&document.body.removeChild(l),o()}return c}var ite=rte;const ote=pc(ite);var ste=function(n,e,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(d){try{u(i.next(d))}catch(f){a(f)}}function c(d){try{u(i.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};const ate=n=>{let{copyConfig:e,children:r}=n;const[i,o]=b.useState(!1),[s,a]=b.useState(!1),l=b.useRef(null),c=()=>{l.current&&clearTimeout(l.current)},u={};e.format&&(u.format=e.format),b.useEffect(()=>c,[]);const d=Sr(f=>ste(void 0,void 0,void 0,function*(){var h;f==null||f.preventDefault(),f==null||f.stopPropagation(),a(!0);try{const p=typeof e.text=="function"?yield e.text():e.text;ote(p||fee(r,!0).join("")||"",u),a(!1),o(!0),c(),l.current=setTimeout(()=>{o(!1)},3e3),(h=e.onCopy)===null||h===void 0||h.call(e,f)}catch(p){throw a(!1),p}}));return{copied:i,copyLoading:s,onClick:d}};function nS(n,e){return b.useMemo(()=>{const r=!!n;return[r,Object.assign(Object.assign({},e),r&&typeof n=="object"?n:null)]},[n])}const lte=n=>{const e=b.useRef(void 0);return b.useEffect(()=>{e.current=n}),e.current},cte=(n,e,r)=>b.useMemo(()=>n===!0?{title:e??r}:b.isValidElement(n)?{title:n}:typeof n=="object"?Object.assign({title:e??r},n):{title:n},[n,e,r]);var ute=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const hz=b.forwardRef((n,e)=>{const{prefixCls:r,component:i="article",className:o,rootClassName:s,setContentRef:a,children:l,direction:c,style:u}=n,d=ute(n,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:f,direction:h,typography:p}=b.useContext($t),g=c??h,y=a?ca(e,a):e,v=f("typography",r),[m,x,_]=fz(v),S=_e(v,p==null?void 0:p.className,{[`${v}-rtl`]:g==="rtl"},o,s,x,_),w=Object.assign(Object.assign({},p==null?void 0:p.style),u);return m(b.createElement(i,Object.assign({className:S,style:w,ref:y},d),l))});function UP(n){return n===!1?[!1,!1]:Array.isArray(n)?n:[n]}function rS(n,e,r){return n===!0||n===void 0?e:n||r&&e}function dte(n){const e=document.createElement("em");n.appendChild(e);const r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return n.removeChild(e),r.left>i.left||i.right>r.right||r.top>i.top||i.bottom>r.bottom}const mM=n=>["string","number"].includes(typeof n),fte=n=>{let{prefixCls:e,copied:r,locale:i,iconOnly:o,tooltips:s,icon:a,tabIndex:l,onCopy:c,loading:u}=n;const d=UP(s),f=UP(a),{copied:h,copy:p}=i??{},g=r?h:p,y=rS(d[r?1:0],g),v=typeof y=="string"?y:g;return b.createElement(pg,{title:y},b.createElement("button",{type:"button",className:_e(`${e}-copy`,{[`${e}-copy-success`]:r,[`${e}-copy-icon-only`]:o}),onClick:c,"aria-label":v,tabIndex:l},r?rS(f[1],b.createElement(D$,null),!0):rS(f[0],u?b.createElement(sg,null):b.createElement(Tee,null),!0)))},cv=b.forwardRef((n,e)=>{let{style:r,children:i}=n;const o=b.useRef(null);return b.useImperativeHandle(e,()=>({isExceed:()=>{const s=o.current;return s.scrollHeight>s.clientHeight},getHeight:()=>o.current.clientHeight})),b.createElement("span",{"aria-hidden":!0,ref:o,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},r)},i)}),hte=n=>n.reduce((e,r)=>e+(mM(r)?String(r).length:1),0);function BP(n,e){let r=0;const i=[];for(let o=0;o<n.length;o+=1){if(r===e)return i;const s=n[o],l=mM(s)?String(s).length:1,c=r+l;if(c>e){const u=e-r;return i.push(String(s).slice(0,u)),i}i.push(s),r=c}return n}const iS=0,oS=1,sS=2,aS=3,$P=4,uv={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function pte(n){const{enableMeasure:e,width:r,text:i,children:o,rows:s,expanded:a,miscDeps:l,onEllipsis:c}=n,u=b.useMemo(()=>Ja(i),[i]),d=b.useMemo(()=>hte(u),[i]),f=b.useMemo(()=>o(u,!1),[i]),[h,p]=b.useState(null),g=b.useRef(null),y=b.useRef(null),v=b.useRef(null),m=b.useRef(null),x=b.useRef(null),[_,S]=b.useState(!1),[w,C]=b.useState(iS),[E,T]=b.useState(0),[M,R]=b.useState(null);_n(()=>{C(e&&r&&d?oS:iS)},[r,i,s,e,u]),_n(()=>{var A,I,P,F;if(w===oS){C(sS);const O=y.current&&getComputedStyle(y.current).whiteSpace;R(O)}else if(w===sS){const O=!!(!((A=v.current)===null||A===void 0)&&A.isExceed());C(O?aS:$P),p(O?[0,d]:null),S(O);const V=((I=v.current)===null||I===void 0?void 0:I.getHeight())||0,U=s===1?0:((P=m.current)===null||P===void 0?void 0:P.getHeight())||0,k=((F=x.current)===null||F===void 0?void 0:F.getHeight())||0,W=Math.max(V,U+k);T(W+1),c(O)}},[w]);const N=h?Math.ceil((h[0]+h[1])/2):0;_n(()=>{var A;const[I,P]=h||[0,0];if(I!==P){const O=(((A=g.current)===null||A===void 0?void 0:A.getHeight())||0)>E;let V=N;P-I===1&&(V=O?I:P),p(O?[I,V]:[V,P])}},[h,N]);const D=b.useMemo(()=>{if(!e)return o(u,!1);if(w!==aS||!h||h[0]!==h[1]){const A=o(u,!1);return[$P,iS].includes(w)?A:b.createElement("span",{style:Object.assign(Object.assign({},uv),{WebkitLineClamp:s})},A)}return o(a?u:BP(u,h[0]),_)},[a,w,h,u].concat(st(l))),L={width:r,margin:0,padding:0,whiteSpace:M==="nowrap"?"normal":"inherit"};return b.createElement(b.Fragment,null,D,w===sS&&b.createElement(b.Fragment,null,b.createElement(cv,{style:Object.assign(Object.assign(Object.assign({},L),uv),{WebkitLineClamp:s}),ref:v},f),b.createElement(cv,{style:Object.assign(Object.assign(Object.assign({},L),uv),{WebkitLineClamp:s-1}),ref:m},f),b.createElement(cv,{style:Object.assign(Object.assign(Object.assign({},L),uv),{WebkitLineClamp:1}),ref:x},o([],!0))),w===aS&&h&&h[0]!==h[1]&&b.createElement(cv,{style:Object.assign(Object.assign({},L),{top:400}),ref:g},o(BP(u,N),!0)),w===oS&&b.createElement("span",{style:{whiteSpace:"inherit"},ref:y}))}const mte=n=>{let{enableEllipsis:e,isEllipsis:r,children:i,tooltipProps:o}=n;return!(o!=null&&o.title)||!e?i:b.createElement(pg,Object.assign({open:r?void 0:!1},o),i)};var gte=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function vte(n,e){let{mark:r,code:i,underline:o,delete:s,strong:a,keyboard:l,italic:c}=n,u=e;function d(f,h){h&&(u=b.createElement(f,{},u))}return d("strong",a),d("u",o),d("del",s),d("code",i),d("mark",r),d("kbd",l),d("i",c),u}const yte="...",a_=b.forwardRef((n,e)=>{var r;const{prefixCls:i,className:o,style:s,type:a,disabled:l,children:c,ellipsis:u,editable:d,copyable:f,component:h,title:p}=n,g=gte(n,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:y,direction:v}=b.useContext($t),[m]=_c("Text"),x=b.useRef(null),_=b.useRef(null),S=y("typography",i),w=ua(g,["mark","code","delete","underline","strong","keyboard","italic"]),[C,E]=nS(d),[T,M]=no(!1,{value:E.editing}),{triggerType:R=["icon"]}=E,N=Ve=>{var $e;Ve&&(($e=E.onStart)===null||$e===void 0||$e.call(E)),M(Ve)},D=lte(T);_n(()=>{var Ve;!T&&D&&((Ve=_.current)===null||Ve===void 0||Ve.focus())},[T]);const L=Ve=>{Ve==null||Ve.preventDefault(),N(!0)},A=Ve=>{var $e;($e=E.onChange)===null||$e===void 0||$e.call(E,Ve),N(!1)},I=()=>{var Ve;(Ve=E.onCancel)===null||Ve===void 0||Ve.call(E),N(!1)},[P,F]=nS(f),{copied:O,copyLoading:V,onClick:U}=ate({copyConfig:F,children:c}),[k,W]=b.useState(!1),[J,z]=b.useState(!1),[j,X]=b.useState(!1),[Q,ne]=b.useState(!1),[ye,me]=b.useState(!0),[fe,le]=nS(u,{expandable:!1,symbol:Ve=>Ve?m==null?void 0:m.collapse:m==null?void 0:m.expand}),[ge,q]=no(le.defaultExpanded||!1,{value:le.expanded}),ve=fe&&(!ge||le.expandable==="collapsible"),{rows:be=1}=le,xe=b.useMemo(()=>ve&&(le.suffix!==void 0||le.onEllipsis||le.expandable||C||P),[ve,le,C,P]);_n(()=>{fe&&!xe&&(W(kN("webkitLineClamp")),z(kN("textOverflow")))},[xe,fe]);const[we,qe]=b.useState(ve),Fe=b.useMemo(()=>xe?!1:be===1?J:k,[xe,J,k]);_n(()=>{qe(Fe&&ve)},[Fe,ve]);const H=ve&&(we?Q:j),B=ve&&be===1&&we,K=ve&&be>1&&we,oe=(Ve,$e)=>{var xt;q($e.expanded),(xt=le.onExpand)===null||xt===void 0||xt.call(le,Ve,$e)},[pe,ce]=b.useState(0),Ue=Ve=>{let{offsetWidth:$e}=Ve;ce($e)},Re=Ve=>{var $e;X(Ve),j!==Ve&&(($e=le.onEllipsis)===null||$e===void 0||$e.call(le,Ve))};b.useEffect(()=>{const Ve=x.current;if(fe&&we&&Ve){const $e=dte(Ve);Q!==$e&&ne($e)}},[fe,we,c,K,ye,pe]),b.useEffect(()=>{const Ve=x.current;if(typeof IntersectionObserver>"u"||!Ve||!we||!ve)return;const $e=new IntersectionObserver(()=>{me(!!Ve.offsetParent)});return $e.observe(Ve),()=>{$e.disconnect()}},[we,ve]);const Le=cte(le.tooltip,E.text,c),Je=b.useMemo(()=>{if(!(!fe||we))return[E.text,c,p,Le.title].find(mM)},[fe,we,p,Le.title,H]);if(T)return b.createElement(Zee,{value:(r=E.text)!==null&&r!==void 0?r:typeof c=="string"?c:"",onSave:A,onCancel:I,onEnd:E.onEnd,prefixCls:S,className:o,style:s,direction:v,component:h,maxLength:E.maxLength,autoSize:E.autoSize,enterIcon:E.enterIcon});const Me=()=>{const{expandable:Ve,symbol:$e}=le;return Ve?b.createElement("button",{type:"button",key:"expand",className:`${S}-${ge?"collapse":"expand"}`,onClick:xt=>oe(xt,{expanded:!ge}),"aria-label":ge?m.collapse:m==null?void 0:m.expand},typeof $e=="function"?$e(ge):$e):null},ze=()=>{if(!C)return;const{icon:Ve,tooltip:$e,tabIndex:xt}=E,te=Ja($e)[0]||(m==null?void 0:m.edit),Qe=typeof te=="string"?te:"";return R.includes("icon")?b.createElement(pg,{key:"edit",title:$e===!1?"":te},b.createElement("button",{type:"button",ref:_,className:`${S}-edit`,onClick:L,"aria-label":Qe,tabIndex:xt},Ve||b.createElement(Aee,{role:"button"}))):null},Ee=()=>P?b.createElement(fte,Object.assign({key:"copy"},F,{prefixCls:S,copied:O,locale:m,onCopy:U,loading:V,iconOnly:c==null})):null,Pe=Ve=>[Ve&&Me(),ze(),Ee()],ke=Ve=>[Ve&&!ge&&b.createElement("span",{"aria-hidden":!0,key:"ellipsis"},yte),le.suffix,Pe(Ve)];return b.createElement(ll,{onResize:Ue,disabled:!ve},Ve=>b.createElement(mte,{tooltipProps:Le,enableEllipsis:ve,isEllipsis:H},b.createElement(hz,Object.assign({className:_e({[`${S}-${a}`]:a,[`${S}-disabled`]:l,[`${S}-ellipsis`]:fe,[`${S}-ellipsis-single-line`]:B,[`${S}-ellipsis-multiple-line`]:K},o),prefixCls:i,style:Object.assign(Object.assign({},s),{WebkitLineClamp:K?be:void 0}),component:h,ref:ca(Ve,x,e),direction:v,onClick:R.includes("text")?L:void 0,"aria-label":Je==null?void 0:Je.toString(),title:p},w),b.createElement(pte,{enableMeasure:ve&&!we,text:c,rows:be,width:pe,onEllipsis:Re,expanded:ge,miscDeps:[O,ge,V,C,P,m]},($e,xt)=>vte(n,b.createElement(b.Fragment,null,$e.length>0&&xt&&!ge&&Je?b.createElement("span",{key:"show-content","aria-hidden":!0},$e):$e,ke(xt)))))))});var xte=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const _te=b.forwardRef((n,e)=>{var{ellipsis:r,rel:i}=n,o=xte(n,["ellipsis","rel"]);const s=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete s.navigate,b.createElement(a_,Object.assign({},s,{ref:e,ellipsis:!!r,component:"a"}))}),pz=b.forwardRef((n,e)=>b.createElement(a_,Object.assign({ref:e},n,{component:"div"})));var bte=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Ste=(n,e)=>{var{ellipsis:r}=n,i=bte(n,["ellipsis"]);const o=b.useMemo(()=>r&&typeof r=="object"?ua(r,["expandable","rows"]):r,[r]);return b.createElement(a_,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},wte=b.forwardRef(Ste);var Cte=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Ete=[1,2,3,4,5],Tte=b.forwardRef((n,e)=>{const{level:r=1}=n,i=Cte(n,["level"]),o=Ete.includes(r)?`h${r}`:"h1";return b.createElement(a_,Object.assign({ref:e},i,{component:o}))}),mg=hz;mg.Text=wte;mg.Link=_te;mg.Title=Tte;mg.Paragraph=pz;function Mte(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function Rte(n,e,r){return e=Fte(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function zP(n,e){return Pte(n)||Mte(n,e)||mz(n,e)||Dte()}function Ate(n){return Nte(n)||Ote(n)||mz(n)||Ite()}function Nte(n){if(Array.isArray(n))return kC(n)}function Pte(n){if(Array.isArray(n))return n}function Ote(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function mz(n,e){if(n){if(typeof n=="string")return kC(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kC(n,e)}}function kC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Ite(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lte(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fte(n){var e=Lte(n,"string");return typeof e=="symbol"?e:String(e)}var Ute=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(Ate(Object.entries(e).filter(function(o){var s=zP(o,1),a=s[0];return!i.has(a)}).map(function(o){var s=zP(o,2),a=s[0],l=s[1];return Rte({},a,l)}))))};function VC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Bte(n){if(Array.isArray(n))return n}function $te(n){if(Array.isArray(n))return VC(n)}function zte(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kte(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function Vte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hte(n,e){return Bte(n)||kte(n,e)||gz(n,e)||Vte()}function kP(n){return $te(n)||zte(n)||gz(n)||Gte()}function gz(n,e){if(n){if(typeof n=="string")return VC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VC(n,e):void 0}}function vz(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,o=e.nodeMapper,s=o===void 0?function(d){return d}:o,a=e.methodNames,l=a===void 0?[]:a,c=e.initPropNames,u=c===void 0?[]:c;return b.forwardRef(function(d,f){var h=b.useRef(),p=b.useMemo(function(){var v=Object.fromEntries(u.filter(function(m){return d.hasOwnProperty(m)}).map(function(m){return[m,d[m]]}));return n(v)},[]);VP(function(){p(s(h.current))},b.useLayoutEffect),VP(function(){return p._destructor instanceof Function?p._destructor:void 0});var g=b.useCallback(function(v){for(var m=arguments.length,x=new Array(m>1?m-1:0),_=1;_<m;_++)x[_-1]=arguments[_];return p[v]instanceof Function?p[v].apply(p,x):void 0},[p]),y=b.useRef({});return Object.keys(Ute(d,[].concat(kP(l),kP(u)))).filter(function(v){return y.current[v]!==d[v]}).forEach(function(v){return g(v,d[v])}),y.current=d,b.useImperativeHandle(f,function(){return Object.fromEntries(l.map(function(v){return[v,function(){for(var m=arguments.length,x=new Array(m),_=0;_<m;_++)x[_]=arguments[_];return g.apply(void 0,[v].concat(x))}]}))},[g]),se.createElement(i,{ref:h})})}function VP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.useEffect,r=b.useRef(),i=b.useRef(!1),o=b.useRef(!1),s=b.useState(0),a=Hte(s,2);a[0];var l=a[1];i.current&&(o.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(c){return c+1}),function(){o.current&&r.current&&r.current()}},[])}var GC="http://www.w3.org/1999/xhtml";const GP={svg:"http://www.w3.org/2000/svg",xhtml:GC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function l_(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),GP.hasOwnProperty(e)?{space:GP[e],local:n}:n}function jte(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===GC&&e.documentElement.namespaceURI===GC?e.createElement(n):e.createElementNS(r,n)}}function Wte(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function yz(n){var e=l_(n);return(e.local?Wte:jte)(e)}function qte(){}function gM(n){return n==null?qte:function(){return this.querySelector(n)}}function Xte(n){typeof n!="function"&&(n=gM(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=new Array(a),c,u,d=0;d<a;++d)(c=s[d])&&(u=n.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new To(i,this._parents)}function Kte(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Yte(){return[]}function xz(n){return n==null?Yte:function(){return this.querySelectorAll(n)}}function Qte(n){return function(){return Kte(n.apply(this,arguments))}}function Zte(n){typeof n=="function"?n=Qte(n):n=xz(n);for(var e=this._groups,r=e.length,i=[],o=[],s=0;s<r;++s)for(var a=e[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&(i.push(n.call(c,c.__data__,u,a)),o.push(c));return new To(i,o)}function _z(n){return function(){return this.matches(n)}}function bz(n){return function(e){return e.matches(n)}}var Jte=Array.prototype.find;function ene(n){return function(){return Jte.call(this.children,n)}}function tne(){return this.firstElementChild}function nne(n){return this.select(n==null?tne:ene(typeof n=="function"?n:bz(n)))}var rne=Array.prototype.filter;function ine(){return Array.from(this.children)}function one(n){return function(){return rne.call(this.children,n)}}function sne(n){return this.selectAll(n==null?ine:one(typeof n=="function"?n:bz(n)))}function ane(n){typeof n!="function"&&(n=_z(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new To(i,this._parents)}function Sz(n){return new Array(n.length)}function lne(){return new To(this._enter||this._groups.map(Sz),this._parents)}function Ay(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Ay.prototype={constructor:Ay,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function cne(n){return function(){return n}}function une(n,e,r,i,o,s){for(var a=0,l,c=e.length,u=s.length;a<u;++a)(l=e[a])?(l.__data__=s[a],i[a]=l):r[a]=new Ay(n,s[a]);for(;a<c;++a)(l=e[a])&&(o[a]=l)}function dne(n,e,r,i,o,s,a){var l,c,u=new Map,d=e.length,f=s.length,h=new Array(d),p;for(l=0;l<d;++l)(c=e[l])&&(h[l]=p=a.call(c,c.__data__,l,e)+"",u.has(p)?o[l]=c:u.set(p,c));for(l=0;l<f;++l)p=a.call(n,s[l],l,s)+"",(c=u.get(p))?(i[l]=c,c.__data__=s[l],u.delete(p)):r[l]=new Ay(n,s[l]);for(l=0;l<d;++l)(c=e[l])&&u.get(h[l])===c&&(o[l]=c)}function fne(n){return n.__data__}function hne(n,e){if(!arguments.length)return Array.from(this,fne);var r=e?dne:une,i=this._parents,o=this._groups;typeof n!="function"&&(n=cne(n));for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=i[u],f=o[u],h=f.length,p=pne(n.call(d,d&&d.__data__,u,i)),g=p.length,y=l[u]=new Array(g),v=a[u]=new Array(g),m=c[u]=new Array(h);r(d,f,y,v,m,p,e);for(var x=0,_=0,S,w;x<g;++x)if(S=y[x]){for(x>=_&&(_=x+1);!(w=v[_])&&++_<g;);S._next=w||null}}return a=new To(a,i),a._enter=l,a._exit=c,a}function pne(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function mne(){return new To(this._exit||this._groups.map(Sz),this._parents)}function gne(n,e,r){var i=this.enter(),o=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?s.remove():r(s),i&&o?i.merge(o).order():o}function vne(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,o=r.length,s=i.length,a=Math.min(o,s),l=new Array(o),c=0;c<a;++c)for(var u=r[c],d=i[c],f=u.length,h=l[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<o;++c)l[c]=r[c];return new To(l,this._parents)}function yne(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],o=i.length-1,s=i[o],a;--o>=0;)(a=i[o])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function xne(n){n||(n=_ne);function e(f,h){return f&&h?n(f.__data__,h.__data__):!f-!h}for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s){for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,d=0;d<l;++d)(u=a[d])&&(c[d]=u);c.sort(e)}return new To(o,this._parents).order()}function _ne(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function bne(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Sne(){return Array.from(this)}function wne(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length;o<s;++o){var a=i[o];if(a)return a}return null}function Cne(){let n=0;for(const e of this)++n;return n}function Ene(){return!this.node()}function Tne(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var o=e[r],s=0,a=o.length,l;s<a;++s)(l=o[s])&&n.call(l,l.__data__,s,o);return this}function Mne(n){return function(){this.removeAttribute(n)}}function Rne(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Ane(n,e){return function(){this.setAttribute(n,e)}}function Nne(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Pne(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function One(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function Ine(n,e){var r=l_(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?Rne:Mne:typeof e=="function"?r.local?One:Pne:r.local?Nne:Ane)(r,e))}function wz(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Dne(n){return function(){this.style.removeProperty(n)}}function Lne(n,e,r){return function(){this.style.setProperty(n,e,r)}}function Fne(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function Une(n,e,r){return arguments.length>1?this.each((e==null?Dne:typeof e=="function"?Fne:Lne)(n,e,r??"")):Ef(this.node(),n)}function Ef(n,e){return n.style.getPropertyValue(e)||wz(n).getComputedStyle(n,null).getPropertyValue(e)}function Bne(n){return function(){delete this[n]}}function $ne(n,e){return function(){this[n]=e}}function zne(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function kne(n,e){return arguments.length>1?this.each((e==null?Bne:typeof e=="function"?zne:$ne)(n,e)):this.node()[n]}function Cz(n){return n.trim().split(/^|\s+/)}function vM(n){return n.classList||new Ez(n)}function Ez(n){this._node=n,this._names=Cz(n.getAttribute("class")||"")}Ez.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Tz(n,e){for(var r=vM(n),i=-1,o=e.length;++i<o;)r.add(e[i])}function Mz(n,e){for(var r=vM(n),i=-1,o=e.length;++i<o;)r.remove(e[i])}function Vne(n){return function(){Tz(this,n)}}function Gne(n){return function(){Mz(this,n)}}function Hne(n,e){return function(){(e.apply(this,arguments)?Tz:Mz)(this,n)}}function jne(n,e){var r=Cz(n+"");if(arguments.length<2){for(var i=vM(this.node()),o=-1,s=r.length;++o<s;)if(!i.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?Hne:e?Vne:Gne)(r,e))}function Wne(){this.textContent=""}function qne(n){return function(){this.textContent=n}}function Xne(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function Kne(n){return arguments.length?this.each(n==null?Wne:(typeof n=="function"?Xne:qne)(n)):this.node().textContent}function Yne(){this.innerHTML=""}function Qne(n){return function(){this.innerHTML=n}}function Zne(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Jne(n){return arguments.length?this.each(n==null?Yne:(typeof n=="function"?Zne:Qne)(n)):this.node().innerHTML}function ere(){this.nextSibling&&this.parentNode.appendChild(this)}function tre(){return this.each(ere)}function nre(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rre(){return this.each(nre)}function ire(n){var e=typeof n=="function"?n:yz(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ore(){return null}function sre(n,e){var r=typeof n=="function"?n:yz(n),i=e==null?ore:typeof e=="function"?e:gM(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function are(){var n=this.parentNode;n&&n.removeChild(this)}function lre(){return this.each(are)}function cre(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function ure(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function dre(n){return this.select(n?ure:cre)}function fre(n){return arguments.length?this.property("__data__",n):this.node().__data__}function hre(n){return function(e){n.call(this,e,this.__data__)}}function pre(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function mre(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,o=e.length,s;r<o;++r)s=e[r],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function gre(n,e,r){return function(){var i=this.__on,o,s=hre(e);if(i){for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=r),o.value=e;return}}this.addEventListener(n.type,s,r),o={type:n.type,name:n.name,value:e,listener:s,options:r},i?i.push(o):this.__on=[o]}}function vre(n,e,r){var i=pre(n+""),o,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(o=0,d=l[c];o<s;++o)if((a=i[o]).type===d.type&&a.name===d.name)return d.value}return}for(l=e?gre:mre,o=0;o<s;++o)this.each(l(i[o],e,r));return this}function Rz(n,e,r){var i=wz(n),o=i.CustomEvent;typeof o=="function"?o=new o(e,r):(o=i.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function yre(n,e){return function(){return Rz(this,n,e)}}function xre(n,e){return function(){return Rz(this,n,e.apply(this,arguments))}}function _re(n,e){return this.each((typeof e=="function"?xre:yre)(n,e))}function*bre(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length,a;o<s;++o)(a=i[o])&&(yield a)}var Az=[null];function To(n,e){this._groups=n,this._parents=e}function gg(){return new To([[document.documentElement]],Az)}function Sre(){return this}To.prototype=gg.prototype={constructor:To,select:Xte,selectAll:Zte,selectChild:nne,selectChildren:sne,filter:ane,data:hne,enter:lne,exit:mne,join:gne,merge:vne,selection:Sre,order:yne,sort:xne,call:bne,nodes:Sne,node:wne,size:Cne,empty:Ene,each:Tne,attr:Ine,style:Une,property:kne,classed:jne,text:Kne,html:Jne,raise:tre,lower:rre,append:ire,insert:sre,remove:lre,clone:dre,datum:fre,on:vre,dispatch:_re,[Symbol.iterator]:bre};function xs(n){return typeof n=="string"?new To([[document.querySelector(n)]],[document.documentElement]):new To([[n]],Az)}function wre(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Ra(n,e){if(n=wre(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}}return[n.pageX,n.pageY]}var Cre={value:()=>{}};function vg(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new P0(r)}function P0(n){this._=n}function Ere(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",o=r.indexOf(".");if(o>=0&&(i=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}P0.prototype=vg.prototype={constructor:P0,on:function(n,e){var r=this._,i=Ere(n+"",r),o,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((o=(n=i[s]).type)&&(o=Tre(r[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(o=(n=i[s]).type)r[o]=HP(r[o],n.name,e);else if(e==null)for(o in r)r[o]=HP(r[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new P0(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,s;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,o=s.length;i<o;++i)s[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],o=0,s=i.length;o<s;++o)i[o].value.apply(e,r)}};function Tre(n,e){for(var r=0,i=n.length,o;r<i;++r)if((o=n[r]).name===e)return o.value}function HP(n,e,r){for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n[i]=Cre,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const Mre={passive:!1},ym={capture:!0,passive:!1};function lS(n){n.stopImmediatePropagation()}function Jd(n){n.preventDefault(),n.stopImmediatePropagation()}function Nz(n){var e=n.document.documentElement,r=xs(n).on("dragstart.drag",Jd,ym);"onselectstart"in e?r.on("selectstart.drag",Jd,ym):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Pz(n,e){var r=n.document.documentElement,i=xs(n).on("dragstart.drag",null);e&&(i.on("click.drag",Jd,ym),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const dv=n=>()=>n;function HC(n,{sourceEvent:e,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}HC.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Rre(n){return!n.ctrlKey&&!n.button}function Are(){return this.parentNode}function Nre(n,e){return e??{x:n.x,y:n.y}}function Pre(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ore(){var n=Rre,e=Are,r=Nre,i=Pre,o={},s=vg("start","drag","end"),a=0,l,c,u,d,f=0;function h(S){S.on("mousedown.drag",p).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,Mre).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,w){if(!(d||!n.call(this,S,w))){var C=_(this,e.call(this,S,w),S,w,"mouse");C&&(xs(S.view).on("mousemove.drag",g,ym).on("mouseup.drag",y,ym),Nz(S.view),lS(S),u=!1,l=S.clientX,c=S.clientY,C("start",S))}}function g(S){if(Jd(S),!u){var w=S.clientX-l,C=S.clientY-c;u=w*w+C*C>f}o.mouse("drag",S)}function y(S){xs(S.view).on("mousemove.drag mouseup.drag",null),Pz(S.view,u),Jd(S),o.mouse("end",S)}function v(S,w){if(n.call(this,S,w)){var C=S.changedTouches,E=e.call(this,S,w),T=C.length,M,R;for(M=0;M<T;++M)(R=_(this,E,S,w,C[M].identifier,C[M]))&&(lS(S),R("start",S,C[M]))}}function m(S){var w=S.changedTouches,C=w.length,E,T;for(E=0;E<C;++E)(T=o[w[E].identifier])&&(Jd(S),T("drag",S,w[E]))}function x(S){var w=S.changedTouches,C=w.length,E,T;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<C;++E)(T=o[w[E].identifier])&&(lS(S),T("end",S,w[E]))}function _(S,w,C,E,T,M){var R=s.copy(),N=Ra(M||C,w),D,L,A;if((A=r.call(S,new HC("beforestart",{sourceEvent:C,target:h,identifier:T,active:a,x:N[0],y:N[1],dx:0,dy:0,dispatch:R}),E))!=null)return D=A.x-N[0]||0,L=A.y-N[1]||0,function I(P,F,O){var V=N,U;switch(P){case"start":o[T]=I,U=a++;break;case"end":delete o[T],--a;case"drag":N=Ra(O||F,w),U=a;break}R.call(P,S,new HC(P,{sourceEvent:F,subject:A,target:h,identifier:T,active:U,x:N[0]+D,y:N[1]+L,dx:N[0]-V[0],dy:N[1]-V[1],dispatch:R}),E)}}return h.filter=function(S){return arguments.length?(n=typeof S=="function"?S:dv(!!S),h):n},h.container=function(S){return arguments.length?(e=typeof S=="function"?S:dv(S),h):e},h.subject=function(S){return arguments.length?(r=typeof S=="function"?S:dv(S),h):r},h.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:dv(!!S),h):i},h.on=function(){var S=s.on.apply(s,arguments);return S===s?h:S},h.clickDistance=function(S){return arguments.length?(f=(S=+S)*S,h):Math.sqrt(f)},h}function yM(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function Oz(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function yg(){}var xm=.7,Ny=1/xm,ef="\\s*([+-]?\\d+)\\s*",_m="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ire=/^#([0-9a-f]{3,8})$/,Dre=new RegExp(`^rgb\\(${ef},${ef},${ef}\\)$`),Lre=new RegExp(`^rgb\\(${Zs},${Zs},${Zs}\\)$`),Fre=new RegExp(`^rgba\\(${ef},${ef},${ef},${_m}\\)$`),Ure=new RegExp(`^rgba\\(${Zs},${Zs},${Zs},${_m}\\)$`),Bre=new RegExp(`^hsl\\(${_m},${Zs},${Zs}\\)$`),$re=new RegExp(`^hsla\\(${_m},${Zs},${Zs},${_m}\\)$`),jP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yM(yg,bm,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:WP,formatHex:WP,formatHex8:zre,formatHsl:kre,formatRgb:qP,toString:qP});function WP(){return this.rgb().formatHex()}function zre(){return this.rgb().formatHex8()}function kre(){return Iz(this).formatHsl()}function qP(){return this.rgb().formatRgb()}function bm(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=Ire.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?XP(e):r===3?new ji(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?fv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?fv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Dre.exec(n))?new ji(e[1],e[2],e[3],1):(e=Lre.exec(n))?new ji(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Fre.exec(n))?fv(e[1],e[2],e[3],e[4]):(e=Ure.exec(n))?fv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Bre.exec(n))?QP(e[1],e[2]/100,e[3]/100,1):(e=$re.exec(n))?QP(e[1],e[2]/100,e[3]/100,e[4]):jP.hasOwnProperty(n)?XP(jP[n]):n==="transparent"?new ji(NaN,NaN,NaN,0):null}function XP(n){return new ji(n>>16&255,n>>8&255,n&255,1)}function fv(n,e,r,i){return i<=0&&(n=e=r=NaN),new ji(n,e,r,i)}function Vre(n){return n instanceof yg||(n=bm(n)),n?(n=n.rgb(),new ji(n.r,n.g,n.b,n.opacity)):new ji}function jC(n,e,r,i){return arguments.length===1?Vre(n):new ji(n,e,r,i??1)}function ji(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}yM(ji,jC,Oz(yg,{brighter(n){return n=n==null?Ny:Math.pow(Ny,n),new ji(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?xm:Math.pow(xm,n),new ji(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ji(cu(this.r),cu(this.g),cu(this.b),Py(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KP,formatHex:KP,formatHex8:Gre,formatRgb:YP,toString:YP}));function KP(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}`}function Gre(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}${ou((isNaN(this.opacity)?1:this.opacity)*255)}`}function YP(){const n=Py(this.opacity);return`${n===1?"rgb(":"rgba("}${cu(this.r)}, ${cu(this.g)}, ${cu(this.b)}${n===1?")":`, ${n})`}`}function Py(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function cu(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ou(n){return n=cu(n),(n<16?"0":"")+n.toString(16)}function QP(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new _s(n,e,r,i)}function Iz(n){if(n instanceof _s)return new _s(n.h,n.s,n.l,n.opacity);if(n instanceof yg||(n=bm(n)),!n)return new _s;if(n instanceof _s)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,o=Math.min(e,r,i),s=Math.max(e,r,i),a=NaN,l=s-o,c=(s+o)/2;return l?(e===s?a=(r-i)/l+(r<i)*6:r===s?a=(i-e)/l+2:a=(e-r)/l+4,l/=c<.5?s+o:2-s-o,a*=60):l=c>0&&c<1?0:a,new _s(a,l,c,n.opacity)}function Hre(n,e,r,i){return arguments.length===1?Iz(n):new _s(n,e,r,i??1)}function _s(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}yM(_s,Hre,Oz(yg,{brighter(n){return n=n==null?Ny:Math.pow(Ny,n),new _s(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?xm:Math.pow(xm,n),new _s(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,o=2*r-i;return new ji(cS(n>=240?n-240:n+120,o,i),cS(n,o,i),cS(n<120?n+240:n-120,o,i),this.opacity)},clamp(){return new _s(ZP(this.h),hv(this.s),hv(this.l),Py(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Py(this.opacity);return`${n===1?"hsl(":"hsla("}${ZP(this.h)}, ${hv(this.s)*100}%, ${hv(this.l)*100}%${n===1?")":`, ${n})`}`}}));function ZP(n){return n=(n||0)%360,n<0?n+360:n}function hv(n){return Math.max(0,Math.min(1,n||0))}function cS(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const Dz=n=>()=>n;function jre(n,e){return function(r){return n+r*e}}function Wre(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function qre(n){return(n=+n)==1?Lz:function(e,r){return r-e?Wre(e,r,n):Dz(isNaN(e)?r:e)}}function Lz(n,e){var r=e-n;return r?jre(n,r):Dz(isNaN(n)?e:n)}const JP=function n(e){var r=qre(e);function i(o,s){var a=r((o=jC(o)).r,(s=jC(s)).r),l=r(o.g,s.g),c=r(o.b,s.b),u=Lz(o.opacity,s.opacity);return function(d){return o.r=a(d),o.g=l(d),o.b=c(d),o.opacity=u(d),o+""}}return i.gamma=n,i}(1);function Fl(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var WC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uS=new RegExp(WC.source,"g");function Xre(n){return function(){return n}}function Kre(n){return function(e){return n(e)+""}}function Yre(n,e){var r=WC.lastIndex=uS.lastIndex=0,i,o,s,a=-1,l=[],c=[];for(n=n+"",e=e+"";(i=WC.exec(n))&&(o=uS.exec(e));)(s=o.index)>r&&(s=e.slice(r,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,c.push({i:a,x:Fl(i,o)})),r=uS.lastIndex;return r<e.length&&(s=e.slice(r),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?Kre(c[0].x):Xre(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var eO=180/Math.PI,qC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fz(n,e,r,i,o,s){var a,l,c;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(c=n*r+e*i)&&(r-=n*c,i-=e*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),n*i<e*r&&(n=-n,e=-e,c=-c,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(e,n)*eO,skewX:Math.atan(c)*eO,scaleX:a,scaleY:l}}var pv;function Qre(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?qC:Fz(e.a,e.b,e.c,e.d,e.e,e.f)}function Zre(n){return n==null||(pv||(pv=document.createElementNS("http://www.w3.org/2000/svg","g")),pv.setAttribute("transform",n),!(n=pv.transform.baseVal.consolidate()))?qC:(n=n.matrix,Fz(n.a,n.b,n.c,n.d,n.e,n.f))}function Uz(n,e,r,i){function o(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var y=p.push("translate(",null,e,null,r);g.push({i:y-4,x:Fl(u,f)},{i:y-2,x:Fl(d,h)})}else(f||h)&&p.push("translate("+f+e+h+r)}function a(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(o(f)+"rotate(",null,i)-2,x:Fl(u,d)})):d&&f.push(o(f)+"rotate("+d+i)}function l(u,d,f,h){u!==d?h.push({i:f.push(o(f)+"skewX(",null,i)-2,x:Fl(u,d)}):d&&f.push(o(f)+"skewX("+d+i)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var y=p.push(o(p)+"scale(",null,",",null,")");g.push({i:y-4,x:Fl(u,f)},{i:y-2,x:Fl(d,h)})}else(f!==1||h!==1)&&p.push(o(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=n(u),d=n(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),a(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,y=h.length,v;++g<y;)f[(v=h[g]).i]=v.x(p);return f.join("")}}}var Jre=Uz(Qre,"px, ","px)","deg)"),eie=Uz(Zre,", ",")",")"),tie=1e-12;function tO(n){return((n=Math.exp(n))+1/n)/2}function nie(n){return((n=Math.exp(n))-1/n)/2}function rie(n){return((n=Math.exp(2*n))-1)/(n+1)}const iie=function n(e,r,i){function o(s,a){var l=s[0],c=s[1],u=s[2],d=a[0],f=a[1],h=a[2],p=d-l,g=f-c,y=p*p+g*g,v,m;if(y<tie)m=Math.log(h/u)/e,v=function(E){return[l+E*p,c+E*g,u*Math.exp(e*E*m)]};else{var x=Math.sqrt(y),_=(h*h-u*u+i*y)/(2*u*r*x),S=(h*h-u*u-i*y)/(2*h*r*x),w=Math.log(Math.sqrt(_*_+1)-_),C=Math.log(Math.sqrt(S*S+1)-S);m=(C-w)/e,v=function(E){var T=E*m,M=tO(w),R=u/(r*x)*(M*rie(e*T+w)-nie(w));return[l+R*p,c+R*g,u*M/tO(e*T+w)]}}return v.duration=m*1e3*e/Math.SQRT2,v}return o.rho=function(s){var a=Math.max(.001,+s),l=a*a,c=l*l;return n(a,l,c)},o}(Math.SQRT2,2,4);var Tf=0,fp=0,Oh=0,Bz=1e3,Oy,hp,Iy=0,Su=0,c_=0,Sm=typeof performance=="object"&&performance.now?performance:Date,$z=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function xM(){return Su||($z(oie),Su=Sm.now()+c_)}function oie(){Su=0}function Dy(){this._call=this._time=this._next=null}Dy.prototype=_M.prototype={constructor:Dy,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?xM():+r)+(e==null?0:+e),!this._next&&hp!==this&&(hp?hp._next=this:Oy=this,hp=this),this._call=n,this._time=r,XC()},stop:function(){this._call&&(this._call=null,this._time=1/0,XC())}};function _M(n,e,r){var i=new Dy;return i.restart(n,e,r),i}function sie(){xM(),++Tf;for(var n=Oy,e;n;)(e=Su-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Tf}function nO(){Su=(Iy=Sm.now())+c_,Tf=fp=0;try{sie()}finally{Tf=0,lie(),Su=0}}function aie(){var n=Sm.now(),e=n-Iy;e>Bz&&(c_-=e,Iy=n)}function lie(){for(var n,e=Oy,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Oy=r);hp=n,XC(i)}function XC(n){if(!Tf){fp&&(fp=clearTimeout(fp));var e=n-Su;e>24?(n<1/0&&(fp=setTimeout(nO,n-Sm.now()-c_)),Oh&&(Oh=clearInterval(Oh))):(Oh||(Iy=Sm.now(),Oh=setInterval(aie,Bz)),Tf=1,$z(nO))}}function rO(n,e,r){var i=new Dy;return e=e==null?0:+e,i.restart(o=>{i.stop(),n(o+e)},e,r),i}var cie=vg("start","end","cancel","interrupt"),uie=[],zz=0,iO=1,KC=2,O0=3,oO=4,YC=5,I0=6;function u_(n,e,r,i,o,s){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;die(n,r,{name:e,index:i,group:o,on:cie,tween:uie,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zz})}function bM(n,e){var r=Ds(n,e);if(r.state>zz)throw new Error("too late; already scheduled");return r}function fa(n,e){var r=Ds(n,e);if(r.state>O0)throw new Error("too late; already running");return r}function Ds(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function die(n,e,r){var i=n.__transition,o;i[e]=r,r.timer=_M(s,0,r.time);function s(u){r.state=iO,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var d,f,h,p;if(r.state!==iO)return c();for(d in i)if(p=i[d],p.name===r.name){if(p.state===O0)return rO(a);p.state===oO?(p.state=I0,p.timer.stop(),p.on.call("interrupt",n,n.__data__,p.index,p.group),delete i[d]):+d<e&&(p.state=I0,p.timer.stop(),p.on.call("cancel",n,n.__data__,p.index,p.group),delete i[d])}if(rO(function(){r.state===O0&&(r.state=oO,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=KC,r.on.call("start",n,n.__data__,r.index,r.group),r.state===KC){for(r.state=O0,o=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(n,n.__data__,r.index,r.group))&&(o[++f]=p);o.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=YC,1),f=-1,h=o.length;++f<h;)o[f].call(n,d);r.state===YC&&(r.on.call("end",n,n.__data__,r.index,r.group),c())}function c(){r.state=I0,r.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function D0(n,e){var r=n.__transition,i,o,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){s=!1;continue}o=i.state>KC&&i.state<YC,i.state=I0,i.timer.stop(),i.on.call(o?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}s&&delete n.__transition}}function fie(n){return this.each(function(){D0(this,n)})}function hie(n,e){var r,i;return function(){var o=fa(this,n),s=o.tween;if(s!==r){i=r=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}o.tween=i}}function pie(n,e,r){var i,o;if(typeof r!="function")throw new Error;return function(){var s=fa(this,n),a=s.tween;if(a!==i){o=(i=a).slice();for(var l={name:e,value:r},c=0,u=o.length;c<u;++c)if(o[c].name===e){o[c]=l;break}c===u&&o.push(l)}s.tween=o}}function mie(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=Ds(this.node(),r).tween,o=0,s=i.length,a;o<s;++o)if((a=i[o]).name===n)return a.value;return null}return this.each((e==null?hie:pie)(r,n,e))}function SM(n,e,r){var i=n._id;return n.each(function(){var o=fa(this,i);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return Ds(o,i).value[e]}}function kz(n,e){var r;return(typeof e=="number"?Fl:e instanceof bm?JP:(r=bm(e))?(e=r,JP):Yre)(n,e)}function gie(n){return function(){this.removeAttribute(n)}}function vie(n){return function(){this.removeAttributeNS(n.space,n.local)}}function yie(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttribute(n);return a===o?null:a===i?s:s=e(i=a,r)}}function xie(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttributeNS(n.space,n.local);return a===o?null:a===i?s:s=e(i=a,r)}}function _ie(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function bie(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function Sie(n,e){var r=l_(n),i=r==="transform"?eie:kz;return this.attrTween(n,typeof e=="function"?(r.local?bie:_ie)(r,i,SM(this,"attr."+n,e)):e==null?(r.local?vie:gie)(r):(r.local?xie:yie)(r,i,e))}function wie(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function Cie(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function Eie(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Cie(n,s)),r}return o._value=e,o}function Tie(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&wie(n,s)),r}return o._value=e,o}function Mie(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=l_(n);return this.tween(r,(i.local?Eie:Tie)(i,e))}function Rie(n,e){return function(){bM(this,n).delay=+e.apply(this,arguments)}}function Aie(n,e){return e=+e,function(){bM(this,n).delay=e}}function Nie(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Rie:Aie)(e,n)):Ds(this.node(),e).delay}function Pie(n,e){return function(){fa(this,n).duration=+e.apply(this,arguments)}}function Oie(n,e){return e=+e,function(){fa(this,n).duration=e}}function Iie(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Pie:Oie)(e,n)):Ds(this.node(),e).duration}function Die(n,e){if(typeof e!="function")throw new Error;return function(){fa(this,n).ease=e}}function Lie(n){var e=this._id;return arguments.length?this.each(Die(e,n)):Ds(this.node(),e).ease}function Fie(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;fa(this,n).ease=r}}function Uie(n){if(typeof n!="function")throw new Error;return this.each(Fie(this._id,n))}function Bie(n){typeof n!="function"&&(n=_z(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new nl(i,this._parents,this._name,this._id)}function $ie(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=e[l],u=r[l],d=c.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;l<i;++l)a[l]=e[l];return new nl(a,this._parents,this._name,this._id)}function zie(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function kie(n,e,r){var i,o,s=zie(e)?bM:fa;return function(){var a=s(this,n),l=a.on;l!==i&&(o=(i=l).copy()).on(e,r),a.on=o}}function Vie(n,e){var r=this._id;return arguments.length<2?Ds(this.node(),r).on.on(n):this.each(kie(r,n,e))}function Gie(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function Hie(){return this.on("end.remove",Gie(this._id))}function jie(n){var e=this._name,r=this._id;typeof n!="function"&&(n=gM(n));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],c=l.length,u=s[a]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=n.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,u_(u[h],e,r,h,u,Ds(d,r)));return new nl(s,this._parents,e,r)}function Wie(n){var e=this._name,r=this._id;typeof n!="function"&&(n=xz(n));for(var i=this._groups,o=i.length,s=[],a=[],l=0;l<o;++l)for(var c=i[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=n.call(d,d.__data__,f,c),p,g=Ds(d,r),y=0,v=h.length;y<v;++y)(p=h[y])&&u_(p,e,r,y,h,g);s.push(h),a.push(d)}return new nl(s,a,e,r)}var qie=gg.prototype.constructor;function Xie(){return new qie(this._groups,this._parents)}function Kie(n,e){var r,i,o;return function(){var s=Ef(this,n),a=(this.style.removeProperty(n),Ef(this,n));return s===a?null:s===r&&a===i?o:o=e(r=s,i=a)}}function Vz(n){return function(){this.style.removeProperty(n)}}function Yie(n,e,r){var i,o=r+"",s;return function(){var a=Ef(this,n);return a===o?null:a===i?s:s=e(i=a,r)}}function Qie(n,e,r){var i,o,s;return function(){var a=Ef(this,n),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),Ef(this,n))),a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l))}}function Zie(n,e){var r,i,o,s="style."+e,a="end."+s,l;return function(){var c=fa(this,n),u=c.on,d=c.value[s]==null?l||(l=Vz(e)):void 0;(u!==r||o!==d)&&(i=(r=u).copy()).on(a,o=d),c.on=i}}function Jie(n,e,r){var i=(n+="")=="transform"?Jre:kz;return e==null?this.styleTween(n,Kie(n,i)).on("end.style."+n,Vz(n)):typeof e=="function"?this.styleTween(n,Qie(n,i,SM(this,"style."+n,e))).each(Zie(this._id,n)):this.styleTween(n,Yie(n,i,e),r).on("end.style."+n,null)}function eoe(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function toe(n,e,r){var i,o;function s(){var a=e.apply(this,arguments);return a!==o&&(i=(o=a)&&eoe(n,a,r)),i}return s._value=e,s}function noe(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,toe(n,e,r??""))}function roe(n){return function(){this.textContent=n}}function ioe(n){return function(){var e=n(this);this.textContent=e??""}}function ooe(n){return this.tween("text",typeof n=="function"?ioe(SM(this,"text",n)):roe(n==null?"":n+""))}function soe(n){return function(e){this.textContent=n.call(this,e)}}function aoe(n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&soe(o)),e}return i._value=n,i}function loe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,aoe(n))}function coe(){for(var n=this._name,e=this._id,r=Gz(),i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)if(c=a[u]){var d=Ds(c,e);u_(c,n,r,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new nl(i,this._parents,n,r)}function uoe(){var n,e,r=this,i=r._id,o=r.size();return new Promise(function(s,a){var l={value:a},c={value:function(){--o===0&&s()}};r.each(function(){var u=fa(this,i),d=u.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),o===0&&s()})}var doe=0;function nl(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function Gz(){return++doe}var ga=gg.prototype;nl.prototype={constructor:nl,select:jie,selectAll:Wie,selectChild:ga.selectChild,selectChildren:ga.selectChildren,filter:Bie,merge:$ie,selection:Xie,transition:coe,call:ga.call,nodes:ga.nodes,node:ga.node,size:ga.size,empty:ga.empty,each:ga.each,on:Vie,attr:Sie,attrTween:Mie,style:Jie,styleTween:noe,text:ooe,textTween:loe,remove:Hie,tween:mie,delay:Nie,duration:Iie,ease:Lie,easeVarying:Uie,end:uoe,[Symbol.iterator]:ga[Symbol.iterator]};function foe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var hoe={time:null,delay:0,duration:250,ease:foe};function poe(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function moe(n){var e,r;n instanceof nl?(e=n._id,n=n._name):(e=Gz(),(r=hoe).time=xM(),n=n==null?null:n+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&u_(c,n,e,u,a,r||poe(c,e));return new nl(i,this._parents,n,e)}gg.prototype.interrupt=fie;gg.prototype.transition=moe;const mv=n=>()=>n;function goe(n,{sourceEvent:e,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Ba(n,e,r){this.k=n,this.x=e,this.y=r}Ba.prototype={constructor:Ba,scale:function(n){return n===1?this:new Ba(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Ba(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wM=new Ba(1,0,0);ks.prototype=Ba.prototype;function ks(n){for(;!n.__zoom;)if(!(n=n.parentNode))return wM;return n.__zoom}function dS(n){n.stopImmediatePropagation()}function Ih(n){n.preventDefault(),n.stopImmediatePropagation()}function voe(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function yoe(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function sO(){return this.__zoom||wM}function xoe(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function _oe(){return navigator.maxTouchPoints||"ontouchstart"in this}function boe(n,e,r){var i=n.invertX(e[0][0])-r[0][0],o=n.invertX(e[1][0])-r[1][0],s=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function Soe(){var n=voe,e=yoe,r=boe,i=xoe,o=_oe,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=iie,u=vg("start","zoom","end"),d,f,h,p=500,g=150,y=0,v=10;function m(A){A.property("__zoom",sO).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",N).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(A,I,P,F){var O=A.selection?A.selection():A;O.property("__zoom",sO),A!==O?w(A,I,P,F):O.interrupt().each(function(){C(this,arguments).event(F).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},m.scaleBy=function(A,I,P,F){m.scaleTo(A,function(){var O=this.__zoom.k,V=typeof I=="function"?I.apply(this,arguments):I;return O*V},P,F)},m.scaleTo=function(A,I,P,F){m.transform(A,function(){var O=e.apply(this,arguments),V=this.__zoom,U=P==null?S(O):typeof P=="function"?P.apply(this,arguments):P,k=V.invert(U),W=typeof I=="function"?I.apply(this,arguments):I;return r(_(x(V,W),U,k),O,a)},P,F)},m.translateBy=function(A,I,P,F){m.transform(A,function(){return r(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),a)},null,F)},m.translateTo=function(A,I,P,F,O){m.transform(A,function(){var V=e.apply(this,arguments),U=this.__zoom,k=F==null?S(V):typeof F=="function"?F.apply(this,arguments):F;return r(wM.translate(k[0],k[1]).scale(U.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof P=="function"?-P.apply(this,arguments):-P),V,a)},F,O)};function x(A,I){return I=Math.max(s[0],Math.min(s[1],I)),I===A.k?A:new Ba(I,A.x,A.y)}function _(A,I,P){var F=I[0]-P[0]*A.k,O=I[1]-P[1]*A.k;return F===A.x&&O===A.y?A:new Ba(A.k,F,O)}function S(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function w(A,I,P,F){A.on("start.zoom",function(){C(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(F).end()}).tween("zoom",function(){var O=this,V=arguments,U=C(O,V).event(F),k=e.apply(O,V),W=P==null?S(k):typeof P=="function"?P.apply(O,V):P,J=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),z=O.__zoom,j=typeof I=="function"?I.apply(O,V):I,X=c(z.invert(W).concat(J/z.k),j.invert(W).concat(J/j.k));return function(Q){if(Q===1)Q=j;else{var ne=X(Q),ye=J/ne[2];Q=new Ba(ye,W[0]-ne[0]*ye,W[1]-ne[1]*ye)}U.zoom(null,Q)}})}function C(A,I,P){return!P&&A.__zooming||new E(A,I)}function E(A,I){this.that=A,this.args=I,this.active=0,this.sourceEvent=null,this.extent=e.apply(A,I),this.taps=0}E.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,I){return this.mouse&&A!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var I=xs(this.that).datum();u.call(A,this.that,new goe(A,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),I)}};function T(A,...I){if(!n.apply(this,arguments))return;var P=C(this,I).event(A),F=this.__zoom,O=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,i.apply(this,arguments)))),V=Ra(A);if(P.wheel)(P.mouse[0][0]!==V[0]||P.mouse[0][1]!==V[1])&&(P.mouse[1]=F.invert(P.mouse[0]=V)),clearTimeout(P.wheel);else{if(F.k===O)return;P.mouse=[V,F.invert(V)],D0(this),P.start()}Ih(A),P.wheel=setTimeout(U,g),P.zoom("mouse",r(_(x(F,O),P.mouse[0],P.mouse[1]),P.extent,a));function U(){P.wheel=null,P.end()}}function M(A,...I){if(h||!n.apply(this,arguments))return;var P=A.currentTarget,F=C(this,I,!0).event(A),O=xs(A.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",J,!0),V=Ra(A,P),U=A.clientX,k=A.clientY;Nz(A.view),dS(A),F.mouse=[V,this.__zoom.invert(V)],D0(this),F.start();function W(z){if(Ih(z),!F.moved){var j=z.clientX-U,X=z.clientY-k;F.moved=j*j+X*X>y}F.event(z).zoom("mouse",r(_(F.that.__zoom,F.mouse[0]=Ra(z,P),F.mouse[1]),F.extent,a))}function J(z){O.on("mousemove.zoom mouseup.zoom",null),Pz(z.view,F.moved),Ih(z),F.event(z).end()}}function R(A,...I){if(n.apply(this,arguments)){var P=this.__zoom,F=Ra(A.changedTouches?A.changedTouches[0]:A,this),O=P.invert(F),V=P.k*(A.shiftKey?.5:2),U=r(_(x(P,V),F,O),e.apply(this,I),a);Ih(A),l>0?xs(this).transition().duration(l).call(w,U,F,A):xs(this).call(m.transform,U,F,A)}}function N(A,...I){if(n.apply(this,arguments)){var P=A.touches,F=P.length,O=C(this,I,A.changedTouches.length===F).event(A),V,U,k,W;for(dS(A),U=0;U<F;++U)k=P[U],W=Ra(k,this),W=[W,this.__zoom.invert(W),k.identifier],O.touch0?!O.touch1&&O.touch0[2]!==W[2]&&(O.touch1=W,O.taps=0):(O.touch0=W,V=!0,O.taps=1+!!d);d&&(d=clearTimeout(d)),V&&(O.taps<2&&(f=W[0],d=setTimeout(function(){d=null},p)),D0(this),O.start())}}function D(A,...I){if(this.__zooming){var P=C(this,I).event(A),F=A.changedTouches,O=F.length,V,U,k,W;for(Ih(A),V=0;V<O;++V)U=F[V],k=Ra(U,this),P.touch0&&P.touch0[2]===U.identifier?P.touch0[0]=k:P.touch1&&P.touch1[2]===U.identifier&&(P.touch1[0]=k);if(U=P.that.__zoom,P.touch1){var J=P.touch0[0],z=P.touch0[1],j=P.touch1[0],X=P.touch1[1],Q=(Q=j[0]-J[0])*Q+(Q=j[1]-J[1])*Q,ne=(ne=X[0]-z[0])*ne+(ne=X[1]-z[1])*ne;U=x(U,Math.sqrt(Q/ne)),k=[(J[0]+j[0])/2,(J[1]+j[1])/2],W=[(z[0]+X[0])/2,(z[1]+X[1])/2]}else if(P.touch0)k=P.touch0[0],W=P.touch0[1];else return;P.zoom("touch",r(_(U,k,W),P.extent,a))}}function L(A,...I){if(this.__zooming){var P=C(this,I).event(A),F=A.changedTouches,O=F.length,V,U;for(dS(A),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),V=0;V<O;++V)U=F[V],P.touch0&&P.touch0[2]===U.identifier?delete P.touch0:P.touch1&&P.touch1[2]===U.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(U=Ra(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<v)){var k=xs(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return m.wheelDelta=function(A){return arguments.length?(i=typeof A=="function"?A:mv(+A),m):i},m.filter=function(A){return arguments.length?(n=typeof A=="function"?A:mv(!!A),m):n},m.touchable=function(A){return arguments.length?(o=typeof A=="function"?A:mv(!!A),m):o},m.extent=function(A){return arguments.length?(e=typeof A=="function"?A:mv([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),m):e},m.scaleExtent=function(A){return arguments.length?(s[0]=+A[0],s[1]=+A[1],m):[s[0],s[1]]},m.translateExtent=function(A){return arguments.length?(a[0][0]=+A[0][0],a[1][0]=+A[1][0],a[0][1]=+A[0][1],a[1][1]=+A[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(A){return arguments.length?(r=A,m):r},m.duration=function(A){return arguments.length?(l=+A,m):l},m.interpolate=function(A){return arguments.length?(c=A,m):c},m.on=function(){var A=u.on.apply(u,arguments);return A===u?m:A},m.clickDistance=function(A){return arguments.length?(y=(A=+A)*A,m):Math.sqrt(y)},m.tapDistance=function(A){return arguments.length?(v=+A,m):v},m}class aO extends Map{constructor(e,r=Eoe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,o]of e)this.set(i,o)}get(e){return super.get(lO(this,e))}has(e){return super.has(lO(this,e))}set(e,r){return super.set(woe(this,e),r)}delete(e){return super.delete(Coe(this,e))}}function lO({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function woe({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function Coe({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function Eoe(n){return n!==null&&typeof n=="object"?n.valueOf():n}function QC(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function ZC(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}var Toe=typeof global=="object"&&global&&global.Object===Object&&global,Moe=typeof self=="object"&&self&&self.Object===Object&&self,Hz=Toe||Moe||Function("return this")(),Ly=Hz.Symbol,jz=Object.prototype,Roe=jz.hasOwnProperty,Aoe=jz.toString,Dh=Ly?Ly.toStringTag:void 0;function Noe(n){var e=Roe.call(n,Dh),r=n[Dh];try{n[Dh]=void 0;var i=!0}catch{}var o=Aoe.call(n);return i&&(e?n[Dh]=r:delete n[Dh]),o}var Poe=Object.prototype,Ooe=Poe.toString;function Ioe(n){return Ooe.call(n)}var Doe="[object Null]",Loe="[object Undefined]",cO=Ly?Ly.toStringTag:void 0;function Foe(n){return n==null?n===void 0?Loe:Doe:cO&&cO in Object(n)?Noe(n):Ioe(n)}function Uoe(n){return n!=null&&typeof n=="object"}var Boe="[object Symbol]";function $oe(n){return typeof n=="symbol"||Uoe(n)&&Foe(n)==Boe}var zoe=/\s/;function koe(n){for(var e=n.length;e--&&zoe.test(n.charAt(e)););return e}var Voe=/^\s+/;function Goe(n){return n&&n.slice(0,koe(n)+1).replace(Voe,"")}function Fy(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var uO=NaN,Hoe=/^[-+]0x[0-9a-f]+$/i,joe=/^0b[01]+$/i,Woe=/^0o[0-7]+$/i,qoe=parseInt;function dO(n){if(typeof n=="number")return n;if($oe(n))return uO;if(Fy(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Fy(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Goe(n);var r=joe.test(n);return r||Woe.test(n)?qoe(n.slice(2),r?2:8):Hoe.test(n)?uO:+n}var fS=function(){return Hz.Date.now()},Xoe="Expected a function",Koe=Math.max,Yoe=Math.min;function Wz(n,e,r){var i,o,s,a,l,c,u=0,d=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(Xoe);e=dO(e)||0,Fy(r)&&(d=!!r.leading,f="maxWait"in r,s=f?Koe(dO(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function p(C){var E=i,T=o;return i=o=void 0,u=C,a=n.apply(T,E),a}function g(C){return u=C,l=setTimeout(m,e),d?p(C):a}function y(C){var E=C-c,T=C-u,M=e-E;return f?Yoe(M,s-T):M}function v(C){var E=C-c,T=C-u;return c===void 0||E>=e||E<0||f&&T>=s}function m(){var C=fS();if(v(C))return x(C);l=setTimeout(m,y(C))}function x(C){return l=void 0,h&&i?p(C):(i=o=void 0,a)}function _(){l!==void 0&&clearTimeout(l),u=0,i=c=o=l=void 0}function S(){return l===void 0?a:x(fS())}function w(){var C=fS(),E=v(C);if(i=arguments,o=this,c=C,E){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(m,e),p(c)}return l===void 0&&(l=setTimeout(m,e)),a}return w.cancel=_,w.flush=S,w}var Qoe="Expected a function";function Zoe(n,e,r){var i=!0,o=!0;if(typeof n!="function")throw new TypeError(Qoe);return Fy(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Wz(n,e,{leading:i,maxWait:e,trailing:o})}var Ha=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Ha.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Ha.Bounce.In(n*2)*.5:Ha.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),pp=function(){return performance.now()},CM=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var a=s[o];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,o=e;i<o.length;i++){var s=o[i];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=pp()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var s=this._tweens[i[o]],a=!r;s&&s.update(e,a)===!1&&!r&&this.remove(s)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),JC={Linear:function(n,e){var r=n.length-1,i=r*e,o=Math.floor(i),s=JC.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[r],n[r-1],r-i):s(n[o],n[o+1>r?r:o+1],i-o)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},qz=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),eE=new CM,Uy=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ha.Linear.None,this._interpolationFunction=JC.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=qz.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=eE,eE.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=pp()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var s in this._valuesEnd)o[s]=this._valuesEnd[s];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,o,s){for(var a in i){var l=e[a],c=Array.isArray(l),u=c?"array":typeof l,d=!c&&Array.isArray(i[a]);if(!(u==="undefined"||u==="function")){if(d){var f=i[a];if(f.length===0)continue;for(var h=[l],p=0,g=f.length;p<g;p+=1){var y=this._handleRelativeValue(l,f[p]);if(isNaN(y)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(y)}d&&(i[a]=h)}if((u==="object"||c)&&l&&!d){r[a]=c?[]:{};var v=l;for(var m in v)r[a][m]=v[m];o[a]=c?[]:{};var f=i[a];if(!this._isDynamic){var x={};for(var m in f)x[m]=f[m];i[a]=f=x}this._setupProperties(v,r[a],f,o[a],s)}else(typeof r[a]>"u"||s)&&(r[a]=l),c||(r[a]*=1),d?o[a]=i[a].slice().reverse():o[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=pp()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=pp()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Ha.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=JC.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,o;if(e===void 0&&(e=pp()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||a>c)return 1;var y=Math.trunc(a/l),v=a-y*l,m=Math.min(v/i._duration,1);return m===0&&a===i._duration?1:m},d=u(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,o){for(var s in i)if(r[s]!==void 0){var a=r[s]||0,l=i[s],c=Array.isArray(e[s]),u=Array.isArray(l),d=!c&&u;d?e[s]=this._interpolationFunction(l,o):typeof l=="object"&&l?this._updateProperties(e[s],a,l,o):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[s]=a+(l-a)*o))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();qz.nextId;var na=eE;na.getAll.bind(na);na.removeAll.bind(na);na.add.bind(na);na.remove.bind(na);na.update.bind(na);function fO(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Joe(n){if(Array.isArray(n))return n}function ese(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function tse(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function nse(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function rse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ise(n,e){return Joe(n)||nse(n,e)||ose(n,e)||rse()}function ose(n,e){if(n){if(typeof n=="string")return fO(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fO(n,e):void 0}}var sse=tse(function n(e,r){var i=r.default,o=i===void 0?null:i,s=r.triggerUpdate,a=s===void 0?!0:s,l=r.onChange,c=l===void 0?function(u,d){}:l;ese(this,n),this.name=e,this.defaultVal=o,this.triggerUpdate=a,this.onChange=c});function xg(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,o=i===void 0?{}:i,s=n.methods,a=s===void 0?{}:s,l=n.aliases,c=l===void 0?{}:l,u=n.init,d=u===void 0?function(){}:u,f=n.update,h=f===void 0?function(){}:f,p=Object.keys(o).map(function(g){return new sse(g,o[g])});return function g(){for(var y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];var x=!!(this instanceof g&&this.constructor),_=x?v.shift():void 0,S=v[0],w=S===void 0?{}:S,C=Object.assign({},r instanceof Function?r(w):r,{initialised:!1}),E={};function T(N){return M(N,w),R(),T}var M=function(D,L){d.call(T,D,C,L),C.initialised=!0},R=Wz(function(){C.initialised&&(h.call(T,C,E),E={})},1);return p.forEach(function(N){T[N.name]=D(N);function D(L){var A=L.name,I=L.triggerUpdate,P=I===void 0?!1:I,F=L.onChange,O=F===void 0?function(k,W){}:F,V=L.defaultVal,U=V===void 0?null:V;return function(k){var W=C[A];if(!arguments.length)return W;var J=k===void 0?U:k;return C[A]=J,O.call(T,J,C,W),!E.hasOwnProperty(A)&&(E[A]=W),P&&R(),T}}}),Object.keys(a).forEach(function(N){T[N]=function(){for(var D,L=arguments.length,A=new Array(L),I=0;I<L;I++)A[I]=arguments[I];return(D=a[N]).call.apply(D,[T,C].concat(A))}}),Object.entries(c).forEach(function(N){var D=ise(N,2),L=D[0],A=D[1];return T[L]=T[A]}),T.resetProps=function(){return p.forEach(function(N){T[N.name](N.defaultVal)}),T},T.resetProps(),C._rerender=R,x&&_&&T(_),T}}var Pt=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function By(n){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(n)}var ase=/^\s+/,lse=/\s+$/;function It(n,e){if(n=n||"",e=e||{},n instanceof It)return n;if(!(this instanceof It))return new It(n,e);var r=cse(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}It.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,o,s,a,l;return r=e.r/255,i=e.g/255,o=e.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),o<=.03928?l=o/12.92:l=Math.pow((o+.055)/1.055,2.4),.2126*s+.7152*a+.0722*l},setAlpha:function(e){return this._a=Xz(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=pO(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=pO(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=hO(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=hO(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return mO(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return hse(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Zn(this._r,255)*100)+"%",g:Math.round(Zn(this._g,255)*100)+"%",b:Math.round(Zn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%)":"rgba("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ese[mO(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+gO(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(e){var s=It(e);i="#"+gO(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,o=this._a<1&&this._a>=0,s=!r&&o&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return It(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(vse,arguments)},brighten:function(){return this._applyModification(yse,arguments)},darken:function(){return this._applyModification(xse,arguments)},desaturate:function(){return this._applyModification(pse,arguments)},saturate:function(){return this._applyModification(mse,arguments)},greyscale:function(){return this._applyModification(gse,arguments)},spin:function(){return this._applyModification(_se,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(wse,arguments)},complement:function(){return this._applyCombination(bse,arguments)},monochromatic:function(){return this._applyCombination(Cse,arguments)},splitcomplement:function(){return this._applyCombination(Sse,arguments)},triad:function(){return this._applyCombination(vO,[3])},tetrad:function(){return this._applyCombination(vO,[4])}};It.fromRatio=function(n,e){if(By(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=mp(n[i]));n=r}return It(n,e)};function cse(n){var e={r:0,g:0,b:0},r=1,i=null,o=null,s=null,a=!1,l=!1;return typeof n=="string"&&(n=Ase(n)),By(n)=="object"&&(va(n.r)&&va(n.g)&&va(n.b)?(e=use(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):va(n.h)&&va(n.s)&&va(n.v)?(i=mp(n.s),o=mp(n.v),e=fse(n.h,i,o),a=!0,l="hsv"):va(n.h)&&va(n.s)&&va(n.l)&&(i=mp(n.s),s=mp(n.l),e=dse(n.h,i,s),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=Xz(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function use(n,e,r){return{r:Zn(n,255)*255,g:Zn(e,255)*255,b:Zn(r,255)*255}}function hO(n,e,r){n=Zn(n,255),e=Zn(e,255),r=Zn(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=(i+o)/2;if(i==o)s=a=0;else{var c=i-o;switch(a=l>.5?c/(2-i-o):c/(i+o),i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,l}}function dse(n,e,r){var i,o,s;n=Zn(n,360),e=Zn(e,100),r=Zn(r,100);function a(u,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(d-u)*6*f:f<1/2?d:f<2/3?u+(d-u)*(2/3-f)*6:u}if(e===0)i=o=s=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=a(c,l,n+1/3),o=a(c,l,n),s=a(c,l,n-1/3)}return{r:i*255,g:o*255,b:s*255}}function pO(n,e,r){n=Zn(n,255),e=Zn(e,255),r=Zn(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=i,c=i-o;if(a=i===0?0:c/i,i==o)s=0;else{switch(i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,v:l}}function fse(n,e,r){n=Zn(n,360)*6,e=Zn(e,100),r=Zn(r,100);var i=Math.floor(n),o=n-i,s=r*(1-e),a=r*(1-o*e),l=r*(1-(1-o)*e),c=i%6,u=[r,a,s,s,l,r][c],d=[l,r,r,a,s,s][c],f=[s,s,l,r,r,a][c];return{r:u*255,g:d*255,b:f*255}}function mO(n,e,r,i){var o=[ws(Math.round(n).toString(16)),ws(Math.round(e).toString(16)),ws(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function hse(n,e,r,i,o){var s=[ws(Math.round(n).toString(16)),ws(Math.round(e).toString(16)),ws(Math.round(r).toString(16)),ws(Kz(i))];return o&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function gO(n,e,r,i){var o=[ws(Kz(i)),ws(Math.round(n).toString(16)),ws(Math.round(e).toString(16)),ws(Math.round(r).toString(16))];return o.join("")}It.equals=function(n,e){return!n||!e?!1:It(n).toRgbString()==It(e).toRgbString()};It.random=function(){return It.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function pse(n,e){e=e===0?0:e||10;var r=It(n).toHsl();return r.s-=e/100,r.s=d_(r.s),It(r)}function mse(n,e){e=e===0?0:e||10;var r=It(n).toHsl();return r.s+=e/100,r.s=d_(r.s),It(r)}function gse(n){return It(n).desaturate(100)}function vse(n,e){e=e===0?0:e||10;var r=It(n).toHsl();return r.l+=e/100,r.l=d_(r.l),It(r)}function yse(n,e){e=e===0?0:e||10;var r=It(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),It(r)}function xse(n,e){e=e===0?0:e||10;var r=It(n).toHsl();return r.l-=e/100,r.l=d_(r.l),It(r)}function _se(n,e){var r=It(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,It(r)}function bse(n){var e=It(n).toHsl();return e.h=(e.h+180)%360,It(e)}function vO(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=It(n).toHsl(),i=[It(n)],o=360/e,s=1;s<e;s++)i.push(It({h:(r.h+s*o)%360,s:r.s,l:r.l}));return i}function Sse(n){var e=It(n).toHsl(),r=e.h;return[It(n),It({h:(r+72)%360,s:e.s,l:e.l}),It({h:(r+216)%360,s:e.s,l:e.l})]}function wse(n,e,r){e=e||6,r=r||30;var i=It(n).toHsl(),o=360/r,s=[It(n)];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,s.push(It(i));return s}function Cse(n,e){e=e||6;for(var r=It(n).toHsv(),i=r.h,o=r.s,s=r.v,a=[],l=1/e;e--;)a.push(It({h:i,s:o,v:s})),s=(s+l)%1;return a}It.mix=function(n,e,r){r=r===0?0:r||50;var i=It(n).toRgb(),o=It(e).toRgb(),s=r/100,a={r:(o.r-i.r)*s+i.r,g:(o.g-i.g)*s+i.g,b:(o.b-i.b)*s+i.b,a:(o.a-i.a)*s+i.a};return It(a)};It.readability=function(n,e){var r=It(n),i=It(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};It.isReadable=function(n,e,r){var i=It.readability(n,e),o,s;switch(s=!1,o=Nse(r),o.level+o.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};It.mostReadable=function(n,e,r){var i=null,o=0,s,a,l,c;r=r||{},a=r.includeFallbackColors,l=r.level,c=r.size;for(var u=0;u<e.length;u++)s=It.readability(n,e[u]),s>o&&(o=s,i=It(e[u]));return It.isReadable(n,i,{level:l,size:c})||!a?i:(r.includeFallbackColors=!1,It.mostReadable(n,["#fff","#000"],r))};var tE=It.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ese=It.hexNames=Tse(tE);function Tse(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function Xz(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Zn(n,e){Mse(n)&&(n="100%");var r=Rse(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function d_(n){return Math.min(1,Math.max(0,n))}function po(n){return parseInt(n,16)}function Mse(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function Rse(n){return typeof n=="string"&&n.indexOf("%")!=-1}function ws(n){return n.length==1?"0"+n:""+n}function mp(n){return n<=1&&(n=n*100+"%"),n}function Kz(n){return Math.round(parseFloat(n)*255).toString(16)}function yO(n){return po(n)/255}var ls=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function va(n){return!!ls.CSS_UNIT.exec(n)}function Ase(n){n=n.replace(ase,"").replace(lse,"").toLowerCase();var e=!1;if(tE[n])n=tE[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=ls.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=ls.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ls.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=ls.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ls.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=ls.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ls.hex8.exec(n))?{r:po(r[1]),g:po(r[2]),b:po(r[3]),a:yO(r[4]),format:e?"name":"hex8"}:(r=ls.hex6.exec(n))?{r:po(r[1]),g:po(r[2]),b:po(r[3]),format:e?"name":"hex"}:(r=ls.hex4.exec(n))?{r:po(r[1]+""+r[1]),g:po(r[2]+""+r[2]),b:po(r[3]+""+r[3]),a:yO(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=ls.hex3.exec(n))?{r:po(r[1]+""+r[1]),g:po(r[2]+""+r[2]),b:po(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function Nse(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function nE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Pse(n){if(Array.isArray(n))return nE(n)}function Yz(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function Ose(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ise(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Do(n,e){return n.get(Yz(n,e))}function xO(n,e,r){Ose(n,e),e.set(n,r)}function _O(n,e,r){return n.set(Yz(n,e),r),r}function Dse(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,zse(i.key),i)}}function Lse(n,e,r){return e&&Dse(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Fse(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Use(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bse(n){return Pse(n)||Fse(n)||kse(n)||Use()}function $se(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function zse(n){var e=$se(n,"string");return typeof e=="symbol"?e:e+""}function kse(n,e){if(n){if(typeof n=="string")return nE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nE(n,e):void 0}}var Vse=123,Gse=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Qz=function(e,r,i){return(e<<16)+(r<<8)+i},Hse=function(e){var r=It(e).toRgb(),i=r.r,o=r.g,s=r.b;return Qz(i,o,s)},bO=function(e,r){return e*Vse%Math.pow(2,r)},Nc=new WeakMap,ya=new WeakMap,jse=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Ise(this,n),xO(this,Nc,void 0),xO(this,ya,void 0),_O(ya,this,e),this.reset()}return Lse(n,[{key:"reset",value:function(){_O(Nc,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Do(Nc,this).length>=Math.pow(2,24-Do(ya,this)))return null;var i=Do(Nc,this).length,o=bO(i,Do(ya,this)),s=Gse(i+(o<<24-Do(ya,this)));return Do(Nc,this).push(r),s}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?Hse(r):Qz.apply(void 0,Bse(r));if(!i)return null;var o=i&Math.pow(2,24-Do(ya,this))-1,s=i>>24-Do(ya,this)&Math.pow(2,Do(ya,this))-1;return bO(o,Do(ya,this))!==s||o>=Do(Nc,this).length?null:Do(Nc,this)[o]}}])}();function Zz(n,e,r){var i,o=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function s(){var a,l=i.length,c,u=0,d=0,f=0;for(a=0;a<l;++a)c=i[a],u+=c.x||0,d+=c.y||0,f+=c.z||0;for(u=(u/l-n)*o,d=(d/l-e)*o,f=(f/l-r)*o,a=0;a<l;++a)c=i[a],u&&(c.x-=u),d&&(c.y-=d),f&&(c.z-=f)}return s.initialize=function(a){i=a},s.x=function(a){return arguments.length?(n=+a,s):n},s.y=function(a){return arguments.length?(e=+a,s):e},s.z=function(a){return arguments.length?(r=+a,s):r},s.strength=function(a){return arguments.length?(o=+a,s):o},s}function Wse(n){const e=+this._x.call(null,n);return Jz(this.cover(e),e,n)}function Jz(n,e,r){if(isNaN(e))return n;var i,o=n._root,s={data:r},a=n._x0,l=n._x1,c,u,d,f,h;if(!o)return n._root=s,n;for(;o.length;)if((d=e>=(c=(a+l)/2))?a=c:l=c,i=o,!(o=o[f=+d]))return i[f]=s,n;if(u=+n._x.call(null,o.data),e===u)return s.next=o,i?i[f]=s:n._root=s,n;do i=i?i[f]=new Array(2):n._root=new Array(2),(d=e>=(c=(a+l)/2))?a=c:l=c;while((f=+d)==(h=+(u>=c)));return i[h]=o,i[f]=s,n}function qse(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,o=-1/0;for(let s=0,a;s<e;++s)isNaN(a=+this._x.call(null,n[s]))||(r[s]=a,a<i&&(i=a),a>o&&(o=a));if(i>o)return this;this.cover(i).cover(o);for(let s=0;s<e;++s)Jz(this,r[s],n[s]);return this}function Xse(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,o=this._root,s,a;e>n||n>=r;)switch(a=+(n<e),s=new Array(2),s[a]=o,o=s,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=e,this._x1=r,this}function Kse(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Yse(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ja(n,e,r){this.node=n,this.x0=e,this.x1=r}function Qse(n,e){var r,i=this._x0,o,s,a=this._x1,l=[],c=this._root,u,d;for(c&&l.push(new ja(c,i,a)),e==null?e=1/0:(i=n-e,a=n+e);u=l.pop();)if(!(!(c=u.node)||(o=u.x0)>a||(s=u.x1)<i))if(c.length){var f=(o+s)/2;l.push(new ja(c[1],f,s),new ja(c[0],o,f)),(d=+(n>=f))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=u)}else{var h=Math.abs(n-+this._x.call(null,c.data));h<e&&(e=h,i=n-h,a=n+h,r=c.data)}return r}function Zse(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._x1,c,u,d,f,h;if(!r)return this;if(r.length)for(;;){if((d=c>=(u=(a+l)/2))?a=u:l=u,e=r,!(r=r[f=+d]))return this;if(!r.length)break;e[f+1&1]&&(i=e,h=f)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[f]=s:delete e[f],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[h]=r:this._root=r),this):(this._root=s,this)}function Jse(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function eae(){return this._root}function tae(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function nae(n){var e=[],r,i=this._root,o,s,a;for(i&&e.push(new ja(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.x1)&&i.length){var l=(s+a)/2;(o=i[1])&&e.push(new ja(o,l,a)),(o=i[0])&&e.push(new ja(o,s,l))}return this}function rae(n){var e=[],r=[],i;for(this._root&&e.push(new ja(this._root,this._x0,this._x1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.x1,c=(a+l)/2;(s=o[0])&&e.push(new ja(s,a,c)),(s=o[1])&&e.push(new ja(s,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function iae(n){return n[0]}function oae(n){return arguments.length?(this._x=n,this):this._x}function ek(n,e){var r=new EM(e??iae,NaN,NaN);return n==null?r:r.addAll(n)}function EM(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function SO(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var oo=ek.prototype=EM.prototype;oo.copy=function(){var n=new EM(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=SO(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var o=0;o<2;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(2)}):e.target[o]=SO(i));return n};oo.add=Wse;oo.addAll=qse;oo.cover=Xse;oo.data=Kse;oo.extent=Yse;oo.find=Qse;oo.remove=Zse;oo.removeAll=Jse;oo.root=eae;oo.size=tae;oo.visit=nae;oo.visitAfter=rae;oo.x=oae;function sae(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return tk(this.cover(e,r),e,r,n)}function tk(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var o,s=n._root,a={data:i},l=n._x0,c=n._y0,u=n._x1,d=n._y1,f,h,p,g,y,v,m,x;if(!s)return n._root=a,n;for(;s.length;)if((y=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h,o=s,!(s=s[m=v<<1|y]))return o[m]=a,n;if(p=+n._x.call(null,s.data),g=+n._y.call(null,s.data),e===p&&r===g)return a.next=s,o?o[m]=a:n._root=a,n;do o=o?o[m]=new Array(4):n._root=new Array(4),(y=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h;while((m=v<<1|y)===(x=(g>=h)<<1|p>=f));return o[x]=s,o[m]=a,n}function aae(n){var e,r,i=n.length,o,s,a=new Array(i),l=new Array(i),c=1/0,u=1/0,d=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,e=n[r]))||isNaN(s=+this._y.call(null,e))||(a[r]=o,l[r]=s,o<c&&(c=o),o>d&&(d=o),s<u&&(u=s),s>f&&(f=s));if(c>d||u>f)return this;for(this.cover(c,u).cover(d,f),r=0;r<i;++r)tk(this,a[r],l[r],n[r]);return this}function lae(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,o=this._x1,s=this._y1;if(isNaN(r))o=(r=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var a=o-r||1,l=this._root,c,u;r>n||n>=o||i>e||e>=s;)switch(u=(e<i)<<1|n<r,c=new Array(4),c[u]=l,l=c,a*=2,u){case 0:o=r+a,s=i+a;break;case 1:r=o-a,s=i+a;break;case 2:o=r+a,i=s-a;break;case 3:r=o-a,i=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=o,this._y1=s,this}function cae(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function uae(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Mi(n,e,r,i,o){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=o}function dae(n,e,r){var i,o=this._x0,s=this._y0,a,l,c,u,d=this._x1,f=this._y1,h=[],p=this._root,g,y;for(p&&h.push(new Mi(p,o,s,d,f)),r==null?r=1/0:(o=n-r,s=e-r,d=n+r,f=e+r,r*=r);g=h.pop();)if(!(!(p=g.node)||(a=g.x0)>d||(l=g.y0)>f||(c=g.x1)<o||(u=g.y1)<s))if(p.length){var v=(a+c)/2,m=(l+u)/2;h.push(new Mi(p[3],v,m,c,u),new Mi(p[2],a,m,v,u),new Mi(p[1],v,l,c,m),new Mi(p[0],a,l,v,m)),(y=(e>=m)<<1|n>=v)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=g)}else{var x=n-+this._x.call(null,p.data),_=e-+this._y.call(null,p.data),S=x*x+_*_;if(S<r){var w=Math.sqrt(r=S);o=n-w,s=e-w,d=n+w,f=e+w,i=p.data}}return i}function fae(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._x1,u=this._y1,d,f,h,p,g,y,v,m;if(!r)return this;if(r.length)for(;;){if((g=d>=(h=(a+c)/2))?a=h:c=h,(y=f>=(p=(l+u)/2))?l=p:u=p,e=r,!(r=r[v=y<<1|g]))return this;if(!r.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(i=e,m=v)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[v]=s:delete e[v],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=s,this)}function hae(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function pae(){return this._root}function mae(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function gae(n){var e=[],r,i=this._root,o,s,a,l,c;for(i&&e.push(new Mi(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.x1,c=r.y1)&&i.length){var u=(s+l)/2,d=(a+c)/2;(o=i[3])&&e.push(new Mi(o,u,d,l,c)),(o=i[2])&&e.push(new Mi(o,s,d,u,c)),(o=i[1])&&e.push(new Mi(o,u,a,l,d)),(o=i[0])&&e.push(new Mi(o,s,a,u,d))}return this}function vae(n){var e=[],r=[],i;for(this._root&&e.push(new Mi(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.x1,u=i.y1,d=(a+c)/2,f=(l+u)/2;(s=o[0])&&e.push(new Mi(s,a,l,d,f)),(s=o[1])&&e.push(new Mi(s,d,l,c,f)),(s=o[2])&&e.push(new Mi(s,a,f,d,u)),(s=o[3])&&e.push(new Mi(s,d,f,c,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function yae(n){return n[0]}function xae(n){return arguments.length?(this._x=n,this):this._x}function _ae(n){return n[1]}function bae(n){return arguments.length?(this._y=n,this):this._y}function nk(n,e,r){var i=new TM(e??yae,r??_ae,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function TM(n,e,r,i,o,s){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=o,this._y1=s,this._root=void 0}function wO(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Ui=nk.prototype=TM.prototype;Ui.copy=function(){var n=new TM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=wO(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var o=0;o<4;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(4)}):e.target[o]=wO(i));return n};Ui.add=sae;Ui.addAll=aae;Ui.cover=lae;Ui.data=cae;Ui.extent=uae;Ui.find=dae;Ui.remove=fae;Ui.removeAll=hae;Ui.root=pae;Ui.size=mae;Ui.visit=gae;Ui.visitAfter=vae;Ui.x=xae;Ui.y=bae;function Sae(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return rk(this.cover(e,r,i),e,r,i,n)}function rk(n,e,r,i,o){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var s,a=n._root,l={data:o},c=n._x0,u=n._y0,d=n._z0,f=n._x1,h=n._y1,p=n._z1,g,y,v,m,x,_,S,w,C,E,T;if(!a)return n._root=l,n;for(;a.length;)if((S=e>=(g=(c+f)/2))?c=g:f=g,(w=r>=(y=(u+h)/2))?u=y:h=y,(C=i>=(v=(d+p)/2))?d=v:p=v,s=a,!(a=a[E=C<<2|w<<1|S]))return s[E]=l,n;if(m=+n._x.call(null,a.data),x=+n._y.call(null,a.data),_=+n._z.call(null,a.data),e===m&&r===x&&i===_)return l.next=a,s?s[E]=l:n._root=l,n;do s=s?s[E]=new Array(8):n._root=new Array(8),(S=e>=(g=(c+f)/2))?c=g:f=g,(w=r>=(y=(u+h)/2))?u=y:h=y,(C=i>=(v=(d+p)/2))?d=v:p=v;while((E=C<<2|w<<1|S)===(T=(_>=v)<<2|(x>=y)<<1|m>=g));return s[T]=a,s[E]=l,n}function wae(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),o=new Float64Array(e);let s=1/0,a=1/0,l=1/0,c=-1/0,u=-1/0,d=-1/0;for(let f=0,h,p,g,y;f<e;++f)isNaN(p=+this._x.call(null,h=n[f]))||isNaN(g=+this._y.call(null,h))||isNaN(y=+this._z.call(null,h))||(r[f]=p,i[f]=g,o[f]=y,p<s&&(s=p),p>c&&(c=p),g<a&&(a=g),g>u&&(u=g),y<l&&(l=y),y>d&&(d=y));if(s>c||a>u||l>d)return this;this.cover(s,a,l).cover(c,u,d);for(let f=0;f<e;++f)rk(this,r[f],i[f],o[f],n[f]);return this}function Cae(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,s=this._z0,a=this._x1,l=this._y1,c=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(o=Math.floor(e))+1,c=(s=Math.floor(r))+1;else{for(var u=a-i||1,d=this._root,f,h;i>n||n>=a||o>e||e>=l||s>r||r>=c;)switch(h=(r<s)<<2|(e<o)<<1|n<i,f=new Array(8),f[h]=d,d=f,u*=2,h){case 0:a=i+u,l=o+u,c=s+u;break;case 1:i=a-u,l=o+u,c=s+u;break;case 2:a=i+u,o=l-u,c=s+u;break;case 3:i=a-u,o=l-u,c=s+u;break;case 4:a=i+u,l=o+u,s=c-u;break;case 5:i=a-u,l=o+u,s=c-u;break;case 6:a=i+u,o=l-u,s=c-u;break;case 7:i=a-u,o=l-u,s=c-u;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this}function Eae(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Tae(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Fn(n,e,r,i,o,s,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=o,this.y1=s,this.z1=a}function Mae(n,e,r,i){var o,s=this._x0,a=this._y0,l=this._z0,c,u,d,f,h,p,g=this._x1,y=this._y1,v=this._z1,m=[],x=this._root,_,S;for(x&&m.push(new Fn(x,s,a,l,g,y,v)),i==null?i=1/0:(s=n-i,a=e-i,l=r-i,g=n+i,y=e+i,v=r+i,i*=i);_=m.pop();)if(!(!(x=_.node)||(c=_.x0)>g||(u=_.y0)>y||(d=_.z0)>v||(f=_.x1)<s||(h=_.y1)<a||(p=_.z1)<l))if(x.length){var w=(c+f)/2,C=(u+h)/2,E=(d+p)/2;m.push(new Fn(x[7],w,C,E,f,h,p),new Fn(x[6],c,C,E,w,h,p),new Fn(x[5],w,u,E,f,C,p),new Fn(x[4],c,u,E,w,C,p),new Fn(x[3],w,C,d,f,h,E),new Fn(x[2],c,C,d,w,h,E),new Fn(x[1],w,u,d,f,C,E),new Fn(x[0],c,u,d,w,C,E)),(S=(r>=E)<<2|(e>=C)<<1|n>=w)&&(_=m[m.length-1],m[m.length-1]=m[m.length-1-S],m[m.length-1-S]=_)}else{var T=n-+this._x.call(null,x.data),M=e-+this._y.call(null,x.data),R=r-+this._z.call(null,x.data),N=T*T+M*M+R*R;if(N<i){var D=Math.sqrt(i=N);s=n-D,a=e-D,l=r-D,g=n+D,y=e+D,v=r+D,o=x.data}}return o}function Rae(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n))||isNaN(g=+this._z.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._z0,u=this._x1,d=this._y1,f=this._z1,h,p,g,y,v,m,x,_,S,w,C;if(!r)return this;if(r.length)for(;;){if((x=h>=(y=(a+u)/2))?a=y:u=y,(_=p>=(v=(l+d)/2))?l=v:d=v,(S=g>=(m=(c+f)/2))?c=m:f=m,e=r,!(r=r[w=S<<2|_<<1|x]))return this;if(!r.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(i=e,C=w)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[w]=s:delete e[w],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[C]=r:this._root=r),this):(this._root=s,this)}function Aae(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Nae(){return this._root}function Pae(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Oae(n){var e=[],r,i=this._root,o,s,a,l,c,u,d;for(i&&e.push(new Fn(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,d=r.z1)&&i.length){var f=(s+c)/2,h=(a+u)/2,p=(l+d)/2;(o=i[7])&&e.push(new Fn(o,f,h,p,c,u,d)),(o=i[6])&&e.push(new Fn(o,s,h,p,f,u,d)),(o=i[5])&&e.push(new Fn(o,f,a,p,c,h,d)),(o=i[4])&&e.push(new Fn(o,s,a,p,f,h,d)),(o=i[3])&&e.push(new Fn(o,f,h,l,c,u,p)),(o=i[2])&&e.push(new Fn(o,s,h,l,f,u,p)),(o=i[1])&&e.push(new Fn(o,f,a,l,c,h,p)),(o=i[0])&&e.push(new Fn(o,s,a,l,f,h,p))}return this}function Iae(n){var e=[],r=[],i;for(this._root&&e.push(new Fn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.z0,u=i.x1,d=i.y1,f=i.z1,h=(a+u)/2,p=(l+d)/2,g=(c+f)/2;(s=o[0])&&e.push(new Fn(s,a,l,c,h,p,g)),(s=o[1])&&e.push(new Fn(s,h,l,c,u,p,g)),(s=o[2])&&e.push(new Fn(s,a,p,c,h,d,g)),(s=o[3])&&e.push(new Fn(s,h,p,c,u,d,g)),(s=o[4])&&e.push(new Fn(s,a,l,g,h,p,f)),(s=o[5])&&e.push(new Fn(s,h,l,g,u,p,f)),(s=o[6])&&e.push(new Fn(s,a,p,g,h,d,f)),(s=o[7])&&e.push(new Fn(s,h,p,g,u,d,f))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function Dae(n){return n[0]}function Lae(n){return arguments.length?(this._x=n,this):this._x}function Fae(n){return n[1]}function Uae(n){return arguments.length?(this._y=n,this):this._y}function Bae(n){return n[2]}function $ae(n){return arguments.length?(this._z=n,this):this._z}function ik(n,e,r,i){var o=new MM(e??Dae,r??Fae,i??Bae,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?o:o.addAll(n)}function MM(n,e,r,i,o,s,a,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this._root=void 0}function CO(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var xi=ik.prototype=MM.prototype;xi.copy=function(){var n=new MM(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=CO(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var o=0;o<8;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(8)}):e.target[o]=CO(i));return n};xi.add=Sae;xi.addAll=wae;xi.cover=Cae;xi.data=Eae;xi.extent=Tae;xi.find=Mae;xi.remove=Rae;xi.removeAll=Aae;xi.root=Nae;xi.size=Pae;xi.visit=Oae;xi.visitAfter=Iae;xi.x=Lae;xi.y=Uae;xi.z=$ae;function $a(n){return function(){return n}}function Na(n){return(n()-.5)*1e-6}function zae(n){return n.index}function EO(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function ok(n){var e=zae,r=h,i,o=$a(30),s,a,l,c,u,d,f=1;n==null&&(n=[]);function h(m){return 1/Math.min(c[m.source.index],c[m.target.index])}function p(m){for(var x=0,_=n.length;x<f;++x)for(var S=0,w,C,E,T=0,M=0,R=0,N,D;S<_;++S)w=n[S],C=w.source,E=w.target,T=E.x+E.vx-C.x-C.vx||Na(d),l>1&&(M=E.y+E.vy-C.y-C.vy||Na(d)),l>2&&(R=E.z+E.vz-C.z-C.vz||Na(d)),N=Math.sqrt(T*T+M*M+R*R),N=(N-s[S])/N*m*i[S],T*=N,M*=N,R*=N,E.vx-=T*(D=u[S]),l>1&&(E.vy-=M*D),l>2&&(E.vz-=R*D),C.vx+=T*(D=1-D),l>1&&(C.vy+=M*D),l>2&&(C.vz+=R*D)}function g(){if(a){var m,x=a.length,_=n.length,S=new Map(a.map((C,E)=>[e(C,E,a),C])),w;for(m=0,c=new Array(x);m<_;++m)w=n[m],w.index=m,typeof w.source!="object"&&(w.source=EO(S,w.source)),typeof w.target!="object"&&(w.target=EO(S,w.target)),c[w.source.index]=(c[w.source.index]||0)+1,c[w.target.index]=(c[w.target.index]||0)+1;for(m=0,u=new Array(_);m<_;++m)w=n[m],u[m]=c[w.source.index]/(c[w.source.index]+c[w.target.index]);i=new Array(_),y(),s=new Array(_),v()}}function y(){if(a)for(var m=0,x=n.length;m<x;++m)i[m]=+r(n[m],m,n)}function v(){if(a)for(var m=0,x=n.length;m<x;++m)s[m]=+o(n[m],m,n)}return p.initialize=function(m,...x){a=m,d=x.find(_=>typeof _=="function")||Math.random,l=x.find(_=>[1,2,3].includes(_))||2,g()},p.links=function(m){return arguments.length?(n=m,g(),p):n},p.id=function(m){return arguments.length?(e=m,p):e},p.iterations=function(m){return arguments.length?(f=+m,p):f},p.strength=function(m){return arguments.length?(r=typeof m=="function"?m:$a(+m),y(),p):r},p.distance=function(m){return arguments.length?(o=typeof m=="function"?m:$a(+m),v(),p):o},p}const kae=1664525,Vae=1013904223,TO=4294967296;function Gae(){let n=1;return()=>(n=(kae*n+Vae)%TO)/TO}var MO=3;function hS(n){return n.x}function RO(n){return n.y}function Hae(n){return n.z}var jae=10,Wae=Math.PI*(3-Math.sqrt(5)),qae=Math.PI*20/(9+Math.sqrt(221));function sk(n,e){e=e||2;var r=Math.min(MO,Math.max(1,Math.round(e))),i,o=1,s=.001,a=1-Math.pow(s,1/300),l=0,c=.6,u=new Map,d=_M(p),f=vg("tick","end"),h=Gae();n==null&&(n=[]);function p(){g(),f.call("tick",i),o<s&&(d.stop(),f.call("end",i))}function g(m){var x,_=n.length,S;m===void 0&&(m=1);for(var w=0;w<m;++w)for(o+=(l-o)*a,u.forEach(function(C){C(o)}),x=0;x<_;++x)S=n[x],S.fx==null?S.x+=S.vx*=c:(S.x=S.fx,S.vx=0),r>1&&(S.fy==null?S.y+=S.vy*=c:(S.y=S.fy,S.vy=0)),r>2&&(S.fz==null?S.z+=S.vz*=c:(S.z=S.fz,S.vz=0));return i}function y(){for(var m=0,x=n.length,_;m<x;++m){if(_=n[m],_.index=m,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),_.fz!=null&&(_.z=_.fz),isNaN(_.x)||r>1&&isNaN(_.y)||r>2&&isNaN(_.z)){var S=jae*(r>2?Math.cbrt(.5+m):r>1?Math.sqrt(.5+m):m),w=m*Wae,C=m*qae;r===1?_.x=S:r===2?(_.x=S*Math.cos(w),_.y=S*Math.sin(w)):(_.x=S*Math.sin(w)*Math.cos(C),_.y=S*Math.cos(w),_.z=S*Math.sin(w)*Math.sin(C))}(isNaN(_.vx)||r>1&&isNaN(_.vy)||r>2&&isNaN(_.vz))&&(_.vx=0,r>1&&(_.vy=0),r>2&&(_.vz=0))}}function v(m){return m.initialize&&m.initialize(n,h,r),m}return y(),i={tick:g,restart:function(){return d.restart(p),i},stop:function(){return d.stop(),i},numDimensions:function(m){return arguments.length?(r=Math.min(MO,Math.max(1,Math.round(m))),u.forEach(v),i):r},nodes:function(m){return arguments.length?(n=m,y(),u.forEach(v),i):n},alpha:function(m){return arguments.length?(o=+m,i):o},alphaMin:function(m){return arguments.length?(s=+m,i):s},alphaDecay:function(m){return arguments.length?(a=+m,i):+a},alphaTarget:function(m){return arguments.length?(l=+m,i):l},velocityDecay:function(m){return arguments.length?(c=1-m,i):1-c},randomSource:function(m){return arguments.length?(h=m,u.forEach(v),i):h},force:function(m,x){return arguments.length>1?(x==null?u.delete(m):u.set(m,v(x)),i):u.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),x=m.shift()||0,_=(r>1?m.shift():null)||0,S=(r>2?m.shift():null)||0,w=m.shift()||1/0,C=0,E=n.length,T,M,R,N,D,L;for(w*=w,C=0;C<E;++C)D=n[C],T=x-D.x,M=_-(D.y||0),R=S-(D.z||0),N=T*T+M*M+R*R,N<w&&(L=D,w=N);return L},on:function(m,x){return arguments.length>1?(f.on(m,x),i):f.on(m)}}}function ak(){var n,e,r,i,o,s=$a(-30),a,l=1,c=1/0,u=.81;function d(g){var y,v=n.length,m=(e===1?ek(n,hS):e===2?nk(n,hS,RO):e===3?ik(n,hS,RO,Hae):null).visitAfter(h);for(o=g,y=0;y<v;++y)r=n[y],m.visit(p)}function f(){if(n){var g,y=n.length,v;for(a=new Array(y),g=0;g<y;++g)v=n[g],a[v.index]=+s(v,g,n)}}function h(g){var y=0,v,m,x=0,_,S,w,C,E=g.length;if(E){for(_=S=w=C=0;C<E;++C)(v=g[C])&&(m=Math.abs(v.value))&&(y+=v.value,x+=m,_+=m*(v.x||0),S+=m*(v.y||0),w+=m*(v.z||0));y*=Math.sqrt(4/E),g.x=_/x,e>1&&(g.y=S/x),e>2&&(g.z=w/x)}else{v=g,v.x=v.data.x,e>1&&(v.y=v.data.y),e>2&&(v.z=v.data.z);do y+=a[v.data.index];while(v=v.next)}g.value=y}function p(g,y,v,m,x){if(!g.value)return!0;var _=[v,m,x][e-1],S=g.x-r.x,w=e>1?g.y-r.y:0,C=e>2?g.z-r.z:0,E=_-y,T=S*S+w*w+C*C;if(E*E/u<T)return T<c&&(S===0&&(S=Na(i),T+=S*S),e>1&&w===0&&(w=Na(i),T+=w*w),e>2&&C===0&&(C=Na(i),T+=C*C),T<l&&(T=Math.sqrt(l*T)),r.vx+=S*g.value*o/T,e>1&&(r.vy+=w*g.value*o/T),e>2&&(r.vz+=C*g.value*o/T)),!0;if(g.length||T>=c)return;(g.data!==r||g.next)&&(S===0&&(S=Na(i),T+=S*S),e>1&&w===0&&(w=Na(i),T+=w*w),e>2&&C===0&&(C=Na(i),T+=C*C),T<l&&(T=Math.sqrt(l*T)));do g.data!==r&&(E=a[g.data.index]*o/T,r.vx+=S*E,e>1&&(r.vy+=w*E),e>2&&(r.vz+=C*E));while(g=g.next)}return d.initialize=function(g,...y){n=g,i=y.find(v=>typeof v=="function")||Math.random,e=y.find(v=>[1,2,3].includes(v))||2,f()},d.strength=function(g){return arguments.length?(s=typeof g=="function"?g:$a(+g),f(),d):s},d.distanceMin=function(g){return arguments.length?(l=g*g,d):Math.sqrt(l)},d.distanceMax=function(g){return arguments.length?(c=g*g,d):Math.sqrt(c)},d.theta=function(g){return arguments.length?(u=g*g,d):Math.sqrt(u)},d}function lk(n,e,r,i){var o,s,a=$a(.1),l,c;typeof n!="function"&&(n=$a(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function u(f){for(var h=0,p=o.length;h<p;++h){var g=o[h],y=g.x-e||1e-6,v=(g.y||0)-r||1e-6,m=(g.z||0)-i||1e-6,x=Math.sqrt(y*y+v*v+m*m),_=(c[h]-x)*l[h]*f/x;g.vx+=y*_,s>1&&(g.vy+=v*_),s>2&&(g.vz+=m*_)}}function d(){if(o){var f,h=o.length;for(l=new Array(h),c=new Array(h),f=0;f<h;++f)c[f]=+n(o[f],f,o),l[f]=isNaN(c[f])?0:+a(o[f],f,o)}}return u.initialize=function(f,...h){o=f,s=h.find(p=>[1,2,3].includes(p))||2,d()},u.strength=function(f){return arguments.length?(a=typeof f=="function"?f:$a(+f),d(),u):a},u.radius=function(f){return arguments.length?(n=typeof f=="function"?f:$a(+f),d(),u):n},u.x=function(f){return arguments.length?(e=+f,u):e},u.y=function(f){return arguments.length?(r=+f,u):r},u.z=function(f){return arguments.length?(i=+f,u):i},u}const{abs:Lh,cos:xa,sin:td,acos:Xae,atan2:Fh,sqrt:yl,pow:Fo}=Math;function Uh(n){return n<0?-Fo(-n,1/3):Fo(n,1/3)}const ck=Math.PI,gv=2*ck,xl=ck/2,Kae=1e-6,pS=Number.MAX_SAFE_INTEGER||9007199254740991,mS=Number.MIN_SAFE_INTEGER||-9007199254740991,Yae={x:0,y:0,z:0},it={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),yl(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const o=1-n;let s=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:o*s[0].x+n*s[1].x,y:o*s[0].y+n*s[1].y,t:n};return r&&(l.z=o*s[0].z+n*s[1].z),l}if(i<4){let l=o*o,c=n*n,u,d,f,h=0;i===2?(s=[s[0],s[1],s[2],Yae],u=l,d=o*n*2,f=c):i===3&&(u=l*o,d=l*n*3,f=o*c*3,h=n*c);const p={x:u*s[0].x+d*s[1].x+f*s[2].x+h*s[3].x,y:u*s[0].y+d*s[1].y+f*s[2].y+h*s[3].y,t:n};return r&&(p.z=u*s[0].z+d*s[1].z+f*s[2].z+h*s[3].z),p}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const o=1-n,s=r,a=e;let l=s[0],c=s[1],u=s[2],d=s[3],f;if(l*=o,c*=n,a.length===2)return f=l+c,{x:(l*a[0].x+c*a[1].x)/f,y:(l*a[0].y+c*a[1].y)/f,z:i?(l*a[0].z+c*a[1].z)/f:!1,t:n};if(l*=o,c*=2*o,u*=n*n,a.length===3)return f=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/f,y:(l*a[0].y+c*a[1].y+u*a[2].y)/f,z:i?(l*a[0].z+c*a[1].z+u*a[2].z)/f:!1,t:n};if(l*=o,c*=1.5*o,u*=3*o,d*=n*n*n,a.length===4)return f=l+c+u+d,{x:(l*a[0].x+c*a[1].x+u*a[2].x+d*a[3].x)/f,y:(l*a[0].y+c*a[1].y+u*a[2].y+d*a[3].y)/f,z:i?(l*a[0].z+c*a[1].z+u*a[2].z+d*a[3].z)/f:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,o=i.length,s=o-1;o>1;o--,s--){const a=[];for(let l=0,c;l<s;l++)c={x:s*(i[l+1].x-i[l].x),y:s*(i[l+1].y-i[l].y)},e&&(c.z=s*(i[l+1].z-i[l].z)),a.push(c);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||it.approximately(n,e)||it.approximately(n,r)},approximately:function(n,e,r){return Lh(n-e)<=(r||Kae)},length:function(n){const r=it.Tvalues.length;let i=0;for(let o=0,s;o<r;o++)s=.5*it.Tvalues[o]+.5,i+=it.Cvalues[o]*it.arcfn(s,n);return .5*i},map:function(n,e,r,i,o){const s=r-e,a=o-i,l=n-e,c=l/s;return i+a*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(it.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-n.x,a=r.y-n.y,l=i*a-o*s,c=i*s+o*a;return Fh(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return yl(r*r+i*i)},closest:function(n,e){let r=Fo(2,63),i,o;return n.forEach(function(s,a){o=it.dist(e,s),o<r&&(r=o,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Fo(n,e)+Fo(1-n,e),i=r-1;return Lh(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Fo(1-n,e),i=Fo(n,e)+r;return r/i},lli8:function(n,e,r,i,o,s,a,l){const c=(n*i-e*r)*(o-a)-(n-r)*(o*l-s*a),u=(n*i-e*r)*(s-l)-(e-i)*(o*l-s*a),d=(n-r)*(s-l)-(e-i)*(o-a);return d==0?!1:{x:c/d,y:u/d}},lli4:function(n,e,r,i){const o=n.x,s=n.y,a=e.x,l=e.y,c=r.x,u=r.y,d=i.x,f=i.y;return it.lli8(o,s,a,l,c,u,d,f)},lli:function(n,e){return it.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new Hn(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=pS,r=pS,i=mS,o=mS;return n.forEach(function(s){const a=s.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),o<a.y.max&&(o=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(n,e,r,i,o){if(!it.bboxoverlap(e,i))return[];const s=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const d=c.intersects(u,o);d.length>0&&(d.c1=c,d.c2=u,d.s1=n,d.s2=r,s.push(d))})}),s},makeshape:function(n,e,r){const i=e.points.length,o=n.points.length,s=it.makeline(e.points[i-1],n.points[0]),a=it.makeline(n.points[o-1],e.points[0]),l={startcap:s,forward:n,back:e,endcap:a,bbox:it.findbbox([s,n,e,a])};return l.intersections=function(c){return it.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=pS,o=mS,s,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)s=r[l],a=n.get(s),a[e]<i&&(i=a[e]),a[e]>o&&(o=a[e]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,o=-Fh(e.p2.y-i,e.p2.x-r),s=function(a){return{x:(a.x-r)*xa(o)-(a.y-i)*td(o),y:(a.x-r)*td(o)+(a.y-i)*xa(o)}};return n.map(s)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=it.align(n,e),o=function(E){return 0<=E&&E<=1};if(r===2){const E=i[0].y,T=i[1].y,M=i[2].y,R=E-2*T+M;if(R!==0){const N=-yl(T*T-E*M),D=-E+T,L=-(N+D)/R,A=-(-N+D)/R;return[L,A].filter(o)}else if(T!==M&&R===0)return[(2*T-M)/(2*T-2*M)].filter(o);return[]}const s=i[0].y,a=i[1].y,l=i[2].y,c=i[3].y;let u=-s+3*a-3*l+c,d=3*s-6*a+3*l,f=-3*s+3*a,h=s;if(it.approximately(u,0)){if(it.approximately(d,0))return it.approximately(f,0)?[]:[-h/f].filter(o);const E=yl(f*f-4*d*h),T=2*d;return[(E-f)/T,(-f-E)/T].filter(o)}d/=u,f/=u,h/=u;const p=(3*f-d*d)/3,g=p/3,y=(2*d*d*d-9*d*f+27*h)/27,v=y/2,m=v*v+g*g*g;let x,_,S,w,C;if(m<0){const E=-p/3,T=E*E*E,M=yl(T),R=-y/(2*M),N=R<-1?-1:R>1?1:R,D=Xae(N),L=Uh(M),A=2*L;return S=A*xa(D/3)-d/3,w=A*xa((D+gv)/3)-d/3,C=A*xa((D+2*gv)/3)-d/3,[S,w,C].filter(o)}else{if(m===0)return x=v<0?Uh(-v):-Uh(v),S=2*x-d/3,w=-x-d/3,[S,w].filter(o);{const E=yl(m);return x=Uh(-v+E),_=Uh(v+E),[x-_-d/3].filter(o)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],o=e-2*r+i;if(o!==0){const s=-yl(r*r-e*i),a=-e+r,l=-(s+a)/o,c=-(-s+a)/o;return[l,c]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,o){let s,a,l,c,u=0,d=0;const f=it.compute(n,e),h=it.compute(n,r),p=f.x*f.x+f.y*f.y;if(i?(s=yl(Fo(f.y*h.z-h.y*f.z,2)+Fo(f.z*h.x-h.z*f.x,2)+Fo(f.x*h.y-h.x*f.y,2)),a=Fo(p+f.z*f.z,3/2)):(s=f.x*h.y-f.y*h.x,a=Fo(p,3/2)),s===0||a===0)return{k:0,r:0};if(u=s/a,d=a/s,!o){const g=it.curvature(n-.001,e,r,i,!0).k,y=it.curvature(n+.001,e,r,i,!0).k;c=(y-u+(u-g))/2,l=(Lh(y-u)+Lh(u-g))/2}return{k:u,r:d,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=it.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,o=e[1].x*e[2].y,s=e[3].x*e[2].y,a=18*(-3*r+2*i+3*o-s),l=18*(3*r-i-3*o),c=18*(o-r);if(it.approximately(a,0)){if(!it.approximately(l,0)){let h=-c/l;if(0<=h&&h<=1)return[h]}return[]}const u=2*a;if(it.approximately(u,0))return[];const d=l*l-4*a*c;if(d<0)return[];const f=Math.sqrt(d);return[(f-l)/u,-(l+f)/u].filter(function(h){return 0<=h&&h<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let o=0,s,a,l,c;o<i;o++)if(s=r[o],a=n[s].mid,l=e[s].mid,c=(n[s].size+e[s].size)/2,Lh(a-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),o=e.bbox(),s=1e5,a=r||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(s*(n._t1+n._t2)/2|0)/s+"/"+(s*(e._t1+e._t2)/2|0)/s];let l=n.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(f){return it.bboxoverlap(f.left.bbox(),f.right.bbox())});let d=[];return u.length===0||(u.forEach(function(f){d=d.concat(it.pairiteration(f.left,f.right,a))}),d=d.filter(function(f,h){return d.indexOf(f)===h})),d},getccenter:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-e.x,a=r.y-e.y,l=i*xa(xl)-o*td(xl),c=i*td(xl)+o*xa(xl),u=s*xa(xl)-a*td(xl),d=s*td(xl)+a*xa(xl),f=(n.x+e.x)/2,h=(n.y+e.y)/2,p=(e.x+r.x)/2,g=(e.y+r.y)/2,y=f+l,v=h+c,m=p+u,x=g+d,_=it.lli8(f,h,y,v,p,g,m,x),S=it.dist(_,n);let w=Fh(n.y-_.y,n.x-_.x),C=Fh(e.y-_.y,e.x-_.x),E=Fh(r.y-_.y,r.x-_.x),T;return w<E?((w>C||C>E)&&(w+=gv),w>E&&(T=E,E=w,w=T)):E<C&&C<w?(T=E,E=w,w=T):E+=gv,_.s=w,_.e=E,_.r=S,_},numberSort:function(n,e){return n-e}};class Dp{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return it.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)it.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new Dp(r)}}const{abs:Bh,min:AO,max:NO,cos:Qae,sin:Zae,acos:Jae,sqrt:$h}=Math,ele=Math.PI;class Hn{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const p=[];r.forEach(function(g){["x","y","z"].forEach(function(y){typeof g[y]<"u"&&p.push(g[y])})}),r=p}let o=!1;const s=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!o&&(s===9||s===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let p=0,g=a?3:2;p<s;p+=g){var c={x:r[p],y:r[p+1]};a&&(c.z=r[p+2]),l.push(c)}const u=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const f=it.align(l,{p1:l[0],p2:l[u]}),h=it.dist(l[0],l[u]);this._linear=f.reduce((p,g)=>p+Bh(g.y),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new Hn(r,r,i);if(o===1)return new Hn(e,r,r);const s=Hn.getABC(2,e,r,i,o);return new Hn(e,s.A,i)}static cubicFromPoints(e,r,i,o,s){typeof o>"u"&&(o=.5);const a=Hn.getABC(3,e,r,i,o);typeof s>"u"&&(s=it.dist(r,a.C));const l=s*(1-o)/o,c=it.dist(e,i),u=(i.x-e.x)/c,d=(i.y-e.y)/c,f=s*u,h=s*d,p=l*u,g=l*d,y={x:r.x-f,y:r.y-h},v={x:r.x+p,y:r.y+g},m=a.A,x={x:m.x+(y.x-m.x)/(1-o),y:m.y+(y.y-m.y)/(1-o)},_={x:m.x+(v.x-m.x)/o,y:m.y+(v.y-m.y)/o},S={x:e.x+(x.x-e.x)/o,y:e.y+(x.y-e.y)/o},w={x:i.x+(_.x-i.x)/(1-o),y:i.y+(_.y-i.y)/(1-o)};return new Hn(e,S,w,i)}static getUtils(){return it}getUtils(){return Hn.getUtils()}static get PolyBezier(){return Dp}valueOf(){return this.toString()}toString(){return it.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let s=1,a=e.length;s<a;s++)o.push(e[s].x),o.push(e[s].y);return o.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=it.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=it.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return it.length(this.derivative.bind(this))}static getABC(e=2,r,i,o,s=.5){const a=it.projectionratio(s,e),l=1-a,c={x:a*r.x+l*o.x,y:a*r.y+l*o.y},u=it.abcratio(s,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:r,E:o}}getABC(e,r){r=r||this.get(e);let i=this.points[0],o=this.points[this.order];return Hn.getABC(this.order,i,r,o,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,o;r<e;r++)o=r/(e-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),o=[];for(let s=0,a,l=0;s<i.length;s++)a=i[s],it.dist(a,e)<r&&(o.push(a),l+=s/i.length);return o.length?t/=o.length:!1}project(e){const r=this.getLUT(),i=r.length-1,o=it.closest(r,e),s=o.mpos,a=(s-1)/i,l=(s+1)/i,c=.1/i;let u=o.mdist,d=a,f=d,h;u+=1;for(let p;d<l+c;d+=c)h=this.compute(d),p=it.dist(e,h),p<u&&(u=p,f=d);return f=f<0?0:f>1?1:f,h=this.compute(f),h.t=f,h.d=u,h}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?it.computeWithRatios(e,this.points,this.ratios,this._3d):it.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let o=1,s,a;o<i;o++)s=e[o],a=e[o-1],r[o]={x:(i-o)/i*s.x+o/i*a.x,y:(i-o)/i*s.y+o/i*a.y};return r[i]=e[i-1],new Hn(r)}derivative(e){return it.compute(e,this.dpoints[0],this._3d)}dderivative(e){return it.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Hn(it.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return it.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return it.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=$h(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),o=$h(r.x*r.x+r.y*r.y+r.z*r.z),s=$h(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=s,i.y/=s,i.z/=s;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=$h(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const c=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],o=[],s=0;for(o[s++]=r[0],o[s++]=r[1],o[s++]=r[2],this.order===3&&(o[s++]=r[3]);r.length>1;){i=[];for(let a=0,l,c=r.length-1;a<c;a++)l=it.lerp(e,r[a],r[a+1]),o[s++]=l,i.push(l);r=i}return o}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),o={left:this.order===2?new Hn([i[0],i[3],i[5]]):new Hn([i[0],i[4],i[7],i[9]]),right:this.order===2?new Hn([i[5],i[4],i[2]]):new Hn([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=it.map(0,0,1,this._t1,this._t2),o.left._t2=it.map(e,0,1,this._t1,this._t2),o.right._t1=it.map(e,0,1,this._t1,this._t2),o.right._t2=it.map(1,0,1,this._t1,this._t2),r?(r=it.map(r,e,1,0,1),o.right.split(r).left):o}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let o=function(a){return a[i]},s=this.dpoints[0].map(o);e[i]=it.droots(s),this.order===3&&(s=this.dpoints[1].map(o),e[i]=e[i].concat(it.droots(s))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(it.numberSort))}).bind(this)),e.values=r.sort(it.numberSort).filter(function(i,o){return r.indexOf(i)===o}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=it.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return it.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),o=this.normal(e),s={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(s.z=i.z+o.z*r),s}if(this._linear){const i=this.normal(0),o=this.points.map(function(s){const a={x:s.x+e*i.x,y:s.y+e*i.y};return s.z&&i.z&&(a.z=s.z+e*i.z),a});return[new Hn(o)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const o=it.angle(this.points[0],this.points[3],this.points[1]),s=it.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&s<0||o<0&&s>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Bh(Jae(i))<ele/3}reduce(){let e,r=0,i=0,o=.01,s,a=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],s=this.split(r,i),s._t1=r,s._t2=i,a.push(s),r=i;return a.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(s=u.split(r,i),!s.simple()){if(i-=o,Bh(r-i)<o)return[];s=u.split(r,i),s._t1=it.map(r,0,1,u._t1,u._t2),s._t2=it.map(i,0,1,u._t1,u._t2),l.push(s),r=i;break}r<1&&(s=u.split(r,1),s._t1=it.map(r,0,1,u._t1,u._t2),s._t2=u._t2,l.push(s))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const o=this.order;let s=this.points.map((a,l)=>(1-l/o)*r+l/o*i);return new Hn(this.points.map((a,l)=>({x:a.x+e.x*s[l],y:a.y+e.y*s[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const o=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],d=it.lli4(c[0],c[0].c,c[1],c[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const h=u[f*r]=it.copy(s[f*r]);h.x+=(f?l:a)*c[f].n.x,h.y+=(f?l:a)*c[f].n.y}),i?([0,1].forEach(function(f){if(!(r===2&&f)){var h=s[f+1],p={x:h.x-d.x,y:h.y-d.y},g=i?i((f+1)/r):e;i&&!o&&(g=-g);var y=$h(p.x*p.x+p.y*p.y);p.x/=y,p.y/=y,u[f+1]={x:h.x+g*p.x,y:h.y+g*p.y}}}),new Hn(u)):([0,1].forEach(f=>{if(r===2&&f)return;const h=u[f*r],p=this.derivative(f),g={x:h.x+p.x,y:h.y+p.y};u[f+1]=it.lli4(h,g,d,s[f+1])}),new Hn(u))}outline(e,r,i,o){if(r=r===void 0?e:r,this._linear){const w=this.normal(0),C=this.points[0],E=this.points[this.points.length-1];let T,M,R;i===void 0&&(i=e,o=r),T={x:C.x+w.x*e,y:C.y+w.y*e},R={x:E.x+w.x*i,y:E.y+w.y*i},M={x:(T.x+R.x)/2,y:(T.y+R.y)/2};const N=[T,M,R];T={x:C.x-w.x*r,y:C.y-w.y*r},R={x:E.x-w.x*o,y:E.y-w.y*o},M={x:(T.x+R.x)/2,y:(T.y+R.y)/2};const D=[R,M,T],L=it.makeline(D[2],N[0]),A=it.makeline(N[2],D[0]),I=[L,new Hn(N),A,new Hn(D)];return new Dp(I)}const s=this.reduce(),a=s.length,l=[];let c=[],u,d=0,f=this.length();const h=typeof i<"u"&&typeof o<"u";function p(w,C,E,T,M){return function(R){const N=T/E,D=(T+M)/E,L=C-w;return it.map(R,0,1,w+N*L,w+D*L)}}s.forEach(function(w){const C=w.length();h?(l.push(w.scale(p(e,i,f,d,C))),c.push(w.scale(p(-r,-o,f,d,C)))):(l.push(w.scale(e)),c.push(w.scale(-r))),d+=C}),c=c.map(function(w){return u=w.points,u[3]?w.points=[u[3],u[2],u[1],u[0]]:w.points=[u[2],u[1],u[0]],w}).reverse();const g=l[0].points[0],y=l[a-1].points[l[a-1].points.length-1],v=c[a-1].points[c[a-1].points.length-1],m=c[0].points[0],x=it.makeline(v,g),_=it.makeline(y,m),S=[x].concat(l).concat([_]).concat(c);return new Dp(S)}outlineshapes(e,r,i){r=r||e;const o=this.outline(e,r).curves,s=[];for(let a=1,l=o.length;a<l/2;a++){const c=it.makeshape(o[a],o[l-a],i);c.startcap.virtual=a>1,c.endcap.virtual=a<l/2-1,s.push(c)}return s}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Hn&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=AO(e.p1.x,e.p2.x),i=AO(e.p1.y,e.p2.y),o=NO(e.p1.x,e.p2.x),s=NO(e.p1.y,e.p2.y);return it.roots(this.points,e).filter(a=>{var l=this.get(a);return it.between(l.x,r,o)&&it.between(l.y,i,s)})}selfintersects(e){const r=this.reduce(),i=r.length-2,o=[];for(let s=0,a,l,c;s<i;s++)l=r.slice(s,s+1),c=r.slice(s+2),a=this.curveintersects(l,c,e),o.push(...a);return o}curveintersects(e,r,i){const o=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&o.push({left:a,right:l})})});let s=[];return o.forEach(function(a){const l=it.pairiteration(a.left,a.right,i);l.length>0&&(s=s.concat(l))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,o){const s=(o-i)/4,a=this.get(i+s),l=this.get(o-s),c=it.dist(e,r),u=it.dist(e,a),d=it.dist(e,l);return Bh(u-c)+Bh(d-c)}_iterate(e,r){let i=0,o=1,s;do{s=0,o=1;let a=this.get(i),l,c,u,d,f=!1,h=!1,p,g=o,y=1;do if(h=f,d=u,g=(i+o)/2,l=this.get(g),c=this.get(o),u=it.getccenter(a,l,c),u.interval={start:i,end:o},f=this._error(u,a,i,o)<=e,p=h&&!f,p||(y=o),f){if(o>=1){if(u.interval.end=y=1,d=u,o>1){let m={x:u.x+u.r*Qae(u.e),y:u.y+u.r*Zae(u.e)};u.e+=it.angle({x:u.x,y:u.y},m,this.get(1))}break}o=o+(o-i)/2}else o=g;while(!p&&s++<100);if(s>=100)break;d=d||u,r.push(d),i=y}while(o<1);return r}}function rE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function tle(n){if(Array.isArray(n))return n}function nle(n){if(Array.isArray(n))return rE(n)}function rle(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ile(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function ole(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ale(n,e){if(n==null)return{};var r,i,o=lle(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function lle(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function cle(n,e){return tle(n)||ile(n,e)||uk(n,e)||ole()}function ule(n){return nle(n)||rle(n)||uk(n)||sle()}function dle(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function fle(n){var e=dle(n,"string");return typeof e=="symbol"?e:e+""}function uk(n,e){if(n){if(typeof n=="string")return rE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rE(n,e):void 0}}var iE=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),s=n.reduce(function(l,c){var u=l,d=c;return o.forEach(function(f,h){var p=f.keyAccessor,g=f.isProp,y;if(g){var v=d,m=v[p],x=ale(v,[p].map(fle));y=m,d=x}else y=p(d,h);h+1<o.length?(u.hasOwnProperty(y)||(u[y]={}),u=u[y]):r?(u.hasOwnProperty(y)||(u[y]=[]),u[y].push(d)):u[y]=d}),l},{});r instanceof Function&&function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===o.length?Object.keys(c).forEach(function(d){return c[d]=r(c[d])}):Object.values(c).forEach(function(d){return l(d,u+1)})}(s);var a=s;return i&&(a=[],function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===o.length?a.push({keys:u,vals:c}):Object.entries(c).forEach(function(d){var f=cle(d,2),h=f[0],p=f[1];return l(p,[].concat(ule(u),[h]))})}(s),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function hle(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const PO=Symbol("implicit");function RM(){var n=new aO,e=[],r=[],i=PO;function o(s){let a=n.get(s);if(a===void 0){if(i!==PO)return i;n.set(s,a=e.push(s)-1)}return r[a%r.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new aO;for(const a of s)n.has(a)||n.set(a,e.push(a)-1);return o},o.range=function(s){return arguments.length?(r=Array.from(s),o):r.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.copy=function(){return RM(e,r).unknown(i)},hle.apply(o,arguments),o}function ple(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const dk=ple("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function mle(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var gle=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .graph-tooltip {
  position: absolute;
  top: 0;
  font-family: sans-serif;
  font-size: 16px;
  padding: 4px;
  border-radius: 3px;
  color: #eee;
  background: rgba(0,0,0,0.65);
  visibility: hidden; /* by default */
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;mle(gle);function oE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function vle(n){if(Array.isArray(n))return n}function yle(n){if(Array.isArray(n))return oE(n)}function OO(n,e,r){if(fk())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return o}function wm(n,e,r){return(e=Cle(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function fk(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fk=function(){return!!n})()}function xle(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _le(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function ble(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IO(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function nd(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IO(Object(r),!0).forEach(function(i){wm(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Lp(n,e){return vle(n)||_le(n,e)||hk(n,e)||ble()}function Go(n){return yle(n)||xle(n)||hk(n)||Sle()}function wle(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Cle(n){var e=wle(n,"string");return typeof e=="symbol"?e:e+""}function sE(n){"@babel/helpers - typeof";return sE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sE(n)}function hk(n,e){if(n){if(typeof n=="string")return oE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oE(n,e):void 0}}var Ele=RM(dk);function DO(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=Ele(e(i))})}function Tle(n,e){var r=n.nodes,i=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.nodeFilter,a=s===void 0?function(){return!0}:s,l=o.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!a(p)}}),i.forEach(function(p){var g=p.source,y=p.target,v=S(g),m=S(y);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var x=u[v],_=u[m];x.out.push(_);function S(w){return sE(w)==="object"?e(w):w}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(Go(Object.entries(u).filter(function(p){var g=Lp(p,2),y=g[1];return!y.skip}).map(function(p){var g=Lp(p,2),y=g[0],v=g[1];return wm({},y,v.depth)}))));return f;function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var S=p[m];if(g.indexOf(S)!==-1){var w=[].concat(Go(g.slice(g.indexOf(S))),[S]).map(function(C){return e(C.data)});return d.some(function(C){return C.length===w.length&&C.every(function(E,T){return E===w[T]})})||(d.push(w),c(w)),1}y>S.depth&&(S.depth=y,h(S.out,[].concat(Go(g),[S]),y+(S.skip?0:1)))},m=0,x=p.length;m<x;m++)v()}}var Mle=2,ui=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},LO=function(e,r){if(!r.isShadow){var i=Pt(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var s=Math.round(Math.abs(i(o)));s?o.__photons=Go(Array(s)).map(function(){return{}}):delete o.__photons})}},$y=xg({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,LO(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ui},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ui},nodeColor:{default:"color",triggerUpdate:!1,onChange:ui},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ui},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ui},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ui},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ui},linkColor:{default:"color",triggerUpdate:!1,onChange:ui},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ui},linkWidth:{default:1,triggerUpdate:!1,onChange:ui},linkCurvature:{default:0,triggerUpdate:!1,onChange:ui},linkCanvasObject:{triggerUpdate:!1,onChange:ui},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ui},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ui},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ui},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ui},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:LO},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),o(),!e.isShadow&&s(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=Pt(e.nodeVisibility),c=Pt(e.nodeVal),u=Pt(e.nodeColor),d=Pt(e.nodeCanvasObjectMode),f=e.ctx,h=e.isShadow/e.globalScale,p=e.graphData.nodes.filter(l);f.save(),p.forEach(function(g){var y=d(g);if(e.nodeCanvasObject&&(y==="before"||y==="replace")&&(e.nodeCanvasObject(g,f,e.globalScale),y==="replace")){f.restore();return}var v=Math.sqrt(Math.max(0,c(g)||1))*e.nodeRelSize+h;f.beginPath(),f.arc(g.x,g.y,v,0,2*Math.PI,!1),f.fillStyle=u(g)||"rgba(31, 120, 180, 0.92)",f.fill(),e.nodeCanvasObject&&y==="after"&&e.nodeCanvasObject(g,e.ctx,e.globalScale)}),f.restore()}function o(){var l=Pt(e.linkVisibility),c=Pt(e.linkColor),u=Pt(e.linkWidth),d=Pt(e.linkLineDash),f=Pt(e.linkCurvature),h=Pt(e.linkCanvasObjectMode),p=e.ctx,g=e.isShadow*2,y=e.graphData.links.filter(l);y.forEach(C);var v=[],m=[],x=y;if(e.linkCanvasObject){var _=[],S=[];y.forEach(function(E){return({before:v,after:m,replace:_}[h(E)]||S).push(E)}),x=[].concat(Go(v),m,S),v=v.concat(_)}p.save(),v.forEach(function(E){return e.linkCanvasObject(E,p,e.globalScale)}),p.restore();var w=iE(x,[c,u,d]);p.save(),Object.entries(w).forEach(function(E){var T=Lp(E,2),M=T[0],R=T[1],N=!M||M==="undefined"?"rgba(0,0,0,0.15)":M;Object.entries(R).forEach(function(D){var L=Lp(D,2),A=L[0],I=L[1],P=(A||1)/e.globalScale+g;Object.entries(I).forEach(function(F){var O=Lp(F,2);O[0];var V=O[1],U=d(V[0]);p.beginPath(),V.forEach(function(k){var W=k.source,J=k.target;if(!(!W||!J||!W.hasOwnProperty("x")||!J.hasOwnProperty("x"))){p.moveTo(W.x,W.y);var z=k.__controlPoints;z?p[z.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,Go(z).concat([J.x,J.y])):p.lineTo(J.x,J.y)}}),p.strokeStyle=N,p.lineWidth=P,p.setLineDash(U||[]),p.stroke()})})}),p.restore(),p.save(),m.forEach(function(E){return e.linkCanvasObject(E,p,e.globalScale)}),p.restore();function C(E){var T=f(E);if(!T){E.__controlPoints=null;return}var M=E.source,R=E.target;if(!(!M||!R||!M.hasOwnProperty("x")||!R.hasOwnProperty("x"))){var N=Math.sqrt(Math.pow(R.x-M.x,2)+Math.pow(R.y-M.y,2));if(N>0){var D=Math.atan2(R.y-M.y,R.x-M.x),L=N*T,A={x:(M.x+R.x)/2+L*Math.cos(D-Math.PI/2),y:(M.y+R.y)/2+L*Math.sin(D-Math.PI/2)};E.__controlPoints=[A.x,A.y]}else{var I=T*70;E.__controlPoints=[R.x,R.y-I,R.x+I,R.y]}}}}function s(){var l=1.6,c=.2,u=Pt(e.linkDirectionalArrowLength),d=Pt(e.linkDirectionalArrowRelPos),f=Pt(e.linkVisibility),h=Pt(e.linkDirectionalArrowColor||e.linkColor),p=Pt(e.nodeVal),g=e.ctx;g.save(),e.graphData.links.filter(f).forEach(function(y){var v=u(y);if(!(!v||v<0)){var m=y.source,x=y.target;if(!(!m||!x||!m.hasOwnProperty("x")||!x.hasOwnProperty("x"))){var _=Math.sqrt(Math.max(0,p(m)||1))*e.nodeRelSize,S=Math.sqrt(Math.max(0,p(x)||1))*e.nodeRelSize,w=Math.min(1,Math.max(0,d(y))),C=h(y)||"rgba(0,0,0,0.28)",E=v/l/2,T=y.__controlPoints&&OO(Hn,[m.x,m.y].concat(Go(y.__controlPoints),[x.x,x.y])),M=T?function(P){return T.get(P)}:function(P){return{x:m.x+(x.x-m.x)*P||0,y:m.y+(x.y-m.y)*P||0}},R=T?T.length():Math.sqrt(Math.pow(x.x-m.x,2)+Math.pow(x.y-m.y,2)),N=_+v+(R-_-S-v)*w,D=M(N/R),L=M((N-v)/R),A=M((N-v*(1-c))/R),I=Math.atan2(D.y-L.y,D.x-L.x)-Math.PI/2;g.beginPath(),g.moveTo(D.x,D.y),g.lineTo(L.x+E*Math.cos(I),L.y+E*Math.sin(I)),g.lineTo(A.x,A.y),g.lineTo(L.x-E*Math.cos(I),L.y-E*Math.sin(I)),g.fillStyle=C,g.fill()}}}),g.restore()}function a(){var l=Pt(e.linkDirectionalParticles),c=Pt(e.linkDirectionalParticleSpeed),u=Pt(e.linkDirectionalParticleWidth),d=Pt(e.linkVisibility),f=Pt(e.linkDirectionalParticleColor||e.linkColor),h=e.ctx;h.save(),e.graphData.links.filter(d).forEach(function(p){var g=l(p);if(!(!p.hasOwnProperty("__photons")||!p.__photons.length)){var y=p.source,v=p.target;if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var m=c(p),x=p.__photons||[],_=Math.max(0,u(p)/2)/Math.sqrt(e.globalScale),S=f(p)||"rgba(0,0,0,0.28)";h.fillStyle=S;var w=p.__controlPoints?OO(Hn,[y.x,y.y].concat(Go(p.__controlPoints),[v.x,v.y])):null,C=0,E=!1;x.forEach(function(T){var M=!!T.__singleHop;if(T.hasOwnProperty("__progressRatio")||(T.__progressRatio=M?0:C/g),!M&&C++,T.__progressRatio+=m,T.__progressRatio>=1)if(!M)T.__progressRatio=T.__progressRatio%1;else{E=!0;return}var R=T.__progressRatio,N=w?w.get(R):{x:y.x+(v.x-y.x)*R||0,y:y.y+(v.y-y.y)*R||0};h.beginPath(),h.arc(N.x,N.y,_,0,2*Math.PI,!1),h.fill()}),E&&(p.__photons=p.__photons.filter(function(T){return!T.__singleHop||T.__progressRatio<=1}))}}}),h.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:sk().force("link",ok()).force("charge",ak()).force("center",Zz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&DO(e.graphData.nodes,Pt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&DO(e.graphData.links,Pt(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(h){h.source=h[e.linkSource],h.target=h[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(h){return h[e.nodeId]}).links(e.graphData.links);var o=e.dagMode&&Tle(e.graphData,function(h){return h[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),s=Math.max.apply(Math,Go(Object.values(o||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(s||1)*Mle*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(h){return delete h[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),u=function(p){return(o[p[e.nodeId]]-s/2)*a*(c?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(h){return h[d]=u(h)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?lk(function(h){var p=o[h[e.nodeId]]||-1;return(e.dagMode==="radialin"?s-p:p)*a}).strength(function(h){return e.dagNodeFilter(h)?1:0}):null);for(var f=0;f<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);f++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function pk(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(s){return{default:i[s](),onChange:function(l,c){r.forEach(function(u){return c[u][s](l)})},triggerUpdate:!1}},linkMethod:function(s){return function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=[];return r.forEach(function(f){var h=a[f],p=h[s].apply(h,c);p!==h&&d.push(p)}),d.length?d[0]:this}}}}var Rle=800,Ale=4,mk=pk("forceGraph",$y),Nle=pk(["forceGraph","shadowGraph"],$y),Ple=Object.assign.apply(Object,Go(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return wm({},n,mk.linkProp(n))})).concat(Go(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return wm({},n,Nle.linkProp(n))})))),Ole=Object.assign.apply(Object,Go(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return wm({},n,mk.linkMethod(n))})));function gS(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(s){s.style.width="".concat(n.width,"px"),s.style.height="".concat(n.height,"px"),s.width=n.width*i,s.height=n.height*i,!e&&!r&&s.getContext("2d").scale(i,i)});var o=ks(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/o,(n.height-r)/2/o),n.needsRedraw=!0}}function gk(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function FO(n,e,r){n.save(),gk(n),n.clearRect(0,0,e,r),n.restore()}var Ile=xg({props:nd({width:{default:window.innerWidth,onChange:function(e,r){return gS(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return gS(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(o){return(o||[]).every(function(s){return!s.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(o){var s=o.type,a=o.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=r.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:s,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},Ple),aliases:{stopAnimation:"pauseAnimation"},methods:nd({graph2ScreenCoords:function(e,r,i){var o=ks(e.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(e,r,i){var o=ks(e.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(e,r,i,o){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var s=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?e.tweenGroup.add(new Uy(a()).to(s,o).easing(Ha.Quadratic.Out).onUpdate(l).start()):l(s),this}return a();function a(){var c=ks(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var u=c.x,d=c.y;e.zoom.translateTo(e.zoom.__baseElem,u===void 0?a().x:u,d===void 0?a().y:d),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new Uy({k:o()}).to({k:r},i).easing(Ha.Quadratic.Out).onUpdate(function(a){var l=a.k;return s(l)}).start()):s(r),this;return o();function o(){return ks(e.canvas).k}function s(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,s);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,r),this.zoom(u,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=Pt(e.nodeVal),o=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},s=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:o(a)}});return s.length?{x:[ZC(s,function(a){return a.x-a.r}),QC(s,function(a){return a.x+a.r})],y:[ZC(s,function(a){return a.y-a.r}),QC(s,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Ole),stateInit:function(){return{lastSetZoom:1,zoom:Soe(),forceGraph:new $y,shadowGraph:new $y().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new jse,tweenGroup:new CM}},init:function(e,r){var i=this;e.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",e.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var s=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var h=null,p=window.devicePixelRatio,g=l.x>0&&l.y>0?a.getImageData(l.x*p,l.y*p,1,1):null;return g&&(h=r.colorTracker.lookup(g.data)),h};xs(r.canvas).call(Ore().subject(function(){if(!r.enableNodeDrag)return null;var f=c();return f&&f.type==="Node"?f.d:null}).on("start",function(f){var h=f.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},f.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(f){var h=f.subject,p=h.__initialDragPos,g=f,y=ks(r.canvas).k,v={x:p.x+(g.x-p.x)/y-h.x,y:p.y+(g.y-p.y)/y-h.y};["x","y"].forEach(function(m){return h["f".concat(m)]=h[m]=p[m]+(g[m]-p[m])/y}),r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,v)}).on("end",function(f){var h=f.subject,p=h.__initialDragPos,g={x:h.x-p.x,y:h.y-p.y};p.fx===void 0&&(h.fx=void 0),p.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,g))})),r.zoom(r.zoom.__baseElem=xs(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(f){return!f.button&&r.enableZoomPanInteraction&&(f.type!=="wheel"||Pt(r.enableZoomInteraction)(f))&&(f.type==="wheel"||Pt(r.enablePanInteraction)(f))}).on("zoom",function(f){var h=f.transform;[s,a].forEach(function(p){gk(p),p.translate(h.x,h.y),p.scale(h.k,h.k)}),r.onZoom&&r.onZoom(nd(nd({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(f){return r.onZoomEnd&&r.onZoomEnd(nd(nd({},f.transform),i.centerAt()))}),gS(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){ks(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=Ale/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)});var u=document.createElement("div");u.classList.add("graph-tooltip"),o.appendChild(u),["pointermove","pointerdown"].forEach(function(f){return o.addEventListener(f,function(h){f==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType!=="touch"||h.movementX===void 0||[h.movementX,h.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var p=g(o);l.x=h.pageX-p.left,l.y=h.pageY-p.top,u.style.top="".concat(l.y,"px"),u.style.left="".concat(l.x,"px"),u.style.transform="translate(-".concat(l.x/r.width*100,"%, ").concat(r.height-l.y<100?"calc(-100% - 8px)":"21px",")");function g(y){var v=y.getBoundingClientRect(),m=window.pageXOffset||document.documentElement.scrollLeft,x=window.pageYOffset||document.documentElement.scrollTop;return{top:v.top+x,left:v.left+m}}},{passive:!0})}),o.addEventListener("pointerup",function(f){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[f,r.pointerDownEvent];requestAnimationFrame(function(){if(f.button===0)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"Click")];p&&p.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(f.button===2)if(r.hoverObj){var g=r["on".concat(r.hoverObj.type,"RightClick")];g&&g.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})},{passive:!0}),o.addEventListener("contextmenu",function(f){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(f.preventDefault(),!1)}),r.forceGraph(s),r.shadowGraph(a);var d=Zoe(function(){FO(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return Pt(r.linkWidth)(h)+r.linkHoverPrecision});var f=ks(r.canvas);r.shadowGraph.globalScale(f.k).tickFrame()},Rle);r.flushShadowCanvas=d.flush,(this._animationCycle=function f(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(w){return w.__photons&&w.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var p=r.isPointerDragging?null:c();if(p!==r.hoverObj){var g=r.hoverObj,y=g?g.type:null,v=p?p.type:null;if(y&&y!==v){var m=r["on".concat(y,"Hover")];m&&m(null,g.d)}if(v){var x=r["on".concat(v,"Hover")];x&&x(p.d,y===v?g.d:null)}var _=p&&Pt(r["".concat(p.type.toLowerCase(),"Label")])(p.d)||"";u.style.visibility=_?"visible":"hidden",u.innerHTML=_,r.canvas.classList[p&&r["on".concat(v,"Click")]||!p&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=p}h&&d()}if(h){FO(s,r.width,r.height);var S=ks(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(s,S),r.forceGraph.globalScale(S).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(s,S)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(f)})()},update:function(e){}}),vk={exports:{}},Dle="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lle=Dle,Fle=Lle;function yk(){}function xk(){}xk.resetWarningCache=yk;var Ule=function(){function n(i,o,s,a,l,c){if(c!==Fle){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xk,resetWarningCache:yk};return r.PropTypes=r,r};vk.exports=Ule();var AM=vk.exports;const G=pc(AM),f_={width:G.number,height:G.number,graphData:G.shape({nodes:G.arrayOf(G.object).isRequired,links:G.arrayOf(G.object).isRequired}),backgroundColor:G.string,nodeRelSize:G.number,nodeId:G.string,nodeLabel:G.oneOfType([G.string,G.func]),nodeVal:G.oneOfType([G.number,G.string,G.func]),nodeVisibility:G.oneOfType([G.bool,G.string,G.func]),nodeColor:G.oneOfType([G.string,G.func]),nodeAutoColorBy:G.oneOfType([G.string,G.func]),onNodeHover:G.func,onNodeClick:G.func,linkSource:G.string,linkTarget:G.string,linkLabel:G.oneOfType([G.string,G.func]),linkVisibility:G.oneOfType([G.bool,G.string,G.func]),linkColor:G.oneOfType([G.string,G.func]),linkAutoColorBy:G.oneOfType([G.string,G.func]),linkWidth:G.oneOfType([G.number,G.string,G.func]),linkCurvature:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowLength:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowColor:G.oneOfType([G.string,G.func]),linkDirectionalArrowRelPos:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticles:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleSpeed:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleWidth:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleColor:G.oneOfType([G.string,G.func]),onLinkHover:G.func,onLinkClick:G.func,dagMode:G.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:G.number,dagNodeFilter:G.func,onDagError:G.func,d3AlphaMin:G.number,d3AlphaDecay:G.number,d3VelocityDecay:G.number,warmupTicks:G.number,cooldownTicks:G.number,cooldownTime:G.number,onEngineTick:G.func,onEngineStop:G.func,getGraphBbox:G.func},_k={zoomToFit:G.func,onNodeRightClick:G.func,onNodeDrag:G.func,onNodeDragEnd:G.func,onLinkRightClick:G.func,linkHoverPrecision:G.number,onBackgroundClick:G.func,onBackgroundRightClick:G.func,enablePointerInteraction:G.bool,enableNodeDrag:G.bool},NM={showNavInfo:G.bool,nodeOpacity:G.number,nodeResolution:G.number,nodeThreeObject:G.oneOfType([G.object,G.string,G.func]),nodeThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkOpacity:G.number,linkResolution:G.number,linkCurveRotation:G.oneOfType([G.number,G.string,G.func]),linkMaterial:G.oneOfType([G.object,G.string,G.func]),linkThreeObject:G.oneOfType([G.object,G.string,G.func]),linkThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkPositionUpdate:G.func,linkDirectionalArrowResolution:G.number,linkDirectionalParticleResolution:G.number,forceEngine:G.oneOf(["d3","ngraph"]),ngraphPhysics:G.object,numDimensions:G.oneOf([1,2,3])},Ble=Object.assign({},f_,_k,{linkLineDash:G.oneOfType([G.arrayOf(G.number),G.string,G.func]),nodeCanvasObjectMode:G.oneOfType([G.string,G.func]),nodeCanvasObject:G.func,nodePointerAreaPaint:G.func,linkCanvasObjectMode:G.oneOfType([G.string,G.func]),linkCanvasObject:G.func,linkPointerAreaPaint:G.func,autoPauseRedraw:G.bool,minZoom:G.number,maxZoom:G.number,enableZoomInteraction:G.oneOfType([G.bool,G.func]),enablePanInteraction:G.oneOfType([G.bool,G.func]),onZoom:G.func,onZoomEnd:G.func,onRenderFramePre:G.func,onRenderFramePost:G.func});Object.assign({},f_,_k,NM,{enableNavigationControls:G.bool,controlType:G.oneOf(["trackball","orbit","fly"]),rendererConfig:G.object,extraRenderers:G.arrayOf(G.shape({render:G.func.isRequired}))});Object.assign({},f_,NM,{nodeDesc:G.oneOfType([G.string,G.func]),linkDesc:G.oneOfType([G.string,G.func])});Object.assign({},f_,NM,{markerAttrs:G.object,yOffset:G.number,glScale:G.number});const PM=vz(Ile,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});PM.displayName="ForceGraph2D";PM.propTypes=Ble;function vS(n){return function(){return n}}function UO(n){return(n()-.5)*1e-6}function $le(n){return n.index}function BO(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function zle(n){var e=$le,r=f,i,o=vS(30),s,a,l,c,u,d=1;n==null&&(n=[]);function f(v){return 1/Math.min(l[v.source.index],l[v.target.index])}function h(v){for(var m=0,x=n.length;m<d;++m)for(var _=0,S,w,C,E,T,M,R;_<x;++_)S=n[_],w=S.source,C=S.target,E=C.x+C.vx-w.x-w.vx||UO(u),T=C.y+C.vy-w.y-w.vy||UO(u),M=Math.sqrt(E*E+T*T),M=(M-s[_])/M*v*i[_],E*=M,T*=M,C.vx-=E*(R=c[_]),C.vy-=T*R,w.vx+=E*(R=1-R),w.vy+=T*R}function p(){if(a){var v,m=a.length,x=n.length,_=new Map(a.map((w,C)=>[e(w,C,a),w])),S;for(v=0,l=new Array(m);v<x;++v)S=n[v],S.index=v,typeof S.source!="object"&&(S.source=BO(_,S.source)),typeof S.target!="object"&&(S.target=BO(_,S.target)),l[S.source.index]=(l[S.source.index]||0)+1,l[S.target.index]=(l[S.target.index]||0)+1;for(v=0,c=new Array(x);v<x;++v)S=n[v],c[v]=l[S.source.index]/(l[S.source.index]+l[S.target.index]);i=new Array(x),g(),s=new Array(x),y()}}function g(){if(a)for(var v=0,m=n.length;v<m;++v)i[v]=+r(n[v],v,n)}function y(){if(a)for(var v=0,m=n.length;v<m;++v)s[v]=+o(n[v],v,n)}return h.initialize=function(v,m){a=v,u=m,p()},h.links=function(v){return arguments.length?(n=v,p(),h):n},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(d=+v,h):d},h.strength=function(v){return arguments.length?(r=typeof v=="function"?v:vS(+v),g(),h):r},h.distance=function(v){return arguments.length?(o=typeof v=="function"?v:vS(+v),y(),h):o},h}const kle=window.innerWidth<=600?600:window.innerWidth,Vle=window.innerHeight<=600?600:window.innerHeight,Gle=n=>(1-n)*Math.sqrt(Math.pow(kle/4,2)+Math.pow(Vle/4,2))*.5,aE=(n,e)=>{const r=/(?:https?:\/\/)?(?:arxiv\.org\/abs\/)?([a-zA-Z-]+\/\d{7}(?:v\d+)?)/,i=n.match(r);if(i)return{article_id:i[1],site:"arxiv",id_type:"arxiv_id",top_n:e};const o=/(?:https?:\/\/)?(?:arxiv\.org\/abs\/)?(\d{4,5}\.\d{4,5}(?:v\d+)?)/,s=n.match(o);if(s)return{article_id:s[1],site:"arxiv",id_type:"arxiv_id",top_n:e};const a=/(?:https?:\/\/)?(?:doi\.org\/)?(10\.48550\/arXiv\.\d{4}\.\d{5})/,l=n.match(a);if(l)return{article_id:l[1],site:"arxiv",id_type:"arxiv_doi",top_n:e};const c=/^(SCOPUS_ID:\d{11})$/,u=n.match(c);if(u)return{article_id:u[1],site:"scopus",id_type:"scopus_id",top_n:e};const d=/^(10\.\d{4,9}\/[-._;()/:A-Z0-9]+)$/i,f=n.match(d);return f?{article_id:f[1],site:"scopus",id_type:"scopus_doi",top_n:e}:null},Hle="#29727e",jle=30,Wle="#cd3232",qle=80,bk=n=>{const e=b.useRef(),[r,i]=b.useState(0),s={nodes:[{id:0,name:n.original_article.title,color:Wle,size:jle}],links:[]};b.useEffect(()=>{e.current.d3Force("link",zle().distance(c=>c.distance))},[]),b.useEffect(()=>{const c=()=>{const u=window.innerWidth*qle/100;i(u)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const a=(c,u)=>{let d=[],f=[];return c.forEach((h,p)=>{if(d.push({id:u!==void 0?u+"-"+Number(p+1):p+1,name:h.title,color:"#eed78c"}),f.push({source:u!==void 0?u+"-"+Number(p+1):p+1,target:u!==void 0?u:0,distance:Gle(h.similarity),color:Hle,name:`Similarity: ${Number(h.similarity*100).toFixed(2)}%`}),h.subArticles!==void 0){let g=u!==void 0?u+"-"+Number(p+1):p+1,y=a(h.subArticles.similar_articles,g);d=d.concat(y.nodes),f=f.concat(y.links)}}),{nodes:d,links:f}};return{graphData:(()=>{let c=a(n.similar_articles),u=c.nodes,d=c.links;return{nodes:[...s.nodes,...u],links:[...s.links,...d]}})(),forceGraphRef:e,forceGraphWidth:r}},Xle=8,$O=3,Kle=({articles:n,selectedId:e,selectCallback:r})=>{const{graphData:i,forceGraphRef:o,forceGraphWidth:s}=bk(n),a=(c,u)=>{u.beginPath(),u.fillStyle=c.id===e?"#1677ff":c.color,c.size?u.arc(c.x,c.y,15,0,2*Math.PI,!1):c.id===e?u.arc(c.x,c.y,10,0,2*Math.PI,!1):u.arc(c.x,c.y,5,0,2*Math.PI,!1),u.fill()},l=c=>{r(String(c.id),c)};return Tt.jsx(PM,{width:s,graphData:i,ref:o,backgroundColor:"#000011",nodeRelSize:Xle,linkWidth:$O,linkDirectionalParticles:1,linkDirectionalParticleSpeed:.005,linkDirectionalParticleColor:()=>"#b9b9b9",linkDirectionalParticleWidth:$O,nodeCanvasObject:a,onNodeClick:l,linkColor:c=>c.source.id==e?"#1677ff":c.color?c.color:"grey"})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sh="171",ti={ROTATE:0,DOLLY:1,PAN:2},za={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Sk=0,lE=1,wk=2,Yle=0,OM=1,Qle=2,yo=3,Ps=0,er=1,Ri=2,Pi=0,qo=1,wu=2,Mf=3,Rf=4,IM=5,xo=100,DM=101,LM=102,Ck=103,Ek=104,FM=200,UM=201,BM=202,$M=203,Cm=204,Em=205,zM=206,kM=207,VM=208,GM=209,HM=210,Zle=211,Jle=212,ece=213,tce=214,Tm=0,Mm=1,Rm=2,dc=3,Am=4,Nm=5,Pm=6,Om=7,_g=0,Tk=1,Mk=2,to=0,Rk=1,Ak=2,Nk=3,Pk=4,nce=5,Ok=6,Ik=7,jM=300,Jo=301,es=302,fc=303,hc=304,Cu=306,Eu=1e3,Ws=1001,Tu=1002,qn=1003,zy=1004,qs=1005,Br=1006,tf=1007,Wi=1008,mi=1009,uu=1010,du=1011,Cs=1012,Kr=1013,rr=1014,pr=1015,Qr=1016,h_=1017,p_=1018,ra=1020,m_=35902,WM=1021,bg=1022,ni=1023,qM=1024,XM=1025,Js=1026,ia=1027,Sg=1028,ah=1029,Mu=1030,lh=1031,rce=1032,ch=1033,fu=33776,nc=33777,rc=33778,ic=33779,Im=35840,Dm=35841,Lm=35842,Fm=35843,Um=36196,Af=37492,Nf=37496,Pf=37808,Of=37809,If=37810,Df=37811,Lf=37812,Ff=37813,Uf=37814,Bf=37815,$f=37816,zf=37817,kf=37818,Vf=37819,Gf=37820,Hf=37821,hu=36492,cE=36494,uE=36495,KM=36283,Bm=36284,$m=36285,zm=36286,ice=3200,oce=3201,rl=0,Dk=1,_o="",Lt="srgb",Xo="srgb-linear",ky="linear",Mn="srgb",sce=0,zc=7680,ace=7681,lce=7682,cce=7683,uce=34055,dce=34056,fce=5386,hce=512,pce=513,mce=514,gce=515,vce=516,yce=517,xce=518,dE=519,YM=512,g_=513,QM=514,v_=515,ZM=516,JM=517,eR=518,tR=519,Vy=35044,Ud=35048,zO="300 es",jo=2e3,Ru=2001;class Sc{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(r)===-1&&i[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const s=o.indexOf(r);s!==-1&&o.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const o=i.slice(0);for(let s=0,a=o.length;s<a;s++)o[s].call(this,e);e.target=null}}}const di=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kO=1234567;const Fp=Math.PI/180,jf=180/Math.PI;function Wa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(di[n&255]+di[n>>8&255]+di[n>>16&255]+di[n>>24&255]+"-"+di[e&255]+di[e>>8&255]+"-"+di[e>>16&15|64]+di[e>>24&255]+"-"+di[r&63|128]+di[r>>8&255]+"-"+di[r>>16&255]+di[r>>24&255]+di[i&255]+di[i>>8&255]+di[i>>16&255]+di[i>>24&255]).toLowerCase()}function Jt(n,e,r){return Math.max(e,Math.min(r,n))}function nR(n,e){return(n%e+e)%e}function _ce(n,e,r,i,o){return i+(n-e)*(o-i)/(r-e)}function bce(n,e,r){return n!==e?(r-n)/(e-n):0}function Up(n,e,r){return(1-r)*n+r*e}function Sce(n,e,r,i){return Up(n,e,1-Math.exp(-r*i))}function wce(n,e=1){return e-Math.abs(nR(n,e*2)-e)}function Cce(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*(3-2*n))}function Ece(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*n*(n*(n*6-15)+10))}function Tce(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Mce(n,e){return n+Math.random()*(e-n)}function Rce(n){return n*(.5-Math.random())}function Ace(n){n!==void 0&&(kO=n);let e=kO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Nce(n){return n*Fp}function Pce(n){return n*jf}function Oce(n){return(n&n-1)===0&&n!==0}function Ice(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Dce(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Lce(n,e,r,i,o){const s=Math.cos,a=Math.sin,l=s(r/2),c=a(r/2),u=s((e+i)/2),d=a((e+i)/2),f=s((e-i)/2),h=a((e-i)/2),p=s((i-e)/2),g=a((i-e)/2);switch(o){case"XYX":n.set(l*d,c*f,c*h,l*u);break;case"YZY":n.set(c*h,l*d,c*f,l*u);break;case"ZXZ":n.set(c*f,c*h,l*d,l*u);break;case"XZX":n.set(l*d,c*g,c*p,l*u);break;case"YXY":n.set(c*p,l*d,c*g,l*u);break;case"ZYZ":n.set(c*g,c*p,l*d,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function Ai(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Gy={DEG2RAD:Fp,RAD2DEG:jf,generateUUID:Wa,clamp:Jt,euclideanModulo:nR,mapLinear:_ce,inverseLerp:bce,lerp:Up,damp:Sce,pingpong:wce,smoothstep:Cce,smootherstep:Ece,randInt:Tce,randFloat:Mce,randFloatSpread:Rce,seededRandom:Ace,degToRad:Nce,radToDeg:Pce,isPowerOfTwo:Oce,ceilPowerOfTwo:Ice,floorPowerOfTwo:Dce,setQuaternionFromProperEuler:Lce,normalize:Zt,denormalize:Ai};class je{constructor(e=0,r=0){je.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,i=this.y,o=e.elements;return this.x=o[0]*r+o[3]*i+o[6],this.y=o[1]*r+o[4]*i+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y;return r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const i=Math.cos(r),o=Math.sin(r),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*o+e.x,this.y=s*o+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vt{constructor(e,r,i,o,s,a,l,c,u){Vt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,i,o,s,a,l,c,u)}set(e,r,i,o,s,a,l,c,u){const d=this.elements;return d[0]=e,d[1]=o,d[2]=l,d[3]=r,d[4]=s,d[5]=c,d[6]=i,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this}extractBasis(e,r,i){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,o=r.elements,s=this.elements,a=i[0],l=i[3],c=i[6],u=i[1],d=i[4],f=i[7],h=i[2],p=i[5],g=i[8],y=o[0],v=o[3],m=o[6],x=o[1],_=o[4],S=o[7],w=o[2],C=o[5],E=o[8];return s[0]=a*y+l*x+c*w,s[3]=a*v+l*_+c*C,s[6]=a*m+l*S+c*E,s[1]=u*y+d*x+f*w,s[4]=u*v+d*_+f*C,s[7]=u*m+d*S+f*E,s[2]=h*y+p*x+g*w,s[5]=h*v+p*_+g*C,s[8]=h*m+p*S+g*E,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return r*a*d-r*l*u-i*s*d+i*l*c+o*s*u-o*a*c}invert(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=d*a-l*u,h=l*c-d*s,p=u*s-a*c,g=r*f+i*h+o*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=f*y,e[1]=(o*u-d*i)*y,e[2]=(l*i-o*a)*y,e[3]=h*y,e[4]=(d*r-o*c)*y,e[5]=(o*s-l*r)*y,e[6]=p*y,e[7]=(i*c-u*r)*y,e[8]=(a*r-i*s)*y,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,i,o,s,a,l){const c=Math.cos(s),u=Math.sin(s);return this.set(i*c,i*u,-i*(c*a+u*l)+a+e,-o*u,o*c,-o*(-u*a+c*l)+l+r,0,0,1),this}scale(e,r){return this.premultiply(yS.makeScale(e,r)),this}rotate(e){return this.premultiply(yS.makeRotation(-e)),this}translate(e,r){return this.premultiply(yS.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,i,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,i=e.elements;for(let o=0;o<9;o++)if(r[o]!==i[o])return!1;return!0}fromArray(e,r=0){for(let i=0;i<9;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const yS=new Vt;function Lk(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function km(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Fk(){const n=km("canvas");return n.style.display="block",n}const VO={};function qc(n){n in VO||(VO[n]=!0,console.warn(n))}function Fce(n,e,r){return new Promise(function(i,o){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:o();break;case n.TIMEOUT_EXPIRED:setTimeout(s,r);break;default:i()}}setTimeout(s,r)})}function Uce(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Bce(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const GO=new Vt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),HO=new Vt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function $ce(){const n={enabled:!0,workingColorSpace:Xo,spaces:{},convert:function(o,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Mn&&(o.r=qa(o.r),o.g=qa(o.g),o.b=qa(o.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(o.applyMatrix3(this.spaces[s].toXYZ),o.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Mn&&(o.r=nf(o.r),o.g=nf(o.g),o.b=nf(o.b))),o},fromWorkingColorSpace:function(o,s){return this.convert(o,this.workingColorSpace,s)},toWorkingColorSpace:function(o,s){return this.convert(o,s,this.workingColorSpace)},getPrimaries:function(o){return this.spaces[o].primaries},getTransfer:function(o){return o===_o?ky:this.spaces[o].transfer},getLuminanceCoefficients:function(o,s=this.workingColorSpace){return o.fromArray(this.spaces[s].luminanceCoefficients)},define:function(o){Object.assign(this.spaces,o)},_getMatrix:function(o,s,a){return o.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(o){return this.spaces[o].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(o=this.workingColorSpace){return this.spaces[o].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Xo]:{primaries:e,whitePoint:i,transfer:ky,toXYZ:GO,fromXYZ:HO,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Lt},outputColorSpaceConfig:{drawingBufferColorSpace:Lt}},[Lt]:{primaries:e,whitePoint:i,transfer:Mn,toXYZ:GO,fromXYZ:HO,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Lt}}}),n}const rn=$ce();function qa(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function nf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let rd;class zce{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{rd===void 0&&(rd=km("canvas")),rd.width=e.width,rd.height=e.height;const i=rd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=rd}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=km("canvas");r.width=e.width,r.height=e.height;const i=r.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0;a<s.length;a++)s[a]=qa(s[a]/255)*255;return i.putImageData(o,0,0),r}else if(e.data){const r=e.data.slice(0);for(let i=0;i<r.length;i++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[i]=Math.floor(qa(r[i]/255)*255):r[i]=qa(r[i]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let kce=0;class Uk{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:kce++}),this.uuid=Wa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let s;if(Array.isArray(o)){s=[];for(let a=0,l=o.length;a<l;a++)o[a].isDataTexture?s.push(xS(o[a].image)):s.push(xS(o[a]))}else s=xS(o);i.url=s}return r||(e.images[this.uuid]=i),i}}function xS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?zce.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Vce=0;class zr extends Sc{constructor(e=zr.DEFAULT_IMAGE,r=zr.DEFAULT_MAPPING,i=Ws,o=Ws,s=Br,a=Wi,l=ni,c=mi,u=zr.DEFAULT_ANISOTROPY,d=_o){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Vce++}),this.uuid=Wa(),this.name="",this.source=new Uk(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=i,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),r||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jM)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Eu:e.x=e.x-Math.floor(e.x);break;case Ws:e.x=e.x<0?0:1;break;case Tu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Eu:e.y=e.y-Math.floor(e.y);break;case Ws:e.y=e.y<0?0:1;break;case Tu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}zr.DEFAULT_IMAGE=null;zr.DEFAULT_MAPPING=jM;zr.DEFAULT_ANISOTROPY=1;class qt{constructor(e=0,r=0,i=0,o=1){qt.prototype.isVector4=!0,this.x=e,this.y=r,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,i,o){return this.x=e,this.y=r,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,i=this.y,o=this.z,s=this.w,a=e.elements;return this.x=a[0]*r+a[4]*i+a[8]*o+a[12]*s,this.y=a[1]*r+a[5]*i+a[9]*o+a[13]*s,this.z=a[2]*r+a[6]*i+a[10]*o+a[14]*s,this.w=a[3]*r+a[7]*i+a[11]*o+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,i,o,s;const c=e.elements,u=c[0],d=c[4],f=c[8],h=c[1],p=c[5],g=c[9],y=c[2],v=c[6],m=c[10];if(Math.abs(d-h)<.01&&Math.abs(f-y)<.01&&Math.abs(g-v)<.01){if(Math.abs(d+h)<.1&&Math.abs(f+y)<.1&&Math.abs(g+v)<.1&&Math.abs(u+p+m-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const _=(u+1)/2,S=(p+1)/2,w=(m+1)/2,C=(d+h)/4,E=(f+y)/4,T=(g+v)/4;return _>S&&_>w?_<.01?(i=0,o=.707106781,s=.707106781):(i=Math.sqrt(_),o=C/i,s=E/i):S>w?S<.01?(i=.707106781,o=0,s=.707106781):(o=Math.sqrt(S),i=C/o,s=T/o):w<.01?(i=.707106781,o=.707106781,s=0):(s=Math.sqrt(w),i=E/s,o=T/s),this.set(i,o,s,r),this}let x=Math.sqrt((v-g)*(v-g)+(f-y)*(f-y)+(h-d)*(h-d));return Math.abs(x)<.001&&(x=1),this.x=(v-g)/x,this.y=(f-y)/x,this.z=(h-d)/x,this.w=Math.acos((u+p+m-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this.z=Jt(this.z,e.z,r.z),this.w=Jt(this.w,e.w,r.w),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this.z=Jt(this.z,e,r),this.w=Jt(this.w,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this.w=e.w+(r.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class uh extends Sc{constructor(e=1,r=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new qt(0,0,e,r),this.scissorTest=!1,this.viewport=new qt(0,0,e,r);const o={width:e,height:r,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Br,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new zr(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,r,i=1){if(this.width!==e||this.height!==r||this.depth!==i){this.width=e,this.height=r,this.depth=i;for(let o=0,s=this.textures.length;o<s;o++)this.textures[o].image.width=e,this.textures[o].image.height=r,this.textures[o].image.depth=i;this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,o=e.textures.length;i<o;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new Uk(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class As extends uh{constructor(e=1,r=1,i={}){super(e,r,i),this.isWebGLRenderTarget=!0}}class rR extends zr{constructor(e=null,r=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:i,depth:o},this.magFilter=qn,this.minFilter=qn,this.wrapR=Ws,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Gce extends zr{constructor(e=null,r=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:i,depth:o},this.magFilter=qn,this.minFilter=qn,this.wrapR=Ws,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oa{constructor(e=0,r=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=i,this._w=o}static slerpFlat(e,r,i,o,s,a,l){let c=i[o+0],u=i[o+1],d=i[o+2],f=i[o+3];const h=s[a+0],p=s[a+1],g=s[a+2],y=s[a+3];if(l===0){e[r+0]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f;return}if(l===1){e[r+0]=h,e[r+1]=p,e[r+2]=g,e[r+3]=y;return}if(f!==y||c!==h||u!==p||d!==g){let v=1-l;const m=c*h+u*p+d*g+f*y,x=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){const w=Math.sqrt(_),C=Math.atan2(w,m*x);v=Math.sin(v*C)/w,l=Math.sin(l*C)/w}const S=l*x;if(c=c*v+h*S,u=u*v+p*S,d=d*v+g*S,f=f*v+y*S,v===1-l){const w=1/Math.sqrt(c*c+u*u+d*d+f*f);c*=w,u*=w,d*=w,f*=w}}e[r]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f}static multiplyQuaternionsFlat(e,r,i,o,s,a){const l=i[o],c=i[o+1],u=i[o+2],d=i[o+3],f=s[a],h=s[a+1],p=s[a+2],g=s[a+3];return e[r]=l*g+d*f+c*p-u*h,e[r+1]=c*g+d*h+u*f-l*p,e[r+2]=u*g+d*p+l*h-c*f,e[r+3]=d*g-l*f-c*h-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,i,o){return this._x=e,this._y=r,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const i=e._x,o=e._y,s=e._z,a=e._order,l=Math.cos,c=Math.sin,u=l(i/2),d=l(o/2),f=l(s/2),h=c(i/2),p=c(o/2),g=c(s/2);switch(a){case"XYZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"YXZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"ZXY":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"ZYX":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"YZX":this._x=h*d*f+u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f-h*p*g;break;case"XZY":this._x=h*d*f-u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const i=r/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],d=r[6],f=r[10],h=i+l+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(d-c)*p,this._y=(s-u)*p,this._z=(a-o)*p}else if(i>l&&i>f){const p=2*Math.sqrt(1+i-l-f);this._w=(d-c)/p,this._x=.25*p,this._y=(o+a)/p,this._z=(s+u)/p}else if(l>f){const p=2*Math.sqrt(1+l-i-f);this._w=(s-u)/p,this._x=(o+a)/p,this._y=.25*p,this._z=(c+d)/p}else{const p=2*Math.sqrt(1+f-i-l);this._w=(a-o)/p,this._x=(s+u)/p,this._y=(c+d)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let i=e.dot(r)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jt(this.dot(e),-1,1)))}rotateTowards(e,r){const i=this.angleTo(e);if(i===0)return this;const o=Math.min(1,r/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const i=e._x,o=e._y,s=e._z,a=e._w,l=r._x,c=r._y,u=r._z,d=r._w;return this._x=i*d+a*l+o*u-s*c,this._y=o*d+a*c+s*l-i*u,this._z=s*d+a*u+i*c-o*l,this._w=a*d-i*l-o*c-s*u,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const i=this._x,o=this._y,s=this._z,a=this._w;let l=a*e._w+i*e._x+o*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=o,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-r;return this._w=p*a+r*this._w,this._x=p*i+r*this._x,this._y=p*o+r*this._y,this._z=p*s+r*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,l),f=Math.sin((1-r)*d)/u,h=Math.sin(r*d)/u;return this._w=a*f+this._w*h,this._x=i*f+this._x*h,this._y=o*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,r,i){return this.copy(e).slerp(r,i)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),i=Math.random(),o=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(o*Math.sin(e),o*Math.cos(e),s*Math.sin(r),s*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,r=0,i=0){Y.prototype.isVector3=!0,this.x=e,this.y=r,this.z=i}set(e,r,i){return i===void 0&&(i=this.z),this.x=e,this.y=r,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(jO.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(jO.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,i=this.y,o=this.z,s=e.elements;return this.x=s[0]*r+s[3]*i+s[6]*o,this.y=s[1]*r+s[4]*i+s[7]*o,this.z=s[2]*r+s[5]*i+s[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,i=this.y,o=this.z,s=e.elements,a=1/(s[3]*r+s[7]*i+s[11]*o+s[15]);return this.x=(s[0]*r+s[4]*i+s[8]*o+s[12])*a,this.y=(s[1]*r+s[5]*i+s[9]*o+s[13])*a,this.z=(s[2]*r+s[6]*i+s[10]*o+s[14])*a,this}applyQuaternion(e){const r=this.x,i=this.y,o=this.z,s=e.x,a=e.y,l=e.z,c=e.w,u=2*(a*o-l*i),d=2*(l*r-s*o),f=2*(s*i-a*r);return this.x=r+c*u+a*f-l*d,this.y=i+c*d+l*u-s*f,this.z=o+c*f+s*d-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,i=this.y,o=this.z,s=e.elements;return this.x=s[0]*r+s[4]*i+s[8]*o,this.y=s[1]*r+s[5]*i+s[9]*o,this.z=s[2]*r+s[6]*i+s[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this.z=Jt(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this.z=Jt(this.z,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const i=e.x,o=e.y,s=e.z,a=r.x,l=r.y,c=r.z;return this.x=o*c-s*l,this.y=s*a-i*c,this.z=i*l-o*a,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const i=e.dot(this)/r;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return _S.copy(this).projectOnVector(e),this.sub(_S)}reflect(e){return this.sub(_S.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return r*r+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,i){const o=Math.sin(r)*e;return this.x=o*Math.sin(i),this.y=Math.cos(r)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,i){return this.x=e*Math.sin(r),this.y=i,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=i,this.z=o,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,i=Math.sqrt(1-r*r);return this.x=i*Math.cos(e),this.y=r,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _S=new Y,jO=new oa;class Bu{constructor(e=new Y(1/0,1/0,1/0),r=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r+=3)this.expandByPoint(os.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,i=e.count;r<i;r++)this.expandByPoint(os.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const i=os.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(r===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,os):os.fromBufferAttribute(s,a),os.applyMatrix4(e.matrixWorld),this.expandByPoint(os);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),vv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),vv.copy(i.boundingBox)),vv.applyMatrix4(e.matrixWorld),this.union(vv)}const o=e.children;for(let s=0,a=o.length;s<a;s++)this.expandByObject(o[s],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,os),os.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,i;return e.normal.x>0?(r=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),r<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zh),yv.subVectors(this.max,zh),id.subVectors(e.a,zh),od.subVectors(e.b,zh),sd.subVectors(e.c,zh),_l.subVectors(od,id),bl.subVectors(sd,od),Pc.subVectors(id,sd);let r=[0,-_l.z,_l.y,0,-bl.z,bl.y,0,-Pc.z,Pc.y,_l.z,0,-_l.x,bl.z,0,-bl.x,Pc.z,0,-Pc.x,-_l.y,_l.x,0,-bl.y,bl.x,0,-Pc.y,Pc.x,0];return!bS(r,id,od,sd,yv)||(r=[1,0,0,0,1,0,0,0,1],!bS(r,id,od,sd,yv))?!1:(xv.crossVectors(_l,bl),r=[xv.x,xv.y,xv.z],bS(r,id,od,sd,yv))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,os).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(os).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_a),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _a=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],os=new Y,vv=new Bu,id=new Y,od=new Y,sd=new Y,_l=new Y,bl=new Y,Pc=new Y,zh=new Y,yv=new Y,xv=new Y,Oc=new Y;function bS(n,e,r,i,o){for(let s=0,a=n.length-3;s<=a;s+=3){Oc.fromArray(n,s);const l=o.x*Math.abs(Oc.x)+o.y*Math.abs(Oc.y)+o.z*Math.abs(Oc.z),c=e.dot(Oc),u=r.dot(Oc),d=i.dot(Oc);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>l)return!1}return!0}const Hce=new Bu,kh=new Y,SS=new Y;class y_{constructor(e=new Y,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const i=this.center;r!==void 0?i.copy(r):Hce.setFromPoints(e).getCenter(i);let o=0;for(let s=0,a=e.length;s<a;s++)o=Math.max(o,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const i=this.center.distanceToSquared(e);return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;kh.subVectors(e,this.center);const r=kh.lengthSq();if(r>this.radius*this.radius){const i=Math.sqrt(r),o=(i-this.radius)*.5;this.center.addScaledVector(kh,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(SS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(kh.copy(e.center).add(SS)),this.expandByPoint(kh.copy(e.center).sub(SS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ba=new Y,wS=new Y,_v=new Y,Sl=new Y,CS=new Y,bv=new Y,ES=new Y;class x_{constructor(e=new Y,r=new Y(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ba)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=ba.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(ba.copy(this.origin).addScaledVector(this.direction,r),ba.distanceToSquared(e))}distanceSqToSegment(e,r,i,o){wS.copy(e).add(r).multiplyScalar(.5),_v.copy(r).sub(e).normalize(),Sl.copy(this.origin).sub(wS);const s=e.distanceTo(r)*.5,a=-this.direction.dot(_v),l=Sl.dot(this.direction),c=-Sl.dot(_v),u=Sl.lengthSq(),d=Math.abs(1-a*a);let f,h,p,g;if(d>0)if(f=a*c-l,h=a*l-c,g=s*d,f>=0)if(h>=-g)if(h<=g){const y=1/d;f*=y,h*=y,p=f*(f+a*h+2*l)+h*(a*f+h+2*c)+u}else h=s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;else h=-s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;else h<=-g?(f=Math.max(0,-(-a*s+l)),h=f>0?-s:Math.min(Math.max(-s,-c),s),p=-f*f+h*(h+2*c)+u):h<=g?(f=0,h=Math.min(Math.max(-s,-c),s),p=h*(h+2*c)+u):(f=Math.max(0,-(a*s+l)),h=f>0?s:Math.min(Math.max(-s,-c),s),p=-f*f+h*(h+2*c)+u);else h=a>0?-s:s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),o&&o.copy(wS).addScaledVector(_v,h),p}intersectSphere(e,r){ba.subVectors(e.center,this.origin);const i=ba.dot(this.direction),o=ba.dot(ba)-i*i,s=e.radius*e.radius;if(o>s)return null;const a=Math.sqrt(s-o),l=i-a,c=i+a;return c<0?null:l<0?this.at(c,r):this.at(l,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/r;return i>=0?i:null}intersectPlane(e,r){const i=this.distanceToPlane(e);return i===null?null:this.at(i,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let i,o,s,a,l,c;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(i=(e.min.x-h.x)*u,o=(e.max.x-h.x)*u):(i=(e.max.x-h.x)*u,o=(e.min.x-h.x)*u),d>=0?(s=(e.min.y-h.y)*d,a=(e.max.y-h.y)*d):(s=(e.max.y-h.y)*d,a=(e.min.y-h.y)*d),i>a||s>o||((s>i||isNaN(i))&&(i=s),(a<o||isNaN(o))&&(o=a),f>=0?(l=(e.min.z-h.z)*f,c=(e.max.z-h.z)*f):(l=(e.max.z-h.z)*f,c=(e.min.z-h.z)*f),i>c||l>o)||((l>i||i!==i)&&(i=l),(c<o||o!==o)&&(o=c),o<0)?null:this.at(i>=0?i:o,r)}intersectsBox(e){return this.intersectBox(e,ba)!==null}intersectTriangle(e,r,i,o,s){CS.subVectors(r,e),bv.subVectors(i,e),ES.crossVectors(CS,bv);let a=this.direction.dot(ES),l;if(a>0){if(o)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Sl.subVectors(this.origin,e);const c=l*this.direction.dot(bv.crossVectors(Sl,bv));if(c<0)return null;const u=l*this.direction.dot(CS.cross(Sl));if(u<0||c+u>a)return null;const d=-l*Sl.dot(ES);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class fn{constructor(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v){fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v)}set(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v){const m=this.elements;return m[0]=e,m[4]=r,m[8]=i,m[12]=o,m[1]=s,m[5]=a,m[9]=l,m[13]=c,m[2]=u,m[6]=d,m[10]=f,m[14]=h,m[3]=p,m[7]=g,m[11]=y,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new fn().fromArray(this.elements)}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this}copyPosition(e){const r=this.elements,i=e.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,i){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,r,i){return this.set(e.x,r.x,i.x,0,e.y,r.y,i.y,0,e.z,r.z,i.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,i=e.elements,o=1/ad.setFromMatrixColumn(e,0).length(),s=1/ad.setFromMatrixColumn(e,1).length(),a=1/ad.setFromMatrixColumn(e,2).length();return r[0]=i[0]*o,r[1]=i[1]*o,r[2]=i[2]*o,r[3]=0,r[4]=i[4]*s,r[5]=i[5]*s,r[6]=i[6]*s,r[7]=0,r[8]=i[8]*a,r[9]=i[9]*a,r[10]=i[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,i=e.x,o=e.y,s=e.z,a=Math.cos(i),l=Math.sin(i),c=Math.cos(o),u=Math.sin(o),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=a*d,p=a*f,g=l*d,y=l*f;r[0]=c*d,r[4]=-c*f,r[8]=u,r[1]=p+g*u,r[5]=h-y*u,r[9]=-l*c,r[2]=y-h*u,r[6]=g+p*u,r[10]=a*c}else if(e.order==="YXZ"){const h=c*d,p=c*f,g=u*d,y=u*f;r[0]=h+y*l,r[4]=g*l-p,r[8]=a*u,r[1]=a*f,r[5]=a*d,r[9]=-l,r[2]=p*l-g,r[6]=y+h*l,r[10]=a*c}else if(e.order==="ZXY"){const h=c*d,p=c*f,g=u*d,y=u*f;r[0]=h-y*l,r[4]=-a*f,r[8]=g+p*l,r[1]=p+g*l,r[5]=a*d,r[9]=y-h*l,r[2]=-a*u,r[6]=l,r[10]=a*c}else if(e.order==="ZYX"){const h=a*d,p=a*f,g=l*d,y=l*f;r[0]=c*d,r[4]=g*u-p,r[8]=h*u+y,r[1]=c*f,r[5]=y*u+h,r[9]=p*u-g,r[2]=-u,r[6]=l*c,r[10]=a*c}else if(e.order==="YZX"){const h=a*c,p=a*u,g=l*c,y=l*u;r[0]=c*d,r[4]=y-h*f,r[8]=g*f+p,r[1]=f,r[5]=a*d,r[9]=-l*d,r[2]=-u*d,r[6]=p*f+g,r[10]=h-y*f}else if(e.order==="XZY"){const h=a*c,p=a*u,g=l*c,y=l*u;r[0]=c*d,r[4]=-f,r[8]=u*d,r[1]=h*f+y,r[5]=a*d,r[9]=p*f-g,r[2]=g*f-p,r[6]=l*d,r[10]=y*f+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jce,e,Wce)}lookAt(e,r,i){const o=this.elements;return co.subVectors(e,r),co.lengthSq()===0&&(co.z=1),co.normalize(),wl.crossVectors(i,co),wl.lengthSq()===0&&(Math.abs(i.z)===1?co.x+=1e-4:co.z+=1e-4,co.normalize(),wl.crossVectors(i,co)),wl.normalize(),Sv.crossVectors(co,wl),o[0]=wl.x,o[4]=Sv.x,o[8]=co.x,o[1]=wl.y,o[5]=Sv.y,o[9]=co.y,o[2]=wl.z,o[6]=Sv.z,o[10]=co.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,o=r.elements,s=this.elements,a=i[0],l=i[4],c=i[8],u=i[12],d=i[1],f=i[5],h=i[9],p=i[13],g=i[2],y=i[6],v=i[10],m=i[14],x=i[3],_=i[7],S=i[11],w=i[15],C=o[0],E=o[4],T=o[8],M=o[12],R=o[1],N=o[5],D=o[9],L=o[13],A=o[2],I=o[6],P=o[10],F=o[14],O=o[3],V=o[7],U=o[11],k=o[15];return s[0]=a*C+l*R+c*A+u*O,s[4]=a*E+l*N+c*I+u*V,s[8]=a*T+l*D+c*P+u*U,s[12]=a*M+l*L+c*F+u*k,s[1]=d*C+f*R+h*A+p*O,s[5]=d*E+f*N+h*I+p*V,s[9]=d*T+f*D+h*P+p*U,s[13]=d*M+f*L+h*F+p*k,s[2]=g*C+y*R+v*A+m*O,s[6]=g*E+y*N+v*I+m*V,s[10]=g*T+y*D+v*P+m*U,s[14]=g*M+y*L+v*F+m*k,s[3]=x*C+_*R+S*A+w*O,s[7]=x*E+_*N+S*I+w*V,s[11]=x*T+_*D+S*P+w*U,s[15]=x*M+_*L+S*F+w*k,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[4],o=e[8],s=e[12],a=e[1],l=e[5],c=e[9],u=e[13],d=e[2],f=e[6],h=e[10],p=e[14],g=e[3],y=e[7],v=e[11],m=e[15];return g*(+s*c*f-o*u*f-s*l*h+i*u*h+o*l*p-i*c*p)+y*(+r*c*p-r*u*h+s*a*h-o*a*p+o*u*d-s*c*d)+v*(+r*u*f-r*l*p-s*a*f+i*a*p+s*l*d-i*u*d)+m*(-o*l*d-r*c*f+r*l*h+o*a*f-i*a*h+i*c*d)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,i){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=r,o[14]=i),this}invert(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],g=e[12],y=e[13],v=e[14],m=e[15],x=f*v*u-y*h*u+y*c*p-l*v*p-f*c*m+l*h*m,_=g*h*u-d*v*u-g*c*p+a*v*p+d*c*m-a*h*m,S=d*y*u-g*f*u+g*l*p-a*y*p-d*l*m+a*f*m,w=g*f*c-d*y*c-g*l*h+a*y*h+d*l*v-a*f*v,C=r*x+i*_+o*S+s*w;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/C;return e[0]=x*E,e[1]=(y*h*s-f*v*s-y*o*p+i*v*p+f*o*m-i*h*m)*E,e[2]=(l*v*s-y*c*s+y*o*u-i*v*u-l*o*m+i*c*m)*E,e[3]=(f*c*s-l*h*s-f*o*u+i*h*u+l*o*p-i*c*p)*E,e[4]=_*E,e[5]=(d*v*s-g*h*s+g*o*p-r*v*p-d*o*m+r*h*m)*E,e[6]=(g*c*s-a*v*s-g*o*u+r*v*u+a*o*m-r*c*m)*E,e[7]=(a*h*s-d*c*s+d*o*u-r*h*u-a*o*p+r*c*p)*E,e[8]=S*E,e[9]=(g*f*s-d*y*s-g*i*p+r*y*p+d*i*m-r*f*m)*E,e[10]=(a*y*s-g*l*s+g*i*u-r*y*u-a*i*m+r*l*m)*E,e[11]=(d*l*s-a*f*s-d*i*u+r*f*u+a*i*p-r*l*p)*E,e[12]=w*E,e[13]=(d*y*o-g*f*o+g*i*h-r*y*h-d*i*v+r*f*v)*E,e[14]=(g*l*o-a*y*o-g*i*c+r*y*c+a*i*v-r*l*v)*E,e[15]=(a*f*o-d*l*o+d*i*c-r*f*c-a*i*h+r*l*h)*E,this}scale(e){const r=this.elements,i=e.x,o=e.y,s=e.z;return r[0]*=i,r[4]*=o,r[8]*=s,r[1]*=i,r[5]*=o,r[9]*=s,r[2]*=i,r[6]*=o,r[10]*=s,r[3]*=i,r[7]*=o,r[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,i,o))}makeTranslation(e,r,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,i,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const i=Math.cos(r),o=Math.sin(r),s=1-i,a=e.x,l=e.y,c=e.z,u=s*a,d=s*l;return this.set(u*a+i,u*l-o*c,u*c+o*l,0,u*l+o*c,d*l+i,d*c-o*a,0,u*c-o*l,d*c+o*a,s*c*c+i,0,0,0,0,1),this}makeScale(e,r,i){return this.set(e,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,r,i,o,s,a){return this.set(1,i,s,0,e,1,a,0,r,o,1,0,0,0,0,1),this}compose(e,r,i){const o=this.elements,s=r._x,a=r._y,l=r._z,c=r._w,u=s+s,d=a+a,f=l+l,h=s*u,p=s*d,g=s*f,y=a*d,v=a*f,m=l*f,x=c*u,_=c*d,S=c*f,w=i.x,C=i.y,E=i.z;return o[0]=(1-(y+m))*w,o[1]=(p+S)*w,o[2]=(g-_)*w,o[3]=0,o[4]=(p-S)*C,o[5]=(1-(h+m))*C,o[6]=(v+x)*C,o[7]=0,o[8]=(g+_)*E,o[9]=(v-x)*E,o[10]=(1-(h+y))*E,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,r,i){const o=this.elements;let s=ad.set(o[0],o[1],o[2]).length();const a=ad.set(o[4],o[5],o[6]).length(),l=ad.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),e.x=o[12],e.y=o[13],e.z=o[14],ss.copy(this);const u=1/s,d=1/a,f=1/l;return ss.elements[0]*=u,ss.elements[1]*=u,ss.elements[2]*=u,ss.elements[4]*=d,ss.elements[5]*=d,ss.elements[6]*=d,ss.elements[8]*=f,ss.elements[9]*=f,ss.elements[10]*=f,r.setFromRotationMatrix(ss),i.x=s,i.y=a,i.z=l,this}makePerspective(e,r,i,o,s,a,l=jo){const c=this.elements,u=2*s/(r-e),d=2*s/(i-o),f=(r+e)/(r-e),h=(i+o)/(i-o);let p,g;if(l===jo)p=-(a+s)/(a-s),g=-2*a*s/(a-s);else if(l===Ru)p=-a/(a-s),g=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,r,i,o,s,a,l=jo){const c=this.elements,u=1/(r-e),d=1/(i-o),f=1/(a-s),h=(r+e)*u,p=(i+o)*d;let g,y;if(l===jo)g=(a+s)*f,y=-2*f;else if(l===Ru)g=s*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=y,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const r=this.elements,i=e.elements;for(let o=0;o<16;o++)if(r[o]!==i[o])return!1;return!0}fromArray(e,r=0){for(let i=0;i<16;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e[r+9]=i[9],e[r+10]=i[10],e[r+11]=i[11],e[r+12]=i[12],e[r+13]=i[13],e[r+14]=i[14],e[r+15]=i[15],e}}const ad=new Y,ss=new fn,jce=new Y(0,0,0),Wce=new Y(1,1,1),wl=new Y,Sv=new Y,co=new Y,WO=new fn,qO=new oa;class Mo{constructor(e=0,r=0,i=0,o=Mo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=i,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,i,o=this._order){return this._x=e,this._y=r,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,i=!0){const o=e.elements,s=o[0],a=o[4],l=o[8],c=o[1],u=o[5],d=o[9],f=o[2],h=o[6],p=o[10];switch(r){case"XYZ":this._y=Math.asin(Jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Jt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Jt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Jt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Jt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,i){return WO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(WO,r,i)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return qO.setFromEuler(this),this.setFromQuaternion(qO,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Mo.DEFAULT_ORDER="XYZ";class iR{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let qce=0;const XO=new Y,ld=new oa,Sa=new fn,wv=new Y,Vh=new Y,Xce=new Y,Kce=new oa,KO=new Y(1,0,0),YO=new Y(0,1,0),QO=new Y(0,0,1),ZO={type:"added"},Yce={type:"removed"},cd={type:"childadded",child:null},TS={type:"childremoved",child:null};class Er extends Sc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qce++}),this.uuid=Wa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Er.DEFAULT_UP.clone();const e=new Y,r=new Mo,i=new oa,o=new Y(1,1,1);function s(){i.setFromEuler(r,!1)}function a(){r.setFromQuaternion(i,void 0,!1)}r._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new fn},normalMatrix:{value:new Vt}}),this.matrix=new fn,this.matrixWorld=new fn,this.matrixAutoUpdate=Er.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new iR,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return ld.setFromAxisAngle(e,r),this.quaternion.multiply(ld),this}rotateOnWorldAxis(e,r){return ld.setFromAxisAngle(e,r),this.quaternion.premultiply(ld),this}rotateX(e){return this.rotateOnAxis(KO,e)}rotateY(e){return this.rotateOnAxis(YO,e)}rotateZ(e){return this.rotateOnAxis(QO,e)}translateOnAxis(e,r){return XO.copy(e).applyQuaternion(this.quaternion),this.position.add(XO.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(KO,e)}translateY(e){return this.translateOnAxis(YO,e)}translateZ(e){return this.translateOnAxis(QO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Sa.copy(this.matrixWorld).invert())}lookAt(e,r,i){e.isVector3?wv.copy(e):wv.set(e,r,i);const o=this.parent;this.updateWorldMatrix(!0,!1),Vh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sa.lookAt(Vh,wv,this.up):Sa.lookAt(wv,Vh,this.up),this.quaternion.setFromRotationMatrix(Sa),o&&(Sa.extractRotation(o.matrixWorld),ld.setFromRotationMatrix(Sa),this.quaternion.premultiply(ld.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ZO),cd.child=e,this.dispatchEvent(cd),cd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(Yce),TS.child=e,this.dispatchEvent(TS),TS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Sa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Sa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ZO),cd.child=e,this.dispatchEvent(cd),cd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let i=0,o=this.children.length;i<o;i++){const a=this.children[i].getObjectByProperty(e,r);if(a!==void 0)return a}}getObjectsByProperty(e,r,i=[]){this[e]===r&&i.push(this);const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,r,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vh,e,Xce),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vh,Kce,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(e)}updateWorldMatrix(e,r){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const f=c[u];s(e.shapes,f)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(e.materials,this.material[c]));o.material=l}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];o.animations.push(s(e.animations,c))}}if(r){const l=a(e.geometries),c=a(e.materials),u=a(e.textures),d=a(e.images),f=a(e.shapes),h=a(e.skeletons),p=a(e.animations),g=a(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=o,i;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let i=0;i<e.children.length;i++){const o=e.children[i];this.add(o.clone())}return this}}Er.DEFAULT_UP=new Y(0,1,0);Er.DEFAULT_MATRIX_AUTO_UPDATE=!0;Er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const as=new Y,wa=new Y,MS=new Y,Ca=new Y,ud=new Y,dd=new Y,JO=new Y,RS=new Y,AS=new Y,NS=new Y,PS=new qt,OS=new qt,IS=new qt;class bs{constructor(e=new Y,r=new Y,i=new Y){this.a=e,this.b=r,this.c=i}static getNormal(e,r,i,o){o.subVectors(i,r),as.subVectors(e,r),o.cross(as);const s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}static getBarycoord(e,r,i,o,s){as.subVectors(o,r),wa.subVectors(i,r),MS.subVectors(e,r);const a=as.dot(as),l=as.dot(wa),c=as.dot(MS),u=wa.dot(wa),d=wa.dot(MS),f=a*u-l*l;if(f===0)return s.set(0,0,0),null;const h=1/f,p=(u*c-l*d)*h,g=(a*d-l*c)*h;return s.set(1-p-g,g,p)}static containsPoint(e,r,i,o){return this.getBarycoord(e,r,i,o,Ca)===null?!1:Ca.x>=0&&Ca.y>=0&&Ca.x+Ca.y<=1}static getInterpolation(e,r,i,o,s,a,l,c){return this.getBarycoord(e,r,i,o,Ca)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Ca.x),c.addScaledVector(a,Ca.y),c.addScaledVector(l,Ca.z),c)}static getInterpolatedAttribute(e,r,i,o,s,a){return PS.setScalar(0),OS.setScalar(0),IS.setScalar(0),PS.fromBufferAttribute(e,r),OS.fromBufferAttribute(e,i),IS.fromBufferAttribute(e,o),a.setScalar(0),a.addScaledVector(PS,s.x),a.addScaledVector(OS,s.y),a.addScaledVector(IS,s.z),a}static isFrontFacing(e,r,i,o){return as.subVectors(i,r),wa.subVectors(e,r),as.cross(wa).dot(o)<0}set(e,r,i){return this.a.copy(e),this.b.copy(r),this.c.copy(i),this}setFromPointsAndIndices(e,r,i,o){return this.a.copy(e[r]),this.b.copy(e[i]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,r,i,o){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return as.subVectors(this.c,this.b),wa.subVectors(this.a,this.b),as.cross(wa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return bs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return bs.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,i,o,s){return bs.getInterpolation(e,this.a,this.b,this.c,r,i,o,s)}containsPoint(e){return bs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return bs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const i=this.a,o=this.b,s=this.c;let a,l;ud.subVectors(o,i),dd.subVectors(s,i),RS.subVectors(e,i);const c=ud.dot(RS),u=dd.dot(RS);if(c<=0&&u<=0)return r.copy(i);AS.subVectors(e,o);const d=ud.dot(AS),f=dd.dot(AS);if(d>=0&&f<=d)return r.copy(o);const h=c*f-d*u;if(h<=0&&c>=0&&d<=0)return a=c/(c-d),r.copy(i).addScaledVector(ud,a);NS.subVectors(e,s);const p=ud.dot(NS),g=dd.dot(NS);if(g>=0&&p<=g)return r.copy(s);const y=p*u-c*g;if(y<=0&&u>=0&&g<=0)return l=u/(u-g),r.copy(i).addScaledVector(dd,l);const v=d*g-p*f;if(v<=0&&f-d>=0&&p-g>=0)return JO.subVectors(s,o),l=(f-d)/(f-d+(p-g)),r.copy(o).addScaledVector(JO,l);const m=1/(v+y+h);return a=y*m,l=h*m,r.copy(i).addScaledVector(ud,a).addScaledVector(dd,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Bk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cl={h:0,s:0,l:0},Cv={h:0,s:0,l:0};function DS(n,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(e-n)*6*r:r<1/2?e:r<2/3?n+(e-n)*6*(2/3-r):n}class Mt{constructor(e,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,i)}set(e,r,i){if(r===void 0&&i===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,r,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=Lt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rn.toWorkingColorSpace(this,r),this}setRGB(e,r,i,o=rn.workingColorSpace){return this.r=e,this.g=r,this.b=i,rn.toWorkingColorSpace(this,o),this}setHSL(e,r,i,o=rn.workingColorSpace){if(e=nR(e,1),r=Jt(r,0,1),i=Jt(i,0,1),r===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+r):i+r-i*r,a=2*i-s;this.r=DS(a,s,e+1/3),this.g=DS(a,s,e),this.b=DS(a,s,e-1/3)}return rn.toWorkingColorSpace(this,o),this}setStyle(e,r=Lt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=o[1],l=o[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,r);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,r);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=o[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,r);if(a===6)return this.setHex(parseInt(s,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=Lt){const i=Bk[e.toLowerCase()];return i!==void 0?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qa(e.r),this.g=qa(e.g),this.b=qa(e.b),this}copyLinearToSRGB(e){return this.r=nf(e.r),this.g=nf(e.g),this.b=nf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Lt){return rn.fromWorkingColorSpace(fi.copy(this),e),Math.round(Jt(fi.r*255,0,255))*65536+Math.round(Jt(fi.g*255,0,255))*256+Math.round(Jt(fi.b*255,0,255))}getHexString(e=Lt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=rn.workingColorSpace){rn.fromWorkingColorSpace(fi.copy(this),r);const i=fi.r,o=fi.g,s=fi.b,a=Math.max(i,o,s),l=Math.min(i,o,s);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const f=a-l;switch(u=d<=.5?f/(a+l):f/(2-a-l),a){case i:c=(o-s)/f+(o<s?6:0);break;case o:c=(s-i)/f+2;break;case s:c=(i-o)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,r=rn.workingColorSpace){return rn.fromWorkingColorSpace(fi.copy(this),r),e.r=fi.r,e.g=fi.g,e.b=fi.b,e}getStyle(e=Lt){rn.fromWorkingColorSpace(fi.copy(this),e);const r=fi.r,i=fi.g,o=fi.b;return e!==Lt?`color(${e} ${r.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(i*255)},${Math.round(o*255)})`}offsetHSL(e,r,i){return this.getHSL(Cl),this.setHSL(Cl.h+e,Cl.s+r,Cl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,i){return this.r=e.r+(r.r-e.r)*i,this.g=e.g+(r.g-e.g)*i,this.b=e.b+(r.b-e.b)*i,this}lerpHSL(e,r){this.getHSL(Cl),e.getHSL(Cv);const i=Up(Cl.h,Cv.h,r),o=Up(Cl.s,Cv.s,r),s=Up(Cl.l,Cv.l,r);return this.setHSL(i,o,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,i=this.g,o=this.b,s=e.elements;return this.r=s[0]*r+s[3]*i+s[6]*o,this.g=s[1]*r+s[4]*i+s[7]*o,this.b=s[2]*r+s[5]*i+s[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const fi=new Mt;Mt.NAMES=Bk;let Qce=0;class yi extends Sc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Qce++}),this.uuid=Wa(),this.name="",this.type="Material",this.blending=qo,this.side=Ps,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Cm,this.blendDst=Em,this.blendEquation=xo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Mt(0,0,0),this.blendAlpha=0,this.depthFunc=dc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=zc,this.stencilZFail=zc,this.stencilZPass=zc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const i=e[r];if(i===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const o=this[r];if(o===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[r]=i}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==qo&&(i.blending=this.blending),this.side!==Ps&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Cm&&(i.blendSrc=this.blendSrc),this.blendDst!==Em&&(i.blendDst=this.blendDst),this.blendEquation!==xo&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==dc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==dE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==zc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==zc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==zc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(r){const s=o(e.textures),a=o(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let i=null;if(r!==null){const o=r.length;i=new Array(o);for(let s=0;s!==o;++s)i[s]=r[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class dh extends yi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Mo,this.combine=_g,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Oa=Zce();function Zce(){const n=new ArrayBuffer(4),e=new Float32Array(n),r=new Uint32Array(n),i=new Uint32Array(512),o=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(i[c]=0,i[c|256]=32768,o[c]=24,o[c|256]=24):u<-14?(i[c]=1024>>-u-14,i[c|256]=1024>>-u-14|32768,o[c]=-u-1,o[c|256]=-u-1):u<=15?(i[c]=u+15<<10,i[c|256]=u+15<<10|32768,o[c]=13,o[c|256]=13):u<128?(i[c]=31744,i[c|256]=64512,o[c]=24,o[c|256]=24):(i[c]=31744,i[c|256]=64512,o[c]=13,o[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[c]=u|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:r,baseTable:i,shiftTable:o,mantissaTable:s,exponentTable:a,offsetTable:l}}function uo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Jt(n,-65504,65504),Oa.floatView[0]=n;const e=Oa.uint32View[0],r=e>>23&511;return Oa.baseTable[r]+((e&8388607)>>Oa.shiftTable[r])}function Ev(n){const e=n>>10;return Oa.uint32View[0]=Oa.mantissaTable[Oa.offsetTable[e]+(n&1023)]+Oa.exponentTable[e],Oa.floatView[0]}const yr=new Y,Tv=new je;class ii{constructor(e,r,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=i,this.usage=Vy,this.updateRanges=[],this.gpuType=pr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,i){e*=this.itemSize,i*=r.itemSize;for(let o=0,s=this.itemSize;o<s;o++)this.array[e+o]=r.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,i=this.count;r<i;r++)Tv.fromBufferAttribute(this,r),Tv.applyMatrix3(e),this.setXY(r,Tv.x,Tv.y);else if(this.itemSize===3)for(let r=0,i=this.count;r<i;r++)yr.fromBufferAttribute(this,r),yr.applyMatrix3(e),this.setXYZ(r,yr.x,yr.y,yr.z);return this}applyMatrix4(e){for(let r=0,i=this.count;r<i;r++)yr.fromBufferAttribute(this,r),yr.applyMatrix4(e),this.setXYZ(r,yr.x,yr.y,yr.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)yr.fromBufferAttribute(this,r),yr.applyNormalMatrix(e),this.setXYZ(r,yr.x,yr.y,yr.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)yr.fromBufferAttribute(this,r),yr.transformDirection(e),this.setXYZ(r,yr.x,yr.y,yr.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let i=this.array[e*this.itemSize+r];return this.normalized&&(i=Ai(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+r]=i,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=Ai(r,this.array)),r}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=Ai(r,this.array)),r}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=Ai(r,this.array)),r}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=Ai(r,this.array)),r}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=r,this.array[e+1]=i,this}setXYZ(e,r,i,o){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,r,i,o,s){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Vy&&(e.usage=this.usage),e}}class oR extends ii{constructor(e,r,i){super(new Uint16Array(e),r,i)}}class sR extends ii{constructor(e,r,i){super(new Uint32Array(e),r,i)}}class $k extends ii{constructor(e,r,i){super(new Uint16Array(e),r,i),this.isFloat16BufferAttribute=!0}getX(e){let r=Ev(this.array[e*this.itemSize]);return this.normalized&&(r=Ai(r,this.array)),r}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize]=uo(r),this}getY(e){let r=Ev(this.array[e*this.itemSize+1]);return this.normalized&&(r=Ai(r,this.array)),r}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+1]=uo(r),this}getZ(e){let r=Ev(this.array[e*this.itemSize+2]);return this.normalized&&(r=Ai(r,this.array)),r}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+2]=uo(r),this}getW(e){let r=Ev(this.array[e*this.itemSize+3]);return this.normalized&&(r=Ai(r,this.array)),r}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+3]=uo(r),this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=uo(r),this.array[e+1]=uo(i),this}setXYZ(e,r,i,o){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.array[e+0]=uo(r),this.array[e+1]=uo(i),this.array[e+2]=uo(o),this}setXYZW(e,r,i,o,s){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.array[e+0]=uo(r),this.array[e+1]=uo(i),this.array[e+2]=uo(o),this.array[e+3]=uo(s),this}}class gr extends ii{constructor(e,r,i){super(new Float32Array(e),r,i)}}let Jce=0;const Lo=new fn,LS=new Er,fd=new Y,fo=new Bu,Gh=new Bu,qr=new Y;class Bi extends Sc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jce++}),this.uuid=Wa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Lk(e)?sR:oR)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,i=0){this.groups.push({start:e,count:r,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Vt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Lo.makeRotationFromQuaternion(e),this.applyMatrix4(Lo),this}rotateX(e){return Lo.makeRotationX(e),this.applyMatrix4(Lo),this}rotateY(e){return Lo.makeRotationY(e),this.applyMatrix4(Lo),this}rotateZ(e){return Lo.makeRotationZ(e),this.applyMatrix4(Lo),this}translate(e,r,i){return Lo.makeTranslation(e,r,i),this.applyMatrix4(Lo),this}scale(e,r,i){return Lo.makeScale(e,r,i),this.applyMatrix4(Lo),this}lookAt(e){return LS.lookAt(e),LS.updateMatrix(),this.applyMatrix4(LS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fd).negate(),this.translate(fd.x,fd.y,fd.z),this}setFromPoints(e){const r=this.getAttribute("position");if(r===void 0){const i=[];for(let o=0,s=e.length;o<s;o++){const a=e[o];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new gr(i,3))}else{const i=Math.min(e.length,r.count);for(let o=0;o<i;o++){const s=e[o];r.setXYZ(o,s.x,s.y,s.z||0)}e.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bu);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let i=0,o=r.length;i<o;i++){const s=r[i];fo.setFromBufferAttribute(s),this.morphTargetsRelative?(qr.addVectors(this.boundingBox.min,fo.min),this.boundingBox.expandByPoint(qr),qr.addVectors(this.boundingBox.max,fo.max),this.boundingBox.expandByPoint(qr)):(this.boundingBox.expandByPoint(fo.min),this.boundingBox.expandByPoint(fo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new y_);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const i=this.boundingSphere.center;if(fo.setFromBufferAttribute(e),r)for(let s=0,a=r.length;s<a;s++){const l=r[s];Gh.setFromBufferAttribute(l),this.morphTargetsRelative?(qr.addVectors(fo.min,Gh.min),fo.expandByPoint(qr),qr.addVectors(fo.max,Gh.max),fo.expandByPoint(qr)):(fo.expandByPoint(Gh.min),fo.expandByPoint(Gh.max))}fo.getCenter(i);let o=0;for(let s=0,a=e.count;s<a;s++)qr.fromBufferAttribute(e,s),o=Math.max(o,i.distanceToSquared(qr));if(r)for(let s=0,a=r.length;s<a;s++){const l=r[s],c=this.morphTargetsRelative;for(let u=0,d=l.count;u<d;u++)qr.fromBufferAttribute(l,u),c&&(fd.fromBufferAttribute(e,u),qr.add(fd)),o=Math.max(o,i.distanceToSquared(qr))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=r.position,o=r.normal,s=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ii(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),l=[],c=[];for(let T=0;T<i.count;T++)l[T]=new Y,c[T]=new Y;const u=new Y,d=new Y,f=new Y,h=new je,p=new je,g=new je,y=new Y,v=new Y;function m(T,M,R){u.fromBufferAttribute(i,T),d.fromBufferAttribute(i,M),f.fromBufferAttribute(i,R),h.fromBufferAttribute(s,T),p.fromBufferAttribute(s,M),g.fromBufferAttribute(s,R),d.sub(u),f.sub(u),p.sub(h),g.sub(h);const N=1/(p.x*g.y-g.x*p.y);isFinite(N)&&(y.copy(d).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(N),v.copy(f).multiplyScalar(p.x).addScaledVector(d,-g.x).multiplyScalar(N),l[T].add(y),l[M].add(y),l[R].add(y),c[T].add(v),c[M].add(v),c[R].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let T=0,M=x.length;T<M;++T){const R=x[T],N=R.start,D=R.count;for(let L=N,A=N+D;L<A;L+=3)m(e.getX(L+0),e.getX(L+1),e.getX(L+2))}const _=new Y,S=new Y,w=new Y,C=new Y;function E(T){w.fromBufferAttribute(o,T),C.copy(w);const M=l[T];_.copy(M),_.sub(w.multiplyScalar(w.dot(M))).normalize(),S.crossVectors(C,M);const N=S.dot(c[T])<0?-1:1;a.setXYZW(T,_.x,_.y,_.z,N)}for(let T=0,M=x.length;T<M;++T){const R=x[T],N=R.start,D=R.count;for(let L=N,A=N+D;L<A;L+=3)E(e.getX(L+0)),E(e.getX(L+1)),E(e.getX(L+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ii(new Float32Array(r.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const o=new Y,s=new Y,a=new Y,l=new Y,c=new Y,u=new Y,d=new Y,f=new Y;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),y=e.getX(h+1),v=e.getX(h+2);o.fromBufferAttribute(r,g),s.fromBufferAttribute(r,y),a.fromBufferAttribute(r,v),d.subVectors(a,s),f.subVectors(o,s),d.cross(f),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,y),u.fromBufferAttribute(i,v),l.add(d),c.add(d),u.add(d),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(v,u.x,u.y,u.z)}else for(let h=0,p=r.count;h<p;h+=3)o.fromBufferAttribute(r,h+0),s.fromBufferAttribute(r,h+1),a.fromBufferAttribute(r,h+2),d.subVectors(a,s),f.subVectors(o,s),d.cross(f),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,i=e.count;r<i;r++)qr.fromBufferAttribute(e,r),qr.normalize(),e.setXYZ(r,qr.x,qr.y,qr.z)}toNonIndexed(){function e(l,c){const u=l.array,d=l.itemSize,f=l.normalized,h=new u.constructor(c.length*d);let p=0,g=0;for(let y=0,v=c.length;y<v;y++){l.isInterleavedBufferAttribute?p=c[y]*l.data.stride+l.offset:p=c[y]*d;for(let m=0;m<d;m++)h[g++]=u[p++]}return new ii(h,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Bi,i=this.index.array,o=this.attributes;for(const l in o){const c=o[l],u=e(c,i);r.setAttribute(l,u)}const s=this.morphAttributes;for(const l in s){const c=[],u=s[l];for(let d=0,f=u.length;d<f;d++){const h=u[d],p=e(h,i);c.push(p)}r.morphAttributes[l]=c}r.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addGroup(u.start,u.count,u.materialIndex)}return r}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const i=this.attributes;for(const c in i){const u=i[c];e.data.attributes[c]=u.toJSON(e.data)}const o={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let f=0,h=u.length;f<h;f++){const p=u[f];d.push(p.toJSON(e.data))}d.length>0&&(o[c]=d,s=!0)}s&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(r));const o=e.attributes;for(const u in o){const d=o[u];this.setAttribute(u,d.clone(r))}const s=e.morphAttributes;for(const u in s){const d=[],f=s[u];for(let h=0,p=f.length;h<p;h++)d.push(f[h].clone(r));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,d=a.length;u<d;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const eI=new fn,Ic=new x_,Mv=new y_,tI=new Y,Rv=new Y,Av=new Y,Nv=new Y,FS=new Y,Pv=new Y,nI=new Y,Ov=new Y;class $r extends Er{constructor(e=new Bi,r=new dh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const o=r[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=o.length;s<a;s++){const l=o[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,r){const i=this.geometry,o=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;r.fromBufferAttribute(o,e);const l=this.morphTargetInfluences;if(s&&l){Pv.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const d=l[c],f=s[c];d!==0&&(FS.fromBufferAttribute(f,e),a?Pv.addScaledVector(FS,d):Pv.addScaledVector(FS.sub(r),d))}r.add(Pv)}return r}raycast(e,r){const i=this.geometry,o=this.material,s=this.matrixWorld;o!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Mv.copy(i.boundingSphere),Mv.applyMatrix4(s),Ic.copy(e.ray).recast(e.near),!(Mv.containsPoint(Ic.origin)===!1&&(Ic.intersectSphere(Mv,tI)===null||Ic.origin.distanceToSquared(tI)>(e.far-e.near)**2))&&(eI.copy(s).invert(),Ic.copy(e.ray).applyMatrix4(eI),!(i.boundingBox!==null&&Ic.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,r,Ic)))}_computeIntersections(e,r,i){let o;const s=this.geometry,a=this.material,l=s.index,c=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,h=s.groups,p=s.drawRange;if(l!==null)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const v=h[g],m=a[v.materialIndex],x=Math.max(v.start,p.start),_=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let S=x,w=_;S<w;S+=3){const C=l.getX(S),E=l.getX(S+1),T=l.getX(S+2);o=Iv(this,m,e,i,u,d,f,C,E,T),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,r.push(o))}}else{const g=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);for(let v=g,m=y;v<m;v+=3){const x=l.getX(v),_=l.getX(v+1),S=l.getX(v+2);o=Iv(this,a,e,i,u,d,f,x,_,S),o&&(o.faceIndex=Math.floor(v/3),r.push(o))}}else if(c!==void 0)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const v=h[g],m=a[v.materialIndex],x=Math.max(v.start,p.start),_=Math.min(c.count,Math.min(v.start+v.count,p.start+p.count));for(let S=x,w=_;S<w;S+=3){const C=S,E=S+1,T=S+2;o=Iv(this,m,e,i,u,d,f,C,E,T),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,r.push(o))}}else{const g=Math.max(0,p.start),y=Math.min(c.count,p.start+p.count);for(let v=g,m=y;v<m;v+=3){const x=v,_=v+1,S=v+2;o=Iv(this,a,e,i,u,d,f,x,_,S),o&&(o.faceIndex=Math.floor(v/3),r.push(o))}}}}function eue(n,e,r,i,o,s,a,l){let c;if(e.side===er?c=i.intersectTriangle(a,s,o,!0,l):c=i.intersectTriangle(o,s,a,e.side===Ps,l),c===null)return null;Ov.copy(l),Ov.applyMatrix4(n.matrixWorld);const u=r.ray.origin.distanceTo(Ov);return u<r.near||u>r.far?null:{distance:u,point:Ov.clone(),object:n}}function Iv(n,e,r,i,o,s,a,l,c,u){n.getVertexPosition(l,Rv),n.getVertexPosition(c,Av),n.getVertexPosition(u,Nv);const d=eue(n,e,r,i,Rv,Av,Nv,nI);if(d){const f=new Y;bs.getBarycoord(nI,Rv,Av,Nv,f),o&&(d.uv=bs.getInterpolatedAttribute(o,l,c,u,f,new je)),s&&(d.uv1=bs.getInterpolatedAttribute(s,l,c,u,f,new je)),a&&(d.normal=bs.getInterpolatedAttribute(a,l,c,u,f,new Y),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a:l,b:c,c:u,normal:new Y,materialIndex:0};bs.getNormal(Rv,Av,Nv,h.normal),d.face=h,d.barycoord=f}return d}class $u extends Bi{constructor(e=1,r=1,i=1,o=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:i,widthSegments:o,heightSegments:s,depthSegments:a};const l=this;o=Math.floor(o),s=Math.floor(s),a=Math.floor(a);const c=[],u=[],d=[],f=[];let h=0,p=0;g("z","y","x",-1,-1,i,r,e,a,s,0),g("z","y","x",1,-1,i,r,-e,a,s,1),g("x","z","y",1,1,e,i,r,o,a,2),g("x","z","y",1,-1,e,i,-r,o,a,3),g("x","y","z",1,-1,e,r,i,o,s,4),g("x","y","z",-1,-1,e,r,-i,o,s,5),this.setIndex(c),this.setAttribute("position",new gr(u,3)),this.setAttribute("normal",new gr(d,3)),this.setAttribute("uv",new gr(f,2));function g(y,v,m,x,_,S,w,C,E,T,M){const R=S/E,N=w/T,D=S/2,L=w/2,A=C/2,I=E+1,P=T+1;let F=0,O=0;const V=new Y;for(let U=0;U<P;U++){const k=U*N-L;for(let W=0;W<I;W++){const J=W*R-D;V[y]=J*x,V[v]=k*_,V[m]=A,u.push(V.x,V.y,V.z),V[y]=0,V[v]=0,V[m]=C>0?1:-1,d.push(V.x,V.y,V.z),f.push(W/E),f.push(1-U/T),F+=1}}for(let U=0;U<T;U++)for(let k=0;k<E;k++){const W=h+k+I*U,J=h+k+I*(U+1),z=h+(k+1)+I*(U+1),j=h+(k+1)+I*U;c.push(W,J,j),c.push(J,z,j),O+=6}l.addGroup(p,O,M),p+=O,h+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $u(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wf(n){const e={};for(const r in n){e[r]={};for(const i in n[r]){const o=n[r][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][i]=null):e[r][i]=o.clone():Array.isArray(o)?e[r][i]=o.slice():e[r][i]=o}}return e}function wi(n){const e={};for(let r=0;r<n.length;r++){const i=Wf(n[r]);for(const o in i)e[o]=i[o]}return e}function tue(n){const e=[];for(let r=0;r<n.length;r++)e.push(n[r].clone());return e}function zk(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:rn.workingColorSpace}const Hy={clone:Wf,merge:wi};var nue=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rue=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class qi extends yi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nue,this.fragmentShader=rue,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wf(e.uniforms),this.uniformsGroups=tue(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const o in this.uniforms){const a=this.uniforms[o].value;a&&a.isTexture?r.uniforms[o]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?r.uniforms[o]={type:"c",value:a.getHex()}:a&&a.isVector2?r.uniforms[o]={type:"v2",value:a.toArray()}:a&&a.isVector3?r.uniforms[o]={type:"v3",value:a.toArray()}:a&&a.isVector4?r.uniforms[o]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?r.uniforms[o]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?r.uniforms[o]={type:"m4",value:a.toArray()}:r.uniforms[o]={value:a}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(r.extensions=i),r}}class kk extends Er{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fn,this.projectionMatrix=new fn,this.projectionMatrixInverse=new fn,this.coordinateSystem=jo}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const El=new Y,rI=new je,iI=new je;class Ti extends kk{constructor(e=50,r=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=jf*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Fp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jf*2*Math.atan(Math.tan(Fp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,i){El.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(El.x,El.y).multiplyScalar(-e/El.z),El.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(El.x,El.y).multiplyScalar(-e/El.z)}getViewSize(e,r){return this.getViewBounds(e,rI,iI),r.subVectors(iI,rI)}setViewOffset(e,r,i,o,s,a){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=o,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(Fp*.5*this.fov)/this.zoom,i=2*r,o=this.aspect*i,s=-.5*o;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;s+=a.offsetX*o/c,r-=a.offsetY*i/u,o*=a.width/c,i*=a.height/u}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+o,r,r-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const hd=-90,pd=1;class Vk extends Er{constructor(e,r,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new Ti(hd,pd,e,r);o.layers=this.layers,this.add(o);const s=new Ti(hd,pd,e,r);s.layers=this.layers,this.add(s);const a=new Ti(hd,pd,e,r);a.layers=this.layers,this.add(a);const l=new Ti(hd,pd,e,r);l.layers=this.layers,this.add(l);const c=new Ti(hd,pd,e,r);c.layers=this.layers,this.add(c);const u=new Ti(hd,pd,e,r);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[i,o,s,a,l,c]=r;for(const u of r)this.remove(u);if(e===jo)i.up.set(0,1,0),i.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Ru)i.up.set(0,-1,0),i.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of r)this.add(u),u.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,c,u,d]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,o),e.render(r,s),e.setRenderTarget(i,1,o),e.render(r,a),e.setRenderTarget(i,2,o),e.render(r,l),e.setRenderTarget(i,3,o),e.render(r,c),e.setRenderTarget(i,4,o),e.render(r,u),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,o),e.render(r,d),e.setRenderTarget(f,h,p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class __ extends zr{constructor(e,r,i,o,s,a,l,c,u,d){e=e!==void 0?e:[],r=r!==void 0?r:Jo,super(e,r,i,o,s,a,l,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Gk extends As{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];this.texture=new __(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Br}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new $u(5,5,5),s=new qi({name:"CubemapFromEquirect",uniforms:Wf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:er,blending:Pi});s.uniforms.tEquirect.value=r;const a=new $r(o,s),l=r.minFilter;return r.minFilter===Wi&&(r.minFilter=Br),new Vk(1,10,this).update(e,a),r.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,r,i,o){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(r,i,o);e.setRenderTarget(s)}}class aR extends Er{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Mo,this.environmentIntensity=1,this.environmentRotation=new Mo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class Hk{constructor(e,r){this.isInterleavedBuffer=!0,this.array=e,this.stride=r,this.count=e!==void 0?e.length/r:0,this.usage=Vy,this.updateRanges=[],this.version=0,this.uuid=Wa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,i){e*=this.stride,i*=r.stride;for(let o=0,s=this.stride;o<s;o++)this.array[e+o]=r.array[i+o];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(r,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Si=new Y;class lR{constructor(e,r,i,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=r,this.offset=i,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,i=this.data.count;r<i;r++)Si.fromBufferAttribute(this,r),Si.applyMatrix4(e),this.setXYZ(r,Si.x,Si.y,Si.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)Si.fromBufferAttribute(this,r),Si.applyNormalMatrix(e),this.setXYZ(r,Si.x,Si.y,Si.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)Si.fromBufferAttribute(this,r),Si.transformDirection(e),this.setXYZ(r,Si.x,Si.y,Si.z);return this}getComponent(e,r){let i=this.array[e*this.data.stride+this.offset+r];return this.normalized&&(i=Ai(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+r]=i,this}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){let r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=Ai(r,this.array)),r}getY(e){let r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=Ai(r,this.array)),r}getZ(e){let r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=Ai(r,this.array)),r}getW(e){let r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=Ai(r,this.array)),r}setXY(e,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this}setXYZ(e,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=o,this}setXYZW(e,r,i,o,s){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=o,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[o+s])}return new ii(new this.array.constructor(r),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lR(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[o+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class iue extends yi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class oue extends zr{constructor(e=null,r=1,i=1,o,s,a,l,c,u=qn,d=qn,f,h){super(null,a,l,c,u,d,o,s,f,h),this.isDataTexture=!0,this.image={data:e,width:r,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sue extends ii{constructor(e,r,i,o=1){super(e,r,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const US=new Y,aue=new Y,lue=new Vt;class vs{constructor(e=new Y(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,i,o){return this.normal.set(e,r,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,i){const o=US.subVectors(i,r).cross(aue.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const i=e.delta(US),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/o;return s<0||s>1?null:r.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const r=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return r<0&&i>0||i<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const i=r||lue.getNormalMatrix(e),o=this.coplanarPoint(US).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Dc=new y_,Dv=new Y;class b_{constructor(e=new vs,r=new vs,i=new vs,o=new vs,s=new vs,a=new vs){this.planes=[e,r,i,o,s,a]}set(e,r,i,o,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(r),l[2].copy(i),l[3].copy(o),l[4].copy(s),l[5].copy(a),this}copy(e){const r=this.planes;for(let i=0;i<6;i++)r[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,r=jo){const i=this.planes,o=e.elements,s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=o[6],h=o[7],p=o[8],g=o[9],y=o[10],v=o[11],m=o[12],x=o[13],_=o[14],S=o[15];if(i[0].setComponents(c-s,h-u,v-p,S-m).normalize(),i[1].setComponents(c+s,h+u,v+p,S+m).normalize(),i[2].setComponents(c+a,h+d,v+g,S+x).normalize(),i[3].setComponents(c-a,h-d,v-g,S-x).normalize(),i[4].setComponents(c-l,h-f,v-y,S-_).normalize(),r===jo)i[5].setComponents(c+l,h+f,v+y,S+_).normalize();else if(r===Ru)i[5].setComponents(l,f,y,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Dc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),Dc.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Dc)}intersectsSprite(e){return Dc.center.set(0,0,0),Dc.radius=.7071067811865476,Dc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Dc)}intersectsSphere(e){const r=this.planes,i=e.center,o=-e.radius;for(let s=0;s<6;s++)if(r[s].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){const r=this.planes;for(let i=0;i<6;i++){const o=r[i];if(Dv.x=o.normal.x>0?e.max.x:e.min.x,Dv.y=o.normal.y>0?e.max.y:e.min.y,Dv.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Dv)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let i=0;i<6;i++)if(r[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class S_ extends yi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Mt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const jy=new Y,Wy=new Y,oI=new fn,Hh=new x_,Lv=new y_,BS=new Y,sI=new Y;class cue extends Er{constructor(e=new Bi,r=new S_){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,i=[0];for(let o=1,s=r.count;o<s;o++)jy.fromBufferAttribute(r,o-1),Wy.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=jy.distanceTo(Wy);e.setAttribute("lineDistance",new gr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const i=this.geometry,o=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Lv.copy(i.boundingSphere),Lv.applyMatrix4(o),Lv.radius+=s,e.ray.intersectsSphere(Lv)===!1)return;oI.copy(o).invert(),Hh.copy(e.ray).applyMatrix4(oI);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,d=i.index,h=i.attributes.position;if(d!==null){const p=Math.max(0,a.start),g=Math.min(d.count,a.start+a.count);for(let y=p,v=g-1;y<v;y+=u){const m=d.getX(y),x=d.getX(y+1),_=Fv(this,e,Hh,c,m,x);_&&r.push(_)}if(this.isLineLoop){const y=d.getX(g-1),v=d.getX(p),m=Fv(this,e,Hh,c,y,v);m&&r.push(m)}}else{const p=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count);for(let y=p,v=g-1;y<v;y+=u){const m=Fv(this,e,Hh,c,y,y+1);m&&r.push(m)}if(this.isLineLoop){const y=Fv(this,e,Hh,c,g-1,p);y&&r.push(y)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const o=r[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=o.length;s<a;s++){const l=o[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Fv(n,e,r,i,o,s){const a=n.geometry.attributes.position;if(jy.fromBufferAttribute(a,o),Wy.fromBufferAttribute(a,s),r.distanceSqToSegment(jy,Wy,BS,sI)>i)return;BS.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(BS);if(!(c<e.near||c>e.far))return{distance:c,point:sI.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}class uue extends yi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Bd extends Er{constructor(){super(),this.isGroup=!0,this.type="Group"}}class due extends zr{constructor(e,r){super({width:e,height:r}),this.isFramebufferTexture=!0,this.magFilter=qn,this.minFilter=qn,this.generateMipmaps=!1,this.needsUpdate=!0}}class wc extends zr{constructor(e,r,i,o,s,a,l,c,u,d=Js){if(d!==Js&&d!==ia)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Js&&(i=rr),i===void 0&&d===ia&&(i=ra),super(null,o,s,a,l,c,d,i,u),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=l!==void 0?l:qn,this.minFilter=c!==void 0?c:qn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class ul{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const i=this.getUtoTmapping(e);return this.getPoint(i,r)}getPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPoint(i/e));return r}getSpacedPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPointAt(i/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let i,o=this.getPoint(0),s=0;r.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(o),r.push(s),o=i;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const i=this.getLengths();let o=0;const s=i.length;let a;r?a=r:a=e*i[s-1];let l=0,c=s-1,u;for(;l<=c;)if(o=Math.floor(l+(c-l)/2),u=i[o]-a,u<0)l=o+1;else if(u>0)c=o-1;else{c=o;break}if(o=c,i[o]===a)return o/(s-1);const d=i[o],h=i[o+1]-d,p=(a-d)/h;return(o+p)/(s-1)}getTangent(e,r){let o=e-1e-4,s=e+1e-4;o<0&&(o=0),s>1&&(s=1);const a=this.getPoint(o),l=this.getPoint(s),c=r||(a.isVector2?new je:new Y);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,r){const i=this.getUtoTmapping(e);return this.getTangent(i,r)}computeFrenetFrames(e,r){const i=new Y,o=[],s=[],a=[],l=new Y,c=new fn;for(let p=0;p<=e;p++){const g=p/e;o[p]=this.getTangentAt(g,new Y)}s[0]=new Y,a[0]=new Y;let u=Number.MAX_VALUE;const d=Math.abs(o[0].x),f=Math.abs(o[0].y),h=Math.abs(o[0].z);d<=u&&(u=d,i.set(1,0,0)),f<=u&&(u=f,i.set(0,1,0)),h<=u&&i.set(0,0,1),l.crossVectors(o[0],i).normalize(),s[0].crossVectors(o[0],l),a[0].crossVectors(o[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),a[p]=a[p-1].clone(),l.crossVectors(o[p-1],o[p]),l.length()>Number.EPSILON){l.normalize();const g=Math.acos(Jt(o[p-1].dot(o[p]),-1,1));s[p].applyMatrix4(c.makeRotationAxis(l,g))}a[p].crossVectors(o[p],s[p])}if(r===!0){let p=Math.acos(Jt(s[0].dot(s[e]),-1,1));p/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(c.makeRotationAxis(o[g],p*g)),a[g].crossVectors(o[g],s[g])}return{tangents:o,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class jk extends ul{constructor(e=0,r=0,i=1,o=1,s=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=r,this.xRadius=i,this.yRadius=o,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,r=new je){const i=r,o=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=o;for(;s>o;)s-=o;s<Number.EPSILON&&(a?s=0:s=o),this.aClockwise===!0&&!a&&(s===o?s=-o:s=s-o);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=c-this.aX,p=u-this.aY;c=h*d-p*f+this.aX,u=h*f+p*d+this.aY}return i.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class fue extends jk{constructor(e,r,i,o,s,a){super(e,r,i,i,o,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function cR(){let n=0,e=0,r=0,i=0;function o(s,a,l,c){n=s,e=l,r=-3*s+3*a-2*l-c,i=2*s-2*a+l+c}return{initCatmullRom:function(s,a,l,c,u){o(a,l,u*(l-s),u*(c-a))},initNonuniformCatmullRom:function(s,a,l,c,u,d,f){let h=(a-s)/u-(l-s)/(u+d)+(l-a)/d,p=(l-a)/d-(c-a)/(d+f)+(c-l)/f;h*=d,p*=d,o(a,l,h,p)},calc:function(s){const a=s*s,l=a*s;return n+e*s+r*a+i*l}}}const Uv=new Y,$S=new cR,zS=new cR,kS=new cR;class hue extends ul{constructor(e=[],r=!1,i="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=i,this.tension=o}getPoint(e,r=new Y){const i=r,o=this.points,s=o.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let u,d;this.closed||l>0?u=o[(l-1)%s]:(Uv.subVectors(o[0],o[1]).add(o[0]),u=Uv);const f=o[l%s],h=o[(l+1)%s];if(this.closed||l+2<s?d=o[(l+2)%s]:(Uv.subVectors(o[s-1],o[s-2]).add(o[s-1]),d=Uv),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),p),y=Math.pow(f.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(d),p);y<1e-4&&(y=1),g<1e-4&&(g=y),v<1e-4&&(v=y),$S.initNonuniformCatmullRom(u.x,f.x,h.x,d.x,g,y,v),zS.initNonuniformCatmullRom(u.y,f.y,h.y,d.y,g,y,v),kS.initNonuniformCatmullRom(u.z,f.z,h.z,d.z,g,y,v)}else this.curveType==="catmullrom"&&($S.initCatmullRom(u.x,f.x,h.x,d.x,this.tension),zS.initCatmullRom(u.y,f.y,h.y,d.y,this.tension),kS.initCatmullRom(u.z,f.z,h.z,d.z,this.tension));return i.set($S.calc(c),zS.calc(c),kS.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const o=this.points[r];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(new Y().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aI(n,e,r,i,o){const s=(i-e)*.5,a=(o-r)*.5,l=n*n,c=n*l;return(2*r-2*i+s+a)*c+(-3*r+3*i-2*s-a)*l+s*n+r}function pue(n,e){const r=1-n;return r*r*e}function mue(n,e){return 2*(1-n)*n*e}function gue(n,e){return n*n*e}function Bp(n,e,r,i){return pue(n,e)+mue(n,r)+gue(n,i)}function vue(n,e){const r=1-n;return r*r*r*e}function yue(n,e){const r=1-n;return 3*r*r*n*e}function xue(n,e){return 3*(1-n)*n*n*e}function _ue(n,e){return n*n*n*e}function $p(n,e,r,i,o){return vue(n,e)+yue(n,r)+xue(n,i)+_ue(n,o)}class bue extends ul{constructor(e=new je,r=new je,i=new je,o=new je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=r,this.v2=i,this.v3=o}getPoint(e,r=new je){const i=r,o=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set($p(e,o.x,s.x,a.x,l.x),$p(e,o.y,s.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Wk extends ul{constructor(e=new Y,r=new Y,i=new Y,o=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=r,this.v2=i,this.v3=o}getPoint(e,r=new Y){const i=r,o=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set($p(e,o.x,s.x,a.x,l.x),$p(e,o.y,s.y,a.y,l.y),$p(e,o.z,s.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Sue extends ul{constructor(e=new je,r=new je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=r}getPoint(e,r=new je){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new je){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wue extends ul{constructor(e=new Y,r=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=r}getPoint(e,r=new Y){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new Y){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cue extends ul{constructor(e=new je,r=new je,i=new je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new je){const i=r,o=this.v0,s=this.v1,a=this.v2;return i.set(Bp(e,o.x,s.x,a.x),Bp(e,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uR extends ul{constructor(e=new Y,r=new Y,i=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new Y){const i=r,o=this.v0,s=this.v1,a=this.v2;return i.set(Bp(e,o.x,s.x,a.x),Bp(e,o.y,s.y,a.y),Bp(e,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Eue extends ul{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,r=new je){const i=r,o=this.points,s=(o.length-1)*e,a=Math.floor(s),l=s-a,c=o[a===0?a:a-1],u=o[a],d=o[a>o.length-2?o.length-1:a+1],f=o[a>o.length-3?o.length-1:a+2];return i.set(aI(l,c.x,u.x,d.x,f.x),aI(l,c.y,u.y,d.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const o=this.points[r];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(new je().fromArray(o))}return this}}var Tue=Object.freeze({__proto__:null,ArcCurve:fue,CatmullRomCurve3:hue,CubicBezierCurve:bue,CubicBezierCurve3:Wk,EllipseCurve:jk,LineCurve:Sue,LineCurve3:wue,QuadraticBezierCurve:Cue,QuadraticBezierCurve3:uR,SplineCurve:Eue});class w_ extends Bi{constructor(e=1,r=1,i=1,o=32,s=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:i,radialSegments:o,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c};const u=this;o=Math.floor(o),s=Math.floor(s);const d=[],f=[],h=[],p=[];let g=0;const y=[],v=i/2;let m=0;x(),a===!1&&(e>0&&_(!0),r>0&&_(!1)),this.setIndex(d),this.setAttribute("position",new gr(f,3)),this.setAttribute("normal",new gr(h,3)),this.setAttribute("uv",new gr(p,2));function x(){const S=new Y,w=new Y;let C=0;const E=(r-e)/i;for(let T=0;T<=s;T++){const M=[],R=T/s,N=R*(r-e)+e;for(let D=0;D<=o;D++){const L=D/o,A=L*c+l,I=Math.sin(A),P=Math.cos(A);w.x=N*I,w.y=-R*i+v,w.z=N*P,f.push(w.x,w.y,w.z),S.set(I,E,P).normalize(),h.push(S.x,S.y,S.z),p.push(L,1-R),M.push(g++)}y.push(M)}for(let T=0;T<o;T++)for(let M=0;M<s;M++){const R=y[M][T],N=y[M+1][T],D=y[M+1][T+1],L=y[M][T+1];(e>0||M!==0)&&(d.push(R,N,L),C+=3),(r>0||M!==s-1)&&(d.push(N,D,L),C+=3)}u.addGroup(m,C,0),m+=C}function _(S){const w=g,C=new je,E=new Y;let T=0;const M=S===!0?e:r,R=S===!0?1:-1;for(let D=1;D<=o;D++)f.push(0,v*R,0),h.push(0,R,0),p.push(.5,.5),g++;const N=g;for(let D=0;D<=o;D++){const A=D/o*c+l,I=Math.cos(A),P=Math.sin(A);E.x=M*P,E.y=v*R,E.z=M*I,f.push(E.x,E.y,E.z),h.push(0,R,0),C.x=I*.5+.5,C.y=P*.5*R+.5,p.push(C.x,C.y),g++}for(let D=0;D<o;D++){const L=w+D,A=N+D;S===!0?d.push(A,A+1,L):d.push(A+1,A,L),T+=3}u.addGroup(m,T,S===!0?1:2),m+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dR extends w_{constructor(e=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(0,e,r,i,o,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new dR(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class C_ extends Bi{constructor(e=1,r=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:i,heightSegments:o};const s=e/2,a=r/2,l=Math.floor(i),c=Math.floor(o),u=l+1,d=c+1,f=e/l,h=r/c,p=[],g=[],y=[],v=[];for(let m=0;m<d;m++){const x=m*h-a;for(let _=0;_<u;_++){const S=_*f-s;g.push(S,-x,0),y.push(0,0,1),v.push(_/l),v.push(1-m/c)}}for(let m=0;m<c;m++)for(let x=0;x<l;x++){const _=x+u*m,S=x+u*(m+1),w=x+1+u*(m+1),C=x+1+u*m;p.push(_,S,C),p.push(S,w,C)}this.setIndex(p),this.setAttribute("position",new gr(g,3)),this.setAttribute("normal",new gr(y,3)),this.setAttribute("uv",new gr(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C_(e.width,e.height,e.widthSegments,e.heightSegments)}}class fh extends Bi{constructor(e=1,r=32,i=16,o=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:o,phiLength:s,thetaStart:a,thetaLength:l},r=Math.max(3,Math.floor(r)),i=Math.max(2,Math.floor(i));const c=Math.min(a+l,Math.PI);let u=0;const d=[],f=new Y,h=new Y,p=[],g=[],y=[],v=[];for(let m=0;m<=i;m++){const x=[],_=m/i;let S=0;m===0&&a===0?S=.5/r:m===i&&c===Math.PI&&(S=-.5/r);for(let w=0;w<=r;w++){const C=w/r;f.x=-e*Math.cos(o+C*s)*Math.sin(a+_*l),f.y=e*Math.cos(a+_*l),f.z=e*Math.sin(o+C*s)*Math.sin(a+_*l),g.push(f.x,f.y,f.z),h.copy(f).normalize(),y.push(h.x,h.y,h.z),v.push(C+S,1-_),x.push(u++)}d.push(x)}for(let m=0;m<i;m++)for(let x=0;x<r;x++){const _=d[m][x+1],S=d[m][x],w=d[m+1][x],C=d[m+1][x+1];(m!==0||a>0)&&p.push(_,S,C),(m!==i-1||c<Math.PI)&&p.push(S,w,C)}this.setIndex(p),this.setAttribute("position",new gr(g,3)),this.setAttribute("normal",new gr(y,3)),this.setAttribute("uv",new gr(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class fR extends Bi{constructor(e=new uR(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),r=64,i=1,o=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:r,radius:i,radialSegments:o,closed:s};const a=e.computeFrenetFrames(r,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new Y,c=new Y,u=new je;let d=new Y;const f=[],h=[],p=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new gr(f,3)),this.setAttribute("normal",new gr(h,3)),this.setAttribute("uv",new gr(p,2));function y(){for(let _=0;_<r;_++)v(_);v(s===!1?r:0),x(),m()}function v(_){d=e.getPointAt(_/r,d);const S=a.normals[_],w=a.binormals[_];for(let C=0;C<=o;C++){const E=C/o*Math.PI*2,T=Math.sin(E),M=-Math.cos(E);c.x=M*S.x+T*w.x,c.y=M*S.y+T*w.y,c.z=M*S.z+T*w.z,c.normalize(),h.push(c.x,c.y,c.z),l.x=d.x+i*c.x,l.y=d.y+i*c.y,l.z=d.z+i*c.z,f.push(l.x,l.y,l.z)}}function m(){for(let _=1;_<=r;_++)for(let S=1;S<=o;S++){const w=(o+1)*(_-1)+(S-1),C=(o+1)*_+(S-1),E=(o+1)*_+S,T=(o+1)*(_-1)+S;g.push(w,C,T),g.push(C,E,T)}}function x(){for(let _=0;_<=r;_++)for(let S=0;S<=o;S++)u.x=_/r,u.y=S/o,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new fR(new Tue[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Mue extends yi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Mt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qk extends yi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rl,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Mo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rue extends qk{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Mt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Mt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Mt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Aue extends yi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Mt(16777215),this.specular=new Mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rl,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Mo,this.combine=_g,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nue extends yi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rl,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Pue extends yi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rl,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hR extends yi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rl,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Mo,this.combine=_g,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Oue extends yi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ice,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Iue extends yi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Due extends yi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=rl,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lue extends S_{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const lI={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Fue{constructor(e,r,i){const o=this;let s=!1,a=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=i,this.itemStart=function(d){l++,s===!1&&o.onStart!==void 0&&o.onStart(d,a,l),s=!0},this.itemEnd=function(d){a++,o.onProgress!==void 0&&o.onProgress(d,a,l),a===l&&(s=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(d){o.onError!==void 0&&o.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,h=u.length;f<h;f+=2){const p=u[f],g=u[f+1];if(p.global&&(p.lastIndex=0),p.test(d))return g}return null}}}const Uue=new Fue;class pR{constructor(e){this.manager=e!==void 0?e:Uue,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const i=this;return new Promise(function(o,s){i.load(e,o,r,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}pR.DEFAULT_MATERIAL_NAME="__DEFAULT";class Bue extends pR{constructor(e){super(e)}load(e,r,i,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=lI.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){r&&r(a),s.manager.itemEnd(e)},0),a;const l=km("img");function c(){d(),lI.add(e,this),r&&r(this),s.manager.itemEnd(e)}function u(f){d(),o&&o(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class $ue extends pR{constructor(e){super(e)}load(e,r,i,o){const s=new zr,a=new Bue(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,r!==void 0&&r(s)},i,o),s}}class zu extends Er{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Mt(e),this.intensity=r}dispose(){}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(r.object.target=this.target.uuid),r}}class zue extends zu{constructor(e,r,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Mt(r)}copy(e,r){return super.copy(e,r),this.groundColor.copy(e.groundColor),this}}const VS=new fn,cI=new Y,uI=new Y;class mR{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new b_,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,i=this.matrix;cI.setFromMatrixPosition(e.matrixWorld),r.position.copy(cI),uI.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(uI),r.updateMatrixWorld(),VS.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(VS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kue extends mR{constructor(){super(new Ti(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const r=this.camera,i=jf*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,s=e.distance||r.far;(i!==r.fov||o!==r.aspect||s!==r.far)&&(r.fov=i,r.aspect=o,r.far=s,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Xk extends zu{constructor(e,r,i=0,o=Math.PI/3,s=0,a=2){super(e,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.target=new Er,this.distance=i,this.angle=o,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new kue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const dI=new fn,jh=new Y,GS=new Y;class Vue extends mR{constructor(){super(new Ti(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,r=0){const i=this.camera,o=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),jh.setFromMatrixPosition(e.matrixWorld),i.position.copy(jh),GS.copy(i.position),GS.add(this._cubeDirections[r]),i.up.copy(this._cubeUps[r]),i.lookAt(GS),i.updateMatrixWorld(),o.makeTranslation(-jh.x,-jh.y,-jh.z),dI.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dI)}}class Gue extends zu{constructor(e,r,i=0,o=2){super(e,r),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=o,this.shadow=new Vue}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class wg extends kk{constructor(e=-1,r=1,i=1,o=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=i,this.bottom=o,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,i,o,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=o,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let s=i-e,a=i+e,l=o+r,c=o-r;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class Hue extends mR{constructor(){super(new wg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Kk extends zu{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.target=new Er,this.shadow=new Hue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Yk extends zu{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class jue extends zu{constructor(e,r,i=10,o=10){super(e,r),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const r=super.toJSON(e);return r.object.width=this.width,r.object.height=this.height,r}}class Wue{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let r=0;r<9;r++)this.coefficients[r].copy(e[r]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,r){const i=e.x,o=e.y,s=e.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.282095),r.addScaledVector(a[1],.488603*o),r.addScaledVector(a[2],.488603*s),r.addScaledVector(a[3],.488603*i),r.addScaledVector(a[4],1.092548*(i*o)),r.addScaledVector(a[5],1.092548*(o*s)),r.addScaledVector(a[6],.315392*(3*s*s-1)),r.addScaledVector(a[7],1.092548*(i*s)),r.addScaledVector(a[8],.546274*(i*i-o*o)),r}getIrradianceAt(e,r){const i=e.x,o=e.y,s=e.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.886227),r.addScaledVector(a[1],2*.511664*o),r.addScaledVector(a[2],2*.511664*s),r.addScaledVector(a[3],2*.511664*i),r.addScaledVector(a[4],2*.429043*i*o),r.addScaledVector(a[5],2*.429043*o*s),r.addScaledVector(a[6],.743125*s*s-.247708),r.addScaledVector(a[7],2*.429043*i*s),r.addScaledVector(a[8],.429043*(i*i-o*o)),r}add(e){for(let r=0;r<9;r++)this.coefficients[r].add(e.coefficients[r]);return this}addScaledSH(e,r){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],r);return this}scale(e){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(e);return this}lerp(e,r){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],r);return this}equals(e){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(e.coefficients[r]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,r=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].fromArray(e,r+o*3);return this}toArray(e=[],r=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].toArray(e,r+o*3);return e}static getBasisAt(e,r){const i=e.x,o=e.y,s=e.z;r[0]=.282095,r[1]=.488603*o,r[2]=.488603*s,r[3]=.488603*i,r[4]=1.092548*i*o,r[5]=1.092548*o*s,r[6]=.315392*(3*s*s-1),r[7]=1.092548*i*s,r[8]=.546274*(i*i-o*o)}}class que extends zu{constructor(e=new Wue,r=1){super(void 0,r),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const r=super.toJSON(e);return r.object.sh=this.sh.toArray(),r}}class Xue extends Ti{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Qk{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=fI();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}}function fI(){return performance.now()}class Kue extends Hk{constructor(e,r,i=1){super(e,r),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const r=super.clone(e);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(e){const r=super.toJSON(e);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}const hI=new fn;class Zk{constructor(e,r,i=0,o=1/0){this.ray=new x_(e,r),this.near=i,this.far=o,this.camera=null,this.layers=new iR,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}setFromXRController(e){return hI.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(hI),this}intersectObject(e,r=!0,i=[]){return fE(e,this,i,r),i.sort(pI),i}intersectObjects(e,r=!0,i=[]){for(let o=0,s=e.length;o<s;o++)fE(e[o],this,i,r);return i.sort(pI),i}}function pI(n,e){return n.distance-e.distance}function fE(n,e,r,i){let o=!0;if(n.layers.test(e.layers)&&n.raycast(e,r)===!1&&(o=!1),o===!0&&i===!0){const s=n.children;for(let a=0,l=s.length;a<l;a++)fE(s[a],e,r,!0)}}class mI{constructor(e=1,r=0,i=0){return this.radius=e,this.phi=r,this.theta=i,this}set(e,r,i){return this.radius=e,this.phi=r,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,i){return this.radius=Math.sqrt(e*e+r*r+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Jt(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class E_ extends Sc{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function gI(n,e,r,i){const o=Yue(i);switch(r){case WM:return n*e;case qM:return n*e;case XM:return n*e*2;case Sg:return n*e/o.components*o.byteLength;case ah:return n*e/o.components*o.byteLength;case Mu:return n*e*2/o.components*o.byteLength;case lh:return n*e*2/o.components*o.byteLength;case bg:return n*e*3/o.components*o.byteLength;case ni:return n*e*4/o.components*o.byteLength;case ch:return n*e*4/o.components*o.byteLength;case fu:case nc:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case rc:case ic:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Dm:case Fm:return Math.max(n,16)*Math.max(e,8)/4;case Im:case Lm:return Math.max(n,8)*Math.max(e,8)/2;case Um:case Af:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Nf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Pf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Of:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case If:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Df:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Lf:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Ff:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Uf:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Bf:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case $f:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case zf:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case kf:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Vf:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Gf:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Hf:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case hu:case cE:case uE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case KM:case Bm:return Math.ceil(n/4)*Math.ceil(e/4)*8;case $m:case zm:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function Yue(n){switch(n){case mi:case uu:return{byteLength:1,components:1};case Cs:case du:case Qr:return{byteLength:2,components:1};case h_:case p_:return{byteLength:2,components:4};case rr:case Kr:case pr:return{byteLength:4,components:1};case m_:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sh);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Jk(){let n=null,e=!1,r=null,i=null;function o(s,a){r(s,a),i=n.requestAnimationFrame(o)}return{start:function(){e!==!0&&r!==null&&(i=n.requestAnimationFrame(o),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){r=s},setContext:function(s){n=s}}}function Que(n){const e=new WeakMap;function r(l,c){const u=l.array,d=l.usage,f=u.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,u,d),l.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:f}}function i(l,c,u){const d=c.array,f=c.updateRanges;if(n.bindBuffer(u,l),f.length===0)n.bufferSubData(u,0,d);else{f.sort((p,g)=>p.start-g.start);let h=0;for(let p=1;p<f.length;p++){const g=f[h],y=f[p];y.start<=g.start+g.count+1?g.count=Math.max(g.count,y.start+y.count-g.start):(++h,f[h]=y)}f.length=h+1;for(let p=0,g=f.length;p<g;p++){const y=f[p];n.bufferSubData(u,y.start*d.BYTES_PER_ELEMENT,d,y.start,y.count)}c.clearUpdateRanges()}c.onUploadCallback()}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function a(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const u=e.get(l);if(u===void 0)e.set(l,r(l,c));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,l,c),u.version=l.version}}return{get:o,remove:s,update:a}}var Zue=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Jue=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,ede=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,tde=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nde=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,rde=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ide=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ode=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sde=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ade=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,lde=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,cde=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ude=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,dde=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,fde=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,hde=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,pde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,mde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,gde=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,vde=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,yde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,_de=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,bde=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Sde=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wde=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Cde=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ede=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Tde=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Mde=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Rde="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ade=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Nde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pde=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ode=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Ide=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Dde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Lde=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Fde=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Ude=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Bde=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$de=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,zde=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,kde=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Vde=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Gde=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Hde=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,jde=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Wde=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,qde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Xde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Kde=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Yde=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Qde=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Zde=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Jde=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,efe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,tfe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nfe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rfe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,ife=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ofe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sfe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,afe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,lfe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,cfe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ufe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,dfe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ffe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,hfe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,pfe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,mfe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,gfe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,vfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xfe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_fe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,bfe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Sfe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wfe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Cfe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Efe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Tfe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Mfe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Rfe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Afe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Nfe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Pfe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Ofe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ife=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Dfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Lfe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Ffe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Ufe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Bfe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$fe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,zfe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,kfe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Vfe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Gfe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Hfe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jfe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Wfe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,qfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Xfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Kfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Yfe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Qfe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Zfe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ehe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,the=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nhe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rhe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ihe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,ohe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,she=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,ahe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,lhe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,che=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uhe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dhe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fhe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hhe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,phe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mhe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ghe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vhe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yhe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xhe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_he=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bhe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,She=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,whe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Che=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ehe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,The=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Mhe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rhe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ahe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Nhe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tn={alphahash_fragment:Zue,alphahash_pars_fragment:Jue,alphamap_fragment:ede,alphamap_pars_fragment:tde,alphatest_fragment:nde,alphatest_pars_fragment:rde,aomap_fragment:ide,aomap_pars_fragment:ode,batching_pars_vertex:sde,batching_vertex:ade,begin_vertex:lde,beginnormal_vertex:cde,bsdfs:ude,iridescence_fragment:dde,bumpmap_pars_fragment:fde,clipping_planes_fragment:hde,clipping_planes_pars_fragment:pde,clipping_planes_pars_vertex:mde,clipping_planes_vertex:gde,color_fragment:vde,color_pars_fragment:yde,color_pars_vertex:xde,color_vertex:_de,common:bde,cube_uv_reflection_fragment:Sde,defaultnormal_vertex:wde,displacementmap_pars_vertex:Cde,displacementmap_vertex:Ede,emissivemap_fragment:Tde,emissivemap_pars_fragment:Mde,colorspace_fragment:Rde,colorspace_pars_fragment:Ade,envmap_fragment:Nde,envmap_common_pars_fragment:Pde,envmap_pars_fragment:Ode,envmap_pars_vertex:Ide,envmap_physical_pars_fragment:Hde,envmap_vertex:Dde,fog_vertex:Lde,fog_pars_vertex:Fde,fog_fragment:Ude,fog_pars_fragment:Bde,gradientmap_pars_fragment:$de,lightmap_pars_fragment:zde,lights_lambert_fragment:kde,lights_lambert_pars_fragment:Vde,lights_pars_begin:Gde,lights_toon_fragment:jde,lights_toon_pars_fragment:Wde,lights_phong_fragment:qde,lights_phong_pars_fragment:Xde,lights_physical_fragment:Kde,lights_physical_pars_fragment:Yde,lights_fragment_begin:Qde,lights_fragment_maps:Zde,lights_fragment_end:Jde,logdepthbuf_fragment:efe,logdepthbuf_pars_fragment:tfe,logdepthbuf_pars_vertex:nfe,logdepthbuf_vertex:rfe,map_fragment:ife,map_pars_fragment:ofe,map_particle_fragment:sfe,map_particle_pars_fragment:afe,metalnessmap_fragment:lfe,metalnessmap_pars_fragment:cfe,morphinstance_vertex:ufe,morphcolor_vertex:dfe,morphnormal_vertex:ffe,morphtarget_pars_vertex:hfe,morphtarget_vertex:pfe,normal_fragment_begin:mfe,normal_fragment_maps:gfe,normal_pars_fragment:vfe,normal_pars_vertex:yfe,normal_vertex:xfe,normalmap_pars_fragment:_fe,clearcoat_normal_fragment_begin:bfe,clearcoat_normal_fragment_maps:Sfe,clearcoat_pars_fragment:wfe,iridescence_pars_fragment:Cfe,opaque_fragment:Efe,packing:Tfe,premultiplied_alpha_fragment:Mfe,project_vertex:Rfe,dithering_fragment:Afe,dithering_pars_fragment:Nfe,roughnessmap_fragment:Pfe,roughnessmap_pars_fragment:Ofe,shadowmap_pars_fragment:Ife,shadowmap_pars_vertex:Dfe,shadowmap_vertex:Lfe,shadowmask_pars_fragment:Ffe,skinbase_vertex:Ufe,skinning_pars_vertex:Bfe,skinning_vertex:$fe,skinnormal_vertex:zfe,specularmap_fragment:kfe,specularmap_pars_fragment:Vfe,tonemapping_fragment:Gfe,tonemapping_pars_fragment:Hfe,transmission_fragment:jfe,transmission_pars_fragment:Wfe,uv_pars_fragment:qfe,uv_pars_vertex:Xfe,uv_vertex:Kfe,worldpos_vertex:Yfe,background_vert:Qfe,background_frag:Zfe,backgroundCube_vert:Jfe,backgroundCube_frag:ehe,cube_vert:the,cube_frag:nhe,depth_vert:rhe,depth_frag:ihe,distanceRGBA_vert:ohe,distanceRGBA_frag:she,equirect_vert:ahe,equirect_frag:lhe,linedashed_vert:che,linedashed_frag:uhe,meshbasic_vert:dhe,meshbasic_frag:fhe,meshlambert_vert:hhe,meshlambert_frag:phe,meshmatcap_vert:mhe,meshmatcap_frag:ghe,meshnormal_vert:vhe,meshnormal_frag:yhe,meshphong_vert:xhe,meshphong_frag:_he,meshphysical_vert:bhe,meshphysical_frag:She,meshtoon_vert:whe,meshtoon_frag:Che,points_vert:Ehe,points_frag:The,shadow_vert:Mhe,shadow_frag:Rhe,sprite_vert:Ahe,sprite_frag:Nhe},gt={common:{diffuse:{value:new Mt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vt}},envmap:{envMap:{value:null},envMapRotation:{value:new Vt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vt},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new Mt(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}}},Gs={basic:{uniforms:wi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:wi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Mt(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:wi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Mt(0)},specular:{value:new Mt(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:wi([gt.common,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.roughnessmap,gt.metalnessmap,gt.fog,gt.lights,{emissive:{value:new Mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:wi([gt.common,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.gradientmap,gt.fog,gt.lights,{emissive:{value:new Mt(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:wi([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:wi([gt.points,gt.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:wi([gt.common,gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:wi([gt.common,gt.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:wi([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,{opacity:{value:1}}]),vertexShader:tn.meshnormal_vert,fragmentShader:tn.meshnormal_frag},sprite:{uniforms:wi([gt.sprite,gt.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Vt}},vertexShader:tn.backgroundCube_vert,fragmentShader:tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distanceRGBA:{uniforms:wi([gt.common,gt.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distanceRGBA_vert,fragmentShader:tn.distanceRGBA_frag},shadow:{uniforms:wi([gt.lights,gt.fog,{color:{value:new Mt(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};Gs.physical={uniforms:wi([Gs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vt},clearcoatNormalScale:{value:new je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vt},sheen:{value:0},sheenColor:{value:new Mt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vt},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vt},attenuationDistance:{value:0},attenuationColor:{value:new Mt(0)},specularColor:{value:new Mt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vt},anisotropyVector:{value:new je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vt}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};const Bv={r:0,b:0,g:0},Lc=new Mo,Phe=new fn;function Ohe(n,e,r,i,o,s,a){const l=new Mt(0);let c=s===!0?0:1,u,d,f=null,h=0,p=null;function g(_){let S=_.isScene===!0?_.background:null;return S&&S.isTexture&&(S=(_.backgroundBlurriness>0?r:e).get(S)),S}function y(_){let S=!1;const w=g(_);w===null?m(l,c):w&&w.isColor&&(m(w,1),S=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,a):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(_,S){const w=g(S);w&&(w.isCubeTexture||w.mapping===Cu)?(d===void 0&&(d=new $r(new $u(1,1,1),new qi({name:"BackgroundCubeMaterial",uniforms:Wf(Gs.backgroundCube.uniforms),vertexShader:Gs.backgroundCube.vertexShader,fragmentShader:Gs.backgroundCube.fragmentShader,side:er,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(C,E,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(d)),Lc.copy(S.backgroundRotation),Lc.x*=-1,Lc.y*=-1,Lc.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Lc.y*=-1,Lc.z*=-1),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Phe.makeRotationFromEuler(Lc)),d.material.toneMapped=rn.getTransfer(w.colorSpace)!==Mn,(f!==w||h!==w.version||p!==n.toneMapping)&&(d.material.needsUpdate=!0,f=w,h=w.version,p=n.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new $r(new C_(2,2),new qi({name:"BackgroundMaterial",uniforms:Wf(Gs.background.uniforms),vertexShader:Gs.background.vertexShader,fragmentShader:Gs.background.fragmentShader,side:Ps,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=rn.getTransfer(w.colorSpace)!==Mn,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||h!==w.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=w,h=w.version,p=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function m(_,S){_.getRGB(Bv,zk(n)),i.buffers.color.setClear(Bv.r,Bv.g,Bv.b,S,a)}function x(){d!==void 0&&(d.geometry.dispose(),d.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return l},setClearColor:function(_,S=1){l.set(_),c=S,m(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(_){c=_,m(l,c)},render:y,addToRenderList:v,dispose:x}}function Ihe(n,e){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},o=h(null);let s=o,a=!1;function l(R,N,D,L,A){let I=!1;const P=f(L,D,N);s!==P&&(s=P,u(s.object)),I=p(R,L,D,A),I&&g(R,L,D,A),A!==null&&e.update(A,n.ELEMENT_ARRAY_BUFFER),(I||a)&&(a=!1,S(R,N,D,L),A!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(A).buffer))}function c(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function d(R){return n.deleteVertexArray(R)}function f(R,N,D){const L=D.wireframe===!0;let A=i[R.id];A===void 0&&(A={},i[R.id]=A);let I=A[N.id];I===void 0&&(I={},A[N.id]=I);let P=I[L];return P===void 0&&(P=h(c()),I[L]=P),P}function h(R){const N=[],D=[],L=[];for(let A=0;A<r;A++)N[A]=0,D[A]=0,L[A]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:D,attributeDivisors:L,object:R,attributes:{},index:null}}function p(R,N,D,L){const A=s.attributes,I=N.attributes;let P=0;const F=D.getAttributes();for(const O in F)if(F[O].location>=0){const U=A[O];let k=I[O];if(k===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(k=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(k=R.instanceColor)),U===void 0||U.attribute!==k||k&&U.data!==k.data)return!0;P++}return s.attributesNum!==P||s.index!==L}function g(R,N,D,L){const A={},I=N.attributes;let P=0;const F=D.getAttributes();for(const O in F)if(F[O].location>=0){let U=I[O];U===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(U=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(U=R.instanceColor));const k={};k.attribute=U,U&&U.data&&(k.data=U.data),A[O]=k,P++}s.attributes=A,s.attributesNum=P,s.index=L}function y(){const R=s.newAttributes;for(let N=0,D=R.length;N<D;N++)R[N]=0}function v(R){m(R,0)}function m(R,N){const D=s.newAttributes,L=s.enabledAttributes,A=s.attributeDivisors;D[R]=1,L[R]===0&&(n.enableVertexAttribArray(R),L[R]=1),A[R]!==N&&(n.vertexAttribDivisor(R,N),A[R]=N)}function x(){const R=s.newAttributes,N=s.enabledAttributes;for(let D=0,L=N.length;D<L;D++)N[D]!==R[D]&&(n.disableVertexAttribArray(D),N[D]=0)}function _(R,N,D,L,A,I,P){P===!0?n.vertexAttribIPointer(R,N,D,A,I):n.vertexAttribPointer(R,N,D,L,A,I)}function S(R,N,D,L){y();const A=L.attributes,I=D.getAttributes(),P=N.defaultAttributeValues;for(const F in I){const O=I[F];if(O.location>=0){let V=A[F];if(V===void 0&&(F==="instanceMatrix"&&R.instanceMatrix&&(V=R.instanceMatrix),F==="instanceColor"&&R.instanceColor&&(V=R.instanceColor)),V!==void 0){const U=V.normalized,k=V.itemSize,W=e.get(V);if(W===void 0)continue;const J=W.buffer,z=W.type,j=W.bytesPerElement,X=z===n.INT||z===n.UNSIGNED_INT||V.gpuType===Kr;if(V.isInterleavedBufferAttribute){const Q=V.data,ne=Q.stride,ye=V.offset;if(Q.isInstancedInterleavedBuffer){for(let me=0;me<O.locationSize;me++)m(O.location+me,Q.meshPerAttribute);R.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let me=0;me<O.locationSize;me++)v(O.location+me);n.bindBuffer(n.ARRAY_BUFFER,J);for(let me=0;me<O.locationSize;me++)_(O.location+me,k/O.locationSize,z,U,ne*j,(ye+k/O.locationSize*me)*j,X)}else{if(V.isInstancedBufferAttribute){for(let Q=0;Q<O.locationSize;Q++)m(O.location+Q,V.meshPerAttribute);R.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let Q=0;Q<O.locationSize;Q++)v(O.location+Q);n.bindBuffer(n.ARRAY_BUFFER,J);for(let Q=0;Q<O.locationSize;Q++)_(O.location+Q,k/O.locationSize,z,U,k*j,k/O.locationSize*Q*j,X)}}else if(P!==void 0){const U=P[F];if(U!==void 0)switch(U.length){case 2:n.vertexAttrib2fv(O.location,U);break;case 3:n.vertexAttrib3fv(O.location,U);break;case 4:n.vertexAttrib4fv(O.location,U);break;default:n.vertexAttrib1fv(O.location,U)}}}}x()}function w(){T();for(const R in i){const N=i[R];for(const D in N){const L=N[D];for(const A in L)d(L[A].object),delete L[A];delete N[D]}delete i[R]}}function C(R){if(i[R.id]===void 0)return;const N=i[R.id];for(const D in N){const L=N[D];for(const A in L)d(L[A].object),delete L[A];delete N[D]}delete i[R.id]}function E(R){for(const N in i){const D=i[N];if(D[R.id]===void 0)continue;const L=D[R.id];for(const A in L)d(L[A].object),delete L[A];delete D[R.id]}}function T(){M(),a=!0,s!==o&&(s=o,u(s.object))}function M(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:l,reset:T,resetDefaultState:M,dispose:w,releaseStatesOfGeometry:C,releaseStatesOfProgram:E,initAttributes:y,enableAttribute:v,disableUnusedAttributes:x}}function Dhe(n,e,r){let i;function o(u){i=u}function s(u,d){n.drawArrays(i,u,d),r.update(d,i,1)}function a(u,d,f){f!==0&&(n.drawArraysInstanced(i,u,d,f),r.update(d,i,f))}function l(u,d,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,d,0,f);let p=0;for(let g=0;g<f;g++)p+=d[g];r.update(p,i,1)}function c(u,d,f,h){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)a(u[g],d[g],h[g]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,d,0,h,0,f);let g=0;for(let y=0;y<f;y++)g+=d[y]*h[y];r.update(g,i,1)}}this.setMode=o,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Lhe(n,e,r,i){let o;function s(){if(o!==void 0)return o;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");o=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function a(E){return!(E!==ni&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(E){const T=E===Qr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==mi&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==pr&&!T)}function c(E){if(E==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=r.precision!==void 0?r.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const f=r.logarithmicDepthBuffer===!0,h=r.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=g>0,C=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:v,maxAttributes:m,maxVertexUniforms:x,maxVaryings:_,maxFragmentUniforms:S,vertexTextures:w,maxSamples:C}}function Fhe(n){const e=this;let r=null,i=0,o=!1,s=!1;const a=new vs,l=new Vt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||i!==0||o;return o=h,i=f.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){r=d(f,h,0)},this.setState=function(f,h,p){const g=f.clippingPlanes,y=f.clipIntersection,v=f.clipShadows,m=n.get(f);if(!o||g===null||g.length===0||s&&!v)s?d(null):u();else{const x=s?0:i,_=x*4;let S=m.clippingState||null;c.value=S,S=d(g,h,_,p);for(let w=0;w!==_;++w)S[w]=r[w];m.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function u(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(f,h,p,g){const y=f!==null?f.length:0;let v=null;if(y!==0){if(v=c.value,g!==!0||v===null){const m=p+y*4,x=h.matrixWorldInverse;l.getNormalMatrix(x),(v===null||v.length<m)&&(v=new Float32Array(m));for(let _=0,S=p;_!==y;++_,S+=4)a.copy(f[_]).applyMatrix4(x,l),a.normal.toArray(v,S),v[S+3]=a.constant}c.value=v,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,v}}function Uhe(n){let e=new WeakMap;function r(a,l){return l===fc?a.mapping=Jo:l===hc&&(a.mapping=es),a}function i(a){if(a&&a.isTexture){const l=a.mapping;if(l===fc||l===hc)if(e.has(a)){const c=e.get(a).texture;return r(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new Gk(c.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",o),r(u.texture,a.mapping)}else return null}}return a}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const $d=4,vI=[.125,.215,.35,.446,.526,.582],Xc=20,HS=new wg,yI=new Mt;let jS=null,WS=0,qS=0,XS=!1;const kc=(1+Math.sqrt(5))/2,md=1/kc,xI=[new Y(-kc,md,0),new Y(kc,md,0),new Y(-md,0,kc),new Y(md,0,kc),new Y(0,kc,-md),new Y(0,kc,md),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)];let _I=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,i=.1,o=100){jS=this._renderer.getRenderTarget(),WS=this._renderer.getActiveCubeFace(),qS=this._renderer.getActiveMipmapLevel(),XS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,o,s),r>0&&this._blur(s,0,0,r),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=SI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jS,WS,qS),this._renderer.xr.enabled=XS,e.scissorTest=!1,$v(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===Jo||e.mapping===es?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jS=this._renderer.getRenderTarget(),WS=this._renderer.getActiveCubeFace(),qS=this._renderer.getActiveMipmapLevel(),XS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Br,minFilter:Br,generateMipmaps:!1,type:Qr,format:ni,colorSpace:Xo,depthBuffer:!1},o=bI(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bI(e,r,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Bhe(s)),this._blurMaterial=$he(s,e,r)}return o}_compileMaterial(e){const r=new $r(this._lodPlanes[0],e);this._renderer.compile(r,HS)}_sceneToCubeUV(e,r,i,o){const l=new Ti(90,1,r,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,h=d.toneMapping;d.getClearColor(yI),d.toneMapping=to,d.autoClear=!1;const p=new dh({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1}),g=new $r(new $u,p);let y=!1;const v=e.background;v?v.isColor&&(p.color.copy(v),e.background=null,y=!0):(p.color.copy(yI),y=!0);for(let m=0;m<6;m++){const x=m%3;x===0?(l.up.set(0,c[m],0),l.lookAt(u[m],0,0)):x===1?(l.up.set(0,0,c[m]),l.lookAt(0,u[m],0)):(l.up.set(0,c[m],0),l.lookAt(0,0,u[m]));const _=this._cubeSize;$v(o,x*_,m>2?_:0,_,_),d.setRenderTarget(o),y&&d.render(g,l),d.render(e,l)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=h,d.autoClear=f,e.background=v}_textureToCubeUV(e,r){const i=this._renderer,o=e.mapping===Jo||e.mapping===es;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=wI()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=SI());const s=o?this._cubemapMaterial:this._equirectMaterial,a=new $r(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;$v(r,0,0,3*c,2*c),i.setRenderTarget(r),i.render(a,HS)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const o=this._lodPlanes.length;for(let s=1;s<o;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=xI[(o-s-1)%xI.length];this._blur(e,s-1,s,a,l)}r.autoClear=i}_blur(e,r,i,o,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,r,i,o,"latitudinal",s),this._halfBlur(a,e,i,i,o,"longitudinal",s)}_halfBlur(e,r,i,o,s,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new $r(this._lodPlanes[o],u),h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Xc-1),y=s/g,v=isFinite(s)?1+Math.floor(d*y):Xc;v>Xc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Xc}`);const m=[];let x=0;for(let E=0;E<Xc;++E){const T=E/y,M=Math.exp(-T*T/2);m.push(M),E===0?x+=M:E<v&&(x+=2*M)}for(let E=0;E<m.length;E++)m[E]=m[E]/x;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=m,h.latitudinal.value=a==="latitudinal",l&&(h.poleAxis.value=l);const{_lodMax:_}=this;h.dTheta.value=g,h.mipInt.value=_-i;const S=this._sizeLods[o],w=3*S*(o>_-$d?o-_+$d:0),C=4*(this._cubeSize-S);$v(r,w,C,3*S,2*S),c.setRenderTarget(r),c.render(f,HS)}};function Bhe(n){const e=[],r=[],i=[];let o=n;const s=n-$d+1+vI.length;for(let a=0;a<s;a++){const l=Math.pow(2,o);r.push(l);let c=1/l;a>n-$d?c=vI[a-n+$d-1]:a===0&&(c=0),i.push(c);const u=1/(l-2),d=-u,f=1+u,h=[d,d,f,d,f,f,d,d,f,f,d,f],p=6,g=6,y=3,v=2,m=1,x=new Float32Array(y*g*p),_=new Float32Array(v*g*p),S=new Float32Array(m*g*p);for(let C=0;C<p;C++){const E=C%3*2/3-1,T=C>2?0:-1,M=[E,T,0,E+2/3,T,0,E+2/3,T+1,0,E,T,0,E+2/3,T+1,0,E,T+1,0];x.set(M,y*g*C),_.set(h,v*g*C);const R=[C,C,C,C,C,C];S.set(R,m*g*C)}const w=new Bi;w.setAttribute("position",new ii(x,y)),w.setAttribute("uv",new ii(_,v)),w.setAttribute("faceIndex",new ii(S,m)),e.push(w),o>$d&&o--}return{lodPlanes:e,sizeLods:r,sigmas:i}}function bI(n,e,r){const i=new As(n,e,r);return i.texture.mapping=Cu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function $v(n,e,r,i,o){n.viewport.set(e,r,i,o),n.scissor.set(e,r,i,o)}function $he(n,e,r){const i=new Float32Array(Xc),o=new Y(0,1,0);return new qi({name:"SphericalGaussianBlur",defines:{n:Xc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:gR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Pi,depthTest:!1,depthWrite:!1})}function SI(){return new qi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:gR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Pi,depthTest:!1,depthWrite:!1})}function wI(){return new qi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:gR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Pi,depthTest:!1,depthWrite:!1})}function gR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zhe(n){let e=new WeakMap,r=null;function i(l){if(l&&l.isTexture){const c=l.mapping,u=c===fc||c===hc,d=c===Jo||c===es;if(u||d){let f=e.get(l);const h=f!==void 0?f.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==h)return r===null&&(r=new _I(n)),f=u?r.fromEquirectangular(l,f):r.fromCubemap(l,f),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),f.texture;if(f!==void 0)return f.texture;{const p=l.image;return u&&p&&p.height>0||d&&p&&o(p)?(r===null&&(r=new _I(n)),f=u?r.fromEquirectangular(l):r.fromCubemap(l),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),l.addEventListener("dispose",s),f.texture):null}}}return l}function o(l){let c=0;const u=6;for(let d=0;d<u;d++)l[d]!==void 0&&c++;return c===u}function s(l){const c=l.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:a}}function khe(n){const e={};function r(i){if(e[i]!==void 0)return e[i];let o;switch(i){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(i)}return e[i]=o,o}return{has:function(i){return r(i)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(i){const o=r(i);return o===null&&qc("THREE.WebGLRenderer: "+i+" extension not supported."),o}}}function Vhe(n,e,r,i){const o={},s=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",a),delete o[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function l(f,h){return o[h.id]===!0||(h.addEventListener("dispose",a),o[h.id]=!0,r.memory.geometries++),h}function c(f){const h=f.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function u(f){const h=[],p=f.index,g=f.attributes.position;let y=0;if(p!==null){const x=p.array;y=p.version;for(let _=0,S=x.length;_<S;_+=3){const w=x[_+0],C=x[_+1],E=x[_+2];h.push(w,C,C,E,E,w)}}else if(g!==void 0){const x=g.array;y=g.version;for(let _=0,S=x.length/3-1;_<S;_+=3){const w=_+0,C=_+1,E=_+2;h.push(w,C,C,E,E,w)}}else return;const v=new(Lk(h)?sR:oR)(h,1);v.version=y;const m=s.get(f);m&&e.remove(m),s.set(f,v)}function d(f){const h=s.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&u(f)}else u(f);return s.get(f)}return{get:l,update:c,getWireframeAttribute:d}}function Ghe(n,e,r){let i;function o(h){i=h}let s,a;function l(h){s=h.type,a=h.bytesPerElement}function c(h,p){n.drawElements(i,p,s,h*a),r.update(p,i,1)}function u(h,p,g){g!==0&&(n.drawElementsInstanced(i,p,s,h*a,g),r.update(p,i,g))}function d(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,h,0,g);let v=0;for(let m=0;m<g;m++)v+=p[m];r.update(v,i,1)}function f(h,p,g,y){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let m=0;m<h.length;m++)u(h[m]/a,p[m],y[m]);else{v.multiDrawElementsInstancedWEBGL(i,p,0,s,h,0,y,0,g);let m=0;for(let x=0;x<g;x++)m+=p[x]*y[x];r.update(m,i,1)}}this.setMode=o,this.setIndex=l,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function Hhe(n){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,l){switch(r.calls++,a){case n.TRIANGLES:r.triangles+=l*(s/3);break;case n.LINES:r.lines+=l*(s/2);break;case n.LINE_STRIP:r.lines+=l*(s-1);break;case n.LINE_LOOP:r.lines+=l*s;break;case n.POINTS:r.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function o(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:o,update:i}}function jhe(n,e,r){const i=new WeakMap,o=new qt;function s(a,l,c){const u=a.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=d!==void 0?d.length:0;let h=i.get(l);if(h===void 0||h.count!==f){let R=function(){T.dispose(),i.delete(l),l.removeEventListener("dispose",R)};var p=R;h!==void 0&&h.texture.dispose();const g=l.morphAttributes.position!==void 0,y=l.morphAttributes.normal!==void 0,v=l.morphAttributes.color!==void 0,m=l.morphAttributes.position||[],x=l.morphAttributes.normal||[],_=l.morphAttributes.color||[];let S=0;g===!0&&(S=1),y===!0&&(S=2),v===!0&&(S=3);let w=l.attributes.position.count*S,C=1;w>e.maxTextureSize&&(C=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const E=new Float32Array(w*C*4*f),T=new rR(E,w,C,f);T.type=pr,T.needsUpdate=!0;const M=S*4;for(let N=0;N<f;N++){const D=m[N],L=x[N],A=_[N],I=w*C*4*N;for(let P=0;P<D.count;P++){const F=P*M;g===!0&&(o.fromBufferAttribute(D,P),E[I+F+0]=o.x,E[I+F+1]=o.y,E[I+F+2]=o.z,E[I+F+3]=0),y===!0&&(o.fromBufferAttribute(L,P),E[I+F+4]=o.x,E[I+F+5]=o.y,E[I+F+6]=o.z,E[I+F+7]=0),v===!0&&(o.fromBufferAttribute(A,P),E[I+F+8]=o.x,E[I+F+9]=o.y,E[I+F+10]=o.z,E[I+F+11]=A.itemSize===4?o.w:1)}}h={count:f,texture:T,size:new je(w,C)},i.set(l,h),l.addEventListener("dispose",R)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",a.morphTexture,r);else{let g=0;for(let v=0;v<u.length;v++)g+=u[v];const y=l.morphTargetsRelative?1:1-g;c.getUniforms().setValue(n,"morphTargetBaseInfluence",y),c.getUniforms().setValue(n,"morphTargetInfluences",u)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,r),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function Whe(n,e,r,i){let o=new WeakMap;function s(c){const u=i.render.frame,d=c.geometry,f=e.get(c,d);if(o.get(f)!==u&&(e.update(f),o.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),o.get(c)!==u&&(r.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&r.update(c.instanceColor,n.ARRAY_BUFFER),o.set(c,u))),c.isSkinnedMesh){const h=c.skeleton;o.get(h)!==u&&(h.update(),o.set(h,u))}return f}function a(){o=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:s,dispose:a}}const e4=new zr,CI=new wc(1,1),t4=new rR,n4=new Gce,r4=new __,EI=[],TI=[],MI=new Float32Array(16),RI=new Float32Array(9),AI=new Float32Array(4);function hh(n,e,r){const i=n[0];if(i<=0||i>0)return n;const o=e*r;let s=EI[o];if(s===void 0&&(s=new Float32Array(o),EI[o]=s),e!==0){i.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=r,n[a].toArray(s,l)}return s}function Vr(n,e){if(n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(n[r]!==e[r])return!1;return!0}function Gr(n,e){for(let r=0,i=e.length;r<i;r++)n[r]=e[r]}function T_(n,e){let r=TI[e];r===void 0&&(r=new Int32Array(e),TI[e]=r);for(let i=0;i!==e;++i)r[i]=n.allocateTextureUnit();return r}function qhe(n,e){const r=this.cache;r[0]!==e&&(n.uniform1f(this.addr,e),r[0]=e)}function Xhe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Vr(r,e))return;n.uniform2fv(this.addr,e),Gr(r,e)}}function Khe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(Vr(r,e))return;n.uniform3fv(this.addr,e),Gr(r,e)}}function Yhe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Vr(r,e))return;n.uniform4fv(this.addr,e),Gr(r,e)}}function Qhe(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(Vr(r,e))return;n.uniformMatrix2fv(this.addr,!1,e),Gr(r,e)}else{if(Vr(r,i))return;AI.set(i),n.uniformMatrix2fv(this.addr,!1,AI),Gr(r,i)}}function Zhe(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(Vr(r,e))return;n.uniformMatrix3fv(this.addr,!1,e),Gr(r,e)}else{if(Vr(r,i))return;RI.set(i),n.uniformMatrix3fv(this.addr,!1,RI),Gr(r,i)}}function Jhe(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(Vr(r,e))return;n.uniformMatrix4fv(this.addr,!1,e),Gr(r,e)}else{if(Vr(r,i))return;MI.set(i),n.uniformMatrix4fv(this.addr,!1,MI),Gr(r,i)}}function epe(n,e){const r=this.cache;r[0]!==e&&(n.uniform1i(this.addr,e),r[0]=e)}function tpe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Vr(r,e))return;n.uniform2iv(this.addr,e),Gr(r,e)}}function npe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Vr(r,e))return;n.uniform3iv(this.addr,e),Gr(r,e)}}function rpe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Vr(r,e))return;n.uniform4iv(this.addr,e),Gr(r,e)}}function ipe(n,e){const r=this.cache;r[0]!==e&&(n.uniform1ui(this.addr,e),r[0]=e)}function ope(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Vr(r,e))return;n.uniform2uiv(this.addr,e),Gr(r,e)}}function spe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Vr(r,e))return;n.uniform3uiv(this.addr,e),Gr(r,e)}}function ape(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Vr(r,e))return;n.uniform4uiv(this.addr,e),Gr(r,e)}}function lpe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o);let s;this.type===n.SAMPLER_2D_SHADOW?(CI.compareFunction=v_,s=CI):s=e4,r.setTexture2D(e||s,o)}function cpe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTexture3D(e||n4,o)}function upe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTextureCube(e||r4,o)}function dpe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTexture2DArray(e||t4,o)}function fpe(n){switch(n){case 5126:return qhe;case 35664:return Xhe;case 35665:return Khe;case 35666:return Yhe;case 35674:return Qhe;case 35675:return Zhe;case 35676:return Jhe;case 5124:case 35670:return epe;case 35667:case 35671:return tpe;case 35668:case 35672:return npe;case 35669:case 35673:return rpe;case 5125:return ipe;case 36294:return ope;case 36295:return spe;case 36296:return ape;case 35678:case 36198:case 36298:case 36306:case 35682:return lpe;case 35679:case 36299:case 36307:return cpe;case 35680:case 36300:case 36308:case 36293:return upe;case 36289:case 36303:case 36311:case 36292:return dpe}}function hpe(n,e){n.uniform1fv(this.addr,e)}function ppe(n,e){const r=hh(e,this.size,2);n.uniform2fv(this.addr,r)}function mpe(n,e){const r=hh(e,this.size,3);n.uniform3fv(this.addr,r)}function gpe(n,e){const r=hh(e,this.size,4);n.uniform4fv(this.addr,r)}function vpe(n,e){const r=hh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,r)}function ype(n,e){const r=hh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,r)}function xpe(n,e){const r=hh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,r)}function _pe(n,e){n.uniform1iv(this.addr,e)}function bpe(n,e){n.uniform2iv(this.addr,e)}function Spe(n,e){n.uniform3iv(this.addr,e)}function wpe(n,e){n.uniform4iv(this.addr,e)}function Cpe(n,e){n.uniform1uiv(this.addr,e)}function Epe(n,e){n.uniform2uiv(this.addr,e)}function Tpe(n,e){n.uniform3uiv(this.addr,e)}function Mpe(n,e){n.uniform4uiv(this.addr,e)}function Rpe(n,e,r){const i=this.cache,o=e.length,s=T_(r,o);Vr(i,s)||(n.uniform1iv(this.addr,s),Gr(i,s));for(let a=0;a!==o;++a)r.setTexture2D(e[a]||e4,s[a])}function Ape(n,e,r){const i=this.cache,o=e.length,s=T_(r,o);Vr(i,s)||(n.uniform1iv(this.addr,s),Gr(i,s));for(let a=0;a!==o;++a)r.setTexture3D(e[a]||n4,s[a])}function Npe(n,e,r){const i=this.cache,o=e.length,s=T_(r,o);Vr(i,s)||(n.uniform1iv(this.addr,s),Gr(i,s));for(let a=0;a!==o;++a)r.setTextureCube(e[a]||r4,s[a])}function Ppe(n,e,r){const i=this.cache,o=e.length,s=T_(r,o);Vr(i,s)||(n.uniform1iv(this.addr,s),Gr(i,s));for(let a=0;a!==o;++a)r.setTexture2DArray(e[a]||t4,s[a])}function Ope(n){switch(n){case 5126:return hpe;case 35664:return ppe;case 35665:return mpe;case 35666:return gpe;case 35674:return vpe;case 35675:return ype;case 35676:return xpe;case 5124:case 35670:return _pe;case 35667:case 35671:return bpe;case 35668:case 35672:return Spe;case 35669:case 35673:return wpe;case 5125:return Cpe;case 36294:return Epe;case 36295:return Tpe;case 36296:return Mpe;case 35678:case 36198:case 36298:case 36306:case 35682:return Rpe;case 35679:case 36299:case 36307:return Ape;case 35680:case 36300:case 36308:case 36293:return Npe;case 36289:case 36303:case 36311:case 36292:return Ppe}}class Ipe{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.setValue=fpe(r.type)}}class Dpe{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=Ope(r.type)}}class Lpe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,i){const o=this.seq;for(let s=0,a=o.length;s!==a;++s){const l=o[s];l.setValue(e,r[l.id],i)}}}const KS=/(\w+)(\])?(\[|\.)?/g;function NI(n,e){n.seq.push(e),n.map[e.id]=e}function Fpe(n,e,r){const i=n.name,o=i.length;for(KS.lastIndex=0;;){const s=KS.exec(i),a=KS.lastIndex;let l=s[1];const c=s[2]==="]",u=s[3];if(c&&(l=l|0),u===void 0||u==="["&&a+2===o){NI(r,u===void 0?new Ipe(l,n,e):new Dpe(l,n,e));break}else{let f=r.map[l];f===void 0&&(f=new Lpe(l),NI(r,f)),r=f}}}class L0{constructor(e,r){this.seq=[],this.map={};const i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const s=e.getActiveUniform(r,o),a=e.getUniformLocation(r,s.name);Fpe(s,a,this)}}setValue(e,r,i,o){const s=this.map[r];s!==void 0&&s.setValue(e,i,o)}setOptional(e,r,i){const o=r[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,r,i,o){for(let s=0,a=r.length;s!==a;++s){const l=r[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,o)}}static seqWithValue(e,r){const i=[];for(let o=0,s=e.length;o!==s;++o){const a=e[o];a.id in r&&i.push(a)}return i}}function PI(n,e,r){const i=n.createShader(e);return n.shaderSource(i,r),n.compileShader(i),i}const Upe=37297;let Bpe=0;function $pe(n,e){const r=n.split(`
`),i=[],o=Math.max(e-6,0),s=Math.min(e+6,r.length);for(let a=o;a<s;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${r[a]}`)}return i.join(`
`)}const OI=new Vt;function zpe(n){rn._getMatrix(OI,rn.workingColorSpace,n);const e=`mat3( ${OI.elements.map(r=>r.toFixed(4))} )`;switch(rn.getTransfer(n)){case ky:return[e,"LinearTransferOETF"];case Mn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function II(n,e,r){const i=n.getShaderParameter(e,n.COMPILE_STATUS),o=n.getShaderInfoLog(e).trim();if(i&&o==="")return"";const s=/ERROR: 0:(\d+)/.exec(o);if(s){const a=parseInt(s[1]);return r.toUpperCase()+`

`+o+`

`+$pe(n.getShaderSource(e),a)}else return o}function kpe(n,e){const r=zpe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}function Vpe(n,e){let r;switch(e){case Rk:r="Linear";break;case Ak:r="Reinhard";break;case Nk:r="Cineon";break;case Pk:r="ACESFilmic";break;case Ok:r="AgX";break;case Ik:r="Neutral";break;case nce:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+n+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const zv=new Y;function Gpe(){rn.getLuminanceCoefficients(zv);const n=zv.x.toFixed(4),e=zv.y.toFixed(4),r=zv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Hpe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(gp).join(`
`)}function jpe(n){const e=[];for(const r in n){const i=n[r];i!==!1&&e.push("#define "+r+" "+i)}return e.join(`
`)}function Wpe(n,e){const r={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const s=n.getActiveAttrib(e,o),a=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),r[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:l}}return r}function gp(n){return n!==""}function DI(n,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function LI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const qpe=/^[ \t]*#include +<([\w\d./]+)>/gm;function hE(n){return n.replace(qpe,Kpe)}const Xpe=new Map;function Kpe(n,e){let r=tn[e];if(r===void 0){const i=Xpe.get(e);if(i!==void 0)r=tn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return hE(r)}const Ype=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function FI(n){return n.replace(Ype,Qpe)}function Qpe(n,e,r,i){let o="";for(let s=parseInt(e);s<parseInt(r);s++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return o}function UI(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Zpe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===OM?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Qle?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===yo&&(e="SHADOWMAP_TYPE_VSM"),e}function Jpe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Jo:case es:e="ENVMAP_TYPE_CUBE";break;case Cu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function eme(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case es:e="ENVMAP_MODE_REFRACTION";break}return e}function tme(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case _g:e="ENVMAP_BLENDING_MULTIPLY";break;case Tk:e="ENVMAP_BLENDING_MIX";break;case Mk:e="ENVMAP_BLENDING_ADD";break}return e}function nme(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function rme(n,e,r,i){const o=n.getContext(),s=r.defines;let a=r.vertexShader,l=r.fragmentShader;const c=Zpe(r),u=Jpe(r),d=eme(r),f=tme(r),h=nme(r),p=Hpe(r),g=jpe(s),y=o.createProgram();let v,m,x=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(v=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(gp).join(`
`),v.length>0&&(v+=`
`),m=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(gp).join(`
`),m.length>0&&(m+=`
`)):(v=[UI(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gp).join(`
`),m=[UI(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==to?"#define TONE_MAPPING":"",r.toneMapping!==to?tn.tonemapping_pars_fragment:"",r.toneMapping!==to?Vpe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",tn.colorspace_pars_fragment,kpe("linearToOutputTexel",r.outputColorSpace),Gpe(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(gp).join(`
`)),a=hE(a),a=DI(a,r),a=LI(a,r),l=hE(l),l=DI(l,r),l=LI(l,r),a=FI(a),l=FI(l),r.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,v=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=["#define varying in",r.glslVersion===zO?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===zO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const _=x+v+a,S=x+m+l,w=PI(o,o.VERTEX_SHADER,_),C=PI(o,o.FRAGMENT_SHADER,S);o.attachShader(y,w),o.attachShader(y,C),r.index0AttributeName!==void 0?o.bindAttribLocation(y,0,r.index0AttributeName):r.morphTargets===!0&&o.bindAttribLocation(y,0,"position"),o.linkProgram(y);function E(N){if(n.debug.checkShaderErrors){const D=o.getProgramInfoLog(y).trim(),L=o.getShaderInfoLog(w).trim(),A=o.getShaderInfoLog(C).trim();let I=!0,P=!0;if(o.getProgramParameter(y,o.LINK_STATUS)===!1)if(I=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(o,y,w,C);else{const F=II(o,w,"vertex"),O=II(o,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(y,o.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+D+`
`+F+`
`+O)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(L===""||A==="")&&(P=!1);P&&(N.diagnostics={runnable:I,programLog:D,vertexShader:{log:L,prefix:v},fragmentShader:{log:A,prefix:m}})}o.deleteShader(w),o.deleteShader(C),T=new L0(o,y),M=Wpe(o,y)}let T;this.getUniforms=function(){return T===void 0&&E(this),T};let M;this.getAttributes=function(){return M===void 0&&E(this),M};let R=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=o.getProgramParameter(y,Upe)),R},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(y),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Bpe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=C,this}let ime=0;class ome{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(r),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(o)===!1&&(a.add(o),o.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const i of r)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let i=r.get(e);return i===void 0&&(i=new Set,r.set(e,i)),i}_getShaderStage(e){const r=this.shaderCache;let i=r.get(e);return i===void 0&&(i=new sme(e),r.set(e,i)),i}}class sme{constructor(e){this.id=ime++,this.code=e,this.usedTimes=0}}function ame(n,e,r,i,o,s,a){const l=new iR,c=new ome,u=new Set,d=[],f=o.logarithmicDepthBuffer,h=o.vertexTextures;let p=o.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(M){return u.add(M),M===0?"uv":`uv${M}`}function v(M,R,N,D,L){const A=D.fog,I=L.geometry,P=M.isMeshStandardMaterial?D.environment:null,F=(M.isMeshStandardMaterial?r:e).get(M.envMap||P),O=F&&F.mapping===Cu?F.image.height:null,V=g[M.type];M.precision!==null&&(p=o.getMaxPrecision(M.precision),p!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",p,"instead."));const U=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,k=U!==void 0?U.length:0;let W=0;I.morphAttributes.position!==void 0&&(W=1),I.morphAttributes.normal!==void 0&&(W=2),I.morphAttributes.color!==void 0&&(W=3);let J,z,j,X;if(V){const Xe=Gs[V];J=Xe.vertexShader,z=Xe.fragmentShader}else J=M.vertexShader,z=M.fragmentShader,c.update(M),j=c.getVertexShaderID(M),X=c.getFragmentShaderID(M);const Q=n.getRenderTarget(),ne=n.state.buffers.depth.getReversed(),ye=L.isInstancedMesh===!0,me=L.isBatchedMesh===!0,fe=!!M.map,le=!!M.matcap,ge=!!F,q=!!M.aoMap,ve=!!M.lightMap,be=!!M.bumpMap,xe=!!M.normalMap,we=!!M.displacementMap,qe=!!M.emissiveMap,Fe=!!M.metalnessMap,H=!!M.roughnessMap,B=M.anisotropy>0,K=M.clearcoat>0,oe=M.dispersion>0,pe=M.iridescence>0,ce=M.sheen>0,Ue=M.transmission>0,Re=B&&!!M.anisotropyMap,Le=K&&!!M.clearcoatMap,Je=K&&!!M.clearcoatNormalMap,Me=K&&!!M.clearcoatRoughnessMap,ze=pe&&!!M.iridescenceMap,Ee=pe&&!!M.iridescenceThicknessMap,Pe=ce&&!!M.sheenColorMap,ke=ce&&!!M.sheenRoughnessMap,Ve=!!M.specularMap,$e=!!M.specularColorMap,xt=!!M.specularIntensityMap,te=Ue&&!!M.transmissionMap,Qe=Ue&&!!M.thicknessMap,Se=!!M.gradientMap,Oe=!!M.alphaMap,Ze=M.alphaTest>0,We=!!M.alphaHash,wt=!!M.extensions;let At=to;M.toneMapped&&(Q===null||Q.isXRRenderTarget===!0)&&(At=n.toneMapping);const dt={shaderID:V,shaderType:M.type,shaderName:M.name,vertexShader:J,fragmentShader:z,defines:M.defines,customVertexShaderID:j,customFragmentShaderID:X,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:p,batching:me,batchingColor:me&&L._colorsTexture!==null,instancing:ye,instancingColor:ye&&L.instanceColor!==null,instancingMorph:ye&&L.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:Q===null?n.outputColorSpace:Q.isXRRenderTarget===!0?Q.texture.colorSpace:Xo,alphaToCoverage:!!M.alphaToCoverage,map:fe,matcap:le,envMap:ge,envMapMode:ge&&F.mapping,envMapCubeUVHeight:O,aoMap:q,lightMap:ve,bumpMap:be,normalMap:xe,displacementMap:h&&we,emissiveMap:qe,normalMapObjectSpace:xe&&M.normalMapType===Dk,normalMapTangentSpace:xe&&M.normalMapType===rl,metalnessMap:Fe,roughnessMap:H,anisotropy:B,anisotropyMap:Re,clearcoat:K,clearcoatMap:Le,clearcoatNormalMap:Je,clearcoatRoughnessMap:Me,dispersion:oe,iridescence:pe,iridescenceMap:ze,iridescenceThicknessMap:Ee,sheen:ce,sheenColorMap:Pe,sheenRoughnessMap:ke,specularMap:Ve,specularColorMap:$e,specularIntensityMap:xt,transmission:Ue,transmissionMap:te,thicknessMap:Qe,gradientMap:Se,opaque:M.transparent===!1&&M.blending===qo&&M.alphaToCoverage===!1,alphaMap:Oe,alphaTest:Ze,alphaHash:We,combine:M.combine,mapUv:fe&&y(M.map.channel),aoMapUv:q&&y(M.aoMap.channel),lightMapUv:ve&&y(M.lightMap.channel),bumpMapUv:be&&y(M.bumpMap.channel),normalMapUv:xe&&y(M.normalMap.channel),displacementMapUv:we&&y(M.displacementMap.channel),emissiveMapUv:qe&&y(M.emissiveMap.channel),metalnessMapUv:Fe&&y(M.metalnessMap.channel),roughnessMapUv:H&&y(M.roughnessMap.channel),anisotropyMapUv:Re&&y(M.anisotropyMap.channel),clearcoatMapUv:Le&&y(M.clearcoatMap.channel),clearcoatNormalMapUv:Je&&y(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&y(M.clearcoatRoughnessMap.channel),iridescenceMapUv:ze&&y(M.iridescenceMap.channel),iridescenceThicknessMapUv:Ee&&y(M.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&y(M.sheenColorMap.channel),sheenRoughnessMapUv:ke&&y(M.sheenRoughnessMap.channel),specularMapUv:Ve&&y(M.specularMap.channel),specularColorMapUv:$e&&y(M.specularColorMap.channel),specularIntensityMapUv:xt&&y(M.specularIntensityMap.channel),transmissionMapUv:te&&y(M.transmissionMap.channel),thicknessMapUv:Qe&&y(M.thicknessMap.channel),alphaMapUv:Oe&&y(M.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(xe||B),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!I.attributes.uv&&(fe||Oe),fog:!!A,useFog:M.fog===!0,fogExp2:!!A&&A.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:ne,skinning:L.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:W,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:At,decodeVideoTexture:fe&&M.map.isVideoTexture===!0&&rn.getTransfer(M.map.colorSpace)===Mn,decodeVideoTextureEmissive:qe&&M.emissiveMap.isVideoTexture===!0&&rn.getTransfer(M.emissiveMap.colorSpace)===Mn,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Ri,flipSided:M.side===er,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:wt&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(wt&&M.extensions.multiDraw===!0||me)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return dt.vertexUv1s=u.has(1),dt.vertexUv2s=u.has(2),dt.vertexUv3s=u.has(3),u.clear(),dt}function m(M){const R=[];if(M.shaderID?R.push(M.shaderID):(R.push(M.customVertexShaderID),R.push(M.customFragmentShaderID)),M.defines!==void 0)for(const N in M.defines)R.push(N),R.push(M.defines[N]);return M.isRawShaderMaterial===!1&&(x(R,M),_(R,M),R.push(n.outputColorSpace)),R.push(M.customProgramCacheKey),R.join()}function x(M,R){M.push(R.precision),M.push(R.outputColorSpace),M.push(R.envMapMode),M.push(R.envMapCubeUVHeight),M.push(R.mapUv),M.push(R.alphaMapUv),M.push(R.lightMapUv),M.push(R.aoMapUv),M.push(R.bumpMapUv),M.push(R.normalMapUv),M.push(R.displacementMapUv),M.push(R.emissiveMapUv),M.push(R.metalnessMapUv),M.push(R.roughnessMapUv),M.push(R.anisotropyMapUv),M.push(R.clearcoatMapUv),M.push(R.clearcoatNormalMapUv),M.push(R.clearcoatRoughnessMapUv),M.push(R.iridescenceMapUv),M.push(R.iridescenceThicknessMapUv),M.push(R.sheenColorMapUv),M.push(R.sheenRoughnessMapUv),M.push(R.specularMapUv),M.push(R.specularColorMapUv),M.push(R.specularIntensityMapUv),M.push(R.transmissionMapUv),M.push(R.thicknessMapUv),M.push(R.combine),M.push(R.fogExp2),M.push(R.sizeAttenuation),M.push(R.morphTargetsCount),M.push(R.morphAttributeCount),M.push(R.numDirLights),M.push(R.numPointLights),M.push(R.numSpotLights),M.push(R.numSpotLightMaps),M.push(R.numHemiLights),M.push(R.numRectAreaLights),M.push(R.numDirLightShadows),M.push(R.numPointLightShadows),M.push(R.numSpotLightShadows),M.push(R.numSpotLightShadowsWithMaps),M.push(R.numLightProbes),M.push(R.shadowMapType),M.push(R.toneMapping),M.push(R.numClippingPlanes),M.push(R.numClipIntersection),M.push(R.depthPacking)}function _(M,R){l.disableAll(),R.supportsVertexTextures&&l.enable(0),R.instancing&&l.enable(1),R.instancingColor&&l.enable(2),R.instancingMorph&&l.enable(3),R.matcap&&l.enable(4),R.envMap&&l.enable(5),R.normalMapObjectSpace&&l.enable(6),R.normalMapTangentSpace&&l.enable(7),R.clearcoat&&l.enable(8),R.iridescence&&l.enable(9),R.alphaTest&&l.enable(10),R.vertexColors&&l.enable(11),R.vertexAlphas&&l.enable(12),R.vertexUv1s&&l.enable(13),R.vertexUv2s&&l.enable(14),R.vertexUv3s&&l.enable(15),R.vertexTangents&&l.enable(16),R.anisotropy&&l.enable(17),R.alphaHash&&l.enable(18),R.batching&&l.enable(19),R.dispersion&&l.enable(20),R.batchingColor&&l.enable(21),M.push(l.mask),l.disableAll(),R.fog&&l.enable(0),R.useFog&&l.enable(1),R.flatShading&&l.enable(2),R.logarithmicDepthBuffer&&l.enable(3),R.reverseDepthBuffer&&l.enable(4),R.skinning&&l.enable(5),R.morphTargets&&l.enable(6),R.morphNormals&&l.enable(7),R.morphColors&&l.enable(8),R.premultipliedAlpha&&l.enable(9),R.shadowMapEnabled&&l.enable(10),R.doubleSided&&l.enable(11),R.flipSided&&l.enable(12),R.useDepthPacking&&l.enable(13),R.dithering&&l.enable(14),R.transmission&&l.enable(15),R.sheen&&l.enable(16),R.opaque&&l.enable(17),R.pointsUvs&&l.enable(18),R.decodeVideoTexture&&l.enable(19),R.decodeVideoTextureEmissive&&l.enable(20),R.alphaToCoverage&&l.enable(21),M.push(l.mask)}function S(M){const R=g[M.type];let N;if(R){const D=Gs[R];N=Hy.clone(D.uniforms)}else N=M.uniforms;return N}function w(M,R){let N;for(let D=0,L=d.length;D<L;D++){const A=d[D];if(A.cacheKey===R){N=A,++N.usedTimes;break}}return N===void 0&&(N=new rme(n,R,M,s),d.push(N)),N}function C(M){if(--M.usedTimes===0){const R=d.indexOf(M);d[R]=d[d.length-1],d.pop(),M.destroy()}}function E(M){c.remove(M)}function T(){c.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:S,acquireProgram:w,releaseProgram:C,releaseShaderCache:E,programs:d,dispose:T}}function lme(){let n=new WeakMap;function e(a){return n.has(a)}function r(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function i(a){n.delete(a)}function o(a,l,c){n.get(a)[l]=c}function s(){n=new WeakMap}return{has:e,get:r,remove:i,update:o,dispose:s}}function cme(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function BI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function $I(){const n=[];let e=0;const r=[],i=[],o=[];function s(){e=0,r.length=0,i.length=0,o.length=0}function a(f,h,p,g,y,v){let m=n[e];return m===void 0?(m={id:f.id,object:f,geometry:h,material:p,groupOrder:g,renderOrder:f.renderOrder,z:y,group:v},n[e]=m):(m.id=f.id,m.object=f,m.geometry=h,m.material=p,m.groupOrder=g,m.renderOrder=f.renderOrder,m.z=y,m.group=v),e++,m}function l(f,h,p,g,y,v){const m=a(f,h,p,g,y,v);p.transmission>0?i.push(m):p.transparent===!0?o.push(m):r.push(m)}function c(f,h,p,g,y,v){const m=a(f,h,p,g,y,v);p.transmission>0?i.unshift(m):p.transparent===!0?o.unshift(m):r.unshift(m)}function u(f,h){r.length>1&&r.sort(f||cme),i.length>1&&i.sort(h||BI),o.length>1&&o.sort(h||BI)}function d(){for(let f=e,h=n.length;f<h;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:r,transmissive:i,transparent:o,init:s,push:l,unshift:c,finish:d,sort:u}}function ume(){let n=new WeakMap;function e(i,o){const s=n.get(i);let a;return s===void 0?(a=new $I,n.set(i,[a])):o>=s.length?(a=new $I,s.push(a)):a=s[o],a}function r(){n=new WeakMap}return{get:e,dispose:r}}function dme(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new Y,color:new Mt};break;case"SpotLight":r={position:new Y,direction:new Y,color:new Mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Y,color:new Mt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Y,skyColor:new Mt,groundColor:new Mt};break;case"RectAreaLight":r={color:new Mt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return n[e.id]=r,r}}}function fme(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=r,r}}}let hme=0;function pme(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mme(n){const e=new dme,r=fme(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new Y);const o=new Y,s=new fn,a=new fn;function l(u){let d=0,f=0,h=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let p=0,g=0,y=0,v=0,m=0,x=0,_=0,S=0,w=0,C=0,E=0;u.sort(pme);for(let M=0,R=u.length;M<R;M++){const N=u[M],D=N.color,L=N.intensity,A=N.distance,I=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)d+=D.r*L,f+=D.g*L,h+=D.b*L;else if(N.isLightProbe){for(let P=0;P<9;P++)i.probe[P].addScaledVector(N.sh.coefficients[P],L);E++}else if(N.isDirectionalLight){const P=e.get(N);if(P.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){const F=N.shadow,O=r.get(N);O.shadowIntensity=F.intensity,O.shadowBias=F.bias,O.shadowNormalBias=F.normalBias,O.shadowRadius=F.radius,O.shadowMapSize=F.mapSize,i.directionalShadow[p]=O,i.directionalShadowMap[p]=I,i.directionalShadowMatrix[p]=N.shadow.matrix,x++}i.directional[p]=P,p++}else if(N.isSpotLight){const P=e.get(N);P.position.setFromMatrixPosition(N.matrixWorld),P.color.copy(D).multiplyScalar(L),P.distance=A,P.coneCos=Math.cos(N.angle),P.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),P.decay=N.decay,i.spot[y]=P;const F=N.shadow;if(N.map&&(i.spotLightMap[w]=N.map,w++,F.updateMatrices(N),N.castShadow&&C++),i.spotLightMatrix[y]=F.matrix,N.castShadow){const O=r.get(N);O.shadowIntensity=F.intensity,O.shadowBias=F.bias,O.shadowNormalBias=F.normalBias,O.shadowRadius=F.radius,O.shadowMapSize=F.mapSize,i.spotShadow[y]=O,i.spotShadowMap[y]=I,S++}y++}else if(N.isRectAreaLight){const P=e.get(N);P.color.copy(D).multiplyScalar(L),P.halfWidth.set(N.width*.5,0,0),P.halfHeight.set(0,N.height*.5,0),i.rectArea[v]=P,v++}else if(N.isPointLight){const P=e.get(N);if(P.color.copy(N.color).multiplyScalar(N.intensity),P.distance=N.distance,P.decay=N.decay,N.castShadow){const F=N.shadow,O=r.get(N);O.shadowIntensity=F.intensity,O.shadowBias=F.bias,O.shadowNormalBias=F.normalBias,O.shadowRadius=F.radius,O.shadowMapSize=F.mapSize,O.shadowCameraNear=F.camera.near,O.shadowCameraFar=F.camera.far,i.pointShadow[g]=O,i.pointShadowMap[g]=I,i.pointShadowMatrix[g]=N.shadow.matrix,_++}i.point[g]=P,g++}else if(N.isHemisphereLight){const P=e.get(N);P.skyColor.copy(N.color).multiplyScalar(L),P.groundColor.copy(N.groundColor).multiplyScalar(L),i.hemi[m]=P,m++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=gt.LTC_FLOAT_1,i.rectAreaLTC2=gt.LTC_FLOAT_2):(i.rectAreaLTC1=gt.LTC_HALF_1,i.rectAreaLTC2=gt.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=h;const T=i.hash;(T.directionalLength!==p||T.pointLength!==g||T.spotLength!==y||T.rectAreaLength!==v||T.hemiLength!==m||T.numDirectionalShadows!==x||T.numPointShadows!==_||T.numSpotShadows!==S||T.numSpotMaps!==w||T.numLightProbes!==E)&&(i.directional.length=p,i.spot.length=y,i.rectArea.length=v,i.point.length=g,i.hemi.length=m,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=S+w-C,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=E,T.directionalLength=p,T.pointLength=g,T.spotLength=y,T.rectAreaLength=v,T.hemiLength=m,T.numDirectionalShadows=x,T.numPointShadows=_,T.numSpotShadows=S,T.numSpotMaps=w,T.numLightProbes=E,i.version=hme++)}function c(u,d){let f=0,h=0,p=0,g=0,y=0;const v=d.matrixWorldInverse;for(let m=0,x=u.length;m<x;m++){const _=u[m];if(_.isDirectionalLight){const S=i.directional[f];S.direction.setFromMatrixPosition(_.matrixWorld),o.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),f++}else if(_.isSpotLight){const S=i.spot[p];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(_.matrixWorld),o.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),p++}else if(_.isRectAreaLight){const S=i.rectArea[g];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(v),a.identity(),s.copy(_.matrixWorld),s.premultiply(v),a.extractRotation(s),S.halfWidth.set(_.width*.5,0,0),S.halfHeight.set(0,_.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),g++}else if(_.isPointLight){const S=i.point[h];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(v),h++}else if(_.isHemisphereLight){const S=i.hemi[y];S.direction.setFromMatrixPosition(_.matrixWorld),S.direction.transformDirection(v),y++}}}return{setup:l,setupView:c,state:i}}function zI(n){const e=new mme(n),r=[],i=[];function o(d){u.camera=d,r.length=0,i.length=0}function s(d){r.push(d)}function a(d){i.push(d)}function l(){e.setup(r)}function c(d){e.setupView(r,d)}const u={lightsArray:r,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:o,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function gme(n){let e=new WeakMap;function r(o,s=0){const a=e.get(o);let l;return a===void 0?(l=new zI(n),e.set(o,[l])):s>=a.length?(l=new zI(n),a.push(l)):l=a[s],l}function i(){e=new WeakMap}return{get:r,dispose:i}}const vme=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yme=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function xme(n,e,r){let i=new b_;const o=new je,s=new je,a=new qt,l=new Oue({depthPacking:oce}),c=new Iue,u={},d=r.maxTextureSize,f={[Ps]:er,[er]:Ps,[Ri]:Ri},h=new qi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:vme,fragmentShader:yme}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new Bi;g.setAttribute("position",new ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new $r(g,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=OM;let m=this.type;this.render=function(C,E,T){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||C.length===0)return;const M=n.getRenderTarget(),R=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),D=n.state;D.setBlending(Pi),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const L=m!==yo&&this.type===yo,A=m===yo&&this.type!==yo;for(let I=0,P=C.length;I<P;I++){const F=C[I],O=F.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;o.copy(O.mapSize);const V=O.getFrameExtents();if(o.multiply(V),s.copy(O.mapSize),(o.x>d||o.y>d)&&(o.x>d&&(s.x=Math.floor(d/V.x),o.x=s.x*V.x,O.mapSize.x=s.x),o.y>d&&(s.y=Math.floor(d/V.y),o.y=s.y*V.y,O.mapSize.y=s.y)),O.map===null||L===!0||A===!0){const k=this.type!==yo?{minFilter:qn,magFilter:qn}:{};O.map!==null&&O.map.dispose(),O.map=new As(o.x,o.y,k),O.map.texture.name=F.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const U=O.getViewportCount();for(let k=0;k<U;k++){const W=O.getViewport(k);a.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),D.viewport(a),O.updateMatrices(F,k),i=O.getFrustum(),S(E,T,O.camera,F,this.type)}O.isPointLightShadow!==!0&&this.type===yo&&x(O,T),O.needsUpdate=!1}m=this.type,v.needsUpdate=!1,n.setRenderTarget(M,R,N)};function x(C,E){const T=e.update(y);h.defines.VSM_SAMPLES!==C.blurSamples&&(h.defines.VSM_SAMPLES=C.blurSamples,p.defines.VSM_SAMPLES=C.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new As(o.x,o.y)),h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(E,null,T,h,y,null),p.uniforms.shadow_pass.value=C.mapPass.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(E,null,T,p,y,null)}function _(C,E,T,M){let R=null;const N=T.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(N!==void 0)R=N;else if(R=T.isPointLight===!0?c:l,n.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const D=R.uuid,L=E.uuid;let A=u[D];A===void 0&&(A={},u[D]=A);let I=A[L];I===void 0&&(I=R.clone(),A[L]=I,E.addEventListener("dispose",w)),R=I}if(R.visible=E.visible,R.wireframe=E.wireframe,M===yo?R.side=E.shadowSide!==null?E.shadowSide:E.side:R.side=E.shadowSide!==null?E.shadowSide:f[E.side],R.alphaMap=E.alphaMap,R.alphaTest=E.alphaTest,R.map=E.map,R.clipShadows=E.clipShadows,R.clippingPlanes=E.clippingPlanes,R.clipIntersection=E.clipIntersection,R.displacementMap=E.displacementMap,R.displacementScale=E.displacementScale,R.displacementBias=E.displacementBias,R.wireframeLinewidth=E.wireframeLinewidth,R.linewidth=E.linewidth,T.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const D=n.properties.get(R);D.light=T}return R}function S(C,E,T,M,R){if(C.visible===!1)return;if(C.layers.test(E.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&R===yo)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,C.matrixWorld);const L=e.update(C),A=C.material;if(Array.isArray(A)){const I=L.groups;for(let P=0,F=I.length;P<F;P++){const O=I[P],V=A[O.materialIndex];if(V&&V.visible){const U=_(C,V,M,R);C.onBeforeShadow(n,C,E,T,L,U,O),n.renderBufferDirect(T,null,L,U,C,O),C.onAfterShadow(n,C,E,T,L,U,O)}}}else if(A.visible){const I=_(C,A,M,R);C.onBeforeShadow(n,C,E,T,L,I,null),n.renderBufferDirect(T,null,L,I,C,null),C.onAfterShadow(n,C,E,T,L,I,null)}}const D=C.children;for(let L=0,A=D.length;L<A;L++)S(D[L],E,T,M,R)}function w(C){C.target.removeEventListener("dispose",w);for(const T in u){const M=u[T],R=C.target.uuid;R in M&&(M[R].dispose(),delete M[R])}}}const _me={[Tm]:Mm,[Rm]:Pm,[Am]:Om,[dc]:Nm,[Mm]:Tm,[Pm]:Rm,[Om]:Am,[Nm]:dc};function bme(n,e){function r(){let te=!1;const Qe=new qt;let Se=null;const Oe=new qt(0,0,0,0);return{setMask:function(Ze){Se!==Ze&&!te&&(n.colorMask(Ze,Ze,Ze,Ze),Se=Ze)},setLocked:function(Ze){te=Ze},setClear:function(Ze,We,wt,At,dt){dt===!0&&(Ze*=At,We*=At,wt*=At),Qe.set(Ze,We,wt,At),Oe.equals(Qe)===!1&&(n.clearColor(Ze,We,wt,At),Oe.copy(Qe))},reset:function(){te=!1,Se=null,Oe.set(-1,0,0,0)}}}function i(){let te=!1,Qe=!1,Se=null,Oe=null,Ze=null;return{setReversed:function(We){if(Qe!==We){const wt=e.get("EXT_clip_control");Qe?wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.ZERO_TO_ONE_EXT):wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.NEGATIVE_ONE_TO_ONE_EXT);const At=Ze;Ze=null,this.setClear(At)}Qe=We},getReversed:function(){return Qe},setTest:function(We){We?Q(n.DEPTH_TEST):ne(n.DEPTH_TEST)},setMask:function(We){Se!==We&&!te&&(n.depthMask(We),Se=We)},setFunc:function(We){if(Qe&&(We=_me[We]),Oe!==We){switch(We){case Tm:n.depthFunc(n.NEVER);break;case Mm:n.depthFunc(n.ALWAYS);break;case Rm:n.depthFunc(n.LESS);break;case dc:n.depthFunc(n.LEQUAL);break;case Am:n.depthFunc(n.EQUAL);break;case Nm:n.depthFunc(n.GEQUAL);break;case Pm:n.depthFunc(n.GREATER);break;case Om:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Oe=We}},setLocked:function(We){te=We},setClear:function(We){Ze!==We&&(Qe&&(We=1-We),n.clearDepth(We),Ze=We)},reset:function(){te=!1,Se=null,Oe=null,Ze=null,Qe=!1}}}function o(){let te=!1,Qe=null,Se=null,Oe=null,Ze=null,We=null,wt=null,At=null,dt=null;return{setTest:function(Xe){te||(Xe?Q(n.STENCIL_TEST):ne(n.STENCIL_TEST))},setMask:function(Xe){Qe!==Xe&&!te&&(n.stencilMask(Xe),Qe=Xe)},setFunc:function(Xe,rt,Ft){(Se!==Xe||Oe!==rt||Ze!==Ft)&&(n.stencilFunc(Xe,rt,Ft),Se=Xe,Oe=rt,Ze=Ft)},setOp:function(Xe,rt,Ft){(We!==Xe||wt!==rt||At!==Ft)&&(n.stencilOp(Xe,rt,Ft),We=Xe,wt=rt,At=Ft)},setLocked:function(Xe){te=Xe},setClear:function(Xe){dt!==Xe&&(n.clearStencil(Xe),dt=Xe)},reset:function(){te=!1,Qe=null,Se=null,Oe=null,Ze=null,We=null,wt=null,At=null,dt=null}}}const s=new r,a=new i,l=new o,c=new WeakMap,u=new WeakMap;let d={},f={},h=new WeakMap,p=[],g=null,y=!1,v=null,m=null,x=null,_=null,S=null,w=null,C=null,E=new Mt(0,0,0),T=0,M=!1,R=null,N=null,D=null,L=null,A=null;const I=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,F=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(O)[1]),P=F>=1):O.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),P=F>=2);let V=null,U={};const k=n.getParameter(n.SCISSOR_BOX),W=n.getParameter(n.VIEWPORT),J=new qt().fromArray(k),z=new qt().fromArray(W);function j(te,Qe,Se,Oe){const Ze=new Uint8Array(4),We=n.createTexture();n.bindTexture(te,We),n.texParameteri(te,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(te,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let wt=0;wt<Se;wt++)te===n.TEXTURE_3D||te===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,Oe,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(Qe+wt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return We}const X={};X[n.TEXTURE_2D]=j(n.TEXTURE_2D,n.TEXTURE_2D,1),X[n.TEXTURE_CUBE_MAP]=j(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),X[n.TEXTURE_2D_ARRAY]=j(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),X[n.TEXTURE_3D]=j(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Q(n.DEPTH_TEST),a.setFunc(dc),be(!1),xe(lE),Q(n.CULL_FACE),q(Pi);function Q(te){d[te]!==!0&&(n.enable(te),d[te]=!0)}function ne(te){d[te]!==!1&&(n.disable(te),d[te]=!1)}function ye(te,Qe){return f[te]!==Qe?(n.bindFramebuffer(te,Qe),f[te]=Qe,te===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Qe),te===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function me(te,Qe){let Se=p,Oe=!1;if(te){Se=h.get(Qe),Se===void 0&&(Se=[],h.set(Qe,Se));const Ze=te.textures;if(Se.length!==Ze.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let We=0,wt=Ze.length;We<wt;We++)Se[We]=n.COLOR_ATTACHMENT0+We;Se.length=Ze.length,Oe=!0}}else Se[0]!==n.BACK&&(Se[0]=n.BACK,Oe=!0);Oe&&n.drawBuffers(Se)}function fe(te){return g!==te?(n.useProgram(te),g=te,!0):!1}const le={[xo]:n.FUNC_ADD,[DM]:n.FUNC_SUBTRACT,[LM]:n.FUNC_REVERSE_SUBTRACT};le[Ck]=n.MIN,le[Ek]=n.MAX;const ge={[FM]:n.ZERO,[UM]:n.ONE,[BM]:n.SRC_COLOR,[Cm]:n.SRC_ALPHA,[HM]:n.SRC_ALPHA_SATURATE,[VM]:n.DST_COLOR,[zM]:n.DST_ALPHA,[$M]:n.ONE_MINUS_SRC_COLOR,[Em]:n.ONE_MINUS_SRC_ALPHA,[GM]:n.ONE_MINUS_DST_COLOR,[kM]:n.ONE_MINUS_DST_ALPHA,[Zle]:n.CONSTANT_COLOR,[Jle]:n.ONE_MINUS_CONSTANT_COLOR,[ece]:n.CONSTANT_ALPHA,[tce]:n.ONE_MINUS_CONSTANT_ALPHA};function q(te,Qe,Se,Oe,Ze,We,wt,At,dt,Xe){if(te===Pi){y===!0&&(ne(n.BLEND),y=!1);return}if(y===!1&&(Q(n.BLEND),y=!0),te!==IM){if(te!==v||Xe!==M){if((m!==xo||S!==xo)&&(n.blendEquation(n.FUNC_ADD),m=xo,S=xo),Xe)switch(te){case qo:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case wu:n.blendFunc(n.ONE,n.ONE);break;case Mf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Rf:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}else switch(te){case qo:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case wu:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Mf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Rf:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}x=null,_=null,w=null,C=null,E.set(0,0,0),T=0,v=te,M=Xe}return}Ze=Ze||Qe,We=We||Se,wt=wt||Oe,(Qe!==m||Ze!==S)&&(n.blendEquationSeparate(le[Qe],le[Ze]),m=Qe,S=Ze),(Se!==x||Oe!==_||We!==w||wt!==C)&&(n.blendFuncSeparate(ge[Se],ge[Oe],ge[We],ge[wt]),x=Se,_=Oe,w=We,C=wt),(At.equals(E)===!1||dt!==T)&&(n.blendColor(At.r,At.g,At.b,dt),E.copy(At),T=dt),v=te,M=!1}function ve(te,Qe){te.side===Ri?ne(n.CULL_FACE):Q(n.CULL_FACE);let Se=te.side===er;Qe&&(Se=!Se),be(Se),te.blending===qo&&te.transparent===!1?q(Pi):q(te.blending,te.blendEquation,te.blendSrc,te.blendDst,te.blendEquationAlpha,te.blendSrcAlpha,te.blendDstAlpha,te.blendColor,te.blendAlpha,te.premultipliedAlpha),a.setFunc(te.depthFunc),a.setTest(te.depthTest),a.setMask(te.depthWrite),s.setMask(te.colorWrite);const Oe=te.stencilWrite;l.setTest(Oe),Oe&&(l.setMask(te.stencilWriteMask),l.setFunc(te.stencilFunc,te.stencilRef,te.stencilFuncMask),l.setOp(te.stencilFail,te.stencilZFail,te.stencilZPass)),qe(te.polygonOffset,te.polygonOffsetFactor,te.polygonOffsetUnits),te.alphaToCoverage===!0?Q(n.SAMPLE_ALPHA_TO_COVERAGE):ne(n.SAMPLE_ALPHA_TO_COVERAGE)}function be(te){R!==te&&(te?n.frontFace(n.CW):n.frontFace(n.CCW),R=te)}function xe(te){te!==Sk?(Q(n.CULL_FACE),te!==N&&(te===lE?n.cullFace(n.BACK):te===wk?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ne(n.CULL_FACE),N=te}function we(te){te!==D&&(P&&n.lineWidth(te),D=te)}function qe(te,Qe,Se){te?(Q(n.POLYGON_OFFSET_FILL),(L!==Qe||A!==Se)&&(n.polygonOffset(Qe,Se),L=Qe,A=Se)):ne(n.POLYGON_OFFSET_FILL)}function Fe(te){te?Q(n.SCISSOR_TEST):ne(n.SCISSOR_TEST)}function H(te){te===void 0&&(te=n.TEXTURE0+I-1),V!==te&&(n.activeTexture(te),V=te)}function B(te,Qe,Se){Se===void 0&&(V===null?Se=n.TEXTURE0+I-1:Se=V);let Oe=U[Se];Oe===void 0&&(Oe={type:void 0,texture:void 0},U[Se]=Oe),(Oe.type!==te||Oe.texture!==Qe)&&(V!==Se&&(n.activeTexture(Se),V=Se),n.bindTexture(te,Qe||X[te]),Oe.type=te,Oe.texture=Qe)}function K(){const te=U[V];te!==void 0&&te.type!==void 0&&(n.bindTexture(te.type,null),te.type=void 0,te.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ce(){try{n.texSubImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ue(){try{n.texSubImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Le(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Je(){try{n.texStorage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Me(){try{n.texStorage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ze(){try{n.texImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ee(){try{n.texImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Pe(te){J.equals(te)===!1&&(n.scissor(te.x,te.y,te.z,te.w),J.copy(te))}function ke(te){z.equals(te)===!1&&(n.viewport(te.x,te.y,te.z,te.w),z.copy(te))}function Ve(te,Qe){let Se=u.get(Qe);Se===void 0&&(Se=new WeakMap,u.set(Qe,Se));let Oe=Se.get(te);Oe===void 0&&(Oe=n.getUniformBlockIndex(Qe,te.name),Se.set(te,Oe))}function $e(te,Qe){const Oe=u.get(Qe).get(te);c.get(Qe)!==Oe&&(n.uniformBlockBinding(Qe,Oe,te.__bindingPointIndex),c.set(Qe,Oe))}function xt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},V=null,U={},f={},h=new WeakMap,p=[],g=null,y=!1,v=null,m=null,x=null,_=null,S=null,w=null,C=null,E=new Mt(0,0,0),T=0,M=!1,R=null,N=null,D=null,L=null,A=null,J.set(0,0,n.canvas.width,n.canvas.height),z.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:Q,disable:ne,bindFramebuffer:ye,drawBuffers:me,useProgram:fe,setBlending:q,setMaterial:ve,setFlipSided:be,setCullFace:xe,setLineWidth:we,setPolygonOffset:qe,setScissorTest:Fe,activeTexture:H,bindTexture:B,unbindTexture:K,compressedTexImage2D:oe,compressedTexImage3D:pe,texImage2D:ze,texImage3D:Ee,updateUBOMapping:Ve,uniformBlockBinding:$e,texStorage2D:Je,texStorage3D:Me,texSubImage2D:ce,texSubImage3D:Ue,compressedTexSubImage2D:Re,compressedTexSubImage3D:Le,scissor:Pe,viewport:ke,reset:xt}}function Sme(n,e,r,i,o,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new je,d=new WeakMap;let f;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(H,B){return p?new OffscreenCanvas(H,B):km("canvas")}function y(H,B,K){let oe=1;const pe=Fe(H);if((pe.width>K||pe.height>K)&&(oe=K/Math.max(pe.width,pe.height)),oe<1)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const ce=Math.floor(oe*pe.width),Ue=Math.floor(oe*pe.height);f===void 0&&(f=g(ce,Ue));const Re=B?g(ce,Ue):f;return Re.width=ce,Re.height=Ue,Re.getContext("2d").drawImage(H,0,0,ce,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+ce+"x"+Ue+")."),Re}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),H;return H}function v(H){return H.generateMipmaps}function m(H){n.generateMipmap(H)}function x(H){return H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:H.isWebGL3DRenderTarget?n.TEXTURE_3D:H.isWebGLArrayRenderTarget||H.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function _(H,B,K,oe,pe=!1){if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let ce=B;if(B===n.RED&&(K===n.FLOAT&&(ce=n.R32F),K===n.HALF_FLOAT&&(ce=n.R16F),K===n.UNSIGNED_BYTE&&(ce=n.R8)),B===n.RED_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.R8UI),K===n.UNSIGNED_SHORT&&(ce=n.R16UI),K===n.UNSIGNED_INT&&(ce=n.R32UI),K===n.BYTE&&(ce=n.R8I),K===n.SHORT&&(ce=n.R16I),K===n.INT&&(ce=n.R32I)),B===n.RG&&(K===n.FLOAT&&(ce=n.RG32F),K===n.HALF_FLOAT&&(ce=n.RG16F),K===n.UNSIGNED_BYTE&&(ce=n.RG8)),B===n.RG_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.RG8UI),K===n.UNSIGNED_SHORT&&(ce=n.RG16UI),K===n.UNSIGNED_INT&&(ce=n.RG32UI),K===n.BYTE&&(ce=n.RG8I),K===n.SHORT&&(ce=n.RG16I),K===n.INT&&(ce=n.RG32I)),B===n.RGB_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.RGB8UI),K===n.UNSIGNED_SHORT&&(ce=n.RGB16UI),K===n.UNSIGNED_INT&&(ce=n.RGB32UI),K===n.BYTE&&(ce=n.RGB8I),K===n.SHORT&&(ce=n.RGB16I),K===n.INT&&(ce=n.RGB32I)),B===n.RGBA_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.RGBA8UI),K===n.UNSIGNED_SHORT&&(ce=n.RGBA16UI),K===n.UNSIGNED_INT&&(ce=n.RGBA32UI),K===n.BYTE&&(ce=n.RGBA8I),K===n.SHORT&&(ce=n.RGBA16I),K===n.INT&&(ce=n.RGBA32I)),B===n.RGB&&K===n.UNSIGNED_INT_5_9_9_9_REV&&(ce=n.RGB9_E5),B===n.RGBA){const Ue=pe?ky:rn.getTransfer(oe);K===n.FLOAT&&(ce=n.RGBA32F),K===n.HALF_FLOAT&&(ce=n.RGBA16F),K===n.UNSIGNED_BYTE&&(ce=Ue===Mn?n.SRGB8_ALPHA8:n.RGBA8),K===n.UNSIGNED_SHORT_4_4_4_4&&(ce=n.RGBA4),K===n.UNSIGNED_SHORT_5_5_5_1&&(ce=n.RGB5_A1)}return(ce===n.R16F||ce===n.R32F||ce===n.RG16F||ce===n.RG32F||ce===n.RGBA16F||ce===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ce}function S(H,B){let K;return H?B===null||B===rr||B===ra?K=n.DEPTH24_STENCIL8:B===pr?K=n.DEPTH32F_STENCIL8:B===Cs&&(K=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===rr||B===ra?K=n.DEPTH_COMPONENT24:B===pr?K=n.DEPTH_COMPONENT32F:B===Cs&&(K=n.DEPTH_COMPONENT16),K}function w(H,B){return v(H)===!0||H.isFramebufferTexture&&H.minFilter!==qn&&H.minFilter!==Br?Math.log2(Math.max(B.width,B.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?B.mipmaps.length:1}function C(H){const B=H.target;B.removeEventListener("dispose",C),T(B),B.isVideoTexture&&d.delete(B)}function E(H){const B=H.target;B.removeEventListener("dispose",E),R(B)}function T(H){const B=i.get(H);if(B.__webglInit===void 0)return;const K=H.source,oe=h.get(K);if(oe){const pe=oe[B.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&M(H),Object.keys(oe).length===0&&h.delete(K)}i.remove(H)}function M(H){const B=i.get(H);n.deleteTexture(B.__webglTexture);const K=H.source,oe=h.get(K);delete oe[B.__cacheKey],a.memory.textures--}function R(H){const B=i.get(H);if(H.depthTexture&&(H.depthTexture.dispose(),i.remove(H.depthTexture)),H.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(B.__webglFramebuffer[oe]))for(let pe=0;pe<B.__webglFramebuffer[oe].length;pe++)n.deleteFramebuffer(B.__webglFramebuffer[oe][pe]);else n.deleteFramebuffer(B.__webglFramebuffer[oe]);B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer[oe])}else{if(Array.isArray(B.__webglFramebuffer))for(let oe=0;oe<B.__webglFramebuffer.length;oe++)n.deleteFramebuffer(B.__webglFramebuffer[oe]);else n.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&n.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let oe=0;oe<B.__webglColorRenderbuffer.length;oe++)B.__webglColorRenderbuffer[oe]&&n.deleteRenderbuffer(B.__webglColorRenderbuffer[oe]);B.__webglDepthRenderbuffer&&n.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const K=H.textures;for(let oe=0,pe=K.length;oe<pe;oe++){const ce=i.get(K[oe]);ce.__webglTexture&&(n.deleteTexture(ce.__webglTexture),a.memory.textures--),i.remove(K[oe])}i.remove(H)}let N=0;function D(){N=0}function L(){const H=N;return H>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+o.maxTextures),N+=1,H}function A(H){const B=[];return B.push(H.wrapS),B.push(H.wrapT),B.push(H.wrapR||0),B.push(H.magFilter),B.push(H.minFilter),B.push(H.anisotropy),B.push(H.internalFormat),B.push(H.format),B.push(H.type),B.push(H.generateMipmaps),B.push(H.premultiplyAlpha),B.push(H.flipY),B.push(H.unpackAlignment),B.push(H.colorSpace),B.join()}function I(H,B){const K=i.get(H);if(H.isVideoTexture&&we(H),H.isRenderTargetTexture===!1&&H.version>0&&K.__version!==H.version){const oe=H.image;if(oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{z(K,H,B);return}}r.bindTexture(n.TEXTURE_2D,K.__webglTexture,n.TEXTURE0+B)}function P(H,B){const K=i.get(H);if(H.version>0&&K.__version!==H.version){z(K,H,B);return}r.bindTexture(n.TEXTURE_2D_ARRAY,K.__webglTexture,n.TEXTURE0+B)}function F(H,B){const K=i.get(H);if(H.version>0&&K.__version!==H.version){z(K,H,B);return}r.bindTexture(n.TEXTURE_3D,K.__webglTexture,n.TEXTURE0+B)}function O(H,B){const K=i.get(H);if(H.version>0&&K.__version!==H.version){j(K,H,B);return}r.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+B)}const V={[Eu]:n.REPEAT,[Ws]:n.CLAMP_TO_EDGE,[Tu]:n.MIRRORED_REPEAT},U={[qn]:n.NEAREST,[zy]:n.NEAREST_MIPMAP_NEAREST,[qs]:n.NEAREST_MIPMAP_LINEAR,[Br]:n.LINEAR,[tf]:n.LINEAR_MIPMAP_NEAREST,[Wi]:n.LINEAR_MIPMAP_LINEAR},k={[YM]:n.NEVER,[tR]:n.ALWAYS,[g_]:n.LESS,[v_]:n.LEQUAL,[QM]:n.EQUAL,[eR]:n.GEQUAL,[ZM]:n.GREATER,[JM]:n.NOTEQUAL};function W(H,B){if(B.type===pr&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Br||B.magFilter===tf||B.magFilter===qs||B.magFilter===Wi||B.minFilter===Br||B.minFilter===tf||B.minFilter===qs||B.minFilter===Wi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(H,n.TEXTURE_WRAP_S,V[B.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,V[B.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,V[B.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,U[B.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,U[B.minFilter]),B.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,k[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===qn||B.minFilter!==qs&&B.minFilter!==Wi||B.type===pr&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||i.get(B).__currentAnisotropy){const K=e.get("EXT_texture_filter_anisotropic");n.texParameterf(H,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,o.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy}}}function J(H,B){let K=!1;H.__webglInit===void 0&&(H.__webglInit=!0,B.addEventListener("dispose",C));const oe=B.source;let pe=h.get(oe);pe===void 0&&(pe={},h.set(oe,pe));const ce=A(B);if(ce!==H.__cacheKey){pe[ce]===void 0&&(pe[ce]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,K=!0),pe[ce].usedTimes++;const Ue=pe[H.__cacheKey];Ue!==void 0&&(pe[H.__cacheKey].usedTimes--,Ue.usedTimes===0&&M(B)),H.__cacheKey=ce,H.__webglTexture=pe[ce].texture}return K}function z(H,B,K){let oe=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(oe=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(oe=n.TEXTURE_3D);const pe=J(H,B),ce=B.source;r.bindTexture(oe,H.__webglTexture,n.TEXTURE0+K);const Ue=i.get(ce);if(ce.version!==Ue.__version||pe===!0){r.activeTexture(n.TEXTURE0+K);const Re=rn.getPrimaries(rn.workingColorSpace),Le=B.colorSpace===_o?null:rn.getPrimaries(B.colorSpace),Je=B.colorSpace===_o||Re===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let Me=y(B.image,!1,o.maxTextureSize);Me=qe(B,Me);const ze=s.convert(B.format,B.colorSpace),Ee=s.convert(B.type);let Pe=_(B.internalFormat,ze,Ee,B.colorSpace,B.isVideoTexture);W(oe,B);let ke;const Ve=B.mipmaps,$e=B.isVideoTexture!==!0,xt=Ue.__version===void 0||pe===!0,te=ce.dataReady,Qe=w(B,Me);if(B.isDepthTexture)Pe=S(B.format===ia,B.type),xt&&($e?r.texStorage2D(n.TEXTURE_2D,1,Pe,Me.width,Me.height):r.texImage2D(n.TEXTURE_2D,0,Pe,Me.width,Me.height,0,ze,Ee,null));else if(B.isDataTexture)if(Ve.length>0){$e&&xt&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Ve[0].width,Ve[0].height);for(let Se=0,Oe=Ve.length;Se<Oe;Se++)ke=Ve[Se],$e?te&&r.texSubImage2D(n.TEXTURE_2D,Se,0,0,ke.width,ke.height,ze,Ee,ke.data):r.texImage2D(n.TEXTURE_2D,Se,Pe,ke.width,ke.height,0,ze,Ee,ke.data);B.generateMipmaps=!1}else $e?(xt&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Me.width,Me.height),te&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,Me.width,Me.height,ze,Ee,Me.data)):r.texImage2D(n.TEXTURE_2D,0,Pe,Me.width,Me.height,0,ze,Ee,Me.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){$e&&xt&&r.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Pe,Ve[0].width,Ve[0].height,Me.depth);for(let Se=0,Oe=Ve.length;Se<Oe;Se++)if(ke=Ve[Se],B.format!==ni)if(ze!==null)if($e){if(te)if(B.layerUpdates.size>0){const Ze=gI(ke.width,ke.height,B.format,B.type);for(const We of B.layerUpdates){const wt=ke.data.subarray(We*Ze/ke.data.BYTES_PER_ELEMENT,(We+1)*Ze/ke.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,We,ke.width,ke.height,1,ze,wt)}B.clearLayerUpdates()}else r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ke.width,ke.height,Me.depth,ze,ke.data)}else r.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Se,Pe,ke.width,ke.height,Me.depth,0,ke.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $e?te&&r.texSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ke.width,ke.height,Me.depth,ze,Ee,ke.data):r.texImage3D(n.TEXTURE_2D_ARRAY,Se,Pe,ke.width,ke.height,Me.depth,0,ze,Ee,ke.data)}else{$e&&xt&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Ve[0].width,Ve[0].height);for(let Se=0,Oe=Ve.length;Se<Oe;Se++)ke=Ve[Se],B.format!==ni?ze!==null?$e?te&&r.compressedTexSubImage2D(n.TEXTURE_2D,Se,0,0,ke.width,ke.height,ze,ke.data):r.compressedTexImage2D(n.TEXTURE_2D,Se,Pe,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?te&&r.texSubImage2D(n.TEXTURE_2D,Se,0,0,ke.width,ke.height,ze,Ee,ke.data):r.texImage2D(n.TEXTURE_2D,Se,Pe,ke.width,ke.height,0,ze,Ee,ke.data)}else if(B.isDataArrayTexture)if($e){if(xt&&r.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Pe,Me.width,Me.height,Me.depth),te)if(B.layerUpdates.size>0){const Se=gI(Me.width,Me.height,B.format,B.type);for(const Oe of B.layerUpdates){const Ze=Me.data.subarray(Oe*Se/Me.data.BYTES_PER_ELEMENT,(Oe+1)*Se/Me.data.BYTES_PER_ELEMENT);r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Oe,Me.width,Me.height,1,ze,Ee,Ze)}B.clearLayerUpdates()}else r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,ze,Ee,Me.data)}else r.texImage3D(n.TEXTURE_2D_ARRAY,0,Pe,Me.width,Me.height,Me.depth,0,ze,Ee,Me.data);else if(B.isData3DTexture)$e?(xt&&r.texStorage3D(n.TEXTURE_3D,Qe,Pe,Me.width,Me.height,Me.depth),te&&r.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,ze,Ee,Me.data)):r.texImage3D(n.TEXTURE_3D,0,Pe,Me.width,Me.height,Me.depth,0,ze,Ee,Me.data);else if(B.isFramebufferTexture){if(xt)if($e)r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Me.width,Me.height);else{let Se=Me.width,Oe=Me.height;for(let Ze=0;Ze<Qe;Ze++)r.texImage2D(n.TEXTURE_2D,Ze,Pe,Se,Oe,0,ze,Ee,null),Se>>=1,Oe>>=1}}else if(Ve.length>0){if($e&&xt){const Se=Fe(Ve[0]);r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Se.width,Se.height)}for(let Se=0,Oe=Ve.length;Se<Oe;Se++)ke=Ve[Se],$e?te&&r.texSubImage2D(n.TEXTURE_2D,Se,0,0,ze,Ee,ke):r.texImage2D(n.TEXTURE_2D,Se,Pe,ze,Ee,ke);B.generateMipmaps=!1}else if($e){if(xt){const Se=Fe(Me);r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Se.width,Se.height)}te&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,ze,Ee,Me)}else r.texImage2D(n.TEXTURE_2D,0,Pe,ze,Ee,Me);v(B)&&m(oe),Ue.__version=ce.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function j(H,B,K){if(B.image.length!==6)return;const oe=J(H,B),pe=B.source;r.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+K);const ce=i.get(pe);if(pe.version!==ce.__version||oe===!0){r.activeTexture(n.TEXTURE0+K);const Ue=rn.getPrimaries(rn.workingColorSpace),Re=B.colorSpace===_o?null:rn.getPrimaries(B.colorSpace),Le=B.colorSpace===_o||Ue===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Le);const Je=B.isCompressedTexture||B.image[0].isCompressedTexture,Me=B.image[0]&&B.image[0].isDataTexture,ze=[];for(let Oe=0;Oe<6;Oe++)!Je&&!Me?ze[Oe]=y(B.image[Oe],!0,o.maxCubemapSize):ze[Oe]=Me?B.image[Oe].image:B.image[Oe],ze[Oe]=qe(B,ze[Oe]);const Ee=ze[0],Pe=s.convert(B.format,B.colorSpace),ke=s.convert(B.type),Ve=_(B.internalFormat,Pe,ke,B.colorSpace),$e=B.isVideoTexture!==!0,xt=ce.__version===void 0||oe===!0,te=pe.dataReady;let Qe=w(B,Ee);W(n.TEXTURE_CUBE_MAP,B);let Se;if(Je){$e&&xt&&r.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ve,Ee.width,Ee.height);for(let Oe=0;Oe<6;Oe++){Se=ze[Oe].mipmaps;for(let Ze=0;Ze<Se.length;Ze++){const We=Se[Ze];B.format!==ni?Pe!==null?$e?te&&r.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,0,0,We.width,We.height,Pe,We.data):r.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,Ve,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,0,0,We.width,We.height,Pe,ke,We.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,Ve,We.width,We.height,0,Pe,ke,We.data)}}}else{if(Se=B.mipmaps,$e&&xt){Se.length>0&&Qe++;const Oe=Fe(ze[0]);r.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ve,Oe.width,Oe.height)}for(let Oe=0;Oe<6;Oe++)if(Me){$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,ze[Oe].width,ze[Oe].height,Pe,ke,ze[Oe].data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,Ve,ze[Oe].width,ze[Oe].height,0,Pe,ke,ze[Oe].data);for(let Ze=0;Ze<Se.length;Ze++){const wt=Se[Ze].image[Oe].image;$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,0,0,wt.width,wt.height,Pe,ke,wt.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,Ve,wt.width,wt.height,0,Pe,ke,wt.data)}}else{$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,Pe,ke,ze[Oe]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,Ve,Pe,ke,ze[Oe]);for(let Ze=0;Ze<Se.length;Ze++){const We=Se[Ze];$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,0,0,Pe,ke,We.image[Oe]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,Ve,Pe,ke,We.image[Oe])}}}v(B)&&m(n.TEXTURE_CUBE_MAP),ce.__version=pe.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function X(H,B,K,oe,pe,ce){const Ue=s.convert(K.format,K.colorSpace),Re=s.convert(K.type),Le=_(K.internalFormat,Ue,Re,K.colorSpace),Je=i.get(B),Me=i.get(K);if(Me.__renderTarget=B,!Je.__hasExternalTextures){const ze=Math.max(1,B.width>>ce),Ee=Math.max(1,B.height>>ce);pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?r.texImage3D(pe,ce,Le,ze,Ee,B.depth,0,Ue,Re,null):r.texImage2D(pe,ce,Le,ze,Ee,0,Ue,Re,null)}r.bindFramebuffer(n.FRAMEBUFFER,H),xe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,oe,pe,Me.__webglTexture,0,be(B)):(pe===n.TEXTURE_2D||pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,oe,pe,Me.__webglTexture,ce),r.bindFramebuffer(n.FRAMEBUFFER,null)}function Q(H,B,K){if(n.bindRenderbuffer(n.RENDERBUFFER,H),B.depthBuffer){const oe=B.depthTexture,pe=oe&&oe.isDepthTexture?oe.type:null,ce=S(B.stencilBuffer,pe),Ue=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=be(B);xe(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,ce,B.width,B.height):K?n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,ce,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,ce,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,H)}else{const oe=B.textures;for(let pe=0;pe<oe.length;pe++){const ce=oe[pe],Ue=s.convert(ce.format,ce.colorSpace),Re=s.convert(ce.type),Le=_(ce.internalFormat,Ue,Re,ce.colorSpace),Je=be(B);K&&xe(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,Le,B.width,B.height):xe(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,Le,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,Le,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ne(H,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(n.FRAMEBUFFER,H),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const oe=i.get(B.depthTexture);oe.__renderTarget=B,(!oe.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),I(B.depthTexture,0);const pe=oe.__webglTexture,ce=be(B);if(B.depthTexture.format===Js)xe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0,ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0);else if(B.depthTexture.format===ia)xe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0,ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0);else throw new Error("Unknown depthTexture format")}function ye(H){const B=i.get(H),K=H.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==H.depthTexture){const oe=H.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),oe){const pe=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,oe.removeEventListener("dispose",pe)};oe.addEventListener("dispose",pe),B.__depthDisposeCallback=pe}B.__boundDepthTexture=oe}if(H.depthTexture&&!B.__autoAllocateDepthBuffer){if(K)throw new Error("target.depthTexture not supported in Cube render targets");ne(B.__webglFramebuffer,H)}else if(K){B.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)if(r.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[oe]),B.__webglDepthbuffer[oe]===void 0)B.__webglDepthbuffer[oe]=n.createRenderbuffer(),Q(B.__webglDepthbuffer[oe],H,!1);else{const pe=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ce=B.__webglDepthbuffer[oe];n.bindRenderbuffer(n.RENDERBUFFER,ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,ce)}}else if(r.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=n.createRenderbuffer(),Q(B.__webglDepthbuffer,H,!1);else{const oe=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=B.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,oe,n.RENDERBUFFER,pe)}r.bindFramebuffer(n.FRAMEBUFFER,null)}function me(H,B,K){const oe=i.get(H);B!==void 0&&X(oe.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),K!==void 0&&ye(H)}function fe(H){const B=H.texture,K=i.get(H),oe=i.get(B);H.addEventListener("dispose",E);const pe=H.textures,ce=H.isWebGLCubeRenderTarget===!0,Ue=pe.length>1;if(Ue||(oe.__webglTexture===void 0&&(oe.__webglTexture=n.createTexture()),oe.__version=B.version,a.memory.textures++),ce){K.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(B.mipmaps&&B.mipmaps.length>0){K.__webglFramebuffer[Re]=[];for(let Le=0;Le<B.mipmaps.length;Le++)K.__webglFramebuffer[Re][Le]=n.createFramebuffer()}else K.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){K.__webglFramebuffer=[];for(let Re=0;Re<B.mipmaps.length;Re++)K.__webglFramebuffer[Re]=n.createFramebuffer()}else K.__webglFramebuffer=n.createFramebuffer();if(Ue)for(let Re=0,Le=pe.length;Re<Le;Re++){const Je=i.get(pe[Re]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),a.memory.textures++)}if(H.samples>0&&xe(H)===!1){K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=[],r.bindFramebuffer(n.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let Re=0;Re<pe.length;Re++){const Le=pe[Re];K.__webglColorRenderbuffer[Re]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,K.__webglColorRenderbuffer[Re]);const Je=s.convert(Le.format,Le.colorSpace),Me=s.convert(Le.type),ze=_(Le.internalFormat,Je,Me,Le.colorSpace,H.isXRRenderTarget===!0),Ee=be(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ee,ze,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,K.__webglColorRenderbuffer[Re])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),Q(K.__webglDepthRenderbuffer,H,!0)),r.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ce){r.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture),W(n.TEXTURE_CUBE_MAP,B);for(let Re=0;Re<6;Re++)if(B.mipmaps&&B.mipmaps.length>0)for(let Le=0;Le<B.mipmaps.length;Le++)X(K.__webglFramebuffer[Re][Le],H,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Le);else X(K.__webglFramebuffer[Re],H,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);v(B)&&m(n.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Ue){for(let Re=0,Le=pe.length;Re<Le;Re++){const Je=pe[Re],Me=i.get(Je);r.bindTexture(n.TEXTURE_2D,Me.__webglTexture),W(n.TEXTURE_2D,Je),X(K.__webglFramebuffer,H,Je,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,0),v(Je)&&m(n.TEXTURE_2D)}r.unbindTexture()}else{let Re=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(Re=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),r.bindTexture(Re,oe.__webglTexture),W(Re,B),B.mipmaps&&B.mipmaps.length>0)for(let Le=0;Le<B.mipmaps.length;Le++)X(K.__webglFramebuffer[Le],H,B,n.COLOR_ATTACHMENT0,Re,Le);else X(K.__webglFramebuffer,H,B,n.COLOR_ATTACHMENT0,Re,0);v(B)&&m(Re),r.unbindTexture()}H.depthBuffer&&ye(H)}function le(H){const B=H.textures;for(let K=0,oe=B.length;K<oe;K++){const pe=B[K];if(v(pe)){const ce=x(H),Ue=i.get(pe).__webglTexture;r.bindTexture(ce,Ue),m(ce),r.unbindTexture()}}}const ge=[],q=[];function ve(H){if(H.samples>0){if(xe(H)===!1){const B=H.textures,K=H.width,oe=H.height;let pe=n.COLOR_BUFFER_BIT;const ce=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=i.get(H),Re=B.length>1;if(Re)for(let Le=0;Le<B.length;Le++)r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,null),r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,null,0);r.bindFramebuffer(n.READ_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ue.__webglFramebuffer);for(let Le=0;Le<B.length;Le++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(pe|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(pe|=n.STENCIL_BUFFER_BIT)),Re){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ue.__webglColorRenderbuffer[Le]);const Je=i.get(B[Le]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Je,0)}n.blitFramebuffer(0,0,K,oe,0,0,K,oe,pe,n.NEAREST),c===!0&&(ge.length=0,q.length=0,ge.push(n.COLOR_ATTACHMENT0+Le),H.depthBuffer&&H.resolveDepthBuffer===!1&&(ge.push(ce),q.push(ce),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ge))}if(r.bindFramebuffer(n.READ_FRAMEBUFFER,null),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Re)for(let Le=0;Le<B.length;Le++){r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,Ue.__webglColorRenderbuffer[Le]);const Je=i.get(B[Le]).__webglTexture;r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,Je,0)}r.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer)}else if(H.depthBuffer&&H.resolveDepthBuffer===!1&&c){const B=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[B])}}}function be(H){return Math.min(o.maxSamples,H.samples)}function xe(H){const B=i.get(H);return H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function we(H){const B=a.render.frame;d.get(H)!==B&&(d.set(H,B),H.update())}function qe(H,B){const K=H.colorSpace,oe=H.format,pe=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||K!==Xo&&K!==_o&&(rn.getTransfer(K)===Mn?(oe!==ni||pe!==mi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",K)),B}function Fe(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(u.width=H.naturalWidth||H.width,u.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(u.width=H.displayWidth,u.height=H.displayHeight):(u.width=H.width,u.height=H.height),u}this.allocateTextureUnit=L,this.resetTextureUnits=D,this.setTexture2D=I,this.setTexture2DArray=P,this.setTexture3D=F,this.setTextureCube=O,this.rebindTextures=me,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=le,this.updateMultisampleRenderTarget=ve,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=X,this.useMultisampledRTT=xe}function wme(n,e){function r(i,o=_o){let s;const a=rn.getTransfer(o);if(i===mi)return n.UNSIGNED_BYTE;if(i===h_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===p_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===m_)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===uu)return n.BYTE;if(i===du)return n.SHORT;if(i===Cs)return n.UNSIGNED_SHORT;if(i===Kr)return n.INT;if(i===rr)return n.UNSIGNED_INT;if(i===pr)return n.FLOAT;if(i===Qr)return n.HALF_FLOAT;if(i===WM)return n.ALPHA;if(i===bg)return n.RGB;if(i===ni)return n.RGBA;if(i===qM)return n.LUMINANCE;if(i===XM)return n.LUMINANCE_ALPHA;if(i===Js)return n.DEPTH_COMPONENT;if(i===ia)return n.DEPTH_STENCIL;if(i===Sg)return n.RED;if(i===ah)return n.RED_INTEGER;if(i===Mu)return n.RG;if(i===lh)return n.RG_INTEGER;if(i===ch)return n.RGBA_INTEGER;if(i===fu||i===nc||i===rc||i===ic)if(a===Mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===fu)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===nc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===rc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ic)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===fu)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===nc)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===rc)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ic)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Im||i===Dm||i===Lm||i===Fm)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Im)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Dm)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Lm)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Fm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Um||i===Af||i===Nf)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Um||i===Af)return a===Mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Nf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Pf||i===Of||i===If||i===Df||i===Lf||i===Ff||i===Uf||i===Bf||i===$f||i===zf||i===kf||i===Vf||i===Gf||i===Hf)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Pf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Of)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===If)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Df)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Lf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Ff)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Uf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Bf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===$f)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===zf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===kf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Vf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Gf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Hf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===hu||i===cE||i===uE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===hu)return a===Mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===cE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===uE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===KM||i===Bm||i===$m||i===zm)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===hu)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Bm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===$m)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===zm)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ra?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:r}}const Cme={type:"move"};class YS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const i of e.hand.values())this._getHandJoint(r,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,i){let o=null,s=null,a=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const y of e.hand.values()){const v=r.getJointPose(y,i),m=this._getHandJoint(u,y);v!==null&&(m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=v.radius),m.visible=v!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=d.position.distanceTo(f.position),p=.02,g=.005;u.inputState.pinching&&h>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=r.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(o=r.getPose(e.targetRaySpace,i),o===null&&s!==null&&(o=s),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(Cme)))}return l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const i=new Bd;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[r.jointName]=i,e.add(i)}return e.joints[r.jointName]}}const Eme=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Tme=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Mme{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r,i){if(this.texture===null){const o=new zr,s=e.properties.get(o);s.__webglTexture=r.texture,(r.depthNear!=i.depthNear||r.depthFar!=i.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=o}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,i=new qi({vertexShader:Eme,fragmentShader:Tme,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new $r(new C_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Rme extends Sc{constructor(e,r){super();const i=this;let o=null,s=1,a=null,l="local-floor",c=1,u=null,d=null,f=null,h=null,p=null,g=null;const y=new Mme,v=r.getContextAttributes();let m=null,x=null;const _=[],S=[],w=new je;let C=null;const E=new Ti;E.viewport=new qt;const T=new Ti;T.viewport=new qt;const M=[E,T],R=new Xue;let N=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let j=_[z];return j===void 0&&(j=new YS,_[z]=j),j.getTargetRaySpace()},this.getControllerGrip=function(z){let j=_[z];return j===void 0&&(j=new YS,_[z]=j),j.getGripSpace()},this.getHand=function(z){let j=_[z];return j===void 0&&(j=new YS,_[z]=j),j.getHandSpace()};function L(z){const j=S.indexOf(z.inputSource);if(j===-1)return;const X=_[j];X!==void 0&&(X.update(z.inputSource,z.frame,u||a),X.dispatchEvent({type:z.type,data:z.inputSource}))}function A(){o.removeEventListener("select",L),o.removeEventListener("selectstart",L),o.removeEventListener("selectend",L),o.removeEventListener("squeeze",L),o.removeEventListener("squeezestart",L),o.removeEventListener("squeezeend",L),o.removeEventListener("end",A),o.removeEventListener("inputsourceschange",I);for(let z=0;z<_.length;z++){const j=S[z];j!==null&&(S[z]=null,_[z].disconnect(j))}N=null,D=null,y.reset(),e.setRenderTarget(m),p=null,h=null,f=null,o=null,x=null,J.stop(),i.isPresenting=!1,e.setPixelRatio(C),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){s=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){l=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(z){u=z},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return o},this.setSession=async function(z){if(o=z,o!==null){if(m=e.getRenderTarget(),o.addEventListener("select",L),o.addEventListener("selectstart",L),o.addEventListener("selectend",L),o.addEventListener("squeeze",L),o.addEventListener("squeezestart",L),o.addEventListener("squeezeend",L),o.addEventListener("end",A),o.addEventListener("inputsourceschange",I),v.xrCompatible!==!0&&await r.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(w),o.renderState.layers===void 0){const j={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(o,r,j),o.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),x=new As(p.framebufferWidth,p.framebufferHeight,{format:ni,type:mi,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let j=null,X=null,Q=null;v.depth&&(Q=v.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,j=v.stencil?ia:Js,X=v.stencil?ra:rr);const ne={colorFormat:r.RGBA8,depthFormat:Q,scaleFactor:s};f=new XRWebGLBinding(o,r),h=f.createProjectionLayer(ne),o.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),x=new As(h.textureWidth,h.textureHeight,{format:ni,type:mi,depthTexture:new wc(h.textureWidth,h.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await o.requestReferenceSpace(l),J.setContext(o),J.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function I(z){for(let j=0;j<z.removed.length;j++){const X=z.removed[j],Q=S.indexOf(X);Q>=0&&(S[Q]=null,_[Q].disconnect(X))}for(let j=0;j<z.added.length;j++){const X=z.added[j];let Q=S.indexOf(X);if(Q===-1){for(let ye=0;ye<_.length;ye++)if(ye>=S.length){S.push(X),Q=ye;break}else if(S[ye]===null){S[ye]=X,Q=ye;break}if(Q===-1)break}const ne=_[Q];ne&&ne.connect(X)}}const P=new Y,F=new Y;function O(z,j,X){P.setFromMatrixPosition(j.matrixWorld),F.setFromMatrixPosition(X.matrixWorld);const Q=P.distanceTo(F),ne=j.projectionMatrix.elements,ye=X.projectionMatrix.elements,me=ne[14]/(ne[10]-1),fe=ne[14]/(ne[10]+1),le=(ne[9]+1)/ne[5],ge=(ne[9]-1)/ne[5],q=(ne[8]-1)/ne[0],ve=(ye[8]+1)/ye[0],be=me*q,xe=me*ve,we=Q/(-q+ve),qe=we*-q;if(j.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(qe),z.translateZ(we),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert(),ne[10]===-1)z.projectionMatrix.copy(j.projectionMatrix),z.projectionMatrixInverse.copy(j.projectionMatrixInverse);else{const Fe=me+we,H=fe+we,B=be-qe,K=xe+(Q-qe),oe=le*fe/H*Fe,pe=ge*fe/H*Fe;z.projectionMatrix.makePerspective(B,K,oe,pe,Fe,H),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}}function V(z,j){j===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(j.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(o===null)return;let j=z.near,X=z.far;y.texture!==null&&(y.depthNear>0&&(j=y.depthNear),y.depthFar>0&&(X=y.depthFar)),R.near=T.near=E.near=j,R.far=T.far=E.far=X,(N!==R.near||D!==R.far)&&(o.updateRenderState({depthNear:R.near,depthFar:R.far}),N=R.near,D=R.far),E.layers.mask=z.layers.mask|2,T.layers.mask=z.layers.mask|4,R.layers.mask=E.layers.mask|T.layers.mask;const Q=z.parent,ne=R.cameras;V(R,Q);for(let ye=0;ye<ne.length;ye++)V(ne[ye],Q);ne.length===2?O(R,E,T):R.projectionMatrix.copy(E.projectionMatrix),U(z,R,Q)};function U(z,j,X){X===null?z.matrix.copy(j.matrixWorld):(z.matrix.copy(X.matrixWorld),z.matrix.invert(),z.matrix.multiply(j.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(j.projectionMatrix),z.projectionMatrixInverse.copy(j.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=jf*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(h===null&&p===null))return c},this.setFoveation=function(z){c=z,h!==null&&(h.fixedFoveation=z),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=z)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(R)};let k=null;function W(z,j){if(d=j.getViewerPose(u||a),g=j,d!==null){const X=d.views;p!==null&&(e.setRenderTargetFramebuffer(x,p.framebuffer),e.setRenderTarget(x));let Q=!1;X.length!==R.cameras.length&&(R.cameras.length=0,Q=!0);for(let ye=0;ye<X.length;ye++){const me=X[ye];let fe=null;if(p!==null)fe=p.getViewport(me);else{const ge=f.getViewSubImage(h,me);fe=ge.viewport,ye===0&&(e.setRenderTargetTextures(x,ge.colorTexture,h.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(x))}let le=M[ye];le===void 0&&(le=new Ti,le.layers.enable(ye),le.viewport=new qt,M[ye]=le),le.matrix.fromArray(me.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(me.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(fe.x,fe.y,fe.width,fe.height),ye===0&&(R.matrix.copy(le.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Q===!0&&R.cameras.push(le)}const ne=o.enabledFeatures;if(ne&&ne.includes("depth-sensing")){const ye=f.getDepthInformation(X[0]);ye&&ye.isValid&&ye.texture&&y.init(e,ye,o.renderState)}}for(let X=0;X<_.length;X++){const Q=S[X],ne=_[X];Q!==null&&ne!==void 0&&ne.update(Q,j,u||a)}k&&k(z,j),j.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:j}),g=null}const J=new Jk;J.setAnimationLoop(W),this.setAnimationLoop=function(z){k=z},this.dispose=function(){}}}const Fc=new Mo,Ame=new fn;function Nme(n,e){function r(v,m){v.matrixAutoUpdate===!0&&v.updateMatrix(),m.value.copy(v.matrix)}function i(v,m){m.color.getRGB(v.fogColor.value,zk(n)),m.isFog?(v.fogNear.value=m.near,v.fogFar.value=m.far):m.isFogExp2&&(v.fogDensity.value=m.density)}function o(v,m,x,_,S){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(v,m):m.isMeshToonMaterial?(s(v,m),f(v,m)):m.isMeshPhongMaterial?(s(v,m),d(v,m)):m.isMeshStandardMaterial?(s(v,m),h(v,m),m.isMeshPhysicalMaterial&&p(v,m,S)):m.isMeshMatcapMaterial?(s(v,m),g(v,m)):m.isMeshDepthMaterial?s(v,m):m.isMeshDistanceMaterial?(s(v,m),y(v,m)):m.isMeshNormalMaterial?s(v,m):m.isLineBasicMaterial?(a(v,m),m.isLineDashedMaterial&&l(v,m)):m.isPointsMaterial?c(v,m,x,_):m.isSpriteMaterial?u(v,m):m.isShadowMaterial?(v.color.value.copy(m.color),v.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(v,m){v.opacity.value=m.opacity,m.color&&v.diffuse.value.copy(m.color),m.emissive&&v.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(v.map.value=m.map,r(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.bumpMap&&(v.bumpMap.value=m.bumpMap,r(m.bumpMap,v.bumpMapTransform),v.bumpScale.value=m.bumpScale,m.side===er&&(v.bumpScale.value*=-1)),m.normalMap&&(v.normalMap.value=m.normalMap,r(m.normalMap,v.normalMapTransform),v.normalScale.value.copy(m.normalScale),m.side===er&&v.normalScale.value.negate()),m.displacementMap&&(v.displacementMap.value=m.displacementMap,r(m.displacementMap,v.displacementMapTransform),v.displacementScale.value=m.displacementScale,v.displacementBias.value=m.displacementBias),m.emissiveMap&&(v.emissiveMap.value=m.emissiveMap,r(m.emissiveMap,v.emissiveMapTransform)),m.specularMap&&(v.specularMap.value=m.specularMap,r(m.specularMap,v.specularMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);const x=e.get(m),_=x.envMap,S=x.envMapRotation;_&&(v.envMap.value=_,Fc.copy(S),Fc.x*=-1,Fc.y*=-1,Fc.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Fc.y*=-1,Fc.z*=-1),v.envMapRotation.value.setFromMatrix4(Ame.makeRotationFromEuler(Fc)),v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=m.reflectivity,v.ior.value=m.ior,v.refractionRatio.value=m.refractionRatio),m.lightMap&&(v.lightMap.value=m.lightMap,v.lightMapIntensity.value=m.lightMapIntensity,r(m.lightMap,v.lightMapTransform)),m.aoMap&&(v.aoMap.value=m.aoMap,v.aoMapIntensity.value=m.aoMapIntensity,r(m.aoMap,v.aoMapTransform))}function a(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,m.map&&(v.map.value=m.map,r(m.map,v.mapTransform))}function l(v,m){v.dashSize.value=m.dashSize,v.totalSize.value=m.dashSize+m.gapSize,v.scale.value=m.scale}function c(v,m,x,_){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.size.value=m.size*x,v.scale.value=_*.5,m.map&&(v.map.value=m.map,r(m.map,v.uvTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function u(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.rotation.value=m.rotation,m.map&&(v.map.value=m.map,r(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function d(v,m){v.specular.value.copy(m.specular),v.shininess.value=Math.max(m.shininess,1e-4)}function f(v,m){m.gradientMap&&(v.gradientMap.value=m.gradientMap)}function h(v,m){v.metalness.value=m.metalness,m.metalnessMap&&(v.metalnessMap.value=m.metalnessMap,r(m.metalnessMap,v.metalnessMapTransform)),v.roughness.value=m.roughness,m.roughnessMap&&(v.roughnessMap.value=m.roughnessMap,r(m.roughnessMap,v.roughnessMapTransform)),m.envMap&&(v.envMapIntensity.value=m.envMapIntensity)}function p(v,m,x){v.ior.value=m.ior,m.sheen>0&&(v.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),v.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(v.sheenColorMap.value=m.sheenColorMap,r(m.sheenColorMap,v.sheenColorMapTransform)),m.sheenRoughnessMap&&(v.sheenRoughnessMap.value=m.sheenRoughnessMap,r(m.sheenRoughnessMap,v.sheenRoughnessMapTransform))),m.clearcoat>0&&(v.clearcoat.value=m.clearcoat,v.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(v.clearcoatMap.value=m.clearcoatMap,r(m.clearcoatMap,v.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,r(m.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(v.clearcoatNormalMap.value=m.clearcoatNormalMap,r(m.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===er&&v.clearcoatNormalScale.value.negate())),m.dispersion>0&&(v.dispersion.value=m.dispersion),m.iridescence>0&&(v.iridescence.value=m.iridescence,v.iridescenceIOR.value=m.iridescenceIOR,v.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(v.iridescenceMap.value=m.iridescenceMap,r(m.iridescenceMap,v.iridescenceMapTransform)),m.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=m.iridescenceThicknessMap,r(m.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),m.transmission>0&&(v.transmission.value=m.transmission,v.transmissionSamplerMap.value=x.texture,v.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(v.transmissionMap.value=m.transmissionMap,r(m.transmissionMap,v.transmissionMapTransform)),v.thickness.value=m.thickness,m.thicknessMap&&(v.thicknessMap.value=m.thicknessMap,r(m.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=m.attenuationDistance,v.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(v.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(v.anisotropyMap.value=m.anisotropyMap,r(m.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=m.specularIntensity,v.specularColor.value.copy(m.specularColor),m.specularColorMap&&(v.specularColorMap.value=m.specularColorMap,r(m.specularColorMap,v.specularColorMapTransform)),m.specularIntensityMap&&(v.specularIntensityMap.value=m.specularIntensityMap,r(m.specularIntensityMap,v.specularIntensityMapTransform))}function g(v,m){m.matcap&&(v.matcap.value=m.matcap)}function y(v,m){const x=e.get(m).light;v.referencePosition.value.setFromMatrixPosition(x.matrixWorld),v.nearDistance.value=x.shadow.camera.near,v.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function Pme(n,e,r,i){let o={},s={},a=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(x,_){const S=_.program;i.uniformBlockBinding(x,S)}function u(x,_){let S=o[x.id];S===void 0&&(g(x),S=d(x),o[x.id]=S,x.addEventListener("dispose",v));const w=_.program;i.updateUBOMapping(x,w);const C=e.render.frame;s[x.id]!==C&&(h(x),s[x.id]=C)}function d(x){const _=f();x.__bindingPointIndex=_;const S=n.createBuffer(),w=x.__size,C=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,w,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,S),S}function f(){for(let x=0;x<l;x++)if(a.indexOf(x)===-1)return a.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const _=o[x.id],S=x.uniforms,w=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let C=0,E=S.length;C<E;C++){const T=Array.isArray(S[C])?S[C]:[S[C]];for(let M=0,R=T.length;M<R;M++){const N=T[M];if(p(N,C,M,w)===!0){const D=N.__offset,L=Array.isArray(N.value)?N.value:[N.value];let A=0;for(let I=0;I<L.length;I++){const P=L[I],F=y(P);typeof P=="number"||typeof P=="boolean"?(N.__data[0]=P,n.bufferSubData(n.UNIFORM_BUFFER,D+A,N.__data)):P.isMatrix3?(N.__data[0]=P.elements[0],N.__data[1]=P.elements[1],N.__data[2]=P.elements[2],N.__data[3]=0,N.__data[4]=P.elements[3],N.__data[5]=P.elements[4],N.__data[6]=P.elements[5],N.__data[7]=0,N.__data[8]=P.elements[6],N.__data[9]=P.elements[7],N.__data[10]=P.elements[8],N.__data[11]=0):(P.toArray(N.__data,A),A+=F.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(x,_,S,w){const C=x.value,E=_+"_"+S;if(w[E]===void 0)return typeof C=="number"||typeof C=="boolean"?w[E]=C:w[E]=C.clone(),!0;{const T=w[E];if(typeof C=="number"||typeof C=="boolean"){if(T!==C)return w[E]=C,!0}else if(T.equals(C)===!1)return T.copy(C),!0}return!1}function g(x){const _=x.uniforms;let S=0;const w=16;for(let E=0,T=_.length;E<T;E++){const M=Array.isArray(_[E])?_[E]:[_[E]];for(let R=0,N=M.length;R<N;R++){const D=M[R],L=Array.isArray(D.value)?D.value:[D.value];for(let A=0,I=L.length;A<I;A++){const P=L[A],F=y(P),O=S%w,V=O%F.boundary,U=O+V;S+=V,U!==0&&w-U<F.storage&&(S+=w-U),D.__data=new Float32Array(F.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=S,S+=F.storage}}}const C=S%w;return C>0&&(S+=w-C),x.__size=S,x.__cache={},this}function y(x){const _={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(_.boundary=4,_.storage=4):x.isVector2?(_.boundary=8,_.storage=8):x.isVector3||x.isColor?(_.boundary=16,_.storage=12):x.isVector4?(_.boundary=16,_.storage=16):x.isMatrix3?(_.boundary=48,_.storage=48):x.isMatrix4?(_.boundary=64,_.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),_}function v(x){const _=x.target;_.removeEventListener("dispose",v);const S=a.indexOf(_.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(o[_.id]),delete o[_.id],delete s[_.id]}function m(){for(const x in o)n.deleteBuffer(o[x]);a=[],o={},s={}}return{bind:c,update:u,dispose:m}}class Ome{constructor(e={}){const{canvas:r=Fk(),context:i=null,depth:o=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=a;const g=new Uint32Array(4),y=new Int32Array(4);let v=null,m=null;const x=[],_=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Lt,this.toneMapping=to,this.toneMappingExposure=1;const S=this;let w=!1,C=0,E=0,T=null,M=-1,R=null;const N=new qt,D=new qt;let L=null;const A=new Mt(0);let I=0,P=r.width,F=r.height,O=1,V=null,U=null;const k=new qt(0,0,P,F),W=new qt(0,0,P,F);let J=!1;const z=new b_;let j=!1,X=!1;const Q=new fn,ne=new fn,ye=new Y,me=new qt,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let le=!1;function ge(){return T===null?O:1}let q=i;function ve($,Z){return r.getContext($,Z)}try{const $={alpha:!0,depth:o,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${sh}`),r.addEventListener("webglcontextlost",Oe,!1),r.addEventListener("webglcontextrestored",Ze,!1),r.addEventListener("webglcontextcreationerror",We,!1),q===null){const Z="webgl2";if(q=ve(Z,$),q===null)throw ve(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let be,xe,we,qe,Fe,H,B,K,oe,pe,ce,Ue,Re,Le,Je,Me,ze,Ee,Pe,ke,Ve,$e,xt,te;function Qe(){be=new khe(q),be.init(),$e=new wme(q,be),xe=new Lhe(q,be,e,$e),we=new bme(q,be),xe.reverseDepthBuffer&&h&&we.buffers.depth.setReversed(!0),qe=new Hhe(q),Fe=new lme,H=new Sme(q,be,we,Fe,xe,$e,qe),B=new Uhe(S),K=new zhe(S),oe=new Que(q),xt=new Ihe(q,oe),pe=new Vhe(q,oe,qe,xt),ce=new Whe(q,pe,oe,qe),Pe=new jhe(q,xe,H),Me=new Fhe(Fe),Ue=new ame(S,B,K,be,xe,xt,Me),Re=new Nme(S,Fe),Le=new ume,Je=new gme(be),Ee=new Ohe(S,B,K,we,ce,p,c),ze=new xme(S,ce,xe),te=new Pme(q,qe,xe,we),ke=new Dhe(q,be,qe),Ve=new Ghe(q,be,qe),qe.programs=Ue.programs,S.capabilities=xe,S.extensions=be,S.properties=Fe,S.renderLists=Le,S.shadowMap=ze,S.state=we,S.info=qe}Qe();const Se=new Rme(S,q);this.xr=Se,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const $=be.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=be.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function($){$!==void 0&&(O=$,this.setSize(P,F,!1))},this.getSize=function($){return $.set(P,F)},this.setSize=function($,Z,de=!0){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=$,F=Z,r.width=Math.floor($*O),r.height=Math.floor(Z*O),de===!0&&(r.style.width=$+"px",r.style.height=Z+"px"),this.setViewport(0,0,$,Z)},this.getDrawingBufferSize=function($){return $.set(P*O,F*O).floor()},this.setDrawingBufferSize=function($,Z,de){P=$,F=Z,O=de,r.width=Math.floor($*de),r.height=Math.floor(Z*de),this.setViewport(0,0,$,Z)},this.getCurrentViewport=function($){return $.copy(N)},this.getViewport=function($){return $.copy(k)},this.setViewport=function($,Z,de,he){$.isVector4?k.set($.x,$.y,$.z,$.w):k.set($,Z,de,he),we.viewport(N.copy(k).multiplyScalar(O).round())},this.getScissor=function($){return $.copy(W)},this.setScissor=function($,Z,de,he){$.isVector4?W.set($.x,$.y,$.z,$.w):W.set($,Z,de,he),we.scissor(D.copy(W).multiplyScalar(O).round())},this.getScissorTest=function(){return J},this.setScissorTest=function($){we.setScissorTest(J=$)},this.setOpaqueSort=function($){V=$},this.setTransparentSort=function($){U=$},this.getClearColor=function($){return $.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function($=!0,Z=!0,de=!0){let he=0;if($){let ae=!1;if(T!==null){const Ge=T.texture.format;ae=Ge===ch||Ge===lh||Ge===ah}if(ae){const Ge=T.texture.type,at=Ge===mi||Ge===rr||Ge===Cs||Ge===ra||Ge===h_||Ge===p_,ht=Ee.getClearColor(),mt=Ee.getClearAlpha(),Et=ht.r,Ye=ht.g,et=ht.b;at?(g[0]=Et,g[1]=Ye,g[2]=et,g[3]=mt,q.clearBufferuiv(q.COLOR,0,g)):(y[0]=Et,y[1]=Ye,y[2]=et,y[3]=mt,q.clearBufferiv(q.COLOR,0,y))}else he|=q.COLOR_BUFFER_BIT}Z&&(he|=q.DEPTH_BUFFER_BIT),de&&(he|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Oe,!1),r.removeEventListener("webglcontextrestored",Ze,!1),r.removeEventListener("webglcontextcreationerror",We,!1),Ee.dispose(),Le.dispose(),Je.dispose(),Fe.dispose(),B.dispose(),K.dispose(),ce.dispose(),xt.dispose(),te.dispose(),Ue.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",bn),Se.removeEventListener("sessionend",Ke),ot.stop()};function Oe($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const $=qe.autoReset,Z=ze.enabled,de=ze.autoUpdate,he=ze.needsUpdate,ae=ze.type;Qe(),qe.autoReset=$,ze.enabled=Z,ze.autoUpdate=de,ze.needsUpdate=he,ze.type=ae}function We($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function wt($){const Z=$.target;Z.removeEventListener("dispose",wt),At(Z)}function At($){dt($),Fe.remove($)}function dt($){const Z=Fe.get($).programs;Z!==void 0&&(Z.forEach(function(de){Ue.releaseProgram(de)}),$.isShaderMaterial&&Ue.releaseShaderCache($))}this.renderBufferDirect=function($,Z,de,he,ae,Ge){Z===null&&(Z=fe);const at=ae.isMesh&&ae.matrixWorld.determinant()<0,ht=En($,Z,de,he,ae);we.setMaterial(he,at);let mt=de.index,Et=1;if(he.wireframe===!0){if(mt=pe.getWireframeAttribute(de),mt===void 0)return;Et=2}const Ye=de.drawRange,et=de.attributes.position;let _t=Ye.start*Et,zt=(Ye.start+Ye.count)*Et;Ge!==null&&(_t=Math.max(_t,Ge.start*Et),zt=Math.min(zt,(Ge.start+Ge.count)*Et)),mt!==null?(_t=Math.max(_t,0),zt=Math.min(zt,mt.count)):et!=null&&(_t=Math.max(_t,0),zt=Math.min(zt,et.count));const pn=zt-_t;if(pn<0||pn===1/0)return;xt.setup(ae,he,ht,de,mt);let dn,kt=ke;if(mt!==null&&(dn=oe.get(mt),kt=Ve,kt.setIndex(dn)),ae.isMesh)he.wireframe===!0?(we.setLineWidth(he.wireframeLinewidth*ge()),kt.setMode(q.LINES)):kt.setMode(q.TRIANGLES);else if(ae.isLine){let Nt=he.linewidth;Nt===void 0&&(Nt=1),we.setLineWidth(Nt*ge()),ae.isLineSegments?kt.setMode(q.LINES):ae.isLineLoop?kt.setMode(q.LINE_LOOP):kt.setMode(q.LINE_STRIP)}else ae.isPoints?kt.setMode(q.POINTS):ae.isSprite&&kt.setMode(q.TRIANGLES);if(ae.isBatchedMesh)if(ae._multiDrawInstances!==null)kt.renderMultiDrawInstances(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount,ae._multiDrawInstances);else if(be.get("WEBGL_multi_draw"))kt.renderMultiDraw(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount);else{const Nt=ae._multiDrawStarts,$n=ae._multiDrawCounts,Wt=ae._multiDrawCount,Pr=mt?oe.get(mt).bytesPerElement:1,Gt=Fe.get(he).currentProgram.getUniforms();for(let Ot=0;Ot<Wt;Ot++)Gt.setValue(q,"_gl_DrawID",Ot),kt.render(Nt[Ot]/Pr,$n[Ot])}else if(ae.isInstancedMesh)kt.renderInstances(_t,pn,ae.count);else if(de.isInstancedBufferGeometry){const Nt=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,$n=Math.min(de.instanceCount,Nt);kt.renderInstances(_t,pn,$n)}else kt.render(_t,pn)};function Xe($,Z,de){$.transparent===!0&&$.side===Ri&&$.forceSinglePass===!1?($.side=er,$.needsUpdate=!0,un($,Z,de),$.side=Ps,$.needsUpdate=!0,un($,Z,de),$.side=Ri):un($,Z,de)}this.compile=function($,Z,de=null){de===null&&(de=$),m=Je.get(de),m.init(Z),_.push(m),de.traverseVisible(function(ae){ae.isLight&&ae.layers.test(Z.layers)&&(m.pushLight(ae),ae.castShadow&&m.pushShadow(ae))}),$!==de&&$.traverseVisible(function(ae){ae.isLight&&ae.layers.test(Z.layers)&&(m.pushLight(ae),ae.castShadow&&m.pushShadow(ae))}),m.setupLights();const he=new Set;return $.traverse(function(ae){if(!(ae.isMesh||ae.isPoints||ae.isLine||ae.isSprite))return;const Ge=ae.material;if(Ge)if(Array.isArray(Ge))for(let at=0;at<Ge.length;at++){const ht=Ge[at];Xe(ht,de,ae),he.add(ht)}else Xe(Ge,de,ae),he.add(Ge)}),_.pop(),m=null,he},this.compileAsync=function($,Z,de=null){const he=this.compile($,Z,de);return new Promise(ae=>{function Ge(){if(he.forEach(function(at){Fe.get(at).currentProgram.isReady()&&he.delete(at)}),he.size===0){ae($);return}setTimeout(Ge,10)}be.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let rt=null;function Ft($){rt&&rt($)}function bn(){ot.stop()}function Ke(){ot.start()}const ot=new Jk;ot.setAnimationLoop(Ft),typeof self<"u"&&ot.setContext(self),this.setAnimationLoop=function($){rt=$,Se.setAnimationLoop($),$===null?ot.stop():ot.start()},Se.addEventListener("sessionstart",bn),Se.addEventListener("sessionend",Ke),this.render=function($,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(Z),Z=Se.getCamera()),$.isScene===!0&&$.onBeforeRender(S,$,Z,T),m=Je.get($,_.length),m.init(Z),_.push(m),ne.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),z.setFromProjectionMatrix(ne),X=this.localClippingEnabled,j=Me.init(this.clippingPlanes,X),v=Le.get($,x.length),v.init(),x.push(v),Se.enabled===!0&&Se.isPresenting===!0){const Ge=S.xr.getDepthSensingMesh();Ge!==null&&yt(Ge,Z,-1/0,S.sortObjects)}yt($,Z,0,S.sortObjects),v.finish(),S.sortObjects===!0&&v.sort(V,U),le=Se.enabled===!1||Se.isPresenting===!1||Se.hasDepthSensing()===!1,le&&Ee.addToRenderList(v,$),this.info.render.frame++,j===!0&&Me.beginShadows();const de=m.state.shadowsArray;ze.render(de,$,Z),j===!0&&Me.endShadows(),this.info.autoReset===!0&&this.info.reset();const he=v.opaque,ae=v.transmissive;if(m.setupLights(),Z.isArrayCamera){const Ge=Z.cameras;if(ae.length>0)for(let at=0,ht=Ge.length;at<ht;at++){const mt=Ge[at];bt(he,ae,$,mt)}le&&Ee.render($);for(let at=0,ht=Ge.length;at<ht;at++){const mt=Ge[at];ft(v,$,mt,mt.viewport)}}else ae.length>0&&bt(he,ae,$,Z),le&&Ee.render($),ft(v,$,Z);T!==null&&(H.updateMultisampleRenderTarget(T),H.updateRenderTargetMipmap(T)),$.isScene===!0&&$.onAfterRender(S,$,Z),xt.resetDefaultState(),M=-1,R=null,_.pop(),_.length>0?(m=_[_.length-1],j===!0&&Me.setGlobalState(S.clippingPlanes,m.state.camera)):m=null,x.pop(),x.length>0?v=x[x.length-1]:v=null};function yt($,Z,de,he){if($.visible===!1)return;if($.layers.test(Z.layers)){if($.isGroup)de=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(Z);else if($.isLight)m.pushLight($),$.castShadow&&m.pushShadow($);else if($.isSprite){if(!$.frustumCulled||z.intersectsSprite($)){he&&me.setFromMatrixPosition($.matrixWorld).applyMatrix4(ne);const at=ce.update($),ht=$.material;ht.visible&&v.push($,at,ht,de,me.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||z.intersectsObject($))){const at=ce.update($),ht=$.material;if(he&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),me.copy($.boundingSphere.center)):(at.boundingSphere===null&&at.computeBoundingSphere(),me.copy(at.boundingSphere.center)),me.applyMatrix4($.matrixWorld).applyMatrix4(ne)),Array.isArray(ht)){const mt=at.groups;for(let Et=0,Ye=mt.length;Et<Ye;Et++){const et=mt[Et],_t=ht[et.materialIndex];_t&&_t.visible&&v.push($,at,_t,de,me.z,et)}}else ht.visible&&v.push($,at,ht,de,me.z,null)}}const Ge=$.children;for(let at=0,ht=Ge.length;at<ht;at++)yt(Ge[at],Z,de,he)}function ft($,Z,de,he){const ae=$.opaque,Ge=$.transmissive,at=$.transparent;m.setupLightsView(de),j===!0&&Me.setGlobalState(S.clippingPlanes,de),he&&we.viewport(N.copy(he)),ae.length>0&&Dt(ae,Z,de),Ge.length>0&&Dt(Ge,Z,de),at.length>0&&Dt(at,Z,de),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function bt($,Z,de,he){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[he.id]===void 0&&(m.state.transmissionRenderTarget[he.id]=new As(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")||be.has("EXT_color_buffer_float")?Qr:mi,minFilter:Wi,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rn.workingColorSpace}));const Ge=m.state.transmissionRenderTarget[he.id],at=he.viewport||N;Ge.setSize(at.z,at.w);const ht=S.getRenderTarget();S.setRenderTarget(Ge),S.getClearColor(A),I=S.getClearAlpha(),I<1&&S.setClearColor(16777215,.5),S.clear(),le&&Ee.render(de);const mt=S.toneMapping;S.toneMapping=to;const Et=he.viewport;if(he.viewport!==void 0&&(he.viewport=void 0),m.setupLightsView(he),j===!0&&Me.setGlobalState(S.clippingPlanes,he),Dt($,de,he),H.updateMultisampleRenderTarget(Ge),H.updateRenderTargetMipmap(Ge),be.has("WEBGL_multisampled_render_to_texture")===!1){let Ye=!1;for(let et=0,_t=Z.length;et<_t;et++){const zt=Z[et],pn=zt.object,dn=zt.geometry,kt=zt.material,Nt=zt.group;if(kt.side===Ri&&pn.layers.test(he.layers)){const $n=kt.side;kt.side=er,kt.needsUpdate=!0,yn(pn,de,he,dn,kt,Nt),kt.side=$n,kt.needsUpdate=!0,Ye=!0}}Ye===!0&&(H.updateMultisampleRenderTarget(Ge),H.updateRenderTargetMipmap(Ge))}S.setRenderTarget(ht),S.setClearColor(A,I),Et!==void 0&&(he.viewport=Et),S.toneMapping=mt}function Dt($,Z,de){const he=Z.isScene===!0?Z.overrideMaterial:null;for(let ae=0,Ge=$.length;ae<Ge;ae++){const at=$[ae],ht=at.object,mt=at.geometry,Et=he===null?at.material:he,Ye=at.group;ht.layers.test(de.layers)&&yn(ht,Z,de,mt,Et,Ye)}}function yn($,Z,de,he,ae,Ge){$.onBeforeRender(S,Z,de,he,ae,Ge),$.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ae.onBeforeRender(S,Z,de,he,$,Ge),ae.transparent===!0&&ae.side===Ri&&ae.forceSinglePass===!1?(ae.side=er,ae.needsUpdate=!0,S.renderBufferDirect(de,Z,he,ae,$,Ge),ae.side=Ps,ae.needsUpdate=!0,S.renderBufferDirect(de,Z,he,ae,$,Ge),ae.side=Ri):S.renderBufferDirect(de,Z,he,ae,$,Ge),$.onAfterRender(S,Z,de,he,ae,Ge)}function un($,Z,de){Z.isScene!==!0&&(Z=fe);const he=Fe.get($),ae=m.state.lights,Ge=m.state.shadowsArray,at=ae.state.version,ht=Ue.getParameters($,ae.state,Ge,Z,de),mt=Ue.getProgramCacheKey(ht);let Et=he.programs;he.environment=$.isMeshStandardMaterial?Z.environment:null,he.fog=Z.fog,he.envMap=($.isMeshStandardMaterial?K:B).get($.envMap||he.environment),he.envMapRotation=he.environment!==null&&$.envMap===null?Z.environmentRotation:$.envMapRotation,Et===void 0&&($.addEventListener("dispose",wt),Et=new Map,he.programs=Et);let Ye=Et.get(mt);if(Ye!==void 0){if(he.currentProgram===Ye&&he.lightsStateVersion===at)return en($,ht),Ye}else ht.uniforms=Ue.getUniforms($),$.onBeforeCompile(ht,S),Ye=Ue.acquireProgram(ht,mt),Et.set(mt,Ye),he.uniforms=ht.uniforms;const et=he.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(et.clippingPlanes=Me.uniform),en($,ht),he.needsLights=Vn($),he.lightsStateVersion=at,he.needsLights&&(et.ambientLightColor.value=ae.state.ambient,et.lightProbe.value=ae.state.probe,et.directionalLights.value=ae.state.directional,et.directionalLightShadows.value=ae.state.directionalShadow,et.spotLights.value=ae.state.spot,et.spotLightShadows.value=ae.state.spotShadow,et.rectAreaLights.value=ae.state.rectArea,et.ltc_1.value=ae.state.rectAreaLTC1,et.ltc_2.value=ae.state.rectAreaLTC2,et.pointLights.value=ae.state.point,et.pointLightShadows.value=ae.state.pointShadow,et.hemisphereLights.value=ae.state.hemi,et.directionalShadowMap.value=ae.state.directionalShadowMap,et.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,et.spotShadowMap.value=ae.state.spotShadowMap,et.spotLightMatrix.value=ae.state.spotLightMatrix,et.spotLightMap.value=ae.state.spotLightMap,et.pointShadowMap.value=ae.state.pointShadowMap,et.pointShadowMatrix.value=ae.state.pointShadowMatrix),he.currentProgram=Ye,he.uniformsList=null,Ye}function Bn($){if($.uniformsList===null){const Z=$.currentProgram.getUniforms();$.uniformsList=L0.seqWithValue(Z.seq,$.uniforms)}return $.uniformsList}function en($,Z){const de=Fe.get($);de.outputColorSpace=Z.outputColorSpace,de.batching=Z.batching,de.batchingColor=Z.batchingColor,de.instancing=Z.instancing,de.instancingColor=Z.instancingColor,de.instancingMorph=Z.instancingMorph,de.skinning=Z.skinning,de.morphTargets=Z.morphTargets,de.morphNormals=Z.morphNormals,de.morphColors=Z.morphColors,de.morphTargetsCount=Z.morphTargetsCount,de.numClippingPlanes=Z.numClippingPlanes,de.numIntersection=Z.numClipIntersection,de.vertexAlphas=Z.vertexAlphas,de.vertexTangents=Z.vertexTangents,de.toneMapping=Z.toneMapping}function En($,Z,de,he,ae){Z.isScene!==!0&&(Z=fe),H.resetTextureUnits();const Ge=Z.fog,at=he.isMeshStandardMaterial?Z.environment:null,ht=T===null?S.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:Xo,mt=(he.isMeshStandardMaterial?K:B).get(he.envMap||at),Et=he.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,Ye=!!de.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),et=!!de.morphAttributes.position,_t=!!de.morphAttributes.normal,zt=!!de.morphAttributes.color;let pn=to;he.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(pn=S.toneMapping);const dn=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,kt=dn!==void 0?dn.length:0,Nt=Fe.get(he),$n=m.state.lights;if(j===!0&&(X===!0||$!==R)){const Tn=$===R&&he.id===M;Me.setState(he,$,Tn)}let Wt=!1;he.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==$n.state.version||Nt.outputColorSpace!==ht||ae.isBatchedMesh&&Nt.batching===!1||!ae.isBatchedMesh&&Nt.batching===!0||ae.isBatchedMesh&&Nt.batchingColor===!0&&ae.colorTexture===null||ae.isBatchedMesh&&Nt.batchingColor===!1&&ae.colorTexture!==null||ae.isInstancedMesh&&Nt.instancing===!1||!ae.isInstancedMesh&&Nt.instancing===!0||ae.isSkinnedMesh&&Nt.skinning===!1||!ae.isSkinnedMesh&&Nt.skinning===!0||ae.isInstancedMesh&&Nt.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&Nt.instancingColor===!1&&ae.instanceColor!==null||ae.isInstancedMesh&&Nt.instancingMorph===!0&&ae.morphTexture===null||ae.isInstancedMesh&&Nt.instancingMorph===!1&&ae.morphTexture!==null||Nt.envMap!==mt||he.fog===!0&&Nt.fog!==Ge||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==Me.numPlanes||Nt.numIntersection!==Me.numIntersection)||Nt.vertexAlphas!==Et||Nt.vertexTangents!==Ye||Nt.morphTargets!==et||Nt.morphNormals!==_t||Nt.morphColors!==zt||Nt.toneMapping!==pn||Nt.morphTargetsCount!==kt)&&(Wt=!0):(Wt=!0,Nt.__version=he.version);let Pr=Nt.currentProgram;Wt===!0&&(Pr=un(he,Z,ae));let Gt=!1,Ot=!1,zn=!1;const Kt=Pr.getUniforms(),ln=Nt.uniforms;if(we.useProgram(Pr.program)&&(Gt=!0,Ot=!0,zn=!0),he.id!==M&&(M=he.id,Ot=!0),Gt||R!==$){we.buffers.depth.getReversed()?(Q.copy($.projectionMatrix),Uce(Q),Bce(Q),Kt.setValue(q,"projectionMatrix",Q)):Kt.setValue(q,"projectionMatrix",$.projectionMatrix),Kt.setValue(q,"viewMatrix",$.matrixWorldInverse);const An=Kt.map.cameraPosition;An!==void 0&&An.setValue(q,ye.setFromMatrixPosition($.matrixWorld)),xe.logarithmicDepthBuffer&&Kt.setValue(q,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&Kt.setValue(q,"isOrthographic",$.isOrthographicCamera===!0),R!==$&&(R=$,Ot=!0,zn=!0)}if(ae.isSkinnedMesh){Kt.setOptional(q,ae,"bindMatrix"),Kt.setOptional(q,ae,"bindMatrixInverse");const Tn=ae.skeleton;Tn&&(Tn.boneTexture===null&&Tn.computeBoneTexture(),Kt.setValue(q,"boneTexture",Tn.boneTexture,H))}ae.isBatchedMesh&&(Kt.setOptional(q,ae,"batchingTexture"),Kt.setValue(q,"batchingTexture",ae._matricesTexture,H),Kt.setOptional(q,ae,"batchingIdTexture"),Kt.setValue(q,"batchingIdTexture",ae._indirectTexture,H),Kt.setOptional(q,ae,"batchingColorTexture"),ae._colorsTexture!==null&&Kt.setValue(q,"batchingColorTexture",ae._colorsTexture,H));const mn=de.morphAttributes;if((mn.position!==void 0||mn.normal!==void 0||mn.color!==void 0)&&Pe.update(ae,de,Pr),(Ot||Nt.receiveShadow!==ae.receiveShadow)&&(Nt.receiveShadow=ae.receiveShadow,Kt.setValue(q,"receiveShadow",ae.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(ln.envMap.value=mt,ln.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),he.isMeshStandardMaterial&&he.envMap===null&&Z.environment!==null&&(ln.envMapIntensity.value=Z.environmentIntensity),Ot&&(Kt.setValue(q,"toneMappingExposure",S.toneMappingExposure),Nt.needsLights&&ar(ln,zn),Ge&&he.fog===!0&&Re.refreshFogUniforms(ln,Ge),Re.refreshMaterialUniforms(ln,he,O,F,m.state.transmissionRenderTarget[$.id]),L0.upload(q,Bn(Nt),ln,H)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(L0.upload(q,Bn(Nt),ln,H),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&Kt.setValue(q,"center",ae.center),Kt.setValue(q,"modelViewMatrix",ae.modelViewMatrix),Kt.setValue(q,"normalMatrix",ae.normalMatrix),Kt.setValue(q,"modelMatrix",ae.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const Tn=he.uniformsGroups;for(let An=0,_i=Tn.length;An<_i;An++){const Or=Tn[An];te.update(Or,Pr),te.bind(Or,Pr)}}return Pr}function ar($,Z){$.ambientLightColor.needsUpdate=Z,$.lightProbe.needsUpdate=Z,$.directionalLights.needsUpdate=Z,$.directionalLightShadows.needsUpdate=Z,$.pointLights.needsUpdate=Z,$.pointLightShadows.needsUpdate=Z,$.spotLights.needsUpdate=Z,$.spotLightShadows.needsUpdate=Z,$.rectAreaLights.needsUpdate=Z,$.hemisphereLights.needsUpdate=Z}function Vn($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function($,Z,de){Fe.get($.texture).__webglTexture=Z,Fe.get($.depthTexture).__webglTexture=de;const he=Fe.get($);he.__hasExternalTextures=!0,he.__autoAllocateDepthBuffer=de===void 0,he.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),he.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function($,Z){const de=Fe.get($);de.__webglFramebuffer=Z,de.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function($,Z=0,de=0){T=$,C=Z,E=de;let he=!0,ae=null,Ge=!1,at=!1;if($){const mt=Fe.get($);if(mt.__useDefaultFramebuffer!==void 0)we.bindFramebuffer(q.FRAMEBUFFER,null),he=!1;else if(mt.__webglFramebuffer===void 0)H.setupRenderTarget($);else if(mt.__hasExternalTextures)H.rebindTextures($,Fe.get($.texture).__webglTexture,Fe.get($.depthTexture).__webglTexture);else if($.depthBuffer){const et=$.depthTexture;if(mt.__boundDepthTexture!==et){if(et!==null&&Fe.has(et)&&($.width!==et.image.width||$.height!==et.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");H.setupDepthRenderbuffer($)}}const Et=$.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(at=!0);const Ye=Fe.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Ye[Z])?ae=Ye[Z][de]:ae=Ye[Z],Ge=!0):$.samples>0&&H.useMultisampledRTT($)===!1?ae=Fe.get($).__webglMultisampledFramebuffer:Array.isArray(Ye)?ae=Ye[de]:ae=Ye,N.copy($.viewport),D.copy($.scissor),L=$.scissorTest}else N.copy(k).multiplyScalar(O).floor(),D.copy(W).multiplyScalar(O).floor(),L=J;if(we.bindFramebuffer(q.FRAMEBUFFER,ae)&&he&&we.drawBuffers($,ae),we.viewport(N),we.scissor(D),we.setScissorTest(L),Ge){const mt=Fe.get($.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+Z,mt.__webglTexture,de)}else if(at){const mt=Fe.get($.texture),Et=Z||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,mt.__webglTexture,de||0,Et)}M=-1},this.readRenderTargetPixels=function($,Z,de,he,ae,Ge,at){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ht=Fe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&at!==void 0&&(ht=ht[at]),ht){we.bindFramebuffer(q.FRAMEBUFFER,ht);try{const mt=$.texture,Et=mt.format,Ye=mt.type;if(!xe.textureFormatReadable(Et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!xe.textureTypeReadable(Ye)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=$.width-he&&de>=0&&de<=$.height-ae&&q.readPixels(Z,de,he,ae,$e.convert(Et),$e.convert(Ye),Ge)}finally{const mt=T!==null?Fe.get(T).__webglFramebuffer:null;we.bindFramebuffer(q.FRAMEBUFFER,mt)}}},this.readRenderTargetPixelsAsync=async function($,Z,de,he,ae,Ge,at){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ht=Fe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&at!==void 0&&(ht=ht[at]),ht){const mt=$.texture,Et=mt.format,Ye=mt.type;if(!xe.textureFormatReadable(Et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!xe.textureTypeReadable(Ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Z>=0&&Z<=$.width-he&&de>=0&&de<=$.height-ae){we.bindFramebuffer(q.FRAMEBUFFER,ht);const et=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,et),q.bufferData(q.PIXEL_PACK_BUFFER,Ge.byteLength,q.STREAM_READ),q.readPixels(Z,de,he,ae,$e.convert(Et),$e.convert(Ye),0);const _t=T!==null?Fe.get(T).__webglFramebuffer:null;we.bindFramebuffer(q.FRAMEBUFFER,_t);const zt=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await Fce(q,zt,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,et),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Ge),q.deleteBuffer(et),q.deleteSync(zt),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function($,Z=null,de=0){$.isTexture!==!0&&(qc("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Z=arguments[0]||null,$=arguments[1]);const he=Math.pow(2,-de),ae=Math.floor($.image.width*he),Ge=Math.floor($.image.height*he),at=Z!==null?Z.x:0,ht=Z!==null?Z.y:0;H.setTexture2D($,0),q.copyTexSubImage2D(q.TEXTURE_2D,de,0,0,at,ht,ae,Ge),we.unbindTexture()};const Nr=q.createFramebuffer(),vt=q.createFramebuffer();this.copyTextureToTexture=function($,Z,de=null,he=null,ae=0,Ge=null){$.isTexture!==!0&&(qc("WebGLRenderer: copyTextureToTexture function signature has changed."),he=arguments[0]||null,$=arguments[1],Z=arguments[2],Ge=arguments[3]||0,de=null),Ge===null&&(ae!==0?(qc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=ae,ae=0):Ge=0);let at,ht,mt,Et,Ye,et,_t,zt,pn;const dn=$.isCompressedTexture?$.mipmaps[Ge]:$.image;if(de!==null)at=de.max.x-de.min.x,ht=de.max.y-de.min.y,mt=de.isBox3?de.max.z-de.min.z:1,Et=de.min.x,Ye=de.min.y,et=de.isBox3?de.min.z:0;else{const mn=Math.pow(2,-ae);at=Math.floor(dn.width*mn),ht=Math.floor(dn.height*mn),$.isDataArrayTexture?mt=dn.depth:$.isData3DTexture?mt=Math.floor(dn.depth*mn):mt=1,Et=0,Ye=0,et=0}he!==null?(_t=he.x,zt=he.y,pn=he.z):(_t=0,zt=0,pn=0);const kt=$e.convert(Z.format),Nt=$e.convert(Z.type);let $n;Z.isData3DTexture?(H.setTexture3D(Z,0),$n=q.TEXTURE_3D):Z.isDataArrayTexture||Z.isCompressedArrayTexture?(H.setTexture2DArray(Z,0),$n=q.TEXTURE_2D_ARRAY):(H.setTexture2D(Z,0),$n=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,Z.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,Z.unpackAlignment);const Wt=q.getParameter(q.UNPACK_ROW_LENGTH),Pr=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Gt=q.getParameter(q.UNPACK_SKIP_PIXELS),Ot=q.getParameter(q.UNPACK_SKIP_ROWS),zn=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,dn.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,dn.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Et),q.pixelStorei(q.UNPACK_SKIP_ROWS,Ye),q.pixelStorei(q.UNPACK_SKIP_IMAGES,et);const Kt=$.isDataArrayTexture||$.isData3DTexture,ln=Z.isDataArrayTexture||Z.isData3DTexture;if($.isDepthTexture){const mn=Fe.get($),Tn=Fe.get(Z),An=Fe.get(mn.__renderTarget),_i=Fe.get(Tn.__renderTarget);we.bindFramebuffer(q.READ_FRAMEBUFFER,An.__webglFramebuffer),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,_i.__webglFramebuffer);for(let Or=0;Or<mt;Or++)Kt&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Fe.get($).__webglTexture,ae,et+Or),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Fe.get(Z).__webglTexture,Ge,pn+Or)),q.blitFramebuffer(Et,Ye,at,ht,_t,zt,at,ht,q.DEPTH_BUFFER_BIT,q.NEAREST);we.bindFramebuffer(q.READ_FRAMEBUFFER,null),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(ae!==0||$.isRenderTargetTexture||Fe.has($)){const mn=Fe.get($),Tn=Fe.get(Z);we.bindFramebuffer(q.READ_FRAMEBUFFER,Nr),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,vt);for(let An=0;An<mt;An++)Kt?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,mn.__webglTexture,ae,et+An):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,mn.__webglTexture,ae),ln?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Tn.__webglTexture,Ge,pn+An):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Tn.__webglTexture,Ge),ae!==0?q.blitFramebuffer(Et,Ye,at,ht,_t,zt,at,ht,q.COLOR_BUFFER_BIT,q.NEAREST):ln?q.copyTexSubImage3D($n,Ge,_t,zt,pn+An,Et,Ye,at,ht):q.copyTexSubImage2D($n,Ge,_t,zt,Et,Ye,at,ht);we.bindFramebuffer(q.READ_FRAMEBUFFER,null),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else ln?$.isDataTexture||$.isData3DTexture?q.texSubImage3D($n,Ge,_t,zt,pn,at,ht,mt,kt,Nt,dn.data):Z.isCompressedArrayTexture?q.compressedTexSubImage3D($n,Ge,_t,zt,pn,at,ht,mt,kt,dn.data):q.texSubImage3D($n,Ge,_t,zt,pn,at,ht,mt,kt,Nt,dn):$.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Ge,_t,zt,at,ht,kt,Nt,dn.data):$.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Ge,_t,zt,dn.width,dn.height,kt,dn.data):q.texSubImage2D(q.TEXTURE_2D,Ge,_t,zt,at,ht,kt,Nt,dn);q.pixelStorei(q.UNPACK_ROW_LENGTH,Wt),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Pr),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Gt),q.pixelStorei(q.UNPACK_SKIP_ROWS,Ot),q.pixelStorei(q.UNPACK_SKIP_IMAGES,zn),Ge===0&&Z.generateMipmaps&&q.generateMipmap($n),we.unbindTexture()},this.copyTextureToTexture3D=function($,Z,de=null,he=null,ae=0){return $.isTexture!==!0&&(qc("WebGLRenderer: copyTextureToTexture3D function signature has changed."),de=arguments[0]||null,he=arguments[1]||null,$=arguments[2],Z=arguments[3],ae=arguments[4]||0),qc('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture($,Z,de,he,ae)},this.initRenderTarget=function($){Fe.get($).__webglFramebuffer===void 0&&H.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?H.setTextureCube($,0):$.isData3DTexture?H.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?H.setTexture2DArray($,0):H.setTexture2D($,0),we.unbindTexture()},this.resetState=function(){C=0,E=0,T=null,we.reset(),xt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorspace=rn._getDrawingBufferColorSpace(e),r.unpackColorSpace=rn._getUnpackColorSpace()}}const rf=new vs,Ia=new je,i4=new Y,QS=new je,F0=new je,qy=new Y,pE=new Y,o4=new fn,s4=new Y,a4=new Y;let Vi=null,Bs=null;const Da=[],oc={NONE:-1,PAN:0,ROTATE:1};class Ime extends E_{constructor(e,r,i=null){super(r,i),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new Zk,this.mouseButtons={LEFT:ti.PAN,MIDDLE:ti.PAN,RIGHT:ti.ROTATE},this.touches={ONE:za.PAN},this._onPointerMove=Dme.bind(this),this._onPointerDown=Lme.bind(this),this._onPointerCancel=Fme.bind(this),this._onContextMenu=Ume.bind(this),i!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const r=this.domElement.getBoundingClientRect();Ia.x=(e.clientX-r.left)/r.width*2-1,Ia.y=-(e.clientY-r.top)/r.height*2+1}_updateState(e){let r;if(e.pointerType==="touch")r=this.touches.ONE;else switch(e.button){case 0:r=this.mouseButtons.LEFT;break;case 1:r=this.mouseButtons.MIDDLE;break;case 2:r=this.mouseButtons.RIGHT;break;default:r=null}switch(r){case ti.PAN:case za.PAN:this.state=oc.PAN;break;case ti.ROTATE:case za.ROTATE:this.state=oc.ROTATE;break;default:this.state=oc.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function Dme(n){const e=this.object,r=this.domElement,i=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),i.setFromCamera(Ia,e),Vi)this.state===oc.PAN?i.ray.intersectPlane(rf,qy)&&Vi.position.copy(qy.sub(i4).applyMatrix4(o4)):this.state===oc.ROTATE&&(QS.subVectors(Ia,F0).multiplyScalar(this.rotateSpeed),Vi.rotateOnWorldAxis(s4,QS.x),Vi.rotateOnWorldAxis(a4.normalize(),-QS.y)),this.dispatchEvent({type:"drag",object:Vi}),F0.copy(Ia);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(Da.length=0,i.setFromCamera(Ia,e),i.intersectObjects(this.objects,this.recursive,Da),Da.length>0){const o=Da[0].object;rf.setFromNormalAndCoplanarPoint(e.getWorldDirection(rf.normal),pE.setFromMatrixPosition(o.matrixWorld)),Bs!==o&&Bs!==null&&(this.dispatchEvent({type:"hoveroff",object:Bs}),r.style.cursor="auto",Bs=null),Bs!==o&&(this.dispatchEvent({type:"hoveron",object:o}),r.style.cursor="pointer",Bs=o)}else Bs!==null&&(this.dispatchEvent({type:"hoveroff",object:Bs}),r.style.cursor="auto",Bs=null);F0.copy(Ia)}}function Lme(n){const e=this.object,r=this.domElement,i=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),Da.length=0,i.setFromCamera(Ia,e),i.intersectObjects(this.objects,this.recursive,Da),Da.length>0&&(this.transformGroup===!0?Vi=l4(Da[0].object):Vi=Da[0].object,rf.setFromNormalAndCoplanarPoint(e.getWorldDirection(rf.normal),pE.setFromMatrixPosition(Vi.matrixWorld)),i.ray.intersectPlane(rf,qy)&&(this.state===oc.PAN?(o4.copy(Vi.parent.matrixWorld).invert(),i4.copy(qy).sub(pE.setFromMatrixPosition(Vi.matrixWorld))):this.state===oc.ROTATE&&(s4.set(0,1,0).applyQuaternion(e.quaternion).normalize(),a4.set(1,0,0).applyQuaternion(e.quaternion).normalize())),r.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Vi})),F0.copy(Ia))}function Fme(){this.enabled!==!1&&(Vi&&(this.dispatchEvent({type:"dragend",object:Vi}),Vi=null),this.domElement.style.cursor=Bs?"pointer":"auto",this.state=oc.NONE)}function Ume(n){this.enabled!==!1&&n.preventDefault()}function l4(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:l4(n.parent,e)}var vR=function(e){$me(e);var r=Bme(e);return e.on=r.on,e.off=r.off,e.fire=r.fire,e};function Bme(n){var e=Object.create(null);return{on:function(r,i,o){if(typeof i!="function")throw new Error("callback is expected to be a function");var s=e[r];return s||(s=e[r]=[]),s.push({callback:i,ctx:o}),n},off:function(r,i){var o=typeof r>"u";if(o)return e=Object.create(null),n;if(e[r]){var s=typeof i!="function";if(s)delete e[r];else for(var a=e[r],l=0;l<a.length;++l)a[l].callback===i&&a.splice(l,1)}return n},fire:function(r){var i=e[r];if(!i)return n;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var s=0;s<i.length;++s){var a=i[s];a.callback.apply(a.ctx,o)}return n}}}function $me(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],r=0;r<e.length;++r)if(n.hasOwnProperty(e[r]))throw new Error("Subject cannot be eventified, since it already has property '"+e[r]+"'")}var zme=Vme,kme=vR;function Vme(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,r=new Map,i={},o=0,s=n.multigraph?S:_,a=[],l=P,c=P,u=P,d=P,f={version:20,addNode:y,addLink:x,removeLink:T,removeNode:m,getNode:v,getNodeCount:w,getLinkCount:C,getEdgeCount:C,getLinksCount:C,getNodesCount:w,getLinks:E,forEachNode:V,forEachLinkedNode:L,forEachLink:D,beginUpdate:u,endUpdate:d,clear:N,hasLink:R,hasNode:v,getLink:R};return kme(f),h(),f;function h(){var U=f.on;f.on=k;function k(){return f.beginUpdate=u=F,f.endUpdate=d=O,l=p,c=g,f.on=U,U.apply(f,arguments)}}function p(U,k){a.push({link:U,changeType:k})}function g(U,k){a.push({node:U,changeType:k})}function y(U,k){if(U===void 0)throw new Error("Invalid node identifier");u();var W=v(U);return W?(W.data=k,c(W,"update")):(W=new Gme(U,k),c(W,"add")),e.set(U,W),d(),W}function v(U){return e.get(U)}function m(U){var k=v(U);if(!k)return!1;u();var W=k.links;return W&&(W.forEach(M),k.links=null),e.delete(U),c(k,"remove"),d(),!0}function x(U,k,W){u();var J=v(U)||y(U),z=v(k)||y(k),j=s(U,k,W),X=r.has(j.id);return r.set(j.id,j),kI(J,j),U!==k&&kI(z,j),l(j,X?"update":"add"),d(),j}function _(U,k,W){var J=kv(U,k),z=r.get(J);return z?(z.data=W,z):new VI(U,k,W,J)}function S(U,k,W){var J=kv(U,k),z=i.hasOwnProperty(J);if(z||R(U,k)){z||(i[J]=0);var j="@"+ ++i[J];J=kv(U+j,k+j)}return new VI(U,k,W,J)}function w(){return e.size}function C(){return r.size}function E(U){var k=v(U);return k?k.links:null}function T(U,k){return k!==void 0&&(U=R(U,k)),M(U)}function M(U){if(!U||!r.get(U.id))return!1;u(),r.delete(U.id);var k=v(U.fromId),W=v(U.toId);return k&&k.links.delete(U),W&&W.links.delete(U),l(U,"remove"),d(),!0}function R(U,k){if(!(U===void 0||k===void 0))return r.get(kv(U,k))}function N(){u(),V(function(U){m(U.id)}),d()}function D(U){if(typeof U=="function")for(var k=r.values(),W=k.next();!W.done;){if(U(W.value))return!0;W=k.next()}}function L(U,k,W){var J=v(U);if(J&&J.links&&typeof k=="function")return W?I(J.links,U,k):A(J.links,U,k)}function A(U,k,W){for(var J,z=U.values(),j=z.next();!j.done;){var X=j.value,Q=X.fromId===k?X.toId:X.fromId;if(J=W(e.get(Q),X),J)return!0;j=z.next()}}function I(U,k,W){for(var J,z=U.values(),j=z.next();!j.done;){var X=j.value;if(X.fromId===k&&(J=W(e.get(X.toId),X),J))return!0;j=z.next()}}function P(){}function F(){o+=1}function O(){o-=1,o===0&&a.length>0&&(f.fire("changed",a),a.length=0)}function V(U){if(typeof U!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+U);for(var k=e.values(),W=k.next();!W.done;){if(U(W.value))return!0;W=k.next()}}}function Gme(n,e){this.id=n,this.links=null,this.data=e}function kI(n,e){n.links?n.links.add(e):n.links=new Set([e])}function VI(n,e,r,i){this.fromId=n,this.toId=e,this.data=r,this.id=i}function kv(n,e){return n.toString()+"👉 "+e.toString()}const Hme=pc(zme);var yR={exports:{}},Cg={exports:{}},c4=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const jme=c4;var ph=function(e){return r;function r(i,o){let s=o&&o.indent||0,a=o&&o.join!==void 0?o.join:`
`,l=Array(s+1).join(" "),c=[];for(let u=0;u<e;++u){let d=jme(u),f=u===0?"":l;c.push(f+i.replace(/{var}/g,d))}return c.join(a)}};const u4=ph;Cg.exports=Wme;Cg.exports.generateCreateBodyFunctionBody=d4;Cg.exports.getVectorCode=h4;Cg.exports.getBodyCode=f4;function Wme(n,e){let r=d4(n,e),{Body:i}=new Function(r)();return i}function d4(n,e){return`
${h4(n,e)}
${f4(n)}
return {Body: Body, Vector: Vector};
`}function f4(n){let e=u4(n),r=e("{var}",{join:", "});return`
function Body(${r}) {
  this.isPinned = false;
  this.pos = new Vector(${r});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${r}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function h4(n,e){let r=u4(n),i="";return e&&(i=`${r(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${r("{var}",{join:", "})}) {
  ${i}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${r('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${r("this.{var} = v.{var};",{indent:4})}
    } else {
      ${r('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${r("this.{var} = ",{join:""})}0;
  };`}var qme=Cg.exports,Cc={exports:{}};const xR=ph,Tl=c4;Cc.exports=Xme;Cc.exports.generateQuadTreeFunctionBody=p4;Cc.exports.getInsertStackCode=x4;Cc.exports.getQuadNodeCode=y4;Cc.exports.isSamePosition=m4;Cc.exports.getChildBodyCode=v4;Cc.exports.setChildBodyCode=g4;function Xme(n){let e=p4(n);return new Function(e)()}function p4(n){let e=xR(n),r=Math.pow(2,n);return`
${x4()}
${y4(n)}
${m4(n)}
${v4(n)}
${g4(n)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${a("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < θ, treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${Tl(0)} - node.min_${Tl(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${s()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${o(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function o(l){let c=[],u=Array(l+1).join(" ");for(let d=0;d<n;++d)c.push(u+`if (${Tl(d)} > max_${Tl(d)}) {`),c.push(u+`  quadIdx = quadIdx + ${Math.pow(2,d)};`),c.push(u+`  min_${Tl(d)} = max_${Tl(d)};`),c.push(u+`  max_${Tl(d)} = node.max_${Tl(d)};`),c.push(u+"}");return c.join(`
`)}function s(){let l=Array(11).join(" "),c=[];for(let u=0;u<r;++u)c.push(l+`if (node.quad${u}) {`),c.push(l+`  queue[pushIdx] = node.quad${u};`),c.push(l+"  queueLength += 1;"),c.push(l+"  pushIdx += 1;"),c.push(l+"}");return c.join(`
`)}function a(l){let c=[];for(let u=0;u<r;++u)c.push(`${l}quad${u} = null;`);return c.join(`
`)}}function m4(n){let e=xR(n);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function g4(n){var e=Math.pow(2,n);return`
function setChild(node, idx, child) {
  ${r()}
}`;function r(){let i=[];for(let o=0;o<e;++o){let s=o===0?"  ":"  else ";i.push(`${s}if (idx === ${o}) node.quad${o} = child;`)}return i.join(`
`)}}function v4(n){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let r=[],i=Math.pow(2,n);for(let o=0;o<i;++o)r.push(`  if (idx === ${o}) return node.quad${o};`);return r.join(`
`)}}function y4(n){let e=xR(n),r=Math.pow(2,n);var i=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${o("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return i;function o(s){let a=[];for(let l=0;l<r;++l)a.push(`${s}quad${l} = null;`);return a.join(`
`)}}function x4(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var Kme=Cc.exports,_R={exports:{}};_R.exports=Qme;_R.exports.generateFunctionBody=_4;const Yme=ph;function Qme(n){let e=_4(n);return new Function("bodies","settings","random",e)}function _4(n){let e=Yme(n);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var Zme=_R.exports,bR={exports:{}};const Jme=ph;bR.exports=ege;bR.exports.generateCreateDragForceFunctionBody=b4;function ege(n){let e=b4(n);return new Function("options",e)}function b4(n){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${Jme(n)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var tge=bR.exports,SR={exports:{}};const nge=ph;SR.exports=rge;SR.exports.generateCreateSpringForceFunctionBody=S4;function rge(n){let e=S4(n);return new Function("options","random",e)}function S4(n){let e=nge(n);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var ige=SR.exports,wR={exports:{}};const oge=ph;wR.exports=sge;wR.exports.generateIntegratorFunctionBody=w4;function sge(n){let e=w4(n);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function w4(n){let e=oge(n);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var age=wR.exports,ZS,GI;function lge(){if(GI)return ZS;GI=1,ZS=n;function n(e,r,i,o){this.from=e,this.to=r,this.length=i,this.coefficient=o}return ZS}var JS,HI;function cge(){if(HI)return JS;HI=1,JS=n;function n(e,r){var i;if(e||(e={}),r){for(i in r)if(r.hasOwnProperty(i)){var o=e.hasOwnProperty(i),s=typeof r[i],a=!o||typeof e[i]!==s;a?e[i]=r[i]:s==="object"&&(e[i]=n(e[i],r[i]))}}return e}return JS}var Wh={exports:{}},jI;function uge(){if(jI)return Wh.exports;jI=1,Wh.exports=n,Wh.exports.random=n,Wh.exports.randomIterator=l;function n(c){var u=typeof c=="number"?c:+new Date;return new e(u)}function e(c){this.seed=c}e.prototype.next=a,e.prototype.nextDouble=s,e.prototype.uniform=s,e.prototype.gaussian=r;function r(){var c,u,d;do u=this.nextDouble()*2-1,d=this.nextDouble()*2-1,c=u*u+d*d;while(c>=1||c===0);return u*Math.sqrt(-2*Math.log(c)/c)}e.prototype.levy=i;function i(){var c=1.5,u=Math.pow(o(1+c)*Math.sin(Math.PI*c/2)/(o((1+c)/2)*c*Math.pow(2,(c-1)/2)),1/c);return this.gaussian()*u/Math.pow(Math.abs(this.gaussian()),1/c)}function o(c){return Math.sqrt(2*Math.PI/c)*Math.pow(1/Math.E*(c+1/(12*c-1/(10*c))),c)}function s(){var c=this.seed;return c=c+2127912214+(c<<12)&4294967295,c=(c^3345072700^c>>>19)&4294967295,c=c+374761393+(c<<5)&4294967295,c=(c+3550635116^c<<9)&4294967295,c=c+4251993797+(c<<3)&4294967295,c=(c^3042594569^c>>>16)&4294967295,this.seed=c,(c&268435455)/268435456}function a(c){return Math.floor(this.nextDouble()*c)}function l(c,u){var d=u||n();if(typeof d.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:h,shuffle:f};function f(){var p,g,y;for(p=c.length-1;p>0;--p)g=d.next(p+1),y=c[g],c[g]=c[p],c[p]=y;return c}function h(p){var g,y,v;for(g=c.length-1;g>0;--g)y=d.next(g+1),v=c[y],c[y]=c[g],c[g]=v,p(v);c.length&&p(c[0])}}return Wh.exports}var C4=vge,dge=qme,fge=Kme,hge=Zme,pge=tge,mge=ige,gge=age,WI={};function vge(n){var e=lge(),r=cge(),i=vR;if(n){if(n.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(n.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}n=r(n,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var o=WI[n.dimensions];if(!o){var s=n.dimensions;o={Body:dge(s,n.debug),createQuadTree:fge(s),createBounds:hge(s),createDragForce:pge(s),createSpringForce:mge(s),integrate:gge(s)},WI[s]=o}var a=o.Body,l=o.createQuadTree,c=o.createBounds,u=o.createDragForce,d=o.createSpringForce,f=o.integrate,h=I=>new a(I),p=uge().random(42),g=[],y=[],v=l(n,p),m=c(g,n,p),x=d(n,p),_=u(n),S=0,w=[],C=new Map,E=0;R("nbody",L),R("spring",A);var T={bodies:g,quadTree:v,springs:y,settings:n,addForce:R,removeForce:N,getForces:D,step:function(){for(var I=0;I<w.length;++I)w[I](E);var P=f(g,n.timeStep,n.adaptiveTimeStepWeight);return E+=1,P},addBody:function(I){if(!I)throw new Error("Body is required");return g.push(I),I},addBodyAt:function(I){if(!I)throw new Error("Body position is required");var P=h(I);return g.push(P),P},removeBody:function(I){if(I){var P=g.indexOf(I);if(!(P<0))return g.splice(P,1),g.length===0&&m.reset(),!0}},addSpring:function(I,P,F,O){if(!I||!P)throw new Error("Cannot add null spring to force simulator");typeof F!="number"&&(F=-1);var V=new e(I,P,F,O>=0?O:-1);return y.push(V),V},getTotalMovement:function(){return S},removeSpring:function(I){if(I){var P=y.indexOf(I);if(P>-1)return y.splice(P,1),!0}},getBestNewBodyPosition:function(I){return m.getBestNewPosition(I)},getBBox:M,getBoundingBox:M,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(I){return I!==void 0?(n.gravity=I,v.options({gravity:I}),this):n.gravity},theta:function(I){return I!==void 0?(n.theta=I,v.options({theta:I}),this):n.theta},random:p};return yge(n,T),i(T),T;function M(){return m.update(),m.box}function R(I,P){if(C.has(I))throw new Error("Force "+I+" is already added");C.set(I,P),w.push(P)}function N(I){var P=w.indexOf(C.get(I));P<0||(w.splice(P,1),C.delete(I))}function D(){return C}function L(){if(g.length!==0){v.insertBodies(g);for(var I=g.length;I--;){var P=g[I];P.isPinned||(P.reset(),v.updateBodyForce(P),_.update(P))}}}function A(){for(var I=y.length;I--;)x.update(y[I])}}function yge(n,e){for(var r in n)xge(n,e,r)}function xge(n,e,r){if(n.hasOwnProperty(r)&&typeof e[r]!="function"){var i=Number.isFinite(n[r]);i?e[r]=function(o){if(o!==void 0){if(!Number.isFinite(o))throw new Error("Value of "+r+" should be a valid number.");return n[r]=o,e}return n[r]}:e[r]=function(o){return o!==void 0?(n[r]=o,e):n[r]}}}yR.exports=bge;yR.exports.simulator=C4;var _ge=vR;function bge(n,e){if(!n)throw new Error("Graph structure cannot be undefined");var r=e&&e.createSimulator||C4,i=r(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var o=n.version>19?L:D;e&&typeof e.nodeMass=="function"&&(o=e.nodeMass);var s=new Map,a={},l=0,c=i.settings.springTransform||Sge;_(),v();var u=!1,d={step:function(){if(l===0)return f(!0),!0;var A=i.step();d.lastMove=A,d.fire("step");var I=A/l,P=I<=.01;return f(P),P},getNodePosition:function(A){return N(A).pos},setNodePosition:function(A){var I=N(A);I.setPosition.apply(I,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(A){var I=a[A];if(I)return{from:I.from.pos,to:I.to.pos}},getGraphRect:function(){return i.getBBox()},forEachBody:h,pinNode:function(A,I){var P=N(A.id);P.isPinned=!!I},isNodePinned:function(A){return N(A.id).isPinned},dispose:function(){n.off("changed",x),d.fire("disposed")},getBody:y,getSpring:g,getForceVectorLength:p,simulator:i,graph:n,lastMove:0};return _ge(d),d;function f(A){u!==A&&(u=A,m(A))}function h(A){s.forEach(A)}function p(){var A=0,I=0;return h(function(P){A+=Math.abs(P.force.x),I+=Math.abs(P.force.y)}),Math.sqrt(A*A+I*I)}function g(A,I){var P;if(I===void 0)typeof A!="object"?P=A:P=A.id;else{var F=n.hasLink(A,I);if(!F)return;P=F.id}return a[P]}function y(A){return s.get(A)}function v(){n.on("changed",x)}function m(A){d.fire("stable",A)}function x(A){for(var I=0;I<A.length;++I){var P=A[I];P.changeType==="add"?(P.node&&S(P.node.id),P.link&&C(P.link)):P.changeType==="remove"&&(P.node&&w(P.node),P.link&&E(P.link))}l=n.getNodesCount()}function _(){l=0,n.forEachNode(function(A){S(A.id),l+=1}),n.forEachLink(C)}function S(A){var I=s.get(A);if(!I){var P=n.getNode(A);if(!P)throw new Error("initBody() was called with unknown node id");var F=P.position;if(!F){var O=T(P);F=i.getBestNewBodyPosition(O)}I=i.addBodyAt(F),I.id=A,s.set(A,I),M(A),R(P)&&(I.isPinned=!0)}}function w(A){var I=A.id,P=s.get(I);P&&(s.delete(I),i.removeBody(P))}function C(A){M(A.fromId),M(A.toId);var I=s.get(A.fromId),P=s.get(A.toId),F=i.addSpring(I,P,A.length);c(A,F),a[A.id]=F}function E(A){var I=a[A.id];if(I){var P=n.getNode(A.fromId),F=n.getNode(A.toId);P&&M(P.id),F&&M(F.id),delete a[A.id],i.removeSpring(I)}}function T(A){var I=[];if(!A.links)return I;for(var P=Math.min(A.links.length,2),F=0;F<P;++F){var O=A.links[F],V=O.fromId!==A.id?s.get(O.fromId):s.get(O.toId);V&&V.pos&&I.push(V)}return I}function M(A){var I=s.get(A);if(I.mass=o(A),Number.isNaN(I.mass))throw new Error("Node mass should be a number")}function R(A){return A&&(A.isPinned||A.data&&A.data.isPinned)}function N(A){var I=s.get(A);return I||(S(A),I=s.get(A)),I}function D(A){var I=n.getLinks(A);return I?1+I.length/3:1}function L(A){var I=n.getLinks(A);return I?1+I.size/3:1}}function Sge(){}var wge=yR.exports;const Cge=pc(wge);function Ege(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function qI(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Tge(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qI(Object(r),!0).forEach(function(i){E4(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):qI(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function E4(n,e,r){return e=Lge(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Mge(n,e){if(n==null)return{};var r={},i=Object.keys(n),o,s;for(s=0;s<i.length;s++)o=i[s],!(e.indexOf(o)>=0)&&(r[o]=n[o]);return r}function Rge(n,e){if(n==null)return{};var r=Mge(n,e),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(o=0;o<s.length;o++)i=s[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(r[i]=n[i])}return r}function T4(n,e){return Nge(n)||Ege(n,e)||M4(n,e)||Ige()}function Xy(n){return Age(n)||Pge(n)||M4(n)||Oge()}function Age(n){if(Array.isArray(n))return mE(n)}function Nge(n){if(Array.isArray(n))return n}function Pge(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function M4(n,e){if(n){if(typeof n=="string")return mE(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mE(n,e)}}function mE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Oge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ige(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dge(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lge(n){var e=Dge(n,"string");return typeof e=="symbol"?e:String(e)}var Fge=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function Uge(n,e,r){var i={enter:[],update:[],exit:[]};if(r){var a=iE(n,r,!1),l=iE(e,r,!1),c=Object.assign({},a,l);Object.entries(c).forEach(function(u){var d=T4(u,2),f=d[0],h=d[1],p=a.hasOwnProperty(f)?l.hasOwnProperty(f)?"update":"exit":"enter";i[p].push(p==="update"?[a[f],l[f]]:h)})}else{var o=new Set(n),s=new Set(e);new Set([].concat(Xy(o),Xy(s))).forEach(function(u){var d=o.has(u)?s.has(u)?"update":"exit":"enter";i[d].push(d==="update"?[u,u]:u)})}return i}function Bge(n,e,r){var i=r.objBindAttr,o=i===void 0?"__obj":i,s=r.dataBindAttr,a=s===void 0?"__data":s,l=r.idAccessor,c=r.purge,u=c===void 0?!1:c,d=function(v){return v.hasOwnProperty(a)},f=e.filter(function(y){return!d(y)}),h=e.filter(d).map(function(y){return y[a]}),p=n,g=u?{enter:p,exit:h,update:[]}:Uge(h,p,l);return g.update=g.update.map(function(y){var v=T4(y,2),m=v[0],x=v[1];return m!==x&&(x[o]=m[o],x[o][a]=x),x}),g.exit=g.exit.concat(f.map(function(y){return E4({},o,y)})),g}function $ge(n,e,r,i,o){var s=o.createObj,a=s===void 0?function(T){return{}}:s,l=o.updateObj,c=l===void 0?function(T,M){}:l,u=o.exitObj,d=u===void 0?function(T){}:u,f=o.objBindAttr,h=f===void 0?"__obj":f,p=o.dataBindAttr,g=p===void 0?"__data":p,y=Rge(o,Fge),v=Bge(n,e,Tge({objBindAttr:h,dataBindAttr:g},y)),m=v.enter,x=v.update,_=v.exit;_.forEach(function(T){var M=T[h];delete T[h],d(M),i(M)});var S=C(m),w=[].concat(Xy(m),Xy(x));E(w),S.forEach(r);function C(T){var M=[];return T.forEach(function(R){var N=a(R);N&&(N[g]=R,R[h]=N,M.push(N))}),M}function E(T){T.forEach(function(M){var R=M[h];R&&(R[g]=M,c(R,M))})}}function gE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function zge(n){if(Array.isArray(n))return n}function kge(n){if(Array.isArray(n))return gE(n)}function Vge(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gge(n,e,r){return e=Ky(e),Jge(n,ER()?Reflect.construct(e,r||[],Ky(n).constructor):e.apply(n,r))}function Hge(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function R4(n,e,r){if(ER())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return o}function jge(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function CR(n,e,r){return(e=tve(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Ky(n){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ky(n)}function Wge(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vE(n,e)}function ER(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ER=function(){return!!n})()}function qge(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Xge(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function Kge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XI(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function A4(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XI(Object(r),!0).forEach(function(i){CR(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):XI(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Qge(n,e){if(n==null)return{};var r,i,o=Zge(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function Zge(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function Jge(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vge(n)}function vE(n,e){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vE(n,e)}function KI(n,e){return zge(n)||Xge(n,e)||N4(n,e)||Kge()}function ms(n){return kge(n)||qge(n)||N4(n)||Yge()}function eve(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tve(n){var e=eve(n,"string");return typeof e=="symbol"?e:e+""}function yE(n){"@babel/helpers - typeof";return yE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yE(n)}function N4(n,e){if(n){if(typeof n=="string")return gE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gE(n,e):void 0}}var P4=function(e){e instanceof Array?e.forEach(P4):(e.map&&e.map.dispose(),e.dispose())},O4=function(e){e.geometry&&e.geometry.dispose(),e.material&&P4(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(O4)},xE=function(e){for(;e.children.length;){var r=e.children[0];e.remove(r),O4(r)}},nve=["objFilter"];function qh(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.objFilter,o=i===void 0?function(){return!0}:i,s=Qge(r,nve);return $ge(n,e.children.filter(o),function(a){return e.add(a)},function(a){e.remove(a),xE(a)},A4({objBindAttr:"__threeObj"},s))}var Xh=function(e){return isNaN(e)?parseInt(It(e).toHex(),16):e},e1=function(e){return isNaN(e)?It(e).getAlpha():1},rve=RM(dk);function YI(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=rve(e(i))})}function ive(n,e){var r=n.nodes,i=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.nodeFilter,a=s===void 0?function(){return!0}:s,l=o.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!a(p)}}),i.forEach(function(p){var g=p.source,y=p.target,v=S(g),m=S(y);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var x=u[v],_=u[m];x.out.push(_);function S(w){return yE(w)==="object"?e(w):w}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(ms(Object.entries(u).filter(function(p){var g=KI(p,2),y=g[1];return!y.skip}).map(function(p){var g=KI(p,2),y=g[0],v=g[1];return CR({},y,v.depth)}))));return f;function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var S=p[m];if(g.indexOf(S)!==-1){var w=[].concat(ms(g.slice(g.indexOf(S))),[S]).map(function(C){return e(C.data)});return d.some(function(C){return C.length===w.length&&C.every(function(E,T){return E===w[T]})})||(d.push(w),c(w)),1}y>S.depth&&(S.depth=y,h(S.out,[].concat(ms(g),[S]),y+(S.skip?0:1)))},m=0,x=p.length;m<x;m++)v()}}var Ut=window.THREE?window.THREE:{Group:Bd,Mesh:$r,MeshLambertMaterial:hR,Color:Mt,BufferGeometry:Bi,BufferAttribute:ii,Matrix4:fn,Vector3:Y,SphereGeometry:fh,CylinderGeometry:w_,TubeGeometry:fR,ConeGeometry:dR,Line:cue,LineBasicMaterial:S_,QuadraticBezierCurve3:uR,CubicBezierCurve3:Wk,Box3:Bu},QI={graph:Hme,forcelayout:Cge},ove=2,t1=new Ut.BufferGeometry().setAttribute?"setAttribute":"addAttribute",Vv=new Ut.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",sve=xg({props:{jsonUrl:{onChange:function(e,r){var i=this;e&&!r.fetchingJson&&(r.fetchingJson=!0,r.onLoading(),fetch(e).then(function(o){return o.json()}).then(function(o){r.fetchingJson=!1,r.onFinishLoading(o),i.graphData(o)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,r){var i=r.d3ForceLayout.force("charge");i&&i.strength(e>2?-60:-30),e<3&&o(r.graphData.nodes,"z"),e<2&&o(r.graphData.nodes,"y");function o(s,a){s.forEach(function(l){delete l[a],delete l["v".concat(a)]})}}},dagMode:{onChange:function(e,r){!e&&r.forceEngine==="d3"&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=i.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,r,i){return i===void 0?e.d3ForceLayout.force(r):(e.d3ForceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var r=e.forceEngine!=="ngraph";return e.engineRunning&&i(),o(),s(),this;function i(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||r&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[r?"tick":"step"](),e.onEngineTick());var a=Pt(e.nodeThreeObjectExtend);e.graphData.nodes.forEach(function(h){var p=h.__threeObj;if(p){var g=r?h:e.layout.getNodePosition(h[e.nodeId]),y=a(h);(!e.nodePositionUpdate||!e.nodePositionUpdate(y?p.children[0]:p,{x:g.x,y:g.y,z:g.z},h)||y)&&(p.position.x=g.x,p.position.y=g.y||0,p.position.z=g.z||0)}});var l=Pt(e.linkWidth),c=Pt(e.linkCurvature),u=Pt(e.linkCurveRotation),d=Pt(e.linkThreeObjectExtend);e.graphData.links.forEach(function(h){var p=h.__lineObj;if(p){var g=r?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),y=g[r?"source":"from"],v=g[r?"target":"to"];if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){f(h);var m=d(h);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(m?p.children[1]:p,{start:{x:y.x,y:y.y,z:y.z},end:{x:v.x,y:v.y,z:v.z}},h)&&!m)){var x=30,_=h.__curve,S=p.children.length?p.children[0]:p;if(S.type==="Line"){if(_){var C=_.getPoints(x);S.geometry.getAttribute("position").array.length!==C.length*3&&S.geometry[t1]("position",new Ut.BufferAttribute(new Float32Array(C.length*3),3)),S.geometry.setFromPoints(C)}else{var w=S.geometry.getAttribute("position");(!w||!w.array||w.array.length!==6)&&S.geometry[t1]("position",w=new Ut.BufferAttribute(new Float32Array(2*3),3)),w.array[0]=y.x,w.array[1]=y.y||0,w.array[2]=y.z||0,w.array[3]=v.x,w.array[4]=v.y||0,w.array[5]=v.z||0,w.needsUpdate=!0}S.geometry.computeBoundingSphere()}else if(S.type==="Mesh")if(_){S.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(S.position.set(0,0,0),S.rotation.set(0,0,0),S.scale.set(1,1,1));var L=Math.ceil(l(h)*10)/10,A=L/2,I=new Ut.TubeGeometry(_,x,A,e.linkResolution,!1);S.geometry.dispose(),S.geometry=I}else{if(!S.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var E=Math.ceil(l(h)*10)/10,T=E/2,M=new Ut.CylinderGeometry(T,T,1,e.linkResolution,1,!1);M[Vv](new Ut.Matrix4().makeTranslation(0,1/2,0)),M[Vv](new Ut.Matrix4().makeRotationX(Math.PI/2)),S.geometry.dispose(),S.geometry=M}var R=new Ut.Vector3(y.x,y.y||0,y.z||0),N=new Ut.Vector3(v.x,v.y||0,v.z||0),D=R.distanceTo(N);S.position.x=R.x,S.position.y=R.y,S.position.z=R.z,S.scale.z=D,S.parent.localToWorld(N),S.lookAt(N)}}}}});function f(h){var p=r?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),g=p[r?"source":"from"],y=p[r?"target":"to"];if(!(!g||!y||!g.hasOwnProperty("x")||!y.hasOwnProperty("x"))){var v=c(h);if(!v)h.__curve=null;else{var m=new Ut.Vector3(g.x,g.y||0,g.z||0),x=new Ut.Vector3(y.x,y.y||0,y.z||0),_=m.distanceTo(x),S,w=u(h);if(_>0){var C=y.x-g.x,E=y.y-g.y||0,T=new Ut.Vector3().subVectors(x,m),M=T.clone().multiplyScalar(v).cross(C!==0||E!==0?new Ut.Vector3(0,0,1):new Ut.Vector3(0,1,0)).applyAxisAngle(T.normalize(),w).add(new Ut.Vector3().addVectors(m,x).divideScalar(2));S=new Ut.QuadraticBezierCurve3(m,M,x)}else{var R=v*70,N=-w,D=N+Math.PI/2;S=new Ut.CubicBezierCurve3(m,new Ut.Vector3(R*Math.cos(D),R*Math.sin(D),0).add(m),new Ut.Vector3(R*Math.cos(N),R*Math.sin(N),0).add(m),x)}h.__curve=S}}}}function o(){var a=Pt(e.linkDirectionalArrowRelPos),l=Pt(e.linkDirectionalArrowLength),c=Pt(e.nodeVal);e.graphData.links.forEach(function(u){var d=u.__arrowObj;if(d){var f=r?u:e.layout.getLinkPosition(e.layout.graph.getLink(u.source,u.target).id),h=f[r?"source":"from"],p=f[r?"target":"to"];if(!(!h||!p||!h.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var g=Math.cbrt(Math.max(0,c(h)||1))*e.nodeRelSize,y=Math.cbrt(Math.max(0,c(p)||1))*e.nodeRelSize,v=l(u),m=a(u),x=u.__curve?function(T){return u.__curve.getPoint(T)}:function(T){var M=function(N,D,L,A){return D[N]+(L[N]-D[N])*A||0};return{x:M("x",h,p,T),y:M("y",h,p,T),z:M("z",h,p,T)}},_=u.__curve?u.__curve.getLength():Math.sqrt(["x","y","z"].map(function(T){return Math.pow((p[T]||0)-(h[T]||0),2)}).reduce(function(T,M){return T+M},0)),S=g+v+(_-g-y-v)*m,w=x(S/_),C=x((S-v)/_);["x","y","z"].forEach(function(T){return d.position[T]=C[T]});var E=R4(Ut.Vector3,ms(["x","y","z"].map(function(T){return w[T]})));d.parent.localToWorld(E),d.lookAt(E)}}})}function s(){var a=Pt(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(l){var c=l.__photonsObj&&l.__photonsObj.children,u=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!u||!u.length)&&(!c||!c.length))){var d=r?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),f=d[r?"source":"from"],h=d[r?"target":"to"];if(!(!f||!h||!f.hasOwnProperty("x")||!h.hasOwnProperty("x"))){var p=a(l),g=l.__curve?function(v){return l.__curve.getPoint(v)}:function(v){var m=function(_,S,w,C){return S[_]+(w[_]-S[_])*C||0};return{x:m("x",f,h,v),y:m("y",f,h,v),z:m("z",f,h,v)}},y=[].concat(ms(c||[]),ms(u||[]));y.forEach(function(v,m){var x=v.parent.__linkThreeObjType==="singleHopPhotons";if(v.hasOwnProperty("__progressRatio")||(v.__progressRatio=x?0:m/c.length),v.__progressRatio+=p,v.__progressRatio>=1)if(!x)v.__progressRatio=v.__progressRatio%1;else{v.parent.remove(v),xE(v);return}var _=v.__progressRatio,S=g(_);["x","y","z"].forEach(function(w){return v.position[w]=S[w]})})}}})}},emitParticle:function(e,r){if(r&&e.graphData.links.includes(r)){if(!r.__singleHopPhotonsObj){var i=new Ut.Group;i.__linkThreeObjType="singleHopPhotons",r.__singleHopPhotonsObj=i,e.graphScene.add(i)}var o=Pt(e.linkDirectionalParticleWidth),s=Math.ceil(o(r)*10)/10/2,a=e.linkDirectionalParticleResolution,l=new Ut.SphereGeometry(s,a,a),c=Pt(e.linkColor),u=Pt(e.linkDirectionalParticleColor),d=u(r)||c(r)||"#f0f0f0",f=new Ut.Color(Xh(d)),h=e.linkOpacity*3,p=new Ut.MeshLambertMaterial({color:f,transparent:!0,opacity:h});r.__singleHopPhotonsObj.add(new Ut.Mesh(l,p))}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var i=function o(s){var a=[];if(s.geometry){s.geometry.computeBoundingBox();var l=new Ut.Box3;l.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),a.push(l)}return a.concat.apply(a,ms((s.children||[]).filter(function(c){return!c.hasOwnProperty("__graphObjType")||c.__graphObjType==="node"&&r(c.__data)}).map(o)))}(e.graphScene);return i.length?Object.assign.apply(Object,ms(["x","y","z"].map(function(o){return CR({},o,[ZC(i,function(s){return s.min[o]}),QC(i,function(s){return s.max[o]})])}))):null}},stateInit:function(){return{d3ForceLayout:sk().force("link",ok()).force("charge",ak()).force("center",Zz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.graphScene=e},update:function(e,r){var i=function(j){return j.some(function(X){return r.hasOwnProperty(X)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&i(["nodeAutoColorBy","graphData","nodeColor"])&&YI(e.graphData.nodes,Pt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&i(["linkAutoColorBy","graphData","linkColor"])&&YI(e.graphData.links,Pt(e.linkAutoColorBy),e.linkColor),e._flushObjects||i(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var o=Pt(e.nodeThreeObject),s=Pt(e.nodeThreeObjectExtend),a=Pt(e.nodeVal),l=Pt(e.nodeColor),c=Pt(e.nodeVisibility),u={},d={};qh(e.graphData.nodes.filter(c),e.graphScene,{purge:e._flushObjects||i(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(j){return j.__graphObjType==="node"},createObj:function(j){var X=o(j),Q=s(j);X&&e.nodeThreeObject===X&&(X=X.clone());var ne;return X&&!Q?ne=X:(ne=new Ut.Mesh,ne.__graphDefaultObj=!0,X&&Q&&ne.add(X)),ne.__graphObjType="node",ne},updateObj:function(j,X){if(j.__graphDefaultObj){var Q=a(X)||1,ne=Math.cbrt(Q)*e.nodeRelSize,ye=e.nodeResolution;(!j.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||j.geometry.parameters.radius!==ne||j.geometry.parameters.widthSegments!==ye)&&(u.hasOwnProperty(Q)||(u[Q]=new Ut.SphereGeometry(ne,ye,ye)),j.geometry.dispose(),j.geometry=u[Q]);var me=l(X),fe=new Ut.Color(Xh(me||"#ffffaa")),le=e.nodeOpacity*e1(me);(j.material.type!=="MeshLambertMaterial"||!j.material.color.equals(fe)||j.material.opacity!==le)&&(d.hasOwnProperty(me)||(d[me]=new Ut.MeshLambertMaterial({color:fe,transparent:!0,opacity:le})),j.material.dispose(),j.material=d[me])}}})}if(e._flushObjects||i(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var f=Pt(e.linkThreeObject),h=Pt(e.linkThreeObjectExtend),p=Pt(e.linkMaterial),g=Pt(e.linkVisibility),y=Pt(e.linkColor),v=Pt(e.linkWidth),m={},x={},_={},S=e.graphData.links.filter(g);if(qh(S,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||i(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(j){return j.__graphObjType==="link"},exitObj:function(j){var X=j.__data&&j.__data.__singleHopPhotonsObj;X&&(X.parent.remove(X),xE(X),delete j.__data.__singleHopPhotonsObj)},createObj:function(j){var X=f(j),Q=h(j);X&&e.linkThreeObject===X&&(X=X.clone());var ne;if(!X||Q){var ye=!!v(j);if(ye)ne=new Ut.Mesh;else{var me=new Ut.BufferGeometry;me[t1]("position",new Ut.BufferAttribute(new Float32Array(2*3),3)),ne=new Ut.Line(me)}}var fe;return X?Q?(fe=new Ut.Group,fe.__graphDefaultObj=!0,fe.add(ne),fe.add(X)):fe=X:(fe=ne,fe.__graphDefaultObj=!0),fe.renderOrder=10,fe.__graphObjType="link",fe},updateObj:function(j,X){if(j.__graphDefaultObj){var Q=j.children.length?j.children[0]:j,ne=Math.ceil(v(X)*10)/10,ye=!!ne;if(ye){var me=ne/2,fe=e.linkResolution;if(!Q.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||Q.geometry.parameters.radiusTop!==me||Q.geometry.parameters.radialSegments!==fe){if(!m.hasOwnProperty(ne)){var le=new Ut.CylinderGeometry(me,me,1,fe,1,!1);le[Vv](new Ut.Matrix4().makeTranslation(0,1/2,0)),le[Vv](new Ut.Matrix4().makeRotationX(Math.PI/2)),m[ne]=le}Q.geometry.dispose(),Q.geometry=m[ne]}}var ge=p(X);if(ge)Q.material=ge;else{var q=y(X),ve=new Ut.Color(Xh(q||"#f0f0f0")),be=e.linkOpacity*e1(q),xe=ye?"MeshLambertMaterial":"LineBasicMaterial";if(Q.material.type!==xe||!Q.material.color.equals(ve)||Q.material.opacity!==be){var we=ye?x:_;we.hasOwnProperty(q)||(we[q]=new Ut[xe]({color:ve,transparent:be<1,opacity:be,depthWrite:be>=1})),Q.material.dispose(),Q.material=we[q]}}}}}),e.linkDirectionalArrowLength||r.hasOwnProperty("linkDirectionalArrowLength")){var w=Pt(e.linkDirectionalArrowLength),C=Pt(e.linkDirectionalArrowColor);qh(S.filter(w),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(j){return j.__linkThreeObjType==="arrow"},createObj:function(){var j=new Ut.Mesh(void 0,new Ut.MeshLambertMaterial({transparent:!0}));return j.__linkThreeObjType="arrow",j},updateObj:function(j,X){var Q=w(X),ne=e.linkDirectionalArrowResolution;if(!j.geometry.type.match(/^Cone(Buffer)?Geometry$/)||j.geometry.parameters.height!==Q||j.geometry.parameters.radialSegments!==ne){var ye=new Ut.ConeGeometry(Q*.25,Q,ne);ye.translate(0,Q/2,0),ye.rotateX(Math.PI/2),j.geometry.dispose(),j.geometry=ye}var me=C(X)||y(X)||"#f0f0f0";j.material.color=new Ut.Color(Xh(me)),j.material.opacity=e.linkOpacity*3*e1(me)}})}if(e.linkDirectionalParticles||r.hasOwnProperty("linkDirectionalParticles")){var E=Pt(e.linkDirectionalParticles),T=Pt(e.linkDirectionalParticleWidth),M=Pt(e.linkDirectionalParticleColor),R={},N={};qh(S.filter(E),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(j){return j.__linkThreeObjType==="photons"},createObj:function(){var j=new Ut.Group;return j.__linkThreeObjType="photons",j},updateObj:function(j,X){var Q=Math.round(Math.abs(E(X))),ne=!!j.children.length&&j.children[0],ye=Math.ceil(T(X)*10)/10/2,me=e.linkDirectionalParticleResolution,fe;ne&&ne.geometry.parameters.radius===ye&&ne.geometry.parameters.widthSegments===me?fe=ne.geometry:(N.hasOwnProperty(ye)||(N[ye]=new Ut.SphereGeometry(ye,me,me)),fe=N[ye],ne&&ne.geometry.dispose());var le=M(X)||y(X)||"#f0f0f0",ge=new Ut.Color(Xh(le)),q=e.linkOpacity*3,ve;ne&&ne.material.color.equals(ge)&&ne.material.opacity===q?ve=ne.material:(R.hasOwnProperty(le)||(R[le]=new Ut.MeshLambertMaterial({color:ge,transparent:!0,opacity:q})),ve=R[le],ne&&ne.material.dispose()),qh(ms(new Array(Q)).map(function(be,xe){return{idx:xe}}),j,{idAccessor:function(xe){return xe.idx},createObj:function(){return new Ut.Mesh(fe,ve)},updateObj:function(xe){xe.geometry=fe,xe.material=ve}})}})}}if(e._flushObjects=!1,i(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(z){z.source=z[e.linkSource],z.target=z[e.linkTarget]});var D=e.forceEngine!=="ngraph",L;if(D){(L=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var A=e.d3ForceLayout.force("link");A&&A.id(function(z){return z[e.nodeId]}).links(e.graphData.links);var I=e.dagMode&&ive(e.graphData,function(z){return z[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),P=Math.max.apply(Math,ms(Object.values(I||[]))),F=e.dagLevelDistance||e.graphData.nodes.length/(P||1)*ove*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(r.dagMode)){var O=["lr","rl"].includes(r.dagMode)?"fx":["td","bu"].includes(r.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(z){return delete z[O]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var V=["rl","td","zout"].includes(e.dagMode),U=function(j){return(I[j[e.nodeId]]-P/2)*F*(V?-1:1)},k=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(z){return z[k]=U(z)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?lk(function(z){var j=I[z[e.nodeId]]||-1;return(e.dagMode==="radialin"?P-j:j)*F}).strength(function(z){return e.dagNodeFilter(z)?1:0}):null)}else{var W=QI.graph();e.graphData.nodes.forEach(function(z){W.addNode(z[e.nodeId])}),e.graphData.links.forEach(function(z){W.addLink(z.source,z.target)}),L=QI.forcelayout(W,A4({dimensions:e.numDimensions},e.ngraphPhysics)),L.graph=W}for(var J=0;J<e.warmupTicks&&!(D&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);J++)L[D?"tick":"step"]();e.layout=L,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function ave(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=function(o){function s(){var a;Hge(this,s);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Gge(this,s,[].concat(c)),a.__kapsuleInstance=R4(n,[].concat(ms(r?[a]:[]),c)),a}return Wge(s,o),jge(s)}(e);return Object.keys(n()).forEach(function(o){return i.prototype[o]=function(){var s,a=(s=this.__kapsuleInstance)[o].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),i}var lve=window.THREE?window.THREE:{Group:Bd},I4=ave(sve,lve.Group,!0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const cve=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class uve{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=cve,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let r=this.renderObjects.get(e);if(r===void 0){const{geometry:i,material:o,object:s}=e;if(r={material:this.getMaterialData(o),geometry:{attributes:this.getAttributesData(i.attributes),indexVersion:i.index?i.index.version:null,drawRange:{start:i.drawRange.start,count:i.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(r.center=s.center.clone()),s.morphTargetInfluences&&(r.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(r.version=e.bundle.version),r.material.transmission>0){const{width:a,height:l}=e.context;r.bufferWidth=a,r.bufferHeight=l}this.renderObjects.set(e,r)}return r}getAttributesData(e){const r={};for(const i in e){const o=e[i];r[i]={version:o.version}}return r}containsNode(e){const r=e.material;for(const i in r)if(r[i]&&r[i].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const r={};for(const i of this.refreshUniforms){const o=e[i];o!=null&&(typeof o=="object"&&o.clone!==void 0?o.isTexture===!0?r[i]={id:o.id,version:o.version}:r[i]=o.clone():r[i]=o)}return r}equals(e){const{object:r,material:i,geometry:o}=e,s=this.getRenderObjectData(e);if(s.worldMatrix.equals(r.matrixWorld)!==!0)return s.worldMatrix.copy(r.matrixWorld),!1;const a=s.material;for(const y in a){const v=a[y],m=i[y];if(v.equals!==void 0){if(v.equals(m)===!1)return v.copy(m),!1}else if(m.isTexture===!0){if(v.id!==m.id||v.version!==m.version)return v.id=m.id,v.version=m.version,!1}else if(v!==m)return a[y]=m,!1}if(a.transmission>0){const{width:y,height:v}=e.context;if(s.bufferWidth!==y||s.bufferHeight!==v)return s.bufferWidth=y,s.bufferHeight=v,!1}const l=s.geometry,c=o.attributes,u=l.attributes,d=Object.keys(u),f=Object.keys(c);if(d.length!==f.length)return s.geometry.attributes=this.getAttributesData(c),!1;for(const y of d){const v=u[y],m=c[y];if(m===void 0)return delete u[y],!1;if(v.version!==m.version)return v.version=m.version,!1}const h=o.index,p=l.indexVersion,g=h?h.version:null;if(p!==g)return l.indexVersion=g,!1;if(l.drawRange.start!==o.drawRange.start||l.drawRange.count!==o.drawRange.count)return l.drawRange.start=o.drawRange.start,l.drawRange.count=o.drawRange.count,!1;if(s.morphTargetInfluences){let y=!1;for(let v=0;v<s.morphTargetInfluences.length;v++)s.morphTargetInfluences[v]!==r.morphTargetInfluences[v]&&(y=!0);if(y)return!0}return s.center&&s.center.equals(r.center)===!1?(s.center.copy(r.center),!0):(e.bundle!==null&&(s.version=e.bundle.version),!0)}needsRefresh(e,r){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:i}=r;if(this.renderId!==i)return this.renderId=i,!0;const o=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return o||s?!1:this.equals(e)!==!0}}function Vm(n,e=0){let r=3735928559^e,i=1103547991^e;if(n instanceof Array)for(let o=0,s;o<n.length;o++)s=n[o],r=Math.imul(r^s,2654435761),i=Math.imul(i^s,1597334677);else for(let o=0,s;o<n.length;o++)s=n.charCodeAt(o),r=Math.imul(r^s,2654435761),i=Math.imul(i^s,1597334677);return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&i)+(r>>>0)}const dve=n=>Vm(n),D4=n=>Vm(n),L4=(...n)=>Vm(n);function F4(n,e=!1){const r=[];n.isNode===!0&&(r.push(n.id),n=n.getSelf());for(const{property:i,childNode:o}of Yy(n))r.push(r,Vm(i.slice(0,-4)),o.getCacheKey(e));return Vm(r)}function*Yy(n,e=!1){for(const r in n){if(r.startsWith("_")===!0)continue;const i=n[r];if(Array.isArray(i)===!0)for(let o=0;o<i.length;o++){const s=i[o];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:r,index:o,childNode:s})}else if(i&&i.isNode===!0)yield{property:r,childNode:i};else if(typeof i=="object")for(const o in i){const s=i[o];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:r,index:o,childNode:s})}}}const fve=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]);function hve(n){return fve.get(n)}function Qy(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function U4(n,...e){const r=n?n.slice(-4):void 0;return e.length===1&&(r==="vec2"?e=[e[0],e[0]]:r==="vec3"?e=[e[0],e[0],e[0]]:r==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new Mt(...e):r==="vec2"?new je(...e):r==="vec3"?new Y(...e):r==="vec4"?new qt(...e):r==="mat3"?new Vt(...e):r==="mat4"?new fn(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?mve(e[0]):null}function pve(n){let e="";const r=new Uint8Array(n);for(let i=0;i<r.length;i++)e+=String.fromCharCode(r[i]);return btoa(e)}function mve(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const ZI={VERTEX:"vertex"},on={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},ka={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},gve=["fragment","vertex"],JI=["setup","analyze","generate"],eD=[...gve,"compute"],mh=["x","y","z","w"];let vve=0;class Qt extends Sc{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=on.NONE,this.updateBeforeType=on.NONE,this.updateAfterType=on.NONE,this.uuid=Gy.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:vve++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,r){return this.updateType=r,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,on.FRAME)}onRenderUpdate(e){return this.onUpdate(e,on.RENDER)}onObjectUpdate(e){return this.onUpdate(e,on.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of Yy(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const r of this.getChildren())r.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=F4(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const r=this.getNodeType(e);return e.getElementType(r)}getNodeType(e){const r=e.getNodeProperties(this);return r.outputNode?r.outputNode.getNodeType(e):this.nodeType}getShared(e){const r=this.getHash(e);return e.getNodeFromHash(r)||this}setup(e){const r=e.getNodeProperties(this);let i=0;for(const o of this.getChildren())r["node"+i++]=o;return null}analyze(e){if(e.increaseUsage(this)===1){const i=e.getNodeProperties(this);for(const o of Object.values(i))o&&o.isNode===!0&&o.build(e)}}generate(e,r){const{outputNode:i}=e.getNodeProperties(this);if(i&&i.isNode===!0)return i.build(e,r)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,r=null){const i=this.getShared(e);if(this!==i)return i.build(e,r);e.addNode(this),e.addChain(this);let o=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const a=e.getNodeProperties(this);if(a.initialized!==!0){const l=e.stack.nodes.length;a.initialized=!0,a.outputNode=this.setup(e),a.outputNode!==null&&e.stack.nodes.length;for(const c of Object.values(a))c&&c.isNode===!0&&c.build(e)}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const l=this.getNodeType(e),c=e.getDataFromNode(this);o=c.snippet,o===void 0?(o=this.generate(e)||"",c.snippet=o):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),o=e.format(o,l,r)}else o=this.generate(e,r)||"";return e.removeChain(this),e.addSequentialNode(this),o}getSerializeChildren(){return Yy(this)}serialize(e){const r=this.getSerializeChildren(),i={};for(const{property:o,index:s,childNode:a}of r)s!==void 0?(i[o]===void 0&&(i[o]=Number.isInteger(s)?[]:{}),i[o][s]=a.toJSON(e.meta).uuid):i[o]=a.toJSON(e.meta).uuid;Object.keys(i).length>0&&(e.inputNodes=i)}deserialize(e){if(e.inputNodes!==void 0){const r=e.meta.nodes;for(const i in e.inputNodes)if(Array.isArray(e.inputNodes[i])){const o=[];for(const s of e.inputNodes[i])o.push(r[s]);this[i]=o}else if(typeof e.inputNodes[i]=="object"){const o={};for(const s in e.inputNodes[i]){const a=e.inputNodes[i][s];o[s]=r[a]}this[i]=o}else{const o=e.inputNodes[i];this[i]=r[o]}}}toJSON(e){const{uuid:r,type:i}=this,o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[r];s===void 0&&(s={uuid:r,type:i,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},o!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}if(o){const l=a(e.textures),c=a(e.images),u=a(e.nodes);l.length>0&&(s.textures=l),c.length>0&&(s.images=c),u.length>0&&(s.nodes=u)}return s}}class Eg extends Qt{static get type(){return"ArrayElementNode"}constructor(e,r){super(),this.node=e,this.indexNode=r,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const r=this.node.build(e),i=this.indexNode.build(e,"uint");return`${r}[ ${i} ]`}}class B4 extends Qt{static get type(){return"ConvertNode"}constructor(e,r){super(),this.node=e,this.convertTo=r}getNodeType(e){const r=this.node.getNodeType(e);let i=null;for(const o of this.convertTo.split("|"))(i===null||e.getTypeLength(r)===e.getTypeLength(o))&&(i=o);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,r){const i=this.node,o=this.getNodeType(e),s=i.build(e,o);return e.format(s,o,r)}}class Rr extends Qt{static get type(){return"TempNode"}constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,r){if(e.getBuildStage()==="generate"){const o=e.getVectorType(this.getNodeType(e,r)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,o,r);if(o!=="void"&&r!=="void"&&this.hasDependencies(e)){const a=super.build(e,o),l=e.getVarFromNode(this,null,o),c=e.getPropertyName(l);return e.addLineFlowCode(`${c} = ${a}`,this),s.snippet=a,s.propertyName=c,e.format(s.propertyName,o,r)}}return super.build(e,r)}}class yve extends Rr{static get type(){return"JoinNode"}constructor(e=[],r=null){super(r),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((r,i)=>r+e.getTypeLength(i.getNodeType(e)),0))}generate(e,r){const i=this.getNodeType(e),o=this.nodes,s=e.getComponentType(i),a=[];for(const c of o){let u=c.build(e);const d=e.getComponentType(c.getNodeType(e));d!==s&&(u=e.format(u,d,s)),a.push(u)}const l=`${e.getType(i)}( ${a.join(", ")} )`;return e.format(l,i,r)}}const xve=mh.join("");class tD extends Qt{static get type(){return"SplitNode"}constructor(e,r="x"){super(),this.node=e,this.components=r,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const r of this.components)e=Math.max(mh.indexOf(r)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,r){const i=this.node,o=e.getTypeLength(i.getNodeType(e));let s=null;if(o>1){let a=null;this.getVectorLength()>=o&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const c=i.build(e,a);this.components.length===o&&this.components===xve.slice(0,this.components.length)?s=e.format(c,a,r):s=e.format(`${c}.${this.components}`,this.getNodeType(e),r)}else s=i.build(e,r);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class _ve extends Rr{static get type(){return"SetNode"}constructor(e,r,i){super(),this.sourceNode=e,this.components=r,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:r,components:i,targetNode:o}=this,s=this.getNodeType(e),a=e.getTypeFromLength(i.length,o.getNodeType(e)),l=o.build(e,a),c=r.build(e,s),u=e.getTypeLength(s),d=[];for(let f=0;f<u;f++){const h=mh[f];h===i[0]?(d.push(l),f+=i.length-1):d.push(c+"."+h)}return`${e.getType(s)}( ${d.join(", ")} )`}}class bve extends Rr{static get type(){return"FlipNode"}constructor(e,r){super(),this.sourceNode=e,this.components=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:r,sourceNode:i}=this,o=this.getNodeType(e),s=i.build(e),a=e.getVarFromNode(this),l=e.getPropertyName(a);e.addLineFlowCode(l+" = "+s,this);const c=e.getTypeLength(o),u=[];let d=0;for(let f=0;f<c;f++){const h=mh[f];h===r[d]?(u.push("1.0 - "+(l+"."+h)),d++):u.push(l+"."+h)}return`${e.getType(o)}( ${u.join(", ")} )`}}class TR extends Qt{static get type(){return"InputNode"}constructor(e,r=null){super(r),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Qy(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Qy(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=pve(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?U4(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}class dl extends TR{static get type(){return"ConstNode"}constructor(e,r=null){super(e,r),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,r){const i=this.getNodeType(e);return e.format(this.generateConst(e),i,r)}}let qf=null;const zd=new Map;function Ne(n,e){if(zd.has(n)){console.warn(`Redefinition of method chaining ${n}`);return}if(typeof e!="function")throw new Error(`Node element ${n} is not a function`);zd.set(n,e)}const $4=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),nD=n=>$4(n).split("").sort().join(""),z4={setup(n,e){const r=e.shift();return n(A_(r),...e)},get(n,e,r){if(typeof e=="string"&&n[e]===void 0){if(n.isStackNode!==!0&&e==="assign")return(...i)=>(qf.assign(r,...i),r);if(zd.has(e)){const i=zd.get(e);return n.isStackNode?(...o)=>r.add(i(...o)):(...o)=>i(r,...o)}else{if(e==="self")return n;if(e.endsWith("Assign")&&zd.has(e.slice(0,e.length-6))){const i=zd.get(e.slice(0,e.length-6));return n.isStackNode?(...o)=>r.assign(o[0],i(...o)):(...o)=>r.assign(i(r,...o))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=$4(e),nt(new tD(r,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=nD(e.slice(3).toLowerCase()),i=>nt(new _ve(n,e,i));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=nD(e.slice(4).toLowerCase()),()=>nt(new bve(nt(n),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),nt(new tD(n,e));if(/^\d+$/.test(e)===!0)return nt(new Eg(r,new dl(Number(e),"uint")))}}}return Reflect.get(n,e,r)},set(n,e,r,i){return typeof e=="string"&&n[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(i[e].assign(r),!0):Reflect.set(n,e,r,i)}},n1=new WeakMap,rD=new WeakMap,Sve=function(n,e=null){const r=Qy(n);if(r==="node"){let i=n1.get(n);return i===void 0&&(i=new Proxy(n,z4),n1.set(n,i),n1.set(i,i)),i}else{if(e===null&&(r==="float"||r==="boolean")||r&&r!=="shader"&&r!=="string")return nt(_E(n,e));if(r==="shader")return lt(n)}return n},wve=function(n,e=null){for(const r in n)n[r]=nt(n[r],e);return n},Cve=function(n,e=null){const r=n.length;for(let i=0;i<r;i++)n[i]=nt(n[i],e);return n},Eve=function(n,e=null,r=null,i=null){const o=s=>nt(i!==null?Object.assign(s,i):s);return e===null?(...s)=>o(new n(...of(s))):r!==null?(r=nt(r),(...s)=>o(new n(e,...of(s),r))):(...s)=>o(new n(e,...of(s)))},Tve=function(n,...e){return nt(new n(...of(e)))};class Mve extends Qt{constructor(e,r){super(),this.shaderNode=e,this.inputNodes=r}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}call(e){const{shaderNode:r,inputNodes:i}=this,o=e.getNodeProperties(r);if(o.onceOutput)return o.onceOutput;let s=null;if(r.layout){let a=rD.get(e.constructor);a===void 0&&(a=new WeakMap,rD.set(e.constructor,a));let l=a.get(r);l===void 0&&(l=nt(e.buildFunctionNode(r)),a.set(r,l)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(l),s=nt(l.call(i))}else{const a=r.jsFunc,l=i!==null?a(i,e):a(e);s=nt(l)}return r.once&&(o.onceOutput=s),s}getOutputNode(e){const r=e.getNodeProperties(this);return r.outputNode===null&&(r.outputNode=this.setupOutput(e)),r.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,r){return this.getOutputNode(e).build(e,r)}}class Rve extends Qt{constructor(e,r){super(r),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return A_(e),nt(new Mve(this,e))}setup(){return this.call()}}const Ave=[!1,!0],Nve=[0,1,2,3],Pve=[-1,-2],k4=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],MR=new Map;for(const n of Ave)MR.set(n,new dl(n));const RR=new Map;for(const n of Nve)RR.set(n,new dl(n,"uint"));const AR=new Map([...RR].map(n=>new dl(n.value,"int")));for(const n of Pve)AR.set(n,new dl(n,"int"));const M_=new Map([...AR].map(n=>new dl(n.value)));for(const n of k4)M_.set(n,new dl(n));for(const n of k4)M_.set(-n,new dl(-n));const R_={bool:MR,uint:RR,ints:AR,float:M_},iD=new Map([...MR,...M_]),_E=(n,e)=>iD.has(n)?iD.get(n):n.isNode===!0?n:new dl(n,e),Ove=n=>{try{return n.getNodeType()}catch{return}},Ar=function(n,e=null){return(...r)=>{if((r.length===0||!["bool","float","int","uint"].includes(n)&&r.every(o=>typeof o!="object"))&&(r=[U4(n,...r)]),r.length===1&&e!==null&&e.has(r[0]))return nt(e.get(r[0]));if(r.length===1){const o=_E(r[0],n);return Ove(o)===n?nt(o):nt(new B4(o,n))}const i=r.map(o=>_E(o));return nt(new yve(i,n))}},oD=n=>typeof n=="object"&&n!==null?n.value:n,Ive=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function U0(n,e){return new Proxy(new Rve(n,e),z4)}const nt=(n,e=null)=>Sve(n,e),A_=(n,e=null)=>new wve(n,e),of=(n,e=null)=>new Cve(n,e),Be=(...n)=>new Eve(...n),ct=(...n)=>new Tve(...n),lt=(n,e)=>{const r=new U0(n,e),i=(...o)=>{let s;return A_(o),o[0]&&o[0].isNode?s=[...o]:s=o[0],r.call(s)};return i.shaderNode=r,i.setLayout=o=>(r.setLayout(o),i),i.once=()=>(r.once=!0,i),i};Ne("toGlobal",n=>(n.global=!0,n));const Zy=n=>{qf=n},V4=()=>qf,Tr=(...n)=>qf.If(...n);function Dve(n){return qf&&qf.add(n),n}Ne("append",Dve);const Lve=new Ar("color"),Ae=new Ar("float",R_.float),cr=new Ar("int",R_.ints),Fve=new Ar("uint",R_.uint),G4=new Ar("bool",R_.bool),pt=new Ar("vec2"),Pa=new Ar("ivec2"),Uve=new Ar("uvec2"),Bve=new Ar("bvec2"),Ie=new Ar("vec3"),$ve=new Ar("ivec3"),zve=new Ar("uvec3"),kve=new Ar("bvec3"),Yt=new Ar("vec4"),Vve=new Ar("ivec4"),Gve=new Ar("uvec4"),Hve=new Ar("bvec4"),NR=new Ar("mat2"),Ii=new Ar("mat3"),sf=new Ar("mat4");Ne("toColor",Lve);Ne("toFloat",Ae);Ne("toInt",cr);Ne("toUint",Fve);Ne("toBool",G4);Ne("toVec2",pt);Ne("toIVec2",Pa);Ne("toUVec2",Uve);Ne("toBVec2",Bve);Ne("toVec3",Ie);Ne("toIVec3",$ve);Ne("toUVec3",zve);Ne("toBVec3",kve);Ne("toVec4",Yt);Ne("toIVec4",Vve);Ne("toUVec4",Gve);Ne("toBVec4",Hve);Ne("toMat2",NR);Ne("toMat3",Ii);Ne("toMat4",sf);const jve=Be(Eg),Wve=(n,e)=>nt(new B4(nt(n),e));Ne("element",jve);Ne("convert",Wve);class H4 extends Qt{static get type(){return"UniformGroupNode"}constructor(e,r=!1,i=1){super("string"),this.name=e,this.version=0,this.shared=r,this.order=i,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const qve=n=>new H4(n),j4=(n,e=0)=>new H4(n,!0,e),Xve=j4("frame"),jt=j4("render"),W4=qve("object");class Tg extends TR{static get type(){return"UniformNode"}constructor(e,r=null){super(e,r),this.isUniformNode=!0,this.name="",this.groupNode=W4}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,r){const i=this.getSelf();return e=e.bind(i),super.onUpdate(o=>{const s=e(o,i);s!==void 0&&(this.value=s)},r)}generate(e,r){const i=this.getNodeType(e),o=this.getUniformHash(e);let s=e.getNodeFromHash(o);s===void 0&&(e.setHashNode(this,o),s=this);const a=s.getInputType(e),l=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.label),c=e.getPropertyName(l);return e.context.label!==void 0&&delete e.context.label,e.format(c,i,r)}}const Xt=(n,e)=>{const r=Ive(e||n),i=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return nt(new Tg(i,r))};class Rn extends Qt{static get type(){return"PropertyNode"}constructor(e,r=null,i=!1){super(e),this.name=r,this.varying=i,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let r;return this.varying===!0?(r=e.getVaryingFromNode(this,this.name),r.needsInterpolation=!0):r=e.getVarFromNode(this,this.name),e.getPropertyName(r)}}const Kve=(n,e)=>nt(new Rn(n,e)),Jy=(n,e)=>nt(new Rn(n,e,!0)),Sn=ct(Rn,"vec4","DiffuseColor"),sD=ct(Rn,"vec3","EmissiveColor"),La=ct(Rn,"float","Roughness"),ex=ct(Rn,"float","Metalness"),bE=ct(Rn,"float","Clearcoat"),tx=ct(Rn,"float","ClearcoatRoughness"),kd=ct(Rn,"vec3","Sheen"),PR=ct(Rn,"float","SheenRoughness"),OR=ct(Rn,"float","Iridescence"),q4=ct(Rn,"float","IridescenceIOR"),X4=ct(Rn,"float","IridescenceThickness"),SE=ct(Rn,"float","AlphaT"),Vc=ct(Rn,"float","Anisotropy"),B0=ct(Rn,"vec3","AnisotropyT"),af=ct(Rn,"vec3","AnisotropyB"),go=ct(Rn,"color","SpecularColor"),nx=ct(Rn,"float","SpecularF90"),wE=ct(Rn,"float","Shininess"),Yve=ct(Rn,"vec4","Output"),r1=ct(Rn,"float","dashSize"),aD=ct(Rn,"float","gapSize"),$0=ct(Rn,"float","IOR"),CE=ct(Rn,"float","Transmission"),K4=ct(Rn,"float","Thickness"),Y4=ct(Rn,"float","AttenuationDistance"),Q4=ct(Rn,"color","AttenuationColor"),Z4=ct(Rn,"float","Dispersion");class Qve extends Rr{static get type(){return"AssignNode"}constructor(e,r){super(),this.targetNode=e,this.sourceNode=r}hasDependencies(){return!1}getNodeType(e,r){return r!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:r}=this;if(e.isAvailable("swizzleAssign")===!1&&r.isSplitNode&&r.components.length>1){const i=e.getTypeLength(r.node.getNodeType(e));return mh.join("").slice(0,i)!==r.components}return!1}generate(e,r){const{targetNode:i,sourceNode:o}=this,s=this.needsSplitAssign(e),a=i.getNodeType(e),l=i.context({assign:!0}).build(e),c=o.build(e,a),u=o.getNodeType(e),d=e.getDataFromNode(this);let f;if(d.initialized===!0)r!=="void"&&(f=l);else if(s){const h=e.getVarFromNode(this,null,a),p=e.getPropertyName(h);e.addLineFlowCode(`${p} = ${c}`,this);const g=i.node.context({assign:!0}).build(e);for(let y=0;y<i.components.length;y++){const v=i.components[y];e.addLineFlowCode(`${g}.${v} = ${p}[ ${y} ]`,this)}r!=="void"&&(f=l)}else f=`${l} = ${c}`,(r==="void"||u==="void")&&(e.addLineFlowCode(f,this),r!=="void"&&(f=l));return d.initialized=!0,e.format(f,a,r)}}const Zve=Be(Qve);Ne("assign",Zve);class Jve extends Rr{static get type(){return"FunctionCallNode"}constructor(e=null,r={}){super(),this.functionNode=e,this.parameters=r}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const r=[],i=this.functionNode,o=i.getInputs(e),s=this.parameters,a=(c,u)=>{const d=u.type,f=d==="pointer";let h;return f?h="&"+c.build(e):h=c.build(e,d),h};if(Array.isArray(s))for(let c=0;c<s.length;c++)r.push(a(s[c],o[c]));else for(const c of o){const u=s[c.name];if(u!==void 0)r.push(a(u,c));else throw new Error(`FunctionCallNode: Input '${c.name}' not found in FunctionNode.`)}return`${i.build(e,"property")}( ${r.join(", ")} )`}}const e0e=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?of(e):A_(e[0]),nt(new Jve(nt(n),e)));Ne("call",e0e);class tr extends Rr{static get type(){return"OperatorNode"}constructor(e,r,i,...o){if(super(),o.length>0){let s=new tr(e,r,i);for(let a=0;a<o.length-1;a++)s=new tr(e,s,o[a]);r=s,i=o[o.length-1]}this.op=e,this.aNode=r,this.bNode=i}getNodeType(e,r){const i=this.op,o=this.aNode,s=this.bNode,a=o.getNodeType(e),l=typeof s<"u"?s.getNodeType(e):null;if(a==="void"||l==="void")return"void";if(i==="%")return a;if(i==="~"||i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(a);if(i==="!"||i==="=="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const c=r?e.getTypeLength(r):Math.max(e.getTypeLength(a),e.getTypeLength(l));return c>1?`bvec${c}`:"bool"}else return a==="float"&&e.isMatrix(l)?l:e.isMatrix(a)&&e.isVector(l)?e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?e.getVectorFromMatrix(l):e.getTypeLength(l)>e.getTypeLength(a)?l:a}generate(e,r){const i=this.op,o=this.aNode,s=this.bNode,a=this.getNodeType(e,r);let l=null,c=null;a!=="void"?(l=o.getNodeType(e),c=typeof s<"u"?s.getNodeType(e):null,i==="<"||i===">"||i==="<="||i===">="||i==="=="?e.isVector(l)?c=l:l!==c&&(l=c="float"):i===">>"||i==="<<"?(l=a,c=e.changeComponentType(c,"uint")):e.isMatrix(l)&&e.isVector(c)?c=e.getVectorFromMatrix(l):e.isVector(l)&&e.isMatrix(c)?l=e.getVectorFromMatrix(c):l=c=a):l=c=a;const u=o.build(e,l),d=typeof s<"u"?s.build(e,c):null,f=e.getTypeLength(r),h=e.getFunctionOperator(i);if(r!=="void")return i==="<"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} < ${d} )`,a,r):i==="<="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} <= ${d} )`,a,r):i===">"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} > ${d} )`,a,r):i===">="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} >= ${d} )`,a,r):i==="!"||i==="~"?e.format(`(${i}${u})`,l,r):h?e.format(`${h}( ${u}, ${d} )`,a,r):e.format(`( ${u} ${i} ${d} )`,a,r);if(l!=="void")return h?e.format(`${h}( ${u}, ${d} )`,a,r):e.format(`${u} ${i} ${d}`,a,r)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Di=Be(tr,"+"),Gi=Be(tr,"-"),sn=Be(tr,"*"),il=Be(tr,"/"),J4=Be(tr,"%"),t0e=Be(tr,"=="),n0e=Be(tr,"!="),r0e=Be(tr,"<"),i0e=Be(tr,">"),o0e=Be(tr,"<="),s0e=Be(tr,">="),a0e=Be(tr,"&&"),l0e=Be(tr,"||"),c0e=Be(tr,"!"),u0e=Be(tr,"^^"),d0e=Be(tr,"&"),f0e=Be(tr,"~"),h0e=Be(tr,"|"),p0e=Be(tr,"^"),m0e=Be(tr,"<<"),g0e=Be(tr,">>");Ne("add",Di);Ne("sub",Gi);Ne("mul",sn);Ne("div",il);Ne("modInt",J4);Ne("equal",t0e);Ne("notEqual",n0e);Ne("lessThan",r0e);Ne("greaterThan",i0e);Ne("lessThanEqual",o0e);Ne("greaterThanEqual",s0e);Ne("and",a0e);Ne("or",l0e);Ne("not",c0e);Ne("xor",u0e);Ne("bitAnd",d0e);Ne("bitNot",f0e);Ne("bitOr",h0e);Ne("bitXor",p0e);Ne("shiftLeft",m0e);Ne("shiftRight",g0e);const v0e=(...n)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),J4(...n));Ne("remainder",v0e);class ue extends Rr{static get type(){return"MathNode"}constructor(e,r,i=null,o=null){super(),this.method=e,this.aNode=r,this.bNode=i,this.cNode=o}getInputType(e){const r=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,o=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(r)?0:e.getTypeLength(r),a=e.isMatrix(i)?0:e.getTypeLength(i),l=e.isMatrix(o)?0:e.getTypeLength(o);return s>a&&s>l?r:a>l?i:l>s?o:r}getNodeType(e){const r=this.method;return r===ue.LENGTH||r===ue.DISTANCE||r===ue.DOT?"float":r===ue.CROSS?"vec3":r===ue.ALL?"bool":r===ue.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):r===ue.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,r){const i=this.method,o=this.getNodeType(e),s=this.getInputType(e),a=this.aNode,l=this.bNode,c=this.cNode,u=e.renderer.isWebGLRenderer===!0;if(i===ue.TRANSFORM_DIRECTION){let d=a,f=l;e.isMatrix(d.getNodeType(e))?f=Yt(Ie(f),0):d=Yt(Ie(d),0);const h=sn(d,f).xyz;return Hm(h).build(e,r)}else{if(i===ue.NEGATE)return e.format("( - "+a.build(e,s)+" )",o,r);if(i===ue.ONE_MINUS)return Gi(1,a).build(e,r);if(i===ue.RECIPROCAL)return il(1,a).build(e,r);if(i===ue.DIFFERENCE)return Vo(Gi(a,l)).build(e,r);{const d=[];return i===ue.CROSS||i===ue.MOD?d.push(a.build(e,o),l.build(e,o)):u&&i===ue.STEP?d.push(a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s),l.build(e,s)):u&&(i===ue.MIN||i===ue.MAX)||i===ue.MOD?d.push(a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):i===ue.REFRACT?d.push(a.build(e,s),l.build(e,s),c.build(e,"float")):i===ue.MIX?d.push(a.build(e,s),l.build(e,s),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":s)):(d.push(a.build(e,s)),l!==null&&d.push(l.build(e,s)),c!==null&&d.push(c.build(e,s))),e.format(`${e.getMethod(i,o)}( ${d.join(", ")} )`,o,r)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}ue.ALL="all";ue.ANY="any";ue.EQUALS="equals";ue.RADIANS="radians";ue.DEGREES="degrees";ue.EXP="exp";ue.EXP2="exp2";ue.LOG="log";ue.LOG2="log2";ue.SQRT="sqrt";ue.INVERSE_SQRT="inversesqrt";ue.FLOOR="floor";ue.CEIL="ceil";ue.NORMALIZE="normalize";ue.FRACT="fract";ue.SIN="sin";ue.COS="cos";ue.TAN="tan";ue.ASIN="asin";ue.ACOS="acos";ue.ATAN="atan";ue.ABS="abs";ue.SIGN="sign";ue.LENGTH="length";ue.NEGATE="negate";ue.ONE_MINUS="oneMinus";ue.DFDX="dFdx";ue.DFDY="dFdy";ue.ROUND="round";ue.RECIPROCAL="reciprocal";ue.TRUNC="trunc";ue.FWIDTH="fwidth";ue.BITCAST="bitcast";ue.TRANSPOSE="transpose";ue.ATAN2="atan2";ue.MIN="min";ue.MAX="max";ue.MOD="mod";ue.STEP="step";ue.REFLECT="reflect";ue.DISTANCE="distance";ue.DIFFERENCE="difference";ue.DOT="dot";ue.CROSS="cross";ue.POW="pow";ue.TRANSFORM_DIRECTION="transformDirection";ue.MIX="mix";ue.CLAMP="clamp";ue.REFRACT="refract";ue.SMOOTHSTEP="smoothstep";ue.FACEFORWARD="faceforward";const y0e=Ae(1e-6),x0e=Ae(Math.PI),e5=Be(ue,ue.ALL),_0e=Be(ue,ue.ANY),b0e=Be(ue,ue.EQUALS),S0e=Be(ue,ue.RADIANS),w0e=Be(ue,ue.DEGREES),t5=Be(ue,ue.EXP),Gm=Be(ue,ue.EXP2),n5=Be(ue,ue.LOG),Xa=Be(ue,ue.LOG2),IR=Be(ue,ue.SQRT),C0e=Be(ue,ue.INVERSE_SQRT),pu=Be(ue,ue.FLOOR),DR=Be(ue,ue.CEIL),Hm=Be(ue,ue.NORMALIZE),Ec=Be(ue,ue.FRACT),ys=Be(ue,ue.SIN),Ul=Be(ue,ue.COS),E0e=Be(ue,ue.TAN),T0e=Be(ue,ue.ASIN),M0e=Be(ue,ue.ACOS),R0e=Be(ue,ue.ATAN),Vo=Be(ue,ue.ABS),rx=Be(ue,ue.SIGN),sc=Be(ue,ue.LENGTH),A0e=Be(ue,ue.NEGATE),N0e=Be(ue,ue.ONE_MINUS),r5=Be(ue,ue.DFDX),i5=Be(ue,ue.DFDY),P0e=Be(ue,ue.ROUND),O0e=Be(ue,ue.RECIPROCAL),I0e=Be(ue,ue.TRUNC),D0e=Be(ue,ue.FWIDTH);ue.BITCAST;const L0e=Be(ue,ue.TRANSPOSE),F0e=Be(ue,ue.ATAN2),jm=Be(ue,ue.MIN),ro=Be(ue,ue.MAX),o5=Be(ue,ue.MOD),s5=Be(ue,ue.STEP),U0e=Be(ue,ue.REFLECT),B0e=Be(ue,ue.DISTANCE),$0e=Be(ue,ue.DIFFERENCE),LR=Be(ue,ue.DOT),a5=Be(ue,ue.CROSS),N_=Be(ue,ue.POW),l5=Be(ue,ue.POW,2),z0e=Be(ue,ue.POW,3),k0e=Be(ue,ue.POW,4),V0e=Be(ue,ue.TRANSFORM_DIRECTION),G0e=n=>sn(rx(n),N_(Vo(n),1/3)),H0e=n=>LR(n,n),jn=Be(ue,ue.MIX),ol=(n,e=0,r=1)=>nt(new ue(ue.CLAMP,nt(n),nt(e),nt(r))),j0e=n=>ol(n),c5=Be(ue,ue.REFRACT),Au=Be(ue,ue.SMOOTHSTEP),W0e=Be(ue,ue.FACEFORWARD),q0e=lt(([n])=>{const i=43758.5453,o=LR(n.xy,pt(12.9898,78.233)),s=o5(o,x0e);return Ec(ys(s).mul(i))}),X0e=(n,e,r)=>jn(e,r,n),K0e=(n,e,r)=>Au(e,r,n);Ne("all",e5);Ne("any",_0e);Ne("equals",b0e);Ne("radians",S0e);Ne("degrees",w0e);Ne("exp",t5);Ne("exp2",Gm);Ne("log",n5);Ne("log2",Xa);Ne("sqrt",IR);Ne("inverseSqrt",C0e);Ne("floor",pu);Ne("ceil",DR);Ne("normalize",Hm);Ne("fract",Ec);Ne("sin",ys);Ne("cos",Ul);Ne("tan",E0e);Ne("asin",T0e);Ne("acos",M0e);Ne("atan",R0e);Ne("abs",Vo);Ne("sign",rx);Ne("length",sc);Ne("lengthSq",H0e);Ne("negate",A0e);Ne("oneMinus",N0e);Ne("dFdx",r5);Ne("dFdy",i5);Ne("round",P0e);Ne("reciprocal",O0e);Ne("trunc",I0e);Ne("fwidth",D0e);Ne("atan2",F0e);Ne("min",jm);Ne("max",ro);Ne("mod",o5);Ne("step",s5);Ne("reflect",U0e);Ne("distance",B0e);Ne("dot",LR);Ne("cross",a5);Ne("pow",N_);Ne("pow2",l5);Ne("pow3",z0e);Ne("pow4",k0e);Ne("transformDirection",V0e);Ne("mix",X0e);Ne("clamp",ol);Ne("refract",c5);Ne("smoothstep",K0e);Ne("faceForward",W0e);Ne("difference",$0e);Ne("saturate",j0e);Ne("cbrt",G0e);Ne("transpose",L0e);Ne("rand",q0e);class Y0e extends Qt{static get type(){return"ConditionalNode"}constructor(e,r,i=null){super(),this.condNode=e,this.ifNode=r,this.elseNode=i}getNodeType(e){const r=this.ifNode.getNodeType(e);if(this.elseNode!==null){const i=this.elseNode.getNodeType(e);if(e.getTypeLength(i)>e.getTypeLength(r))return i}return r}setup(e){const r=this.condNode.cache(),i=this.ifNode.cache(),o=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(i).parentNodeBlock=s,o!==null&&(e.getDataFromNode(o).parentNodeBlock=s);const a=e.getNodeProperties(this);a.condNode=r,a.ifNode=i.context({nodeBlock:i}),a.elseNode=o?o.context({nodeBlock:o}):null}generate(e,r){const i=this.getNodeType(e),o=e.getDataFromNode(this);if(o.nodeProperty!==void 0)return o.nodeProperty;const{condNode:s,ifNode:a,elseNode:l}=e.getNodeProperties(this),c=r!=="void",u=c?Kve(i).build(e):"";o.nodeProperty=u;const d=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${d} ) {

`).addFlowTab();let f=a.build(e,i);if(f&&(c?f=u+" = "+f+";":f="return "+f+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+f+`

`+e.tab+"}"),l!==null){e.addFlowCode(` else {

`).addFlowTab();let h=l.build(e,i);h&&(c?h=u+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(u,i,r)}}const Xi=Be(Y0e);Ne("select",Xi);const Q0e=(...n)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),Xi(...n));Ne("cond",Q0e);class u5 extends Qt{static get type(){return"ContextNode"}constructor(e,r={}){super(),this.isContextNode=!0,this.node=e,this.value=r}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const r=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e);return e.setContext(r),i}generate(e,r){const i=e.getContext();e.setContext({...e.context,...this.value});const o=this.node.build(e,r);return e.setContext(i),o}}const FR=Be(u5),Z0e=(n,e)=>FR(n,{label:e});Ne("context",FR);Ne("label",Z0e);class d5 extends Qt{static get type(){return"VarNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.global=!0,this.isVarNode=!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:r,name:i}=this,o=e.getVarFromNode(this,i,e.getVectorType(this.getNodeType(e))),s=e.getPropertyName(o),a=r.build(e,o.type);return e.addLineFlowCode(`${s} = ${a}`,this),s}}const f5=Be(d5);Ne("toVar",(...n)=>f5(...n).append());const J0e=n=>(console.warn('TSL: "temp" is deprecated. Use ".toVar()" instead.'),f5(n));Ne("temp",J0e);class eye extends Qt{static get type(){return"VaryingNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const r=e.getNodeProperties(this);let i=r.varying;if(i===void 0){const o=this.name,s=this.getNodeType(e);r.varying=i=e.getVaryingFromNode(this,o,s),r.node=this.node}return i.needsInterpolation||(i.needsInterpolation=e.shaderStage==="fragment"),i}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const r=e.getNodeProperties(this),i=this.setupVarying(e);if(r.propertyName===void 0){const o=this.getNodeType(e),s=e.getPropertyName(i,ZI.VERTEX);e.flowNodeFromShaderStage(ZI.VERTEX,this.node,o,s),r.propertyName=s}return e.getPropertyName(i)}}const fl=Be(eye);Ne("varying",fl);const tye=lt(([n])=>{const e=n.mul(.9478672986).add(.0521327014).pow(2.4),r=n.mul(.0773993808),i=n.lessThanEqual(.04045);return jn(e,r,i)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),nye=lt(([n])=>{const e=n.pow(.41666).mul(1.055).sub(.055),r=n.mul(12.92),i=n.lessThanEqual(.0031308);return jn(e,r,i)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),Mg="WorkingColorSpace",UR="OutputColorSpace";class P_ extends Rr{static get type(){return"ColorSpaceNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.source=r,this.target=i}resolveColorSpace(e,r){return r===Mg?rn.workingColorSpace:r===UR?e.context.outputColorSpace||e.renderer.outputColorSpace:r}setup(e){const{colorNode:r}=this,i=this.resolveColorSpace(e,this.source),o=this.resolveColorSpace(e,this.target);let s=r;return rn.enabled===!1||i===o||!i||!o||(rn.getTransfer(i)===Mn&&(s=Yt(tye(s.rgb),s.a)),rn.getPrimaries(i)!==rn.getPrimaries(o)&&(s=Yt(Ii(rn._getMatrix(new Vt,i,o)).mul(s.rgb),s.a)),rn.getTransfer(o)===Mn&&(s=Yt(nye(s.rgb),s.a))),s}}const rye=n=>nt(new P_(nt(n),Mg,UR)),iye=n=>nt(new P_(nt(n),UR,Mg)),oye=(n,e)=>nt(new P_(nt(n),Mg,e)),h5=(n,e)=>nt(new P_(nt(n),e,Mg));Ne("toOutputColorSpace",rye);Ne("toWorkingColorSpace",iye);Ne("workingToColorSpace",oye);Ne("colorSpaceToWorking",h5);let sye=class extends Eg{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),o=this.getNodeType();return e.format(r,i,o)}};class p5 extends Qt{static get type(){return"ReferenceBaseNode"}constructor(e,r,i=null,o=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=o,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.updateType=on.OBJECT}setGroup(e){return this.group=e,this}element(e){return nt(new sye(this,nt(e)))}setNodeType(e){const r=Xt(null,e).getSelf();this.group!==null&&r.setGroup(this.group),this.node=r}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let o=1;o<r.length;o++)i=i[r[o]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const aye=(n,e,r)=>nt(new p5(n,e,r));class lye extends p5{static get type(){return"RendererReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.renderer=i,this.setGroup(jt)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const cye=(n,e,r)=>nt(new lye(n,e,r));class uye extends Rr{static get type(){return"ToneMappingNode"}constructor(e,r=fye,i=null){super("vec3"),this.toneMapping=e,this.exposureNode=r,this.colorNode=i}getCacheKey(){return L4(super.getCacheKey(),this.toneMapping)}setup(e){const r=this.colorNode||e.context.color,i=this.toneMapping;if(i===to)return r;let o=null;const s=e.renderer.library.getToneMappingFunction(i);return s!==null?o=Yt(s(r.rgb,this.exposureNode),r.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),o=r),o}}const dye=(n,e,r)=>nt(new uye(n,nt(e),nt(r))),fye=cye("toneMappingExposure","float");Ne("toneMapping",(n,e,r)=>dye(e,r,n));class hye extends TR{static get type(){return"BufferAttributeNode"}constructor(e,r=null,i=0,o=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferStride=i,this.bufferOffset=o,this.usage=Vy,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let r=e.globalCache.getData(this.value);return r===void 0&&(r={node:this},e.globalCache.setData(this.value,r)),r.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const r=this.getNodeType(e),i=this.value,o=e.getTypeLength(r),s=this.bufferStride||o,a=this.bufferOffset,l=i.isInterleavedBuffer===!0?i:new Hk(i,s),c=new lR(l,o,a);l.setUsage(this.usage),this.attribute=c,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const r=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,r),o=e.getPropertyName(i);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=o,s=o):s=fl(this).build(e,r),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const BR=(n,e,r,i)=>nt(new hye(n,e,r,i)),pye=(n,e,r,i)=>BR(n,e,r,i).setUsage(Ud),lD=(n,e,r,i)=>BR(n,e,r,i).setInstanced(!0),cD=(n,e,r,i)=>pye(n,e,r,i).setInstanced(!0);Ne("toAttribute",n=>BR(n.value));class mye extends Qt{static get type(){return"ComputeNode"}constructor(e,r,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=r,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.updateBeforeType=on.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:r}=this;let i=r[0];for(let o=1;o<r.length;o++)i*=r[o];this.dispatchCount=Math.ceil(e/i)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:r}=e;if(r==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i,this)}}}const gye=(n,e,r)=>nt(new mye(nt(n),e,r));Ne("compute",gye);class vye extends Qt{static get type(){return"CacheNode"}constructor(e,r=!0){super(),this.node=e,this.parent=r,this.isCacheNode=!0}getNodeType(e){return this.node.getNodeType(e)}build(e,...r){const i=e.getCache(),o=e.getCacheFromNode(this,this.parent);e.setCache(o);const s=this.node.build(e,...r);return e.setCache(i),s}}const z0=(n,...e)=>nt(new vye(nt(n),...e));Ne("cache",z0);class yye extends Qt{static get type(){return"BypassNode"}constructor(e,r){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=r}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const r=this.callNode.build(e,"void");return r!==""&&e.addLineFlowCode(r,this),this.outputNode.build(e)}}const xye=Be(yye);Ne("bypass",xye);class m5 extends Qt{static get type(){return"RemapNode"}constructor(e,r,i,o=Ae(0),s=Ae(1)){super(),this.node=e,this.inLowNode=r,this.inHighNode=i,this.outLowNode=o,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:r,inHighNode:i,outLowNode:o,outHighNode:s,doClamp:a}=this;let l=e.sub(r).div(i.sub(r));return a===!0&&(l=l.clamp()),l.mul(s.sub(o)).add(o)}}const _ye=Be(m5,null,null,{doClamp:!1}),bye=Be(m5);Ne("remap",_ye);Ne("remapClamp",bye);class g5 extends Qt{static get type(){return"ExpressionNode"}constructor(e="",r="void"){super(r),this.snippet=e}generate(e,r){const i=this.getNodeType(e),o=this.snippet;if(i==="void")e.addLineFlowCode(o,this);else return e.format(`( ${o} )`,i,r)}}const Wm=Be(g5),Sye=n=>(n?Xi(n,Wm("discard")):Wm("discard")).append();Ne("discard",Sye);class wye extends Rr{static get type(){return"RenderOutputNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.toneMapping=r,this.outputColorSpace=i,this.isRenderOutput=!0}setup({context:e}){let r=this.colorNode||e.color;const i=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||to,o=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||_o;return i!==to&&(r=r.toneMapping(i)),o!==_o&&o!==rn.workingColorSpace&&(r=r.workingToColorSpace(o)),r}}const Cye=(n,e=null,r=null)=>nt(new wye(nt(n),e,r));Ne("renderOutput",Cye);class Eye extends Qt{static get type(){return"AttributeNode"}constructor(e,r=null){super(r),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let r=this.nodeType;if(r===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const o=e.geometry.getAttribute(i);r=e.getTypeFromAttribute(o)}else r="float"}return r}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const r=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(r)===!0){const s=e.geometry.getAttribute(r),a=e.getTypeFromAttribute(s),l=e.getAttribute(r,a);return e.shaderStage==="vertex"?e.format(l.name,a,i):fl(this).build(e,i)}else return console.warn(`AttributeNode: Vertex attribute "${r}" not found on geometry.`),e.generateConst(i)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const sl=(n,e)=>nt(new Eye(n,e)),O_=n=>sl("uv"+(n>0?n:""),"vec2");class Tye extends Qt{static get type(){return"TextureSizeNode"}constructor(e,r=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=r}generate(e,r){const i=this.textureNode.build(e,"property"),o=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${o} )`,this.getNodeType(e),r)}}const zp=Be(Tye);class Mye extends Tg{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=on.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,r=e.images,i=r&&r.length>0?r[0]&&r[0].image||r[0]:e.image;if(i&&i.width!==void 0){const{width:o,height:s}=i;this.value=Math.log2(Math.max(o,s))}}}const Rye=Be(Mye);class Rg extends Tg{static get type(){return"TextureNode"}constructor(e,r=null,i=null,o=null){super(e),this.isTextureNode=!0,this.uvNode=r,this.levelNode=i,this.biasNode=o,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=on.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(r===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===rr?"uvec4":this.value.type===Kr?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return O_(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Xt(this.value.matrix)),this._matrixUniform.mul(Ie(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?on.FRAME:on.NONE,this}setupUV(e,r){const i=this.value;return e.isFlipY()&&(i.image instanceof ImageBitmap&&i.flipY===!0||i.isRenderTargetTexture===!0||i.isFramebufferTexture===!0||i.isDepthTexture===!0)&&(this.sampler?r=r.flipY():r=r.setY(cr(zp(this,this.levelNode).y).sub(r.y).sub(1))),r}setup(e){const r=e.getNodeProperties(this);r.referenceNode=this.referenceNode;let i=this.uvNode;(i===null||e.context.forceUVContext===!0)&&e.context.getUV&&(i=e.context.getUV(this)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i)),i=this.setupUV(e,i);let o=this.levelNode;o===null&&e.context.getTextureLevel&&(o=e.context.getTextureLevel(this)),r.uvNode=i,r.levelNode=o,r.biasNode=this.biasNode,r.compareNode=this.compareNode,r.gradNode=this.gradNode,r.depthNode=this.depthNode}generateUV(e,r){return r.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,r,i,o,s,a,l,c){const u=this.value;let d;return o?d=e.generateTextureLevel(u,r,i,o,a):s?d=e.generateTextureBias(u,r,i,s,a):c?d=e.generateTextureGrad(u,r,i,c,a):l?d=e.generateTextureCompare(u,r,i,l,a):this.sampler===!1?d=e.generateTextureLoad(u,r,i,a):d=e.generateTexture(u,r,i,a),d}generate(e,r){const i=e.getNodeProperties(this),o=this.value;if(!o||o.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const s=super.generate(e,"property");if(r==="sampler")return s+"_sampler";if(e.isReference(r))return s;{const a=e.getDataFromNode(this);let l=a.propertyName;if(l===void 0){const{uvNode:d,levelNode:f,biasNode:h,compareNode:p,depthNode:g,gradNode:y}=i,v=this.generateUV(e,d),m=f?f.build(e,"float"):null,x=h?h.build(e,"float"):null,_=g?g.build(e,"int"):null,S=p?p.build(e,"float"):null,w=y?[y[0].build(e,"vec2"),y[1].build(e,"vec2")]:null,C=e.getVarFromNode(this);l=e.getPropertyName(C);const E=this.generateSnippet(e,s,v,m,x,_,S,w);e.addLineFlowCode(`${l} = ${E}`,this),a.snippet=E,a.propertyName=l}let c=l;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(o)&&(c=h5(Wm(c,u),o.colorSpace).setup(e).build(e,u)),e.format(c,u,r)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const r=this.clone();return r.uvNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}blur(e){const r=this.clone();return r.biasNode=nt(e).mul(Rye(r)),r.referenceNode=this.getSelf(),nt(r)}level(e){const r=this.clone();return r.levelNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}size(e){return zp(this,e)}bias(e){const r=this.clone();return r.biasNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}compare(e){const r=this.clone();return r.compareNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}grad(e,r){const i=this.clone();return i.gradNode=[nt(e),nt(r)],i.referenceNode=this.getSelf(),nt(i)}depth(e){const r=this.clone();return r.depthNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,r=this._matrixUniform;r!==null&&(r.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const gn=Be(Rg),us=(...n)=>gn(...n).setSampler(!1),Kc=Xt("float").label("cameraNear").setGroup(jt).onRenderUpdate(({camera:n})=>n.near),Yc=Xt("float").label("cameraFar").setGroup(jt).onRenderUpdate(({camera:n})=>n.far),ix=Xt("mat4").label("cameraProjectionMatrix").setGroup(jt).onRenderUpdate(({camera:n})=>n.projectionMatrix),hl=Xt("mat4").label("cameraViewMatrix").setGroup(jt).onRenderUpdate(({camera:n})=>n.matrixWorldInverse),Aye=Xt(new Y).label("cameraPosition").setGroup(jt).onRenderUpdate(({camera:n},e)=>e.value.setFromMatrixPosition(n.matrixWorld));class xn extends Qt{static get type(){return"Object3DNode"}constructor(e,r=null){super(),this.scope=e,this.object3d=r,this.updateType=on.OBJECT,this._uniformNode=new Tg(null)}getNodeType(){const e=this.scope;if(e===xn.WORLD_MATRIX)return"mat4";if(e===xn.POSITION||e===xn.VIEW_POSITION||e===xn.DIRECTION||e===xn.SCALE)return"vec3"}update(e){const r=this.object3d,i=this._uniformNode,o=this.scope;if(o===xn.WORLD_MATRIX)i.value=r.matrixWorld;else if(o===xn.POSITION)i.value=i.value||new Y,i.value.setFromMatrixPosition(r.matrixWorld);else if(o===xn.SCALE)i.value=i.value||new Y,i.value.setFromMatrixScale(r.matrixWorld);else if(o===xn.DIRECTION)i.value=i.value||new Y,r.getWorldDirection(i.value);else if(o===xn.VIEW_POSITION){const s=e.camera;i.value=i.value||new Y,i.value.setFromMatrixPosition(r.matrixWorld),i.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const r=this.scope;return r===xn.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(r===xn.POSITION||r===xn.VIEW_POSITION||r===xn.DIRECTION||r===xn.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}xn.WORLD_MATRIX="worldMatrix";xn.POSITION="position";xn.SCALE="scale";xn.VIEW_POSITION="viewPosition";xn.DIRECTION="direction";xn.DIRECTION;xn.WORLD_MATRIX;const Nye=Be(xn,xn.POSITION);xn.SCALE;xn.VIEW_POSITION;class sa extends xn{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}sa.DIRECTION;const Nu=ct(sa,sa.WORLD_MATRIX);sa.POSITION;sa.SCALE;sa.VIEW_POSITION;const Pye=Xt(new Vt).onObjectUpdate(({object:n},e)=>e.value.getNormalMatrix(n.matrixWorld)),I_=hl.mul(Nu).toVar("modelViewMatrix"),v5=sl("position","vec3"),oi=v5.varying("positionLocal"),uD=v5.varying("positionPrevious"),qm=Nu.mul(oi).xyz.varying("v_positionWorld"),y5=oi.transformDirection(Nu).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Fr=I_.mul(oi).xyz.varying("v_positionView"),ir=Fr.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection");class Oye extends Qt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:r,material:i}=e;return r.coordinateSystem===jo&&i.side===er?"false":e.getFrontFacing()}}const Iye=ct(Oye),D_=Ae(Iye).mul(2).sub(1),x5=sl("normal","vec3"),aa=lt(n=>n.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),Ie(0,1,0)):x5,"vec3").once()().toVar("normalLocal"),Dye=Fr.dFdx().cross(Fr.dFdy()).normalize().toVar("normalFlat"),Os=lt(n=>{let e;return n.material.flatShading===!0?e=Dye:e=fl(b5(aa),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),_5=fl(Os.transformDirection(hl),"v_normalWorld").normalize().toVar("normalWorld"),wr=lt(n=>n.context.setupNormal(),"vec3").once()().mul(D_).toVar("transformedNormalView"),$R=wr.transformDirection(hl).toVar("transformedNormalWorld"),vp=lt(n=>n.context.setupClearcoatNormal(),"vec3").once()().mul(D_).toVar("transformedClearcoatNormalView"),Lye=lt(([n,e=Nu])=>{const r=Ii(e),i=n.div(Ie(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2])));return r.mul(i).xyz}),b5=lt(([n],e)=>{const r=e.renderer.nodes.modelNormalViewMatrix;if(r!==null)return r.transformDirection(n);const i=Pye.mul(n);return hl.transformDirection(i)}),Fye=Xt(0).onReference(({material:n})=>n).onRenderUpdate(({material:n})=>n.refractionRatio),Uye=ir.negate().reflect(wr),Bye=ir.negate().refract(wr,Fye),$ye=Uye.transformDirection(hl).toVar("reflectVector"),zye=Bye.transformDirection(hl).toVar("reflectVector");class kye extends Rg{static get type(){return"CubeTextureNode"}constructor(e,r=null,i=null,o=null){super(e,r,i,o),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===Jo?$ye:e.mapping===es?zye:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Ie(0,0,0))}setUpdateMatrix(){}setupUV(e,r){const i=this.value;return e.renderer.coordinateSystem===Ru||!i.isRenderTargetTexture?Ie(r.x.negate(),r.yz):r}generateUV(e,r){return r.build(e,"vec3")}}const Xm=Be(kye);class S5 extends Tg{static get type(){return"BufferNode"}constructor(e,r,i=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferCount=i}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const zR=(n,e,r)=>nt(new S5(n,e,r));class Vye extends Eg{static get type(){return"UniformArrayElementNode"}constructor(e,r){super(e,r),this.isArrayBufferElementNode=!0}generate(e){const r=super.generate(e),i=this.getNodeType();return e.format(r,"vec4",i)}}class Gye extends S5{static get type(){return"UniformArrayNode"}constructor(e,r=null){super(null,"vec4"),this.array=e,this.elementType=r,this._elementType=null,this._elementLength=0,this.updateType=on.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:r}=this,i=this.getElementLength(),o=this.getElementType();if(i===1)for(let s=0;s<e.length;s++){const a=s*4;r[a]=e[s]}else if(o==="color")for(let s=0;s<e.length;s++){const a=s*4,l=e[s];r[a]=l.r,r[a+1]=l.g,r[a+2]=l.b||0}else for(let s=0;s<e.length;s++){const a=s*4,l=e[s];r[a]=l.x,r[a+1]=l.y,r[a+2]=l.z||0,r[a+3]=l.w||0}}setup(e){const r=this.array.length;this._elementType=this.elementType===null?Qy(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);let i=Float32Array;return this._elementType.charAt(0)==="i"?i=Int32Array:this._elementType.charAt(0)==="u"&&(i=Uint32Array),this.value=new i(r*4),this.bufferCount=r,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),super.setup(e)}element(e){return nt(new Vye(this,nt(e)))}}const zl=(n,e)=>nt(new Gye(n,e));class Hye extends Eg{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),o=this.getNodeType();return e.format(r,i,o)}}class kR extends Qt{static get type(){return"ReferenceNode"}constructor(e,r,i=null,o=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=o,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.name=null,this.updateType=on.OBJECT}element(e){return nt(new Hye(this,nt(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let r=null;this.count!==null?r=zR(null,e,this.count):Array.isArray(this.getValueFromReference())?r=zl(null,e):e==="texture"?r=gn(null):e==="cubeTexture"?r=Xm(null):r=Xt(null,e),this.group!==null&&r.setGroup(this.group),this.name!==null&&r.label(this.name),this.node=r.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let o=1;o<r.length;o++)i=i[r[o]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Nn=(n,e,r)=>nt(new kR(n,e,r)),dD=(n,e,r,i)=>nt(new kR(n,e,i,r));class jye extends kR{static get type(){return"MaterialReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.material=i,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const kl=(n,e,r)=>nt(new jye(n,e,r)),w5=lt(n=>(n.geometry.hasAttribute("tangent")===!1&&n.geometry.computeTangents(),sl("tangent","vec4")))(),VR=w5.xyz.toVar("tangentLocal"),C5=I_.mul(Yt(VR,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),Wye=n=>n.mul(w5.w).xyz,qye=fl(Wye(Os.cross(C5)),"v_bitangentView").normalize().toVar("bitangentView"),yp=Ii(C5,qye,Os),Xye=(()=>{let n=af.cross(ir);return n=n.cross(af).normalize(),n=jn(n,wr,Vc.mul(La.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})(),Kye=lt(n=>{const{eye_pos:e,surf_norm:r,mapN:i,uv:o}=n,s=e.dFdx(),a=e.dFdy(),l=o.dFdx(),c=o.dFdy(),u=r,d=a.cross(u),f=u.cross(s),h=d.mul(l.x).add(f.mul(c.x)),p=d.mul(l.y).add(f.mul(c.y)),g=h.dot(h).max(p.dot(p)),y=D_.mul(g.inverseSqrt());return Di(h.mul(i.x,y),p.mul(i.y,y),u.mul(i.z)).normalize()});class Yye extends Rr{static get type(){return"NormalMapNode"}constructor(e,r=null){super("vec3"),this.node=e,this.scaleNode=r,this.normalMapType=rl}setup(e){const{normalMapType:r,scaleNode:i}=this;let o=this.node.mul(2).sub(1);i!==null&&(o=Ie(o.xy.mul(i),o.z));let s=null;return r===Dk?s=b5(o):r===rl&&(e.hasGeometryAttribute("tangent")===!0?s=yp.mul(o).normalize():s=Kye({eye_pos:Fr,surf_norm:Os,mapN:o,uv:O_()})),s}}const fD=Be(Yye),Qye=lt(({textureNode:n,bumpScale:e})=>{const r=o=>n.cache().context({getUV:s=>o(s.uvNode||O_()),forceUVContext:!0}),i=Ae(r(o=>o));return pt(Ae(r(o=>o.add(o.dFdx()))).sub(i),Ae(r(o=>o.add(o.dFdy()))).sub(i)).mul(e)}),Zye=lt(n=>{const{surf_pos:e,surf_norm:r,dHdxy:i}=n,o=e.dFdx().normalize(),s=e.dFdy().normalize(),a=r,l=s.cross(a),c=a.cross(o),u=o.dot(l).mul(D_),d=u.sign().mul(i.x.mul(l).add(i.y.mul(c)));return u.abs().mul(r).sub(d).normalize()});class Jye extends Rr{static get type(){return"BumpMapNode"}constructor(e,r=null){super("vec3"),this.textureNode=e,this.scaleNode=r}setup(){const e=this.scaleNode!==null?this.scaleNode:1,r=Qye({textureNode:this.textureNode,bumpScale:e});return Zye({surf_pos:Fr,surf_norm:Os,dHdxy:r})}}const exe=Be(Jye),hD=new Map;class Te extends Qt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,r){let i=hD.get(e);return i===void 0&&(i=kl(e,r),hD.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const r=e.context.material,i=this.scope;let o=null;if(i===Te.COLOR){const s=r.color!==void 0?this.getColor(i):Ie();r.map&&r.map.isTexture===!0?o=s.mul(this.getTexture("map")):o=s}else if(i===Te.OPACITY){const s=this.getFloat(i);r.alphaMap&&r.alphaMap.isTexture===!0?o=s.mul(this.getTexture("alpha")):o=s}else if(i===Te.SPECULAR_STRENGTH)r.specularMap&&r.specularMap.isTexture===!0?o=this.getTexture("specular").r:o=Ae(1);else if(i===Te.SPECULAR_INTENSITY){const s=this.getFloat(i);r.specularMap?o=s.mul(this.getTexture(i).a):o=s}else if(i===Te.SPECULAR_COLOR){const s=this.getColor(i);r.specularColorMap&&r.specularColorMap.isTexture===!0?o=s.mul(this.getTexture(i).rgb):o=s}else if(i===Te.ROUGHNESS){const s=this.getFloat(i);r.roughnessMap&&r.roughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).g):o=s}else if(i===Te.METALNESS){const s=this.getFloat(i);r.metalnessMap&&r.metalnessMap.isTexture===!0?o=s.mul(this.getTexture(i).b):o=s}else if(i===Te.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(i).mul(s);r.emissiveMap&&r.emissiveMap.isTexture===!0?o=a.mul(this.getTexture(i)):o=a}else if(i===Te.NORMAL)r.normalMap?(o=fD(this.getTexture("normal"),this.getCache("normalScale","vec2")),o.normalMapType=r.normalMapType):r.bumpMap?o=exe(this.getTexture("bump").r,this.getFloat("bumpScale")):o=Os;else if(i===Te.CLEARCOAT){const s=this.getFloat(i);r.clearcoatMap&&r.clearcoatMap.isTexture===!0?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.CLEARCOAT_ROUGHNESS){const s=this.getFloat(i);r.clearcoatRoughnessMap&&r.clearcoatRoughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.CLEARCOAT_NORMAL)r.clearcoatNormalMap?o=fD(this.getTexture(i),this.getCache(i+"Scale","vec2")):o=Os;else if(i===Te.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));r.sheenColorMap&&r.sheenColorMap.isTexture===!0?o=s.mul(this.getTexture("sheenColor").rgb):o=s}else if(i===Te.SHEEN_ROUGHNESS){const s=this.getFloat(i);r.sheenRoughnessMap&&r.sheenRoughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).a):o=s,o=o.clamp(.07,1)}else if(i===Te.ANISOTROPY)if(r.anisotropyMap&&r.anisotropyMap.isTexture===!0){const s=this.getTexture(i);o=NR(Kh.x,Kh.y,Kh.y.negate(),Kh.x).mul(s.rg.mul(2).sub(pt(1)).normalize().mul(s.b))}else o=Kh;else if(i===Te.IRIDESCENCE_THICKNESS){const s=Nn("1","float",r.iridescenceThicknessRange);if(r.iridescenceThicknessMap){const a=Nn("0","float",r.iridescenceThicknessRange);o=s.sub(a).mul(this.getTexture(i).g).add(a)}else o=s}else if(i===Te.TRANSMISSION){const s=this.getFloat(i);r.transmissionMap?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.THICKNESS){const s=this.getFloat(i);r.thicknessMap?o=s.mul(this.getTexture(i).g):o=s}else if(i===Te.IOR)o=this.getFloat(i);else if(i===Te.LIGHT_MAP)o=this.getTexture(i).rgb.mul(this.getFloat("lightMapIntensity"));else if(i===Te.AO_MAP)o=this.getTexture(i).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);o=this.getCache(i,s)}return o}}Te.ALPHA_TEST="alphaTest";Te.COLOR="color";Te.OPACITY="opacity";Te.SHININESS="shininess";Te.SPECULAR="specular";Te.SPECULAR_STRENGTH="specularStrength";Te.SPECULAR_INTENSITY="specularIntensity";Te.SPECULAR_COLOR="specularColor";Te.REFLECTIVITY="reflectivity";Te.ROUGHNESS="roughness";Te.METALNESS="metalness";Te.NORMAL="normal";Te.CLEARCOAT="clearcoat";Te.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Te.CLEARCOAT_NORMAL="clearcoatNormal";Te.EMISSIVE="emissive";Te.ROTATION="rotation";Te.SHEEN="sheen";Te.SHEEN_ROUGHNESS="sheenRoughness";Te.ANISOTROPY="anisotropy";Te.IRIDESCENCE="iridescence";Te.IRIDESCENCE_IOR="iridescenceIOR";Te.IRIDESCENCE_THICKNESS="iridescenceThickness";Te.IOR="ior";Te.TRANSMISSION="transmission";Te.THICKNESS="thickness";Te.ATTENUATION_DISTANCE="attenuationDistance";Te.ATTENUATION_COLOR="attenuationColor";Te.LINE_SCALE="scale";Te.LINE_DASH_SIZE="dashSize";Te.LINE_GAP_SIZE="gapSize";Te.LINE_WIDTH="linewidth";Te.LINE_DASH_OFFSET="dashOffset";Te.POINT_WIDTH="pointWidth";Te.DISPERSION="dispersion";Te.LIGHT_MAP="light";Te.AO_MAP="ao";const txe=ct(Te,Te.ALPHA_TEST),nxe=ct(Te,Te.COLOR),rxe=ct(Te,Te.SHININESS),ixe=ct(Te,Te.EMISSIVE),E5=ct(Te,Te.OPACITY),oxe=ct(Te,Te.SPECULAR),pD=ct(Te,Te.SPECULAR_INTENSITY),sxe=ct(Te,Te.SPECULAR_COLOR),k0=ct(Te,Te.SPECULAR_STRENGTH),i1=ct(Te,Te.REFLECTIVITY),axe=ct(Te,Te.ROUGHNESS),lxe=ct(Te,Te.METALNESS),cxe=ct(Te,Te.NORMAL).context({getUV:null}),uxe=ct(Te,Te.CLEARCOAT),dxe=ct(Te,Te.CLEARCOAT_ROUGHNESS),fxe=ct(Te,Te.CLEARCOAT_NORMAL).context({getUV:null}),hxe=ct(Te,Te.ROTATION),pxe=ct(Te,Te.SHEEN),mxe=ct(Te,Te.SHEEN_ROUGHNESS),gxe=ct(Te,Te.ANISOTROPY),vxe=ct(Te,Te.IRIDESCENCE),yxe=ct(Te,Te.IRIDESCENCE_IOR),xxe=ct(Te,Te.IRIDESCENCE_THICKNESS),_xe=ct(Te,Te.TRANSMISSION),bxe=ct(Te,Te.THICKNESS),Sxe=ct(Te,Te.IOR),wxe=ct(Te,Te.ATTENUATION_DISTANCE),Cxe=ct(Te,Te.ATTENUATION_COLOR),Exe=ct(Te,Te.LINE_SCALE),Txe=ct(Te,Te.LINE_DASH_SIZE),Mxe=ct(Te,Te.LINE_GAP_SIZE);Te.LINE_WIDTH;const Rxe=ct(Te,Te.LINE_DASH_OFFSET);Te.POINT_WIDTH;const Axe=ct(Te,Te.DISPERSION),T5=ct(Te,Te.LIGHT_MAP),Nxe=ct(Te,Te.AO_MAP),Kh=Xt(new je).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});class Pxe extends Rr{static get type(){return"ModelViewProjectionNode"}constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return fl(e.context.mvp);const r=this.positionNode||oi,i=e.renderer.nodes.modelViewMatrix||I_;return ix.mul(i).mul(r)}}const M5=Be(Pxe);class Wn extends Qt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const r=this.getNodeType(e),i=this.scope;let o;if(i===Wn.VERTEX)o=e.getVertexIndex();else if(i===Wn.INSTANCE)o=e.getInstanceIndex();else if(i===Wn.DRAW)o=e.getDrawIndex();else if(i===Wn.INVOCATION_LOCAL)o=e.getInvocationLocalIndex();else if(i===Wn.INVOCATION_SUBGROUP)o=e.getInvocationSubgroupIndex();else if(i===Wn.SUBGROUP)o=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=o:s=fl(this).build(e,r),s}}Wn.VERTEX="vertex";Wn.INSTANCE="instance";Wn.SUBGROUP="subgroup";Wn.INVOCATION_LOCAL="invocationLocal";Wn.INVOCATION_SUBGROUP="invocationSubgroup";Wn.DRAW="draw";const Oxe=ct(Wn,Wn.VERTEX),GR=ct(Wn,Wn.INSTANCE);Wn.SUBGROUP;Wn.INVOCATION_SUBGROUP;Wn.INVOCATION_LOCAL;const Ixe=ct(Wn,Wn.DRAW);class Dxe extends Qt{static get type(){return"InstanceNode"}constructor(e,r,i){super("void"),this.count=e,this.instanceMatrix=r,this.instanceColor=i,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=on.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:r,instanceMatrix:i,instanceColor:o}=this;let{instanceMatrixNode:s,instanceColorNode:a}=this;if(s===null){if(r<=1e3)s=zR(i.array,"mat4",Math.max(r,1)).element(GR);else{const c=new Kue(i.array,16,1);this.buffer=c;const u=i.usage===Ud?cD:lD,d=[u(c,"vec4",16,0),u(c,"vec4",16,4),u(c,"vec4",16,8),u(c,"vec4",16,12)];s=sf(...d)}this.instanceMatrixNode=s}if(o&&a===null){const c=new sue(o.array,3),u=o.usage===Ud?cD:lD;this.bufferColor=c,a=Ie(u(c,"vec3",3,0)),this.instanceColorNode=a}const l=s.mul(oi).xyz;if(oi.assign(l),e.hasGeometryAttribute("normal")){const c=Lye(aa,s);aa.assign(c)}this.instanceColorNode!==null&&Jy("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==Ud&&this.buffer!=null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==Ud&&this.bufferColor!=null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}class Lxe extends Dxe{static get type(){return"InstancedMeshNode"}constructor(e){const{count:r,instanceMatrix:i,instanceColor:o}=e;super(r,i,o),this.instanceMesh=e}}const Fxe=Be(Lxe);class Uxe extends Qt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=GR:this.batchingIdNode=Ixe);const i=lt(([g])=>{const y=zp(us(this.batchMesh._indirectTexture),0),v=cr(g).modInt(cr(y)),m=cr(g).div(cr(y));return us(this.batchMesh._indirectTexture,Pa(v,m)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(cr(this.batchingIdNode)),o=this.batchMesh._matricesTexture,s=zp(us(o),0),a=Ae(i).mul(4).toInt().toVar(),l=a.modInt(s),c=a.div(cr(s)),u=sf(us(o,Pa(l,c)),us(o,Pa(l.add(1),c)),us(o,Pa(l.add(2),c)),us(o,Pa(l.add(3),c))),d=this.batchMesh._colorsTexture;if(d!==null){const y=lt(([v])=>{const m=zp(us(d),0).x,x=v,_=x.modInt(m),S=x.div(m);return us(d,Pa(_,S)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(i);Jy("vec3","vBatchColor").assign(y)}const f=Ii(u);oi.assign(u.mul(oi));const h=aa.div(Ie(f[0].dot(f[0]),f[1].dot(f[1]),f[2].dot(f[2]))),p=f.mul(h).xyz;aa.assign(p),e.hasGeometryAttribute("tangent")&&VR.mulAssign(f)}}const Bxe=Be(Uxe),mD=new WeakMap;class $xe extends Qt{static get type(){return"SkinningNode"}constructor(e,r=!1){super("void"),this.skinnedMesh=e,this.useReference=r,this.updateType=on.OBJECT,this.skinIndexNode=sl("skinIndex","uvec4"),this.skinWeightNode=sl("skinWeight","vec4");let i,o,s;r?(i=Nn("bindMatrix","mat4"),o=Nn("bindMatrixInverse","mat4"),s=dD("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(i=Xt(e.bindMatrix,"mat4"),o=Xt(e.bindMatrixInverse,"mat4"),s=zR(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=i,this.bindMatrixInverseNode=o,this.boneMatricesNode=s,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,r=oi){const{skinIndexNode:i,skinWeightNode:o,bindMatrixNode:s,bindMatrixInverseNode:a}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w),f=s.mul(r),h=Di(l.mul(o.x).mul(f),c.mul(o.y).mul(f),u.mul(o.z).mul(f),d.mul(o.w).mul(f));return a.mul(h).xyz}getSkinnedNormal(e=this.boneMatricesNode,r=aa){const{skinIndexNode:i,skinWeightNode:o,bindMatrixNode:s,bindMatrixInverseNode:a}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w);let f=Di(o.x.mul(l),o.y.mul(c),o.z.mul(u),o.w.mul(d));return f=a.mul(f).mul(s),f.transformDirection(r).xyz}getPreviousSkinnedPosition(e){const r=e.object;return this.previousBoneMatricesNode===null&&(r.skeleton.previousBoneMatrices=new Float32Array(r.skeleton.boneMatrices),this.previousBoneMatricesNode=dD("skeleton.previousBoneMatrices","mat4",r.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,uD)}needsPreviousBoneMatrices(e){const r=e.renderer.getMRT();return r&&r.has("velocity")}setup(e){this.needsPreviousBoneMatrices(e)&&uD.assign(this.getPreviousSkinnedPosition(e));const r=this.getSkinnedPosition();if(oi.assign(r),e.hasGeometryAttribute("normal")){const i=this.getSkinnedNormal();aa.assign(i),e.hasGeometryAttribute("tangent")&&VR.assign(i)}}generate(e,r){if(r!=="void")return oi.build(e,r)}update(e){const i=(this.useReference?e.object:this.skinnedMesh).skeleton;mD.get(i)!==e.frameId&&(mD.set(i,e.frameId),this.previousBoneMatricesNode!==null&&i.previousBoneMatrices.set(i.boneMatrices),i.update())}}const zxe=n=>nt(new $xe(n,!0));class kxe extends Qt{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const r=e.getNodeProperties(this);if(r.stackNode!==void 0)return r;const i={};for(let s=0,a=this.params.length-1;s<a;s++){const l=this.params[s],c=l.isNode!==!0&&l.name||this.getVarName(s),u=l.isNode!==!0&&l.type||"int";i[c]=Wm(c,u)}const o=e.addStack();return r.returnsNode=this.params[this.params.length-1](i,o,e),r.stackNode=o,e.removeStack(),r}getNodeType(e){const{returnsNode:r}=this.getProperties(e);return r?r.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const r=this.getProperties(e),i=this.params,o=r.stackNode;for(let l=0,c=i.length-1;l<c;l++){const u=i[l];let d=null,f=null,h=null,p=null,g=null,y=null;u.isNode?(p="int",h=this.getVarName(l),d="0",f=u.build(e,p),g="<"):(p=u.type||"int",h=u.name||this.getVarName(l),d=u.start,f=u.end,g=u.condition,y=u.update,typeof d=="number"?d=e.generateConst(p,d):d&&d.isNode&&(d=d.build(e,p)),typeof f=="number"?f=e.generateConst(p,f):f&&f.isNode&&(f=f.build(e,p)),d!==void 0&&f===void 0?(d=d+" - 1",f="0",g=">="):f!==void 0&&d===void 0&&(d="0",g="<"),g===void 0&&(Number(d)>Number(f)?g=">=":g="<"));const v={start:d,end:f},m=v.start,x=v.end;let _="",S="",w="";y||(p==="int"||p==="uint"?g.includes("<")?y="++":y="--":g.includes("<")?y="+= 1.":y="-= 1."),_+=e.getVar(p,h)+" = "+m,S+=h+" "+g+" "+x,w+=h+" "+y;const C=`for ( ${_}; ${S}; ${w} )`;e.addFlowCode((l===0?`
`:"")+e.tab+C+` {

`).addFlowTab()}const s=o.build(e,"void"),a=r.returnsNode?r.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const Ss=(...n)=>nt(new kxe(of(n,"int"))).append(),Vxe=()=>Wm("break").append(),o1=new WeakMap,ho=new qt,gD=lt(({bufferMap:n,influence:e,stride:r,width:i,depth:o,offset:s})=>{const a=cr(Oxe).mul(r).add(s),l=a.div(i),c=a.sub(l.mul(i));return us(n,Pa(c,l)).depth(o).mul(e)});function Gxe(n){const e=n.morphAttributes.position!==void 0,r=n.morphAttributes.normal!==void 0,i=n.morphAttributes.color!==void 0,o=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,s=o!==void 0?o.length:0;let a=o1.get(n);if(a===void 0||a.count!==s){let x=function(){v.dispose(),o1.delete(n),n.removeEventListener("dispose",x)};var l=x;a!==void 0&&a.texture.dispose();const c=n.morphAttributes.position||[],u=n.morphAttributes.normal||[],d=n.morphAttributes.color||[];let f=0;e===!0&&(f=1),r===!0&&(f=2),i===!0&&(f=3);let h=n.attributes.position.count*f,p=1;const g=4096;h>g&&(p=Math.ceil(h/g),h=g);const y=new Float32Array(h*p*4*s),v=new rR(y,h,p,s);v.type=pr,v.needsUpdate=!0;const m=f*4;for(let _=0;_<s;_++){const S=c[_],w=u[_],C=d[_],E=h*p*4*_;for(let T=0;T<S.count;T++){const M=T*m;e===!0&&(ho.fromBufferAttribute(S,T),y[E+M+0]=ho.x,y[E+M+1]=ho.y,y[E+M+2]=ho.z,y[E+M+3]=0),r===!0&&(ho.fromBufferAttribute(w,T),y[E+M+4]=ho.x,y[E+M+5]=ho.y,y[E+M+6]=ho.z,y[E+M+7]=0),i===!0&&(ho.fromBufferAttribute(C,T),y[E+M+8]=ho.x,y[E+M+9]=ho.y,y[E+M+10]=ho.z,y[E+M+11]=C.itemSize===4?ho.w:1)}}a={count:s,texture:v,stride:f,size:new je(h,p)},o1.set(n,a),n.addEventListener("dispose",x)}return a}class Hxe extends Qt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Xt(1),this.updateType=on.OBJECT}setup(e){const{geometry:r}=e,i=r.morphAttributes.position!==void 0,o=r.hasAttribute("normal")&&r.morphAttributes.normal!==void 0,s=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,a=s!==void 0?s.length:0,{texture:l,stride:c,size:u}=Gxe(r);i===!0&&oi.mulAssign(this.morphBaseInfluence),o===!0&&aa.mulAssign(this.morphBaseInfluence);const d=cr(u.width);Ss(a,({i:f})=>{const h=Ae(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?h.assign(us(this.mesh.morphTexture,Pa(cr(f).add(1),cr(GR))).r):h.assign(Nn("morphTargetInfluences","float").element(f).toVar()),i===!0&&oi.addAssign(gD({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:cr(0)})),o===!0&&aa.addAssign(gD({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:cr(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((r,i)=>r+i,0)}}const jxe=Be(Hxe);class gh extends Qt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}generate(){console.warn("Abstract function.")}}class Wxe extends gh{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class qxe extends u5{static get type(){return"LightingContextNode"}constructor(e,r=null,i=null,o=null){super(e),this.lightingModel=r,this.backdropNode=i,this.backdropAlphaNode=o,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:r}=this,i=Ie().toVar("directDiffuse"),o=Ie().toVar("directSpecular"),s=Ie().toVar("indirectDiffuse"),a=Ie().toVar("indirectSpecular"),l={directDiffuse:i,directSpecular:o,indirectDiffuse:s,indirectSpecular:a};return{radiance:Ie().toVar("radiance"),irradiance:Ie().toVar("irradiance"),iblIrradiance:Ie().toVar("iblIrradiance"),ambientOcclusion:Ae(1).toVar("ambientOcclusion"),reflectedLight:l,backdrop:e,backdropAlpha:r}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const Xxe=Be(qxe);class Kxe extends gh{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let Yh,Qh;class _r extends Qt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===_r.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=on.NONE;return(this.scope===_r.SIZE||this.scope===_r.VIEWPORT)&&(e=on.RENDER),this.updateType=e,e}update({renderer:e}){const r=e.getRenderTarget();this.scope===_r.VIEWPORT?r!==null?Qh.copy(r.viewport):(e.getViewport(Qh),Qh.multiplyScalar(e.getPixelRatio())):r!==null?(Yh.width=r.width,Yh.height=r.height):e.getDrawingBufferSize(Yh)}setup(){const e=this.scope;let r=null;return e===_r.SIZE?r=Xt(Yh||(Yh=new je)):e===_r.VIEWPORT?r=Xt(Qh||(Qh=new qt)):r=pt(L_.div(EE)),r}generate(e){if(this.scope===_r.COORDINATE){let r=e.getFragCoord();if(e.isFlipY()){const i=e.getNodeProperties(EE).outputNode.build(e);r=`${e.getType("vec2")}( ${r}.x, ${i}.y - ${r}.y )`}return r}return super.generate(e)}}_r.COORDINATE="coordinate";_r.VIEWPORT="viewport";_r.SIZE="size";_r.UV="uv";const Km=ct(_r,_r.UV),EE=ct(_r,_r.SIZE),L_=ct(_r,_r.COORDINATE),R5=ct(_r,_r.VIEWPORT);R5.zw;R5.xy;const Zh=new je;class A5 extends Rg{static get type(){return"ViewportTextureNode"}constructor(e=Km,r=null,i=null){i===null&&(i=new due,i.minFilter=Wi),super(i,e,r),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=on.FRAME}updateBefore(e){const r=e.renderer;r.getDrawingBufferSize(Zh);const i=this.value;(i.image.width!==Zh.width||i.image.height!==Zh.height)&&(i.image.width=Zh.width,i.image.height=Zh.height,i.needsUpdate=!0);const o=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,r.copyFramebufferToTexture(i),i.generateMipmaps=o}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const N5=Be(A5,null,null,{generateMipmaps:!0});let s1=null;class Yxe extends A5{static get type(){return"ViewportDepthTextureNode"}constructor(e=Km,r=null){s1===null&&(s1=new wc),super(e,r,s1)}}const Qxe=Be(Yxe);class Ki extends Qt{static get type(){return"ViewportDepthNode"}constructor(e,r=null){super("float"),this.scope=e,this.valueNode=r,this.isViewportDepthNode=!0}generate(e){const{scope:r}=this;return r===Ki.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:r}=this,i=this.valueNode;let o=null;if(r===Ki.DEPTH_BASE)i!==null&&(o=I5().assign(i));else if(r===Ki.DEPTH)e.isPerspectiveCamera?o=Zxe(Fr.z,Kc,Yc):o=kp(Fr.z,Kc,Yc);else if(r===Ki.LINEAR_DEPTH)if(i!==null)if(e.isPerspectiveCamera){const s=P5(i,Kc,Yc);o=kp(s,Kc,Yc)}else o=i;else o=kp(Fr.z,Kc,Yc);return o}}Ki.DEPTH_BASE="depthBase";Ki.DEPTH="depth";Ki.LINEAR_DEPTH="linearDepth";const kp=(n,e,r)=>n.add(e).div(e.sub(r)),Zxe=(n,e,r)=>e.add(n).mul(r).div(r.sub(e).mul(n)),P5=(n,e,r)=>e.mul(r).div(r.sub(e).mul(n).sub(r)),O5=(n,e,r)=>{e=e.max(1e-6).toVar();const i=Xa(n.negate().div(e)),o=Xa(r.div(e));return i.div(o)},I5=Be(Ki,Ki.DEPTH_BASE),D5=ct(Ki,Ki.DEPTH),Jxe=Be(Ki,Ki.LINEAR_DEPTH);Qxe();D5.assign=n=>I5(n);class e_e extends Qt{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const t_e=Be(e_e);class Ko extends Qt{static get type(){return"ClippingNode"}constructor(e=Ko.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const r=e.clippingContext,{intersectionPlanes:i,unionPlanes:o}=r;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Ko.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(i,o):this.scope===Ko.HARDWARE?this.setupHardwareClipping(o,e):this.setupDefault(i,o)}setupAlphaToCoverage(e,r){return lt(()=>{const i=Ae().toVar("distanceToPlane"),o=Ae().toVar("distanceToGradient"),s=Ae(1).toVar("clipOpacity"),a=r.length;if(!this.hardwareClipping&&a>0){const c=zl(r);Ss(a,({i:u})=>{const d=c.element(u);i.assign(Fr.dot(d.xyz).negate().add(d.w)),o.assign(i.fwidth().div(2)),s.mulAssign(Au(o.negate(),o,i))})}const l=e.length;if(l>0){const c=zl(e),u=Ae(1).toVar("intersectionClipOpacity");Ss(l,({i:d})=>{const f=c.element(d);i.assign(Fr.dot(f.xyz).negate().add(f.w)),o.assign(i.fwidth().div(2)),u.mulAssign(Au(o.negate(),o,i).oneMinus())}),s.mulAssign(u.oneMinus())}Sn.a.mulAssign(s),Sn.a.equal(0).discard()})()}setupDefault(e,r){return lt(()=>{const i=r.length;if(!this.hardwareClipping&&i>0){const s=zl(r);Ss(i,({i:a})=>{const l=s.element(a);Fr.dot(l.xyz).greaterThan(l.w).discard()})}const o=e.length;if(o>0){const s=zl(e),a=G4(!0).toVar("clipped");Ss(o,({i:l})=>{const c=s.element(l);a.assign(Fr.dot(c.xyz).greaterThan(c.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,r){const i=e.length;return r.enableHardwareClipping(i),lt(()=>{const o=zl(e),s=t_e(r.getClipDistance());Ss(i,({i:a})=>{const l=o.element(a),c=Fr.dot(l.xyz).sub(l.w).negate();s.element(a).assign(c)})})()}}Ko.ALPHA_TO_COVERAGE="alphaToCoverage";Ko.DEFAULT="default";Ko.HARDWARE="hardware";const n_e=()=>nt(new Ko),r_e=()=>nt(new Ko(Ko.ALPHA_TO_COVERAGE)),i_e=()=>nt(new Ko(Ko.HARDWARE)),o_e=.05,vD=lt(([n])=>Ec(sn(1e4,ys(sn(17,n.x).add(sn(.1,n.y)))).mul(Di(.1,Vo(ys(sn(13,n.y).add(n.x))))))),yD=lt(([n])=>vD(pt(vD(n.xy),n.z))),s_e=lt(([n])=>{const e=ro(sc(r5(n.xyz)),sc(i5(n.xyz))),r=Ae(1).div(Ae(o_e).mul(e)).toVar("pixScale"),i=pt(Gm(pu(Xa(r))),Gm(DR(Xa(r)))),o=pt(yD(pu(i.x.mul(n.xyz))),yD(pu(i.y.mul(n.xyz)))),s=Ec(Xa(r)),a=Di(sn(s.oneMinus(),o.x),sn(s,o.y)),l=jm(s,s.oneMinus()),c=Ie(a.mul(a).div(sn(2,l).mul(Gi(1,l))),a.sub(sn(.5,l)).div(Gi(1,l)),Gi(1,Gi(1,a).mul(Gi(1,a)).div(sn(2,l).mul(Gi(1,l))))),u=a.lessThan(l.oneMinus()).select(a.lessThan(l).select(c.x,c.y),c.z);return ol(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class Mr extends yi{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.forceSinglePass=!1,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.shadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+F4(this)}build(e){this.setup(e)}setupObserver(e){return new uve(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e);const r=e.renderer,i=r.getRenderTarget();e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let o;const s=this.setupClipping(e);if(this.depthWrite===!0&&(i!==null?i.depthBuffer===!0&&this.setupDepth(e):r.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const a=this.setupLighting(e);s!==null&&e.stack.add(s);const l=Yt(a,Sn.a).max(0);if(o=this.setupOutput(e,l),Yve.assign(o),this.outputNode!==null&&(o=this.outputNode),i!==null){const c=r.getMRT(),u=this.mrtNode;c!==null?(o=c,u!==null&&(o=c.merge(u))):u!==null&&(o=u)}}else{let a=this.fragmentNode;a.isOutputStructNode!==!0&&(a=Yt(a)),o=this.setupOutput(e,a)}e.stack.outputNode=o,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:r,intersectionPlanes:i}=e.clippingContext;let o=null;if(r.length>0||i.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?o=r_e():e.stack.add(n_e())}return o}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const r=e.clippingContext.unionPlanes.length;r>0&&r<=8&&e.isAvailable("clipDistance")&&(e.stack.add(i_e()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:r,camera:i}=e;let o=this.depthNode;if(o===null){const s=r.getMRT();s&&s.has("depth")?o=s.get("depth"):r.logarithmicDepthBuffer===!0&&(i.isPerspectiveCamera?o=O5(Fr.z,Kc,Yc):o=kp(Fr.z,Kc,Yc))}o!==null&&D5.assign(o).append()}setupPosition(e){const{object:r}=e,i=r.geometry;if(e.addStack(),(i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&jxe(r).append(),r.isSkinnedMesh===!0&&zxe(r).append(),this.displacementMap){const s=kl("displacementMap","texture"),a=kl("displacementScale","float"),l=kl("displacementBias","float");oi.addAssign(aa.normalize().mul(s.x.mul(a).add(l)))}r.isBatchedMesh&&Bxe(r).append(),r.isInstancedMesh&&r.instanceMatrix&&r.instanceMatrix.isInstancedBufferAttribute===!0&&Fxe(r).append(),this.positionNode!==null&&oi.assign(this.positionNode),this.setupHardwareClipping(e);const o=M5();return e.context.vertex=e.removeStack(),e.context.mvp=o,o}setupDiffuseColor({object:e,geometry:r}){let i=this.colorNode?Yt(this.colorNode):nxe;this.vertexColors===!0&&r.hasAttribute("color")&&(i=Yt(i.xyz.mul(sl("color","vec3")),i.a)),e.instanceColor&&(i=Jy("vec3","vInstanceColor").mul(i)),e.isBatchedMesh&&e._colorsTexture&&(i=Jy("vec3","vBatchColor").mul(i)),Sn.assign(i);const o=this.opacityNode?Ae(this.opacityNode):E5;if(Sn.a.assign(Sn.a.mul(o)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?Ae(this.alphaTestNode):txe;Sn.a.lessThanEqual(s).discard()}this.alphaHash===!0&&Sn.a.lessThan(s_e(oi)).discard(),this.transparent===!1&&this.blending===qo&&this.alphaToCoverage===!1&&Sn.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Ie(0):Sn.rgb}setupNormal(){return this.normalNode?Ie(this.normalNode):cxe}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?kl("envMap","cubeTexture"):kl("envMap","texture")),e}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new Kxe(T5)),r}setupLights(e){const r=[],i=this.setupEnvironment(e);i&&i.isLightingNode&&r.push(i);const o=this.setupLightMap(e);if(o&&o.isLightingNode&&r.push(o),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:Nxe;r.push(new Wxe(a))}let s=this.lightsNode||e.lightsNode;return r.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...r])),s}setupLightingModel(){}setupLighting(e){const{material:r}=e,{backdropNode:i,backdropAlphaNode:o,emissiveNode:s}=this,l=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let c=this.setupOutgoingLight(e);if(l&&l.getScope().hasLights){const u=this.setupLightingModel(e);c=Xxe(l,u,i,o)}else i!==null&&(c=Ie(o!==null?jn(c,i,o):i));return(s&&s.isNode===!0||r.emissive&&r.emissive.isColor===!0)&&(sD.assign(Ie(s||ixe)),c=c.add(sD)),c}setupOutput(e,r){if(this.fog===!0){const i=e.fogNode;i&&(r=Yt(i.mix(r.rgb,i.colorNode),r.a))}return r}setDefaultValues(e){for(const i in e){const o=e[i];this[i]===void 0&&(this[i]=o,o&&o.clone&&(this[i]=o.clone()))}const r=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in r)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&r[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,r[i])}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});const i=yi.prototype.toJSON.call(this,e),o=Yy(this);i.inputNodes={};for(const{property:a,childNode:l}of o)i.inputNodes[a]=l.toJSON(e).uuid;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(r){const a=s(e.textures),l=s(e.images),c=s(e.nodes);a.length>0&&(i.textures=a),l.length>0&&(i.images=l),c.length>0&&(i.nodes=c)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowPositionNode=e.shadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const a_e=new S_;class l_e extends Mr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(a_e),this.setValues(e)}}const c_e=new Lue;class u_e extends Mr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.setDefaultValues(c_e),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?Ae(this.offsetNodeNode):Rxe,r=this.dashScaleNode?Ae(this.dashScaleNode):Exe,i=this.dashSizeNode?Ae(this.dashSizeNode):Txe,o=this.dashSizeNode?Ae(this.dashGapNode):Mxe;r1.assign(i),aD.assign(o);const s=fl(sl("lineDistance").mul(r));(e?s.add(e):s).mod(r1.add(aD)).greaterThan(r1).discard()}}const d_e=n=>nt(n).mul(.5).add(.5),f_e=new Pue;class h_e extends Mr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(f_e),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?Ae(this.opacityNode):E5;Sn.assign(Yt(d_e(wr),e))}}class p_e extends Rr{static get type(){return"EquirectUVNode"}constructor(e=y5){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,r=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return pt(r,i)}}const L5=Be(p_e);class F5 extends Gk{constructor(e=1,r={}){super(e,r),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,r){const i=r.minFilter,o=r.generateMipmaps;r.generateMipmaps=!0,this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s=new $u(5,5,5),a=L5(y5),l=new Mr;l.colorNode=gn(r,a,0),l.side=er,l.blending=Pi;const c=new $r(s,l),u=new aR;u.add(c),r.minFilter===Wi&&(r.minFilter=Br);const d=new Vk(1,10,this),f=e.getMRT();return e.setMRT(null),d.update(e,u),e.setMRT(f),r.minFilter=i,r.currentGenerateMipmaps=o,c.geometry.dispose(),c.material.dispose(),this}}const Vp=new WeakMap;class m_e extends Rr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Xm();const r=new __;r.isRenderTargetTexture=!0,this._defaultTexture=r,this.updateBeforeType=on.RENDER}updateBefore(e){const{renderer:r,material:i}=e,o=this.envNode;if(o.isTextureNode||o.isMaterialReferenceNode){const s=o.isTextureNode?o.value:i[o.property];if(s&&s.isTexture){const a=s.mapping;if(a===fc||a===hc){if(Vp.has(s)){const l=Vp.get(s);xD(l,s.mapping),this._cubeTexture=l}else{const l=s.image;if(g_e(l)){const c=new F5(l.height);c.fromEquirectangularTexture(r,s),xD(c.texture,s.mapping),this._cubeTexture=c.texture,Vp.set(s,c.texture),s.addEventListener("dispose",U5)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function g_e(n){return n==null?!1:n.height>0}function U5(n){const e=n.target;e.removeEventListener("dispose",U5);const r=Vp.get(e);r!==void 0&&(Vp.delete(e),r.dispose())}function xD(n,e){e===fc?n.mapping=Jo:e===hc&&(n.mapping=es)}const B5=Be(m_e);class HR extends gh{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=B5(this.envNode)}}class v_e extends gh{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const r=Ae(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(r)}}class F_{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class $5 extends F_{constructor(){super()}indirect(e,r,i){const o=e.ambientOcclusion,s=e.reflectedLight,a=i.context.irradianceLightMap;s.indirectDiffuse.assign(Yt(0)),a?s.indirectDiffuse.addAssign(a):s.indirectDiffuse.addAssign(Yt(1,1,1,0)),s.indirectDiffuse.mulAssign(o),s.indirectDiffuse.mulAssign(Sn.rgb)}finish(e,r,i){const o=i.material,s=e.outgoingLight,a=i.context.environment;if(a)switch(o.combine){case _g:s.rgb.assign(jn(s.rgb,s.rgb.mul(a.rgb),k0.mul(i1)));break;case Tk:s.rgb.assign(jn(s.rgb,a.rgb,k0.mul(i1)));break;case Mk:s.rgb.addAssign(a.rgb.mul(k0.mul(i1)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",o.combine);break}}}const y_e=new dh;class x_e extends Mr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(y_e),this.setValues(e)}setupNormal(){return Os}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new HR(r):null}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new v_e(T5)),r}setupOutgoingLight(){return Sn.rgb}setupLightingModel(){return new $5}}const Ym=lt(({f0:n,f90:e,dotVH:r})=>{const i=r.mul(-5.55473).sub(6.98316).mul(r).exp2();return n.mul(i.oneMinus()).add(e.mul(i))}),Xf=lt(n=>n.diffuseColor.mul(1/Math.PI)),__e=()=>Ae(.25),b_e=lt(({dotNH:n})=>wE.mul(Ae(.5)).add(1).mul(Ae(1/Math.PI)).mul(n.pow(wE))),S_e=lt(({lightDirection:n})=>{const e=n.add(ir).normalize(),r=wr.dot(e).clamp(),i=ir.dot(e).clamp(),o=Ym({f0:go,f90:1,dotVH:i}),s=__e(),a=b_e({dotNH:r});return o.mul(s).mul(a)});class z5 extends $5{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const s=wr.dot(e).clamp().mul(r);i.directDiffuse.addAssign(s.mul(Xf({diffuseColor:Sn.rgb}))),this.specular===!0&&i.directSpecular.addAssign(s.mul(S_e({lightDirection:e})).mul(k0))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(Xf({diffuseColor:Sn}))),i.indirectDiffuse.mulAssign(e)}}const w_e=new hR;class C_e extends Mr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(w_e),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new HR(r):null}setupLightingModel(){return new z5(!1)}}const E_e=new Aue;class T_e extends Mr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(E_e),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new HR(r):null}setupLightingModel(){return new z5}setupVariants(){const e=(this.shininessNode?Ae(this.shininessNode):rxe).max(1e-4);wE.assign(e);const r=this.specularNode||oxe;go.assign(r)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const M_e=lt(n=>{if(n.geometry.hasAttribute("normal")===!1)return Ae(0);const e=Os.dFdx().abs().max(Os.dFdy().abs());return e.x.max(e.y).max(e.z)}),k5=lt(n=>{const{roughness:e}=n,r=M_e();let i=e.max(.0525);return i=i.add(r),i=i.min(1),i}),R_e=lt(({alpha:n,dotNL:e,dotNV:r})=>{const i=n.pow2(),o=e.mul(i.add(i.oneMinus().mul(r.pow2())).sqrt()),s=r.mul(i.add(i.oneMinus().mul(e.pow2())).sqrt());return il(.5,o.add(s).max(y0e))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),A_e=lt(({alphaT:n,alphaB:e,dotTV:r,dotBV:i,dotTL:o,dotBL:s,dotNV:a,dotNL:l})=>{const c=l.mul(Ie(n.mul(r),e.mul(i),a).length()),u=a.mul(Ie(n.mul(o),e.mul(s),l).length());return il(.5,c.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),N_e=lt(({alpha:n,dotNH:e})=>{const r=n.pow2(),i=e.pow2().mul(r.oneMinus()).oneMinus();return r.div(i.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),P_e=Ae(1/Math.PI),O_e=lt(({alphaT:n,alphaB:e,dotNH:r,dotTH:i,dotBH:o})=>{const s=n.mul(e),a=Ie(e.mul(i),n.mul(o),s.mul(r)),l=a.dot(a),c=s.div(l);return P_e.mul(s.mul(c.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),_D=lt(n=>{const{lightDirection:e,f0:r,f90:i,roughness:o,f:s,USE_IRIDESCENCE:a,USE_ANISOTROPY:l}=n,c=n.normalView||wr,u=o.pow2(),d=e.add(ir).normalize(),f=c.dot(e).clamp(),h=c.dot(ir).clamp(),p=c.dot(d).clamp(),g=ir.dot(d).clamp();let y=Ym({f0:r,f90:i,dotVH:g}),v,m;if(oD(a)&&(y=OR.mix(y,s)),oD(l)){const x=B0.dot(e),_=B0.dot(ir),S=B0.dot(d),w=af.dot(e),C=af.dot(ir),E=af.dot(d);v=A_e({alphaT:SE,alphaB:u,dotTV:_,dotBV:C,dotTL:x,dotBL:w,dotNV:h,dotNL:f}),m=O_e({alphaT:SE,alphaB:u,dotNH:p,dotTH:S,dotBH:E})}else v=R_e({alpha:u,dotNL:f,dotNV:h}),m=N_e({alpha:u,dotNH:p});return y.mul(v).mul(m)}),V5=lt(({roughness:n,dotNV:e})=>{const r=Yt(-1,-.0275,-.572,.022),i=Yt(1,.0425,1.04,-.04),o=n.mul(r).add(i),s=o.x.mul(o.x).min(e.mul(-9.28).exp2()).mul(o.x).add(o.y);return pt(-1.04,1.04).mul(s).add(o.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),G5=lt(n=>{const{dotNV:e,specularColor:r,specularF90:i,roughness:o}=n,s=V5({dotNV:e,roughness:o});return r.mul(s.x).add(i.mul(s.y))}),I_e=lt(({f:n,f90:e,dotVH:r})=>{const i=r.oneMinus().saturate(),o=i.mul(i),s=i.mul(o,o).clamp(0,.9999);return n.sub(Ie(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),D_e=lt(({roughness:n,dotNH:e})=>{const r=n.pow2(),i=Ae(1).div(r),s=e.pow2().oneMinus().max(.0078125);return Ae(2).add(i).mul(s.pow(i.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),L_e=lt(({dotNV:n,dotNL:e})=>Ae(1).div(Ae(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),F_e=lt(({lightDirection:n})=>{const e=n.add(ir).normalize(),r=wr.dot(n).clamp(),i=wr.dot(ir).clamp(),o=wr.dot(e).clamp(),s=D_e({roughness:PR,dotNH:o}),a=L_e({dotNV:i,dotNL:r});return kd.mul(s).mul(a)}),U_e=lt(({N:n,V:e,roughness:r})=>{const s=.0078125,a=n.dot(e).saturate(),l=pt(r,a.oneMinus().sqrt());return l.assign(l.mul(.984375).add(s)),l}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),B_e=lt(({f:n})=>{const e=n.length();return ro(e.mul(e).add(n.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),Gv=lt(({v1:n,v2:e})=>{const r=n.dot(e),i=r.abs().toVar(),o=i.mul(.0145206).add(.4965155).mul(i).add(.8543985).toVar(),s=i.add(4.1616724).mul(i).add(3.417594).toVar(),a=o.div(s),l=r.greaterThan(0).select(a,ro(r.mul(r).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return n.cross(e).mul(l)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),bD=lt(({N:n,V:e,P:r,mInv:i,p0:o,p1:s,p2:a,p3:l})=>{const c=s.sub(o).toVar(),u=l.sub(o).toVar(),d=c.cross(u),f=Ie().toVar();return Tr(d.dot(r.sub(o)).greaterThanEqual(0),()=>{const h=e.sub(n.mul(e.dot(n))).normalize(),p=n.cross(h).negate(),g=i.mul(Ii(h,p,n).transpose()).toVar(),y=g.mul(o.sub(r)).normalize().toVar(),v=g.mul(s.sub(r)).normalize().toVar(),m=g.mul(a.sub(r)).normalize().toVar(),x=g.mul(l.sub(r)).normalize().toVar(),_=Ie(0).toVar();_.addAssign(Gv({v1:y,v2:v})),_.addAssign(Gv({v1:v,v2:m})),_.addAssign(Gv({v1:m,v2:x})),_.addAssign(Gv({v1:x,v2:y})),f.assign(Ie(B_e({f:_})))}),f}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),U_=1/6,H5=n=>sn(U_,sn(n,sn(n,n.negate().add(3)).sub(3)).add(1)),TE=n=>sn(U_,sn(n,sn(n,sn(3,n).sub(6))).add(4)),j5=n=>sn(U_,sn(n,sn(n,sn(-3,n).add(3)).add(3)).add(1)),ME=n=>sn(U_,N_(n,3)),SD=n=>H5(n).add(TE(n)),wD=n=>j5(n).add(ME(n)),CD=n=>Di(-1,TE(n).div(H5(n).add(TE(n)))),ED=n=>Di(1,ME(n).div(j5(n).add(ME(n)))),TD=(n,e,r)=>{const i=n.uvNode,o=sn(i,e.zw).add(.5),s=pu(o),a=Ec(o),l=SD(a.x),c=wD(a.x),u=CD(a.x),d=ED(a.x),f=CD(a.y),h=ED(a.y),p=pt(s.x.add(u),s.y.add(f)).sub(.5).mul(e.xy),g=pt(s.x.add(d),s.y.add(f)).sub(.5).mul(e.xy),y=pt(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),v=pt(s.x.add(d),s.y.add(h)).sub(.5).mul(e.xy),m=SD(a.y).mul(Di(l.mul(n.uv(p).level(r)),c.mul(n.uv(g).level(r)))),x=wD(a.y).mul(Di(l.mul(n.uv(y).level(r)),c.mul(n.uv(v).level(r))));return m.add(x)},$_e=lt(([n,e=Ae(3)])=>{const r=pt(n.size(cr(e))),i=pt(n.size(cr(e.add(1)))),o=il(1,r),s=il(1,i),a=TD(n,Yt(o,r),pu(e)),l=TD(n,Yt(s,i),DR(e));return Ec(e).mix(a,l)}),MD=lt(([n,e,r,i,o])=>{const s=Ie(c5(e.negate(),Hm(n),il(1,i))),a=Ie(sc(o[0].xyz),sc(o[1].xyz),sc(o[2].xyz));return Hm(s).mul(r.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),z_e=lt(([n,e])=>n.mul(ol(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),k_e=N5(),V_e=N5(),RD=lt(([n,e,r],{material:i})=>{const s=(i.side==er?k_e:V_e).uv(n),a=Xa(EE.x).mul(z_e(e,r));return $_e(s,a)}),AD=lt(([n,e,r])=>(Tr(r.notEqual(0),()=>{const i=n5(e).negate().div(r);return t5(i.negate().mul(n))}),Ie(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),G_e=lt(([n,e,r,i,o,s,a,l,c,u,d,f,h,p,g])=>{let y,v;if(g){y=Yt().toVar(),v=Ie().toVar();const w=d.sub(1).mul(g.mul(.025)),C=Ie(d.sub(w),d,d.add(w));Ss({start:0,end:3},({i:E})=>{const T=C.element(E),M=MD(n,e,f,T,l),R=a.add(M),N=u.mul(c.mul(Yt(R,1))),D=pt(N.xy.div(N.w)).toVar();D.addAssign(1),D.divAssign(2),D.assign(pt(D.x,D.y.oneMinus()));const L=RD(D,r,T);y.element(E).assign(L.element(E)),y.a.addAssign(L.a),v.element(E).assign(i.element(E).mul(AD(sc(M),h,p).element(E)))}),y.a.divAssign(3)}else{const w=MD(n,e,f,d,l),C=a.add(w),E=u.mul(c.mul(Yt(C,1))),T=pt(E.xy.div(E.w)).toVar();T.addAssign(1),T.divAssign(2),T.assign(pt(T.x,T.y.oneMinus())),y=RD(T,r,d),v=i.mul(AD(sc(w),h,p))}const m=v.rgb.mul(y.rgb),x=n.dot(e).clamp(),_=Ie(G5({dotNV:x,specularColor:o,specularF90:s,roughness:r})),S=v.r.add(v.g,v.b).div(3);return Yt(_.oneMinus().mul(m),y.a.oneMinus().mul(S).oneMinus())}),H_e=Ii(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),j_e=n=>{const e=n.sqrt();return Ie(1).add(e).div(Ie(1).sub(e))},ND=(n,e)=>n.sub(e).div(n.add(e)).pow2(),W_e=(n,e)=>{const r=n.mul(2*Math.PI*1e-9),i=Ie(54856e-17,44201e-17,52481e-17),o=Ie(1681e3,1795300,2208400),s=Ie(43278e5,93046e5,66121e5),a=Ae(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(r.mul(2239900).add(e.x).cos()).mul(r.pow2().mul(-45282e5).exp());let l=i.mul(s.mul(2*Math.PI).sqrt()).mul(o.mul(r).add(e).cos()).mul(r.pow2().negate().mul(s).exp());return l=Ie(l.x.add(a),l.y,l.z).div(10685e-11),H_e.mul(l)},q_e=lt(({outsideIOR:n,eta2:e,cosTheta1:r,thinFilmThickness:i,baseF0:o})=>{const s=jn(n,e,Au(0,.03,i)),l=n.div(s).pow2().mul(r.pow2().oneMinus()).oneMinus();Tr(l.lessThan(0),()=>Ie(1));const c=l.sqrt(),u=ND(s,n),d=Ym({f0:u,f90:1,dotVH:r}),f=d.oneMinus(),h=s.lessThan(n).select(Math.PI,0),p=Ae(Math.PI).sub(h),g=j_e(o.clamp(0,.9999)),y=ND(g,s.toVec3()),v=Ym({f0:y,f90:1,dotVH:c}),m=Ie(g.x.lessThan(s).select(Math.PI,0),g.y.lessThan(s).select(Math.PI,0),g.z.lessThan(s).select(Math.PI,0)),x=s.mul(i,c,2),_=Ie(p).add(m),S=d.mul(v).clamp(1e-5,.9999),w=S.sqrt(),C=f.pow2().mul(v).div(Ie(1).sub(S)),T=d.add(C).toVar(),M=C.sub(f).toVar();return Ss({start:1,end:2,condition:"<=",name:"m"},({m:R})=>{M.mulAssign(w);const N=W_e(Ae(R).mul(x),Ae(R).mul(_)).mul(2);T.addAssign(M.mul(N))}),T.max(Ie(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),X_e=lt(({normal:n,viewDir:e,roughness:r})=>{const i=n.dot(e).saturate(),o=r.pow2(),s=Xi(r.lessThan(.25),Ae(-339.2).mul(o).add(Ae(161.4).mul(r)).sub(25.9),Ae(-8.48).mul(o).add(Ae(14.3).mul(r)).sub(9.95)),a=Xi(r.lessThan(.25),Ae(44).mul(o).sub(Ae(23.7).mul(r)).add(3.26),Ae(1.97).mul(o).sub(Ae(3.27).mul(r)).add(.72));return Xi(r.lessThan(.25),0,Ae(.1).mul(r).sub(.025)).add(s.mul(i).add(a).exp()).mul(1/Math.PI).saturate()}),a1=Ie(.04),l1=Ae(1);class W5 extends F_{constructor(e=!1,r=!1,i=!1,o=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=r,this.iridescence=i,this.anisotropy=o,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Ie().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Ie().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Ie().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Ie().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Ie().toVar("sheenSpecularIndirect")),this.iridescence===!0){const r=wr.dot(ir).clamp();this.iridescenceFresnel=q_e({outsideIOR:Ae(1),eta2:q4,cosTheta1:r,thinFilmThickness:X4,baseF0:go}),this.iridescenceF0=I_e({f:this.iridescenceFresnel,f90:1,dotVH:r})}if(this.transmission===!0){const r=qm,i=Aye.sub(qm).normalize(),o=$R;e.backdrop=G_e(o,i,La,Sn,go,nx,r,Nu,hl,ix,$0,K4,Q4,Y4,this.dispersion?Z4:null),e.backdropAlpha=CE,Sn.a.mulAssign(jn(1,e.backdrop.a,CE))}}computeMultiscattering(e,r,i){const o=wr.dot(ir).clamp(),s=V5({roughness:La,dotNV:o}),l=(this.iridescenceF0?OR.mix(go,this.iridescenceF0):go).mul(s.x).add(i.mul(s.y)),u=s.x.add(s.y).oneMinus(),d=go.add(go.oneMinus().mul(.047619)),f=l.mul(d).div(u.mul(d).oneMinus());e.addAssign(l),r.addAssign(f.mul(u))}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const s=wr.dot(e).clamp().mul(r);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(F_e({lightDirection:e}))),this.clearcoat===!0){const l=vp.dot(e).clamp().mul(r);this.clearcoatSpecularDirect.addAssign(l.mul(_D({lightDirection:e,f0:a1,f90:l1,roughness:tx,normalView:vp})))}i.directDiffuse.addAssign(s.mul(Xf({diffuseColor:Sn.rgb}))),i.directSpecular.addAssign(s.mul(_D({lightDirection:e,f0:go,f90:1,roughness:La,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:r,halfWidth:i,halfHeight:o,reflectedLight:s,ltc_1:a,ltc_2:l}){const c=r.add(i).sub(o),u=r.sub(i).sub(o),d=r.sub(i).add(o),f=r.add(i).add(o),h=wr,p=ir,g=Fr.toVar(),y=U_e({N:h,V:p,roughness:La}),v=a.uv(y).toVar(),m=l.uv(y).toVar(),x=Ii(Ie(v.x,0,v.y),Ie(0,1,0),Ie(v.z,0,v.w)).toVar(),_=go.mul(m.x).add(go.oneMinus().mul(m.y)).toVar();s.directSpecular.addAssign(e.mul(_).mul(bD({N:h,V:p,P:g,mInv:x,p0:c,p1:u,p2:d,p3:f}))),s.directDiffuse.addAssign(e.mul(Sn).mul(bD({N:h,V:p,P:g,mInv:Ii(1,0,0,0,1,0,0,0,1),p0:c,p1:u,p2:d,p3:f})))}indirect(e,r,i){this.indirectDiffuse(e,r,i),this.indirectSpecular(e,r,i),this.ambientOcclusion(e,r,i)}indirectDiffuse({irradiance:e,reflectedLight:r}){r.indirectDiffuse.addAssign(e.mul(Xf({diffuseColor:Sn})))}indirectSpecular({radiance:e,iblIrradiance:r,reflectedLight:i}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(r.mul(kd,X_e({normal:wr,viewDir:ir,roughness:PR}))),this.clearcoat===!0){const u=vp.dot(ir).clamp(),d=G5({dotNV:u,specularColor:a1,specularF90:l1,roughness:tx});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(d))}const o=Ie().toVar("singleScattering"),s=Ie().toVar("multiScattering"),a=r.mul(1/Math.PI);this.computeMultiscattering(o,s,nx);const l=o.add(s),c=Sn.mul(l.r.max(l.g).max(l.b).oneMinus());i.indirectSpecular.addAssign(e.mul(o)),i.indirectSpecular.addAssign(s.mul(a)),i.indirectDiffuse.addAssign(c.mul(a))}ambientOcclusion({ambientOcclusion:e,reflectedLight:r}){const o=wr.dot(ir).clamp().add(e),s=La.mul(-16).oneMinus().negate().exp2(),a=e.sub(o.pow(s).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),r.indirectDiffuse.mulAssign(e),r.indirectSpecular.mulAssign(a)}finish(e){const{outgoingLight:r}=e;if(this.clearcoat===!0){const i=vp.dot(ir).clamp(),o=Ym({dotVH:i,f0:a1,f90:l1}),s=r.mul(bE.mul(o).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(bE));r.assign(s)}if(this.sheen===!0){const i=kd.r.max(kd.g).max(kd.b).mul(.157).oneMinus(),o=r.mul(i).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);r.assign(o)}}}const PD=Ae(1),RE=Ae(-2),Hv=Ae(.8),c1=Ae(-1),jv=Ae(.4),u1=Ae(2),Wv=Ae(.305),d1=Ae(3),OD=Ae(.21),K_e=Ae(4),ID=Ae(4),Y_e=Ae(16),Q_e=lt(([n])=>{const e=Ie(Vo(n)).toVar(),r=Ae(-1).toVar();return Tr(e.x.greaterThan(e.z),()=>{Tr(e.x.greaterThan(e.y),()=>{r.assign(Xi(n.x.greaterThan(0),0,3))}).Else(()=>{r.assign(Xi(n.y.greaterThan(0),1,4))})}).Else(()=>{Tr(e.z.greaterThan(e.y),()=>{r.assign(Xi(n.z.greaterThan(0),2,5))}).Else(()=>{r.assign(Xi(n.y.greaterThan(0),1,4))})}),r}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),Z_e=lt(([n,e])=>{const r=pt().toVar();return Tr(e.equal(0),()=>{r.assign(pt(n.z,n.y).div(Vo(n.x)))}).ElseIf(e.equal(1),()=>{r.assign(pt(n.x.negate(),n.z.negate()).div(Vo(n.y)))}).ElseIf(e.equal(2),()=>{r.assign(pt(n.x.negate(),n.y).div(Vo(n.z)))}).ElseIf(e.equal(3),()=>{r.assign(pt(n.z.negate(),n.y).div(Vo(n.x)))}).ElseIf(e.equal(4),()=>{r.assign(pt(n.x.negate(),n.z).div(Vo(n.y)))}).Else(()=>{r.assign(pt(n.x,n.y).div(Vo(n.z)))}),sn(.5,r.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),J_e=lt(([n])=>{const e=Ae(0).toVar();return Tr(n.greaterThanEqual(Hv),()=>{e.assign(PD.sub(n).mul(c1.sub(RE)).div(PD.sub(Hv)).add(RE))}).ElseIf(n.greaterThanEqual(jv),()=>{e.assign(Hv.sub(n).mul(u1.sub(c1)).div(Hv.sub(jv)).add(c1))}).ElseIf(n.greaterThanEqual(Wv),()=>{e.assign(jv.sub(n).mul(d1.sub(u1)).div(jv.sub(Wv)).add(u1))}).ElseIf(n.greaterThanEqual(OD),()=>{e.assign(Wv.sub(n).mul(K_e.sub(d1)).div(Wv.sub(OD)).add(d1))}).Else(()=>{e.assign(Ae(-2).mul(Xa(sn(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),ebe=lt(([n,e])=>{const r=n.toVar();r.assign(sn(2,r).sub(1));const i=Ie(r,1).toVar();return Tr(e.equal(0),()=>{i.assign(i.zyx)}).ElseIf(e.equal(1),()=>{i.assign(i.xzy),i.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{i.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{i.assign(i.zyx),i.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{i.assign(i.xzy),i.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{i.z.mulAssign(-1)}),i}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),tbe=lt(([n,e,r,i,o,s])=>{const a=Ae(r),l=Ie(e),c=ol(J_e(a),RE,s),u=Ec(c),d=pu(c),f=Ie(AE(n,l,d,i,o,s)).toVar();return Tr(u.notEqual(0),()=>{const h=Ie(AE(n,l,d.add(1),i,o,s)).toVar();f.assign(jn(f,h,u))}),f}),AE=lt(([n,e,r,i,o,s])=>{const a=Ae(r).toVar(),l=Ie(e),c=Ae(Q_e(l)).toVar(),u=Ae(ro(ID.sub(a),0)).toVar();a.assign(ro(a,ID));const d=Ae(Gm(a)).toVar(),f=pt(Z_e(l,c).mul(d.sub(2)).add(1)).toVar();return Tr(c.greaterThan(2),()=>{f.y.addAssign(d),c.subAssign(3)}),f.x.addAssign(c.mul(d)),f.x.addAssign(u.mul(sn(3,Y_e))),f.y.addAssign(sn(4,Gm(s).sub(d))),f.x.mulAssign(i),f.y.mulAssign(o),n.uv(f).grad(pt(),pt())}),f1=lt(({envMap:n,mipInt:e,outputDirection:r,theta:i,axis:o,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:l})=>{const c=Ul(i),u=r.mul(c).add(o.cross(r).mul(ys(i))).add(o.mul(o.dot(r).mul(c.oneMinus())));return AE(n,u,e,s,a,l)}),nbe=lt(({n,latitudinal:e,poleAxis:r,outputDirection:i,weights:o,samples:s,dTheta:a,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})=>{const h=Ie(Xi(e,r,a5(r,i))).toVar();Tr(e5(h.equals(Ie(0))),()=>{h.assign(Ie(i.z,0,i.x.negate()))}),h.assign(Hm(h));const p=Ie().toVar();return p.addAssign(o.element(cr(0)).mul(f1({theta:0,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),Ss({start:cr(1),end:n},({i:g})=>{Tr(g.greaterThanEqual(s),()=>{Vxe()});const y=Ae(a.mul(Ae(g))).toVar();p.addAssign(o.element(g).mul(f1({theta:y.mul(-1),axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),p.addAssign(o.element(g).mul(f1({theta:y,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})))}),Yt(p,1)});let ox=null;const DD=new WeakMap;function rbe(n){const e=Math.log2(n)-2,r=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:r,maxMip:e}}function ibe(n){let e=DD.get(n);if((e!==void 0?e.pmremVersion:-1)!==n.pmremVersion){const i=n.image;if(n.isCubeTexture)if(sbe(i))e=ox.fromCubemap(n,e);else return null;else if(abe(i))e=ox.fromEquirectangular(n,e);else return null;e.pmremVersion=n.pmremVersion,DD.set(n,e)}return e.texture}class obe extends Rr{static get type(){return"PMREMNode"}constructor(e,r=null,i=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=r,this.levelNode=i,this._generator=null;const o=new zr;o.isRenderTargetTexture=!0,this._texture=gn(o),this._width=Xt(0),this._height=Xt(0),this._maxMip=Xt(0),this.updateBeforeType=on.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const r=rbe(e.image.height);this._texture.value=e,this._width.value=r.texelWidth,this._height.value=r.texelHeight,this._maxMip.value=r.maxMip}updateBefore(){let e=this._pmrem;const r=e?e.pmremVersion:-1,i=this._value;r!==i.pmremVersion&&(i.isPMREMTexture===!0?e=i:e=ibe(i),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){ox===null&&(ox=e.createPMREMGenerator()),this.updateBefore(e);let r=this.uvNode;r===null&&e.context.getUV&&(r=e.context.getUV(this));const i=this.value;e.renderer.coordinateSystem===jo&&i.isPMREMTexture!==!0&&i.isRenderTargetTexture===!0&&(r=Ie(r.x.negate(),r.yz));let o=this.levelNode;return o===null&&e.context.getTextureLevel&&(o=e.context.getTextureLevel(this)),tbe(this._texture,r,o,this._width,this._height,this._maxMip)}}function sbe(n){if(n==null)return!1;let e=0;const r=6;for(let i=0;i<r;i++)n[i]!==void 0&&e++;return e===r}function abe(n){return n==null?!1:n.height>0}const q5=Be(obe),LD=new WeakMap;class lbe extends gh{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:r}=e;let i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const p=i.isTextureNode?i.value:r[i.property];let g=LD.get(p);g===void 0&&(g=q5(p),LD.set(p,g)),i=g}const s=r.envMap?Nn("envMapIntensity","float",e.material):Nn("environmentIntensity","float",e.scene),l=r.useAnisotropy===!0||r.anisotropy>0?Xye:wr,c=i.context(FD(La,l)).mul(s),u=i.context(cbe($R)).mul(Math.PI).mul(s),d=z0(c),f=z0(u);e.context.radiance.addAssign(d),e.context.iblIrradiance.addAssign(f);const h=e.context.lightingModel.clearcoatRadiance;if(h){const p=i.context(FD(tx,vp)).mul(s),g=z0(p);h.addAssign(g)}}}const FD=(n,e)=>{let r=null;return{getUV:()=>(r===null&&(r=ir.negate().reflect(e),r=n.mul(n).mix(r,e).normalize(),r=r.transformDirection(hl)),r),getTextureLevel:()=>n}},cbe=n=>({getUV:()=>n,getTextureLevel:()=>Ae(1)}),ube=new qk;class X5 extends Mr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(ube),this.setValues(e)}setupEnvironment(e){let r=super.setupEnvironment(e);return r===null&&e.environmentNode&&(r=e.environmentNode),r?new lbe(r):null}setupLightingModel(){return new W5}setupSpecular(){const e=jn(Ie(.04),Sn.rgb,ex);go.assign(e),nx.assign(1)}setupVariants(){const e=this.metalnessNode?Ae(this.metalnessNode):lxe;ex.assign(e);let r=this.roughnessNode?Ae(this.roughnessNode):axe;r=k5({roughness:r}),La.assign(r),this.setupSpecular(),Sn.assign(Yt(Sn.rgb.mul(e.oneMinus()),Sn.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const dbe=new Rue;class fbe extends X5{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(dbe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?Ae(this.iorNode):Sxe;$0.assign(e),go.assign(jn(jm(l5($0.sub(1).div($0.add(1))).mul(sxe),Ie(1)).mul(pD),Sn.rgb,ex)),nx.assign(jn(pD,1,ex))}setupLightingModel(){return new W5(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const r=this.clearcoatNode?Ae(this.clearcoatNode):uxe,i=this.clearcoatRoughnessNode?Ae(this.clearcoatRoughnessNode):dxe;bE.assign(r),tx.assign(k5({roughness:i}))}if(this.useSheen){const r=this.sheenNode?Ie(this.sheenNode):pxe,i=this.sheenRoughnessNode?Ae(this.sheenRoughnessNode):mxe;kd.assign(r),PR.assign(i)}if(this.useIridescence){const r=this.iridescenceNode?Ae(this.iridescenceNode):vxe,i=this.iridescenceIORNode?Ae(this.iridescenceIORNode):yxe,o=this.iridescenceThicknessNode?Ae(this.iridescenceThicknessNode):xxe;OR.assign(r),q4.assign(i),X4.assign(o)}if(this.useAnisotropy){const r=(this.anisotropyNode?pt(this.anisotropyNode):gxe).toVar();Vc.assign(r.length()),Tr(Vc.equal(0),()=>{r.assign(pt(1,0))}).Else(()=>{r.divAssign(pt(Vc)),Vc.assign(Vc.saturate())}),SE.assign(Vc.pow2().mix(La.pow2(),1)),B0.assign(yp[0].mul(r.x).add(yp[1].mul(r.y))),af.assign(yp[1].mul(r.x).sub(yp[0].mul(r.y)))}if(this.useTransmission){const r=this.transmissionNode?Ae(this.transmissionNode):_xe,i=this.thicknessNode?Ae(this.thicknessNode):bxe,o=this.attenuationDistanceNode?Ae(this.attenuationDistanceNode):wxe,s=this.attenuationColorNode?Ie(this.attenuationColorNode):Cxe;if(CE.assign(r),K4.assign(i),Y4.assign(o),Q4.assign(s),this.useDispersion){const a=this.dispersionNode?Ae(this.dispersionNode):Axe;Z4.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Ie(this.clearcoatNormalNode):fxe}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const hbe=lt(({normal:n,lightDirection:e,builder:r})=>{const i=n.dot(e),o=pt(i.mul(.5).add(.5),0);if(r.material.gradientMap){const s=kl("gradientMap","texture").context({getUV:()=>o});return Ie(s.r)}else{const s=o.fwidth().mul(.5);return jn(Ie(.7),Ie(1),Au(Ae(.7).sub(s.x),Ae(.7).add(s.x),o.x))}});class pbe extends F_{direct({lightDirection:e,lightColor:r,reflectedLight:i},o,s){const a=hbe({normal:x5,lightDirection:e,builder:s}).mul(r);i.directDiffuse.addAssign(a.mul(Xf({diffuseColor:Sn.rgb})))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(Xf({diffuseColor:Sn}))),i.indirectDiffuse.mulAssign(e)}}const mbe=new Nue;class gbe extends Mr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(mbe),this.setValues(e)}setupLightingModel(){return new pbe}}class vbe extends Rr{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Ie(ir.z,0,ir.x.negate()).normalize(),r=ir.cross(e);return pt(e.dot(wr),r.dot(wr)).mul(.495).add(.5)}}const ybe=ct(vbe),xbe=new Due;class _be extends Mr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(xbe),this.setValues(e)}setupVariants(e){const r=ybe;let i;e.material.matcap?i=kl("matcap","texture").context({getUV:()=>r}):i=Ie(jn(.2,.8,r.y)),Sn.rgb.mulAssign(i.rgb)}}const bbe=new uue;class Sbe extends Mr{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(bbe),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}class wbe extends Rr{static get type(){return"RotateNode"}constructor(e,r){super(),this.positionNode=e,this.rotationNode=r}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:r,positionNode:i}=this;if(this.getNodeType(e)==="vec2"){const s=r.cos(),a=r.sin();return NR(s,a,a.negate(),s).mul(i)}else{const s=r,a=sf(Yt(1,0,0,0),Yt(0,Ul(s.x),ys(s.x).negate(),0),Yt(0,ys(s.x),Ul(s.x),0),Yt(0,0,0,1)),l=sf(Yt(Ul(s.y),0,ys(s.y),0),Yt(0,1,0,0),Yt(ys(s.y).negate(),0,Ul(s.y),0),Yt(0,0,0,1)),c=sf(Yt(Ul(s.z),ys(s.z).negate(),0,0),Yt(ys(s.z),Ul(s.z),0,0),Yt(0,0,1,0),Yt(0,0,0,1));return a.mul(l).mul(c).mul(Yt(i,1)).xyz}}}const Cbe=Be(wbe),Ebe=new iue;class Tbe extends Mr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(Ebe),this.setValues(e)}setupPosition({object:e,camera:r,context:i}){const o=this.sizeAttenuation,{positionNode:s,rotationNode:a,scaleNode:l}=this,c=oi;let u=I_.mul(Ie(s||0)),d=pt(Nu[0].xyz.length(),Nu[1].xyz.length());if(l!==null&&(d=d.mul(l)),!o)if(r.isPerspectiveCamera)d=d.mul(u.z.negate());else{const y=Ae(2).div(ix.element(1).element(1));d=d.mul(y.mul(2))}let f=c.xy;if(e.center&&e.center.isVector2===!0){const y=aye("center","vec2");f=f.sub(y.sub(.5))}f=f.mul(d);const h=Ae(a||hxe),p=Cbe(f,h);u=Yt(u.xy.add(p),u.zw);const g=ix.mul(u);return i.vertex=c,g}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}class Mbe extends F_{constructor(){super(),this.shadowNode=Ae(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){Sn.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Sn.rgb)}}const Rbe=new Mue;class Abe extends Mr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Rbe),this.setValues(e)}setupLightingModel(){return new Mbe}}lt(({texture:n,uv:e})=>{const i=Ie().toVar();return Tr(e.x.lessThan(1e-4),()=>{i.assign(Ie(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{i.assign(Ie(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{i.assign(Ie(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{i.assign(Ie(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{i.assign(Ie(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{i.assign(Ie(0,0,-1))}).Else(()=>{const s=n.uv(e.add(Ie(-.01,0,0))).r.sub(n.uv(e.add(Ie(.01,0,0))).r),a=n.uv(e.add(Ie(0,-.01,0))).r.sub(n.uv(e.add(Ie(0,.01,0))).r),l=n.uv(e.add(Ie(0,0,-.01))).r.sub(n.uv(e.add(Ie(0,0,.01))).r);i.assign(Ie(s,a,l))}),i.normalize()});class Nbe{constructor(e,r){this.nodes=e,this.info=r,this._context=self,this._animationLoop=null,this._requestId=null}start(){const e=(r,i)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(r,i)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}setAnimationLoop(e){this._animationLoop=e}setContext(e){this._context=e}dispose(){this.stop()}}class la{constructor(){this.weakMap=new WeakMap}get(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return;return r.get(e[e.length-1])}set(e,r){let i=this.weakMap;for(let o=0;o<e.length;o++){const s=e[o];i.has(s)===!1&&i.set(s,new WeakMap),i=i.get(s)}return i.set(e[e.length-1],r)}delete(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return!1;return r.delete(e[e.length-1])}}let Pbe=0;function Obe(n){const e=Object.keys(n);let r=Object.getPrototypeOf(n);for(;r;){const i=Object.getOwnPropertyDescriptors(r);for(const o in i)if(i[o]!==void 0){const s=i[o];s&&typeof s.get=="function"&&e.push(o)}r=Object.getPrototypeOf(r)}return e}class Ibe{constructor(e,r,i,o,s,a,l,c,u,d){this._nodes=e,this._geometries=r,this.id=Pbe++,this.renderer=i,this.object=o,this.material=s,this.scene=a,this.camera=l,this.lightsNode=c,this.context=u,this.geometry=o.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=d,this.clippingContextCacheKey=d!==null?d.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,r=this.geometry,i=[],o=new Set;for(const s of e){const a=s.node&&s.node.attribute?s.node.attribute:r.getAttribute(s.name);if(a===void 0)continue;i.push(a);const l=a.isInterleavedBufferAttribute?a.data:a;o.add(l)}return this.attributes=i,this.vertexBuffers=Array.from(o.values()),i}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:r,geometry:i,group:o,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),l=this.getIndex(),c=l!==null,u=i.isInstancedBufferGeometry?i.instanceCount:e.count>1?e.count:1;if(u===0)return null;if(a.instanceCount=u,e.isBatchedMesh===!0)return a;let d=1;r.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(d=2);let f=s.start*d,h=(s.start+s.count)*d;o!==null&&(f=Math.max(f,o.start*d),h=Math.min(h,(o.start+o.count)*d));const p=i.attributes.position;let g=1/0;c?g=l.count:p!=null&&(g=p.count),f=Math.max(f,0),h=Math.min(h,g);const y=h-f;return y<0||y===1/0?null:(a.vertexCount=y,a.firstVertex=f,a)}getGeometryCacheKey(){const{geometry:e}=this;let r="";for(const i of Object.keys(e.attributes).sort()){const o=e.attributes[i];r+=i+",",o.data&&(r+=o.data.stride+","),o.offset&&(r+=o.offset+","),o.itemSize&&(r+=o.itemSize+","),o.normalized&&(r+="n,")}return e.index&&(r+="index,"),r}getMaterialCacheKey(){const{object:e,material:r}=this;let i=r.customProgramCacheKey();for(const o of Obe(r)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(o))continue;const s=r[o];let a;if(s!==null){const l=typeof s;l==="number"?a=s!==0?"1":"0":l==="object"?(a="{",s.isTexture&&(a+=s.mapping),a+="}"):a=String(s)}else a=String(s);i+=a+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.morphTargetInfluences&&(i+=e.morphTargetInfluences.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),e.count>1&&(i+=e.uuid+","),i+=e.receiveShadow+",",dve(i)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const gd=[];class Dbe{constructor(e,r,i,o,s,a){this.renderer=e,this.nodes=r,this.geometries=i,this.pipelines=o,this.bindings=s,this.info=a,this.chainMaps={}}get(e,r,i,o,s,a,l,c){const u=this.getChainMap(c);gd[0]=e,gd[1]=r,gd[2]=a,gd[3]=s;let d=u.get(gd);return d===void 0?(d=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,r,i,o,s,a,l,c),u.set(gd,d)):(d.updateClipping(l),d.needsGeometryUpdate&&d.setGeometry(e.geometry),(d.version!==r.version||d.needsUpdate)&&(d.initialCacheKey!==d.getCacheKey()?(d.dispose(),d=this.get(e,r,i,o,s,a,l,c)):d.version=r.version)),d}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new la)}dispose(){this.chainMaps={}}createRenderObject(e,r,i,o,s,a,l,c,u,d,f){const h=this.getChainMap(f),p=new Ibe(e,r,i,o,s,a,l,c,u,d);return p.onDispose=()=>{this.pipelines.delete(p),this.bindings.delete(p),this.nodes.delete(p),h.delete(p.getChainArray())},p}}class Tc{constructor(){this.data=new WeakMap}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}delete(e){let r;return this.data.has(e)&&(r=this.data.get(e),this.data.delete(e)),r}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const Xs={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Vl=16,Lbe=211,Fbe=212;class Ube extends Tc{constructor(e){super(),this.backend=e}delete(e){const r=super.delete(e);return r!==void 0&&this.backend.destroyAttribute(e),r}update(e,r){const i=this.get(e);if(i.version===void 0)r===Xs.VERTEX?this.backend.createAttribute(e):r===Xs.INDEX?this.backend.createIndexAttribute(e):r===Xs.STORAGE?this.backend.createStorageAttribute(e):r===Xs.INDIRECT&&this.backend.createIndirectStorageAttribute(e),i.version=this._getBufferAttribute(e).version;else{const o=this._getBufferAttribute(e);(i.version<o.version||o.usage===Ud)&&(this.backend.updateAttribute(e),i.version=o.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function Bbe(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function K5(n){return n.index!==null?n.index.version:n.attributes.position.version}function UD(n){const e=[],r=n.index,i=n.attributes.position;if(r!==null){const s=r.array;for(let a=0,l=s.length;a<l;a+=3){const c=s[a+0],u=s[a+1],d=s[a+2];e.push(c,u,u,d,d,c)}}else{const s=i.array;for(let a=0,l=s.length/3-1;a<l;a+=3){const c=a+0,u=a+1,d=a+2;e.push(c,u,u,d,d,c)}}const o=new(Bbe(e)?sR:oR)(e,1);return o.version=K5(n),o}class $be extends Tc{constructor(e,r){super(),this.attributes=e,this.info=r,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const r=e.geometry;return super.has(r)&&this.get(r).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const r=e.geometry,i=this.get(r);i.initialized=!0,this.info.memory.geometries++;const o=()=>{this.info.memory.geometries--;const s=r.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const c of a)this.attributes.delete(c);const l=this.wireframes.get(r);l!==void 0&&this.attributes.delete(l),r.removeEventListener("dispose",o)};r.addEventListener("dispose",o)}updateAttributes(e){const r=e.getAttributes();for(const s of r)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,Xs.STORAGE):this.updateAttribute(s,Xs.VERTEX);const i=this.getIndex(e);i!==null&&this.updateAttribute(i,Xs.INDEX);const o=e.geometry.indirect;o!==null&&this.updateAttribute(o,Xs.INDIRECT)}updateAttribute(e,r){const i=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,r),this.attributeCall.set(e,i)):this.attributeCall.get(e.data)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e.data,i),this.attributeCall.set(e,i)):this.attributeCall.get(e)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e,i))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:r,material:i}=e;let o=r.index;if(i.wireframe===!0){const s=this.wireframes;let a=s.get(r);a===void 0?(a=UD(r),s.set(r,a)):a.version!==K5(r)&&(this.attributes.delete(a),a=UD(r),s.set(r,a)),o=a}return o}}class zbe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}update(e,r,i){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=i*(r/3):e.isPoints?this.render.points+=i*r:e.isLineSegments?this.render.lines+=i*(r/2):e.isLine?this.render.lines+=i*(r-1):console.error("THREE.WebGPUInfo: Unknown object type.")}updateTimestamp(e,r){this[e].timestampCalls===0&&(this[e].timestamp=0),this[e].timestamp+=r,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}reset(){const e=this.render.frameCalls;this.render.previousFrameCalls=e;const r=this.compute.frameCalls;this.compute.previousFrameCalls=r,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class Y5{constructor(e){this.cacheKey=e,this.usedTimes=0}}class kbe extends Y5{constructor(e,r,i){super(e),this.vertexProgram=r,this.fragmentProgram=i}}class Vbe extends Y5{constructor(e,r){super(e),this.computeProgram=r,this.isComputePipeline=!0}}let Gbe=0;class h1{constructor(e,r,i=null,o=null){this.id=Gbe++,this.code=e,this.stage=r,this.transforms=i,this.attributes=o,this.usedTimes=0}}class Hbe extends Tc{constructor(e,r){super(),this.backend=e,this.nodes=r,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,r){const{backend:i}=this,o=this.get(e);if(this._needsComputeUpdate(e)){const s=o.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let l=this.programs.compute.get(a.computeShader);l===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),l=new h1(a.computeShader,"compute",a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,l),i.createProgram(l));const c=this._getComputeCacheKey(e,l);let u=this.caches.get(c);u===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getComputePipeline(e,l,c,r)),u.usedTimes++,l.usedTimes++,o.version=e.version,o.pipeline=u}return o.pipeline}getForRender(e,r=null){const{backend:i}=this,o=this.get(e);if(this._needsRenderUpdate(e)){const s=o.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState();let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new h1(a.vertexShader,"vertex"),this.programs.vertex.set(a.vertexShader,l),i.createProgram(l));let c=this.programs.fragment.get(a.fragmentShader);c===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),c=new h1(a.fragmentShader,"fragment"),this.programs.fragment.set(a.fragmentShader,c),i.createProgram(c));const u=this._getRenderCacheKey(e,l,c);let d=this.caches.get(u);d===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),d=this._getRenderPipeline(e,l,c,u,r)):e.pipeline=d,d.usedTimes++,l.usedTimes++,c.usedTimes++,o.pipeline=d}return o.pipeline}delete(e){const r=this.get(e).pipeline;return r&&(r.usedTimes--,r.usedTimes===0&&this._releasePipeline(r),r.isComputePipeline?(r.computeProgram.usedTimes--,r.computeProgram.usedTimes===0&&this._releaseProgram(r.computeProgram)):(r.fragmentProgram.usedTimes--,r.vertexProgram.usedTimes--,r.vertexProgram.usedTimes===0&&this._releaseProgram(r.vertexProgram),r.fragmentProgram.usedTimes===0&&this._releaseProgram(r.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,r,i,o){i=i||this._getComputeCacheKey(e,r);let s=this.caches.get(i);return s===void 0&&(s=new Vbe(i,r),this.caches.set(i,s),this.backend.createComputePipeline(s,o)),s}_getRenderPipeline(e,r,i,o,s){o=o||this._getRenderCacheKey(e,r,i);let a=this.caches.get(o);return a===void 0&&(a=new kbe(o,r,i),this.caches.set(o,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,r){return e.id+","+r.id}_getRenderCacheKey(e,r,i){return r.id+","+i.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const r=e.code,i=e.stage;this.programs[i].delete(r)}_needsComputeUpdate(e){const r=this.get(e);return r.pipeline===void 0||r.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class jbe extends Tc{constructor(e,r,i,o,s,a){super(),this.backend=e,this.textures=i,this.pipelines=s,this.attributes=o,this.nodes=r,this.info=a,this.pipelines.bindings=this}getForRender(e){const r=e.getBindings();for(const i of r){const o=this.get(i);o.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),o.bindGroup=i)}return r}getForCompute(e){const r=this.nodes.getForCompute(e).bindings;for(const i of r){const o=this.get(i);o.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),o.bindGroup=i)}return r}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const r of e)this._update(r,e)}_init(e){for(const r of e.bindings)if(r.isSampledTexture)this.textures.updateTexture(r.texture);else if(r.isStorageBuffer){const i=r.attribute,o=i.isIndirectStorageBufferAttribute?Xs.INDIRECT:Xs.STORAGE;this.attributes.update(i,o)}}_update(e,r){const{backend:i}=this;let o=!1,s=!0,a=0,l=0;for(const c of e.bindings)if(!(c.isNodeUniformsGroup&&!this.nodes.updateGroup(c))){if(c.isUniformBuffer)c.update()&&i.updateBinding(c);else if(c.isSampler)c.update();else if(c.isSampledTexture){const u=this.textures.get(c.texture);c.needsBindingsUpdate(u.generation)&&(o=!0);const d=c.update(),f=c.texture;d&&this.textures.updateTexture(f);const h=i.get(f);if(h.externalTexture!==void 0||u.isDefaultTexture?s=!1:(a=a*10+f.id,l+=f.version),i.isWebGPUBackend===!0&&h.texture===void 0&&h.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",c,d,f,c.textureNode.value,o),this.textures.updateTexture(f),o=!0),f.isStorageTexture===!0){const p=this.get(f);c.store===!0?p.needsMipmap=!0:this.textures.needsMipmaps(f)&&p.needsMipmap===!0&&(this.backend.generateMipmaps(f),p.needsMipmap=!1)}}}o===!0&&this.backend.updateBindings(e,r,s?a:0,l)}}function Wbe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function BD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function $D(n){return(n.transmission>0||n.transmissionNode)&&n.side===Ri&&n.forceSinglePass===!1}class qbe{constructor(e,r,i){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(r,i),this.lightsArray=[],this.scene=r,this.camera=i,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,r,i,o,s,a,l){let c=this.renderItems[this.renderItemsIndex];return c===void 0?(c={id:e.id,object:e,geometry:r,material:i,groupOrder:o,renderOrder:e.renderOrder,z:s,group:a,clippingContext:l},this.renderItems[this.renderItemsIndex]=c):(c.id=e.id,c.object=e,c.geometry=r,c.material=i,c.groupOrder=o,c.renderOrder=e.renderOrder,c.z=s,c.group=a,c.clippingContext=l),this.renderItemsIndex++,c}push(e,r,i,o,s,a,l){const c=this.getNextRenderItem(e,r,i,o,s,a,l);e.occlusionTest===!0&&this.occlusionQueryCount++,i.transparent===!0||i.transmission>0?($D(i)&&this.transparentDoublePass.push(c),this.transparent.push(c)):this.opaque.push(c)}unshift(e,r,i,o,s,a,l){const c=this.getNextRenderItem(e,r,i,o,s,a,l);i.transparent===!0||i.transmission>0?($D(i)&&this.transparentDoublePass.unshift(c),this.transparent.unshift(c)):this.opaque.unshift(c)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,r){this.opaque.length>1&&this.opaque.sort(e||Wbe),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(r||BD),this.transparent.length>1&&this.transparent.sort(r||BD)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,r=this.renderItems.length;e<r;e++){const i=this.renderItems[e];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.groupOrder=null,i.renderOrder=null,i.z=null,i.group=null,i.clippingContext=null}}}class Xbe{constructor(e){this.lighting=e,this.lists=new la}get(e,r){const i=this.lists,o=[e,r];let s=i.get(o);return s===void 0&&(s=new qbe(this.lighting,e,r),i.set(o,s)),s}dispose(){this.lists=new la}}let Kbe=0;class Ybe{constructor(){this.id=Kbe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new qt,this.scissor=!1,this.scissorValue=new qt,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}getCacheKey(){return Q5(this)}}function Q5(n){const{textures:e,activeCubeFace:r}=n,i=[r];for(const o of e)i.push(o.id);return D4(i)}class Qbe{constructor(){this.chainMaps={}}get(e,r,i=null){const o=[e,r];let s;if(i===null)s="default";else{const c=i.texture.format;s=`${i.textures.length}:${c}:${i.samples}:${i.depthBuffer}:${i.stencilBuffer}`}const a=this.getChainMap(s);let l=a.get(o);return l===void 0&&(l=new Ybe,a.set(o,l)),i!==null&&(l.sampleCount=i.samples===0?1:i.samples),l}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new la)}dispose(){this.chainMaps={}}}const Zbe=new Y;class Jbe extends Tc{constructor(e,r,i){super(),this.renderer=e,this.backend=r,this.info=i}updateRenderTarget(e,r=0){const i=this.get(e),o=e.samples===0?1:e.samples,s=i.depthTextureMips||(i.depthTextureMips={}),a=e.textures,l=this.getSize(a[0]),c=l.width>>r,u=l.height>>r;let d=e.depthTexture||s[r];const f=e.depthBuffer===!0||e.stencilBuffer===!0;let h=!1;d===void 0&&f&&(d=new wc,d.format=e.stencilBuffer?ia:Js,d.type=e.stencilBuffer?ra:rr,d.image.width=c,d.image.height=u,s[r]=d),(i.width!==l.width||l.height!==i.height)&&(h=!0,d&&(d.needsUpdate=!0,d.image.width=c,d.image.height=u)),i.width=l.width,i.height=l.height,i.textures=a,i.depthTexture=d||null,i.depth=e.depthBuffer,i.stencil=e.stencilBuffer,i.renderTarget=e,i.sampleCount!==o&&(h=!0,d&&(d.needsUpdate=!0),i.sampleCount=o);const p={sampleCount:o};for(let g=0;g<a.length;g++){const y=a[g];h&&(y.needsUpdate=!0),this.updateTexture(y,p)}if(d&&this.updateTexture(d,p),i.initialized!==!0){i.initialized=!0;const g=()=>{e.removeEventListener("dispose",g);for(let y=0;y<a.length;y++)this._destroyTexture(a[y]);d&&this._destroyTexture(d),this.delete(e)};e.addEventListener("dispose",g)}}updateTexture(e,r={}){const i=this.get(e);if(i.initialized===!0&&i.version===e.version)return;const o=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(o&&i.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=mi}const{width:a,height:l,depth:c}=this.getSize(e);if(r.width=a,r.height=l,r.depth=c,r.needsMipmaps=this.needsMipmaps(e),r.levels=r.needsMipmaps?this.getMipLevels(e,a,l):1,o||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,r),i.generation=e.version;else if(i.initialized!==!0&&s.createSampler(e),e.version>0){const d=e.image;if(d===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(d.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const f=[];for(const h of e.images)f.push(h);r.images=f}else r.image=d;(i.isDefaultTexture===void 0||i.isDefaultTexture===!0)&&(s.createTexture(e,r),i.isDefaultTexture=!1,i.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,r),r.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),i.isDefaultTexture=!0,i.generation=e.version;if(i.initialized!==!0){i.initialized=!0,i.generation=e.version,this.info.memory.textures++;const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",u)}i.version=e.version}getSize(e,r=Zbe){let i=e.images?e.images[0]:e.image;return i?(i.image!==void 0&&(i=i.image),r.width=i.width||1,r.height=i.height||1,r.depth=e.isCubeTexture?6:i.depth||1):r.width=r.height=r.depth=1,r}getMipLevels(e,r,i){let o;return e.isCompressedTexture?e.mipmaps?o=e.mipmaps.length:o=1:o=Math.floor(Math.log2(Math.max(r,i)))+1,o}needsMipmaps(e){return this.isEnvironmentTexture(e)||e.isCompressedTexture===!0||e.generateMipmaps}isEnvironmentTexture(e){const r=e.mapping;return r===fc||r===hc||r===Jo||r===es}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class jR extends Mt{constructor(e,r,i,o=1){super(e,r,i),this.a=o}set(e,r,i,o=1){return this.a=o,super.set(e,r,i)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class eSe extends Rn{static get type(){return"ParameterNode"}constructor(e,r=null){super(e,r),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class tSe extends Qt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}If(e,r){const i=new U0(r);return this._currentCond=Xi(e,i),this.add(this._currentCond)}ElseIf(e,r){const i=new U0(r),o=Xi(e,i);return this._currentCond.elseNode=o,this._currentCond=o,this}Else(e){return this._currentCond.elseNode=new U0(e),this}build(e,...r){const i=V4();Zy(this);for(const o of this.nodes)o.build(e,"void");return Zy(i),this.outputNode?this.outputNode.build(e,...r):super.build(e,...r)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const p1=Be(tSe);new vs;new Y;new Y;new Y;new fn;new Y(0,0,-1);new qt;new Y;new Y;new qt;new je;const nSe=new uh;Km.flipX();nSe.depthTexture=new wc(1,1);const m1=new wg(-1,1,1,-1,0,1);class rSe extends Bi{constructor(e=!1){super();const r=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new gr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new gr(r,2))}}const iSe=new rSe;class Z5 extends $r{constructor(e=null){super(iSe,e),this.camera=m1,this.isQuadMesh=!0}renderAsync(e){return e.renderAsync(this,m1)}render(e){e.render(this,m1)}}const Jh=new Mo,g1=new fn;class Yi extends Qt{static get type(){return"SceneNode"}constructor(e=Yi.BACKGROUND_BLURRINESS,r=null){super(),this.scope=e,this.scene=r}setup(e){const r=this.scope,i=this.scene!==null?this.scene:e.scene;let o;return r===Yi.BACKGROUND_BLURRINESS?o=Nn("backgroundBlurriness","float",i):r===Yi.BACKGROUND_INTENSITY?o=Nn("backgroundIntensity","float",i):r===Yi.BACKGROUND_ROTATION?o=Xt("mat4").label("backgroundRotation").setGroup(jt).onRenderUpdate(()=>{const s=i.background;return s!==null&&s.isTexture&&s.mapping!==jM?(Jh.copy(i.backgroundRotation),Jh.x*=-1,Jh.y*=-1,Jh.z*=-1,g1.makeRotationFromEuler(Jh)):g1.identity(),g1}):console.error("THREE.SceneNode: Unknown scope:",r),o}}Yi.BACKGROUND_BLURRINESS="backgroundBlurriness";Yi.BACKGROUND_INTENSITY="backgroundIntensity";Yi.BACKGROUND_ROTATION="backgroundRotation";const oSe=ct(Yi,Yi.BACKGROUND_BLURRINESS),zD=ct(Yi,Yi.BACKGROUND_INTENSITY),sSe=ct(Yi,Yi.BACKGROUND_ROTATION),aSe=new je;class lSe extends Rg{static get type(){return"PassTextureNode"}constructor(e,r){super(r),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class kD extends lSe{static get type(){return"PassMultipleTextureNode"}constructor(e,r,i=!1){super(e,null),this.textureName=r,this.previousTexture=i}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class B_ extends Rr{static get type(){return"PassNode"}constructor(e,r,i,o={}){super("vec4"),this.scope=e,this.scene=r,this.camera=i,this.options=o,this._pixelRatio=1,this._width=1,this._height=1;const s=new wc;s.isRenderTargetTexture=!0,s.name="depth";const a=new uh(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Qr,...o});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this.updateBeforeType=on.FRAME,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Xt(0),this._cameraFar=Xt(0),this._mrt=null,this.isPassNode=!0}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let r=this._textures[e];return r===void 0&&(r=this.renderTarget.texture.clone(),r.isRenderTargetTexture=!0,r.name=e,this._textures[e]=r,this.renderTarget.textures.push(r)),r}getPreviousTexture(e){let r=this._previousTextures[e];return r===void 0&&(r=this.getTexture(e).clone(),r.isRenderTargetTexture=!0,this._previousTextures[e]=r),r}toggleTexture(e){const r=this._previousTextures[e];if(r!==void 0){const i=this._textures[e],o=this.renderTarget.textures.indexOf(i);this.renderTarget.textures[o]=r,this._textures[e]=r,this._previousTextures[e]=i,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let r=this._textureNodes[e];return r===void 0&&(r=nt(new kD(this,e)),r.updateTexture(),this._textureNodes[e]=r),r}getPreviousTextureNode(e="output"){let r=this._previousTextureNodes[e];return r===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),r=nt(new kD(this,e,!0)),r.updateTexture(),this._previousTextureNodes[e]=r),r}getViewZNode(e="depth"){let r=this._viewZNodes[e];if(r===void 0){const i=this._cameraNear,o=this._cameraFar;this._viewZNodes[e]=r=P5(this.getTextureNode(e),i,o)}return r}getLinearDepthNode(e="depth"){let r=this._linearDepthNodes[e];if(r===void 0){const i=this._cameraNear,o=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=r=kp(s,i,o)}return r}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===B_.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:r}=e,{scene:i,camera:o}=this;this._pixelRatio=r.getPixelRatio();const s=r.getSize(aSe);this.setSize(s.width,s.height);const a=r.getRenderTarget(),l=r.getMRT();this._cameraNear.value=o.near,this._cameraFar.value=o.far;for(const c in this._previousTextures)this.toggleTexture(c);r.setRenderTarget(this.renderTarget),r.setMRT(this._mrt),r.render(i,o),r.setRenderTarget(a),r.setMRT(l)}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget.setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}B_.COLOR="color";B_.DEPTH="depth";const cSe=lt(([n,e])=>n.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),uSe=lt(([n,e])=>(n=n.mul(e),n.div(n.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),dSe=lt(([n,e])=>{n=n.mul(e),n=n.sub(.004).max(0);const r=n.mul(n.mul(6.2).add(.5)),i=n.mul(n.mul(6.2).add(1.7)).add(.06);return r.div(i).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),fSe=lt(([n])=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),r=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(r)}),hSe=lt(([n,e])=>{const r=Ii(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=Ii(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=r.mul(n),n=fSe(n),n=i.mul(n),n.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),pSe=Ii(Ie(1.6605,-.1246,-.0182),Ie(-.5876,1.1329,-.1006),Ie(-.0728,-.0083,1.1187)),mSe=Ii(Ie(.6274,.0691,.0164),Ie(.3293,.9195,.088),Ie(.0433,.0113,.8956)),gSe=lt(([n])=>{const e=Ie(n).toVar(),r=Ie(e.mul(e)).toVar(),i=Ie(r.mul(r)).toVar();return Ae(15.5).mul(i.mul(r)).sub(sn(40.14,i.mul(e))).add(sn(31.96,i).sub(sn(6.868,r.mul(e))).add(sn(.4298,r).add(sn(.1191,e).sub(.00232))))}),vSe=lt(([n,e])=>{const r=Ie(n).toVar(),i=Ii(Ie(.856627153315983,.137318972929847,.11189821299995),Ie(.0951212405381588,.761241990602591,.0767994186031903),Ie(.0482516061458583,.101439036467562,.811302368396859)),o=Ii(Ie(1.1271005818144368,-.1413297634984383,-.14132976349843826),Ie(-.11060664309660323,1.157823702216272,-.11060664309660294),Ie(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=Ae(-12.47393),a=Ae(4.026069);return r.mulAssign(e),r.assign(mSe.mul(r)),r.assign(i.mul(r)),r.assign(ro(r,1e-10)),r.assign(Xa(r)),r.assign(r.sub(s).div(a.sub(s))),r.assign(ol(r,0,1)),r.assign(gSe(r)),r.assign(o.mul(r)),r.assign(N_(ro(Ie(0),r),Ie(2.2))),r.assign(pSe.mul(r)),r.assign(ol(r,0,1)),r}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),ySe=lt(([n,e])=>{const r=Ae(.76),i=Ae(.15);n=n.mul(e);const o=jm(n.r,jm(n.g,n.b)),s=Xi(o.lessThan(.08),o.sub(sn(6.25,o.mul(o))),.04);n.subAssign(s);const a=ro(n.r,ro(n.g,n.b));Tr(a.lessThan(r),()=>n);const l=Gi(1,r),c=Gi(1,l.mul(l).div(a.add(l.sub(r))));n.mulAssign(c.div(a));const u=Gi(1,il(1,i.mul(a.sub(c)).add(1)));return jn(n,Ie(c),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Dr extends Qt{static get type(){return"CodeNode"}constructor(e="",r=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=i,this.includes=r}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const r=this.getIncludes(e);for(const o of r)o.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class xSe extends Dr{static get type(){return"FunctionNode"}constructor(e="",r=[],i=""){super(e,r,i)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const r=e.getDataFromNode(this);let i=r.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),r.nodeFunction=i),i}generate(e,r){super.generate(e);const i=this.getNodeFunction(e),o=i.name,s=i.type,a=e.getCodeFromNode(this,s);o!==""&&(a.name=o);const l=e.getPropertyName(a),c=this.getNodeFunction(e).getCode(l);return a.code=c+`
`,r==="property"?l:e.format(`${l}()`,s,r)}}class J5 extends Qt{static get type(){return"FogNode"}constructor(e,r){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=r}getViewZNode(e){let r;const i=e.context.getViewZ;return i!==void 0&&(r=i(this)),(r||Fr.z).negate()}setup(){return this.factorNode}}class _Se extends J5{static get type(){return"FogRangeNode"}constructor(e,r,i){super(e),this.isFogRangeNode=!0,this.nearNode=r,this.farNode=i}setup(e){const r=this.getViewZNode(e);return Au(this.nearNode,this.farNode,r)}}const bSe=Be(_Se);class SSe extends J5{static get type(){return"FogExp2Node"}constructor(e,r){super(e),this.isFogExp2Node=!0,this.densityNode=r}setup(e){const r=this.getViewZNode(e),i=this.densityNode;return i.mul(i,r,r).negate().exp().oneMinus()}}const wSe=Be(SSe);class CSe extends Qt{constructor(e){super(),this.scope=e}generate(e){const{scope:r}=this,{renderer:i}=e;i.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${r}Barrier 
`):e.addLineFlowCode(`${r}Barrier()`,this)}}Be(CSe);class ha extends Rr{static get type(){return"AtomicFunctionNode"}constructor(e,r,i,o=null){super("uint"),this.method=e,this.pointerNode=r,this.valueNode=i,this.storeNode=o}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const r=this.method,i=this.getNodeType(e),o=this.getInputType(e),s=this.pointerNode,a=this.valueNode,l=[];l.push(`&${s.build(e,o)}`),l.push(a.build(e,o));const c=`${e.getMethod(r,i)}( ${l.join(", ")} )`;if(this.storeNode!==null){const u=this.storeNode.build(e,o);e.addLineFlowCode(`${u} = ${c}`,this)}else e.addLineFlowCode(c,this)}}ha.ATOMIC_LOAD="atomicLoad";ha.ATOMIC_STORE="atomicStore";ha.ATOMIC_ADD="atomicAdd";ha.ATOMIC_SUB="atomicSub";ha.ATOMIC_MAX="atomicMax";ha.ATOMIC_MIN="atomicMin";ha.ATOMIC_AND="atomicAnd";ha.ATOMIC_OR="atomicOr";ha.ATOMIC_XOR="atomicXor";Be(ha);let qv;function Ag(n){qv=qv||new WeakMap;let e=qv.get(n);return e===void 0&&qv.set(n,e={}),e}function eV(n){const e=Ag(n);return e.shadowMatrix||(e.shadowMatrix=Xt("mat4").setGroup(jt).onRenderUpdate(()=>(n.shadow.updateMatrices(n),n.shadow.matrix)))}function ESe(n){const e=Ag(n);if(e.projectionUV===void 0){const r=eV(n).mul(qm);e.projectionUV=r.xyz.div(r.w)}return e.projectionUV}function tV(n){const e=Ag(n);return e.position||(e.position=Xt(new Y).setGroup(jt).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.matrixWorld)))}function TSe(n){const e=Ag(n);return e.targetPosition||(e.targetPosition=Xt(new Y).setGroup(jt).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.target.matrixWorld)))}function WR(n){const e=Ag(n);return e.viewPosition||(e.viewPosition=Xt(new Y).setGroup(jt).onRenderUpdate(({camera:r},i)=>{i.value=i.value||new Y,i.value.setFromMatrixPosition(n.matrixWorld),i.value.applyMatrix4(r.matrixWorldInverse)}))}const nV=n=>hl.transformDirection(tV(n).sub(TSe(n))),MSe=n=>n.sort((e,r)=>e.id-r.id),RSe=(n,e)=>{for(const r of e)if(r.isAnalyticLightNode&&r.light.id===n)return r;return null},v1=new WeakMap;class rV extends Qt{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Ie().toVar("totalDiffuse"),this.totalSpecularNode=Ie().toVar("totalSpecular"),this.outgoingLightNode=Ie().toVar("outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const r=[];for(const i of this._lightNodes)r.push(i.getSelf().getHash());this._lightNodesHash="lights-"+r.join(",")}return this._lightNodesHash}analyze(e){const r=e.getDataFromNode(this);for(const i of r.nodes)i.build(e)}setupLightsNode(e){const r=[],i=this._lightNodes,o=MSe(this._lights),s=e.renderer.library;for(const a of o)if(a.isNode)r.push(nt(a));else{let l=null;if(i!==null&&(l=RSe(a.id,i)),l===null){const c=s.getLightNodeClass(a.constructor);if(c===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let u=null;v1.has(a)?u=v1.get(a):(u=nt(new c(a)),v1.set(a,u)),r.push(u)}}this._lightNodes=r}setupLights(e,r){for(const i of r)i.build(e)}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const r=e.context,i=r.lightingModel;let o=this.outgoingLightNode;if(i){const{_lightNodes:s,totalDiffuseNode:a,totalSpecularNode:l}=this;r.outgoingLight=o;const c=e.addStack(),u=e.getDataFromNode(this);u.nodes=c.nodes,i.start(r,c,e),this.setupLights(e,s),i.indirect(r,c,e);const{backdrop:d,backdropAlpha:f}=r,{directDiffuse:h,directSpecular:p,indirectDiffuse:g,indirectSpecular:y}=r.reflectedLight;let v=h.add(g);d!==null&&(f!==null?v=Ie(f.mix(v,d)):v=Ie(d),r.material.transparent=!0),a.assign(v),l.assign(p.add(y)),o.assign(a.add(l)),i.finish(r,c,e),o=o.bypass(e.removeStack())}return o}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const VD=new WeakMap,GD=Ie().toVar("shadowWorldPosition"),ASe=lt(([n,e,r])=>{let i=qm.sub(n).length();return i=i.sub(e).div(r.sub(e)),i=i.saturate(),i}),NSe=n=>{const e=n.shadow.camera,r=Nn("near","float",e).setGroup(jt),i=Nn("far","float",e).setGroup(jt),o=Nye(n);return ASe(o,r,i)},PSe=n=>{let e=VD.get(n);if(e===void 0){const r=n.isPointLight?NSe(n):null;e=new Mr,e.colorNode=Yt(0,0,0,1),e.depthNode=r,e.isShadowNodeMaterial=!0,e.blending=Pi,e.name="ShadowMaterial",VD.set(n,e)}return e},OSe=lt(({depthTexture:n,shadowCoord:e})=>gn(n,e.xy).compare(e.z)),ISe=lt(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(y,v)=>gn(n,y).compare(v),o=Nn("mapSize","vec2",r).setGroup(jt),s=Nn("radius","float",r).setGroup(jt),a=pt(1).div(o),l=a.x.negate().mul(s),c=a.y.negate().mul(s),u=a.x.mul(s),d=a.y.mul(s),f=l.div(2),h=c.div(2),p=u.div(2),g=d.div(2);return Di(i(e.xy.add(pt(l,c)),e.z),i(e.xy.add(pt(0,c)),e.z),i(e.xy.add(pt(u,c)),e.z),i(e.xy.add(pt(f,h)),e.z),i(e.xy.add(pt(0,h)),e.z),i(e.xy.add(pt(p,h)),e.z),i(e.xy.add(pt(l,0)),e.z),i(e.xy.add(pt(f,0)),e.z),i(e.xy,e.z),i(e.xy.add(pt(p,0)),e.z),i(e.xy.add(pt(u,0)),e.z),i(e.xy.add(pt(f,g)),e.z),i(e.xy.add(pt(0,g)),e.z),i(e.xy.add(pt(p,g)),e.z),i(e.xy.add(pt(l,d)),e.z),i(e.xy.add(pt(0,d)),e.z),i(e.xy.add(pt(u,d)),e.z)).mul(1/17)}),DSe=lt(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(d,f)=>gn(n,d).compare(f),o=Nn("mapSize","vec2",r).setGroup(jt),s=pt(1).div(o),a=s.x,l=s.y,c=e.xy,u=Ec(c.mul(o).add(.5));return c.subAssign(u.mul(s)),Di(i(c,e.z),i(c.add(pt(a,0)),e.z),i(c.add(pt(0,l)),e.z),i(c.add(s),e.z),jn(i(c.add(pt(a.negate(),0)),e.z),i(c.add(pt(a.mul(2),0)),e.z),u.x),jn(i(c.add(pt(a.negate(),l)),e.z),i(c.add(pt(a.mul(2),l)),e.z),u.x),jn(i(c.add(pt(0,l.negate())),e.z),i(c.add(pt(0,l.mul(2))),e.z),u.y),jn(i(c.add(pt(a,l.negate())),e.z),i(c.add(pt(a,l.mul(2))),e.z),u.y),jn(jn(i(c.add(pt(a.negate(),l.negate())),e.z),i(c.add(pt(a.mul(2),l.negate())),e.z),u.x),jn(i(c.add(pt(a.negate(),l.mul(2))),e.z),i(c.add(pt(a.mul(2),l.mul(2))),e.z),u.x),u.y)).mul(1/9)}),LSe=lt(({depthTexture:n,shadowCoord:e})=>{const r=Ae(1).toVar(),i=gn(n).uv(e.xy).rg,o=s5(e.z,i.x);return Tr(o.notEqual(Ae(1)),()=>{const s=e.z.sub(i.x),a=ro(0,i.y.mul(i.y));let l=a.div(a.add(s.mul(s)));l=ol(Gi(l,.3).div(.95-.3)),r.assign(ol(ro(o,l)))}),r}),FSe=lt(({samples:n,radius:e,size:r,shadowPass:i})=>{const o=Ae(0).toVar(),s=Ae(0).toVar(),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),l=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));Ss({start:cr(0),end:cr(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(Ae(u).mul(a)),f=i.uv(Di(L_.xy,pt(0,d).mul(e)).div(r)).x;o.addAssign(f),s.addAssign(f.mul(f))}),o.divAssign(n),s.divAssign(n);const c=IR(s.sub(o.mul(o)));return pt(o,c)}),USe=lt(({samples:n,radius:e,size:r,shadowPass:i})=>{const o=Ae(0).toVar(),s=Ae(0).toVar(),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),l=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));Ss({start:cr(0),end:cr(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(Ae(u).mul(a)),f=i.uv(Di(L_.xy,pt(d,0).mul(e)).div(r));o.addAssign(f.x),s.addAssign(Di(f.y.mul(f.y),f.x.mul(f.x)))}),o.divAssign(n),s.divAssign(n);const c=IR(s.sub(o.mul(o)));return pt(o,c)}),BSe=[OSe,ISe,DSe,LSe],Xv=new Z5;class iV extends Qt{static get type(){return"ShadowNode"}constructor(e,r=null){super(),this.light=e,this.shadow=r||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this.updateBeforeType=on.RENDER,this._node=null,this.isShadowNode=!0}setupShadowFilter(e,{filterFn:r,depthTexture:i,shadowCoord:o,shadow:s}){const a=o.x.greaterThanEqual(0).and(o.x.lessThanEqual(1)).and(o.y.greaterThanEqual(0)).and(o.y.lessThanEqual(1)).and(o.z.lessThanEqual(1)),l=r({depthTexture:i,shadowCoord:o,shadow:s});return a.select(l,Ae(1))}setupShadowCoord(e,r){const{shadow:i}=this,{renderer:o}=e,s=Nn("bias","float",i).setGroup(jt);let a=r,l;if(i.camera.isOrthographicCamera||o.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),l=a.z,o.coordinateSystem===Ru&&(l=l.mul(2).sub(1));else{const c=a.w;a=a.xy.div(c);const u=Nn("near","float",i.camera).setGroup(jt),d=Nn("far","float",i.camera).setGroup(jt);l=O5(c.negate(),u,d)}return a=Ie(a.x,a.y.oneMinus(),l.add(s)),a}getShadowFilterFn(e){return BSe[e]}setupShadow(e){const{renderer:r}=e,{light:i,shadow:o}=this,s=r.shadowMap.type,a=new wc(o.mapSize.width,o.mapSize.height);a.compareFunction=g_;const l=e.createRenderTarget(o.mapSize.width,o.mapSize.height);if(l.depthTexture=a,o.camera.updateProjectionMatrix(),s===yo){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:Mu,type:Qr}),this.vsmShadowMapHorizontal=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:Mu,type:Qr});const m=gn(a),x=gn(this.vsmShadowMapVertical.texture),_=Nn("blurSamples","float",o).setGroup(jt),S=Nn("radius","float",o).setGroup(jt),w=Nn("mapSize","vec2",o).setGroup(jt);let C=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Mr);C.fragmentNode=FSe({samples:_,radius:S,size:w,shadowPass:m}).context(e.getSharedContext()),C.name="VSMVertical",C=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Mr),C.fragmentNode=USe({samples:_,radius:S,size:w,shadowPass:x}).context(e.getSharedContext()),C.name="VSMHorizontal"}const c=Nn("intensity","float",o).setGroup(jt),u=Nn("normalBias","float",o).setGroup(jt),d=eV(i).mul(GD.add($R.mul(u))),f=this.setupShadowCoord(e,d),h=o.filterNode||this.getShadowFilterFn(r.shadowMap.type)||null;if(h===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const p=s===yo?this.vsmShadowMapHorizontal.texture:a,g=this.setupShadowFilter(e,{filterFn:h,shadowTexture:l.texture,depthTexture:p,shadowCoord:f,shadow:o}),y=gn(l.texture,f),v=jn(1,g.rgb.mix(y,1),c.mul(y.a)).toVar();return this.shadowMap=l,this.shadow.map=l,v}setup(e){if(e.renderer.shadowMap.enabled!==!1)return lt(({material:r})=>{GD.assign(r.shadowPositionNode||qm);let i=this._node;return i===null&&(this._node=i=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(i=e.material.receivedShadowNode(i)),i})()}renderShadow(e){const{shadow:r,shadowMap:i}=this,{renderer:o,scene:s}=e;i.setSize(r.mapSize.width,r.mapSize.height),o.render(s,r.camera)}updateShadow(e){const{shadowMap:r,light:i,shadow:o}=this,{renderer:s,scene:a,camera:l}=e,c=s.shadowMap.type,u=r.depthTexture.version;this._depthVersionCached=u;const d=a.overrideMaterial;a.overrideMaterial=PSe(i),o.camera.layers.mask=l.layers.mask;const f=s.getRenderTarget(),h=s.getRenderObjectFunction(),p=s.getMRT();s.setMRT(null),s.setRenderObjectFunction((g,...y)=>{(g.castShadow===!0||g.receiveShadow&&c===yo)&&s.renderObject(g,...y)}),s.setRenderTarget(r),this.renderShadow(e),s.setRenderObjectFunction(h),i.isPointLight!==!0&&c===yo&&this.vsmPass(s),s.setRenderTarget(f),s.setMRT(p),a.overrideMaterial=d}vsmPass(e){const{shadow:r}=this;this.vsmShadowMapVertical.setSize(r.mapSize.width,r.mapSize.height),this.vsmShadowMapHorizontal.setSize(r.mapSize.width,r.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),Xv.material=this.vsmMaterialVertical,Xv.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),Xv.material=this.vsmMaterialHorizontal,Xv.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.updateBeforeType=on.NONE}updateBefore(e){const{shadow:r}=this;(r.needsUpdate||r.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(r.needsUpdate=!1))}}const $Se=(n,e)=>nt(new iV(n,e));class ku extends gh{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Mt,this.colorNode=e&&e.colorNode||Xt(this.color).setGroup(jt),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=on.FRAME}getCacheKey(){return L4(super.getCacheKey(),this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadowNode(){return $Se(this.light)}setupShadow(e){const{renderer:r}=e;if(r.shadowMap.enabled===!1)return;let i=this.shadowColorNode;if(i===null){const o=this.light.shadow.shadowNode;let s;o!==void 0?s=nt(o):s=this.setupShadowNode(e),this.shadowNode=s,this.shadowColorNode=i=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=i}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const oV=lt(n=>{const{lightDistance:e,cutoffDistance:r,decayExponent:i}=n,o=e.pow(i).max(.01).reciprocal();return r.greaterThan(0).select(o.mul(e.div(r).pow4().oneMinus().clamp().pow2()),o)}),zSe=new Mt,$s=lt(([n,e])=>{const r=n.toVar(),i=Vo(r),o=il(1,ro(i.x,ro(i.y,i.z)));i.mulAssign(o),r.mulAssign(o.mul(e.mul(2).oneMinus()));const s=pt(r.xy).toVar(),l=e.mul(1.5).oneMinus();return Tr(i.z.greaterThanEqual(l),()=>{Tr(r.z.greaterThan(0),()=>{s.x.assign(Gi(4,r.x))})}).ElseIf(i.x.greaterThanEqual(l),()=>{const c=rx(r.x);s.x.assign(r.z.mul(c).add(c.mul(2)))}).ElseIf(i.y.greaterThanEqual(l),()=>{const c=rx(r.y);s.x.assign(r.x.add(c.mul(2)).add(2)),s.y.assign(r.z.mul(c).sub(2))}),pt(.125,.25).mul(s).add(pt(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),kSe=lt(({depthTexture:n,bd3D:e,dp:r,texelSize:i})=>gn(n,$s(e,i.y)).compare(r)),VSe=lt(({depthTexture:n,bd3D:e,dp:r,texelSize:i,shadow:o})=>{const s=Nn("radius","float",o).setGroup(jt),a=pt(-1,1).mul(s).mul(i.y);return gn(n,$s(e.add(a.xyy),i.y)).compare(r).add(gn(n,$s(e.add(a.yyy),i.y)).compare(r)).add(gn(n,$s(e.add(a.xyx),i.y)).compare(r)).add(gn(n,$s(e.add(a.yyx),i.y)).compare(r)).add(gn(n,$s(e,i.y)).compare(r)).add(gn(n,$s(e.add(a.xxy),i.y)).compare(r)).add(gn(n,$s(e.add(a.yxy),i.y)).compare(r)).add(gn(n,$s(e.add(a.xxx),i.y)).compare(r)).add(gn(n,$s(e.add(a.yxx),i.y)).compare(r)).mul(1/9)}),GSe=lt(({filterFn:n,depthTexture:e,shadowCoord:r,shadow:i})=>{const o=r.xyz.toVar(),s=o.length(),a=Xt("float").setGroup(jt).onRenderUpdate(()=>i.camera.near),l=Xt("float").setGroup(jt).onRenderUpdate(()=>i.camera.far),c=Nn("bias","float",i).setGroup(jt),u=Xt(i.mapSize).setGroup(jt),d=Ae(1).toVar();return Tr(s.sub(l).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const f=s.sub(a).div(l.sub(a)).toVar();f.addAssign(c);const h=o.normalize(),p=pt(1).div(u.mul(pt(4,2)));d.assign(n({depthTexture:e,bd3D:h,dp:f,texelSize:p,shadow:i}))}),d}),HD=new qt,vd=new je,ep=new je;class HSe extends iV{static get type(){return"PointShadowNode"}constructor(e,r=null){super(e,r)}getShadowFilterFn(e){return e===Yle?kSe:VSe}setupShadowCoord(e,r){return r}setupShadowFilter(e,{filterFn:r,shadowTexture:i,depthTexture:o,shadowCoord:s,shadow:a}){return GSe({filterFn:r,shadowTexture:i,depthTexture:o,shadowCoord:s,shadow:a})}renderShadow(e){const{shadow:r,shadowMap:i,light:o}=this,{renderer:s,scene:a}=e,l=r.getFrameExtents();ep.copy(r.mapSize),ep.multiply(l),i.setSize(ep.width,ep.height),vd.copy(r.mapSize);const c=s.autoClear,u=s.getClearColor(zSe),d=s.getClearAlpha();s.autoClear=!1,s.setClearColor(r.clearColor,r.clearAlpha),s.clear();const f=r.getViewportCount();for(let h=0;h<f;h++){const p=r.getViewport(h),g=vd.x*p.x,y=ep.y-vd.y-vd.y*p.y;HD.set(g,y,vd.x*p.z,vd.y*p.w),i.viewport.copy(HD),r.updateMatrices(o,h),s.render(a,r.camera)}s.autoClear=c,s.setClearColor(u,d)}}const jSe=(n,e)=>nt(new HSe(n,e)),WSe=lt(({color:n,lightViewPosition:e,cutoffDistance:r,decayExponent:i},o)=>{const s=o.context.lightingModel,a=e.sub(Fr),l=a.normalize(),c=a.length(),u=oV({lightDistance:c,cutoffDistance:r,decayExponent:i}),d=n.mul(u),f=o.context.reflectedLight;s.direct({lightDirection:l,lightColor:d,reflectedLight:f},o.stack,o)});class qSe extends ku{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Xt(0).setGroup(jt),this.decayExponentNode=Xt(0).setGroup(jt)}update(e){const{light:r}=this;super.update(e),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}setupShadowNode(){return jSe(this.light)}setup(e){super.setup(e),WSe({color:this.colorNode,lightViewPosition:WR(this.light),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode}).append()}}const XSe=lt(([n,e])=>{const r=n.x,i=n.y,o=n.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(i)),s=s.add(e.element(2).mul(2*.511664).mul(o)),s=s.add(e.element(3).mul(2*.511664).mul(r)),s=s.add(e.element(4).mul(2*.429043).mul(r).mul(i)),s=s.add(e.element(5).mul(2*.429043).mul(i).mul(o)),s=s.add(e.element(6).mul(o.mul(o).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(r).mul(o)),s=s.add(e.element(8).mul(.429043).mul(sn(r,r).sub(sn(i,i)))),s}),Ea=new jR;class KSe extends Tc{constructor(e,r){super(),this.renderer=e,this.nodes=r}update(e,r,i){const o=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)o._clearColor.getRGB(Ea,Xo),Ea.a=o._clearColor.a;else if(s.isColor===!0)s.getRGB(Ea,Xo),Ea.a=1,a=!0;else if(s.isNode===!0){const l=this.get(e),c=s;Ea.copy(o._clearColor);let u=l.backgroundMesh;if(u===void 0){const f=FR(Yt(c).mul(zD),{getUV:()=>sSe.mul(_5),getTextureLevel:()=>oSe});let h=M5();h=h.setZ(h.w);const p=new Mr;p.name="Background.material",p.side=er,p.depthTest=!1,p.depthWrite=!1,p.fog=!1,p.lights=!1,p.vertexNode=h,p.colorNode=f,l.backgroundMeshNode=f,l.backgroundMesh=u=new $r(new fh(1,32,32),p),u.frustumCulled=!1,u.name="Background.mesh",u.onBeforeRender=function(g,y,v){this.matrixWorld.copyPosition(v.matrixWorld)}}const d=c.getCacheKey();l.backgroundCacheKey!==d&&(l.backgroundMeshNode.node=Yt(c).mul(zD),l.backgroundMeshNode.needsUpdate=!0,u.material.needsUpdate=!0,l.backgroundCacheKey=d),r.unshift(u,u.geometry,u.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);if(o.autoClear===!0||a===!0){const l=i.clearColorValue;l.r=Ea.r,l.g=Ea.g,l.b=Ea.b,l.a=Ea.a,(o.backend.isWebGLBackend===!0||o.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),i.depthClearValue=o._clearDepth,i.stencilClearValue=o._clearStencil,i.clearColor=o.autoClearColor===!0,i.clearDepth=o.autoClearDepth===!0,i.clearStencil=o.autoClearStencil===!0}else i.clearColor=!1,i.clearDepth=!1,i.clearStencil=!1}}let YSe=0;class NE{constructor(e="",r=[],i=0,o=[]){this.name=e,this.bindings=r,this.index=i,this.bindingsReference=o,this.id=YSe++}}class QSe{constructor(e,r,i,o,s,a,l,c,u,d=[]){this.vertexShader=e,this.fragmentShader=r,this.computeShader=i,this.transforms=d,this.nodeAttributes=o,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=l,this.updateAfterNodes=c,this.monitor=u,this.usedTimes=0}createBindings(){const e=[];for(const r of this.bindings)if(r.bindings[0].groupNode.shared!==!0){const o=new NE(r.name,[],r.index,r);e.push(o);for(const s of r.bindings)o.bindings.push(s.clone())}else e.push(r);return e}}class jD{constructor(e,r,i=null){this.isNodeAttribute=!0,this.name=e,this.type=r,this.node=i}}class ZSe{constructor(e,r,i){this.isNodeUniform=!0,this.name=e,this.type=r,this.node=i.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class sV{constructor(e,r){this.isNodeVar=!0,this.name=e,this.type=r}}class JSe extends sV{constructor(e,r){super(e,r),this.needsInterpolation=!1,this.isNodeVarying=!0}}class e1e{constructor(e,r,i=""){this.name=e,this.type=r,this.code=i,Object.defineProperty(this,"isNodeCode",{value:!0})}}let t1e=0;class y1{constructor(e=null){this.id=t1e++,this.nodesData=new WeakMap,this.parent=e}getData(e){let r=this.nodesData.get(e);return r===void 0&&this.parent!==null&&(r=this.parent.getData(e)),r}setData(e,r){this.nodesData.set(e,r)}}class Vu{constructor(e,r){this.name=e,this.value=r,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class n1e extends Vu{constructor(e,r=0){super(e,r),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class r1e extends Vu{constructor(e,r=new je){super(e,r),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class i1e extends Vu{constructor(e,r=new Y){super(e,r),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class o1e extends Vu{constructor(e,r=new qt){super(e,r),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class s1e extends Vu{constructor(e,r=new Mt){super(e,r),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class a1e extends Vu{constructor(e,r=new Vt){super(e,r),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class l1e extends Vu{constructor(e,r=new fn){super(e,r),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class c1e extends n1e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class u1e extends r1e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class d1e extends i1e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class f1e extends o1e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class h1e extends s1e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class p1e extends a1e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class m1e extends l1e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const Vd=4,WD=[.125,.215,.35,.446,.526,.582],Qc=20,x1=new wg(-1,1,1,-1,0,1),g1e=new Ti(90,1),qD=new Mt;let _1=null,b1=0,S1=0;const Gc=(1+Math.sqrt(5))/2,yd=1/Gc,XD=[new Y(-Gc,yd,0),new Y(Gc,yd,0),new Y(-yd,0,Gc),new Y(yd,0,Gc),new Y(0,Gc,-yd),new Y(0,Gc,yd),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)],v1e=[3,1,5,0,4,2],w1=ebe(O_(),sl("faceIndex")).normalize(),qR=Ie(w1.x,w1.y.negate(),w1.z);class y1e{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,r=0,i=.1,o=100,s=null){if(this._setSize(256),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const l=s||this._allocateTargets();return this.fromSceneAsync(e,r,i,o,l),l}_1=this._renderer.getRenderTarget(),b1=this._renderer.getActiveCubeFace(),S1=this._renderer.getActiveMipmapLevel();const a=s||this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,o,a),r>0&&this._blur(a,0,0,r),this._applyPMREM(a),this._cleanup(a),a}async fromSceneAsync(e,r=0,i=.1,o=100,s=null){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,r,i,o,s)}fromEquirectangular(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromEquirectangularAsync(e,i),i}return this._fromTexture(e,r)}async fromEquirectangularAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}fromCubemap(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromCubemapAsync(e,r),i}return this._fromTexture(e,r)}async fromCubemapAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YD(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=QD(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===Jo||e.mapping===es?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_1,b1,S1),e.scissorTest=!1,Kv(e,0,0,e.width,e.height)}_fromTexture(e,r){this._setSizeFromTexture(e),_1=this._renderer.getRenderTarget(),b1=this._renderer.getActiveCubeFace(),S1=this._renderer.getActiveMipmapLevel();const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Br,minFilter:Br,generateMipmaps:!1,type:Qr,format:ni,colorSpace:Xo},o=KD(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=KD(e,r,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=x1e(s)),this._blurMaterial=_1e(s,e,r)}return o}async _compileMaterial(e){const r=new $r(this._lodPlanes[0],e);await this._renderer.compile(r,x1)}_sceneToCubeUV(e,r,i,o){const s=g1e;s.near=r,s.far=i;const a=[-1,1,-1,-1,-1,-1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear;c.getClearColor(qD),c.autoClear=!1;let d=this._backgroundBox;if(d===null){const p=new dh({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1});d=new $r(new $u,p)}let f=!1;const h=e.background;h?h.isColor&&(d.material.color.copy(h),e.background=null,f=!0):(d.material.color.copy(qD),f=!0),c.setRenderTarget(o),c.clear(),f&&c.render(d,s);for(let p=0;p<6;p++){const g=p%3;g===0?(s.up.set(0,a[p],0),s.lookAt(l[p],0,0)):g===1?(s.up.set(0,0,a[p]),s.lookAt(0,l[p],0)):(s.up.set(0,a[p],0),s.lookAt(0,0,l[p]));const y=this._cubeSize;Kv(o,g*y,p>2?y:0,y,y),c.render(e,s)}c.autoClear=u,e.background=h}_textureToCubeUV(e,r){const i=this._renderer,o=e.mapping===Jo||e.mapping===es;o?this._cubemapMaterial===null&&(this._cubemapMaterial=YD(e)):this._equirectMaterial===null&&(this._equirectMaterial=QD(e));const s=o?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const l=this._cubeSize;Kv(r,0,0,3*l,2*l),i.setRenderTarget(r),i.render(a,x1)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const o=this._lodPlanes.length;for(let s=1;s<o;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=XD[(o-s-1)%XD.length];this._blur(e,s-1,s,a,l)}r.autoClear=i}_blur(e,r,i,o,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,r,i,o,"latitudinal",s),this._halfBlur(a,e,i,i,o,"longitudinal",s)}_halfBlur(e,r,i,o,s,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=this._lodMeshes[o];f.material=u;const h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Qc-1),y=s/g,v=isFinite(s)?1+Math.floor(d*y):Qc;v>Qc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Qc}`);const m=[];let x=0;for(let E=0;E<Qc;++E){const T=E/y,M=Math.exp(-T*T/2);m.push(M),E===0?x+=M:E<v&&(x+=2*M)}for(let E=0;E<m.length;E++)m[E]=m[E]/x;e.texture.frame=(e.texture.frame||0)+1,h.envMap.value=e.texture,h.samples.value=v,h.weights.array=m,h.latitudinal.value=a==="latitudinal"?1:0,l&&(h.poleAxis.value=l);const{_lodMax:_}=this;h.dTheta.value=g,h.mipInt.value=_-i;const S=this._sizeLods[o],w=3*S*(o>_-Vd?o-_+Vd:0),C=4*(this._cubeSize-S);Kv(r,w,C,3*S,2*S),c.setRenderTarget(r),c.render(f,x1)}}function x1e(n){const e=[],r=[],i=[],o=[];let s=n;const a=n-Vd+1+WD.length;for(let l=0;l<a;l++){const c=Math.pow(2,s);r.push(c);let u=1/c;l>n-Vd?u=WD[l-n+Vd-1]:l===0&&(u=0),i.push(u);const d=1/(c-2),f=-d,h=1+d,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,y=6,v=3,m=2,x=1,_=new Float32Array(v*y*g),S=new Float32Array(m*y*g),w=new Float32Array(x*y*g);for(let E=0;E<g;E++){const T=E%3*2/3-1,M=E>2?0:-1,R=[T,M,0,T+2/3,M,0,T+2/3,M+1,0,T,M,0,T+2/3,M+1,0,T,M+1,0],N=v1e[E];_.set(R,v*y*N),S.set(p,m*y*N);const D=[N,N,N,N,N,N];w.set(D,x*y*N)}const C=new Bi;C.setAttribute("position",new ii(_,v)),C.setAttribute("uv",new ii(S,m)),C.setAttribute("faceIndex",new ii(w,x)),e.push(C),o.push(new $r(C,null)),s>Vd&&s--}return{lodPlanes:e,sizeLods:r,sigmas:i,lodMeshes:o}}function KD(n,e,r){const i=new uh(n,e,r);return i.texture.mapping=Cu,i.texture.name="PMREM.cubeUv",i.texture.isPMREMTexture=!0,i.scissorTest=!0,i}function Kv(n,e,r,i,o){n.viewport.set(e,r,i,o),n.scissor.set(e,r,i,o)}function XR(n){const e=new Mr;return e.depthTest=!1,e.depthWrite=!1,e.blending=Pi,e.name=`PMREM_${n}`,e}function _1e(n,e,r){const i=zl(new Array(Qc).fill(0)),o=Xt(new Y(0,1,0)),s=Xt(0),a=Ae(Qc),l=Xt(0),c=Xt(1),u=gn(null),d=Xt(0),f=Ae(1/e),h=Ae(1/r),p=Ae(n),g={n:a,latitudinal:l,weights:i,poleAxis:o,outputDirection:qR,dTheta:s,samples:c,envMap:u,mipInt:d,CUBEUV_TEXEL_WIDTH:f,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:p},y=XR("blur");return y.uniforms=g,y.fragmentNode=nbe({...g,latitudinal:l.equal(1)}),y}function YD(n){const e=XR("cubemap");return e.fragmentNode=Xm(n,qR),e}function QD(n){const e=XR("equirect");return e.fragmentNode=gn(n,L5(qR),0),e}const ZD=new WeakMap,b1e=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),Yv=n=>/e/g.test(n)?String(n).replace(/\+/g,""):(n=Number(n),n+(n%1?"":".0"));class aV{constructor(e,r,i){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=r,this.parser=i,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=p1(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new y1,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=ZD.get(this.renderer);return e===void 0&&(e=new la,ZD.set(this.renderer,e)),e}createRenderTarget(e,r,i){return new uh(e,r,i)}createCubeRenderTarget(e,r){return new F5(e,r)}createPMREMGenerator(){return new y1e(this.renderer)}includes(e){return this.nodes.includes(e)}_getBindGroup(e,r){const i=this.getBindGroupsCache(),o=[];let s=!0;for(const l of r)o.push(l),s=s&&l.groupNode.shared!==!0;let a;return s?(a=i.get(o),a===void 0&&(a=new NE(e,o,this.bindingsIndexes[e].group,o),i.set(o,a))):a=new NE(e,o,this.bindingsIndexes[e].group,o),a}getBindGroupArray(e,r){const i=this.bindings[r];let o=i[e];return o===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),i[e]=o=[]),o}getBindings(){let e=this.bindGroups;if(e===null){const r={},i=this.bindings;for(const o of eD)for(const s in i[o]){const a=i[o][s];(r[s]||(r[s]=[])).push(...a)}e=[];for(const o in r){const s=r[o],a=this._getBindGroup(o,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((r,i)=>r.bindings[0].groupNode.order-i.bindings[0].groupNode.order);for(let r=0;r<e.length;r++){const i=e[r];this.bindingsIndexes[i.name].group=r,i.index=r}}setHashNode(e,r){this.hashNodes[r]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==on.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const r=e.getUpdateBeforeType(),i=e.getUpdateAfterType();r!==on.NONE&&this.updateBeforeNodes.push(e.getSelf()),i!==on.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Br||e.magFilter===tf||e.magFilter===qs||e.magFilter===Wi||e.minFilter===Br||e.minFilter===tf||e.minFilter===qs||e.minFilter===Wi}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,r){return this.flowNodes[e].push(r),r}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,r=!0){const i=this.getDataFromNode(e);return i.cache===void 0&&(i.cache=new y1(r?this.getCache():null)),i.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const r=this.getDataFromNode(e);return r.usageCount=r.usageCount===void 0?1:r.usageCount+1,r.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateConst(e,r=null){if(r===null&&(e==="float"||e==="int"||e==="uint"?r=0:e==="bool"?r=!1:e==="color"?r=new Mt:e==="vec2"?r=new je:e==="vec3"?r=new Y:e==="vec4"&&(r=new qt)),e==="float")return Yv(r);if(e==="int")return`${Math.round(r)}`;if(e==="uint")return r>=0?`${Math.round(r)}u`:"0u";if(e==="bool")return r?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${Yv(r.r)}, ${Yv(r.g)}, ${Yv(r.b)} )`;const i=this.getTypeLength(e),o=this.getComponentType(e),s=a=>this.generateConst(o,a);if(i===2)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)} )`;if(i===3)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)}, ${s(r.z)} )`;if(i===4)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)}, ${s(r.z)}, ${s(r.w)} )`;if(i>4&&r&&(r.isMatrix3||r.isMatrix4))return`${this.getType(e)}( ${r.elements.map(s).join(", ")} )`;if(i>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,r){const i=this.attributes;for(const s of i)if(s.name===e)return s;const o=new jD(e,r);return i.push(o),o}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const r=e.type;if(e.isDataTexture){if(r===Kr)return"int";if(r===rr)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const r=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return r===null?null:r[1]==="b"?"bool":r[1]==="i"?"int":r[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,r="float"){if(e===1)return r;const i=hve(e);return(r==="float"?"":r[0])+i}getTypeFromArray(e){return b1e.get(e.constructor)}getTypeFromAttribute(e){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array,o=e.itemSize,s=e.normalized;let a;return!(e instanceof $k)&&s!==!0&&(a=this.getTypeFromArray(i)),this.getTypeFromLength(o,a)}getTypeLength(e){const r=this.getVectorType(e),i=/vec([2-4])/.exec(r);return i!==null?Number(i[1]):r==="float"||r==="bool"||r==="int"||r==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,r){return this.getTypeFromLength(this.getTypeLength(e),r)}getIntegerType(e){const r=this.getComponentType(e);return r==="int"||r==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=p1(this.stack),this.stacks.push(V4()||this.stack),Zy(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,Zy(this.stacks.pop()),e}getDataFromNode(e,r=this.shaderStage,i=null){i=i===null?e.isGlobal(this)?this.globalCache:this.cache:i;let o=i.getData(e);return o===void 0&&(o={},i.setData(e,o)),o[r]===void 0&&(o[r]={}),o[r]}getNodeProperties(e,r="any"){const i=this.getDataFromNode(e,r);return i.properties||(i.properties={outputNode:null})}getBufferAttributeFromNode(e,r){const i=this.getDataFromNode(e);let o=i.bufferAttribute;if(o===void 0){const s=this.uniforms.index++;o=new jD("nodeAttribute"+s,r,e),this.bufferAttributes.push(o),i.bufferAttribute=o}return o}getStructTypeFromNode(e,r=this.shaderStage){const i=this.getDataFromNode(e,r);if(i.structType===void 0){const o=this.structs.index++;e.name=`StructType${o}`,this.structs[r].push(e),i.structType=e}return e}getUniformFromNode(e,r,i=this.shaderStage,o=null){const s=this.getDataFromNode(e,i,this.globalCache);let a=s.uniform;if(a===void 0){const l=this.uniforms.index++;a=new ZSe(o||"nodeUniform"+l,r,e),this.uniforms[i].push(a),s.uniform=a}return a}getVarFromNode(e,r=null,i=e.getNodeType(this),o=this.shaderStage){const s=this.getDataFromNode(e,o);let a=s.variable;if(a===void 0){const l=this.vars[o]||(this.vars[o]=[]);r===null&&(r="nodeVar"+l.length),a=new sV(r,i),l.push(a),s.variable=a}return a}getVaryingFromNode(e,r=null,i=e.getNodeType(this)){const o=this.getDataFromNode(e,"any");let s=o.varying;if(s===void 0){const a=this.varyings,l=a.length;r===null&&(r="nodeVarying"+l),s=new JSe(r,i),a.push(s),o.varying=s}return s}getCodeFromNode(e,r,i=this.shaderStage){const o=this.getDataFromNode(e);let s=o.code;if(s===void 0){const a=this.codes[i]||(this.codes[i]=[]),l=a.length;s=new e1e("nodeCode"+l,r),a.push(s),o.code=s}return s}addFlowCodeHierarchy(e,r){const{flowCodes:i,flowCodeBlock:o}=this.getDataFromNode(e);let s=!0,a=r;for(;a;){if(o.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const l of i)this.addLineFlowCode(l)}addLineFlowCodeBlock(e,r,i){const o=this.getDataFromNode(e),s=o.flowCodes||(o.flowCodes=[]),a=o.flowCodeBlock||(o.flowCodeBlock=new WeakMap);s.push(r),a.set(i,!0)}addLineFlowCode(e,r=null){return e===""?this:(r!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(r,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const r=e.getNodeType(this),i=this.flowChildNode(e,r);return this.flowsData.set(e,i),i}buildFunctionNode(e){const r=new xSe,i=this.currentFunctionNode;return this.currentFunctionNode=r,r.code=this.buildFunctionCode(e),this.currentFunctionNode=i,r}flowShaderNode(e){const r=e.layout,i={[Symbol.iterator](){let a=0;const l=Object.values(this);return{next:()=>({value:l[a],done:a++>=l.length})}}};for(const a of r.inputs)i[a.name]=new eSe(a.type,a.name);e.layout=null;const o=e.call(i),s=this.flowStagesNode(o,r.type);return e.layout=r,s}flowStagesNode(e,r=null){const i=this.flow,o=this.vars,s=this.cache,a=this.buildStage,l=this.stack,c={code:""};this.flow=c,this.vars={},this.cache=new y1,this.stack=p1();for(const u of JI)this.setBuildStage(u),c.result=e.build(this,r);return c.vars=this.getVars(this.shaderStage),this.flow=i,this.vars=o,this.cache=s,this.stack=l,this.setBuildStage(a),c}getFunctionOperator(){return null}flowChildNode(e,r=null){const i=this.flow,o={code:""};return this.flow=o,o.result=e.build(this,r),this.flow=i,o}flowNodeFromShaderStage(e,r,i=null,o=null){const s=this.shaderStage;this.setShaderStage(e);const a=this.flowChildNode(r,i);return o!==null&&(a.code+=`${this.tab+o} = ${a.result};
`),this.flowCode[e]=this.flowCode[e]+a.code,this.setShaderStage(s),a}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,r){return`${this.getType(e)} ${r}`}getVars(e){let r="";const i=this.vars[e];if(i!==void 0)for(const o of i)r+=`${this.getVar(o.type,o.name)}; `;return r}getUniforms(){console.warn("Abstract function.")}getCodes(e){const r=this.codes[e];let i="";if(r!==void 0)for(const o of r)i+=o.code+`
`;return i}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:r,renderer:i}=this;if(r!==null){let o=i.library.fromMaterial(r);o===null&&(console.error(`NodeMaterial: Material "${r.type}" is not compatible.`),o=new Mr),o.build(this)}else this.addFlow("compute",e);for(const o of JI){this.setBuildStage(o),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of eD){this.setShaderStage(s);const a=this.flowNodes[s];for(const l of a)o==="generate"?this.flowNode(l):l.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,r){if(r==="float"||r==="int"||r==="uint")return new c1e(e);if(r==="vec2"||r==="ivec2"||r==="uvec2")return new u1e(e);if(r==="vec3"||r==="ivec3"||r==="uvec3")return new d1e(e);if(r==="vec4"||r==="ivec4"||r==="uvec4")return new f1e(e);if(r==="color")return new h1e(e);if(r==="mat3")return new p1e(e);if(r==="mat4")return new m1e(e);throw new Error(`Uniform "${r}" not declared.`)}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}format(e,r,i){if(r=this.getVectorType(r),i=this.getVectorType(i),r===i||i===null||this.isReference(i))return e;const o=this.getTypeLength(r),s=this.getTypeLength(i);return o===16&&s===9?`${this.getType(i)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:o===9&&s===4?`${this.getType(i)}(${e}[0].xy, ${e}[1].xy)`:o>4||s>4||s===0?e:o===s?`${this.getType(i)}( ${e} )`:o>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(r)),i):s===4&&o>1?`${this.getType(i)}( ${this.format(e,r,"vec3")}, 1.0 )`:o===2?`${this.getType(i)}( ${this.format(e,r,"vec2")}, 0.0 )`:(o===1&&s>1&&r!==this.getComponentType(i)&&(e=`${this.getType(this.getComponentType(i))}( ${e} )`),`${this.getType(i)}( ${e} )`)}getSignature(){return`// Three.js r${sh} - Node System
`}}class JD{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,r){let i=e.get(r);return i===void 0&&(i={renderMap:new WeakMap,frameMap:new WeakMap},e.set(r,i)),i}updateBeforeNode(e){const r=e.getUpdateBeforeType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateBeforeMap,i);o.get(i)!==this.frameId&&e.updateBefore(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateBeforeMap,i);o.get(i)!==this.renderId&&e.updateBefore(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const r=e.getUpdateAfterType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateAfterMap,i);o.get(i)!==this.frameId&&e.updateAfter(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateAfterMap,i);o.get(i)!==this.renderId&&e.updateAfter(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.updateAfter(this)}updateNode(e){const r=e.getUpdateType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateMap,i);o.get(i)!==this.frameId&&e.update(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateMap,i);o.get(i)!==this.renderId&&e.update(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class KR{constructor(e,r,i=null,o="",s=!1){this.type=e,this.name=r,this.count=i,this.qualifier=o,this.isConst=s}}KR.isNodeFunctionInput=!0;class S1e extends ku{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const r=e.context.lightingModel,i=this.colorNode,o=nV(this.light),s=e.context.reflectedLight;r.direct({lightDirection:o,lightColor:i,reflectedLight:s},e.stack,e)}}const C1=new fn,Qv=new fn;let tp=null;class w1e extends ku{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Xt(new Y).setGroup(jt),this.halfWidth=Xt(new Y).setGroup(jt),this.updateType=on.RENDER}update(e){super.update(e);const{light:r}=this,i=e.camera.matrixWorldInverse;Qv.identity(),C1.copy(r.matrixWorld),C1.premultiply(i),Qv.extractRotation(C1),this.halfWidth.value.set(r.width*.5,0,0),this.halfHeight.value.set(0,r.height*.5,0),this.halfWidth.value.applyMatrix4(Qv),this.halfHeight.value.applyMatrix4(Qv)}setup(e){super.setup(e);let r,i;e.isAvailable("float32Filterable")?(r=gn(tp.LTC_FLOAT_1),i=gn(tp.LTC_FLOAT_2)):(r=gn(tp.LTC_HALF_1),i=gn(tp.LTC_HALF_2));const{colorNode:o,light:s}=this,a=e.context.lightingModel,l=WR(s),c=e.context.reflectedLight;a.directRectArea({lightColor:o,lightPosition:l,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:c,ltc_1:r,ltc_2:i},e.stack,e)}static setLTC(e){tp=e}}class lV extends ku{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Xt(0).setGroup(jt),this.penumbraCosNode=Xt(0).setGroup(jt),this.cutoffDistanceNode=Xt(0).setGroup(jt),this.decayExponentNode=Xt(0).setGroup(jt)}update(e){super.update(e);const{light:r}=this;this.coneCosNode.value=Math.cos(r.angle),this.penumbraCosNode.value=Math.cos(r.angle*(1-r.penumbra)),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}getSpotAttenuation(e){const{coneCosNode:r,penumbraCosNode:i}=this;return Au(r,i,e)}setup(e){super.setup(e);const r=e.context.lightingModel,{colorNode:i,cutoffDistanceNode:o,decayExponentNode:s,light:a}=this,l=WR(a).sub(Fr),c=l.normalize(),u=c.dot(nV(a)),d=this.getSpotAttenuation(u),f=l.length(),h=oV({lightDistance:f,cutoffDistance:o,decayExponent:s});let p=i.mul(d).mul(h);if(a.map){const y=ESe(a),v=gn(a.map,y.xy).onRenderUpdate(()=>a.map);p=y.mul(2).sub(1).abs().lessThan(1).all().select(p.mul(v),p)}const g=e.context.reflectedLight;r.direct({lightDirection:c,lightColor:p,reflectedLight:g},e.stack,e)}}class C1e extends lV{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const r=this.light.iesMap;let i=null;if(r&&r.isTexture===!0){const o=e.acos().mul(1/Math.PI);i=gn(r,pt(o,0),0).r}else i=super.getSpotAttenuation(e);return i}}class E1e extends ku{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class T1e extends ku{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=tV(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Xt(new Mt).setGroup(jt)}update(e){const{light:r}=this;super.update(e),this.lightPositionNode.object3d=r,this.groundColorNode.value.copy(r.groundColor).multiplyScalar(r.intensity)}setup(e){const{colorNode:r,groundColorNode:i,lightDirectionNode:o}=this,a=Os.dot(o).mul(.5).add(.5),l=jn(i,r,a);e.context.irradiance.addAssign(l)}}class M1e extends ku{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const r=[];for(let i=0;i<9;i++)r.push(new Y);this.lightProbe=zl(r)}update(e){const{light:r}=this;super.update(e);for(let i=0;i<9;i++)this.lightProbe.array[i].copy(r.sh.coefficients[i]).multiplyScalar(r.intensity)}setup(e){const r=XSe(_5,this.lightProbe);e.context.irradiance.addAssign(r)}}class cV{parseFunction(){console.warn("Abstract function.")}}class YR{constructor(e,r,i="",o=""){this.type=e,this.inputs=r,this.name=i,this.precision=o}getCode(){console.warn("Abstract function.")}}YR.isNodeFunction=!0;const R1e=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,A1e=/[a-z_0-9]+/ig,eL="#pragma main",N1e=n=>{n=n.trim();const e=n.indexOf(eL),r=e!==-1?n.slice(e+eL.length):n,i=r.match(R1e);if(i!==null&&i.length===5){const o=i[4],s=[];let a=null;for(;(a=A1e.exec(o))!==null;)s.push(a);const l=[];let c=0;for(;c<s.length;){const g=s[c][0]==="const";g===!0&&c++;let y=s[c][0];y==="in"||y==="out"||y==="inout"?c++:y="";const v=s[c++][0];let m=Number.parseInt(s[c][0]);Number.isNaN(m)===!1?c++:m=null;const x=s[c++][0];l.push(new KR(v,x,m,y,g))}const u=r.substring(i[0].length),d=i[3]!==void 0?i[3]:"",f=i[2],h=i[1]!==void 0?i[1]:"",p=e!==-1?n.slice(0,e):"";return{type:f,inputs:l,name:d,precision:h,inputsCode:o,blockCode:u,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class P1e extends YR{constructor(e){const{type:r,inputs:i,name:o,precision:s,inputsCode:a,blockCode:l,headerCode:c}=N1e(e);super(r,i,o,s),this.inputsCode=a,this.blockCode=l,this.headerCode=c}getCode(e=this.name){let r;const i=this.blockCode;if(i!==""){const{type:o,inputsCode:s,headerCode:a,precision:l}=this;let c=`${o} ${e} ( ${s.trim()} )`;l!==""&&(c=`${l} ${c}`),r=a+c+i}else r="";return r}}class O1e extends cV{parseFunction(e){return new P1e(e)}}const tL=new WeakMap;class I1e extends Tc{constructor(e,r){super(),this.renderer=e,this.backend=r,this.nodeFrame=new JD,this.nodeBuilderCache=new Map,this.callHashCache=new la,this.groupsData=new la}updateGroup(e){const r=e.groupNode,i=r.name;if(i===W4.name)return!0;if(i===jt.name){const a=this.get(e),l=this.nodeFrame.renderId;return a.renderId!==l?(a.renderId=l,!0):!1}if(i===Xve.name){const a=this.get(e),l=this.nodeFrame.frameId;return a.frameId!==l?(a.frameId=l,!0):!1}const o=[r,e];let s=this.groupsData.get(o);return s===void 0&&this.groupsData.set(o,s={}),s.version!==r.version?(s.version=r.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const{nodeBuilderCache:o}=this,s=this.getForRenderCacheKey(e);if(i=o.get(s),i===void 0){const a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,a.build(),i=this._createNodeBuilderState(a),o.set(s,i)}i.usedTimes++,r.nodeBuilderState=i}return i}delete(e){if(e.isRenderObject){const r=this.get(e).nodeBuilderState;r.usedTimes--,r.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const o=this.backend.createNodeBuilder(e,this.renderer);o.build(),i=this._createNodeBuilderState(o),r.nodeBuilderState=i}return i}_createNodeBuilderState(e){return new QSe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getCacheKey(e,r){const i=[e,r],o=this.renderer.info.calls;let s=this.callHashCache.get(i);if(s===void 0||s.callId!==o){const a=this.getEnvironmentNode(e),l=this.getFogNode(e),c=[];r&&c.push(r.getCacheKey(!0)),a&&c.push(a.getCacheKey()),l&&c.push(l.getCacheKey()),c.push(this.renderer.shadowMap.enabled?1:0),s={callId:o,cacheKey:D4(c)},this.callHashCache.set(i,s)}return s.cacheKey}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const r=this.get(e),i=e.background;if(i){const o=e.backgroundBlurriness===0&&r.backgroundBlurriness>0||e.backgroundBlurriness>0&&r.backgroundBlurriness===0;if(r.background!==i||o){let s=null;if(i.isCubeTexture===!0||i.mapping===fc||i.mapping===hc||i.mapping===Cu)if(e.backgroundBlurriness>0||i.mapping===Cu)s=q5(i);else{let a;i.isCubeTexture===!0?a=Xm(i):a=gn(i),s=B5(a)}else i.isTexture===!0?s=gn(i,Km.flipY()).setUpdateMatrix(!0):i.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",i);r.backgroundNode=s,r.background=i,r.backgroundBlurriness=e.backgroundBlurriness}}else r.backgroundNode&&(delete r.backgroundNode,delete r.background)}updateFog(e){const r=this.get(e),i=e.fog;if(i){if(r.fog!==i){let o=null;if(i.isFogExp2){const s=Nn("color","color",i).setGroup(jt),a=Nn("density","float",i).setGroup(jt);o=wSe(s,a)}else if(i.isFog){const s=Nn("color","color",i).setGroup(jt),a=Nn("near","float",i).setGroup(jt),l=Nn("far","float",i).setGroup(jt);o=bSe(s,a,l)}else console.error("WebGPUNodes: Unsupported fog configuration.",i);r.fogNode=o,r.fog=i}}else delete r.fogNode,delete r.fog}updateEnvironment(e){const r=this.get(e),i=e.environment;if(i){if(r.environment!==i){let o=null;i.isCubeTexture===!0?o=Xm(i):i.isTexture===!0?o=gn(i):console.error("Nodes: Unsupported environment configuration.",i),r.environmentNode=o,r.environment=i}}else r.environmentNode&&(delete r.environmentNode,delete r.environment)}getNodeFrame(e=this.renderer,r=null,i=null,o=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=r,a.object=i,a.camera=o,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return tL.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const r=this.renderer,i=this.getOutputCacheKey(),o=gn(e,Km).renderOutput(r.toneMapping,r.currentColorSpace);return tL.set(e,i),o}updateBefore(e){const r=e.getNodeBuilderState();for(const i of r.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(i)}updateAfter(e){const r=e.getNodeBuilderState();for(const i of r.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(i)}updateForCompute(e){const r=this.getNodeFrame(),i=this.getForCompute(e);for(const o of i.updateNodes)r.updateNode(o)}updateForRender(e){const r=this.getNodeFrameForRender(e),i=e.getNodeBuilderState();for(const o of i.updateNodes)r.updateNode(o)}needsRefresh(e){const r=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,r)}dispose(){super.dispose(),this.nodeFrame=new JD,this.nodeBuilderCache=new Map}}const E1=new vs;class sx{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",e===null?(this.intersectionPlanes=[],this.unionPlanes=[],this.viewNormalMatrix=new Vt,this.clippingGroupContexts=new WeakMap,this.shadowPass=!1):(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix),this.parentVersion=null}projectPlanes(e,r,i){const o=e.length;for(let s=0;s<o;s++){E1.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=r[i+s],l=E1.normal;a.x=-l.x,a.y=-l.y,a.z=-l.z,a.w=E1.constant}}updateGlobal(e,r){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowNodeMaterial,this.viewMatrix=r.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,r){let i=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==r.clipIntersection&&(this.clipIntersection=r.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const o=r.clippingPlanes,s=o.length;let a,l;if(this.clipIntersection?(a=this.intersectionPlanes,l=e.intersectionPlanes.length):(a=this.unionPlanes,l=e.unionPlanes.length),a.length!==l+s){a.length=l+s;for(let c=0;c<s;c++)a[l+c]=new qt;i=!0}this.projectPlanes(o,a,l),i&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let r=this.clippingGroupContexts.get(e);return r===void 0&&(r=new sx(this),this.clippingGroupContexts.set(e,r)),r.update(this,e),r}get unionClippingCount(){return this.unionPlanes.length}}class D1e{constructor(e,r){this.scene=e,this.camera=r}clone(){return Object.assign(new this.constructor,this)}}class L1e{constructor(){this.lists=new la}get(e,r){const i=this.lists,o=[e,r];let s=i.get(o);return s===void 0&&(s=new D1e(e,r),i.set(o,s)),s}dispose(){this.lists=new la}}class uV{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let r=null;const i=this.getMaterialNodeClass(e.type);if(i!==null){r=new i;for(const o in e)r[o]=e[o]}return r}addToneMapping(e,r){this.addType(e,r,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,r){this.addType(e,r,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,r){this.addClass(e,r,this.lightNodes)}addType(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r=="function"||typeof r=="object")throw new Error(`Base class ${r} is not a class.`);i.set(r,e)}addClass(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r!="function")throw new Error(`Base class ${r.name} is not a class.`);i.set(r,e)}}const F1e=new rV;class U1e extends la{constructor(){super()}createNode(e=[]){return new rV().setLights(e)}getNode(e,r){if(e.isQuadMesh)return F1e;const i=[e,r];let o=this.get(i);return o===void 0&&(o=this.createNode(),this.set(i,o)),o}}const nL=new aR,Zv=new je,T1=new qt,M1=new b_,Jv=new fn,Ml=new qt;class B1e{constructor(e,r={}){this.isRenderer=!0;const{logarithmicDepthBuffer:i=!1,alpha:o=!0,depth:s=!0,stencil:a=!1,antialias:l=!1,samples:c=0,getFallback:u=null}=r;this.domElement=e.getDomElement(),this.backend=e,this.samples=c||l===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=o,this.logarithmicDepthBuffer=i,this.outputColorSpace=Lt,this.toneMapping=to,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new zbe,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new uV,this.lighting=new U1e,this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new qt(0,0,this._width,this._height),this._scissor=new qt(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new Z5(new Mr),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const d=this.alpha===!0?0:1;this._clearColor=new jR(0,0,0,d),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:OM},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(f,h,p)=>{await this.compileAsync(f,h);const g=this._renderLists.get(f,h),y=this._renderContexts.get(f,h,this._renderTarget),v=f.overrideMaterial||p.material,m=this._objects.get(p,v,f,h,g.lightsNode,y,y.clippingContext),{fragmentShader:x,vertexShader:_}=m.getNodeBuilderState();return{fragmentShader:x,vertexShader:_}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,r)=>{let i=this.backend;try{await i.init(this)}catch(o){if(this._getFallback!==null)try{this.backend=i=this._getFallback(o),await i.init(this)}catch(s){r(s);return}else{r(o);return}}this._nodes=new I1e(this,i),this._animation=new Nbe(this._nodes,this.info),this._attributes=new Ube(i),this._background=new KSe(this,this._nodes),this._geometries=new $be(this._attributes,this.info),this._textures=new Jbe(this,i,this.info),this._pipelines=new Hbe(i,this._nodes),this._bindings=new jbe(i,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new Dbe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new Xbe(this.lighting),this._bundles=new L1e,this._renderContexts=new Qbe,this._animation.start(),this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,r,i=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const o=this._nodes.nodeFrame,s=o.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,c=this._compilationPromises,u=e.isScene===!0?e:nL;i===null&&(i=e);const d=this._renderTarget,f=this._renderContexts.get(i,r,d),h=this._activeMipmapLevel,p=[];this._currentRenderContext=f,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=p,o.renderId++,o.update(),f.depth=this.depth,f.stencil=this.stencil,f.clippingContext||(f.clippingContext=new sx),f.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,d);const g=this._renderLists.get(e,r);if(g.begin(),this._projectObject(e,r,0,g,f.clippingContext),i!==e&&i.traverseVisible(function(_){_.isLight&&_.layers.test(r.layers)&&g.pushLight(_)}),g.finish(),d!==null){this._textures.updateRenderTarget(d,h);const _=this._textures.get(d);f.textures=_.textures,f.depthTexture=_.depthTexture}else f.textures=null,f.depthTexture=null;this._nodes.updateScene(u),this._background.update(u,g,f);const y=g.opaque,v=g.transparent,m=g.transparentDoublePass,x=g.lightsNode;this.opaque===!0&&y.length>0&&this._renderObjects(y,r,u,x),this.transparent===!0&&v.length>0&&this._renderTransparents(v,m,r,u,x),o.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=l,this._compilationPromises=c,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(p)}async renderAsync(e,r){this._initialized===!1&&await this.init();const i=this._renderScene(e,r);await this.backend.resolveTimestampAsync(i,"render")}async waitForGPU(){await this.backend.waitForGPU()}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}_onDeviceLost(e){let r=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(r+=`
Reason: ${e.reason}`),console.error(r),this._isDeviceLost=!0}_renderBundle(e,r,i){const{bundleGroup:o,camera:s,renderList:a}=e,l=this._currentRenderContext,c=this._bundles.get(o,s),u=this.backend.get(c);u.renderContexts===void 0&&(u.renderContexts=new Set);const d=o.version!==u.version,f=u.renderContexts.has(l)===!1||d;if(u.renderContexts.add(l),f){this.backend.beginBundle(l),(u.renderObjects===void 0||d)&&(u.renderObjects=[]),this._currentRenderBundle=c;const h=a.opaque;this.opaque===!0&&h.length>0&&this._renderObjects(h,s,r,i),this._currentRenderBundle=null,this.backend.finishBundle(l,c),u.version=o.version}else{const{renderObjects:h}=u;for(let p=0,g=h.length;p<g;p++){const y=h[p];this._nodes.needsRefresh(y)&&(this._nodes.updateBefore(y),this._nodes.updateForRender(y),this._bindings.updateForRender(y),this._nodes.updateAfter(y))}}this.backend.addBundle(l,c)}render(e,r){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,r);this._renderScene(e,r)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:r}=this;if(e!==to===!1&&r!==Xo===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(Zv),{depth:l,stencil:c}=this;let u=this._frameBufferTarget;return u===null&&(u=new uh(s,a,{depthBuffer:l,stencilBuffer:c,type:Qr,format:ni,colorSpace:Xo,generateMipmaps:!1,minFilter:Br,magFilter:Br,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u),u.depthBuffer=l,u.stencilBuffer=c,u.setSize(s,a),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u}_renderScene(e,r,i=!0){if(this._isDeviceLost===!0)return;const o=i?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,l=this._currentRenderContext,c=this._currentRenderObjectFunction,u=e.isScene===!0?e:nL,d=this._renderTarget,f=this._activeCubeFace,h=this._activeMipmapLevel;let p;o!==null?(p=o,this.setRenderTarget(p)):p=d;const g=this._renderContexts.get(e,r,p);this._currentRenderContext=g,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const y=this.coordinateSystem;r.coordinateSystem!==y&&(r.coordinateSystem=y,r.updateProjectionMatrix()),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),r.parent===null&&r.matrixWorldAutoUpdate===!0&&r.updateMatrixWorld();let v=this._viewport,m=this._scissor,x=this._pixelRatio;p!==null&&(v=p.viewport,m=p.scissor,x=1),this.getDrawingBufferSize(Zv),T1.set(0,0,Zv.width,Zv.height);const _=v.minDepth===void 0?0:v.minDepth,S=v.maxDepth===void 0?1:v.maxDepth;g.viewportValue.copy(v).multiplyScalar(x).floor(),g.viewportValue.width>>=h,g.viewportValue.height>>=h,g.viewportValue.minDepth=_,g.viewportValue.maxDepth=S,g.viewport=g.viewportValue.equals(T1)===!1,g.scissorValue.copy(m).multiplyScalar(x).floor(),g.scissor=this._scissorTest&&g.scissorValue.equals(T1)===!1,g.scissorValue.width>>=h,g.scissorValue.height>>=h,g.clippingContext||(g.clippingContext=new sx),g.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,p),Jv.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),M1.setFromProjectionMatrix(Jv,y);const w=this._renderLists.get(e,r);if(w.begin(),this._projectObject(e,r,0,w,g.clippingContext),w.finish(),this.sortObjects===!0&&w.sort(this._opaqueSort,this._transparentSort),p!==null){this._textures.updateRenderTarget(p,h);const N=this._textures.get(p);g.textures=N.textures,g.depthTexture=N.depthTexture,g.width=N.width,g.height=N.height,g.renderTarget=p,g.depth=p.depthBuffer,g.stencil=p.stencilBuffer}else g.textures=null,g.depthTexture=null,g.width=this.domElement.width,g.height=this.domElement.height,g.depth=this.depth,g.stencil=this.stencil;g.width>>=h,g.height>>=h,g.activeCubeFace=f,g.activeMipmapLevel=h,g.occlusionQueryCount=w.occlusionQueryCount,this._nodes.updateScene(u),this._background.update(u,w,g),this.backend.beginRender(g);const{bundles:C,lightsNode:E,transparentDoublePass:T,transparent:M,opaque:R}=w;if(C.length>0&&this._renderBundles(C,u,E),this.opaque===!0&&R.length>0&&this._renderObjects(R,r,u,E),this.transparent===!0&&M.length>0&&this._renderTransparents(M,T,r,u,E),this.backend.finishRender(g),s.renderId=a,this._currentRenderContext=l,this._currentRenderObjectFunction=c,o!==null){this.setRenderTarget(d,f,h);const N=this._quad;this._nodes.hasOutputChange(p.texture)&&(N.material.fragmentNode=this._nodes.getOutputNode(p.texture),N.material.needsUpdate=!0),this._renderScene(N,N.camera,!1)}return u.onAfterRender(this,e,r,p),g}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,r,i){this._width=e,this._height=r,this._pixelRatio=i,this.domElement.width=Math.floor(e*i),this.domElement.height=Math.floor(r*i),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setSize(e,r,i=!0){this._width=e,this._height=r,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(r*this._pixelRatio),i===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=r+"px"),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const r=this._scissor;return e.x=r.x,e.y=r.y,e.width=r.width,e.height=r.height,e}setScissor(e,r,i,o){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,r,i,o)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,r,i,o,s=0,a=1){const l=this._viewport;e.isVector4?l.copy(e):l.set(e,r,i,o),l.minDepth=s,l.maxDepth=a}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,r=1){this._clearColor.set(e),this._clearColor.a=r}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const r=this._currentRenderContext;return r&&this.backend.isOccluded(r,e)}clear(e=!0,r=!0,i=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,r,i);const o=this._renderTarget||this._getFrameBufferTarget();let s=null;if(o!==null&&(this._textures.updateRenderTarget(o),s=this._textures.get(o)),this.backend.clear(e,r,i,s),o!==null&&this._renderTarget===null){const a=this._quad;this._nodes.hasOutputChange(o.texture)&&(a.material.fragmentNode=this._nodes.getOutputNode(o.texture),a.material.needsUpdate=!0),this._renderScene(a,a.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,r=!0,i=!0){this._initialized===!1&&await this.init(),this.clear(e,r,i)}clearColorAsync(){return this.clearAsync(!0,!1,!1)}clearDepthAsync(){return this.clearAsync(!1,!0,!1)}clearStencilAsync(){return this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?to:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?Xo:this.outputColorSpace}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,r=0,i=0){this._renderTarget=e,this._activeCubeFace=r,this._activeMipmapLevel=i}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this.isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const r=this._nodes.nodeFrame,i=r.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,r.renderId=this.info.calls;const o=this.backend,s=this._pipelines,a=this._bindings,l=this._nodes,c=Array.isArray(e)?e:[e];if(c[0]===void 0||c[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");o.beginCompute(e);for(const u of c){if(s.has(u)===!1){const h=()=>{u.removeEventListener("dispose",h),s.delete(u),a.delete(u),l.delete(u)};u.addEventListener("dispose",h);const p=u.onInitFunction;p!==null&&p.call(u,{renderer:this})}l.updateForCompute(u),a.updateForCompute(u);const d=a.getForCompute(u),f=s.getForCompute(u,d);o.compute(e,u,d,f)}o.finishCompute(e),r.renderId=i}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e),await this.backend.resolveTimestampAsync(e,"compute")}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){if(this._initialized===!1)return console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),!1;this._textures.updateTexture(e)}copyFramebufferToTexture(e,r=null){if(r!==null)if(r.isVector2)r=Ml.set(r.x,r.y,e.image.width,e.image.height).floor();else if(r.isVector4)r=Ml.copy(r).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else r=Ml.set(0,0,e.image.width,e.image.height);let i=this._currentRenderContext,o;i!==null?o=i.renderTarget:(o=this._renderTarget||this._getFrameBufferTarget(),o!==null&&(this._textures.updateRenderTarget(o),i=this._textures.get(o))),this._textures.updateTexture(e,{renderTarget:o}),this.backend.copyFramebufferToTexture(e,i,r)}copyTextureToTexture(e,r,i=null,o=null,s=0){this._textures.updateTexture(e),this._textures.updateTexture(r),this.backend.copyTextureToTexture(e,r,i,o,s)}readRenderTargetPixelsAsync(e,r,i,o,s,a=0,l=0){return this.backend.copyTextureToBuffer(e.textures[a],r,i,o,s,l)}_projectObject(e,r,i,o,s){if(e.visible===!1)return;if(e.layers.test(r.layers)){if(e.isGroup)i=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(r);else if(e.isLight)o.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||M1.intersectsSprite(e)){this.sortObjects===!0&&Ml.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Jv);const{geometry:c,material:u}=e;u.visible&&o.push(e,c,u,i,Ml.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||M1.intersectsObject(e))){const{geometry:c,material:u}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),Ml.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Jv)),Array.isArray(u)){const d=c.groups;for(let f=0,h=d.length;f<h;f++){const p=d[f],g=u[p.materialIndex];g&&g.visible&&o.push(e,c,g,i,Ml.z,p,s)}}else u.visible&&o.push(e,c,u,i,Ml.z,null,s)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const c=o;o=this._renderLists.get(e,r),o.begin(),c.pushBundle({bundleGroup:e,camera:r,renderList:o}),o.finish()}const l=e.children;for(let c=0,u=l.length;c<u;c++)this._projectObject(l[c],r,i,o,s)}_renderBundles(e,r,i){for(const o of e)this._renderBundle(o,r,i)}_renderTransparents(e,r,i,o,s){if(r.length>0){for(const{material:a}of r)a.side=er;this._renderObjects(r,i,o,s,"backSide");for(const{material:a}of r)a.side=Ps;this._renderObjects(e,i,o,s);for(const{material:a}of r)a.side=Ri}else this._renderObjects(e,i,o,s)}_renderObjects(e,r,i,o,s=null){for(let a=0,l=e.length;a<l;a++){const c=e[a],{object:u,geometry:d,material:f,group:h,clippingContext:p}=c;if(r.isArrayCamera){const g=r.cameras;for(let y=0,v=g.length;y<v;y++){const m=g[y];if(u.layers.test(m.layers)){const x=m.viewport,_=x.minDepth===void 0?0:x.minDepth,S=x.maxDepth===void 0?1:x.maxDepth,w=this._currentRenderContext.viewportValue;w.copy(x).multiplyScalar(this._pixelRatio).floor(),w.minDepth=_,w.maxDepth=S,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(u,i,m,d,f,h,o,p,s)}}}else this._currentRenderObjectFunction(u,i,r,d,f,h,o,p,s)}}renderObject(e,r,i,o,s,a,l,c=null,u=null){let d,f,h;if(e.onBeforeRender(this,r,i,o,s,a),r.overrideMaterial!==null){const p=r.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(d=p.positionNode,p.positionNode=s.positionNode),p.alphaTest=s.alphaTest,p.alphaMap=s.alphaMap,p.isShadowNodeMaterial&&(p.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(h=p.depthNode,p.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(f=p.colorNode,p.colorNode=s.castShadowNode)),s=p}s.transparent===!0&&s.side===Ri&&s.forceSinglePass===!1?(s.side=er,this._handleObjectFunction(e,s,r,i,l,a,c,"backSide"),s.side=Ps,this._handleObjectFunction(e,s,r,i,l,a,c,u),s.side=Ri):this._handleObjectFunction(e,s,r,i,l,a,c,u),d!==void 0&&(r.overrideMaterial.positionNode=d),h!==void 0&&(r.overrideMaterial.depthNode=h),f!==void 0&&(r.overrideMaterial.colorNode=f),e.onAfterRender(this,r,i,o,s,a)}_renderObjectDirect(e,r,i,o,s,a,l,c){const u=this._objects.get(e,r,i,o,s,this._currentRenderContext,l,c);u.drawRange=e.geometry.drawRange,u.group=a;const d=this._nodes.needsRefresh(u);d&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.scene),this.backend.draw(u,this.info),d&&this._nodes.updateAfter(u)}_createObjectPipeline(e,r,i,o,s,a,l){const c=this._objects.get(e,r,i,o,s,this._currentRenderContext,a,l);this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class QR{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function $1e(n){return n+(Vl-n%Vl)%Vl}class dV extends QR{constructor(e,r=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=r}get byteLength(){return $1e(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class fV extends dV{constructor(e,r=null){super(e,r),this.isUniformBuffer=!0}}let z1e=0;class hV extends fV{constructor(e,r){super("UniformBuffer_"+z1e++,e?e.value:null),this.nodeUniform=e,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class k1e extends fV{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const r=this.uniforms.indexOf(e);return r!==-1&&this.uniforms.splice(r,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const r=this.byteLength;e=new Float32Array(new ArrayBuffer(r)),this._buffer=e}return e}get byteLength(){let e=0;for(let r=0,i=this.uniforms.length;r<i;r++){const o=this.uniforms[r],{boundary:s,itemSize:a}=o,l=e%Vl,c=Vl-l;l!==0&&c-s<0?e+=Vl-l:l%s!==0&&(e+=l%s),o.offset=e/this.bytesPerElement,e+=a*this.bytesPerElement}return Math.ceil(e/Vl)*Vl}update(){let e=!1;for(const r of this.uniforms)this.updateByType(r)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s]!==o){const l=this._getBufferForType(a);l[s]=i[s]=o,r=!0}return r}updateVector2(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,r=!0}return r}updateVector3(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y||i[s+2]!==o.z){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,l[s+2]=i[s+2]=o.z,r=!0}return r}updateVector4(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y||i[s+2]!==o.z||i[s+4]!==o.w){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,l[s+2]=i[s+2]=o.z,l[s+3]=i[s+3]=o.w,r=!0}return r}updateColor(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset;if(i[s+0]!==o.r||i[s+1]!==o.g||i[s+2]!==o.b){const a=this.buffer;a[s+0]=i[s+0]=o.r,a[s+1]=i[s+1]=o.g,a[s+2]=i[s+2]=o.b,r=!0}return r}updateMatrix3(e){let r=!1;const i=this.values,o=e.getValue().elements,s=e.offset;if(i[s+0]!==o[0]||i[s+1]!==o[1]||i[s+2]!==o[2]||i[s+4]!==o[3]||i[s+5]!==o[4]||i[s+6]!==o[5]||i[s+8]!==o[6]||i[s+9]!==o[7]||i[s+10]!==o[8]){const a=this.buffer;a[s+0]=i[s+0]=o[0],a[s+1]=i[s+1]=o[1],a[s+2]=i[s+2]=o[2],a[s+4]=i[s+4]=o[3],a[s+5]=i[s+5]=o[4],a[s+6]=i[s+6]=o[5],a[s+8]=i[s+8]=o[6],a[s+9]=i[s+9]=o[7],a[s+10]=i[s+10]=o[8],r=!0}return r}updateMatrix4(e){let r=!1;const i=this.values,o=e.getValue().elements,s=e.offset;return G1e(i,o,s)===!1&&(this.buffer.set(o,s),V1e(i,o,s),r=!0),r}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function V1e(n,e,r){for(let i=0,o=e.length;i<o;i++)n[r+i]=e[i]}function G1e(n,e,r){for(let i=0,o=e.length;i<o;i++)if(n[r+i]!==e[i])return!1;return!0}let H1e=0;class pV extends k1e{constructor(e,r){super(e),this.id=H1e++,this.groupNode=r,this.isNodeUniformsGroup=!0}getNodes(){const e=[];for(const r of this.uniforms){const i=r.nodeUniform.node;if(!i)throw new Error("NodeUniformsGroup: Uniform has no node.");e.push(i)}return e}}let j1e=0;class W1e extends QR{constructor(e,r){super(e),this.id=j1e++,this.texture=r,this.version=r?r.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:r}=this;return e!==this.generation?(this.generation=e,!0):r.isVideoTexture}update(){const{texture:e,version:r}=this;return r!==e.version?(this.version=e.version,!0):!1}}class $_ extends W1e{constructor(e,r,i,o=null){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i,this.access=o}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class mV extends $_{constructor(e,r,i,o){super(e,r,i,o),this.isSampledCubeTexture=!0}}class gV extends $_{constructor(e,r,i,o){super(e,r,i,o),this.isSampledTexture3D=!0}}const q1e={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},X1e={low:"lowp",medium:"mediump",high:"highp"},rL={swizzleAssign:!0,storageBuffer:!1},iL=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class K1e extends aV{constructor(e,r){super(e,r,new O1e),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]},this.useComparisonMethod=!0}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==_o}getMethod(e){return q1e[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),o=[];for(const a of r.inputs)o.push(this.getType(a.type)+" "+a.name);return`${this.getType(r.type)} ${r.name}( ${o.join(", ")} ) {

	${i.vars}

${i.code}
	return ${i.result};

}`}setupPBO(e){const r=e.value;if(r.pbo===void 0){const i=r.array,o=r.count*r.itemSize,{itemSize:s}=r,a=r.array.constructor.name.toLowerCase().includes("int");let l=a?ah:Sg;s===2?l=a?lh:Mu:s===3?l=a?rce:bg:s===4&&(l=a?ch:ni);const c={Float32Array:pr,Uint8Array:mi,Uint16Array:Cs,Uint32Array:rr,Int8Array:uu,Int16Array:du,Int32Array:Kr,Uint8ClampedArray:mi},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(o/s))));let d=Math.ceil(o/s/u);u*d*s<o&&d++;const f=u*d*s,h=new i.constructor(f);h.set(i,0),r.array=h;const p=new oue(r.array,u,d,l,c[r.array.constructor.name]||pr);p.needsUpdate=!0,p.isPBOTexture=!0;const g=new Rg(p,null,null);g.setPrecision("high"),r.pboNode=g,r.pbo=g.value,this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,r=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?r.charAt(0)+"_"+e.name:super.getPropertyName(e,r)}generatePBO(e){const{node:r,indexNode:i}=e,o=r.value;if(this.renderer.backend.has(o)){const d=this.renderer.backend.get(o);d.pbo=o.pbo}const s=this.getUniformFromNode(o.pboNode,"texture",this.shaderStage,this.context.label),a=this.getPropertyName(s);this.increaseUsage(i);const l=i.build(this,"uint"),c=this.getDataFromNode(e);let u=c.propertyName;if(u===void 0){const d=this.getVarFromNode(e);u=this.getPropertyName(d);const f=this.getDataFromNode(r);let h=f.propertySizeName;h===void 0&&(h=u+"Size",this.getVarFromNode(r,h,"uint"),this.addLineFlowCode(`${h} = uint( textureSize( ${a}, 0 ).x )`,e),f.propertySizeName=h);const{itemSize:p}=o,g="."+mh.join("").slice(0,p),y=`ivec2(${l} % ${h}, ${l} / ${h})`,v=this.generateTextureLoad(null,a,y,null,"0");let m="vec4";o.pbo.type===rr?m="uvec4":o.pbo.type===Kr&&(m="ivec4"),this.addLineFlowCode(`${u} = ${m}(${v})${g}`,e),c.propertyName=u}return u}generateTextureLoad(e,r,i,o,s="0"){return o?`texelFetch( ${r}, ivec3( ${i}, ${o} ), ${s} )`:`texelFetch( ${r}, ${i}, ${s} )`}generateTexture(e,r,i,o){return e.isDepthTexture?`texture( ${r}, ${i} ).x`:(o&&(i=`vec3( ${i}, ${o} )`),`texture( ${r}, ${i} )`)}generateTextureLevel(e,r,i,o){return`textureLod( ${r}, ${i}, ${o} )`}generateTextureBias(e,r,i,o){return`texture( ${r}, ${i}, ${o} )`}generateTextureGrad(e,r,i,o){return`textureGrad( ${r}, ${i}, ${o[0]}, ${o[1]} )`}generateTextureCompare(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`texture( ${r}, vec3( ${i}, ${o} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const o of i)r.push(`${this.getVar(o.type,o.name)};`);return r.join(`
	`)}getUniforms(e){const r=this.uniforms[e],i=[],o={};for(const a of r){let l=null,c=!1;if(a.type==="texture"){const d=a.node.value;let f="";d.isDataTexture===!0&&(d.type===rr?f="u":d.type===Kr&&(f="i")),d.compareFunction?l=`sampler2DShadow ${a.name};`:d.isDataArrayTexture===!0||d.isCompressedArrayTexture===!0?l=`${f}sampler2DArray ${a.name};`:l=`${f}sampler2D ${a.name};`}else if(a.type==="cubeTexture")l=`samplerCube ${a.name};`;else if(a.type==="texture3D")l=`sampler3D ${a.name};`;else if(a.type==="buffer"){const d=a.node,f=this.getType(d.bufferType),h=d.bufferCount,p=h>0?h:"";l=`${d.name} {
	${f} ${a.name}[${p}];
};
`}else l=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,c=!0;const u=a.node.precision;if(u!==null&&(l=X1e[u]+" "+l),c){l="	"+l;const d=a.groupNode.name;(o[d]||(o[d]=[])).push(l)}else l="uniform "+l,i.push(l)}let s="";for(const a in o){const l=o[a];s+=this._getGLSLUniformStruct(e+"_"+a,l.join(`
`))+`
`}return s+=i.join(`
`),s}getTypeFromAttribute(e){let r=super.getTypeFromAttribute(e);if(/^[iu]/.test(r)&&e.gpuType!==Kr){let i=e;e.isInterleavedBufferAttribute&&(i=e.data);const o=i.array;o instanceof Uint32Array||o instanceof Int32Array||(r=r.slice(1))}return r}getAttributes(e){let r="";if(e==="vertex"||e==="compute"){const i=this.getAttributesArray();let o=0;for(const s of i)r+=`layout( location = ${o++} ) in ${s.type} ${s.name};
`}return r}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let o=0;o<i.length;o++){const s=i[o];r.push(`layout( location = ${o} ) out ${s} m${o};`)}return r.join(`
`)}getStructs(e){const r=[],i=this.structs[e];if(i.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let o=0,s=i.length;o<s;o++){const a=i[o];let l=`
`;l+=this.getStructMembers(a),l+=`
`,r.push(l)}return r.join(`

`)}getVaryings(e){let r="";const i=this.varyings;if(e==="vertex"||e==="compute")for(const o of i){e==="compute"&&(o.needsInterpolation=!0);const s=this.getType(o.type),a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";r+=`${a}${o.needsInterpolation?"out":"/*out*/"} ${s} ${o.name};
`}else if(e==="fragment"){for(const o of i)if(o.needsInterpolation){const s=this.getType(o.type),a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";r+=`${a}in ${s} ${o.name};
`}}for(const o of this.builtins[e])r+=`${o};
`;return r}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((i,o)=>i*o,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,r,i=this.shaderStage){const o=this.extensions[i]||(this.extensions[i]=new Map);o.has(e)===!1&&o.set(e,{name:e,behavior:r})}getExtensions(e){const r=[];if(e==="vertex"){const o=this.renderer.backend.extensions;this.object.isBatchedMesh&&o.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const i=this.extensions[e];if(i!==void 0)for(const{name:o,behavior:s}of i.values())r.push(`#extension ${o} : ${s}`);return r.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let r=rL[e];if(r===void 0){let i;switch(r=!1,e){case"float32Filterable":i="OES_texture_float_linear";break;case"clipDistance":i="WEBGL_clip_cull_distance";break}if(i!==void 0){const o=this.renderer.backend.extensions;o.has(i)&&(o.get(i),r=!0)}rL[e]=r}return r}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}registerTransform(e,r){this.transforms.push({varyingName:e,attributeNode:r})}getTransforms(){const e=this.transforms;let r="";for(let i=0;i<e.length;i++){const o=e[i],s=this.getPropertyName(o.attributeNode);r+=`${o.varyingName} = ${s};
	`}return r}_getGLSLUniformStruct(e,r){return`
layout( std140 ) uniform ${e} {
${r}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${iL}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${iL}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){let i=`// code

`;i+=this.flowCode[r];const o=this.flowNodes[r],s=o[o.length-1];for(const l of o){const c=this.getFlowData(l),u=l.name;u&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${u}
	`),i+=`${c.code}
	`,l===s&&r!=="compute"&&(i+=`// result
	`,r==="vertex"?(i+="gl_Position = ",i+=`${c.result};`):r==="fragment"&&(l.outputNode.isOutputStructNode||(i+="fragColor = ",i+=`${c.result};`)))}const a=e[r];a.extensions=this.getExtensions(r),a.uniforms=this.getUniforms(r),a.attributes=this.getAttributes(r),a.varyings=this.getVaryings(r),a.vars=this.getVars(r),a.structs=this.getStructs(r),a.codes=this.getCodes(r),a.transforms=this.getTransforms(r),a.flow=i}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,r,i,o=null){const s=super.getUniformFromNode(e,r,i,o),a=this.getDataFromNode(e,i,this.globalCache);let l=a.uniformGPU;if(l===void 0){const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture")l=new $_(s.name,s.node,c),d.push(l);else if(r==="cubeTexture")l=new mV(s.name,s.node,c),d.push(l);else if(r==="texture3D")l=new gV(s.name,s.node,c),d.push(l);else if(r==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const f=new hV(e,c);f.name=e.name,d.push(f),l=f}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new pV(i+"_"+u,c),f[u]=h,d.push(h)),l=this.getNodeUniform(s,r),h.addUniform(l)}a.uniformGPU=l}return s}}let R1=null,A1=null,xd=null;class vV{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(){}finish(){}draw(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}createRenderPipeline(){}createComputePipeline(){}destroyPipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}createDefaultTexture(){}createTexture(){}copyTextureToBuffer(){}createAttribute(){}createIndexAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}resolveTimestampAsync(){}hasFeatureAsync(){}hasFeature(){}getInstanceCount(e){const{object:r,geometry:i}=e;return i.isInstancedBufferGeometry?i.instanceCount:r.count>1?r.count:1}getDrawingBufferSize(){return R1=R1||new je,this.renderer.getDrawingBufferSize(R1)}getScissor(){return A1=A1||new qt,this.renderer.getScissor(A1)}setScissorTest(){}getClearColor(){const e=this.renderer;return xd=xd||new jR,e.getClearColor(xd),xd.getRGB(xd,this.renderer.currentColorSpace),xd}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:Fk(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${sh} webgpu`),this.domElement=e),e}set(e,r){this.data.set(e,r)}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let Y1e=0;class Q1e{constructor(e,r){this.buffers=[e.bufferGPU,r],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class Z1e{constructor(e){this.backend=e}createAttribute(e,r){const i=this.backend,{gl:o}=i,s=e.array,a=e.usage||o.STATIC_DRAW,l=e.isInterleavedBufferAttribute?e.data:e,c=i.get(l);let u=c.bufferGPU;u===void 0&&(u=this._createBuffer(o,r,s,a),c.bufferGPU=u,c.bufferType=r,c.version=l.version);let d;if(s instanceof Float32Array)d=o.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?d=o.HALF_FLOAT:d=o.UNSIGNED_SHORT;else if(s instanceof Int16Array)d=o.SHORT;else if(s instanceof Uint32Array)d=o.UNSIGNED_INT;else if(s instanceof Int32Array)d=o.INT;else if(s instanceof Int8Array)d=o.BYTE;else if(s instanceof Uint8Array)d=o.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)d=o.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let f={bufferGPU:u,bufferType:r,type:d,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:d===o.INT||d===o.UNSIGNED_INT||e.gpuType===Kr,id:Y1e++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const h=this._createBuffer(o,r,s,a);f=new Q1e(f,h)}i.set(e,f)}updateAttribute(e){const r=this.backend,{gl:i}=r,o=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=r.get(s),l=a.bufferType,c=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(i.bindBuffer(l,a.bufferGPU),c.length===0)i.bufferSubData(l,0,o);else{for(let u=0,d=c.length;u<d;u++){const f=c[u];i.bufferSubData(l,f.start*o.BYTES_PER_ELEMENT,o,f.start,f.count)}s.clearUpdateRanges()}i.bindBuffer(l,null),a.version=s.version}destroyAttribute(e){const r=this.backend,{gl:i}=r;e.isInterleavedBufferAttribute&&r.delete(e.data);const o=r.get(e);i.deleteBuffer(o.bufferGPU),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,{gl:i}=r,o=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=r.get(o),a=e.array,l=a.byteLength;i.bindBuffer(i.COPY_READ_BUFFER,s);const c=i.createBuffer();i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.bufferData(i.COPY_WRITE_BUFFER,l,i.STREAM_READ),i.copyBufferSubData(i.COPY_READ_BUFFER,i.COPY_WRITE_BUFFER,0,0,l),await r.utils._clientWaitAsync();const u=new e.array.constructor(a.length);return i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.getBufferSubData(i.COPY_WRITE_BUFFER,0,u),i.deleteBuffer(c),i.bindBuffer(i.COPY_READ_BUFFER,null),i.bindBuffer(i.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,r,i,o){const s=e.createBuffer();return e.bindBuffer(r,s),e.bufferData(r,i,o),e.bindBuffer(r,null),s}}let oL=!1,N1,np;class J1e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},oL===!1&&(this._init(this.gl),oL=!0)}_init(e){N1={[xo]:e.FUNC_ADD,[DM]:e.FUNC_SUBTRACT,[LM]:e.FUNC_REVERSE_SUBTRACT},np={[FM]:e.ZERO,[UM]:e.ONE,[BM]:e.SRC_COLOR,[Cm]:e.SRC_ALPHA,[HM]:e.SRC_ALPHA_SATURATE,[VM]:e.DST_COLOR,[zM]:e.DST_ALPHA,[$M]:e.ONE_MINUS_SRC_COLOR,[Em]:e.ONE_MINUS_SRC_ALPHA,[GM]:e.ONE_MINUS_DST_COLOR,[kM]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:r}=this;r[e]!==!0&&(this.gl.enable(e),r[e]=!0)}disable(e){const{enabled:r}=this;r[e]!==!1&&(this.gl.disable(e),r[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:r}=this;e?r.frontFace(r.CW):r.frontFace(r.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:r}=this;e!==Sk?(this.enable(r.CULL_FACE),e!==this.currentCullFace&&(e===lE?r.cullFace(r.BACK):e===wk?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):this.disable(r.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:r,gl:i}=this;e!==r&&(i.lineWidth(e),this.currentLineWidth=e)}setBlending(e,r,i,o,s,a,l,c){const{gl:u}=this;if(e===Pi){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==IM){if(e!==this.currentBlending||c!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==xo||this.currentBlendEquationAlpha!==xo)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=xo,this.currentBlendEquationAlpha=xo),c)switch(e){case qo:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case wu:u.blendFunc(u.ONE,u.ONE);break;case Mf:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case Rf:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case qo:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case wu:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case Mf:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case Rf:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=c}return}s=s||r,a=a||i,l=l||o,(r!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(N1[r],N1[s]),this.currentBlendEquation=r,this.currentBlendEquationAlpha=s),(i!==this.currentBlendSrc||o!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||l!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(np[i],np[o],np[a],np[l]),this.currentBlendSrc=i,this.currentBlendDst=o,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=l),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:r}=this;e?this.enable(r.DEPTH_TEST):this.disable(r.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:r}=this;switch(e){case Tm:r.depthFunc(r.NEVER);break;case Mm:r.depthFunc(r.ALWAYS);break;case Rm:r.depthFunc(r.LESS);break;case dc:r.depthFunc(r.LEQUAL);break;case Am:r.depthFunc(r.EQUAL);break;case Nm:r.depthFunc(r.GEQUAL);break;case Pm:r.depthFunc(r.GREATER);break;case Om:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:r}=this;e?this.enable(r.STENCIL_TEST):this.disable(r.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,r,i){(this.currentStencilFunc!==e||this.currentStencilRef!==r||this.currentStencilFuncMask!==i)&&(this.gl.stencilFunc(e,r,i),this.currentStencilFunc=e,this.currentStencilRef=r,this.currentStencilFuncMask=i)}setStencilOp(e,r,i){(this.currentStencilFail!==e||this.currentStencilZFail!==r||this.currentStencilZPass!==i)&&(this.gl.stencilOp(e,r,i),this.currentStencilFail=e,this.currentStencilZFail=r,this.currentStencilZPass=i)}setMaterial(e,r,i){const{gl:o}=this;e.side===Ri?this.disable(o.CULL_FACE):this.enable(o.CULL_FACE);let s=e.side===er;r&&(s=!s),this.setFlipSided(s),e.blending===qo&&e.transparent===!1?this.setBlending(Pi):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(o.SAMPLE_ALPHA_TO_COVERAGE):this.disable(o.SAMPLE_ALPHA_TO_COVERAGE),i>0&&this.currentClippingPlanes!==i)for(let c=0;c<8;c++)c<i?this.enable(12288+c):this.disable(12288+c)}setPolygonOffset(e,r,i){const{gl:o}=this;e?(this.enable(o.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==r||this.currentPolygonOffsetUnits!==i)&&(o.polygonOffset(r,i),this.currentPolygonOffsetFactor=r,this.currentPolygonOffsetUnits=i)):this.disable(o.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,r){const{gl:i,currentBoundFramebuffers:o}=this;return o[e]!==r?(i.bindFramebuffer(e,r),o[e]=r,e===i.DRAW_FRAMEBUFFER&&(o[i.FRAMEBUFFER]=r),e===i.FRAMEBUFFER&&(o[i.DRAW_FRAMEBUFFER]=r),!0):!1}drawBuffers(e,r){const{gl:i}=this;let o=[],s=!1;if(e.textures!==null){o=this.currentDrawbuffers.get(r),o===void 0&&(o=[],this.currentDrawbuffers.set(r,o));const a=e.textures;if(o.length!==a.length||o[0]!==i.COLOR_ATTACHMENT0){for(let l=0,c=a.length;l<c;l++)o[l]=i.COLOR_ATTACHMENT0+l;o.length=a.length,s=!0}}else o[0]!==i.BACK&&(o[0]=i.BACK,s=!0);s&&i.drawBuffers(o)}activeTexture(e){const{gl:r,currentTextureSlot:i,maxTextures:o}=this;e===void 0&&(e=r.TEXTURE0+o-1),i!==e&&(r.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,r,i){const{gl:o,currentTextureSlot:s,currentBoundTextures:a,maxTextures:l}=this;i===void 0&&(s===null?i=o.TEXTURE0+l-1:i=s);let c=a[i];c===void 0&&(c={type:void 0,texture:void 0},a[i]=c),(c.type!==e||c.texture!==r)&&(s!==i&&(o.activeTexture(i),this.currentTextureSlot=i),o.bindTexture(e,r),c.type=e,c.texture=r)}bindBufferBase(e,r,i){const{gl:o}=this,s=`${e}-${r}`;return this.currentBoundBufferBases[s]!==i?(o.bindBufferBase(e,r,i),this.currentBoundBufferBases[s]=i,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:r,currentBoundTextures:i}=this,o=i[r];o!==void 0&&o.type!==void 0&&(e.bindTexture(o.type,null),o.type=void 0,o.texture=void 0)}}class ewe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,r=_o){const{gl:i,extensions:o}=this;let s;if(e===mi)return i.UNSIGNED_BYTE;if(e===h_)return i.UNSIGNED_SHORT_4_4_4_4;if(e===p_)return i.UNSIGNED_SHORT_5_5_5_1;if(e===m_)return i.UNSIGNED_INT_5_9_9_9_REV;if(e===uu)return i.BYTE;if(e===du)return i.SHORT;if(e===Cs)return i.UNSIGNED_SHORT;if(e===Kr)return i.INT;if(e===rr)return i.UNSIGNED_INT;if(e===pr)return i.FLOAT;if(e===Qr)return i.HALF_FLOAT;if(e===WM)return i.ALPHA;if(e===bg)return i.RGB;if(e===ni)return i.RGBA;if(e===qM)return i.LUMINANCE;if(e===XM)return i.LUMINANCE_ALPHA;if(e===Js)return i.DEPTH_COMPONENT;if(e===ia)return i.DEPTH_STENCIL;if(e===Sg)return i.RED;if(e===ah)return i.RED_INTEGER;if(e===Mu)return i.RG;if(e===lh)return i.RG_INTEGER;if(e===ch)return i.RGBA_INTEGER;if(e===fu||e===nc||e===rc||e===ic)if(r===Lt)if(s=o.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===fu)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===nc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===rc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===ic)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=o.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===fu)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===nc)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===rc)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===ic)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===Im||e===Dm||e===Lm||e===Fm)if(s=o.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===Im)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Dm)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Lm)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Fm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===Um||e===Af||e===Nf)if(s=o.get("WEBGL_compressed_texture_etc"),s!==null){if(e===Um||e===Af)return r===Lt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===Nf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===Pf||e===Of||e===If||e===Df||e===Lf||e===Ff||e===Uf||e===Bf||e===$f||e===zf||e===kf||e===Vf||e===Gf||e===Hf)if(s=o.get("WEBGL_compressed_texture_astc"),s!==null){if(e===Pf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===Of)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===If)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Df)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===Lf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===Ff)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===Uf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Bf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===$f)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===zf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===kf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===Vf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Gf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Hf)return r===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===hu)if(s=o.get("EXT_texture_compression_bptc"),s!==null){if(e===hu)return r===Lt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===KM||e===Bm||e===$m||e===zm)if(s=o.get("EXT_texture_compression_rgtc"),s!==null){if(e===hu)return s.COMPRESSED_RED_RGTC1_EXT;if(e===Bm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===$m)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===zm)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===ra?i.UNSIGNED_INT_24_8:i[e]!==void 0?i[e]:null}_clientWaitAsync(){const{gl:e}=this,r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((i,o)=>{function s(){const a=e.clientWaitSync(r,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(r),o();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(r),i()}s()})}}let sL=!1,e0,P1,aL;class twe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},sL===!1&&(this._init(this.gl),sL=!0)}_init(e){e0={[Eu]:e.REPEAT,[Ws]:e.CLAMP_TO_EDGE,[Tu]:e.MIRRORED_REPEAT},P1={[qn]:e.NEAREST,[zy]:e.NEAREST_MIPMAP_NEAREST,[qs]:e.NEAREST_MIPMAP_LINEAR,[Br]:e.LINEAR,[tf]:e.LINEAR_MIPMAP_NEAREST,[Wi]:e.LINEAR_MIPMAP_LINEAR},aL={[YM]:e.NEVER,[tR]:e.ALWAYS,[g_]:e.LESS,[v_]:e.LEQUAL,[QM]:e.EQUAL,[eR]:e.GEQUAL,[ZM]:e.GREATER,[JM]:e.NOTEQUAL}}filterFallback(e){const{gl:r}=this;return e===qn||e===zy||e===qs?r.NEAREST:r.LINEAR}getGLTextureType(e){const{gl:r}=this;let i;return e.isCubeTexture===!0?i=r.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?i=r.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?i=r.TEXTURE_3D:i=r.TEXTURE_2D,i}getInternalFormat(e,r,i,o,s=!1){const{gl:a,extensions:l}=this;if(e!==null){if(a[e]!==void 0)return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let c=r;return r===a.RED&&(i===a.FLOAT&&(c=a.R32F),i===a.HALF_FLOAT&&(c=a.R16F),i===a.UNSIGNED_BYTE&&(c=a.R8),i===a.UNSIGNED_SHORT&&(c=a.R16),i===a.UNSIGNED_INT&&(c=a.R32UI),i===a.BYTE&&(c=a.R8I),i===a.SHORT&&(c=a.R16I),i===a.INT&&(c=a.R32I)),r===a.RED_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.R8UI),i===a.UNSIGNED_SHORT&&(c=a.R16UI),i===a.UNSIGNED_INT&&(c=a.R32UI),i===a.BYTE&&(c=a.R8I),i===a.SHORT&&(c=a.R16I),i===a.INT&&(c=a.R32I)),r===a.RG&&(i===a.FLOAT&&(c=a.RG32F),i===a.HALF_FLOAT&&(c=a.RG16F),i===a.UNSIGNED_BYTE&&(c=a.RG8),i===a.UNSIGNED_SHORT&&(c=a.RG16),i===a.UNSIGNED_INT&&(c=a.RG32UI),i===a.BYTE&&(c=a.RG8I),i===a.SHORT&&(c=a.RG16I),i===a.INT&&(c=a.RG32I)),r===a.RG_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RG8UI),i===a.UNSIGNED_SHORT&&(c=a.RG16UI),i===a.UNSIGNED_INT&&(c=a.RG32UI),i===a.BYTE&&(c=a.RG8I),i===a.SHORT&&(c=a.RG16I),i===a.INT&&(c=a.RG32I)),r===a.RGB&&(i===a.FLOAT&&(c=a.RGB32F),i===a.HALF_FLOAT&&(c=a.RGB16F),i===a.UNSIGNED_BYTE&&(c=a.RGB8),i===a.UNSIGNED_SHORT&&(c=a.RGB16),i===a.UNSIGNED_INT&&(c=a.RGB32UI),i===a.BYTE&&(c=a.RGB8I),i===a.SHORT&&(c=a.RGB16I),i===a.INT&&(c=a.RGB32I),i===a.UNSIGNED_BYTE&&(c=o===Lt&&s===!1?a.SRGB8:a.RGB8),i===a.UNSIGNED_SHORT_5_6_5&&(c=a.RGB565),i===a.UNSIGNED_SHORT_5_5_5_1&&(c=a.RGB5_A1),i===a.UNSIGNED_SHORT_4_4_4_4&&(c=a.RGB4),i===a.UNSIGNED_INT_5_9_9_9_REV&&(c=a.RGB9_E5)),r===a.RGB_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RGB8UI),i===a.UNSIGNED_SHORT&&(c=a.RGB16UI),i===a.UNSIGNED_INT&&(c=a.RGB32UI),i===a.BYTE&&(c=a.RGB8I),i===a.SHORT&&(c=a.RGB16I),i===a.INT&&(c=a.RGB32I)),r===a.RGBA&&(i===a.FLOAT&&(c=a.RGBA32F),i===a.HALF_FLOAT&&(c=a.RGBA16F),i===a.UNSIGNED_BYTE&&(c=a.RGBA8),i===a.UNSIGNED_SHORT&&(c=a.RGBA16),i===a.UNSIGNED_INT&&(c=a.RGBA32UI),i===a.BYTE&&(c=a.RGBA8I),i===a.SHORT&&(c=a.RGBA16I),i===a.INT&&(c=a.RGBA32I),i===a.UNSIGNED_BYTE&&(c=o===Lt&&s===!1?a.SRGB8_ALPHA8:a.RGBA8),i===a.UNSIGNED_SHORT_4_4_4_4&&(c=a.RGBA4),i===a.UNSIGNED_SHORT_5_5_5_1&&(c=a.RGB5_A1)),r===a.RGBA_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RGBA8UI),i===a.UNSIGNED_SHORT&&(c=a.RGBA16UI),i===a.UNSIGNED_INT&&(c=a.RGBA32UI),i===a.BYTE&&(c=a.RGBA8I),i===a.SHORT&&(c=a.RGBA16I),i===a.INT&&(c=a.RGBA32I)),r===a.DEPTH_COMPONENT&&(i===a.UNSIGNED_INT&&(c=a.DEPTH24_STENCIL8),i===a.FLOAT&&(c=a.DEPTH_COMPONENT32F)),r===a.DEPTH_STENCIL&&i===a.UNSIGNED_INT_24_8&&(c=a.DEPTH24_STENCIL8),(c===a.R16F||c===a.R32F||c===a.RG16F||c===a.RG32F||c===a.RGBA16F||c===a.RGBA32F)&&l.get("EXT_color_buffer_float"),c}setTextureParameters(e,r){const{gl:i,extensions:o,backend:s}=this;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,r.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,r.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texParameteri(e,i.TEXTURE_WRAP_S,e0[r.wrapS]),i.texParameteri(e,i.TEXTURE_WRAP_T,e0[r.wrapT]),(e===i.TEXTURE_3D||e===i.TEXTURE_2D_ARRAY)&&i.texParameteri(e,i.TEXTURE_WRAP_R,e0[r.wrapR]),i.texParameteri(e,i.TEXTURE_MAG_FILTER,P1[r.magFilter]);const a=r.mipmaps!==void 0&&r.mipmaps.length>0,l=r.minFilter===Br&&a?Wi:r.minFilter;if(i.texParameteri(e,i.TEXTURE_MIN_FILTER,P1[l]),r.compareFunction&&(i.texParameteri(e,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(e,i.TEXTURE_COMPARE_FUNC,aL[r.compareFunction])),o.has("EXT_texture_filter_anisotropic")===!0){if(r.magFilter===qn||r.minFilter!==qs&&r.minFilter!==Wi||r.type===pr&&o.has("OES_texture_float_linear")===!1)return;if(r.anisotropy>1){const c=o.get("EXT_texture_filter_anisotropic");i.texParameterf(e,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:r,backend:i,defaultTextures:o}=this,s=this.getGLTextureType(e);let a=o[s];a===void 0&&(a=r.createTexture(),i.state.bindTexture(s,a),r.texParameteri(s,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(s,r.TEXTURE_MAG_FILTER,r.NEAREST),o[s]=a),i.set(e,{textureGPU:a,glTextureType:s,isDefault:!0})}createTexture(e,r){const{gl:i,backend:o}=this,{levels:s,width:a,height:l,depth:c}=r,u=o.utils.convert(e.format,e.colorSpace),d=o.utils.convert(e.type),f=this.getInternalFormat(e.internalFormat,u,d,e.colorSpace,e.isVideoTexture),h=i.createTexture(),p=this.getGLTextureType(e);o.state.bindTexture(p,h),this.setTextureParameters(p,e),e.isDataArrayTexture||e.isCompressedArrayTexture?i.texStorage3D(i.TEXTURE_2D_ARRAY,s,f,a,l,c):e.isData3DTexture?i.texStorage3D(i.TEXTURE_3D,s,f,a,l,c):e.isVideoTexture||i.texStorage2D(p,s,f,a,l),o.set(e,{textureGPU:h,glTextureType:p,glFormat:u,glType:d,glInternalFormat:f})}copyBufferToTexture(e,r){const{gl:i,backend:o}=this,{textureGPU:s,glTextureType:a,glFormat:l,glType:c}=o.get(r),{width:u,height:d}=r.source.data;i.bindBuffer(i.PIXEL_UNPACK_BUFFER,e),o.state.bindTexture(a,s),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texSubImage2D(a,0,0,0,u,d,l,c,0),i.bindBuffer(i.PIXEL_UNPACK_BUFFER,null),o.state.unbindTexture()}updateTexture(e,r){const{gl:i}=this,{width:o,height:s}=r,{textureGPU:a,glTextureType:l,glFormat:c,glType:u,glInternalFormat:d}=this.backend.get(e);if(e.isRenderTargetTexture||a===void 0)return;const f=h=>h.isDataTexture?h.image.data:typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&h instanceof ImageBitmap||h instanceof OffscreenCanvas?h:h.data;if(this.backend.state.bindTexture(l,a),this.setTextureParameters(l,e),e.isCompressedTexture){const h=e.mipmaps,p=r.image;for(let g=0;g<h.length;g++){const y=h[g];e.isCompressedArrayTexture?e.format!==i.RGBA?c!==null?i.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,y.width,y.height,p.depth,c,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,y.width,y.height,p.depth,c,u,y.data):c!==null?i.compressedTexSubImage2D(i.TEXTURE_2D,g,0,0,y.width,y.height,c,y.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=r.images;for(let p=0;p<6;p++){const g=f(h[p]);i.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,o,s,c,u,g)}}else if(e.isDataArrayTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isData3DTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isVideoTexture)e.update(),i.texImage2D(l,0,d,c,u,r.image);else{const h=f(r.image);i.texSubImage2D(l,0,0,0,o,s,c,u,h)}}generateMipmaps(e){const{gl:r,backend:i}=this,{textureGPU:o,glTextureType:s}=i.get(e);i.state.bindTexture(s,o),r.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:r,backend:i}=this;if(e){const o=i.get(e);if(o.renderBufferStorageSetup=void 0,o.framebuffers){for(const s in o.framebuffers)r.deleteFramebuffer(o.framebuffers[s]);delete o.framebuffers}if(o.depthRenderbuffer&&(r.deleteRenderbuffer(o.depthRenderbuffer),delete o.depthRenderbuffer),o.stencilRenderbuffer&&(r.deleteRenderbuffer(o.stencilRenderbuffer),delete o.stencilRenderbuffer),o.msaaFrameBuffer&&(r.deleteFramebuffer(o.msaaFrameBuffer),delete o.msaaFrameBuffer),o.msaaRenderbuffers){for(let s=0;s<o.msaaRenderbuffers.length;s++)r.deleteRenderbuffer(o.msaaRenderbuffers[s]);delete o.msaaRenderbuffers}}}destroyTexture(e){const{gl:r,backend:i}=this,{textureGPU:o,renderTarget:s}=i.get(e);this.deallocateRenderBuffers(s),r.deleteTexture(o),i.delete(e)}copyTextureToTexture(e,r,i=null,o=null,s=0){const{gl:a,backend:l}=this,{state:c}=this.backend,{textureGPU:u,glTextureType:d,glType:f,glFormat:h}=l.get(r);let p,g,y,v,m,x;i!==null?(p=i.max.x-i.min.x,g=i.max.y-i.min.y,y=i.min.x,v=i.min.y):(p=e.image.width,g=e.image.height,y=0,v=0),o!==null?(m=o.x,x=o.y):(m=0,x=0),c.bindTexture(d,u),a.pixelStorei(a.UNPACK_ALIGNMENT,r.unpackAlignment),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,r.unpackAlignment);const _=a.getParameter(a.UNPACK_ROW_LENGTH),S=a.getParameter(a.UNPACK_IMAGE_HEIGHT),w=a.getParameter(a.UNPACK_SKIP_PIXELS),C=a.getParameter(a.UNPACK_SKIP_ROWS),E=a.getParameter(a.UNPACK_SKIP_IMAGES),T=e.isCompressedTexture?e.mipmaps[s]:e.image;if(a.pixelStorei(a.UNPACK_ROW_LENGTH,T.width),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,T.height),a.pixelStorei(a.UNPACK_SKIP_PIXELS,y),a.pixelStorei(a.UNPACK_SKIP_ROWS,v),e.isRenderTargetTexture||e.isDepthTexture){const M=l.get(e),R=l.get(r),N=l.get(M.renderTarget),D=l.get(R.renderTarget),L=N.framebuffers[M.cacheKey],A=D.framebuffers[R.cacheKey];c.bindFramebuffer(a.READ_FRAMEBUFFER,L),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,A);let I=a.COLOR_BUFFER_BIT;e.isDepthTexture&&(I=a.DEPTH_BUFFER_BIT),a.blitFramebuffer(y,v,p,g,m,x,p,g,I,a.NEAREST),c.bindFramebuffer(a.READ_FRAMEBUFFER,null),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)}else e.isDataTexture?a.texSubImage2D(a.TEXTURE_2D,s,m,x,p,g,h,f,T.data):e.isCompressedTexture?a.compressedTexSubImage2D(a.TEXTURE_2D,s,m,x,T.width,T.height,h,T.data):a.texSubImage2D(a.TEXTURE_2D,s,m,x,p,g,h,f,T);a.pixelStorei(a.UNPACK_ROW_LENGTH,_),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,S),a.pixelStorei(a.UNPACK_SKIP_PIXELS,w),a.pixelStorei(a.UNPACK_SKIP_ROWS,C),a.pixelStorei(a.UNPACK_SKIP_IMAGES,E),s===0&&r.generateMipmaps&&a.generateMipmap(a.TEXTURE_2D),c.unbindTexture()}copyFramebufferToTexture(e,r,i){const{gl:o}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:l,y:c,z:u,w:d}=i,f=e.isDepthTexture===!0||r.renderTarget&&r.renderTarget.samples>0,h=r.renderTarget?r.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(f){const p=l!==0||c!==0;let g,y;if(e.isDepthTexture===!0?(g=o.DEPTH_BUFFER_BIT,y=o.DEPTH_ATTACHMENT,r.stencil&&(g|=o.STENCIL_BUFFER_BIT)):(g=o.COLOR_BUFFER_BIT,y=o.COLOR_ATTACHMENT0),p){const v=this.backend.get(r.renderTarget),m=v.framebuffers[r.getCacheKey()],x=v.msaaFrameBuffer;s.bindFramebuffer(o.DRAW_FRAMEBUFFER,m),s.bindFramebuffer(o.READ_FRAMEBUFFER,x);const _=h-c-d;o.blitFramebuffer(l,_,l+u,_+d,l,_,l+u,_+d,g,o.NEAREST),s.bindFramebuffer(o.READ_FRAMEBUFFER,m),s.bindTexture(o.TEXTURE_2D,a),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,l,_,u,d),s.unbindTexture()}else{const v=o.createFramebuffer();s.bindFramebuffer(o.DRAW_FRAMEBUFFER,v),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,y,o.TEXTURE_2D,a,0),o.blitFramebuffer(0,0,u,d,0,0,u,d,g,o.NEAREST),o.deleteFramebuffer(v)}}else s.bindTexture(o.TEXTURE_2D,a),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,l,h-d-c,u,d),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(r)}setupRenderBufferStorage(e,r){const{gl:i}=this,o=r.renderTarget,{samples:s,depthTexture:a,depthBuffer:l,stencilBuffer:c,width:u,height:d}=o;if(i.bindRenderbuffer(i.RENDERBUFFER,e),l&&!c){let f=i.DEPTH_COMPONENT24;s>0?(a&&a.isDepthTexture&&a.type===i.FLOAT&&(f=i.DEPTH_COMPONENT32F),i.renderbufferStorageMultisample(i.RENDERBUFFER,s,f,u,d)):i.renderbufferStorage(i.RENDERBUFFER,f,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,e)}else l&&c&&(s>0?i.renderbufferStorageMultisample(i.RENDERBUFFER,s,i.DEPTH24_STENCIL8,u,d):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e))}async copyTextureToBuffer(e,r,i,o,s,a){const{backend:l,gl:c}=this,{textureGPU:u,glFormat:d,glType:f}=this.backend.get(e),h=c.createFramebuffer();c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=e.isCubeTexture?c.TEXTURE_CUBE_MAP_POSITIVE_X+a:c.TEXTURE_2D;c.framebufferTexture2D(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,p,u,0);const g=this._getTypedArrayType(f),y=this._getBytesPerTexel(f,d),m=o*s*y,x=c.createBuffer();c.bindBuffer(c.PIXEL_PACK_BUFFER,x),c.bufferData(c.PIXEL_PACK_BUFFER,m,c.STREAM_READ),c.readPixels(r,i,o,s,d,f,0),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),await l.utils._clientWaitAsync();const _=new g(m/g.BYTES_PER_ELEMENT);return c.bindBuffer(c.PIXEL_PACK_BUFFER,x),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,_),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),c.deleteFramebuffer(h),_}_getTypedArrayType(e){const{gl:r}=this;if(e===r.UNSIGNED_BYTE)return Uint8Array;if(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT)return Uint16Array;if(e===r.UNSIGNED_INT)return Uint32Array;if(e===r.HALF_FLOAT)return Uint16Array;if(e===r.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,r){const{gl:i}=this;let o=0;if(e===i.UNSIGNED_BYTE&&(o=1),(e===i.UNSIGNED_SHORT_4_4_4_4||e===i.UNSIGNED_SHORT_5_5_5_1||e===i.UNSIGNED_SHORT_5_6_5||e===i.UNSIGNED_SHORT||e===i.HALF_FLOAT)&&(o=2),(e===i.UNSIGNED_INT||e===i.FLOAT)&&(o=4),r===i.RGBA)return o*4;if(r===i.RGB)return o*3;if(r===i.ALPHA)return o}}class nwe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let r=this.extensions[e];return r===void 0&&(r=this.gl.getExtension(e),this.extensions[e]=r),r}has(e){return this.availableExtensions.includes(e)}}class rwe{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,r=this.backend.extensions;if(r.has("EXT_texture_filter_anisotropic")===!0){const i=r.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const lL={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class iwe{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,r){const{gl:i,mode:o,object:s,type:a,info:l,index:c}=this;c!==0?i.drawElements(o,r,a,e):i.drawArrays(o,e,r),l.update(s,r,o,1)}renderInstances(e,r,i){const{gl:o,mode:s,type:a,index:l,object:c,info:u}=this;i!==0&&(l!==0?o.drawElementsInstanced(s,r,a,e,i):o.drawArraysInstanced(s,e,r,i),u.update(c,r,s,i))}renderMultiDraw(e,r,i){const{extensions:o,mode:s,object:a,info:l}=this;if(i===0)return;const c=o.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<i;u++)this.render(e[u],r[u]);else{this.index!==0?c.multiDrawElementsWEBGL(s,r,0,this.type,e,0,i):c.multiDrawArraysWEBGL(s,e,0,r,0,i);let u=0;for(let d=0;d<i;d++)u+=r[d];l.update(a,u,s,1)}}renderMultiDrawInstances(e,r,i,o){const{extensions:s,mode:a,object:l,info:c}=this;if(i===0)return;const u=s.get("WEBGL_multi_draw");if(u===null)for(let d=0;d<i;d++)this.renderInstances(e[d],r[d],o[d]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(a,r,0,this.type,e,0,o,0,i):u.multiDrawArraysInstancedWEBGL(a,e,0,r,0,o,0,i);let d=0;for(let f=0;f<i;f++)d+=r[f]*o[f];c.update(l,d,a,1)}}}class cL extends vV{constructor(e={}){super(e),this.isWebGLBackend=!0}init(e){super.init(e);const r=this.parameters,i=r.context!==void 0?r.context:e.domElement.getContext("webgl2");function o(s){s.preventDefault();const a={api:"WebGL",message:s.statusMessage||"Unknown reason",reason:null,originalEvent:s};e.onDeviceLost(a)}this._onContextLost=o,e.domElement.addEventListener("webglcontextlost",o,!1),this.gl=i,this.extensions=new nwe(this),this.capabilities=new rwe(this),this.attributeUtils=new Z1e(this),this.textureUtils=new twe(this),this.bufferRenderer=new iwe(this),this.state=new J1e(this),this.utils=new ewe(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=r.trackTimestamp===!0,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._knownBindings=new WeakSet,this._currentContext=null}get coordinateSystem(){return jo}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(this.queryRunning){r.queryQueue||(r.queryQueue=[]),r.queryQueue.push(e);return}r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.activeQuery=null),r.activeQuery=this.gl.createQuery(),r.activeQuery!==null&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,r.activeQuery),this.queryRunning=!0)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.gpuQueries||(r.gpuQueries=[]),r.gpuQueries.push({query:r.activeQuery}),r.activeQuery=null,this.queryRunning=!1,r.queryQueue&&r.queryQueue.length>0)){const i=r.queryQueue.shift();this.initTimestampQuery(i)}}async resolveTimestampAsync(e,r="render"){if(!this.disjoint||!this.trackTimestamp)return;const i=this.get(e);i.gpuQueries||(i.gpuQueries=[]);for(let o=0;o<i.gpuQueries.length;o++){const s=i.gpuQueries[o],a=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT_AVAILABLE),l=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT);if(a&&!l){const c=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT),u=Number(c)/1e6;this.gl.deleteQuery(s.query),i.gpuQueries.splice(o,1),o--,this.renderer.info.updateTimestamp(r,u)}}}getContext(){return this.gl}beginRender(e){const{gl:r}=this,i=this.get(e);if(this.initTimestampQuery(e),i.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),e.scissor){const{x:s,y:a,width:l,height:c}=e.scissorValue;r.scissor(s,e.height-c-a,l,c)}const o=e.occlusionQueryCount;o>0&&(i.currentOcclusionQueries=i.occlusionQueries,i.currentOcclusionQueryObjects=i.occlusionQueryObjects,i.lastOcclusionObject=null,i.occlusionQueries=new Array(o),i.occlusionQueryObjects=new Array(o),i.occlusionQueryIndex=0)}finishRender(e){const{gl:r,state:i}=this,o=this.get(e),s=o.previousContext,a=e.occlusionQueryCount;a>0&&(a>o.occlusionQueryIndex&&r.endQuery(r.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const l=e.textures;if(l!==null)for(let c=0;c<l.length;c++){const u=l[c];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const c=this.get(e.renderTarget),{samples:u}=e.renderTarget;if(u>0){const d=c.framebuffers[e.getCacheKey()],f=r.COLOR_BUFFER_BIT,h=c.msaaFrameBuffer,p=e.textures;i.bindFramebuffer(r.READ_FRAMEBUFFER,h),i.bindFramebuffer(r.DRAW_FRAMEBUFFER,d);for(let g=0;g<p.length;g++)if(e.scissor){const{x:y,y:v,width:m,height:x}=e.scissorValue,_=e.height-x-v;r.blitFramebuffer(y,_,y+m,_+x,y,_,y+m,_+x,f,r.NEAREST),r.invalidateSubFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray,y,_,m,x)}else r.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,f,r.NEAREST),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueries:i,currentOcclusionQueryObjects:o}=r;if(i&&o){const s=new WeakSet,{gl:a}=this;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueries=null;const l=()=>{let c=0;for(let u=0;u<i.length;u++){const d=i[u];d!==null&&a.getQueryParameter(d,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(d,a.QUERY_RESULT)>0&&s.add(o[u]),i[u]=null,a.deleteQuery(d),c++)}c<i.length?requestAnimationFrame(l):r.occluded=s};l()}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}updateViewport(e){const r=this.gl,{x:i,y:o,width:s,height:a}=e.viewportValue;r.viewport(i,e.height-a-o,s,a)}setScissorTest(e){const r=this.gl;e?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST)}clear(e,r,i,o=null,s=!0){const{gl:a}=this;if(o===null){const c=this.getClearColor();c.r*=c.a,c.g*=c.a,c.b*=c.a,o={textures:null,clearColorValue:c}}let l=0;if(e&&(l|=a.COLOR_BUFFER_BIT),r&&(l|=a.DEPTH_BUFFER_BIT),i&&(l|=a.STENCIL_BUFFER_BIT),l!==0){let c;if(o.clearColorValue?c=o.clearColorValue:(c=this.getClearColor(),c.r*=c.a,c.g*=c.a,c.b*=c.a),r&&this.state.setDepthMask(!0),o.textures===null)a.clearColor(c.r,c.g,c.b,c.a),a.clear(l);else{if(s&&this._setFramebuffer(o),e)for(let u=0;u<o.textures.length;u++)a.clearBufferfv(a.COLOR,u,[c.r,c.g,c.b,c.a]);r&&i?a.clearBufferfi(a.DEPTH_STENCIL,0,1,0):r?a.clearBufferfv(a.DEPTH,0,[1]):i&&a.clearBufferiv(a.STENCIL,0,[0])}}}beginCompute(e){const{state:r,gl:i}=this;r.bindFramebuffer(i.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,r,i,o){const{state:s,gl:a}=this;this.discard||(a.enable(a.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:c,attributes:u}=this.get(o),d=this._getVaoKey(null,u),f=this.vaoCache[d];f===void 0?this._createVao(null,u):a.bindVertexArray(f),s.useProgram(l),this._bindUniforms(i);const h=this._getTransformFeedback(c);a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,h),a.beginTransformFeedback(a.POINTS),u[0].isStorageInstancedBufferAttribute?a.drawArraysInstanced(a.POINTS,0,1,r.count):a.drawArrays(a.POINTS,0,r.count),a.endTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null);for(let p=0;p<c.length;p++){const g=c[p];g.pbo&&this.textureUtils.copyBufferToTexture(g.transformBuffer,g.pbo),g.switchBuffers()}}finishCompute(e){const r=this.gl;this.discard=!1,r.disable(r.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}draw(e){const{object:r,pipeline:i,material:o,context:s,hardwareClippingPlanes:a}=e,{programGPU:l}=this.get(i),{gl:c,state:u}=this,d=this.get(s),f=e.getDrawParameters();if(f===null)return;this._bindUniforms(e.getBindings());const h=r.isMesh&&r.matrixWorld.determinant()<0;u.setMaterial(o,h,a),u.useProgram(l);const p=this.get(e);let g=p.staticVao;if(g===void 0||p.geometryId!==e.geometry.id){const w=this._getVaoKey(e.getIndex(),e.getAttributes());if(g=this.vaoCache[w],g===void 0){let C;({vaoGPU:g,staticVao:C}=this._createVao(e.getIndex(),e.getAttributes())),C&&(p.staticVao=g,p.geometryId=e.geometry.id)}}c.bindVertexArray(g);const y=e.getIndex(),v=d.lastOcclusionObject;if(v!==r&&v!==void 0){if(v!==null&&v.occlusionTest===!0&&(c.endQuery(c.ANY_SAMPLES_PASSED),d.occlusionQueryIndex++),r.occlusionTest===!0){const w=c.createQuery();c.beginQuery(c.ANY_SAMPLES_PASSED,w),d.occlusionQueries[d.occlusionQueryIndex]=w,d.occlusionQueryObjects[d.occlusionQueryIndex]=r}d.lastOcclusionObject=r}const m=this.bufferRenderer;r.isPoints?m.mode=c.POINTS:r.isLineSegments?m.mode=c.LINES:r.isLine?m.mode=c.LINE_STRIP:r.isLineLoop?m.mode=c.LINE_LOOP:o.wireframe===!0?(u.setLineWidth(o.wireframeLinewidth*this.renderer.getPixelRatio()),m.mode=c.LINES):m.mode=c.TRIANGLES;const{vertexCount:x,instanceCount:_}=f;let{firstVertex:S}=f;if(m.object=r,y!==null){S*=y.array.BYTES_PER_ELEMENT;const w=this.get(y);m.index=y.count,m.type=w.type}else m.index=0;r.isBatchedMesh?r._multiDrawInstances!==null?m.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?m.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount):qc("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):_>1?m.renderInstances(S,x,_):m.render(S,x),c.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,o,s,a){return this.textureUtils.copyTextureToBuffer(e,r,i,o,s,a)}createSampler(){}destroySampler(){}createNodeBuilder(e,r){return new K1e(e,r)}createProgram(e){const r=this.gl,{stage:i,code:o}=e,s=i==="fragment"?r.createShader(r.FRAGMENT_SHADER):r.createShader(r.VERTEX_SHADER);r.shaderSource(s,o),r.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e,r){const i=this.gl,o=e.pipeline,{fragmentProgram:s,vertexProgram:a}=o,l=i.createProgram(),c=this.get(s).shaderGPU,u=this.get(a).shaderGPU;if(i.attachShader(l,c),i.attachShader(l,u),i.linkProgram(l),this.set(o,{programGPU:l,fragmentShader:c,vertexShader:u}),r!==null&&this.parallel){const d=new Promise(f=>{const h=this.parallel,p=()=>{i.getProgramParameter(l,h.COMPLETION_STATUS_KHR)?(this._completeCompile(e,o),f()):requestAnimationFrame(p)};p()});r.push(d);return}this._completeCompile(e,o)}_handleSource(e,r){const i=e.split(`
`),o=[],s=Math.max(r-6,0),a=Math.min(r+6,i.length);for(let l=s;l<a;l++){const c=l+1;o.push(`${c===r?">":" "} ${c}: ${i[l]}`)}return o.join(`
`)}_getShaderErrors(e,r,i){const o=e.getShaderParameter(r,e.COMPILE_STATUS),s=e.getShaderInfoLog(r).trim();if(o&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const l=parseInt(a[1]);return i.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(r),l)}else return s}_logProgramError(e,r,i){if(this.renderer.debug.checkShaderErrors){const o=this.gl,s=o.getProgramInfoLog(e).trim();if(o.getProgramParameter(e,o.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(o,e,i,r);else{const a=this._getShaderErrors(o,i,"vertex"),l=this._getShaderErrors(o,r,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(e,o.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+a+`
`+l)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,r){const{state:i,gl:o}=this,s=this.get(r),{programGPU:a,fragmentShader:l,vertexShader:c}=s;o.getProgramParameter(a,o.LINK_STATUS)===!1&&this._logProgramError(a,l,c),i.useProgram(a);const u=e.getBindings();this._setupBindings(u,a),this.set(r,{programGPU:a})}createComputePipeline(e,r){const{state:i,gl:o}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,l=o.createProgram(),c=this.get(s).shaderGPU,u=this.get(a).shaderGPU,d=a.transforms,f=[],h=[];for(let v=0;v<d.length;v++){const m=d[v];f.push(m.varyingName),h.push(m.attributeNode)}o.attachShader(l,c),o.attachShader(l,u),o.transformFeedbackVaryings(l,f,o.SEPARATE_ATTRIBS),o.linkProgram(l),o.getProgramParameter(l,o.LINK_STATUS)===!1&&this._logProgramError(l,c,u),i.useProgram(l),this._setupBindings(r,l);const p=a.attributes,g=[],y=[];for(let v=0;v<p.length;v++){const m=p[v].node.attribute;g.push(m),this.has(m)||this.attributeUtils.createAttribute(m,o.ARRAY_BUFFER)}for(let v=0;v<h.length;v++){const m=h[v].attribute;this.has(m)||this.attributeUtils.createAttribute(m,o.ARRAY_BUFFER);const x=this.get(m);y.push(x)}this.set(e,{programGPU:l,transformBuffers:y,attributes:g})}createBindings(e,r){if(this._knownBindings.has(r)===!1){this._knownBindings.add(r);let i=0,o=0;for(const s of r){this.set(s,{textures:o,uniformBuffers:i});for(const a of s.bindings)a.isUniformBuffer&&i++,a.isSampledTexture&&o++}}this.updateBindings(e,r)}updateBindings(e){const{gl:r}=this,i=this.get(e);let o=i.uniformBuffers,s=i.textures;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer,c=r.createBuffer();r.bindBuffer(r.UNIFORM_BUFFER,c),r.bufferData(r.UNIFORM_BUFFER,l,r.DYNAMIC_DRAW),this.set(a,{index:o++,bufferGPU:c})}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(a.texture);this.set(a,{index:s++,textureGPU:l,glTextureType:c})}}updateBinding(e){const r=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const o=this.get(e).bufferGPU,s=e.buffer;r.bindBuffer(r.UNIFORM_BUFFER,o),r.bufferData(r.UNIFORM_BUFFER,s,r.DYNAMIC_DRAW)}}createIndexAttribute(e){const r=this.gl;this.attributeUtils.createAttribute(e,r.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){}hasFeature(e){const r=Object.keys(lL).filter(o=>lL[o]===e),i=this.extensions;for(let o=0;o<r.length;o++)if(i.has(r[o]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,r,i,o,s){this.textureUtils.copyTextureToTexture(e,r,i,o,s)}copyFramebufferToTexture(e,r,i){this.textureUtils.copyFramebufferToTexture(e,r,i)}_setFramebuffer(e){const{gl:r,state:i}=this;let o=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:l,depthBuffer:c,stencilBuffer:u}=s,d=s.isWebGLCubeRenderTarget===!0;let f=a.msaaFrameBuffer,h=a.depthRenderbuffer;const p=Q5(e);let g;if(d?(a.cubeFramebuffers||(a.cubeFramebuffers={}),g=a.cubeFramebuffers[p]):(a.framebuffers||(a.framebuffers={}),g=a.framebuffers[p]),g===void 0){g=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,g);const y=e.textures;if(d){a.cubeFramebuffers[p]=g;const{textureGPU:v}=this.get(y[0]),m=this.renderer._activeCubeFace;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+m,v,0)}else{a.framebuffers[p]=g;for(let v=0;v<y.length;v++){const m=y[v],x=this.get(m);x.renderTarget=e.renderTarget,x.cacheKey=p;const _=r.COLOR_ATTACHMENT0+v;r.framebufferTexture2D(r.FRAMEBUFFER,_,r.TEXTURE_2D,x.textureGPU,0)}i.drawBuffers(e,g)}if(e.depthTexture!==null){const v=this.get(e.depthTexture),m=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;v.renderTarget=e.renderTarget,v.cacheKey=p,r.framebufferTexture2D(r.FRAMEBUFFER,m,r.TEXTURE_2D,v.textureGPU,0)}}if(l>0){if(f===void 0){const y=[];f=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,f);const v=[],m=e.textures;for(let x=0;x<m.length;x++){if(v[x]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,v[x]),y.push(r.COLOR_ATTACHMENT0+x),c){const w=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;y.push(w)}const _=e.textures[x],S=this.get(_);r.renderbufferStorageMultisample(r.RENDERBUFFER,l,S.glInternalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+x,r.RENDERBUFFER,v[x])}if(a.msaaFrameBuffer=f,a.msaaRenderbuffers=v,h===void 0){h=r.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(h,e),a.depthRenderbuffer=h;const x=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;y.push(x)}a.invalidationArray=y}o=a.msaaFrameBuffer}else o=g}i.bindFramebuffer(r.FRAMEBUFFER,o)}_getVaoKey(e,r){let i=[];if(e!==null){const o=this.get(e);i+=":"+o.id}for(let o=0;o<r.length;o++){const s=this.get(r[o]);i+=":"+s.id}return i}_createVao(e,r){const{gl:i}=this,o=i.createVertexArray();let s="",a=!0;if(i.bindVertexArray(o),e!==null){const l=this.get(e);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,l.bufferGPU),s+=":"+l.id}for(let l=0;l<r.length;l++){const c=r[l],u=this.get(c);s+=":"+u.id,i.bindBuffer(i.ARRAY_BUFFER,u.bufferGPU),i.enableVertexAttribArray(l),(c.isStorageBufferAttribute||c.isStorageInstancedBufferAttribute)&&(a=!1);let d,f;c.isInterleavedBufferAttribute===!0?(d=c.data.stride*u.bytesPerElement,f=c.offset*u.bytesPerElement):(d=0,f=0),u.isInteger?i.vertexAttribIPointer(l,c.itemSize,u.type,d,f):i.vertexAttribPointer(l,c.itemSize,u.type,c.normalized,d,f),c.isInstancedBufferAttribute&&!c.isInterleavedBufferAttribute?i.vertexAttribDivisor(l,c.meshPerAttribute):c.isInterleavedBufferAttribute&&c.data.isInstancedInterleavedBuffer&&i.vertexAttribDivisor(l,c.data.meshPerAttribute)}return i.bindBuffer(i.ARRAY_BUFFER,null),this.vaoCache[s]=o,{vaoGPU:o,staticVao:a}}_getTransformFeedback(e){let r="";for(let s=0;s<e.length;s++)r+=":"+e[s].id;let i=this.transformFeedbackCache[r];if(i!==void 0)return i;const{gl:o}=this;i=o.createTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,i);for(let s=0;s<e.length;s++){const a=e[s];o.bindBufferBase(o.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[r]=i,i}_setupBindings(e,r){const i=this.gl;for(const o of e)for(const s of o.bindings){const l=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const c=i.getUniformBlockIndex(r,s.name);i.uniformBlockBinding(r,c,l)}else if(s.isSampledTexture){const c=i.getUniformLocation(r,s.name);i.uniform1i(c,l)}}}_bindUniforms(e){const{gl:r,state:i}=this;for(const o of e)for(const s of o.bindings){const a=this.get(s),l=a.index;s.isUniformsGroup||s.isUniformBuffer?i.bindBufferBase(r.UNIFORM_BUFFER,l,a.bufferGPU):s.isSampledTexture&&i.bindTexture(a.glTextureType,a.textureGPU,r.TEXTURE0+l)}}dispose(){this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const Gd={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Zr={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Jr={Store:"store"},xr={Load:"load",Clear:"clear"},O1={CCW:"ccw"},I1={None:"none",Front:"front",Back:"back"},Kf={Uint16:"uint16",Uint32:"uint32"},ie={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},D1={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},Zc={Linear:"linear",Nearest:"nearest"},Ht={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Uc={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},uL={None:0,All:15},Rl={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},L1={Storage:"storage",ReadOnlyStorage:"read-only-storage"},F1={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},rp={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},dL={TwoD:"2d",ThreeD:"3d"},Bo={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},owe={All:"all"},t0={Vertex:"vertex",Instance:"instance"},PE={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class swe extends QR{constructor(e,r){super(e),this.texture=r,this.version=r?r.version:0,this.isSampler=!0}}class awe extends swe{constructor(e,r,i){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i}update(){this.texture=this.textureNode.value}}class lwe extends dV{constructor(e,r){super(e,r?r.array:null),this.attribute=r,this.isStorageBuffer=!0}}let cwe=0;class uwe extends lwe{constructor(e,r){super("StorageBuffer_"+cwe++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:ka.READ_WRITE,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class dwe extends Tc{constructor(e){super(),this.device=e;const r=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,o=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:Zc.Linear}),this.flipYSampler=e.createSampler({minFilter:Zc.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:r}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:i}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:o})}getTransferPipeline(e){let r=this.transferPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Gd.TriangleStrip,stripIndexFormat:Kf.Uint32},layout:"auto"}),this.transferPipelines[e]=r),r}getFlipYPipeline(e){let r=this.flipYPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Gd.TriangleStrip,stripIndexFormat:Kf.Uint32},layout:"auto"}),this.flipYPipelines[e]=r),r}flipY(e,r,i=0){const o=r.format,{width:s,height:a}=r.size,l=this.getTransferPipeline(o),c=this.getFlipYPipeline(o),u=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),d=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Bo.TwoD,baseArrayLayer:i}),f=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:Bo.TwoD,baseArrayLayer:0}),h=this.device.createCommandEncoder({}),p=(g,y,v)=>{const m=g.getBindGroupLayout(0),x=this.device.createBindGroup({layout:m,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:y}]}),_=h.beginRenderPass({colorAttachments:[{view:v,loadOp:xr.Clear,storeOp:Jr.Store,clearValue:[0,0,0,0]}]});_.setPipeline(g),_.setBindGroup(0,x),_.draw(4,1,0,0),_.end()};p(l,d,f),p(c,f,d),this.device.queue.submit([h.finish()]),u.destroy()}generateMipmaps(e,r,i=0){const o=this.get(e);o.useCount===void 0&&(o.useCount=0,o.layers=[]);const s=o.layers[i]||this._mipmapCreateBundles(e,r,i),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,s),this.device.queue.submit([a.finish()]),o.useCount!==0&&(o.layers[i]=s),o.useCount++}_mipmapCreateBundles(e,r,i){const o=this.getTransferPipeline(r.format),s=o.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Bo.TwoD,baseArrayLayer:i});const l=[];for(let c=1;c<r.mipLevelCount;c++){const u=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),d=e.createView({baseMipLevel:c,mipLevelCount:1,dimension:Bo.TwoD,baseArrayLayer:i}),f={colorAttachments:[{view:d,loadOp:xr.Clear,storeOp:Jr.Store,clearValue:[0,0,0,0]}]},h=this.device.createRenderBundleEncoder({colorFormats:[r.format]});h.setPipeline(o),h.setBindGroup(0,u),h.draw(4,1,0,0),l.push({renderBundles:[h.finish()],passDescriptor:f}),a=d}return l}_mipmapRunBundles(e,r){const i=r.length;for(let o=0;o<i;o++){const s=r[o],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const fwe={[YM]:"never",[g_]:"less",[QM]:"equal",[v_]:"less-equal",[ZM]:"greater",[eR]:"greater-equal",[tR]:"always",[JM]:"not-equal"},hwe=[0,1,3,2,4,5];class pwe{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new wc,this.depthTexture.name="depthBuffer"}createSampler(e){const r=this.backend,i=r.device,o=r.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===Zc.Linear&&s.minFilter===Zc.Linear&&s.mipmapFilter===Zc.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=fwe[e.compareFunction]),o.sampler=i.createSampler(s)}createDefaultTexture(e){let r;const i=OE(e);e.isCubeTexture?r=this._getDefaultCubeTextureGPU(i):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():r=this._getDefaultTextureGPU(i),this.backend.get(e).texture=r}createTexture(e,r={}){const i=this.backend,o=i.get(e);if(o.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");r.needsMipmaps===void 0&&(r.needsMipmaps=!1),r.levels===void 0&&(r.levels=1),r.depth===void 0&&(r.depth=1);const{width:s,height:a,depth:l,levels:c}=r;e.isFramebufferTexture&&(r.renderTarget?r.format=this.backend.utils.getCurrentColorFormat(r.renderTarget):r.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),d=e.internalFormat||r.format||OE(e,i.device);o.format=d;let f=r.sampleCount!==void 0?r.sampleCount:1;f=i.utils.getSampleCount(f);const h=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:f;let p=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(p|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(p|=GPUTextureUsage.RENDER_ATTACHMENT);const g={label:e.name,size:{width:s,height:a,depthOrArrayLayers:l},mipLevelCount:c,sampleCount:h,dimension:u,format:d,usage:p};if(e.isVideoTexture){const y=e.source.data,v=new VideoFrame(y);g.size.width=v.displayWidth,g.size.height=v.displayHeight,v.close(),o.externalTexture=y}else{if(d===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);o.texture=i.device.createTexture(g)}if(e.isRenderTargetTexture&&f>1&&!e.isMultisampleRenderTargetTexture){const y=Object.assign({},g);y.label=y.label+"-msaa",y.sampleCount=f,o.msaaTexture=i.device.createTexture(y)}o.initialized=!0,o.textureDescriptorGPU=g}destroyTexture(e){const r=this.backend,i=r.get(e);i.texture!==void 0&&i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),r.delete(e)}destroySampler(e){const i=this.backend.get(e);delete i.sampler}generateMipmaps(e){const r=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,i);else{const i=e.image.depth||1;for(let o=0;o<i;o++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,o)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:r,height:i}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:r,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,r=!1){const i=this.backend,{width:o,height:s}=i.getDrawingBufferSize(),a=this.depthTexture,l=i.get(a).texture;let c,u;if(r?(c=ia,u=ra):e&&(c=Js,u=rr),l!==void 0){if(a.image.width===o&&a.image.height===s&&a.format===c&&a.type===u)return l;this.destroyTexture(a)}return a.name="depthBuffer",a.format=c,a.type=u,a.image.width=o,a.image.height=s,this.createTexture(a,{sampleCount:i.utils.getSampleCount(i.renderer.samples),width:o,height:s}),i.get(a).texture}updateTexture(e,r){const i=this.backend.get(e),{textureDescriptorGPU:o}=i;if(!(e.isRenderTargetTexture||o===void 0)){if(e.isDataTexture)this._copyBufferToTexture(r.image,i.texture,o,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<r.image.depth;s++)this._copyBufferToTexture(r.image,i.texture,o,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,i.texture,o);else if(e.isCubeTexture)this._copyCubeMapToTexture(r.images,i.texture,o,e.flipY);else if(e.isVideoTexture){const s=e.source.data;i.externalTexture=s}else this._copyImageToTexture(r.image,i.texture,o,0,e.flipY);i.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,r,i,o,s,a){const l=this.backend.device,c=this.backend.get(e),u=c.texture,d=c.textureDescriptorGPU.format,f=this._getBytesPerTexel(d);let h=o*f;h=Math.ceil(h/256)*256;const p=l.createBuffer({size:o*s*f,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),g=l.createCommandEncoder();g.copyTextureToBuffer({texture:u,origin:{x:r,y:i,z:a}},{buffer:p,bytesPerRow:h},{width:o,height:s});const y=this._getTypedArrayType(d);l.queue.submit([g.finish()]),await p.mapAsync(GPUMapMode.READ);const v=p.getMappedRange();return new y(v)}_isEnvironmentTexture(e){const r=e.mapping;return r===fc||r===hc||r===Jo||r===es}_getDefaultTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new zr;i.minFilter=qn,i.magFilter=qn,this.createTexture(i,{width:1,height:1,format:e}),this.defaultTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultCubeTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new __;i.minFilter=qn,i.magFilter=qn,this.createTexture(i,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const r={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),r)}return e}_copyCubeMapToTexture(e,r,i,o){for(let s=0;s<6;s++){const a=e[s],l=o===!0?hwe[s]:s;a.isDataTexture?this._copyBufferToTexture(a.image,r,i,l,o):this._copyImageToTexture(a,r,i,l,o)}}_copyImageToTexture(e,r,i,o,s){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:r,mipLevel:0,origin:{x:0,y:0,z:o}},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(r,i,o)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new dwe(this.backend.device)),e}_generateMipmaps(e,r,i=0){this._getPassUtils().generateMipmaps(e,r,i)}_flipY(e,r,i=0){this._getPassUtils().flipY(e,r,i)}_copyBufferToTexture(e,r,i,o,s,a=0){const l=this.backend.device,c=e.data,u=this._getBytesPerTexel(i.format),d=e.width*u;l.queue.writeTexture({texture:r,mipLevel:0,origin:{x:0,y:0,z:o}},c,{offset:e.width*e.height*u*a,bytesPerRow:d},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(r,i,o)}_copyCompressedBufferToTexture(e,r,i){const o=this.backend.device,s=this._getBlockData(i.format),a=i.size.depthOrArrayLayers>1;for(let l=0;l<e.length;l++){const c=e[l],u=c.width,d=c.height,f=a?i.size.depthOrArrayLayers:1,h=Math.ceil(u/s.width)*s.byteLength,p=h*Math.ceil(d/s.height);for(let g=0;g<f;g++)o.queue.writeTexture({texture:r,mipLevel:l,origin:{x:0,y:0,z:g}},c.data,{offset:g*p,bytesPerRow:h,rowsPerImage:Math.ceil(d/s.height)},{width:Math.ceil(u/s.width)*s.width,height:Math.ceil(d/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===ie.BC1RGBAUnorm||e===ie.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.BC2RGBAUnorm||e===ie.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.BC3RGBAUnorm||e===ie.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.BC4RUnorm||e===ie.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===ie.BC5RGUnorm||e===ie.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===ie.BC6HRGBUFloat||e===ie.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===ie.BC7RGBAUnorm||e===ie.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.ETC2RGB8Unorm||e===ie.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.ETC2RGB8A1Unorm||e===ie.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.ETC2RGBA8Unorm||e===ie.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===ie.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===ie.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===ie.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===ie.ASTC4x4Unorm||e===ie.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.ASTC5x4Unorm||e===ie.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===ie.ASTC5x5Unorm||e===ie.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===ie.ASTC6x5Unorm||e===ie.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===ie.ASTC6x6Unorm||e===ie.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===ie.ASTC8x5Unorm||e===ie.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===ie.ASTC8x6Unorm||e===ie.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===ie.ASTC8x8Unorm||e===ie.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===ie.ASTC10x5Unorm||e===ie.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===ie.ASTC10x6Unorm||e===ie.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===ie.ASTC10x8Unorm||e===ie.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===ie.ASTC10x10Unorm||e===ie.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===ie.ASTC12x10Unorm||e===ie.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===ie.ASTC12x12Unorm||e===ie.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let r=D1.ClampToEdge;return e===Eu?r=D1.Repeat:e===Tu&&(r=D1.MirrorRepeat),r}_convertFilterMode(e){let r=Zc.Linear;return(e===qn||e===zy||e===qs)&&(r=Zc.Nearest),r}_getBytesPerTexel(e){if(e===ie.R8Unorm||e===ie.R8Snorm||e===ie.R8Uint||e===ie.R8Sint)return 1;if(e===ie.R16Uint||e===ie.R16Sint||e===ie.R16Float||e===ie.RG8Unorm||e===ie.RG8Snorm||e===ie.RG8Uint||e===ie.RG8Sint)return 2;if(e===ie.R32Uint||e===ie.R32Sint||e===ie.R32Float||e===ie.RG16Uint||e===ie.RG16Sint||e===ie.RG16Float||e===ie.RGBA8Unorm||e===ie.RGBA8UnormSRGB||e===ie.RGBA8Snorm||e===ie.RGBA8Uint||e===ie.RGBA8Sint||e===ie.BGRA8Unorm||e===ie.BGRA8UnormSRGB||e===ie.RGB9E5UFloat||e===ie.RGB10A2Unorm||e===ie.RG11B10UFloat||e===ie.Depth32Float||e===ie.Depth24Plus||e===ie.Depth24PlusStencil8||e===ie.Depth32FloatStencil8)return 4;if(e===ie.RG32Uint||e===ie.RG32Sint||e===ie.RG32Float||e===ie.RGBA16Uint||e===ie.RGBA16Sint||e===ie.RGBA16Float)return 8;if(e===ie.RGBA32Uint||e===ie.RGBA32Sint||e===ie.RGBA32Float)return 16}_getTypedArrayType(e){if(e===ie.R8Uint)return Uint8Array;if(e===ie.R8Sint)return Int8Array;if(e===ie.R8Unorm)return Uint8Array;if(e===ie.R8Snorm)return Int8Array;if(e===ie.RG8Uint)return Uint8Array;if(e===ie.RG8Sint)return Int8Array;if(e===ie.RG8Unorm)return Uint8Array;if(e===ie.RG8Snorm)return Int8Array;if(e===ie.RGBA8Uint)return Uint8Array;if(e===ie.RGBA8Sint)return Int8Array;if(e===ie.RGBA8Unorm)return Uint8Array;if(e===ie.RGBA8Snorm)return Int8Array;if(e===ie.R16Uint)return Uint16Array;if(e===ie.R16Sint)return Int16Array;if(e===ie.RG16Uint)return Uint16Array;if(e===ie.RG16Sint)return Int16Array;if(e===ie.RGBA16Uint)return Uint16Array;if(e===ie.RGBA16Sint)return Int16Array;if(e===ie.R16Float||e===ie.RG16Float||e===ie.RGBA16Float)return Uint16Array;if(e===ie.R32Uint)return Uint32Array;if(e===ie.R32Sint)return Int32Array;if(e===ie.R32Float)return Float32Array;if(e===ie.RG32Uint)return Uint32Array;if(e===ie.RG32Sint)return Int32Array;if(e===ie.RG32Float)return Float32Array;if(e===ie.RGBA32Uint)return Uint32Array;if(e===ie.RGBA32Sint)return Int32Array;if(e===ie.RGBA32Float)return Float32Array;if(e===ie.BGRA8Unorm||e===ie.BGRA8UnormSRGB)return Uint8Array;if(e===ie.RGB10A2Unorm||e===ie.RGB9E5UFloat||e===ie.RG11B10UFloat)return Uint32Array;if(e===ie.Depth32Float)return Float32Array;if(e===ie.Depth24Plus||e===ie.Depth24PlusStencil8)return Uint32Array;if(e===ie.Depth32FloatStencil8)return Float32Array}_getDimension(e){let r;return e.isData3DTexture?r=dL.ThreeD:r=dL.TwoD,r}}function OE(n,e=null){const r=n.format,i=n.type,o=n.colorSpace;let s;if(n.isCompressedTexture===!0||n.isCompressedArrayTexture===!0)switch(r){case nc:s=o===Lt?ie.BC1RGBAUnormSRGB:ie.BC1RGBAUnorm;break;case rc:s=o===Lt?ie.BC2RGBAUnormSRGB:ie.BC2RGBAUnorm;break;case ic:s=o===Lt?ie.BC3RGBAUnormSRGB:ie.BC3RGBAUnorm;break;case Af:s=o===Lt?ie.ETC2RGB8UnormSRGB:ie.ETC2RGB8Unorm;break;case Nf:s=o===Lt?ie.ETC2RGBA8UnormSRGB:ie.ETC2RGBA8Unorm;break;case Pf:s=o===Lt?ie.ASTC4x4UnormSRGB:ie.ASTC4x4Unorm;break;case Of:s=o===Lt?ie.ASTC5x4UnormSRGB:ie.ASTC5x4Unorm;break;case If:s=o===Lt?ie.ASTC5x5UnormSRGB:ie.ASTC5x5Unorm;break;case Df:s=o===Lt?ie.ASTC6x5UnormSRGB:ie.ASTC6x5Unorm;break;case Lf:s=o===Lt?ie.ASTC6x6UnormSRGB:ie.ASTC6x6Unorm;break;case Ff:s=o===Lt?ie.ASTC8x5UnormSRGB:ie.ASTC8x5Unorm;break;case Uf:s=o===Lt?ie.ASTC8x6UnormSRGB:ie.ASTC8x6Unorm;break;case Bf:s=o===Lt?ie.ASTC8x8UnormSRGB:ie.ASTC8x8Unorm;break;case $f:s=o===Lt?ie.ASTC10x5UnormSRGB:ie.ASTC10x5Unorm;break;case zf:s=o===Lt?ie.ASTC10x6UnormSRGB:ie.ASTC10x6Unorm;break;case kf:s=o===Lt?ie.ASTC10x8UnormSRGB:ie.ASTC10x8Unorm;break;case Vf:s=o===Lt?ie.ASTC10x10UnormSRGB:ie.ASTC10x10Unorm;break;case Gf:s=o===Lt?ie.ASTC12x10UnormSRGB:ie.ASTC12x10Unorm;break;case Hf:s=o===Lt?ie.ASTC12x12UnormSRGB:ie.ASTC12x12Unorm;break;case ni:s=o===Lt?ie.RGBA8UnormSRGB:ie.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}else switch(r){case ni:switch(i){case uu:s=ie.RGBA8Snorm;break;case du:s=ie.RGBA16Sint;break;case Cs:s=ie.RGBA16Uint;break;case rr:s=ie.RGBA32Uint;break;case Kr:s=ie.RGBA32Sint;break;case mi:s=o===Lt?ie.RGBA8UnormSRGB:ie.RGBA8Unorm;break;case Qr:s=ie.RGBA16Float;break;case pr:s=ie.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case bg:switch(i){case m_:s=ie.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",i)}break;case Sg:switch(i){case uu:s=ie.R8Snorm;break;case du:s=ie.R16Sint;break;case Cs:s=ie.R16Uint;break;case rr:s=ie.R32Uint;break;case Kr:s=ie.R32Sint;break;case mi:s=ie.R8Unorm;break;case Qr:s=ie.R16Float;break;case pr:s=ie.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case Mu:switch(i){case uu:s=ie.RG8Snorm;break;case du:s=ie.RG16Sint;break;case Cs:s=ie.RG16Uint;break;case rr:s=ie.RG32Uint;break;case Kr:s=ie.RG32Sint;break;case mi:s=ie.RG8Unorm;break;case Qr:s=ie.RG16Float;break;case pr:s=ie.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case Js:switch(i){case Cs:s=ie.Depth16Unorm;break;case rr:s=ie.Depth24Plus;break;case pr:s=ie.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case ia:switch(i){case ra:s=ie.Depth24PlusStencil8;break;case pr:e&&e.features.has(PE.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=ie.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;case ah:switch(i){case Kr:s=ie.R32Sint;break;case rr:s=ie.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",i)}break;case lh:switch(i){case Kr:s=ie.RG32Sint;break;case rr:s=ie.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",i)}break;case ch:switch(i){case Kr:s=ie.RGBA32Sint;break;case rr:s=ie.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}return s}const mwe=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,gwe=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,fL={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},vwe=n=>{n=n.trim();const e=n.match(mwe);if(e!==null&&e.length===4){const r=e[2],i=[];let o=null;for(;(o=gwe.exec(r))!==null;)i.push({name:o[1],type:o[2]});const s=[];for(let d=0;d<i.length;d++){const{name:f,type:h}=i[d];let p=h;p.startsWith("ptr")?p="pointer":(p.startsWith("texture")&&(p=h.split("<")[0]),p=fL[p]),s.push(new KR(p,f))}const a=n.substring(e[0].length),l=e[3]||"void",c=e[1]!==void 0?e[1]:"";return{type:fL[l]||l,inputs:s,name:c,inputsCode:r,blockCode:a,outputType:l}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class ywe extends YR{constructor(e){const{type:r,inputs:i,name:o,inputsCode:s,blockCode:a,outputType:l}=vwe(e);super(r,i,o),this.inputsCode=s,this.blockCode=a,this.outputType=l}getCode(e=this.name){const r=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${r}`+this.blockCode}}class xwe extends cV{parseFunction(e){return new ywe(e)}}const _d=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},_we={[ka.READ_ONLY]:"read",[ka.WRITE_ONLY]:"write",[ka.READ_WRITE]:"read_write"},hL={[Eu]:"repeat",[Ws]:"clamp",[Tu]:"mirror"},n0={vertex:_d?_d.VERTEX:1,fragment:_d?_d.FRAGMENT:2,compute:_d?_d.COMPUTE:4},pL={instance:!0,swizzleAssign:!1,storageBuffer:!0},bwe={"^^":"tsl_xor"},Swe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},mL={},$o={tsl_xor:new Dr("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Dr("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Dr("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Dr("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Dr("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Dr("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Dr("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Dr("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Dr("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Dr("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Dr("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Dr("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Dr(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},xp={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&($o.pow_float=new Dr("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),$o.pow_vec2=new Dr("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[$o.pow_float]),$o.pow_vec3=new Dr("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[$o.pow_float]),$o.pow_vec4=new Dr("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[$o.pow_float]),xp.pow_float="tsl_pow_float",xp.pow_vec2="tsl_pow_vec2",xp.pow_vec3="tsl_pow_vec3",xp.pow_vec4="tsl_pow_vec4");let yV="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(yV+=`diagnostic( off, derivative_uniformity );
`);class wwe extends aV{constructor(e,r){super(e,r,new xwe),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==_o}_generateTextureSample(e,r,i,o,s=this.shaderStage){return s==="fragment"?o?`textureSample( ${r}, ${r}_sampler, ${i}, ${o} )`:`textureSample( ${r}, ${r}_sampler, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i):this.generateTextureLod(e,r,i,o,"0")}_generateVideoSample(e,r,i=this.shaderStage){if(i==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${r}.x, 1.0 - ${r}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${i} shader.`)}_generateTextureSampleLevel(e,r,i,o,s,a=this.shaderStage){return a==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${r}, ${r}_sampler, ${i}, ${o} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i,o):this.generateTextureLod(e,r,i,s,o)}generateWrapFunction(e){const r=`tsl_coord_${hL[e.wrapS]}S_${hL[e.wrapT]}T`;let i=mL[r];if(i===void 0){const o=[];let s=`fn ${r}( coord : vec2f ) -> vec2f {

	return vec2f(
`;const a=(l,c)=>{l===Eu?(o.push($o.repeatWrapping_float),s+=`		tsl_repeatWrapping_float( coord.${c} )`):l===Ws?(o.push($o.clampWrapping_float),s+=`		tsl_clampWrapping_float( coord.${c} )`):l===Tu?(o.push($o.mirrorWrapping_float),s+=`		tsl_mirrorWrapping_float( coord.${c} )`):(s+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};a(e.wrapS,"x"),s+=`,
`,a(e.wrapT,"y"),s+=`
	);

}
`,mL[r]=i=new Dr(s,o)}return i.build(this),r}generateTextureDimension(e,r,i){const o=this.getDataFromNode(e,this.shaderStage,this.globalCache);o.dimensionsSnippet===void 0&&(o.dimensionsSnippet={});let s=o.dimensionsSnippet[i];if(o.dimensionsSnippet[i]===void 0){let a;e.isMultisampleRenderTargetTexture===!0?a=r:a=`${r}, u32( ${i} )`,s=new d5(new g5(`textureDimensions( ${a} )`,"uvec2")),o.dimensionsSnippet[i]=s}return s.build(this)}generateFilteredTexture(e,r,i,o="0u"){this._include("biquadraticTexture");const s=this.generateWrapFunction(e),a=this.generateTextureDimension(e,r,o);return`tsl_biquadraticTexture( ${r}, ${s}( ${i} ), ${a}, u32( ${o} ) )`}generateTextureLod(e,r,i,o,s="0u"){const a=this.generateWrapFunction(e),l=this.generateTextureDimension(e,r,s),c=`vec2u( ${a}( ${i} ) * vec2f( ${l} ) )`;return this.generateTextureLoad(e,r,c,o,s)}generateTextureLoad(e,r,i,o,s="0u"){return e.isVideoTexture===!0||e.isStorageTexture===!0?`textureLoad( ${r}, ${i} )`:o?`textureLoad( ${r}, ${i}, ${o}, u32( ${s} ) )`:`textureLoad( ${r}, ${i}, u32( ${s} ) )`}generateTextureStore(e,r,i,o){return`textureStore( ${r}, ${i}, ${o} )`}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===pr||this.isSampleCompare(e)===!1&&e.minFilter===qn&&e.magFilter===qn||e.isMultisampleRenderTargetTexture===!0}generateTexture(e,r,i,o,s=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(r,i,s):this.isUnfilterable(e)?a=this.generateTextureLod(e,r,i,o,"0",s):a=this._generateTextureSample(e,r,i,o,s),a}generateTextureGrad(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleGrad( ${r}, ${r}_sampler, ${i},  ${o[0]}, ${o[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${a} shader.`)}generateTextureCompare(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleCompare( ${r}, ${r}_sampler, ${i}, ${o} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}generateTextureLevel(e,r,i,o,s,a=this.shaderStage){let l=null;return e.isVideoTexture===!0?l=this._generateVideoSample(r,i,a):l=this._generateTextureSampleLevel(e,r,i,o,s,a),l}generateTextureBias(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleBias( ${r}, ${r}_sampler, ${i}, ${o} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${a} shader.`)}getPropertyName(e,r=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(r==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const i=e.name,o=e.type;return o==="texture"||o==="cubeTexture"||o==="storageTexture"||o==="texture3D"?i:o==="buffer"||o==="storageBuffer"||o==="indirectStorageBuffer"?`NodeBuffer_${e.id}.${i}`:e.groupNode.name+"."+i}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const r=bwe[e];return r!==void 0?(this._include(r),r):null}getNodeAccess(e,r){return r!=="compute"?ka.READ_ONLY:e.access}getStorageAccess(e,r){return _we[this.getNodeAccess(e,r)]}getUniformFromNode(e,r,i,o=null){const s=super.getUniformFromNode(e,r,i,o),a=this.getDataFromNode(e,i,this.globalCache);if(a.uniformGPU===void 0){let l;const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"){let f=null;const h=this.getNodeAccess(e,i);if(r==="texture"||r==="storageTexture"?f=new $_(s.name,s.node,c,h):r==="cubeTexture"?f=new mV(s.name,s.node,c,h):r==="texture3D"&&(f=new gV(s.name,s.node,c,h)),f.store=e.isStorageTextureNode===!0,f.setVisibility(n0[i]),i==="fragment"&&this.isUnfilterable(e.value)===!1&&f.store===!1){const p=new awe(`${s.name}_sampler`,s.node,c);p.setVisibility(n0[i]),d.push(p,f),l=[p,f]}else d.push(f),l=[f]}else if(r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"){const f=r==="buffer"?hV:uwe,h=new f(e,c);h.setVisibility(n0[i]),d.push(h),l=h}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new pV(u,c),h.setVisibility(n0[i]),f[u]=h,d.push(h)),l=this.getNodeUniform(s,r),h.addUniform(l)}a.uniformGPU=l}return s}getBuiltin(e,r,i,o=this.shaderStage){const s=this.builtins[o]||(this.builtins[o]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:r,type:i}),r}hasBuiltin(e,r=this.shaderStage){return this.builtins[r]!==void 0&&this.builtins[r].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),o=[];for(const a of r.inputs)o.push(a.name+" : "+this.getType(a.type));let s=`fn ${r.name}( ${o.join(", ")} ) -> ${this.getType(r.type)} {
${i.vars}
${i.code}
`;return i.result&&(s+=`	return ${i.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,r=this.shaderStage){(this.directives[r]||(this.directives[r]=new Set)).add(e)}getDirectives(e){const r=[],i=this.directives[e];if(i!==void 0)for(const o of i)r.push(`enable ${o};`);return r.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const r=[],i=this.builtins[e];if(i!==void 0)for(const{name:o,property:s,type:a}of i.values())r.push(`@builtin( ${o} ) ${s} : ${a}`);return r.join(`,
	`)}getScopedArray(e,r,i,o){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:r,bufferType:i,bufferCount:o}),e}getScopedArrays(e){if(e!=="compute")return;const r=[];for(const{name:i,scope:o,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const l=this.getType(s);r.push(`var<${o}> ${i}: array< ${l}, ${a} >;`)}return r.join(`
`)}getAttributes(e){const r=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const i=this.getBuiltins("attribute");i&&r.push(i);const o=this.getAttributesArray();for(let s=0,a=o.length;s<a;s++){const l=o[s],c=l.name,u=this.getType(l.type);r.push(`@location( ${s} ) ${c} : ${u}`)}}return r.join(`,
	`)}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let s=0;s<i.length;s++){const a=i[s];r.push(`	@location( ${s} ) m${s} : ${a}<f32>`)}const o=this.getBuiltins("output");return o&&r.push("	"+o),r.join(`,
`)}getStructs(e){const r=[],i=this.structs[e];for(let o=0,s=i.length;o<s;o++){const a=i[o],l=a.name;let c=`struct ${l} {
`;c+=this.getStructMembers(a),c+=`
}`,r.push(c),r.push(`
var<private> output : ${l};

`)}return r.join(`

`)}getVar(e,r){return`var ${r} : ${this.getType(e)}`}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const o of i)r.push(`	${this.getVar(o.type,o.name)};`);return`
${r.join(`
`)}
`}getVaryings(e){const r=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let l=0;l<s.length;l++){const c=s[l];if(c.needsInterpolation){let u=`@location( ${l} )`;/^(int|uint|ivec|uvec)/.test(c.type)&&(u+=" @interpolate( flat )"),r.push(`${u} ${c.name} : ${this.getType(c.type)}`)}else e==="vertex"&&a.includes(c)===!1&&a.push(c)}}const i=this.getBuiltins(e);i&&r.push(i);const o=r.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+o):o}getUniforms(e){const r=this.uniforms[e],i=[],o=[],s=[],a={};for(const c of r){const u=c.groupNode.name,d=this.bindingsIndexes[u];if(c.type==="texture"||c.type==="cubeTexture"||c.type==="storageTexture"||c.type==="texture3D"){const f=c.node.value;e==="fragment"&&this.isUnfilterable(f)===!1&&c.node.isStorageTextureNode!==!0&&(this.isSampleCompare(f)?i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler_comparison;`):i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler;`));let h,p="";if(f.isMultisampleRenderTargetTexture===!0&&(p="_multisampled"),f.isCubeTexture===!0)h="texture_cube<f32>";else if(f.isDataArrayTexture===!0||f.isCompressedArrayTexture===!0)h="texture_2d_array<f32>";else if(f.isDepthTexture===!0)h=`texture_depth${p}_2d`;else if(f.isVideoTexture===!0)h="texture_external";else if(f.isData3DTexture===!0)h="texture_3d<f32>";else if(c.node.isStorageTextureNode===!0){const g=OE(f),y=this.getStorageAccess(c.node,e);h=`texture_storage_2d<${g}, ${y}>`}else{const g=this.getComponentTypeFromTexture(f).charAt(0);h=`texture${p}_2d<${g}32>`}i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name} : ${h};`)}else if(c.type==="buffer"||c.type==="storageBuffer"||c.type==="indirectStorageBuffer"){const f=c.node,h=this.getType(f.bufferType),p=f.bufferCount,g=p>0&&c.type==="buffer"?", "+p:"",y=f.isAtomic?`atomic<${h}>`:`${h}`,v=`	${c.name} : array< ${y}${g} >
`,m=f.isStorageBufferNode?`storage, ${this.getStorageAccess(f,e)}`:"uniform";o.push(this._getWGSLStructBinding("NodeBuffer_"+f.id,v,m,d.binding++,d.group))}else{const f=this.getType(this.getVectorType(c.type)),h=c.groupNode.name;(a[h]||(a[h]={index:d.binding++,id:d.group,snippets:[]})).snippets.push(`	${c.name} : ${f}`)}}for(const c in a){const u=a[c];s.push(this._getWGSLStructBinding(c,u.snippets.join(`,
`),"uniform",u.index,u.id))}let l=i.join(`
`);return l+=o.join(`
`),l+=s.join(`
`),l}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){const i=e[r];i.uniforms=this.getUniforms(r),i.attributes=this.getAttributes(r),i.varyings=this.getVaryings(r),i.structs=this.getStructs(r),i.vars=this.getVars(r),i.codes=this.getCodes(r),i.directives=this.getDirectives(r),i.scopedArrays=this.getScopedArrays(r);let o=`// code

`;o+=this.flowCode[r];const s=this.flowNodes[r],a=s[s.length-1],l=a.outputNode,c=l!==void 0&&l.isOutputStructNode===!0;for(const u of s){const d=this.getFlowData(u),f=u.name;if(f&&(o.length>0&&(o+=`
`),o+=`	// flow -> ${f}
	`),o+=`${d.code}
	`,u===a&&r!=="compute"){if(o+=`// result

	`,r==="vertex")o+=`varyings.Vertex = ${d.result};`;else if(r==="fragment")if(c)i.returnType=l.nodeType,o+=`return ${d.result};`;else{let h="	@location(0) color: vec4<f32>";const p=this.getBuiltins("output");p&&(h+=`,
	`+p),i.returnType="OutputStruct",i.structs+=this._getWGSLStruct("OutputStruct",h),i.structs+=`
var<private> output : OutputStruct;

`,o+=`output.color = ${d.result};

	return output;`}}}i.flow=o}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,r=null){let i;return r!==null&&(i=this._getWGSLMethod(e+"_"+r)),i===void 0&&(i=this._getWGSLMethod(e)),i||e}getType(e){return Swe[e]||e}isAvailable(e){let r=pL[e];return r===void 0&&(e==="float32Filterable"?r=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(r=this.renderer.hasFeature("clip-distances")),pL[e]=r),r}_getWGSLMethod(e){return $o[e]!==void 0&&this._include(e),xp[e]}_include(e){const r=$o[e];return r.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(r),r}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${yV}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,r){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${r} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x + id.y * numWorkgroups.x * u32(${r}) + id.z * numWorkgroups.x * numWorkgroups.y * u32(${r});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,r){return`
struct ${e} {
${r}
};`}_getWGSLStructBinding(e,r,i,o=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,r)}
@binding( ${o} ) @group( ${s} )
var<${i}> ${e} : ${a};`}}class Cwe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let r;return e.depthTexture!==null?r=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?r=ie.Depth24PlusStencil8:e.depth&&(r=ie.Depth24Plus),r}getTextureFormatGPU(e){return this.backend.get(e).format}getCurrentColorFormat(e){let r;return e.textures!==null?r=this.getTextureFormatGPU(e.textures[0]):r=this.getPreferredCanvasFormat(),r}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,r){if(e.isPoints)return Gd.PointList;if(e.isLineSegments||e.isMesh&&r.wireframe===!0)return Gd.LineList;if(e.isLine)return Gd.LineStrip;if(e.isMesh)return Gd.TriangleList}getSampleCount(e){let r=1;return e>1&&(r=Math.pow(2,Math.floor(Math.log2(e))),r===2&&(r=4)),r}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){return navigator.userAgent.includes("Quest")?ie.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}const Ewe=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),Twe=new Map([[$k,["float16"]]]),Mwe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class Rwe{constructor(e){this.backend=e}createAttribute(e,r){const i=this._getBufferAttribute(e),o=this.backend,s=o.get(i);let a=s.buffer;if(a===void 0){const l=o.device;let c=i.array;if(e.normalized===!1&&(c.constructor===Int16Array||c.constructor===Uint16Array)){const d=new Uint32Array(c.length);for(let f=0;f<c.length;f++)d[f]=c[f];c=d}if(i.array=c,(i.isStorageBufferAttribute||i.isStorageInstancedBufferAttribute)&&i.itemSize===3){c=new c.constructor(i.count*4);for(let d=0;d<i.count;d++)c.set(i.array.subarray(d*3,d*3+3),d*4);i.itemSize=4,i.array=c}const u=c.byteLength+(4-c.byteLength%4)%4;a=l.createBuffer({label:i.name,size:u,usage:r,mappedAtCreation:!0}),new c.constructor(a.getMappedRange()).set(c),a.unmap(),s.buffer=a}}updateAttribute(e){const r=this._getBufferAttribute(e),i=this.backend,o=i.device,s=i.get(r).buffer,a=r.array,l=this._isTypedArray(a),c=r.updateRanges;if(c.length===0)o.queue.writeBuffer(s,0,a,0);else{const u=l?1:a.BYTES_PER_ELEMENT;for(let d=0,f=c.length;d<f;d++){const h=c[d],p=h.start*u,g=h.count*u;o.queue.writeBuffer(s,0,a,p,g)}r.clearUpdateRanges()}}createShaderVertexBuffers(e){const r=e.getAttributes(),i=new Map;for(let o=0;o<r.length;o++){const s=r[o],a=s.array.BYTES_PER_ELEMENT,l=this._getBufferAttribute(s);let c=i.get(l);if(c===void 0){let f,h;s.isInterleavedBufferAttribute===!0?(f=s.data.stride*a,h=s.data.isInstancedInterleavedBuffer?t0.Instance:t0.Vertex):(f=s.itemSize*a,h=s.isInstancedBufferAttribute?t0.Instance:t0.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(f=4),c={arrayStride:f,attributes:[],stepMode:h},i.set(l,c)}const u=this._getVertexFormat(s),d=s.isInterleavedBufferAttribute===!0?s.offset*a:0;c.attributes.push({shaderLocation:o,offset:d,format:u})}return Array.from(i.values())}destroyAttribute(e){const r=this.backend;r.get(this._getBufferAttribute(e)).buffer.destroy(),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,i=r.device,s=r.get(this._getBufferAttribute(e)).buffer,a=s.size,l=i.createBuffer({label:e.name,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=i.createCommandEncoder({});c.copyBufferToBuffer(s,0,l,0,a),l.unmap();const u=c.finish();return i.queue.submit([u]),await l.mapAsync(GPUMapMode.READ),l.getMappedRange()}_getVertexFormat(e){const{itemSize:r,normalized:i}=e,o=e.array.constructor,s=e.constructor;let a;if(r==1)a=Mwe.get(o);else{const c=(Twe.get(s)||Ewe.get(o))[i?1:0];if(c){const u=o.BYTES_PER_ELEMENT*r,f=Math.floor((u+3)/4)*4/o.BYTES_PER_ELEMENT;if(f%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${c}x${f}`}}return a||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class Awe{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const i=this.backend.device,o=[];let s=0;for(const a of e.bindings){const l={binding:s++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const c={};a.isStorageBuffer&&(a.visibility&4&&(a.access===ka.READ_WRITE||a.access===ka.WRITE_ONLY)?c.type=L1.Storage:c.type=L1.ReadOnlyStorage),l.buffer=c}else if(a.isSampler){const c={};a.texture.isDepthTexture&&a.texture.compareFunction!==null&&(c.type="comparison"),l.sampler=c}else if(a.isSampledTexture&&a.texture.isVideoTexture)l.externalTexture={};else if(a.isSampledTexture&&a.store){const c={};c.format=this.backend.get(a.texture).texture.format;const u=a.access;u===ka.READ_WRITE?c.access=F1.ReadWrite:u===ka.WRITE_ONLY?c.access=F1.WriteOnly:c.access=F1.ReadOnly,l.storageTexture=c}else if(a.isSampledTexture){const c={};if(a.texture.isMultisampleRenderTargetTexture===!0&&(c.multisampled=!0),a.texture.isDepthTexture)c.sampleType=rp.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const u=a.texture.type;u===Kr?c.sampleType=rp.SInt:u===rr?c.sampleType=rp.UInt:u===pr&&(this.backend.hasFeature("float32-filterable")?c.sampleType=rp.Float:c.sampleType=rp.UnfilterableFloat)}a.isSampledCubeTexture?c.viewDimension=Bo.Cube:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?c.viewDimension=Bo.TwoDArray:a.isSampledTexture3D&&(c.viewDimension=Bo.ThreeD),l.texture=c}else console.error(`WebGPUBindingUtils: Unsupported binding "${a}".`);o.push(l)}return i.createBindGroupLayout({entries:o})}createBindings(e,r,i,o=0){const{backend:s,bindGroupLayoutCache:a}=this,l=s.get(e);let c=a.get(e.bindingsReference);c===void 0&&(c=this.createBindingsLayout(e),a.set(e.bindingsReference,c));let u;i>0&&(l.groups===void 0&&(l.groups=[],l.versions=[]),l.versions[i]===o&&(u=l.groups[i])),u===void 0&&(u=this.createBindGroup(e,c),i>0&&(l.groups[i]=u,l.versions[i]=o)),l.group=u,l.layout=c}updateBinding(e){const r=this.backend,i=r.device,o=e.buffer,s=r.get(e).buffer;i.queue.writeBuffer(s,0,o,0)}createBindGroup(e,r){const i=this.backend,o=i.device;let s=0;const a=[];for(const l of e.bindings){if(l.isUniformBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.byteLength,d=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,f=o.createBuffer({label:"bindingBuffer_"+l.name,size:u,usage:d});c.buffer=f}a.push({binding:s,resource:{buffer:c.buffer}})}else if(l.isStorageBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.attribute;c.buffer=i.get(u).buffer}a.push({binding:s,resource:{buffer:c.buffer}})}else if(l.isSampler){const c=i.get(l.texture);a.push({binding:s,resource:c.sampler})}else if(l.isSampledTexture){const c=i.get(l.texture);let u;if(c.externalTexture!==void 0)u=o.importExternalTexture({source:c.externalTexture});else{const d=l.store?1:c.texture.mipLevelCount,f=`view-${c.texture.width}-${c.texture.height}-${d}`;if(u=c[f],u===void 0){const h=owe.All;let p;l.isSampledCubeTexture?p=Bo.Cube:l.isSampledTexture3D?p=Bo.ThreeD:l.texture.isDataArrayTexture||l.texture.isCompressedArrayTexture?p=Bo.TwoDArray:p=Bo.TwoD,u=c[f]=c.texture.createView({aspect:h,dimension:p,mipLevelCount:d})}}a.push({binding:s,resource:u})}s++}return o.createBindGroup({label:"bindGroup_"+e.name,layout:r,entries:a})}}class Nwe{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,r){const{object:i,material:o,geometry:s,pipeline:a}=e,{vertexProgram:l,fragmentProgram:c}=a,u=this.backend,d=u.device,f=u.utils,h=u.get(a),p=[];for(const L of e.getBindings()){const A=u.get(L);p.push(A.layout)}const g=u.attributeUtils.createShaderVertexBuffers(e);let y;o.transparent===!0&&o.blending!==Pi&&(y=this._getBlending(o));let v={};o.stencilWrite===!0&&(v={compare:this._getStencilCompare(o),failOp:this._getStencilOperation(o.stencilFail),depthFailOp:this._getStencilOperation(o.stencilZFail),passOp:this._getStencilOperation(o.stencilZPass)});const m=this._getColorWriteMask(o),x=[];if(e.context.textures!==null){const L=e.context.textures;for(let A=0;A<L.length;A++){const I=f.getTextureFormatGPU(L[A]);x.push({format:I,blend:y,writeMask:m})}}else{const L=f.getCurrentColorFormat(e.context);x.push({format:L,blend:y,writeMask:m})}const _=u.get(l).module,S=u.get(c).module,w=this._getPrimitiveState(i,s,o),C=this._getDepthCompare(o),E=f.getCurrentDepthStencilFormat(e.context),T=this._getSampleCount(e.context),M={label:`renderPipeline_${o.name||o.type}_${o.id}`,vertex:Object.assign({},_,{buffers:g}),fragment:Object.assign({},S,{targets:x}),primitive:w,multisample:{count:T,alphaToCoverageEnabled:o.alphaToCoverage&&T>1},layout:d.createPipelineLayout({bindGroupLayouts:p})},R={},N=e.context.depth,D=e.context.stencil;if((N===!0||D===!0)&&(N===!0&&(R.format=E,R.depthWriteEnabled=o.depthWrite,R.depthCompare=C),D===!0&&(R.stencilFront=v,R.stencilBack={},R.stencilReadMask=o.stencilFuncMask,R.stencilWriteMask=o.stencilWriteMask),M.depthStencil=R),r===null)h.pipeline=d.createRenderPipeline(M);else{const L=new Promise(A=>{d.createRenderPipelineAsync(M).then(I=>{h.pipeline=I,A()})});r.push(L)}}createBundleEncoder(e){const r=this.backend,{utils:i,device:o}=r,s=i.getCurrentDepthStencilFormat(e),a=i.getCurrentColorFormat(e),l=this._getSampleCount(e),c={label:"renderBundleEncoder",colorFormats:[a],depthStencilFormat:s,sampleCount:l};return o.createRenderBundleEncoder(c)}createComputePipeline(e,r){const i=this.backend,o=i.device,s=i.get(e.computeProgram).module,a=i.get(e),l=[];for(const c of r){const u=i.get(c);l.push(u.layout)}a.pipeline=o.createComputePipeline({compute:s,layout:o.createPipelineLayout({bindGroupLayouts:l})})}_getBlending(e){let r,i;const o=e.blending,s=e.blendSrc,a=e.blendDst,l=e.blendEquation;if(o===IM){const c=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,u=e.blendDstAlpha!==null?e.blendDstAlpha:a,d=e.blendEquationAlpha!==null?e.blendEquationAlpha:l;r={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(l)},i={srcFactor:this._getBlendFactor(c),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(d)}}else{const c=e.premultipliedAlpha,u=(d,f,h,p)=>{r={srcFactor:d,dstFactor:f,operation:Uc.Add},i={srcFactor:h,dstFactor:p,operation:Uc.Add}};if(c)switch(o){case qo:u(Ht.One,Ht.OneMinusSrcAlpha,Ht.One,Ht.OneMinusSrcAlpha);break;case wu:u(Ht.One,Ht.One,Ht.One,Ht.One);break;case Mf:u(Ht.Zero,Ht.OneMinusSrc,Ht.Zero,Ht.One);break;case Rf:u(Ht.Zero,Ht.Src,Ht.Zero,Ht.SrcAlpha);break}else switch(o){case qo:u(Ht.SrcAlpha,Ht.OneMinusSrcAlpha,Ht.One,Ht.OneMinusSrcAlpha);break;case wu:u(Ht.SrcAlpha,Ht.One,Ht.SrcAlpha,Ht.One);break;case Mf:u(Ht.Zero,Ht.OneMinusSrc,Ht.Zero,Ht.One);break;case Rf:u(Ht.Zero,Ht.Src,Ht.Zero,Ht.Src);break}}if(r!==void 0&&i!==void 0)return{color:r,alpha:i};console.error("THREE.WebGPURenderer: Invalid blending: ",o)}_getBlendFactor(e){let r;switch(e){case FM:r=Ht.Zero;break;case UM:r=Ht.One;break;case BM:r=Ht.Src;break;case $M:r=Ht.OneMinusSrc;break;case Cm:r=Ht.SrcAlpha;break;case Em:r=Ht.OneMinusSrcAlpha;break;case VM:r=Ht.Dst;break;case GM:r=Ht.OneMinusDstColor;break;case zM:r=Ht.DstAlpha;break;case kM:r=Ht.OneMinusDstAlpha;break;case HM:r=Ht.SrcAlphaSaturated;break;case Lbe:r=Ht.Constant;break;case Fbe:r=Ht.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return r}_getStencilCompare(e){let r;const i=e.stencilFunc;switch(i){case hce:r=Zr.Never;break;case dE:r=Zr.Always;break;case pce:r=Zr.Less;break;case gce:r=Zr.LessEqual;break;case mce:r=Zr.Equal;break;case xce:r=Zr.GreaterEqual;break;case vce:r=Zr.Greater;break;case yce:r=Zr.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",i)}return r}_getStencilOperation(e){let r;switch(e){case zc:r=Rl.Keep;break;case sce:r=Rl.Zero;break;case ace:r=Rl.Replace;break;case fce:r=Rl.Invert;break;case lce:r=Rl.IncrementClamp;break;case cce:r=Rl.DecrementClamp;break;case uce:r=Rl.IncrementWrap;break;case dce:r=Rl.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",r)}return r}_getBlendOperation(e){let r;switch(e){case xo:r=Uc.Add;break;case DM:r=Uc.Subtract;break;case LM:r=Uc.ReverseSubtract;break;case Ck:r=Uc.Min;break;case Ek:r=Uc.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return r}_getPrimitiveState(e,r,i){const o={},s=this.backend.utils;switch(o.topology=s.getPrimitiveTopology(e,i),r.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(o.stripIndexFormat=r.index.array instanceof Uint16Array?Kf.Uint16:Kf.Uint32),i.side){case Ps:o.frontFace=O1.CCW,o.cullMode=I1.Back;break;case er:o.frontFace=O1.CCW,o.cullMode=I1.Front;break;case Ri:o.frontFace=O1.CCW,o.cullMode=I1.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",i.side);break}return o}_getColorWriteMask(e){return e.colorWrite===!0?uL.All:uL.None}_getDepthCompare(e){let r;if(e.depthTest===!1)r=Zr.Always;else{const i=e.depthFunc;switch(i){case Tm:r=Zr.Never;break;case Mm:r=Zr.Always;break;case Rm:r=Zr.Less;break;case dc:r=Zr.LessEqual;break;case Am:r=Zr.Equal;break;case Nm:r=Zr.GreaterEqual;break;case Pm:r=Zr.Greater;break;case Om:r=Zr.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",i)}}return r}}class Pwe extends vV{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new Cwe(this),this.attributeUtils=new Rwe(this),this.bindingUtils=new Awe(this),this.pipelineUtils=new Nwe(this),this.textureUtils=new pwe(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const r=this.parameters;let i;if(r.device===void 0){const a={powerPreference:r.powerPreference},l=typeof navigator<"u"?await navigator.gpu.requestAdapter(a):null;if(l===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const c=Object.values(PE),u=[];for(const f of c)l.features.has(f)&&u.push(f);const d={requiredFeatures:u,requiredLimits:r.requiredLimits};i=await l.requestDevice(d)}else i=r.device;i.lost.then(a=>{const l={api:"WebGPU",message:a.message||"Unknown reason",reason:a.reason||null,originalEvent:a};e.onDeviceLost(l)});const o=r.context!==void 0?r.context:e.domElement.getContext("webgpu");this.device=i,this.context=o;const s=r.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(PE.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return Ru}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const i=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(i.depth,i.stencil).createView()});const o=e.colorAttachments[0];this.renderer.samples>0?o.view=this.colorBuffer.createView():o.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const r=e.colorAttachments[0];return this.renderer.samples>0?r.resolveTarget=this.context.getCurrentTexture().createView():r.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e){const r=e.renderTarget,i=this.get(r);let o=i.descriptors;if(o===void 0||i.width!==r.width||i.height!==r.height||i.activeMipmapLevel!==r.activeMipmapLevel||i.samples!==r.samples){o={},i.descriptors=o;const l=()=>{r.removeEventListener("dispose",l),this.delete(r)};r.addEventListener("dispose",l)}const s=e.getCacheKey();let a=o[s];if(a===void 0){const l=e.textures,c=[];for(let u=0;u<l.length;u++){const d=this.get(l[u]),f=d.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:Bo.TwoD});let h,p;d.msaaTexture!==void 0?(h=d.msaaTexture.createView(),p=f):(h=f,p=void 0),c.push({view:h,resolveTarget:p,loadOp:xr.Load,storeOp:Jr.Store})}if(a={colorAttachments:c},e.depth){const d={view:this.get(e.depthTexture).texture.createView()};a.depthStencilAttachment=d}o[s]=a,i.width=r.width,i.height=r.height,i.samples=r.samples,i.activeMipmapLevel=r.activeMipmapLevel}return a}beginRender(e){const r=this.get(e),i=this.device,o=e.occlusionQueryCount;let s;o>0&&(r.currentOcclusionQuerySet&&r.currentOcclusionQuerySet.destroy(),r.currentOcclusionQueryBuffer&&r.currentOcclusionQueryBuffer.destroy(),r.currentOcclusionQuerySet=r.occlusionQuerySet,r.currentOcclusionQueryBuffer=r.occlusionQueryBuffer,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,s=i.createQuerySet({type:"occlusion",count:o,label:`occlusionQuerySet_${e.id}`}),r.occlusionQuerySet=s,r.occlusionQueryIndex=0,r.occlusionQueryObjects=new Array(o),r.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e),this.initTimestampQuery(e,a),a.occlusionQuerySet=s;const l=a.depthStencilAttachment;if(e.textures!==null){const d=a.colorAttachments;for(let f=0;f<d.length;f++){const h=d[f];e.clearColor?(h.clearValue=f===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=xr.Clear,h.storeOp=Jr.Store):(h.loadOp=xr.Load,h.storeOp=Jr.Store)}}else{const d=a.colorAttachments[0];e.clearColor?(d.clearValue=e.clearColorValue,d.loadOp=xr.Clear,d.storeOp=Jr.Store):(d.loadOp=xr.Load,d.storeOp=Jr.Store)}e.depth&&(e.clearDepth?(l.depthClearValue=e.clearDepthValue,l.depthLoadOp=xr.Clear,l.depthStoreOp=Jr.Store):(l.depthLoadOp=xr.Load,l.depthStoreOp=Jr.Store)),e.stencil&&(e.clearStencil?(l.stencilClearValue=e.clearStencilValue,l.stencilLoadOp=xr.Clear,l.stencilStoreOp=Jr.Store):(l.stencilLoadOp=xr.Load,l.stencilStoreOp=Jr.Store));const c=i.createCommandEncoder({label:"renderContext_"+e.id}),u=c.beginRenderPass(a);if(r.descriptor=a,r.encoder=c,r.currentPass=u,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:d,y:f,width:h,height:p}=e.scissorValue;u.setScissorRect(d,f,h,p)}}finishRender(e){const r=this.get(e),i=e.occlusionQueryCount;if(r.renderBundles.length>0&&r.currentPass.executeBundles(r.renderBundles),i>r.occlusionQueryIndex&&r.currentPass.endOcclusionQuery(),r.currentPass.end(),i>0){const o=i*8;let s=this.occludedResolveCache.get(o);s===void 0&&(s=this.device.createBuffer({size:o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(o,s));const a=this.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});r.encoder.resolveQuerySet(r.occlusionQuerySet,0,i,s,0),r.encoder.copyBufferToBuffer(s,0,a,0,o),r.occlusionQueryBuffer=a,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,r.encoder),this.device.queue.submit([r.encoder.finish()]),e.textures!==null){const o=e.textures;for(let s=0;s<o.length;s++){const a=o[s];a.generateMipmaps===!0&&this.textureUtils.generateMipmaps(a)}}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}async resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueryBuffer:i,currentOcclusionQueryObjects:o}=r;if(i&&o){const s=new WeakSet;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueryBuffer=null,await i.mapAsync(GPUMapMode.READ);const a=i.getMappedRange(),l=new BigUint64Array(a);for(let c=0;c<o.length;c++)l[c]!==BigInt(0)&&s.add(o[c]);i.destroy(),r.occluded=s}}updateViewport(e){const{currentPass:r}=this.get(e),{x:i,y:o,width:s,height:a,minDepth:l,maxDepth:c}=e.viewportValue;r.setViewport(i,o,s,a,l,c)}clear(e,r,i,o=null){const s=this.device,a=this.renderer;let l=[],c,u,d,f;if(e){const g=this.getClearColor();if(this.renderer.alpha===!0){const y=g.a;u={r:g.r*y,g:g.g*y,b:g.b*y,a:y}}else u={r:g.r,g:g.g,b:g.b,a:g.a}}if(o===null){d=a.depth,f=a.stencil;const g=this._getDefaultRenderPassDescriptor();if(e){l=g.colorAttachments;const y=l[0];y.clearValue=u,y.loadOp=xr.Clear,y.storeOp=Jr.Store}(d||f)&&(c=g.depthStencilAttachment)}else{if(d=o.depth,f=o.stencil,e)for(const g of o.textures){const y=this.get(g),v=y.texture.createView();let m,x;y.msaaTexture!==void 0?(m=y.msaaTexture.createView(),x=v):(m=v,x=void 0),l.push({view:m,resolveTarget:x,clearValue:u,loadOp:xr.Clear,storeOp:Jr.Store})}(d||f)&&(c={view:this.get(o.depthTexture).texture.createView()})}d&&(r?(c.depthLoadOp=xr.Clear,c.depthClearValue=a.getClearDepth(),c.depthStoreOp=Jr.Store):(c.depthLoadOp=xr.Load,c.depthStoreOp=Jr.Store)),f&&(i?(c.stencilLoadOp=xr.Clear,c.stencilClearValue=a.getClearStencil(),c.stencilStoreOp=Jr.Store):(c.stencilLoadOp=xr.Load,c.stencilStoreOp=Jr.Store));const h=s.createCommandEncoder({});h.beginRenderPass({colorAttachments:l,depthStencilAttachment:c}).end(),s.queue.submit([h.finish()])}beginCompute(e){const r=this.get(e),i={};this.initTimestampQuery(e,i),r.cmdEncoderGPU=this.device.createCommandEncoder(),r.passEncoderGPU=r.cmdEncoderGPU.beginComputePass(i)}compute(e,r,i,o){const{passEncoderGPU:s}=this.get(e),a=this.get(o).pipeline;s.setPipeline(a);for(let d=0,f=i.length;d<f;d++){const h=i[d],p=this.get(h);s.setBindGroup(d,p.group)}const l=this.device.limits.maxComputeWorkgroupsPerDimension,c=this.get(r);c.dispatchSize===void 0&&(c.dispatchSize={x:0,y:1,z:1});const{dispatchSize:u}=c;r.dispatchCount>l?(u.x=Math.min(r.dispatchCount,l),u.y=Math.ceil(r.dispatchCount/l)):u.x=r.dispatchCount,s.dispatchWorkgroups(u.x,u.y,u.z)}finishCompute(e){const r=this.get(e);r.passEncoderGPU.end(),this.prepareTimestampBuffer(e,r.cmdEncoderGPU),this.device.queue.submit([r.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,r){const{object:i,context:o,pipeline:s}=e,a=e.getBindings(),l=this.get(o),c=this.get(s).pipeline,u=l.currentSets,d=l.currentPass,f=e.getDrawParameters();if(f===null)return;u.pipeline!==c&&(d.setPipeline(c),u.pipeline=c);const h=u.bindingGroups;for(let v=0,m=a.length;v<m;v++){const x=a[v],_=this.get(x);h[x.index]!==x.id&&(d.setBindGroup(x.index,_.group),h[x.index]=x.id)}const p=e.getIndex(),g=p!==null;if(g===!0&&u.index!==p){const v=this.get(p).buffer,m=p.array instanceof Uint16Array?Kf.Uint16:Kf.Uint32;d.setIndexBuffer(v,m),u.index=p}const y=e.getVertexBuffers();for(let v=0,m=y.length;v<m;v++){const x=y[v];if(u.attributes[v]!==x){const _=this.get(x).buffer;d.setVertexBuffer(v,_),u.attributes[v]=x}}if(l.occlusionQuerySet!==void 0){const v=l.lastOcclusionObject;v!==i&&(v!==null&&v.occlusionTest===!0&&(d.endOcclusionQuery(),l.occlusionQueryIndex++),i.occlusionTest===!0&&(d.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=i),l.lastOcclusionObject=i)}if(i.isBatchedMesh===!0){const v=i._multiDrawStarts,m=i._multiDrawCounts,x=i._multiDrawCount,_=i._multiDrawInstances,S=g?p.array.BYTES_PER_ELEMENT:1;for(let w=0;w<x;w++){const C=_?_[w]:1,E=C>1?0:w;d.drawIndexed(m[w],C,v[w]/S,0,E)}}else if(g===!0){const{vertexCount:v,instanceCount:m,firstVertex:x}=f,_=e.getIndirect();if(_!==null){const S=this.get(_).buffer;d.drawIndexedIndirect(S,0)}else d.drawIndexed(v,m,x,0,0);r.update(i,v,m)}else{const{vertexCount:v,instanceCount:m,firstVertex:x}=f,_=e.getIndirect();if(_!==null){const S=this.get(_).buffer;d.drawIndirect(S,0)}else d.draw(v,m,x,0);r.update(i,v,m)}}needsRenderUpdate(e){const r=this.get(e),{object:i,material:o}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),l=s.getCurrentColorSpace(e.context),c=s.getCurrentColorFormat(e.context),u=s.getCurrentDepthStencilFormat(e.context),d=s.getPrimitiveTopology(i,o);let f=!1;return(r.material!==o||r.materialVersion!==o.version||r.transparent!==o.transparent||r.blending!==o.blending||r.premultipliedAlpha!==o.premultipliedAlpha||r.blendSrc!==o.blendSrc||r.blendDst!==o.blendDst||r.blendEquation!==o.blendEquation||r.blendSrcAlpha!==o.blendSrcAlpha||r.blendDstAlpha!==o.blendDstAlpha||r.blendEquationAlpha!==o.blendEquationAlpha||r.colorWrite!==o.colorWrite||r.depthWrite!==o.depthWrite||r.depthTest!==o.depthTest||r.depthFunc!==o.depthFunc||r.stencilWrite!==o.stencilWrite||r.stencilFunc!==o.stencilFunc||r.stencilFail!==o.stencilFail||r.stencilZFail!==o.stencilZFail||r.stencilZPass!==o.stencilZPass||r.stencilFuncMask!==o.stencilFuncMask||r.stencilWriteMask!==o.stencilWriteMask||r.side!==o.side||r.alphaToCoverage!==o.alphaToCoverage||r.sampleCount!==a||r.colorSpace!==l||r.colorFormat!==c||r.depthStencilFormat!==u||r.primitiveTopology!==d||r.clippingContextCacheKey!==e.clippingContextCacheKey)&&(r.material=o,r.materialVersion=o.version,r.transparent=o.transparent,r.blending=o.blending,r.premultipliedAlpha=o.premultipliedAlpha,r.blendSrc=o.blendSrc,r.blendDst=o.blendDst,r.blendEquation=o.blendEquation,r.blendSrcAlpha=o.blendSrcAlpha,r.blendDstAlpha=o.blendDstAlpha,r.blendEquationAlpha=o.blendEquationAlpha,r.colorWrite=o.colorWrite,r.depthWrite=o.depthWrite,r.depthTest=o.depthTest,r.depthFunc=o.depthFunc,r.stencilWrite=o.stencilWrite,r.stencilFunc=o.stencilFunc,r.stencilFail=o.stencilFail,r.stencilZFail=o.stencilZFail,r.stencilZPass=o.stencilZPass,r.stencilFuncMask=o.stencilFuncMask,r.stencilWriteMask=o.stencilWriteMask,r.side=o.side,r.alphaToCoverage=o.alphaToCoverage,r.sampleCount=a,r.colorSpace=l,r.colorFormat=c,r.depthStencilFormat=u,r.primitiveTopology=d,r.clippingContextCacheKey=e.clippingContextCacheKey,f=!0),f}getRenderCacheKey(e){const{object:r,material:i}=e,o=this.utils,s=e.context;return[i.transparent,i.blending,i.premultipliedAlpha,i.blendSrc,i.blendDst,i.blendEquation,i.blendSrcAlpha,i.blendDstAlpha,i.blendEquationAlpha,i.colorWrite,i.depthWrite,i.depthTest,i.depthFunc,i.stencilWrite,i.stencilFunc,i.stencilFail,i.stencilZFail,i.stencilZPass,i.stencilFuncMask,i.stencilWriteMask,i.side,o.getSampleCountRenderContext(s),o.getCurrentColorSpace(s),o.getCurrentColorFormat(s),o.getCurrentDepthStencilFormat(s),o.getPrimitiveTopology(r,i),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,o,s,a){return this.textureUtils.copyTextureToBuffer(e,r,i,o,s,a)}initTimestampQuery(e,r){if(!this.trackTimestamp)return;const i=this.get(e);if(!i.timeStampQuerySet){const o=e.isComputeNode?"compute":"render",s=this.device.createQuerySet({type:"timestamp",count:2,label:`timestamp_${o}_${e.id}`});Object.assign(r,{timestampWrites:{querySet:s,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}),i.timeStampQuerySet=s}}prepareTimestampBuffer(e,r){if(!this.trackTimestamp)return;const i=this.get(e),o=2*BigInt64Array.BYTES_PER_ELEMENT;i.currentTimestampQueryBuffers===void 0&&(i.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})});const{resolveBuffer:s,resultBuffer:a}=i.currentTimestampQueryBuffers;r.resolveQuerySet(i.timeStampQuerySet,0,2,s,0),a.mapState==="unmapped"&&r.copyBufferToBuffer(s,0,a,0,o)}async resolveTimestampAsync(e,r="render"){if(!this.trackTimestamp)return;const i=this.get(e);if(i.currentTimestampQueryBuffers===void 0)return;const{resultBuffer:o}=i.currentTimestampQueryBuffers;await this.device.queue.onSubmittedWorkDone(),o.mapState==="unmapped"&&o.mapAsync(GPUMapMode.READ).then(()=>{const s=new BigUint64Array(o.getMappedRange()),a=Number(s[1]-s[0])/1e6;this.renderer.info.updateTimestamp(r,a),o.unmap()})}createNodeBuilder(e,r){return new wwe(e,r)}createProgram(e){const r=this.get(e);r.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,r){this.pipelineUtils.createRenderPipeline(e,r)}createComputePipeline(e,r){this.pipelineUtils.createComputePipeline(e,r)}beginBundle(e){const r=this.get(e);r._currentPass=r.currentPass,r._currentSets=r.currentSets,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,r){const i=this.get(e),s=i.currentPass.finish();this.get(r).bundleGPU=s,i.currentSets=i._currentSets,i.currentPass=i._currentPass}addBundle(e,r){this.get(e).renderBundles.push(this.get(r).bundleGPU)}createBindings(e,r,i,o){this.bindingUtils.createBindings(e,r,i,o)}updateBindings(e,r,i,o){this.bindingUtils.createBindings(e,r,i,o)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,r,i=null,o=null,s=0){let a=0,l=0,c=0,u=0,d=0,f=0,h=e.image.width,p=e.image.height;i!==null&&(u=i.x,d=i.y,f=i.z||0,h=i.width,p=i.height),o!==null&&(a=o.x,l=o.y,c=o.z||0);const g=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+r.id}),y=this.get(e).texture,v=this.get(r).texture;g.copyTextureToTexture({texture:y,mipLevel:s,origin:{x:u,y:d,z:f}},{texture:v,mipLevel:s,origin:{x:a,y:l,z:c}},[h,p,1]),this.device.queue.submit([g.finish()])}copyFramebufferToTexture(e,r,i){const o=this.get(r);let s=null;r.renderTarget?e.isDepthTexture?s=this.get(r.depthTexture).texture:s=this.get(r.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(r.depth,r.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let l;if(o.currentPass?(o.currentPass.end(),l=o.encoder):l=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),l.copyTextureToTexture({texture:s,origin:[i.x,i.y,0]},{texture:a},[i.z,i.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),o.currentPass){const{descriptor:c}=o;for(let u=0;u<c.colorAttachments.length;u++)c.colorAttachments[u].loadOp=xr.Load;if(r.depth&&(c.depthStencilAttachment.depthLoadOp=xr.Load),r.stencil&&(c.depthStencilAttachment.stencilLoadOp=xr.Load),o.currentPass=l.beginRenderPass(c),o.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.viewport&&this.updateViewport(r),r.scissor){const{x:u,y:d,width:f,height:h}=r.scissorValue;o.currentPass.setScissorRect(u,d,f,h)}}else this.device.queue.submit([l.finish()])}}class Owe extends Xk{constructor(e,r,i,o,s,a){super(e,r,i,o,s,a),this.iesMap=null}copy(e,r){return super.copy(e,r),this.iesMap=e.iesMap,this}}class Iwe extends uV{constructor(){super(),this.addMaterial(T_e,"MeshPhongMaterial"),this.addMaterial(X5,"MeshStandardMaterial"),this.addMaterial(fbe,"MeshPhysicalMaterial"),this.addMaterial(gbe,"MeshToonMaterial"),this.addMaterial(x_e,"MeshBasicMaterial"),this.addMaterial(C_e,"MeshLambertMaterial"),this.addMaterial(h_e,"MeshNormalMaterial"),this.addMaterial(_be,"MeshMatcapMaterial"),this.addMaterial(l_e,"LineBasicMaterial"),this.addMaterial(u_e,"LineDashedMaterial"),this.addMaterial(Sbe,"PointsMaterial"),this.addMaterial(Tbe,"SpriteMaterial"),this.addMaterial(Abe,"ShadowMaterial"),this.addLight(qSe,Gue),this.addLight(S1e,Kk),this.addLight(w1e,jue),this.addLight(lV,Xk),this.addLight(E1e,Yk),this.addLight(T1e,zue),this.addLight(M1e,que),this.addLight(C1e,Owe),this.addToneMapping(cSe,Rk),this.addToneMapping(uSe,Ak),this.addToneMapping(dSe,Nk),this.addToneMapping(hSe,Pk),this.addToneMapping(vSe,Ok),this.addToneMapping(ySe,Ik)}}class Dwe extends B1e{constructor(e={}){let r;e.forceWebGL?r=cL:(r=Pwe,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new cL(e)));const i=new r(e);super(i,e),this.library=new Iwe,this.isWebGPURenderer=!0}}const U1={type:"change"},ZR={type:"start"},JR={type:"end"},gL=1e-6,wn={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},r0=new je,Al=new je,Lwe=new Y,i0=new Y,B1=new Y,bd=new oa,vL=new Y,o0=new Y,$1=new Y,s0=new Y;class Fwe extends E_{constructor(e,r=null){super(e,r),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:ti.ROTATE,MIDDLE:ti.DOLLY,RIGHT:ti.PAN},this.state=wn.NONE,this.keyState=wn.NONE,this.target=new Y,this._lastPosition=new Y,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new Y,this._movePrev=new je,this._moveCurr=new je,this._lastAxis=new Y,this._zoomStart=new je,this._zoomEnd=new je,this._panStart=new je,this._panEnd=new je,this._pointers=[],this._pointerPositions={},this._onPointerMove=Bwe.bind(this),this._onPointerDown=Uwe.bind(this),this._onPointerUp=$we.bind(this),this._onPointerCancel=zwe.bind(this),this._onContextMenu=qwe.bind(this),this._onMouseWheel=Wwe.bind(this),this._onKeyDown=Vwe.bind(this),this._onKeyUp=kwe.bind(this),this._onTouchStart=Xwe.bind(this),this._onTouchMove=Kwe.bind(this),this._onTouchEnd=Ywe.bind(this),this._onMouseDown=Gwe.bind(this),this._onMouseMove=Hwe.bind(this),this._onMouseUp=jwe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,r!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-r.clientLeft,this.screen.top=e.top+window.pageYOffset-r.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>gL&&(this.dispatchEvent(U1),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>gL||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(U1),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=wn.NONE,this.keyState=wn.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(U1),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(Al.copy(this._panEnd).sub(this._panStart),Al.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,r=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;Al.x*=e,Al.y*=r}Al.multiplyScalar(this._eye.length()*this.panSpeed),i0.copy(this._eye).cross(this.object.up).setLength(Al.x),i0.add(Lwe.copy(this.object.up).setLength(Al.y)),this.object.position.add(i0),this.target.add(i0),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(Al.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){s0.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=s0.length();e?(this._eye.copy(this.object.position).sub(this.target),vL.copy(this._eye).normalize(),o0.copy(this.object.up).normalize(),$1.crossVectors(o0,vL).normalize(),o0.setLength(this._moveCurr.y-this._movePrev.y),$1.setLength(this._moveCurr.x-this._movePrev.x),s0.copy(o0.add($1)),B1.crossVectors(s0,this._eye).normalize(),e*=this.rotateSpeed,bd.setFromAxisAngle(B1,e),this._eye.applyQuaternion(bd),this.object.up.applyQuaternion(bd),this._lastAxis.copy(B1),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),bd.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(bd),this.object.up.applyQuaternion(bd)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===wn.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Gy.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Gy.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,r){return r0.set((e-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),r0}_getMouseOnCircle(e,r){return r0.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),r0}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r].pointerId==e.pointerId){this._pointers.splice(r,1);return}}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new je,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[r.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function Uwe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function Bwe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function $we(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function zwe(n){this._removePointer(n)}function kwe(){this.enabled!==!1&&(this.keyState=wn.NONE,window.addEventListener("keydown",this._onKeyDown))}function Vwe(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===wn.NONE&&(n.code===this.keys[wn.ROTATE]&&!this.noRotate?this.keyState=wn.ROTATE:n.code===this.keys[wn.ZOOM]&&!this.noZoom?this.keyState=wn.ZOOM:n.code===this.keys[wn.PAN]&&!this.noPan&&(this.keyState=wn.PAN)))}function Gwe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ti.DOLLY:this.state=wn.ZOOM;break;case ti.ROTATE:this.state=wn.ROTATE;break;case ti.PAN:this.state=wn.PAN;break;default:this.state=wn.NONE}const r=this.keyState!==wn.NONE?this.keyState:this.state;r===wn.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):r===wn.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):r===wn.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(ZR)}function Hwe(n){const e=this.keyState!==wn.NONE?this.keyState:this.state;e===wn.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===wn.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===wn.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function jwe(){this.state=wn.NONE,this.dispatchEvent(JR)}function Wwe(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(ZR),this.dispatchEvent(JR)}}function qwe(n){this.enabled!==!1&&n.preventDefault()}function Xwe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=wn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=wn.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,r=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+r*r);const i=(this._pointers[0].pageX+this._pointers[1].pageX)/2,o=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(i,o)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(ZR)}function Kwe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:const e=this._getSecondPointerPosition(n),r=n.pageX-e.x,i=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(r*r+i*i);const o=(n.pageX+e.x)/2,s=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(o,s));break}}function Ywe(n){switch(this._pointers.length){case 0:this.state=wn.NONE;break;case 1:this.state=wn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=wn.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){const r=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(r.x,r.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(JR)}const yL={type:"change"},eA={type:"start"},xV={type:"end"},a0=new x_,xL=new vs,Qwe=Math.cos(70*Gy.DEG2RAD),Ir=new Y,$i=2*Math.PI,Dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},z1=1e-6;class Zwe extends E_{constructor(e,r=null){super(e,r),this.state=Dn.NONE,this.enabled=!0,this.target=new Y,this.cursor=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ti.ROTATE,MIDDLE:ti.DOLLY,RIGHT:ti.PAN},this.touches={ONE:za.ROTATE,TWO:za.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Y,this._lastQuaternion=new oa,this._lastTargetPosition=new Y,this._quat=new oa().setFromUnitVectors(e.up,new Y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new mI,this._sphericalDelta=new mI,this._scale=1,this._panOffset=new Y,this._rotateStart=new je,this._rotateEnd=new je,this._rotateDelta=new je,this._panStart=new je,this._panEnd=new je,this._panDelta=new je,this._dollyStart=new je,this._dollyEnd=new je,this._dollyDelta=new je,this._dollyDirection=new Y,this._mouse=new je,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=eCe.bind(this),this._onPointerDown=Jwe.bind(this),this._onPointerUp=tCe.bind(this),this._onContextMenu=lCe.bind(this),this._onMouseWheel=iCe.bind(this),this._onKeyDown=oCe.bind(this),this._onTouchStart=sCe.bind(this),this._onTouchMove=aCe.bind(this),this._onMouseDown=nCe.bind(this),this._onMouseMove=rCe.bind(this),this._interceptControlDown=cCe.bind(this),this._interceptControlUp=uCe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(yL),this.update(),this.state=Dn.NONE}update(e=null){const r=this.object.position;Ir.copy(r).sub(this.target),Ir.applyQuaternion(this._quat),this._spherical.setFromVector3(Ir),this.autoRotate&&this.state===Dn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(i)&&isFinite(o)&&(i<-Math.PI?i+=$i:i>Math.PI&&(i-=$i),o<-Math.PI?o+=$i:o>Math.PI&&(o-=$i),i<=o?this._spherical.theta=Math.max(i,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+o)/2?Math.max(i,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Ir.setFromSpherical(this._spherical),Ir.applyQuaternion(this._quatInverse),r.copy(this.target).add(Ir),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const l=Ir.length();a=this._clampDistance(l*this._scale);const c=l-a;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),s=!!c}else if(this.object.isOrthographicCamera){const l=new Y(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=c!==this.object.zoom;const u=new Y(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(l),this.object.updateMatrixWorld(),a=Ir.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(a0.origin.copy(this.object.position),a0.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(a0.direction))<Qwe?this.object.lookAt(this.target):(xL.setFromNormalAndCoplanarPoint(this.object.up,this.target),a0.intersectPlane(xL,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>z1||8*(1-this._lastQuaternion.dot(this.object.quaternion))>z1||this._lastTargetPosition.distanceToSquared(this.target)>z1?(this.dispatchEvent(yL),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?$i/60*this.autoRotateSpeed*e:$i/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){Ir.setFromMatrixColumn(r,0),Ir.multiplyScalar(-e),this._panOffset.add(Ir)}_panUp(e,r){this.screenSpacePanning===!0?Ir.setFromMatrixColumn(r,1):(Ir.setFromMatrixColumn(r,0),Ir.crossVectors(this.object.up,Ir)),Ir.multiplyScalar(e),this._panOffset.add(Ir)}_pan(e,r){const i=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;Ir.copy(o).sub(this.target);let s=Ir.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*r*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),o=e-i.left,s=r-i.top,a=i.width,l=i.height;this._mouse.x=o/a*2-1,this._mouse.y=-(s/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft($i*this._rotateDelta.x/r.clientHeight),this._rotateUp($i*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp($i*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-$i*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft($i*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-$i*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._rotateStart.set(i,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panStart.set(i,o)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,o=e.pageY-r.y,s=Math.sqrt(i*i+o*o);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),o=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this._rotateEnd.set(o,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft($i*this._rotateDelta.x/r.clientHeight),this._rotateUp($i*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panEnd.set(i,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,o=e.pageY-r.y,s=Math.sqrt(i*i+o*o);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+r.x)*.5,l=(e.pageY+r.y)*.5;this._updateZoomParameters(a,l)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new je,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function Jwe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function eCe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function tCe(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(xV),this.state=Dn.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function nCe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ti.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Dn.DOLLY;break;case ti.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}break;case ti.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(eA)}function rCe(n){switch(this.state){case Dn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Dn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Dn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function iCe(n){this.enabled===!1||this.enableZoom===!1||this.state!==Dn.NONE||(n.preventDefault(),this.dispatchEvent(eA),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(xV))}function oCe(n){this.enabled!==!1&&this._handleKeyDown(n)}function sCe(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case za.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Dn.TOUCH_ROTATE;break;case za.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Dn.TOUCH_PAN;break;default:this.state=Dn.NONE}break;case 2:switch(this.touches.TWO){case za.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Dn.TOUCH_DOLLY_PAN;break;case za.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Dn.TOUCH_DOLLY_ROTATE;break;default:this.state=Dn.NONE}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(eA)}function aCe(n){switch(this._trackPointer(n),this.state){case Dn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Dn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Dn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Dn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Dn.NONE}}function lCe(n){this.enabled!==!1&&n.preventDefault()}function cCe(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function uCe(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const dCe={type:"change"},_L=1e-6,bL=new oa;class fCe extends E_{constructor(e,r=null){super(e,r),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new Y(0,0,0),this._rotationVector=new Y(0,0,0),this._lastQuaternion=new oa,this._lastPosition=new Y,this._status=0,this._onKeyDown=hCe.bind(this),this._onKeyUp=pCe.bind(this),this._onPointerMove=gCe.bind(this),this._onPointerDown=mCe.bind(this),this._onPointerUp=vCe.bind(this),this._onPointerCancel=yCe.bind(this),this._onContextMenu=xCe.bind(this),r!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const r=this.object,i=e*this.movementSpeed,o=e*this.rollSpeed;r.translateX(this._moveVector.x*i),r.translateY(this._moveVector.y*i),r.translateZ(this._moveVector.z*i),bL.set(this._rotationVector.x*o,this._rotationVector.y*o,this._rotationVector.z*o,1).normalize(),r.quaternion.multiply(bL),(this._lastPosition.distanceToSquared(r.position)>_L||8*(1-this._lastQuaternion.dot(r.quaternion))>_L)&&(this.dispatchEvent(dCe),this._lastQuaternion.copy(r.quaternion),this._lastPosition.copy(r.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function hCe(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function pCe(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function mCe(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function gCe(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),r=e.size[0]/2,i=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-r)/r,this._moveState.pitchDown=(n.pageY-e.offset[1]-i)/i,this._updateRotationVector()}}function vCe(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function yCe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function xCe(n){this.enabled!==!1&&n.preventDefault()}const _V={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Ng{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const _Ce=new wg(-1,1,1,-1,0,1);class bCe extends Bi{constructor(){super(),this.setAttribute("position",new gr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new gr([0,2,0,0,2,0],2))}}const SCe=new bCe;class bV{constructor(e){this._mesh=new $r(SCe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,_Ce)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class wCe extends Ng{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof qi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Hy.clone(e.uniforms),this.material=new qi({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new bV(this.material)}render(e,r,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class SL extends Ng{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,i){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,l;this.inverse?(a=0,l=1):(a=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,a,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class CCe extends Ng{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class ECe{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const i=e.getSize(new je);this._width=i.width,this._height=i.height,r=new As(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Qr}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new wCe(_V),this.copyPass.material.blending=Pi,this.clock=new Qk}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let i=!1;for(let o=0,s=this.passes.length;o<s;o++){const a=this.passes[o];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),a.needsSwap){if(i){const l=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}SL!==void 0&&(a instanceof SL?i=!0:a instanceof CCe&&(i=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new je);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(i,o),this.renderTarget2.setSize(i,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class TCe extends Ng{constructor(e,r,i=null,o=null,s=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=i,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Mt}render(e,r,i){const o=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=o}}function MCe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,gf(n,e)}var Ks=function(n){MCe(e,n);function e(r){var i;return i=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+r+" for more information.")||this,nn(i)}return e}(wy(Error));function k1(n){return Math.round(n*255)}function RCe(n,e,r){return k1(n)+","+k1(e)+","+k1(r)}function Qm(n,e,r,i){if(i===void 0&&(i=RCe),e===0)return i(r,r,r);var o=(n%360+360)%360/60,s=(1-Math.abs(2*r-1))*e,a=s*(1-Math.abs(o%2-1)),l=0,c=0,u=0;o>=0&&o<1?(l=s,c=a):o>=1&&o<2?(l=a,c=s):o>=2&&o<3?(c=s,u=a):o>=3&&o<4?(c=a,u=s):o>=4&&o<5?(l=a,u=s):o>=5&&o<6&&(l=s,u=a);var d=r-s/2,f=l+d,h=c+d,p=u+d;return i(f,h,p)}var wL={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function ACe(n){if(typeof n!="string")return n;var e=n.toLowerCase();return wL[e]?"#"+wL[e]:n}var NCe=/^#[a-fA-F0-9]{6}$/,PCe=/^#[a-fA-F0-9]{8}$/,OCe=/^#[a-fA-F0-9]{3}$/,ICe=/^#[a-fA-F0-9]{4}$/,V1=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,DCe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,LCe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,FCe=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Pu(n){if(typeof n!="string")throw new Ks(3);var e=ACe(n);if(e.match(NCe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(PCe)){var r=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:r}}if(e.match(OCe))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(ICe)){var i=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:i}}var o=V1.exec(e);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var s=DCe.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var a=LCe.exec(e);if(a){var l=parseInt(""+a[1],10),c=parseInt(""+a[2],10)/100,u=parseInt(""+a[3],10)/100,d="rgb("+Qm(l,c,u)+")",f=V1.exec(d);if(!f)throw new Ks(4,e,d);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)}}var h=FCe.exec(e.substring(0,50));if(h){var p=parseInt(""+h[1],10),g=parseInt(""+h[2],10)/100,y=parseInt(""+h[3],10)/100,v="rgb("+Qm(p,g,y)+")",m=V1.exec(v);if(!m)throw new Ks(4,e,v);return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new Ks(5)}function UCe(n){var e=n.red/255,r=n.green/255,i=n.blue/255,o=Math.max(e,r,i),s=Math.min(e,r,i),a=(o+s)/2;if(o===s)return n.alpha!==void 0?{hue:0,saturation:0,lightness:a,alpha:n.alpha}:{hue:0,saturation:0,lightness:a};var l,c=o-s,u=a>.5?c/(2-o-s):c/(o+s);switch(o){case e:l=(r-i)/c+(r<i?6:0);break;case r:l=(i-e)/c+2;break;default:l=(e-r)/c+4;break}return l*=60,n.alpha!==void 0?{hue:l,saturation:u,lightness:a,alpha:n.alpha}:{hue:l,saturation:u,lightness:a}}function Mc(n){return UCe(Pu(n))}var BCe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},IE=BCe;function Hc(n){var e=n.toString(16);return e.length===1?"0"+e:e}function G1(n){return Hc(Math.round(n*255))}function $Ce(n,e,r){return IE("#"+G1(n)+G1(e)+G1(r))}function ax(n,e,r){return Qm(n,e,r,$Ce)}function zCe(n,e,r){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number")return ax(n,e,r);if(typeof n=="object"&&e===void 0&&r===void 0)return ax(n.hue,n.saturation,n.lightness);throw new Ks(1)}function kCe(n,e,r,i){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number"&&typeof i=="number")return i>=1?ax(n,e,r):"rgba("+Qm(n,e,r)+","+i+")";if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?ax(n.hue,n.saturation,n.lightness):"rgba("+Qm(n.hue,n.saturation,n.lightness)+","+n.alpha+")";throw new Ks(2)}function DE(n,e,r){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number")return IE("#"+Hc(n)+Hc(e)+Hc(r));if(typeof n=="object"&&e===void 0&&r===void 0)return IE("#"+Hc(n.red)+Hc(n.green)+Hc(n.blue));throw new Ks(6)}function z_(n,e,r,i){if(typeof n=="string"&&typeof e=="number"){var o=Pu(n);return"rgba("+o.red+","+o.green+","+o.blue+","+e+")"}else{if(typeof n=="number"&&typeof e=="number"&&typeof r=="number"&&typeof i=="number")return i>=1?DE(n,e,r):"rgba("+n+","+e+","+r+","+i+")";if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?DE(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"}throw new Ks(7)}var VCe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},GCe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},HCe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},jCe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function Rc(n){if(typeof n!="object")throw new Ks(8);if(GCe(n))return z_(n);if(VCe(n))return DE(n);if(jCe(n))return kCe(n);if(HCe(n))return zCe(n);throw new Ks(8)}function SV(n,e,r){return function(){var o=r.concat(Array.prototype.slice.call(arguments));return o.length>=e?n.apply(this,o):SV(n,e,o)}}function No(n){return SV(n,n.length,[])}function WCe(n,e){if(e==="transparent")return e;var r=Mc(e);return Rc(ut({},r,{hue:r.hue+parseFloat(n)}))}No(WCe);function vh(n,e,r){return Math.max(n,Math.min(e,r))}function qCe(n,e){if(e==="transparent")return e;var r=Mc(e);return Rc(ut({},r,{lightness:vh(0,1,r.lightness-parseFloat(n))}))}No(qCe);function XCe(n,e){if(e==="transparent")return e;var r=Mc(e);return Rc(ut({},r,{saturation:vh(0,1,r.saturation-parseFloat(n))}))}No(XCe);function KCe(n,e){if(e==="transparent")return e;var r=Mc(e);return Rc(ut({},r,{lightness:vh(0,1,r.lightness+parseFloat(n))}))}No(KCe);function YCe(n,e,r){if(e==="transparent")return r;if(r==="transparent")return e;if(n===0)return r;var i=Pu(e),o=ut({},i,{alpha:typeof i.alpha=="number"?i.alpha:1}),s=Pu(r),a=ut({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),l=o.alpha-a.alpha,c=parseFloat(n)*2-1,u=c*l===-1?c:c+l,d=1+c*l,f=(u/d+1)/2,h=1-f,p={red:Math.floor(o.red*f+a.red*h),green:Math.floor(o.green*f+a.green*h),blue:Math.floor(o.blue*f+a.blue*h),alpha:o.alpha*parseFloat(n)+a.alpha*(1-parseFloat(n))};return z_(p)}var QCe=No(YCe),wV=QCe;function ZCe(n,e){if(e==="transparent")return e;var r=Pu(e),i=typeof r.alpha=="number"?r.alpha:1,o=ut({},r,{alpha:vh(0,1,(i*100+parseFloat(n)*100)/100)});return z_(o)}var JCe=No(ZCe),eEe=JCe;function tEe(n,e){if(e==="transparent")return e;var r=Mc(e);return Rc(ut({},r,{saturation:vh(0,1,r.saturation+parseFloat(n))}))}No(tEe);function nEe(n,e){return e==="transparent"?e:Rc(ut({},Mc(e),{hue:parseFloat(n)}))}No(nEe);function rEe(n,e){return e==="transparent"?e:Rc(ut({},Mc(e),{lightness:parseFloat(n)}))}No(rEe);function iEe(n,e){return e==="transparent"?e:Rc(ut({},Mc(e),{saturation:parseFloat(n)}))}No(iEe);function oEe(n,e){return e==="transparent"?e:wV(parseFloat(n),"rgb(0, 0, 0)",e)}No(oEe);function sEe(n,e){return e==="transparent"?e:wV(parseFloat(n),"rgb(255, 255, 255)",e)}No(sEe);function aEe(n,e){if(e==="transparent")return e;var r=Pu(e),i=typeof r.alpha=="number"?r.alpha:1,o=ut({},r,{alpha:vh(0,1,+(i*100-parseFloat(n)*100).toFixed(2)/100)});return z_(o)}No(aEe);function lEe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var cEe=`.scene-nav-info {
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
}

.scene-tooltip {
  top: 0;
  color: lavender;
  font-size: 15px;
}

.scene-nav-info, .scene-tooltip {
  position: absolute;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;lEe(cEe);function LE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function uEe(n){if(Array.isArray(n))return n}function dEe(n){if(Array.isArray(n))return LE(n)}function fEe(n,e,r){return(e=xEe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function hEe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pEe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function mEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vEe(n,e){return uEe(n)||pEe(n,e)||CV(n,e)||mEe()}function ip(n){return dEe(n)||hEe(n)||CV(n)||gEe()}function yEe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xEe(n){var e=yEe(n,"string");return typeof e=="symbol"?e:e+""}function CV(n,e){if(n){if(typeof n=="string")return LE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LE(n,e):void 0}}var Qn=window.THREE?window.THREE:{WebGLRenderer:Ome,Scene:aR,PerspectiveCamera:Ti,Raycaster:Zk,SRGBColorSpace:Lt,TextureLoader:$ue,Vector2:je,Vector3:Y,Box3:Bu,Color:Mt,Mesh:$r,SphereGeometry:fh,MeshBasicMaterial:dh,BackSide:er,Clock:Qk},EV=xg({props:{width:{default:window.innerWidth,onChange:function(e,r,i){isNaN(e)&&(r.width=i)}},height:{default:window.innerHeight,onChange:function(e,r,i){isNaN(e)&&(r.height=i)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null,r.toolTipElem&&(r.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var r=null;if(e.hoverDuringDrag||!e.isPointerDragging){var i=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(s){return e.hoverFilter(s.object)}).sort(function(s,a){return e.hoverOrderComparator(s.object,a.object)}),o=i.length?i[0]:null;r=o?o.object:null,e.intersectionPoint=o?o.point:null}r!==e.hoverObj&&(e.onHover(r,e.hoverObj),e.toolTipElem.innerHTML=r&&Pt(e.tooltipContent)(r)||"",e.hoverObj=r)}e.tweenGroup.update()}return this},getPointerPos:function(e){var r=e.pointerPos,i=r.x,o=r.y;return{x:i,y:o}},cameraPosition:function(e,r,i,o){var s=e.camera;if(r&&e.initialised){var a=r,l=i||{x:0,y:0,z:0};if(!o)d(a),f(l);else{var c=Object.assign({},s.position),u=h();e.tweenGroup.add(new Uy(c).to(a,o).easing(Ha.Quadratic.Out).onUpdate(d).start()),e.tweenGroup.add(new Uy(u).to(l,o/3).easing(Ha.Quadratic.Out).onUpdate(f).start())}return this}return Object.assign({},s.position,{lookAt:h()});function d(p){var g=p.x,y=p.y,v=p.z;g!==void 0&&(s.position.x=g),y!==void 0&&(s.position.y=y),v!==void 0&&(s.position.z=v)}function f(p){var g=new Qn.Vector3(p.x,p.y,p.z);e.controls.target?e.controls.target=g:s.lookAt(g)}function h(){return Object.assign(new Qn.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,s),r,i)},fitToBbox:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(r){var a=new Qn.Vector3(0,0,0),l=Math.max.apply(Math,ip(Object.entries(r).map(function(p){var g=vEe(p,2),y=g[0],v=g[1];return Math.max.apply(Math,ip(v.map(function(m){return Math.abs(a[y]-m)})))})))*2,c=(1-o*2/e.height)*s.fov,u=l/Math.atan(c*Math.PI/180),d=u/s.aspect,f=Math.max(u,d);if(f>0){var h=a.clone().sub(s.position).normalize().multiplyScalar(-f);this.cameraPosition(h,a,i)}}return this},getBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=new Qn.Box3(new Qn.Vector3(0,0,0),new Qn.Vector3(0,0,0)),o=e.objects.filter(r);return o.length?(o.forEach(function(s){return i.expandByObject(s)}),Object.assign.apply(Object,ip(["x","y","z"].map(function(s){return fEe({},s,[i.min[s],i.max[s]])})))):null},getScreenCoords:function(e,r,i,o){var s=new Qn.Vector3(r,i,o);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,r,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new Qn.Vector2(r/e.width*2-1,-(i/e.height)*2+1),a=new Qn.Raycaster;return a.setFromCamera(s,e.camera),Object.assign({},a.ray.at(o,new Qn.Vector3))},intersectingObjects:function(e,r,i){var o=new Qn.Vector2(r/e.width*2-1,-(i/e.height)*2+1),s=new Qn.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.setFromCamera(o,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Qn.Scene,camera:new Qn.PerspectiveCamera,clock:new Qn.Clock,tweenGroup:new CM}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.controlType,s=o===void 0?"trackball":o,a=i.useWebGPU,l=a===void 0?!1:a,c=i.rendererConfig,u=c===void 0?{}:c,d=i.extraRenderers,f=d===void 0?[]:d,h=i.waitForLoadComplete,p=h===void 0?!0:h;e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.className="scene-container",r.container.style.position="relative",r.container.appendChild(r.navInfo=document.createElement("div")),r.navInfo.className="scene-nav-info",r.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",r.navInfo.style.display=r.showNavInfo?null:"none",r.toolTipElem=document.createElement("div"),r.toolTipElem.classList.add("scene-tooltip"),r.container.appendChild(r.toolTipElem),r.pointerPos=new Qn.Vector2,r.pointerPos.x=-2,r.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(g){return r.container.addEventListener(g,function(y){if(g==="pointerdown"&&(r.isPointerPressed=!0),!r.isPointerDragging&&y.type==="pointermove"&&(y.pressure>0||r.isPointerPressed)&&(y.pointerType!=="touch"||y.movementX===void 0||[y.movementX,y.movementY].some(function(x){return Math.abs(x)>1}))&&(r.isPointerDragging=!0),r.enablePointerInteraction){var v=m(r.container);r.pointerPos.x=y.pageX-v.left,r.pointerPos.y=y.pageY-v.top,r.toolTipElem.style.top="".concat(r.pointerPos.y,"px"),r.toolTipElem.style.left="".concat(r.pointerPos.x,"px"),r.toolTipElem.style.transform="translate(-".concat(r.pointerPos.x/r.width*100,"%, ").concat(r.height-r.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function m(x){var _=x.getBoundingClientRect(),S=window.pageXOffset||document.documentElement.scrollLeft,w=window.pageYOffset||document.documentElement.scrollTop;return{top:_.top+w,left:_.left+S}}},{passive:!0})}),r.container.addEventListener("pointerup",function(g){r.isPointerPressed=!1,!(r.isPointerDragging&&(r.isPointerDragging=!1,!r.clickAfterDrag))&&requestAnimationFrame(function(){g.button===0&&r.onClick(r.hoverObj||null,g,r.intersectionPoint),g.button===2&&r.onRightClick&&r.onRightClick(r.hoverObj||null,g,r.intersectionPoint)})},{passive:!0,capture:!0}),r.container.addEventListener("contextmenu",function(g){r.onRightClick&&g.preventDefault()}),r.renderer=new(l?Dwe:Qn.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),r.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),r.container.appendChild(r.renderer.domElement),r.extraRenderers=f,r.extraRenderers.forEach(function(g){g.domElement.style.position="absolute",g.domElement.style.top="0px",g.domElement.style.pointerEvents="none",r.container.appendChild(g.domElement)}),r.postProcessingComposer=new ECe(r.renderer),r.postProcessingComposer.addPass(new TCe(r.scene,r.camera)),r.controls=new{trackball:Fwe,orbit:Zwe,fly:fCe}[s](r.camera,r.renderer.domElement),s==="fly"&&(r.controls.movementSpeed=300,r.controls.rollSpeed=Math.PI/6,r.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(r.controls.minDistance=.1,r.controls.maxDistance=r.skyRadius,r.controls.addEventListener("start",function(){r.controlsEngaged=!0}),r.controls.addEventListener("change",function(){r.controlsEngaged&&(r.controlsDragging=!0)}),r.controls.addEventListener("end",function(){r.controlsEngaged=!1,r.controlsDragging=!1})),[r.renderer,r.postProcessingComposer].concat(ip(r.extraRenderers)).forEach(function(g){return g.setSize(r.width,r.height)}),r.camera.aspect=r.width/r.height,r.camera.updateProjectionMatrix(),r.camera.position.z=1e3,r.scene.add(r.skysphere=new Qn.Mesh),r.skysphere.visible=!1,r.loadComplete=r.scene.visible=!p,window.scene=r.scene},update:function(e,r){if(e.width&&e.height&&(r.hasOwnProperty("width")||r.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(ip(e.extraRenderers)).forEach(function(s){return s.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),r.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&r.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Qn.SphereGeometry(e.skyRadius)),r.hasOwnProperty("backgroundColor")){var i=Pu(e.backgroundColor).alpha;i===void 0&&(i=1),e.renderer.setClearColor(new Qn.Color(eEe(1,e.backgroundColor)),i)}r.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Qn.TextureLoader().load(e.backgroundImageUrl,function(s){s.colorSpace=Qn.SRGBColorSpace,e.skysphere.material=new Qn.MeshBasicMaterial({map:s,side:Qn.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&o()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&o())),r.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),r.hasOwnProperty("lights")&&((r.lights||[]).forEach(function(s){return e.scene.remove(s)}),e.lights.forEach(function(s){return e.scene.add(s)})),r.hasOwnProperty("objects")&&((r.objects||[]).forEach(function(s){return e.scene.remove(s)}),e.objects.forEach(function(s){return e.scene.add(s)}));function o(){e.loadComplete=e.scene.visible=!0}}});function _Ee(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var bEe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;_Ee(bEe);function FE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function SEe(n){if(Array.isArray(n))return FE(n)}function Pg(n,e,r){return(e=TEe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function wEe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function CEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CL(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function l0(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CL(Object(r),!0).forEach(function(i){Pg(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function k_(n){return SEe(n)||wEe(n)||MEe(n)||CEe()}function EEe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TEe(n){var e=EEe(n,"string");return typeof e=="symbol"?e:e+""}function MEe(n,e){if(n){if(typeof n=="string")return FE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FE(n,e):void 0}}function TV(n,e){var r=new e;return r._destructor&&r._destructor(),{linkProp:function(o){return{default:r[o](),onChange:function(a,l){l[n][o](a)},triggerUpdate:!1}},linkMethod:function(o){return function(s){for(var a=s[n],l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=a[o].apply(a,c);return d===a?this:d}}}}var H1=window.THREE?window.THREE:{AmbientLight:Yk,DirectionalLight:Kk,REVISION:sh},REe=170,MV=TV("forceGraph",I4),AEe=Object.assign.apply(Object,k_(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Pg({},n,MV.linkProp(n))}))),NEe=Object.assign.apply(Object,k_(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Pg({},n,MV.linkMethod(n))}))),V0=TV("renderObjs",EV),PEe=Object.assign.apply(Object,k_(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return Pg({},n,V0.linkProp(n))}))),OEe=Object.assign.apply(Object,k_(["lights","cameraPosition","postProcessingComposer"].map(function(n){return Pg({},n,V0.linkMethod(n))})).concat([{graph2ScreenCoords:V0.linkMethod("getScreenCoords"),screen2GraphCoords:V0.linkMethod("getSceneCoords")}])),IEe=xg({props:l0(l0({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,r){return r.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,r){var i=r.renderObjs.controls();i&&(i.enabled=e,e&&i.domElement&&i.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},AEe),PEe),methods:l0(l0({zoomToFit:function(e,r,i){for(var o,s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return e.renderObjs.fitToBbox((o=e.forceGraph).getGraphBbox.apply(o,a),r,i),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},NEe),OEe),stateInit:function(e){var r=e.controlType,i=e.rendererConfig,o=e.extraRenderers,s=new I4;return{forceGraph:s,renderObjs:EV({controlType:r,rendererConfig:i,extraRenderers:o}).objects([s]).lights([new H1.AmbientLight(13421772,Math.PI),new H1.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,r){e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.style.position="relative";var i=document.createElement("div");r.container.appendChild(i),r.renderObjs(i);var o=r.renderObjs.camera(),s=r.renderObjs.renderer(),a=r.renderObjs.controls();a.enabled=!!r.enableNavigationControls,r.lastSetCameraZ=o.position.z;var l;r.container.appendChild(l=document.createElement("div")),l.className="graph-info-msg",l.textContent="",r.forceGraph.onLoading(function(){l.textContent="Loading..."}).onFinishLoading(function(){l.textContent=""}).onUpdate(function(){r.graphData=r.forceGraph.graphData(),o.position.x===0&&o.position.y===0&&o.position.z===r.lastSetCameraZ&&r.graphData.nodes.length&&(o.lookAt(r.forceGraph.position),r.lastSetCameraZ=o.position.z=Math.cbrt(r.graphData.nodes.length)*REe)}).onFinishUpdate(function(){if(r._dragControls){var c=r.graphData.nodes.find(function(d){return d.__initialFixedPos&&!d.__disposeControlsAfterDrag});c?c.__disposeControlsAfterDrag=!0:r._dragControls.dispose(),r._dragControls=void 0}if(r.enableNodeDrag&&r.enablePointerInteraction&&r.forceEngine==="d3"){var u=r._dragControls=new Ime(r.graphData.nodes.map(function(d){return d.__threeObj}).filter(function(d){return d}),o,s.domElement);u.addEventListener("dragstart",function(d){a.enabled=!1,d.object.__initialPos=d.object.position.clone(),d.object.__prevPos=d.object.position.clone();var f=Ta(d.object).__data;!f.__initialFixedPos&&(f.__initialFixedPos={fx:f.fx,fy:f.fy,fz:f.fz}),!f.__initialPos&&(f.__initialPos={x:f.x,y:f.y,z:f.z}),["x","y","z"].forEach(function(h){return f["f".concat(h)]=f[h]}),s.domElement.classList.add("grabbable")}),u.addEventListener("drag",function(d){var f=Ta(d.object);if(!d.object.hasOwnProperty("__graphObjType")){var h=d.object.__initialPos,p=d.object.__prevPos,g=d.object.position;f.position.add(g.clone().sub(p)),p.copy(g),g.copy(h)}var y=f.__data,v=f.position,m={x:v.x-y.x,y:v.y-y.y,z:v.z-y.z};["x","y","z"].forEach(function(x){return y["f".concat(x)]=y[x]=v[x]}),r.forceGraph.d3AlphaTarget(.3).resetCountdown(),y.__dragged=!0,r.onNodeDrag(y,m)}),u.addEventListener("dragend",function(d){delete d.object.__initialPos,delete d.object.__prevPos;var f=Ta(d.object).__data;f.__disposeControlsAfterDrag&&(u.dispose(),delete f.__disposeControlsAfterDrag);var h=f.__initialFixedPos,p=f.__initialPos,g={x:p.x-f.x,y:p.y-f.y,z:p.z-f.z};h&&(["x","y","z"].forEach(function(y){var v="f".concat(y);h[v]===void 0&&delete f[v]}),delete f.__initialFixedPos,delete f.__initialPos,f.__dragged&&(delete f.__dragged,r.onNodeDragEnd(f,g))),r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.enableNavigationControls&&(a.enabled=!0,a.domElement&&a.domElement.ownerDocument&&a.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),s.domElement.classList.remove("grabbable")})}}),H1.REVISION<155&&(r.renderObjs.renderer().useLegacyLights=!1),r.renderObjs.hoverOrderComparator(function(c,u){var d=Ta(c);if(!d)return 1;var f=Ta(u);if(!f)return-1;var h=function(g){return g.__graphObjType==="node"};return h(f)-h(d)}).tooltipContent(function(c){var u=Ta(c);return u&&Pt(r["".concat(u.__graphObjType,"Label")])(u.__data)||""}).hoverDuringDrag(!1).onHover(function(c){var u=Ta(c);if(u!==r.hoverObj){var d=r.hoverObj?r.hoverObj.__graphObjType:null,f=r.hoverObj?r.hoverObj.__data:null,h=u?u.__graphObjType:null,p=u?u.__data:null;if(d&&d!==h){var g=r["on".concat(d==="node"?"Node":"Link","Hover")];g&&g(null,f)}if(h){var y=r["on".concat(h==="node"?"Node":"Link","Hover")];y&&y(p,d===h?f:null)}s.domElement.classList[u&&r["on".concat(h==="node"?"Node":"Link","Click")]||!u&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=u}}).clickAfterDrag(!1).onClick(function(c,u){var d=Ta(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","Click")];f&&f(d.__data,u)}else r.onBackgroundClick&&r.onBackgroundClick(u)}).onRightClick(function(c,u){var d=Ta(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","RightClick")];f&&f(d.__data,u)}else r.onBackgroundRightClick&&r.onBackgroundRightClick(u)}),this._animationCycle()}});function Ta(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}const V_={width:G.number,height:G.number,graphData:G.shape({nodes:G.arrayOf(G.object).isRequired,links:G.arrayOf(G.object).isRequired}),backgroundColor:G.string,nodeRelSize:G.number,nodeId:G.string,nodeLabel:G.oneOfType([G.string,G.func]),nodeVal:G.oneOfType([G.number,G.string,G.func]),nodeVisibility:G.oneOfType([G.bool,G.string,G.func]),nodeColor:G.oneOfType([G.string,G.func]),nodeAutoColorBy:G.oneOfType([G.string,G.func]),onNodeHover:G.func,onNodeClick:G.func,linkSource:G.string,linkTarget:G.string,linkLabel:G.oneOfType([G.string,G.func]),linkVisibility:G.oneOfType([G.bool,G.string,G.func]),linkColor:G.oneOfType([G.string,G.func]),linkAutoColorBy:G.oneOfType([G.string,G.func]),linkWidth:G.oneOfType([G.number,G.string,G.func]),linkCurvature:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowLength:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowColor:G.oneOfType([G.string,G.func]),linkDirectionalArrowRelPos:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticles:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleSpeed:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleWidth:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleColor:G.oneOfType([G.string,G.func]),onLinkHover:G.func,onLinkClick:G.func,dagMode:G.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:G.number,dagNodeFilter:G.func,onDagError:G.func,d3AlphaMin:G.number,d3AlphaDecay:G.number,d3VelocityDecay:G.number,warmupTicks:G.number,cooldownTicks:G.number,cooldownTime:G.number,onEngineTick:G.func,onEngineStop:G.func,getGraphBbox:G.func},RV={zoomToFit:G.func,onNodeRightClick:G.func,onNodeDrag:G.func,onNodeDragEnd:G.func,onLinkRightClick:G.func,linkHoverPrecision:G.number,onBackgroundClick:G.func,onBackgroundRightClick:G.func,enablePointerInteraction:G.bool,enableNodeDrag:G.bool},tA={showNavInfo:G.bool,nodeOpacity:G.number,nodeResolution:G.number,nodeThreeObject:G.oneOfType([G.object,G.string,G.func]),nodeThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkOpacity:G.number,linkResolution:G.number,linkCurveRotation:G.oneOfType([G.number,G.string,G.func]),linkMaterial:G.oneOfType([G.object,G.string,G.func]),linkThreeObject:G.oneOfType([G.object,G.string,G.func]),linkThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkPositionUpdate:G.func,linkDirectionalArrowResolution:G.number,linkDirectionalParticleResolution:G.number,forceEngine:G.oneOf(["d3","ngraph"]),ngraphPhysics:G.object,numDimensions:G.oneOf([1,2,3])};Object.assign({},V_,RV,{linkLineDash:G.oneOfType([G.arrayOf(G.number),G.string,G.func]),nodeCanvasObjectMode:G.oneOfType([G.string,G.func]),nodeCanvasObject:G.func,nodePointerAreaPaint:G.func,linkCanvasObjectMode:G.oneOfType([G.string,G.func]),linkCanvasObject:G.func,linkPointerAreaPaint:G.func,autoPauseRedraw:G.bool,minZoom:G.number,maxZoom:G.number,enableZoomInteraction:G.oneOfType([G.bool,G.func]),enablePanInteraction:G.oneOfType([G.bool,G.func]),onZoom:G.func,onZoomEnd:G.func,onRenderFramePre:G.func,onRenderFramePost:G.func});const DEe=Object.assign({},V_,RV,tA,{enableNavigationControls:G.bool,controlType:G.oneOf(["trackball","orbit","fly"]),rendererConfig:G.object,extraRenderers:G.arrayOf(G.shape({render:G.func.isRequired}))});Object.assign({},V_,tA,{nodeDesc:G.oneOfType([G.string,G.func]),linkDesc:G.oneOfType([G.string,G.func])});Object.assign({},V_,tA,{markerAttrs:G.object,yOffset:G.number,glScale:G.number});const nA=vz(IEe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});nA.displayName="ForceGraph3D";nA.propTypes=DEe;const LEe={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Mt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Yf extends Ng{constructor(e,r,i,o){super(),this.strength=r!==void 0?r:1,this.radius=i,this.threshold=o,this.resolution=e!==void 0?new je(e.x,e.y):new je(256,256),this.clearColor=new Mt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new As(s,a,{type:Qr}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let f=0;f<this.nMips;f++){const h=new As(s,a,{type:Qr});h.texture.name="UnrealBloomPass.h"+f,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);const p=new As(s,a,{type:Qr});p.texture.name="UnrealBloomPass.v"+f,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),s=Math.round(s/2),a=Math.round(a/2)}const l=LEe;this.highPassUniforms=Hy.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new qi({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let f=0;f<this.nMips;f++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[f])),this.separableBlurMaterials[f].uniforms.invSize.value=new je(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const u=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=u,this.bloomTintColors=[new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=_V;this.copyUniforms=Hy.clone(d.uniforms),this.blendMaterial=new qi({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:wu,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Mt,this.oldClearAlpha=1,this.basic=new dh,this.fsQuad=new bV(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let i=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(i,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(i,o),this.renderTargetsVertical[s].setSize(i,o),this.separableBlurMaterials[s].uniforms.invSize.value=new je(1/i,1/o),i=Math.round(i/2),o=Math.round(o/2)}render(e,r,i,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[c].uniforms.direction.value=Yf.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=Yf.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}getSeperableBlurMaterial(e){const r=[];for(let i=0;i<e;i++)r.push(.39894*Math.exp(-.5*i*i/(e*e))/e);return new qi({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new je(.5,.5)},direction:{value:new je(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new qi({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Yf.BlurDirectionX=new je(1,0);Yf.BlurDirectionY=new je(0,1);const FEe=32,UEe=6,EL=32,TL=2,BEe=({articles:n,selectedId:e,selectCallback:r})=>{const{graphData:i,forceGraphRef:o,forceGraphWidth:s}=bk(n);b.useEffect(()=>{const c=new Yf(new je(window.innerWidth,window.innerHeight),.25,.1,.1);o.current.postProcessingComposer().addPass(c)},[]);const a=b.useCallback(c=>r(String(c.id)),[o]),l=c=>new $r(new fh(c.size?c.size:10),new hR({color:c.id==e?"#1677ff":c.color,transparent:!1,opacity:1}));return Tt.jsx(nA,{graphData:i,ref:o,width:s,backgroundColor:"#000001",onNodeClick:a,nodeThreeObject:l,nodeResolution:FEe,nodeOpacity:1,nodeRelSize:UEe,linkResolution:EL,linkWidth:TL,linkOpacity:.75,linkDirectionalParticles:1,linkDirectionalParticleWidth:TL,linkDirectionalParticleSpeed:.005,linkDirectionalParticleColor:()=>"#fff",linkDirectionalParticleResolution:EL/2})};var G_={exports:{}},AV={};function NV(n){var e,r,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(r=NV(n[e]))&&(i&&(i+=" "),i+=r);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function ML(){for(var n,e,r=0,i="";r<arguments.length;)(n=arguments[r++])&&(e=NV(n))&&(i&&(i+=" "),i+=e);return i}const $Ee=Object.freeze(Object.defineProperty({__proto__:null,clsx:ML,default:ML},Symbol.toStringTag,{value:"Module"})),zEe=$V($Ee);var ur={},pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.dontSetMe=jEe;pa.findInArray=kEe;pa.int=HEe;pa.isFunction=VEe;pa.isNum=GEe;function kEe(n,e){for(let r=0,i=n.length;r<i;r++)if(e.apply(e,[n[r],r,n]))return n[r]}function VEe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function GEe(n){return typeof n=="number"&&!isNaN(n)}function HEe(n){return parseInt(n,10)}function jEe(n,e,r){if(n[e])return new Error("Invalid prop ".concat(e," passed to ").concat(r," - do not set this, set it on the child."))}var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.browserPrefixToKey=OV;Gu.browserPrefixToStyle=WEe;Gu.default=void 0;Gu.getPrefix=PV;const j1=["Moz","Webkit","O","ms"];function PV(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const r=(n=window.document)===null||n===void 0||(n=n.documentElement)===null||n===void 0?void 0:n.style;if(!r||e in r)return"";for(let i=0;i<j1.length;i++)if(OV(e,j1[i])in r)return j1[i];return""}function OV(n,e){return e?"".concat(e).concat(qEe(n)):n}function WEe(n,e){return e?"-".concat(e.toLowerCase(),"-").concat(n):n}function qEe(n){let e="",r=!0;for(let i=0;i<n.length;i++)r?(e+=n[i].toUpperCase(),r=!1):n[i]==="-"?r=!0:e+=n[i];return e}Gu.default=PV();Object.defineProperty(ur,"__esModule",{value:!0});ur.addClassName=LV;ur.addEvent=YEe;ur.addUserSelectStyles=aTe;ur.createCSSTransform=rTe;ur.createSVGTransform=iTe;ur.getTouch=oTe;ur.getTouchIdentifier=sTe;ur.getTranslation=rA;ur.innerHeight=eTe;ur.innerWidth=tTe;ur.matchesSelector=DV;ur.matchesSelectorAndParentsTo=KEe;ur.offsetXYFromParent=nTe;ur.outerHeight=ZEe;ur.outerWidth=JEe;ur.removeClassName=FV;ur.removeEvent=QEe;ur.removeUserSelectStyles=lTe;var Co=pa,RL=XEe(Gu);function IV(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(IV=function(i){return i?r:e})(n)}function XEe(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var r=IV(e);if(r&&r.has(n))return r.get(n);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=o?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=n[s]}return i.default=n,r&&r.set(n,i),i}let c0="";function DV(n,e){return c0||(c0=(0,Co.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,Co.isFunction)(n[r])})),(0,Co.isFunction)(n[c0])?n[c0](e):!1}function KEe(n,e,r){let i=n;do{if(DV(i,e))return!0;if(i===r)return!1;i=i.parentNode}while(i);return!1}function YEe(n,e,r,i){if(!n)return;const o={capture:!0,...i};n.addEventListener?n.addEventListener(e,r,o):n.attachEvent?n.attachEvent("on"+e,r):n["on"+e]=r}function QEe(n,e,r,i){if(!n)return;const o={capture:!0,...i};n.removeEventListener?n.removeEventListener(e,r,o):n.detachEvent?n.detachEvent("on"+e,r):n["on"+e]=null}function ZEe(n){let e=n.clientHeight;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Co.int)(r.borderTopWidth),e+=(0,Co.int)(r.borderBottomWidth),e}function JEe(n){let e=n.clientWidth;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Co.int)(r.borderLeftWidth),e+=(0,Co.int)(r.borderRightWidth),e}function eTe(n){let e=n.clientHeight;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Co.int)(r.paddingTop),e-=(0,Co.int)(r.paddingBottom),e}function tTe(n){let e=n.clientWidth;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Co.int)(r.paddingLeft),e-=(0,Co.int)(r.paddingRight),e}function nTe(n,e,r){const o=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(n.clientX+e.scrollLeft-o.left)/r,a=(n.clientY+e.scrollTop-o.top)/r;return{x:s,y:a}}function rTe(n,e){const r=rA(n,e,"px");return{[(0,RL.browserPrefixToKey)("transform",RL.default)]:r}}function iTe(n,e){return rA(n,e,"")}function rA(n,e,r){let{x:i,y:o}=n,s="translate(".concat(i).concat(r,",").concat(o).concat(r,")");if(e){const a="".concat(typeof e.x=="string"?e.x:e.x+r),l="".concat(typeof e.y=="string"?e.y:e.y+r);s="translate(".concat(a,", ").concat(l,")")+s}return s}function oTe(n,e){return n.targetTouches&&(0,Co.findInArray)(n.targetTouches,r=>e===r.identifier)||n.changedTouches&&(0,Co.findInArray)(n.changedTouches,r=>e===r.identifier)}function sTe(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function aTe(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&LV(n.body,"react-draggable-transparent-selection")}function lTe(n){if(n)try{if(n.body&&FV(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function LV(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(n.className+=" ".concat(e))}function FV(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.canDragX=dTe;ma.canDragY=fTe;ma.createCoreData=pTe;ma.createDraggableData=mTe;ma.getBoundPosition=cTe;ma.getControlPosition=hTe;ma.snapToGrid=uTe;var mo=pa,Hd=ur;function cTe(n,e,r){if(!n.props.bounds)return[e,r];let{bounds:i}=n.props;i=typeof i=="string"?i:gTe(i);const o=iA(n);if(typeof i=="string"){const{ownerDocument:s}=o,a=s.defaultView;let l;if(i==="parent"?l=o.parentNode:l=s.querySelector(i),!(l instanceof a.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const c=l,u=a.getComputedStyle(o),d=a.getComputedStyle(c);i={left:-o.offsetLeft+(0,mo.int)(d.paddingLeft)+(0,mo.int)(u.marginLeft),top:-o.offsetTop+(0,mo.int)(d.paddingTop)+(0,mo.int)(u.marginTop),right:(0,Hd.innerWidth)(c)-(0,Hd.outerWidth)(o)-o.offsetLeft+(0,mo.int)(d.paddingRight)-(0,mo.int)(u.marginRight),bottom:(0,Hd.innerHeight)(c)-(0,Hd.outerHeight)(o)-o.offsetTop+(0,mo.int)(d.paddingBottom)-(0,mo.int)(u.marginBottom)}}return(0,mo.isNum)(i.right)&&(e=Math.min(e,i.right)),(0,mo.isNum)(i.bottom)&&(r=Math.min(r,i.bottom)),(0,mo.isNum)(i.left)&&(e=Math.max(e,i.left)),(0,mo.isNum)(i.top)&&(r=Math.max(r,i.top)),[e,r]}function uTe(n,e,r){const i=Math.round(e/n[0])*n[0],o=Math.round(r/n[1])*n[1];return[i,o]}function dTe(n){return n.props.axis==="both"||n.props.axis==="x"}function fTe(n){return n.props.axis==="both"||n.props.axis==="y"}function hTe(n,e,r){const i=typeof e=="number"?(0,Hd.getTouch)(n,e):null;if(typeof e=="number"&&!i)return null;const o=iA(r),s=r.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,Hd.offsetXYFromParent)(i||n,s,r.props.scale)}function pTe(n,e,r){const i=!(0,mo.isNum)(n.lastX),o=iA(n);return i?{node:o,deltaX:0,deltaY:0,lastX:e,lastY:r,x:e,y:r}:{node:o,deltaX:e-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:r}}function mTe(n,e){const r=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/r,y:n.state.y+e.deltaY/r,deltaX:e.deltaX/r,deltaY:e.deltaY/r,lastX:n.state.x,lastY:n.state.y}}function gTe(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function iA(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var H_={},j_={};Object.defineProperty(j_,"__esModule",{value:!0});j_.default=vTe;function vTe(){}Object.defineProperty(H_,"__esModule",{value:!0});H_.default=void 0;var W1=xTe(b),zi=oA(AM),yTe=oA(ea),hi=ur,Nl=ma,q1=pa,op=oA(j_);function oA(n){return n&&n.__esModule?n:{default:n}}function UV(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(UV=function(i){return i?r:e})(n)}function xTe(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var r=UV(e);if(r&&r.has(n))return r.get(n);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=o?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=n[s]}return i.default=n,r&&r.set(n,i),i}function Ci(n,e,r){return e=_Te(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function _Te(n){var e=bTe(n,"string");return typeof e=="symbol"?e:String(e)}function bTe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const cs={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Pl=cs.mouse,W_=class extends W1.Component{constructor(){super(...arguments),Ci(this,"dragging",!1),Ci(this,"lastX",NaN),Ci(this,"lastY",NaN),Ci(this,"touchIdentifier",null),Ci(this,"mounted",!1),Ci(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=r;if(this.props.disabled||!(e.target instanceof i.defaultView.Node)||this.props.handle&&!(0,hi.matchesSelectorAndParentsTo)(e.target,this.props.handle,r)||this.props.cancel&&(0,hi.matchesSelectorAndParentsTo)(e.target,this.props.cancel,r))return;e.type==="touchstart"&&e.preventDefault();const o=(0,hi.getTouchIdentifier)(e);this.touchIdentifier=o;const s=(0,Nl.getControlPosition)(e,o,this);if(s==null)return;const{x:a,y:l}=s,c=(0,Nl.createCoreData)(this,a,l);(0,op.default)("DraggableCore: handleDragStart: %j",c),(0,op.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,hi.addUserSelectStyles)(i),this.dragging=!0,this.lastX=a,this.lastY=l,(0,hi.addEvent)(i,Pl.move,this.handleDrag),(0,hi.addEvent)(i,Pl.stop,this.handleDragStop))}),Ci(this,"handleDrag",e=>{const r=(0,Nl.getControlPosition)(e,this.touchIdentifier,this);if(r==null)return;let{x:i,y:o}=r;if(Array.isArray(this.props.grid)){let l=i-this.lastX,c=o-this.lastY;if([l,c]=(0,Nl.snapToGrid)(this.props.grid,l,c),!l&&!c)return;i=this.lastX+l,o=this.lastY+c}const s=(0,Nl.createCoreData)(this,i,o);if((0,op.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=i,this.lastY=o}),Ci(this,"handleDragStop",e=>{if(!this.dragging)return;const r=(0,Nl.getControlPosition)(e,this.touchIdentifier,this);if(r==null)return;let{x:i,y:o}=r;if(Array.isArray(this.props.grid)){let c=i-this.lastX||0,u=o-this.lastY||0;[c,u]=(0,Nl.snapToGrid)(this.props.grid,c,u),i=this.lastX+c,o=this.lastY+u}const s=(0,Nl.createCoreData)(this,i,o);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,hi.removeUserSelectStyles)(l.ownerDocument),(0,op.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,op.default)("DraggableCore: Removing handlers"),(0,hi.removeEvent)(l.ownerDocument,Pl.move,this.handleDrag),(0,hi.removeEvent)(l.ownerDocument,Pl.stop,this.handleDragStop))}),Ci(this,"onMouseDown",e=>(Pl=cs.mouse,this.handleDragStart(e))),Ci(this,"onMouseUp",e=>(Pl=cs.mouse,this.handleDragStop(e))),Ci(this,"onTouchStart",e=>(Pl=cs.touch,this.handleDragStart(e))),Ci(this,"onTouchEnd",e=>(Pl=cs.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,hi.addEvent)(e,cs.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:r}=e;(0,hi.removeEvent)(r,cs.mouse.move,this.handleDrag),(0,hi.removeEvent)(r,cs.touch.move,this.handleDrag),(0,hi.removeEvent)(r,cs.mouse.stop,this.handleDragStop),(0,hi.removeEvent)(r,cs.touch.stop,this.handleDragStop),(0,hi.removeEvent)(e,cs.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,hi.removeUserSelectStyles)(r)}}findDOMNode(){var e,r;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(r=this.props)===null||r===void 0||(r=r.nodeRef)===null||r===void 0?void 0:r.current:yTe.default.findDOMNode(this)}render(){return W1.cloneElement(W1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};H_.default=W_;Ci(W_,"displayName","DraggableCore");Ci(W_,"propTypes",{allowAnyClick:zi.default.bool,children:zi.default.node.isRequired,disabled:zi.default.bool,enableUserSelectHack:zi.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:zi.default.arrayOf(zi.default.number),handle:zi.default.string,cancel:zi.default.string,nodeRef:zi.default.object,onStart:zi.default.func,onDrag:zi.default.func,onStop:zi.default.func,onMouseDown:zi.default.func,scale:zi.default.number,className:q1.dontSetMe,style:q1.dontSetMe,transform:q1.dontSetMe});Ci(W_,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),n.default=void 0;var e=h(b),r=d(AM),i=d(ea),o=d(zEe),s=ur,a=ma,l=pa,c=d(H_),u=d(j_);function d(x){return x&&x.__esModule?x:{default:x}}function f(x){if(typeof WeakMap!="function")return null;var _=new WeakMap,S=new WeakMap;return(f=function(w){return w?S:_})(x)}function h(x,_){if(x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var S=f(_);if(S&&S.has(x))return S.get(x);var w={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in x)if(E!=="default"&&Object.prototype.hasOwnProperty.call(x,E)){var T=C?Object.getOwnPropertyDescriptor(x,E):null;T&&(T.get||T.set)?Object.defineProperty(w,E,T):w[E]=x[E]}return w.default=x,S&&S.set(x,w),w}function p(){return p=Object.assign?Object.assign.bind():function(x){for(var _=1;_<arguments.length;_++){var S=arguments[_];for(var w in S)Object.prototype.hasOwnProperty.call(S,w)&&(x[w]=S[w])}return x},p.apply(this,arguments)}function g(x,_,S){return _=y(_),_ in x?Object.defineProperty(x,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):x[_]=S,x}function y(x){var _=v(x,"string");return typeof _=="symbol"?_:String(_)}function v(x,_){if(typeof x!="object"||x===null)return x;var S=x[Symbol.toPrimitive];if(S!==void 0){var w=S.call(x,_||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(x)}class m extends e.Component{static getDerivedStateFromProps(_,S){let{position:w}=_,{prevPropsPosition:C}=S;return w&&(!C||w.x!==C.x||w.y!==C.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:w,prevPropsPosition:C}),{x:w.x,y:w.y,prevPropsPosition:{...w}}):null}constructor(_){super(_),g(this,"onDragStart",(S,w)=>{if((0,u.default)("Draggable: onDragStart: %j",w),this.props.onStart(S,(0,a.createDraggableData)(this,w))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(S,w)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",w);const C=(0,a.createDraggableData)(this,w),E={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:M,y:R}=E;E.x+=this.state.slackX,E.y+=this.state.slackY;const[N,D]=(0,a.getBoundPosition)(this,E.x,E.y);E.x=N,E.y=D,E.slackX=this.state.slackX+(M-E.x),E.slackY=this.state.slackY+(R-E.y),C.x=E.x,C.y=E.y,C.deltaX=E.x-this.state.x,C.deltaY=E.y-this.state.y}if(this.props.onDrag(S,C)===!1)return!1;this.setState(E)}),g(this,"onDragStop",(S,w)=>{if(!this.state.dragging||this.props.onStop(S,(0,a.createDraggableData)(this,w))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",w);const E={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:M,y:R}=this.props.position;E.x=M,E.y=R}this.setState(E)}),this.state={dragging:!1,dragged:!1,x:_.position?_.position.x:_.defaultPosition.x,y:_.position?_.position.y:_.defaultPosition.y,prevPropsPosition:{..._.position},slackX:0,slackY:0,isElementSVG:!1},_.position&&!(_.onDrag||_.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var _,S;return(_=(S=this.props)===null||S===void 0||(S=S.nodeRef)===null||S===void 0?void 0:S.current)!==null&&_!==void 0?_:i.default.findDOMNode(this)}render(){const{axis:_,bounds:S,children:w,defaultPosition:C,defaultClassName:E,defaultClassNameDragging:T,defaultClassNameDragged:M,position:R,positionOffset:N,scale:D,...L}=this.props;let A={},I=null;const F=!!!R||this.state.dragging,O=R||C,V={x:(0,a.canDragX)(this)&&F?this.state.x:O.x,y:(0,a.canDragY)(this)&&F?this.state.y:O.y};this.state.isElementSVG?I=(0,s.createSVGTransform)(V,N):A=(0,s.createCSSTransform)(V,N);const U=(0,o.default)(w.props.className||"",E,{[T]:this.state.dragging,[M]:this.state.dragged});return e.createElement(c.default,p({},L,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(w),{className:U,style:{...w.props.style,...A},transform:I}))}}n.default=m,g(m,"displayName","Draggable"),g(m,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),g(m,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(AV);const{default:BV,DraggableCore:STe}=AV;G_.exports=BV;G_.exports.default=BV;G_.exports.DraggableCore=STe;var wTe=G_.exports;const CTe=pc(wTe),ETe=({articleData:n,isOpen:e,setIsOpen:r})=>{const i=b.useRef(null),[o,s]=b.useState({left:0,top:0,bottom:0,right:0}),a=(c,u)=>{var p;const{clientWidth:d,clientHeight:f}=window.document.documentElement,h=(p=i.current)==null?void 0:p.getBoundingClientRect();h&&s({left:-h.left+u.x,right:d-(h.right-u.x),top:-h.top+u.y,bottom:f-(h.bottom-u.y)})},l=()=>Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("h3",{children:Tt.jsx("b",{style:{fontSize:"1.5rem",lineHeight:"1.75rem",letterSpacing:"0.1px"},children:n.original_article.title})}),Tt.jsx("p",{children:n.original_article.authors.map((c,u)=>Tt.jsxs("b",{style:{opacity:"0.5"},children:[c,u<n.original_article.authors.length-1?", ":""]},u))}),Tt.jsxs("div",{style:{paddingTop:"0.75rem"},children:[Tt.jsx(pz,{style:{fontSize:"1rem",maxHeight:"25vh",overflowY:"scroll"},children:n.original_article.abstract}),n.original_article.ids.arxiv_id&&Tt.jsxs("a",{href:n.original_article.ids.arxiv_id,target:"_blank",children:[Tt.jsx("strong",{children:"Arxiv ID:"})," ",n.original_article.ids.arxiv_id]}),n.original_article.ids.doi&&Tt.jsxs("div",{children:[Tt.jsx("strong",{children:"DOI:"})," ",n.original_article.ids.doi]}),n.original_article.ids.scopus_id&&Tt.jsxs("a",{href:n.original_article.ids.scopus_id,children:[Tt.jsx("strong",{children:"Scopus ID:"})," ",n.original_article.ids.scopus_id]})]})]});return Tt.jsx(Is,{open:e,onCancel:()=>r(!1),mask:!1,footer:null,style:{right:"5rem",top:"15vh",margin:0,position:"fixed",width:"10vw",height:"45vh"},modalRender:c=>Tt.jsx(CTe,{disabled:!e,bounds:o,nodeRef:i,onStart:(u,d)=>a(u,d),children:Tt.jsx("div",{ref:i,children:c})}),children:l()})},TTe=({articleData:n,selectedId:e,handleToggle:r,listRef:i})=>{const o=b.useRef([]),s=l=>{o.current[l]&&(o.current[l].style.display=o.current[l].style.display==="none"?"block":"none")},a=(l,c)=>Tt.jsx("span",{onClick:()=>r(String(c+1)),children:Tt.jsxs(dp.Item,{ref:u=>i.current[c]=u,id:c+"-item",style:{padding:"1rem",backgroundColor:e==String(c+1)?"#cfcaca":"",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[Tt.jsx(dp.Item.Meta,{title:l.title,description:l.abstract},c),Tt.jsxs("div",{children:[Tt.jsx("b",{children:"Authors: "}),l.authors.map((u,d)=>Tt.jsxs("span",{children:[u,d<l.authors.length-1?", ":""]},d))]}),Tt.jsxs("div",{children:[l.ids.arxiv_id&&Tt.jsx("div",{children:Tt.jsxs("a",{href:l.ids.arxiv_id,target:"_blank",children:[Tt.jsx("strong",{children:"Arxiv ID:"})," ",l.ids.arxiv_id]})}),l.ids.doi&&Tt.jsxs("div",{children:[Tt.jsx("strong",{children:"DOI:"})," ",l.ids.doi]}),l.ids.scopus_id&&Tt.jsxs("div",{children:[Tt.jsx("strong",{children:"Scopus ID:"})," ",l.ids.scopus_id]})]}),Tt.jsx("b",{children:"Similarity: "})," ",(l.similarity*100).toFixed(2),"%",Tt.jsx("div",{style:{paddingTop:"1rem"},children:l.subArticles&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx(Fu,{onClick:()=>s(c),children:"Display sublist"}),Tt.jsx(dp,{ref:u=>o.current[c]=u,itemLayout:"vertical",dataSource:l.subArticles.similar_articles,style:{display:"none",height:"20vh",overflow:"auto"},renderItem:(u,d)=>a(u,d)})]})})]})});return Tt.jsx(dp,{itemLayout:"vertical",dataSource:n.similar_articles,style:{height:"100vh",overflow:"auto"},renderItem:a})},MTe=({articleData:n,handleGraphClick:e})=>{const r=b.useRef([]),[i,o]=b.useState(!1),[s,a]=b.useState(!0),[l,c]=b.useState(),u=f=>{r.current[f]&&r.current[f].scrollIntoView({behavior:"smooth",block:"center"})},d=(f,h)=>{f!=="0"&&h&&h.id&&String(h.id)!=="0"?(c(p=>p===h.id?void 0:String(h.id)),e(h),u(Number.parseInt(String(h.id).split("-")[0])-1)):a(!0)};return Tt.jsxs("div",{style:{height:"100%",display:"flex"},children:[Tt.jsx(TTe,{listRef:r,articleData:n,selectedId:l,handleToggle:d}),Tt.jsx(ETe,{articleData:n,isOpen:s,setIsOpen:a}),Tt.jsx(dz,{style:{position:"absolute",zIndex:2,right:50,bottom:50},checkedChildren:"3D",unCheckedChildren:"2D",onChange:()=>o(!i)}),i?Tt.jsx(BEe,{articles:n,selectedId:l,selectCallback:d}):Tt.jsx(Kle,{articles:n,selectedId:l,selectCallback:d})]})},{Search:RTe}=oh,{Title:ATe}=mg,NTe=({handleSearch:n,isActive:e,querySizeCallback:r})=>{const[i,o]=b.useState(""),[s,a]=b.useState(5),l=u=>{a(u),r(u)},c=()=>{n(aE(i,s))};return Tt.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:Tt.jsxs("div",{style:e?{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"clamp(300px, 50%, 500px)"}:{position:"absolute",zIndex:99,top:0,display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"1rem",alignItems:"center",width:"clamp(300px, 50%, 500px)"},children:[e&&Tt.jsx(ATe,{children:"Article Explorer"}),Tt.jsxs(ez.Compact,{style:{display:"flex",width:"100%"},children:[Tt.jsx(Uu,{defaultValue:"5",style:{width:70},onChange:u=>l(Number.parseInt(u)),options:[{value:"5",label:"5"},{value:"10",label:"10"},{value:"15",label:"15"},{value:"20",label:"20"}]}),Tt.jsx(pg,{trigger:["focus"],title:"An article ID (e.g. 2412.12081) or a link to arXiv or Scopus is required",placement:"bottomLeft",children:Tt.jsx(RTe,{style:{width:"100%"},placeholder:"Link to article...",onChange:u=>o(u.target.value),onSearch:c,enterButton:!0})})]})]})})},PTe="https://articlewebapp-h0heexfzapaga3bw.polandcentral-01.azurewebsites.net",OTe="article/similar/";class X1{static async fetchPosts(e){const r=new URLSearchParams({article_id:e.article_id,site:e.site,id_type:e.id_type,...e.top_n&&{top_n:e.top_n.toString()}}).toString(),i=new URL(`${PTe}/${OTe}?${r}`),o=await fetch(i);if(!o.ok)throw new Error(`HTTP error status: ${o.status}`);return await o.json()}}const ITe=()=>{const[n,e]=b.useState(null),[r,i]=b.useState(!1),[o,s]=lz.useMessage(),[a,l]=b.useState(5),c=p=>{l(p)},u=async p=>{if(p!==null)try{i(!0);const g=await X1.fetchPosts(p),y=await Promise.all(g.similar_articles.map(async v=>{const m=v.ids,x=m?m.arxiv_id!==""?m.arxiv_id:m.doi!==""?m.doi:m.scopus_id!==""?m.scopus_id:null:null;if(x!=null){const _=aE(x,a);if(_!==null){const S=await d(_);return{...v,subArticles:S}}}return v}));e({...g,similar_articles:y}),i(!1)}catch{o.open({type:"error",content:"Failed to fetch posts. Please try again later."}),i(!1)}},d=async p=>await X1.fetchPosts(p),f=(p,g)=>{var x;if(!p||!g)return;const y=g.split("-").map(Number);let v=p,m;for(const _ of y){if(!((x=v==null?void 0:v.similar_articles)!=null&&x[_-1]))return;m=v.similar_articles[_-1],v=m.subArticles}return m},h=async p=>{if(n!==null&&p!==void 0&&p.id!==void 0){let g;if(typeof p.id=="string"?g=f(n,p.id):g=n==null?void 0:n.similar_articles[Number(p.id)-1],g!==void 0&&g.subArticles===void 0){const y=g.ids,v=y?y.arxiv_id!==""?y.arxiv_id:y.doi!==""?y.doi:y.scopus_id!==""?y.scopus_id:null:null;if(v!=null){const m=aE(v,a);if(m!==null){i(!0);const x=await X1.fetchPosts(m);i(!1),g.subArticles=x}}}}};return Tt.jsxs(Tt.Fragment,{children:[s,Tt.jsxs("div",{style:n?{}:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:[Tt.jsx(NTe,{handleSearch:u,isActive:!n,querySizeCallback:c}),Tt.jsx(hM,{spinning:r,fullscreen:!0,size:"large"}),n&&Tt.jsx(MTe,{articleData:n,handleGraphClick:h})]})]})};V3(document.getElementById("root")).render(Tt.jsx(b.StrictMode,{children:Tt.jsx(ITe,{})}));
