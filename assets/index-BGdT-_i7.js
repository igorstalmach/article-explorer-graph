function JD(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const s=Object.getOwnPropertyDescriptor(i,o);s&&Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function _u(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eL={exports:{}},qy={},tL={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=Symbol.for("react.element"),J5=Symbol.for("react.portal"),eV=Symbol.for("react.fragment"),tV=Symbol.for("react.strict_mode"),nV=Symbol.for("react.profiler"),rV=Symbol.for("react.provider"),iV=Symbol.for("react.context"),oV=Symbol.for("react.forward_ref"),sV=Symbol.for("react.suspense"),aV=Symbol.for("react.memo"),lV=Symbol.for("react.lazy"),LR=Symbol.iterator;function cV(n){return n===null||typeof n!="object"?null:(n=LR&&n[LR]||n["@@iterator"],typeof n=="function"?n:null)}var nL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rL=Object.assign,iL={};function Uf(n,e,r){this.props=n,this.context=e,this.refs=iL,this.updater=r||nL}Uf.prototype.isReactComponent={};Uf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Uf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function oL(){}oL.prototype=Uf.prototype;function hE(n,e,r){this.props=n,this.context=e,this.refs=iL,this.updater=r||nL}var pE=hE.prototype=new oL;pE.constructor=hE;rL(pE,Uf.prototype);pE.isPureReactComponent=!0;var FR=Array.isArray,sL=Object.prototype.hasOwnProperty,mE={current:null},aL={key:!0,ref:!0,__self:!0,__source:!0};function lL(n,e,r){var i,o={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)sL.call(e,i)&&!aL.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)o[i]===void 0&&(o[i]=l[i]);return{$$typeof:Um,type:n,key:s,ref:a,props:o,_owner:mE.current}}function uV(n,e){return{$$typeof:Um,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function gE(n){return typeof n=="object"&&n!==null&&n.$$typeof===Um}function dV(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var UR=/\/+/g;function P_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dV(""+n.key):e.toString(36)}function Xv(n,e,r,i,o){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Um:case J5:a=!0}}if(a)return a=n,o=o(a),n=i===""?"."+P_(a,0):i,FR(o)?(r="",n!=null&&(r=n.replace(UR,"$&/")+"/"),Xv(o,e,r,"",function(u){return u})):o!=null&&(gE(o)&&(o=uV(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(UR,"$&/")+"/")+n)),e.push(o)),1;if(a=0,i=i===""?".":i+":",FR(n))for(var l=0;l<n.length;l++){s=n[l];var c=i+P_(s,l);a+=Xv(s,e,r,c,o)}else if(c=cV(n),typeof c=="function")for(n=c.call(n),l=0;!(s=n.next()).done;)s=s.value,c=i+P_(s,l++),a+=Xv(s,e,r,c,o);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function bg(n,e,r){if(n==null)return n;var i=[],o=0;return Xv(n,i,"","",function(s){return e.call(r,s,o++)}),i}function fV(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Oi={current:null},Kv={transition:null},hV={ReactCurrentDispatcher:Oi,ReactCurrentBatchConfig:Kv,ReactCurrentOwner:mE};function cL(){throw Error("act(...) is not supported in production builds of React.")}an.Children={map:bg,forEach:function(n,e,r){bg(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return bg(n,function(){e++}),e},toArray:function(n){return bg(n,function(e){return e})||[]},only:function(n){if(!gE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};an.Component=Uf;an.Fragment=eV;an.Profiler=nV;an.PureComponent=hE;an.StrictMode=tV;an.Suspense=sV;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hV;an.act=cL;an.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=rL({},n.props),o=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=mE.current),e.key!==void 0&&(o=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)sL.call(e,c)&&!aL.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Um,type:n.type,key:o,ref:s,props:i,_owner:a}};an.createContext=function(n){return n={$$typeof:iV,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:rV,_context:n},n.Consumer=n};an.createElement=lL;an.createFactory=function(n){var e=lL.bind(null,n);return e.type=n,e};an.createRef=function(){return{current:null}};an.forwardRef=function(n){return{$$typeof:oV,render:n}};an.isValidElement=gE;an.lazy=function(n){return{$$typeof:lV,_payload:{_status:-1,_result:n},_init:fV}};an.memo=function(n,e){return{$$typeof:aV,type:n,compare:e===void 0?null:e}};an.startTransition=function(n){var e=Kv.transition;Kv.transition={};try{n()}finally{Kv.transition=e}};an.unstable_act=cL;an.useCallback=function(n,e){return Oi.current.useCallback(n,e)};an.useContext=function(n){return Oi.current.useContext(n)};an.useDebugValue=function(){};an.useDeferredValue=function(n){return Oi.current.useDeferredValue(n)};an.useEffect=function(n,e){return Oi.current.useEffect(n,e)};an.useId=function(){return Oi.current.useId()};an.useImperativeHandle=function(n,e,r){return Oi.current.useImperativeHandle(n,e,r)};an.useInsertionEffect=function(n,e){return Oi.current.useInsertionEffect(n,e)};an.useLayoutEffect=function(n,e){return Oi.current.useLayoutEffect(n,e)};an.useMemo=function(n,e){return Oi.current.useMemo(n,e)};an.useReducer=function(n,e,r){return Oi.current.useReducer(n,e,r)};an.useRef=function(n){return Oi.current.useRef(n)};an.useState=function(n){return Oi.current.useState(n)};an.useSyncExternalStore=function(n,e,r){return Oi.current.useSyncExternalStore(n,e,r)};an.useTransition=function(){return Oi.current.useTransition()};an.version="18.3.1";tL.exports=an;var _=tL.exports;const se=_u(_),Xy=JD({__proto__:null,default:se},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pV=_,mV=Symbol.for("react.element"),gV=Symbol.for("react.fragment"),vV=Object.prototype.hasOwnProperty,yV=pV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xV={key:!0,ref:!0,__self:!0,__source:!0};function uL(n,e,r){var i,o={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)vV.call(e,i)&&!xV.hasOwnProperty(i)&&(o[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:mV,type:n,key:s,ref:a,props:o,_owner:yV.current}}qy.Fragment=gV;qy.jsx=uL;qy.jsxs=uL;eL.exports=qy;var Ut=eL.exports,dL={exports:{}},So={},fL={exports:{}},hL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,V){var U=O.length;O.push(V);e:for(;0<U;){var k=U-1>>>1,W=O[k];if(0<o(W,V))O[k]=V,O[U]=W,U=k;else break e}}function r(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var V=O[0],U=O.pop();if(U!==V){O[0]=U;e:for(var k=0,W=O.length,J=W>>>1;k<J;){var z=2*(k+1)-1,j=O[z],X=z+1,Q=O[X];if(0>o(j,U))X<W&&0>o(Q,j)?(O[k]=Q,O[X]=U,k=X):(O[k]=j,O[z]=U,k=z);else if(X<W&&0>o(Q,U))O[k]=Q,O[X]=U,k=X;else break e}}return V}function o(O,V){var U=O.sortIndex-V.sortIndex;return U!==0?U:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var V=r(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=O)i(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=r(u)}}function S(O){if(y=!1,b(O),!g)if(r(c)!==null)g=!0,N(w);else{var V=r(u);V!==null&&F(S,V.startTime-O)}}function w(O,V){g=!1,y&&(y=!1,m(M),M=-1),p=!0;var U=h;try{for(b(V),f=r(c);f!==null&&(!(f.expirationTime>V)||O&&!P());){var k=f.callback;if(typeof k=="function"){f.callback=null,h=f.priorityLevel;var W=k(f.expirationTime<=V);V=n.unstable_now(),typeof W=="function"?f.callback=W:f===r(c)&&i(c),b(V)}else i(c);f=r(c)}if(f!==null)var J=!0;else{var z=r(u);z!==null&&F(S,z.startTime-V),J=!1}return J}finally{f=null,h=U,p=!1}}var C=!1,E=null,M=-1,T=5,R=-1;function P(){return!(n.unstable_now()-R<T)}function D(){if(E!==null){var O=n.unstable_now();R=O;var V=!0;try{V=E(!0,O)}finally{V?L():(C=!1,E=null)}}else C=!1}var L;if(typeof x=="function")L=function(){x(D)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=D,L=function(){I.postMessage(null)}}else L=function(){v(D,0)};function N(O){E=O,C||(C=!0,L())}function F(O,V){M=v(function(){O(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,N(w))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(O){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var U=h;h=V;try{return O()}finally{h=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=h;h=O;try{return V()}finally{h=U}},n.unstable_scheduleCallback=function(O,V,U){var k=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?k+U:k):U=k,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=U+W,O={id:d++,callback:V,priorityLevel:O,startTime:U,expirationTime:W,sortIndex:-1},U>k?(O.sortIndex=U,e(u,O),r(c)===null&&O===r(u)&&(y?(m(M),M=-1):y=!0,F(S,U-k))):(O.sortIndex=W,e(c,O),g||p||(g=!0,N(w))),O},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(O){var V=h;return function(){var U=h;h=V;try{return O.apply(this,arguments)}finally{h=U}}}})(hL);fL.exports=hL;var _V=fL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bV=_,xo=_V;function tt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pL=new Set,Rp={};function bu(n,e){qd(n,e),qd(n+"Capture",e)}function qd(n,e){for(Rp[n]=e,n=0;n<e.length;n++)pL.add(e[n])}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T1=Object.prototype.hasOwnProperty,SV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BR={},$R={};function wV(n){return T1.call($R,n)?!0:T1.call(BR,n)?!1:SV.test(n)?$R[n]=!0:(BR[n]=!0,!1)}function CV(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function EV(n,e,r,i){if(e===null||typeof e>"u"||CV(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ii(n,e,r,i,o,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){oi[n]=new Ii(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];oi[e]=new Ii(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){oi[n]=new Ii(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){oi[n]=new Ii(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){oi[n]=new Ii(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){oi[n]=new Ii(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){oi[n]=new Ii(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){oi[n]=new Ii(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){oi[n]=new Ii(n,5,!1,n.toLowerCase(),null,!1,!1)});var vE=/[\-:]([a-z])/g;function yE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(vE,yE);oi[e]=new Ii(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(vE,yE);oi[e]=new Ii(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(vE,yE);oi[e]=new Ii(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){oi[n]=new Ii(n,1,!1,n.toLowerCase(),null,!1,!1)});oi.xlinkHref=new Ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){oi[n]=new Ii(n,1,!1,n.toLowerCase(),null,!0,!0)});function xE(n,e,r,i){var o=oi.hasOwnProperty(e)?oi[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EV(e,r,o,i)&&(r=null),i||o===null?wV(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):o.mustUseProperty?n[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,i=o.attributeNamespace,r===null?n.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Qa=bV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sg=Symbol.for("react.element"),cd=Symbol.for("react.portal"),ud=Symbol.for("react.fragment"),_E=Symbol.for("react.strict_mode"),M1=Symbol.for("react.profiler"),mL=Symbol.for("react.provider"),gL=Symbol.for("react.context"),bE=Symbol.for("react.forward_ref"),R1=Symbol.for("react.suspense"),A1=Symbol.for("react.suspense_list"),SE=Symbol.for("react.memo"),Sl=Symbol.for("react.lazy"),vL=Symbol.for("react.offscreen"),zR=Symbol.iterator;function oh(n){return n===null||typeof n!="object"?null:(n=zR&&n[zR]||n["@@iterator"],typeof n=="function"?n:null)}var sr=Object.assign,O_;function Wh(n){if(O_===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);O_=e&&e[1]||""}return`
`+O_+n}var I_=!1;function D_(n,e){if(!n||I_)return"";I_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=i.stack.split(`
`),a=o.length-1,l=s.length-1;1<=a&&0<=l&&o[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(o[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||o[a]!==s[l]){var c=`
`+o[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{I_=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Wh(n):""}function TV(n){switch(n.tag){case 5:return Wh(n.type);case 16:return Wh("Lazy");case 13:return Wh("Suspense");case 19:return Wh("SuspenseList");case 0:case 2:case 15:return n=D_(n.type,!1),n;case 11:return n=D_(n.type.render,!1),n;case 1:return n=D_(n.type,!0),n;default:return""}}function N1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ud:return"Fragment";case cd:return"Portal";case M1:return"Profiler";case _E:return"StrictMode";case R1:return"Suspense";case A1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case gL:return(n.displayName||"Context")+".Consumer";case mL:return(n._context.displayName||"Context")+".Provider";case bE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case SE:return e=n.displayName||null,e!==null?e:N1(n.type)||"Memo";case Sl:e=n._payload,n=n._init;try{return N1(n(e))}catch{}}return null}function MV(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N1(e);case 8:return e===_E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function yL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RV(n){var e=yL(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function wg(n){n._valueTracker||(n._valueTracker=RV(n))}function xL(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=yL(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function R0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function P1(n,e){var r=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function kR(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Kl(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _L(n,e){e=e.checked,e!=null&&xE(n,"checked",e,!1)}function O1(n,e){_L(n,e);var r=Kl(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?I1(n,e.type,r):e.hasOwnProperty("defaultValue")&&I1(n,e.type,Kl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function VR(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function I1(n,e,r){(e!=="number"||R0(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var qh=Array.isArray;function Pd(n,e,r,i){if(n=n.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<n.length;r++)o=e.hasOwnProperty("$"+n[r].value),n[r].selected!==o&&(n[r].selected=o),o&&i&&(n[r].defaultSelected=!0)}else{for(r=""+Kl(r),e=null,o=0;o<n.length;o++){if(n[o].value===r){n[o].selected=!0,i&&(n[o].defaultSelected=!0);return}e!==null||n[o].disabled||(e=n[o])}e!==null&&(e.selected=!0)}}function D1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function GR(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(tt(92));if(qh(r)){if(1<r.length)throw Error(tt(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:Kl(r)}}function bL(n,e){var r=Kl(e.value),i=Kl(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function HR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function SL(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?SL(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Cg,wL=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,o){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,o)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Cg=Cg||document.createElement("div"),Cg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ap(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var op={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AV=["Webkit","ms","Moz","O"];Object.keys(op).forEach(function(n){AV.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),op[e]=op[n]})});function CL(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||op.hasOwnProperty(n)&&op[n]?(""+e).trim():e+"px"}function EL(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=CL(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,o):n[r]=o}}var NV=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F1(n,e){if(e){if(NV[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function U1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B1=null;function wE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $1=null,Od=null,Id=null;function jR(n){if(n=zm(n)){if(typeof $1!="function")throw Error(tt(280));var e=n.stateNode;e&&(e=Jy(e),$1(n.stateNode,n.type,e))}}function TL(n){Od?Id?Id.push(n):Id=[n]:Od=n}function ML(){if(Od){var n=Od,e=Id;if(Id=Od=null,jR(n),e)for(n=0;n<e.length;n++)jR(e[n])}}function RL(n,e){return n(e)}function AL(){}var L_=!1;function NL(n,e,r){if(L_)return n(e,r);L_=!0;try{return RL(n,e,r)}finally{L_=!1,(Od!==null||Id!==null)&&(AL(),ML())}}function Np(n,e){var r=n.stateNode;if(r===null)return null;var i=Jy(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(tt(231,e,typeof r));return r}var z1=!1;if($a)try{var sh={};Object.defineProperty(sh,"passive",{get:function(){z1=!0}}),window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{z1=!1}function PV(n,e,r,i,o,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var sp=!1,A0=null,N0=!1,k1=null,OV={onError:function(n){sp=!0,A0=n}};function IV(n,e,r,i,o,s,a,l,c){sp=!1,A0=null,PV.apply(OV,arguments)}function DV(n,e,r,i,o,s,a,l,c){if(IV.apply(this,arguments),sp){if(sp){var u=A0;sp=!1,A0=null}else throw Error(tt(198));N0||(N0=!0,k1=u)}}function Su(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function PL(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function WR(n){if(Su(n)!==n)throw Error(tt(188))}function LV(n){var e=n.alternate;if(!e){if(e=Su(n),e===null)throw Error(tt(188));return e!==n?null:n}for(var r=n,i=e;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return WR(o),n;if(s===i)return WR(o),e;s=s.sibling}throw Error(tt(188))}if(r.return!==i.return)r=o,i=s;else{for(var a=!1,l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a)throw Error(tt(189))}}if(r.alternate!==i)throw Error(tt(190))}if(r.tag!==3)throw Error(tt(188));return r.stateNode.current===r?n:e}function OL(n){return n=LV(n),n!==null?IL(n):null}function IL(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=IL(n);if(e!==null)return e;n=n.sibling}return null}var DL=xo.unstable_scheduleCallback,qR=xo.unstable_cancelCallback,FV=xo.unstable_shouldYield,UV=xo.unstable_requestPaint,fr=xo.unstable_now,BV=xo.unstable_getCurrentPriorityLevel,CE=xo.unstable_ImmediatePriority,LL=xo.unstable_UserBlockingPriority,P0=xo.unstable_NormalPriority,$V=xo.unstable_LowPriority,FL=xo.unstable_IdlePriority,Ky=null,Gs=null;function zV(n){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Ky,n,void 0,(n.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:GV,kV=Math.log,VV=Math.LN2;function GV(n){return n>>>=0,n===0?32:31-(kV(n)/VV|0)|0}var Eg=64,Tg=4194304;function Xh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function O0(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,o=n.suspendedLanes,s=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~o;l!==0?i=Xh(l):(s&=a,s!==0&&(i=Xh(s)))}else a=r&~o,a!==0?i=Xh(a):s!==0&&(i=Xh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-ys(e),o=1<<r,i|=n[r],e&=~o;return i}function HV(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jV(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,o=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-ys(s),l=1<<a,c=o[a];c===-1?(!(l&r)||l&i)&&(o[a]=HV(l,e)):c<=e&&(n.expiredLanes|=l),s&=~l}}function V1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function UL(){var n=Eg;return Eg<<=1,!(Eg&4194240)&&(Eg=64),n}function F_(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function Bm(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ys(e),n[e]=r}function WV(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var o=31-ys(r),s=1<<o;e[o]=0,i[o]=-1,n[o]=-1,r&=~s}}function EE(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-ys(r),o=1<<i;o&e|n[i]&e&&(n[i]|=e),r&=~o}}var Pn=0;function BL(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $L,TE,zL,kL,VL,G1=!1,Mg=[],Fl=null,Ul=null,Bl=null,Pp=new Map,Op=new Map,Tl=[],qV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XR(n,e){switch(n){case"focusin":case"focusout":Fl=null;break;case"dragenter":case"dragleave":Ul=null;break;case"mouseover":case"mouseout":Bl=null;break;case"pointerover":case"pointerout":Pp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(e.pointerId)}}function ah(n,e,r,i,o,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=zm(e),e!==null&&TE(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),n)}function XV(n,e,r,i,o){switch(e){case"focusin":return Fl=ah(Fl,n,e,r,i,o),!0;case"dragenter":return Ul=ah(Ul,n,e,r,i,o),!0;case"mouseover":return Bl=ah(Bl,n,e,r,i,o),!0;case"pointerover":var s=o.pointerId;return Pp.set(s,ah(Pp.get(s)||null,n,e,r,i,o)),!0;case"gotpointercapture":return s=o.pointerId,Op.set(s,ah(Op.get(s)||null,n,e,r,i,o)),!0}return!1}function GL(n){var e=kc(n.target);if(e!==null){var r=Su(e);if(r!==null){if(e=r.tag,e===13){if(e=PL(r),e!==null){n.blockedOn=e,VL(n.priority,function(){zL(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=H1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);B1=i,r.target.dispatchEvent(i),B1=null}else return e=zm(r),e!==null&&TE(e),n.blockedOn=r,!1;e.shift()}return!0}function KR(n,e,r){Yv(n)&&r.delete(e)}function KV(){G1=!1,Fl!==null&&Yv(Fl)&&(Fl=null),Ul!==null&&Yv(Ul)&&(Ul=null),Bl!==null&&Yv(Bl)&&(Bl=null),Pp.forEach(KR),Op.forEach(KR)}function lh(n,e){n.blockedOn===e&&(n.blockedOn=null,G1||(G1=!0,xo.unstable_scheduleCallback(xo.unstable_NormalPriority,KV)))}function Ip(n){function e(o){return lh(o,n)}if(0<Mg.length){lh(Mg[0],n);for(var r=1;r<Mg.length;r++){var i=Mg[r];i.blockedOn===n&&(i.blockedOn=null)}}for(Fl!==null&&lh(Fl,n),Ul!==null&&lh(Ul,n),Bl!==null&&lh(Bl,n),Pp.forEach(e),Op.forEach(e),r=0;r<Tl.length;r++)i=Tl[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<Tl.length&&(r=Tl[0],r.blockedOn===null);)GL(r),r.blockedOn===null&&Tl.shift()}var Dd=Qa.ReactCurrentBatchConfig,I0=!0;function YV(n,e,r,i){var o=Pn,s=Dd.transition;Dd.transition=null;try{Pn=1,ME(n,e,r,i)}finally{Pn=o,Dd.transition=s}}function QV(n,e,r,i){var o=Pn,s=Dd.transition;Dd.transition=null;try{Pn=4,ME(n,e,r,i)}finally{Pn=o,Dd.transition=s}}function ME(n,e,r,i){if(I0){var o=H1(n,e,r,i);if(o===null)W_(n,e,i,D0,r),XR(n,i);else if(XV(o,n,e,r,i))i.stopPropagation();else if(XR(n,i),e&4&&-1<qV.indexOf(n)){for(;o!==null;){var s=zm(o);if(s!==null&&$L(s),s=H1(n,e,r,i),s===null&&W_(n,e,i,D0,r),s===o)break;o=s}o!==null&&i.stopPropagation()}else W_(n,e,i,null,r)}}var D0=null;function H1(n,e,r,i){if(D0=null,n=wE(i),n=kc(n),n!==null)if(e=Su(n),e===null)n=null;else if(r=e.tag,r===13){if(n=PL(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return D0=n,null}function HL(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BV()){case CE:return 1;case LL:return 4;case P0:case $V:return 16;case FL:return 536870912;default:return 16}default:return 16}}var Pl=null,RE=null,Qv=null;function jL(){if(Qv)return Qv;var n,e=RE,r=e.length,i,o="value"in Pl?Pl.value:Pl.textContent,s=o.length;for(n=0;n<r&&e[n]===o[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===o[s-i];i++);return Qv=o.slice(n,1<i?1-i:void 0)}function Zv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Rg(){return!0}function YR(){return!1}function wo(n){function e(r,i,o,s,a){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rg:YR,this.isPropagationStopped=YR,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rg)},persist:function(){},isPersistent:Rg}),e}var Bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AE=wo(Bf),$m=sr({},Bf,{view:0,detail:0}),ZV=wo($m),U_,B_,ch,Yy=sr({},$m,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:NE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ch&&(ch&&n.type==="mousemove"?(U_=n.screenX-ch.screenX,B_=n.screenY-ch.screenY):B_=U_=0,ch=n),U_)},movementY:function(n){return"movementY"in n?n.movementY:B_}}),QR=wo(Yy),JV=sr({},Yy,{dataTransfer:0}),e6=wo(JV),t6=sr({},$m,{relatedTarget:0}),$_=wo(t6),n6=sr({},Bf,{animationName:0,elapsedTime:0,pseudoElement:0}),r6=wo(n6),i6=sr({},Bf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),o6=wo(i6),s6=sr({},Bf,{data:0}),ZR=wo(s6),a6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=c6[n])?!!e[n]:!1}function NE(){return u6}var d6=sr({},$m,{key:function(n){if(n.key){var e=a6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Zv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?l6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:NE,charCode:function(n){return n.type==="keypress"?Zv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f6=wo(d6),h6=sr({},Yy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JR=wo(h6),p6=sr({},$m,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:NE}),m6=wo(p6),g6=sr({},Bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),v6=wo(g6),y6=sr({},Yy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),x6=wo(y6),_6=[9,13,27,32],PE=$a&&"CompositionEvent"in window,ap=null;$a&&"documentMode"in document&&(ap=document.documentMode);var b6=$a&&"TextEvent"in window&&!ap,WL=$a&&(!PE||ap&&8<ap&&11>=ap),eA=" ",tA=!1;function qL(n,e){switch(n){case"keyup":return _6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XL(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dd=!1;function S6(n,e){switch(n){case"compositionend":return XL(e);case"keypress":return e.which!==32?null:(tA=!0,eA);case"textInput":return n=e.data,n===eA&&tA?null:n;default:return null}}function w6(n,e){if(dd)return n==="compositionend"||!PE&&qL(n,e)?(n=jL(),Qv=RE=Pl=null,dd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WL&&e.locale!=="ko"?null:e.data;default:return null}}var C6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!C6[n.type]:e==="textarea"}function KL(n,e,r,i){TL(i),e=L0(e,"onChange"),0<e.length&&(r=new AE("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var lp=null,Dp=null;function E6(n){sF(n,0)}function Qy(n){var e=pd(n);if(xL(e))return n}function T6(n,e){if(n==="change")return e}var YL=!1;if($a){var z_;if($a){var k_="oninput"in document;if(!k_){var rA=document.createElement("div");rA.setAttribute("oninput","return;"),k_=typeof rA.oninput=="function"}z_=k_}else z_=!1;YL=z_&&(!document.documentMode||9<document.documentMode)}function iA(){lp&&(lp.detachEvent("onpropertychange",QL),Dp=lp=null)}function QL(n){if(n.propertyName==="value"&&Qy(Dp)){var e=[];KL(e,Dp,n,wE(n)),NL(E6,e)}}function M6(n,e,r){n==="focusin"?(iA(),lp=e,Dp=r,lp.attachEvent("onpropertychange",QL)):n==="focusout"&&iA()}function R6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qy(Dp)}function A6(n,e){if(n==="click")return Qy(e)}function N6(n,e){if(n==="input"||n==="change")return Qy(e)}function P6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ws=typeof Object.is=="function"?Object.is:P6;function Lp(n,e){if(ws(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!T1.call(e,o)||!ws(n[o],e[o]))return!1}return!0}function oA(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function sA(n,e){var r=oA(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oA(r)}}function ZL(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ZL(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function JL(){for(var n=window,e=R0();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=R0(n.document)}return e}function OE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function O6(n){var e=JL(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&ZL(r.ownerDocument.documentElement,r)){if(i!==null&&OE(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=r.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!n.extend&&s>i&&(o=i,i=s,s=o),o=sA(r,s);var a=sA(r,i);o&&a&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var I6=$a&&"documentMode"in document&&11>=document.documentMode,fd=null,j1=null,cp=null,W1=!1;function aA(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;W1||fd==null||fd!==R0(i)||(i=fd,"selectionStart"in i&&OE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cp&&Lp(cp,i)||(cp=i,i=L0(j1,"onSelect"),0<i.length&&(e=new AE("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=fd)))}function Ag(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var hd={animationend:Ag("Animation","AnimationEnd"),animationiteration:Ag("Animation","AnimationIteration"),animationstart:Ag("Animation","AnimationStart"),transitionend:Ag("Transition","TransitionEnd")},V_={},eF={};$a&&(eF=document.createElement("div").style,"AnimationEvent"in window||(delete hd.animationend.animation,delete hd.animationiteration.animation,delete hd.animationstart.animation),"TransitionEvent"in window||delete hd.transitionend.transition);function Zy(n){if(V_[n])return V_[n];if(!hd[n])return n;var e=hd[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in eF)return V_[n]=e[r];return n}var tF=Zy("animationend"),nF=Zy("animationiteration"),rF=Zy("animationstart"),iF=Zy("transitionend"),oF=new Map,lA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rc(n,e){oF.set(n,e),bu(e,[n])}for(var G_=0;G_<lA.length;G_++){var H_=lA[G_],D6=H_.toLowerCase(),L6=H_[0].toUpperCase()+H_.slice(1);rc(D6,"on"+L6)}rc(tF,"onAnimationEnd");rc(nF,"onAnimationIteration");rc(rF,"onAnimationStart");rc("dblclick","onDoubleClick");rc("focusin","onFocus");rc("focusout","onBlur");rc(iF,"onTransitionEnd");qd("onMouseEnter",["mouseout","mouseover"]);qd("onMouseLeave",["mouseout","mouseover"]);qd("onPointerEnter",["pointerout","pointerover"]);qd("onPointerLeave",["pointerout","pointerover"]);bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kh));function cA(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,DV(i,e,void 0,n),n.currentTarget=null}function sF(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&o.isPropagationStopped())break e;cA(o,l,u),s=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&o.isPropagationStopped())break e;cA(o,l,u),s=c}}}if(N0)throw n=k1,N0=!1,k1=null,n}function Gn(n,e){var r=e[Q1];r===void 0&&(r=e[Q1]=new Set);var i=n+"__bubble";r.has(i)||(aF(e,n,2,!1),r.add(i))}function j_(n,e,r){var i=0;e&&(i|=4),aF(r,n,i,e)}var Ng="_reactListening"+Math.random().toString(36).slice(2);function Fp(n){if(!n[Ng]){n[Ng]=!0,pL.forEach(function(r){r!=="selectionchange"&&(F6.has(r)||j_(r,!1,n),j_(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ng]||(e[Ng]=!0,j_("selectionchange",!1,e))}}function aF(n,e,r,i){switch(HL(e)){case 1:var o=YV;break;case 4:o=QV;break;default:o=ME}r=o.bind(null,e,r,n),o=void 0,!z1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?n.addEventListener(e,r,{capture:!0,passive:o}):n.addEventListener(e,r,!0):o!==void 0?n.addEventListener(e,r,{passive:o}):n.addEventListener(e,r,!1)}function W_(n,e,r,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;l!==null;){if(a=kc(l),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}l=l.parentNode}}i=i.return}NL(function(){var u=s,d=wE(r),f=[];e:{var h=oF.get(n);if(h!==void 0){var p=AE,g=n;switch(n){case"keypress":if(Zv(r)===0)break e;case"keydown":case"keyup":p=f6;break;case"focusin":g="focus",p=$_;break;case"focusout":g="blur",p=$_;break;case"beforeblur":case"afterblur":p=$_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=QR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=e6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=m6;break;case tF:case nF:case rF:p=r6;break;case iF:p=v6;break;case"scroll":p=ZV;break;case"wheel":p=x6;break;case"copy":case"cut":case"paste":p=o6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=JR}var y=(e&4)!==0,v=!y&&n==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var x=u,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,m!==null&&(S=Np(x,m),S!=null&&y.push(Up(x,S,b)))),v)break;x=x.return}0<y.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",h&&r!==B1&&(g=r.relatedTarget||r.fromElement)&&(kc(g)||g[za]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?kc(g):null,g!==null&&(v=Su(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=QR,S="onMouseLeave",m="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(y=JR,S="onPointerLeave",m="onPointerEnter",x="pointer"),v=p==null?h:pd(p),b=g==null?h:pd(g),h=new y(S,x+"leave",p,r,d),h.target=v,h.relatedTarget=b,S=null,kc(d)===u&&(y=new y(m,x+"enter",g,r,d),y.target=b,y.relatedTarget=v,S=y),v=S,p&&g)t:{for(y=p,m=g,x=0,b=y;b;b=Du(b))x++;for(b=0,S=m;S;S=Du(S))b++;for(;0<x-b;)y=Du(y),x--;for(;0<b-x;)m=Du(m),b--;for(;x--;){if(y===m||m!==null&&y===m.alternate)break t;y=Du(y),m=Du(m)}y=null}else y=null;p!==null&&uA(f,h,p,y,!1),g!==null&&v!==null&&uA(f,v,g,y,!0)}}e:{if(h=u?pd(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=T6;else if(nA(h))if(YL)w=N6;else{w=R6;var C=M6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=A6);if(w&&(w=w(n,u))){KL(f,w,r,d);break e}C&&C(n,h,u),n==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&I1(h,"number",h.value)}switch(C=u?pd(u):window,n){case"focusin":(nA(C)||C.contentEditable==="true")&&(fd=C,j1=u,cp=null);break;case"focusout":cp=j1=fd=null;break;case"mousedown":W1=!0;break;case"contextmenu":case"mouseup":case"dragend":W1=!1,aA(f,r,d);break;case"selectionchange":if(I6)break;case"keydown":case"keyup":aA(f,r,d)}var E;if(PE)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else dd?qL(n,r)&&(M="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(WL&&r.locale!=="ko"&&(dd||M!=="onCompositionStart"?M==="onCompositionEnd"&&dd&&(E=jL()):(Pl=d,RE="value"in Pl?Pl.value:Pl.textContent,dd=!0)),C=L0(u,M),0<C.length&&(M=new ZR(M,n,null,r,d),f.push({event:M,listeners:C}),E?M.data=E:(E=XL(r),E!==null&&(M.data=E)))),(E=b6?S6(n,r):w6(n,r))&&(u=L0(u,"onBeforeInput"),0<u.length&&(d=new ZR("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=E))}sF(f,e)})}function Up(n,e,r){return{instance:n,listener:e,currentTarget:r}}function L0(n,e){for(var r=e+"Capture",i=[];n!==null;){var o=n,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Np(n,r),s!=null&&i.unshift(Up(n,s,o)),s=Np(n,e),s!=null&&i.push(Up(n,s,o))),n=n.return}return i}function Du(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function uA(n,e,r,i,o){for(var s=e._reactName,a=[];r!==null&&r!==i;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,o?(c=Np(r,s),c!=null&&a.unshift(Up(r,c,l))):o||(c=Np(r,s),c!=null&&a.push(Up(r,c,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var U6=/\r\n?/g,B6=/\u0000|\uFFFD/g;function dA(n){return(typeof n=="string"?n:""+n).replace(U6,`
`).replace(B6,"")}function Pg(n,e,r){if(e=dA(e),dA(n)!==e&&r)throw Error(tt(425))}function F0(){}var q1=null,X1=null;function K1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Y1=typeof setTimeout=="function"?setTimeout:void 0,$6=typeof clearTimeout=="function"?clearTimeout:void 0,fA=typeof Promise=="function"?Promise:void 0,z6=typeof queueMicrotask=="function"?queueMicrotask:typeof fA<"u"?function(n){return fA.resolve(null).then(n).catch(k6)}:Y1;function k6(n){setTimeout(function(){throw n})}function q_(n,e){var r=e,i=0;do{var o=r.nextSibling;if(n.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){n.removeChild(o),Ip(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Ip(e)}function $l(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function hA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var $f=Math.random().toString(36).slice(2),Us="__reactFiber$"+$f,Bp="__reactProps$"+$f,za="__reactContainer$"+$f,Q1="__reactEvents$"+$f,V6="__reactListeners$"+$f,G6="__reactHandles$"+$f;function kc(n){var e=n[Us];if(e)return e;for(var r=n.parentNode;r;){if(e=r[za]||r[Us]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=hA(n);n!==null;){if(r=n[Us])return r;n=hA(n)}return e}n=r,r=n.parentNode}return null}function zm(n){return n=n[Us]||n[za],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function pd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(tt(33))}function Jy(n){return n[Bp]||null}var Z1=[],md=-1;function ic(n){return{current:n}}function Xn(n){0>md||(n.current=Z1[md],Z1[md]=null,md--)}function kn(n,e){md++,Z1[md]=n.current,n.current=e}var Yl={},pi=ic(Yl),qi=ic(!1),ru=Yl;function Xd(n,e){var r=n.type.contextTypes;if(!r)return Yl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),o}function Xi(n){return n=n.childContextTypes,n!=null}function U0(){Xn(qi),Xn(pi)}function pA(n,e,r){if(pi.current!==Yl)throw Error(tt(168));kn(pi,e),kn(qi,r)}function lF(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(tt(108,MV(n)||"Unknown",o));return sr({},r,i)}function B0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yl,ru=pi.current,kn(pi,n),kn(qi,qi.current),!0}function mA(n,e,r){var i=n.stateNode;if(!i)throw Error(tt(169));r?(n=lF(n,e,ru),i.__reactInternalMemoizedMergedChildContext=n,Xn(qi),Xn(pi),kn(pi,n)):Xn(qi),kn(qi,r)}var xa=null,ex=!1,X_=!1;function cF(n){xa===null?xa=[n]:xa.push(n)}function H6(n){ex=!0,cF(n)}function oc(){if(!X_&&xa!==null){X_=!0;var n=0,e=Pn;try{var r=xa;for(Pn=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}xa=null,ex=!1}catch(o){throw xa!==null&&(xa=xa.slice(n+1)),DL(CE,oc),o}finally{Pn=e,X_=!1}}return null}var gd=[],vd=0,$0=null,z0=0,Do=[],Lo=0,iu=null,Ta=1,Ma="";function Tc(n,e){gd[vd++]=z0,gd[vd++]=$0,$0=n,z0=e}function uF(n,e,r){Do[Lo++]=Ta,Do[Lo++]=Ma,Do[Lo++]=iu,iu=n;var i=Ta;n=Ma;var o=32-ys(i)-1;i&=~(1<<o),r+=1;var s=32-ys(e)+o;if(30<s){var a=o-o%5;s=(i&(1<<a)-1).toString(32),i>>=a,o-=a,Ta=1<<32-ys(e)+o|r<<o|i,Ma=s+n}else Ta=1<<s|r<<o|i,Ma=n}function IE(n){n.return!==null&&(Tc(n,1),uF(n,1,0))}function DE(n){for(;n===$0;)$0=gd[--vd],gd[vd]=null,z0=gd[--vd],gd[vd]=null;for(;n===iu;)iu=Do[--Lo],Do[Lo]=null,Ma=Do[--Lo],Do[Lo]=null,Ta=Do[--Lo],Do[Lo]=null}var yo=null,go=null,Jn=!1,cs=null;function dF(n,e){var r=Bo(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function gA(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,yo=n,go=$l(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,yo=n,go=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=iu!==null?{id:Ta,overflow:Ma}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Bo(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,yo=n,go=null,!0):!1;default:return!1}}function J1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ew(n){if(Jn){var e=go;if(e){var r=e;if(!gA(n,e)){if(J1(n))throw Error(tt(418));e=$l(r.nextSibling);var i=yo;e&&gA(n,e)?dF(i,r):(n.flags=n.flags&-4097|2,Jn=!1,yo=n)}}else{if(J1(n))throw Error(tt(418));n.flags=n.flags&-4097|2,Jn=!1,yo=n}}}function vA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yo=n}function Og(n){if(n!==yo)return!1;if(!Jn)return vA(n),Jn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!K1(n.type,n.memoizedProps)),e&&(e=go)){if(J1(n))throw fF(),Error(tt(418));for(;e;)dF(n,e),e=$l(e.nextSibling)}if(vA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(tt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){go=$l(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}go=null}}else go=yo?$l(n.stateNode.nextSibling):null;return!0}function fF(){for(var n=go;n;)n=$l(n.nextSibling)}function Kd(){go=yo=null,Jn=!1}function LE(n){cs===null?cs=[n]:cs.push(n)}var j6=Qa.ReactCurrentBatchConfig;function uh(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(tt(309));var i=r.stateNode}if(!i)throw Error(tt(147,n));var o=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=o.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(tt(284));if(!r._owner)throw Error(tt(290,n))}return n}function Ig(n,e){throw n=Object.prototype.toString.call(e),Error(tt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function yA(n){var e=n._init;return e(n._payload)}function hF(n){function e(m,x){if(n){var b=m.deletions;b===null?(m.deletions=[x],m.flags|=16):b.push(x)}}function r(m,x){if(!n)return null;for(;x!==null;)e(m,x),x=x.sibling;return null}function i(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function o(m,x){return m=Gl(m,x),m.index=0,m.sibling=null,m}function s(m,x,b){return m.index=b,n?(b=m.alternate,b!==null?(b=b.index,b<x?(m.flags|=2,x):b):(m.flags|=2,x)):(m.flags|=1048576,x)}function a(m){return n&&m.alternate===null&&(m.flags|=2),m}function l(m,x,b,S){return x===null||x.tag!==6?(x=tb(b,m.mode,S),x.return=m,x):(x=o(x,b),x.return=m,x)}function c(m,x,b,S){var w=b.type;return w===ud?d(m,x,b.props.children,S,b.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Sl&&yA(w)===x.type)?(S=o(x,b.props),S.ref=uh(m,x,b),S.return=m,S):(S=o0(b.type,b.key,b.props,null,m.mode,S),S.ref=uh(m,x,b),S.return=m,S)}function u(m,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=nb(b,m.mode,S),x.return=m,x):(x=o(x,b.children||[]),x.return=m,x)}function d(m,x,b,S,w){return x===null||x.tag!==7?(x=Kc(b,m.mode,S,w),x.return=m,x):(x=o(x,b),x.return=m,x)}function f(m,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=tb(""+x,m.mode,b),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sg:return b=o0(x.type,x.key,x.props,null,m.mode,b),b.ref=uh(m,null,x),b.return=m,b;case cd:return x=nb(x,m.mode,b),x.return=m,x;case Sl:var S=x._init;return f(m,S(x._payload),b)}if(qh(x)||oh(x))return x=Kc(x,m.mode,b,null),x.return=m,x;Ig(m,x)}return null}function h(m,x,b,S){var w=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:l(m,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sg:return b.key===w?c(m,x,b,S):null;case cd:return b.key===w?u(m,x,b,S):null;case Sl:return w=b._init,h(m,x,w(b._payload),S)}if(qh(b)||oh(b))return w!==null?null:d(m,x,b,S,null);Ig(m,b)}return null}function p(m,x,b,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(b)||null,l(x,m,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sg:return m=m.get(S.key===null?b:S.key)||null,c(x,m,S,w);case cd:return m=m.get(S.key===null?b:S.key)||null,u(x,m,S,w);case Sl:var C=S._init;return p(m,x,b,C(S._payload),w)}if(qh(S)||oh(S))return m=m.get(b)||null,d(x,m,S,w,null);Ig(x,S)}return null}function g(m,x,b,S){for(var w=null,C=null,E=x,M=x=0,T=null;E!==null&&M<b.length;M++){E.index>M?(T=E,E=null):T=E.sibling;var R=h(m,E,b[M],S);if(R===null){E===null&&(E=T);break}n&&E&&R.alternate===null&&e(m,E),x=s(R,x,M),C===null?w=R:C.sibling=R,C=R,E=T}if(M===b.length)return r(m,E),Jn&&Tc(m,M),w;if(E===null){for(;M<b.length;M++)E=f(m,b[M],S),E!==null&&(x=s(E,x,M),C===null?w=E:C.sibling=E,C=E);return Jn&&Tc(m,M),w}for(E=i(m,E);M<b.length;M++)T=p(E,m,M,b[M],S),T!==null&&(n&&T.alternate!==null&&E.delete(T.key===null?M:T.key),x=s(T,x,M),C===null?w=T:C.sibling=T,C=T);return n&&E.forEach(function(P){return e(m,P)}),Jn&&Tc(m,M),w}function y(m,x,b,S){var w=oh(b);if(typeof w!="function")throw Error(tt(150));if(b=w.call(b),b==null)throw Error(tt(151));for(var C=w=null,E=x,M=x=0,T=null,R=b.next();E!==null&&!R.done;M++,R=b.next()){E.index>M?(T=E,E=null):T=E.sibling;var P=h(m,E,R.value,S);if(P===null){E===null&&(E=T);break}n&&E&&P.alternate===null&&e(m,E),x=s(P,x,M),C===null?w=P:C.sibling=P,C=P,E=T}if(R.done)return r(m,E),Jn&&Tc(m,M),w;if(E===null){for(;!R.done;M++,R=b.next())R=f(m,R.value,S),R!==null&&(x=s(R,x,M),C===null?w=R:C.sibling=R,C=R);return Jn&&Tc(m,M),w}for(E=i(m,E);!R.done;M++,R=b.next())R=p(E,m,M,R.value,S),R!==null&&(n&&R.alternate!==null&&E.delete(R.key===null?M:R.key),x=s(R,x,M),C===null?w=R:C.sibling=R,C=R);return n&&E.forEach(function(D){return e(m,D)}),Jn&&Tc(m,M),w}function v(m,x,b,S){if(typeof b=="object"&&b!==null&&b.type===ud&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Sg:e:{for(var w=b.key,C=x;C!==null;){if(C.key===w){if(w=b.type,w===ud){if(C.tag===7){r(m,C.sibling),x=o(C,b.props.children),x.return=m,m=x;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Sl&&yA(w)===C.type){r(m,C.sibling),x=o(C,b.props),x.ref=uh(m,C,b),x.return=m,m=x;break e}r(m,C);break}else e(m,C);C=C.sibling}b.type===ud?(x=Kc(b.props.children,m.mode,S,b.key),x.return=m,m=x):(S=o0(b.type,b.key,b.props,null,m.mode,S),S.ref=uh(m,x,b),S.return=m,m=S)}return a(m);case cd:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(m,x.sibling),x=o(x,b.children||[]),x.return=m,m=x;break e}else{r(m,x);break}else e(m,x);x=x.sibling}x=nb(b,m.mode,S),x.return=m,m=x}return a(m);case Sl:return C=b._init,v(m,x,C(b._payload),S)}if(qh(b))return g(m,x,b,S);if(oh(b))return y(m,x,b,S);Ig(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(m,x.sibling),x=o(x,b),x.return=m,m=x):(r(m,x),x=tb(b,m.mode,S),x.return=m,m=x),a(m)):r(m,x)}return v}var Yd=hF(!0),pF=hF(!1),k0=ic(null),V0=null,yd=null,FE=null;function UE(){FE=yd=V0=null}function BE(n){var e=k0.current;Xn(k0),n._currentValue=e}function tw(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Ld(n,e){V0=n,FE=yd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zi=!0),n.firstContext=null)}function Ho(n){var e=n._currentValue;if(FE!==n)if(n={context:n,memoizedValue:e,next:null},yd===null){if(V0===null)throw Error(tt(308));yd=n,V0.dependencies={lanes:0,firstContext:n}}else yd=yd.next=n;return e}var Vc=null;function $E(n){Vc===null?Vc=[n]:Vc.push(n)}function mF(n,e,r,i){var o=e.interleaved;return o===null?(r.next=r,$E(e)):(r.next=o.next,o.next=r),e.interleaved=r,ka(n,i)}function ka(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var wl=!1;function zE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gF(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Oa(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function zl(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,vn&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,ka(n,r)}return o=i.interleaved,o===null?(e.next=e,$E(i)):(e.next=o.next,o.next=e),i.interleaved=e,ka(n,r)}function Jv(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,EE(n,r)}}function xA(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?o=s=e:s=s.next=e}else o=s=e;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function G0(n,e,r,i){var o=n.updateQueue;wl=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=o.baseState;a=0,d=u=c=null,l=s;do{var h=l.lane,p=l.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=n,y=l;switch(h=e,p=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=sr({},f,h);break e;case 2:wl=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(c=f),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);su|=a,n.lanes=a,n.memoizedState=f}}function _A(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(tt(191,o));o.call(i)}}}var km={},Hs=ic(km),$p=ic(km),zp=ic(km);function Gc(n){if(n===km)throw Error(tt(174));return n}function kE(n,e){switch(kn(zp,e),kn($p,n),kn(Hs,km),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=L1(e,n)}Xn(Hs),kn(Hs,e)}function Qd(){Xn(Hs),Xn($p),Xn(zp)}function vF(n){Gc(zp.current);var e=Gc(Hs.current),r=L1(e,n.type);e!==r&&(kn($p,n),kn(Hs,r))}function VE(n){$p.current===n&&(Xn(Hs),Xn($p))}var nr=ic(0);function H0(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var K_=[];function GE(){for(var n=0;n<K_.length;n++)K_[n]._workInProgressVersionPrimary=null;K_.length=0}var e0=Qa.ReactCurrentDispatcher,Y_=Qa.ReactCurrentBatchConfig,ou=0,or=null,Dr=null,qr=null,j0=!1,up=!1,kp=0,W6=0;function ai(){throw Error(tt(321))}function HE(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!ws(n[r],e[r]))return!1;return!0}function jE(n,e,r,i,o,s){if(ou=s,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,e0.current=n===null||n.memoizedState===null?Y6:Q6,n=r(i,o),up){s=0;do{if(up=!1,kp=0,25<=s)throw Error(tt(301));s+=1,qr=Dr=null,e.updateQueue=null,e0.current=Z6,n=r(i,o)}while(up)}if(e0.current=W0,e=Dr!==null&&Dr.next!==null,ou=0,qr=Dr=or=null,j0=!1,e)throw Error(tt(300));return n}function WE(){var n=kp!==0;return kp=0,n}function Is(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?or.memoizedState=qr=n:qr=qr.next=n,qr}function jo(){if(Dr===null){var n=or.alternate;n=n!==null?n.memoizedState:null}else n=Dr.next;var e=qr===null?or.memoizedState:qr.next;if(e!==null)qr=e,Dr=n;else{if(n===null)throw Error(tt(310));Dr=n,n={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},qr===null?or.memoizedState=qr=n:qr=qr.next=n}return qr}function Vp(n,e){return typeof e=="function"?e(n):e}function Q_(n){var e=jo(),r=e.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=n;var i=Dr,o=i.baseQueue,s=r.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}i.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,i=i.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ou&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=i):c=c.next=f,or.lanes|=d,su|=d}u=u.next}while(u!==null&&u!==s);c===null?a=i:c.next=l,ws(i,e.memoizedState)||(zi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}if(n=r.interleaved,n!==null){o=n;do s=o.lane,or.lanes|=s,su|=s,o=o.next;while(o!==n)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Z_(n){var e=jo(),r=e.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=n;var i=r.dispatch,o=r.pending,s=e.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do s=n(s,a.action),a=a.next;while(a!==o);ws(s,e.memoizedState)||(zi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,i]}function yF(){}function xF(n,e){var r=or,i=jo(),o=e(),s=!ws(i.memoizedState,o);if(s&&(i.memoizedState=o,zi=!0),i=i.queue,qE(SF.bind(null,r,i,n),[n]),i.getSnapshot!==e||s||qr!==null&&qr.memoizedState.tag&1){if(r.flags|=2048,Gp(9,bF.bind(null,r,i,o,e),void 0,null),Kr===null)throw Error(tt(349));ou&30||_F(r,e,o)}return o}function _F(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function bF(n,e,r,i){e.value=r,e.getSnapshot=i,wF(e)&&CF(n)}function SF(n,e,r){return r(function(){wF(e)&&CF(n)})}function wF(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!ws(n,r)}catch{return!0}}function CF(n){var e=ka(n,1);e!==null&&xs(e,n,1,-1)}function bA(n){var e=Is();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vp,lastRenderedState:n},e.queue=n,n=n.dispatch=K6.bind(null,or,n),[e.memoizedState,n]}function Gp(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function EF(){return jo().memoizedState}function t0(n,e,r,i){var o=Is();or.flags|=n,o.memoizedState=Gp(1|e,r,void 0,i===void 0?null:i)}function tx(n,e,r,i){var o=jo();i=i===void 0?null:i;var s=void 0;if(Dr!==null){var a=Dr.memoizedState;if(s=a.destroy,i!==null&&HE(i,a.deps)){o.memoizedState=Gp(e,r,s,i);return}}or.flags|=n,o.memoizedState=Gp(1|e,r,s,i)}function SA(n,e){return t0(8390656,8,n,e)}function qE(n,e){return tx(2048,8,n,e)}function TF(n,e){return tx(4,2,n,e)}function MF(n,e){return tx(4,4,n,e)}function RF(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function AF(n,e,r){return r=r!=null?r.concat([n]):null,tx(4,4,RF.bind(null,e,n),r)}function XE(){}function NF(n,e){var r=jo();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&HE(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function PF(n,e){var r=jo();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&HE(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function OF(n,e,r){return ou&21?(ws(r,e)||(r=UL(),or.lanes|=r,su|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zi=!0),n.memoizedState=r)}function q6(n,e){var r=Pn;Pn=r!==0&&4>r?r:4,n(!0);var i=Y_.transition;Y_.transition={};try{n(!1),e()}finally{Pn=r,Y_.transition=i}}function IF(){return jo().memoizedState}function X6(n,e,r){var i=Vl(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},DF(n))LF(e,r);else if(r=mF(n,e,r,i),r!==null){var o=Mi();xs(r,n,i,o),FF(r,e,i)}}function K6(n,e,r){var i=Vl(n),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(DF(n))LF(e,o);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,r);if(o.hasEagerState=!0,o.eagerState=l,ws(l,a)){var c=e.interleaved;c===null?(o.next=o,$E(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}r=mF(n,e,o,i),r!==null&&(o=Mi(),xs(r,n,i,o),FF(r,e,i))}}function DF(n){var e=n.alternate;return n===or||e!==null&&e===or}function LF(n,e){up=j0=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function FF(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,EE(n,r)}}var W0={readContext:Ho,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},Y6={readContext:Ho,useCallback:function(n,e){return Is().memoizedState=[n,e===void 0?null:e],n},useContext:Ho,useEffect:SA,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,t0(4194308,4,RF.bind(null,e,n),r)},useLayoutEffect:function(n,e){return t0(4194308,4,n,e)},useInsertionEffect:function(n,e){return t0(4,2,n,e)},useMemo:function(n,e){var r=Is();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Is();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=X6.bind(null,or,n),[i.memoizedState,n]},useRef:function(n){var e=Is();return n={current:n},e.memoizedState=n},useState:bA,useDebugValue:XE,useDeferredValue:function(n){return Is().memoizedState=n},useTransition:function(){var n=bA(!1),e=n[0];return n=q6.bind(null,n[1]),Is().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=or,o=Is();if(Jn){if(r===void 0)throw Error(tt(407));r=r()}else{if(r=e(),Kr===null)throw Error(tt(349));ou&30||_F(i,e,r)}o.memoizedState=r;var s={value:r,getSnapshot:e};return o.queue=s,SA(SF.bind(null,i,s,n),[n]),i.flags|=2048,Gp(9,bF.bind(null,i,s,r,e),void 0,null),r},useId:function(){var n=Is(),e=Kr.identifierPrefix;if(Jn){var r=Ma,i=Ta;r=(i&~(1<<32-ys(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=kp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=W6++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Q6={readContext:Ho,useCallback:NF,useContext:Ho,useEffect:qE,useImperativeHandle:AF,useInsertionEffect:TF,useLayoutEffect:MF,useMemo:PF,useReducer:Q_,useRef:EF,useState:function(){return Q_(Vp)},useDebugValue:XE,useDeferredValue:function(n){var e=jo();return OF(e,Dr.memoizedState,n)},useTransition:function(){var n=Q_(Vp)[0],e=jo().memoizedState;return[n,e]},useMutableSource:yF,useSyncExternalStore:xF,useId:IF,unstable_isNewReconciler:!1},Z6={readContext:Ho,useCallback:NF,useContext:Ho,useEffect:qE,useImperativeHandle:AF,useInsertionEffect:TF,useLayoutEffect:MF,useMemo:PF,useReducer:Z_,useRef:EF,useState:function(){return Z_(Vp)},useDebugValue:XE,useDeferredValue:function(n){var e=jo();return Dr===null?e.memoizedState=n:OF(e,Dr.memoizedState,n)},useTransition:function(){var n=Z_(Vp)[0],e=jo().memoizedState;return[n,e]},useMutableSource:yF,useSyncExternalStore:xF,useId:IF,unstable_isNewReconciler:!1};function is(n,e){if(n&&n.defaultProps){e=sr({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function nw(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:sr({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var nx={isMounted:function(n){return(n=n._reactInternals)?Su(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Mi(),o=Vl(n),s=Oa(i,o);s.payload=e,r!=null&&(s.callback=r),e=zl(n,s,o),e!==null&&(xs(e,n,o,i),Jv(e,n,o))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Mi(),o=Vl(n),s=Oa(i,o);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=zl(n,s,o),e!==null&&(xs(e,n,o,i),Jv(e,n,o))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Mi(),i=Vl(n),o=Oa(r,i);o.tag=2,e!=null&&(o.callback=e),e=zl(n,o,i),e!==null&&(xs(e,n,i,r),Jv(e,n,i))}};function wA(n,e,r,i,o,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Lp(r,i)||!Lp(o,s):!0}function UF(n,e,r){var i=!1,o=Yl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ho(s):(o=Xi(e)?ru:pi.current,i=e.contextTypes,s=(i=i!=null)?Xd(n,o):Yl),e=new e(r,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nx,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=s),e}function CA(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&nx.enqueueReplaceState(e,e.state,null)}function rw(n,e,r,i){var o=n.stateNode;o.props=r,o.state=n.memoizedState,o.refs={},zE(n);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Ho(s):(s=Xi(e)?ru:pi.current,o.context=Xd(n,s)),o.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nw(n,e,s,r),o.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&nx.enqueueReplaceState(o,o.state,null),G0(n,r,o,i),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308)}function Zd(n,e){try{var r="",i=e;do r+=TV(i),i=i.return;while(i);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:o,digest:null}}function J_(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function iw(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var J6=typeof WeakMap=="function"?WeakMap:Map;function BF(n,e,r){r=Oa(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){X0||(X0=!0,pw=i),iw(n,e)},r}function $F(n,e,r){r=Oa(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;r.payload=function(){return i(o)},r.callback=function(){iw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){iw(n,e),typeof i!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function EA(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new J6;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(r)||(o.add(r),n=hG.bind(null,n,e,r),e.then(n,n))}function TA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function MA(n,e,r,i,o){return n.mode&1?(n.flags|=65536,n.lanes=o,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Oa(-1,1),e.tag=2,zl(r,e,1))),r.lanes|=1),n)}var eG=Qa.ReactCurrentOwner,zi=!1;function Si(n,e,r,i){e.child=n===null?pF(e,null,r,i):Yd(e,n.child,r,i)}function RA(n,e,r,i,o){r=r.render;var s=e.ref;return Ld(e,o),i=jE(n,e,r,i,s,o),r=WE(),n!==null&&!zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Va(n,e,o)):(Jn&&r&&IE(e),e.flags|=1,Si(n,e,i,o),e.child)}function AA(n,e,r,i,o){if(n===null){var s=r.type;return typeof s=="function"&&!nT(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,zF(n,e,s,i,o)):(n=o0(r.type,null,i,e,e.mode,o),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&o)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Lp,r(a,i)&&n.ref===e.ref)return Va(n,e,o)}return e.flags|=1,n=Gl(s,i),n.ref=e.ref,n.return=e,e.child=n}function zF(n,e,r,i,o){if(n!==null){var s=n.memoizedProps;if(Lp(s,i)&&n.ref===e.ref)if(zi=!1,e.pendingProps=i=s,(n.lanes&o)!==0)n.flags&131072&&(zi=!0);else return e.lanes=n.lanes,Va(n,e,o)}return ow(n,e,r,i,o)}function kF(n,e,r){var i=e.pendingProps,o=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(_d,fo),fo|=r;else{if(!(r&1073741824))return n=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,kn(_d,fo),fo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,kn(_d,fo),fo|=i}else s!==null?(i=s.baseLanes|r,e.memoizedState=null):i=r,kn(_d,fo),fo|=i;return Si(n,e,o,r),e.child}function VF(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ow(n,e,r,i,o){var s=Xi(r)?ru:pi.current;return s=Xd(e,s),Ld(e,o),r=jE(n,e,r,i,s,o),i=WE(),n!==null&&!zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Va(n,e,o)):(Jn&&i&&IE(e),e.flags|=1,Si(n,e,r,o),e.child)}function NA(n,e,r,i,o){if(Xi(r)){var s=!0;B0(e)}else s=!1;if(Ld(e,o),e.stateNode===null)n0(n,e),UF(e,r,i),rw(e,r,i,o),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ho(u):(u=Xi(r)?ru:pi.current,u=Xd(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||c!==u)&&CA(e,a,i,u),wl=!1;var h=e.memoizedState;a.state=h,G0(e,i,a,o),c=e.memoizedState,l!==i||h!==c||qi.current||wl?(typeof d=="function"&&(nw(e,r,d,i),c=e.memoizedState),(l=wl||wA(e,r,l,i,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,gF(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:is(e.type,l),a.props=u,f=e.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ho(c):(c=Xi(r)?ru:pi.current,c=Xd(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&CA(e,a,i,c),wl=!1,h=e.memoizedState,a.state=h,G0(e,i,a,o);var g=e.memoizedState;l!==f||h!==g||qi.current||wl?(typeof p=="function"&&(nw(e,r,p,i),g=e.memoizedState),(u=wl||wA(e,r,u,i,h,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return sw(n,e,r,i,s,o)}function sw(n,e,r,i,o,s){VF(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return o&&mA(e,r,!1),Va(n,e,s);i=e.stateNode,eG.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Yd(e,n.child,null,s),e.child=Yd(e,null,l,s)):Si(n,e,l,s),e.memoizedState=i.state,o&&mA(e,r,!0),e.child}function GF(n){var e=n.stateNode;e.pendingContext?pA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&pA(n,e.context,!1),kE(n,e.containerInfo)}function PA(n,e,r,i,o){return Kd(),LE(o),e.flags|=256,Si(n,e,r,i),e.child}var aw={dehydrated:null,treeContext:null,retryLane:0};function lw(n){return{baseLanes:n,cachePool:null,transitions:null}}function HF(n,e,r){var i=e.pendingProps,o=nr.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(o|=1),kn(nr,o&1),n===null)return ew(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ox(a,i,0,null),n=Kc(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=lw(r),e.memoizedState=aw,n):KE(e,a));if(o=n.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return tG(n,e,a,i,l,o,r);if(s){s=i.fallback,a=e.mode,o=n.child,l=o.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Gl(o,c),i.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=Gl(l,s):(s=Kc(s,a,r,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?lw(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~r,e.memoizedState=aw,i}return s=n.child,n=s.sibling,i=Gl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function KE(n,e){return e=ox({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Dg(n,e,r,i){return i!==null&&LE(i),Yd(e,n.child,null,r),n=KE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function tG(n,e,r,i,o,s,a){if(r)return e.flags&256?(e.flags&=-257,i=J_(Error(tt(422))),Dg(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=ox({mode:"visible",children:i.children},o,0,null),s=Kc(s,o,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Yd(e,n.child,null,a),e.child.memoizedState=lw(a),e.memoizedState=aw,s);if(!(e.mode&1))return Dg(n,e,a,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(tt(419)),i=J_(s,i,void 0),Dg(n,e,a,i)}if(l=(a&n.childLanes)!==0,zi||l){if(i=Kr,i!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ka(n,o),xs(i,n,o,-1))}return tT(),i=J_(Error(tt(421))),Dg(n,e,a,i)}return o.data==="$?"?(e.flags|=128,e.child=n.child,e=pG.bind(null,n),o._reactRetry=e,null):(n=s.treeContext,go=$l(o.nextSibling),yo=e,Jn=!0,cs=null,n!==null&&(Do[Lo++]=Ta,Do[Lo++]=Ma,Do[Lo++]=iu,Ta=n.id,Ma=n.overflow,iu=e),e=KE(e,i.children),e.flags|=4096,e)}function OA(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),tw(n.return,e,r)}function eb(n,e,r,i,o){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=o)}function jF(n,e,r){var i=e.pendingProps,o=i.revealOrder,s=i.tail;if(Si(n,e,i.children,r),i=nr.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&OA(n,r,e);else if(n.tag===19)OA(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(kn(nr,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)n=r.alternate,n!==null&&H0(n)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),eb(e,!1,o,r,s);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(n=o.alternate,n!==null&&H0(n)===null){e.child=o;break}n=o.sibling,o.sibling=r,r=o,o=n}eb(e,!0,r,null,s);break;case"together":eb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function n0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Va(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),su|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(tt(153));if(e.child!==null){for(n=e.child,r=Gl(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=Gl(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function nG(n,e,r){switch(e.tag){case 3:GF(e),Kd();break;case 5:vF(e);break;case 1:Xi(e.type)&&B0(e);break;case 4:kE(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;kn(k0,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(kn(nr,nr.current&1),e.flags|=128,null):r&e.child.childLanes?HF(n,e,r):(kn(nr,nr.current&1),n=Va(n,e,r),n!==null?n.sibling:null);kn(nr,nr.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return jF(n,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),kn(nr,nr.current),i)break;return null;case 22:case 23:return e.lanes=0,kF(n,e,r)}return Va(n,e,r)}var WF,cw,qF,XF;WF=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cw=function(){};qF=function(n,e,r,i){var o=n.memoizedProps;if(o!==i){n=e.stateNode,Gc(Hs.current);var s=null;switch(r){case"input":o=P1(n,o),i=P1(n,i),s=[];break;case"select":o=sr({},o,{value:void 0}),i=sr({},i,{value:void 0}),s=[];break;case"textarea":o=D1(n,o),i=D1(n,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=F0)}F1(r,i);var a;r=null;for(u in o)if(!i.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rp.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=o!=null?o[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Gn("scroll",n),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};XF=function(n,e,r,i){r!==i&&(e.flags|=4)};function dh(n,e){if(!Jn)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function li(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var o=n.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=n,o=o.sibling;else for(o=n.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=n,o=o.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function rG(n,e,r){var i=e.pendingProps;switch(DE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(e),null;case 1:return Xi(e.type)&&U0(),li(e),null;case 3:return i=e.stateNode,Qd(),Xn(qi),Xn(pi),GE(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Og(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cs!==null&&(vw(cs),cs=null))),cw(n,e),li(e),null;case 5:VE(e);var o=Gc(zp.current);if(r=e.type,n!==null&&e.stateNode!=null)qF(n,e,r,i,o),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(tt(166));return li(e),null}if(n=Gc(Hs.current),Og(e)){i=e.stateNode,r=e.type;var s=e.memoizedProps;switch(i[Us]=e,i[Bp]=s,n=(e.mode&1)!==0,r){case"dialog":Gn("cancel",i),Gn("close",i);break;case"iframe":case"object":case"embed":Gn("load",i);break;case"video":case"audio":for(o=0;o<Kh.length;o++)Gn(Kh[o],i);break;case"source":Gn("error",i);break;case"img":case"image":case"link":Gn("error",i),Gn("load",i);break;case"details":Gn("toggle",i);break;case"input":kR(i,s),Gn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Gn("invalid",i);break;case"textarea":GR(i,s),Gn("invalid",i)}F1(r,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Pg(i.textContent,l,n),o=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Pg(i.textContent,l,n),o=["children",""+l]):Rp.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Gn("scroll",i)}switch(r){case"input":wg(i),VR(i,s,!0);break;case"textarea":wg(i),HR(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=F0)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=SL(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Us]=e,n[Bp]=i,WF(n,e,!1,!1),e.stateNode=n;e:{switch(a=U1(r,i),r){case"dialog":Gn("cancel",n),Gn("close",n),o=i;break;case"iframe":case"object":case"embed":Gn("load",n),o=i;break;case"video":case"audio":for(o=0;o<Kh.length;o++)Gn(Kh[o],n);o=i;break;case"source":Gn("error",n),o=i;break;case"img":case"image":case"link":Gn("error",n),Gn("load",n),o=i;break;case"details":Gn("toggle",n),o=i;break;case"input":kR(n,i),o=P1(n,i),Gn("invalid",n);break;case"option":o=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},o=sr({},i,{value:void 0}),Gn("invalid",n);break;case"textarea":GR(n,i),o=D1(n,i),Gn("invalid",n);break;default:o=i}F1(r,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?EL(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&wL(n,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ap(n,c):typeof c=="number"&&Ap(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rp.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Gn("scroll",n):c!=null&&xE(n,s,c,a))}switch(r){case"input":wg(n),VR(n,i,!1);break;case"textarea":wg(n),HR(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Kl(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Pd(n,!!i.multiple,s,!1):i.defaultValue!=null&&Pd(n,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(n.onclick=F0)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return li(e),null;case 6:if(n&&e.stateNode!=null)XF(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(tt(166));if(r=Gc(zp.current),Gc(Hs.current),Og(e)){if(i=e.stateNode,r=e.memoizedProps,i[Us]=e,(s=i.nodeValue!==r)&&(n=yo,n!==null))switch(n.tag){case 3:Pg(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pg(i.nodeValue,r,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Us]=e,e.stateNode=i}return li(e),null;case 13:if(Xn(nr),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Jn&&go!==null&&e.mode&1&&!(e.flags&128))fF(),Kd(),e.flags|=98560,s=!1;else if(s=Og(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(tt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Us]=e}else Kd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;li(e),s=!1}else cs!==null&&(vw(cs),cs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||nr.current&1?Fr===0&&(Fr=3):tT())),e.updateQueue!==null&&(e.flags|=4),li(e),null);case 4:return Qd(),cw(n,e),n===null&&Fp(e.stateNode.containerInfo),li(e),null;case 10:return BE(e.type._context),li(e),null;case 17:return Xi(e.type)&&U0(),li(e),null;case 19:if(Xn(nr),s=e.memoizedState,s===null)return li(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)dh(s,!1);else{if(Fr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=H0(n),a!==null){for(e.flags|=128,dh(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)s=r,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return kn(nr,nr.current&1|2),e.child}n=n.sibling}s.tail!==null&&fr()>Jd&&(e.flags|=128,i=!0,dh(s,!1),e.lanes=4194304)}else{if(!i)if(n=H0(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),dh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Jn)return li(e),null}else 2*fr()-s.renderingStartTime>Jd&&r!==1073741824&&(e.flags|=128,i=!0,dh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fr(),e.sibling=null,r=nr.current,kn(nr,i?r&1|2:r&1),e):(li(e),null);case 22:case 23:return eT(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?fo&1073741824&&(li(e),e.subtreeFlags&6&&(e.flags|=8192)):li(e),null;case 24:return null;case 25:return null}throw Error(tt(156,e.tag))}function iG(n,e){switch(DE(e),e.tag){case 1:return Xi(e.type)&&U0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Qd(),Xn(qi),Xn(pi),GE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return VE(e),null;case 13:if(Xn(nr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(tt(340));Kd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Xn(nr),null;case 4:return Qd(),null;case 10:return BE(e.type._context),null;case 22:case 23:return eT(),null;case 24:return null;default:return null}}var Lg=!1,fi=!1,oG=typeof WeakSet=="function"?WeakSet:Set,St=null;function xd(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){lr(n,e,i)}else r.current=null}function uw(n,e,r){try{r()}catch(i){lr(n,e,i)}}var IA=!1;function sG(n,e){if(q1=I0,n=JL(),OE(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=n,h=null;t:for(;;){for(var p;f!==r||o!==0&&f.nodeType!==3||(l=a+o),f!==s||i!==0&&f.nodeType!==3||(c=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===n)break t;if(h===r&&++u===o&&(l=a),h===s&&++d===i&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(X1={focusedElem:n,selectionRange:r},I0=!1,St=e;St!==null;)if(e=St,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,St=n;else for(;St!==null;){e=St;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,m=e.stateNode,x=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:is(e.type,y),v);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(S){lr(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,St=n;break}St=e.return}return g=IA,IA=!1,g}function dp(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&n)===n){var s=o.destroy;o.destroy=void 0,s!==void 0&&uw(e,r,s)}o=o.next}while(o!==i)}}function rx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function dw(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function KF(n){var e=n.alternate;e!==null&&(n.alternate=null,KF(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Us],delete e[Bp],delete e[Q1],delete e[V6],delete e[G6])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function YF(n){return n.tag===5||n.tag===3||n.tag===4}function DA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||YF(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fw(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=F0));else if(i!==4&&(n=n.child,n!==null))for(fw(n,e,r),n=n.sibling;n!==null;)fw(n,e,r),n=n.sibling}function hw(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(hw(n,e,r),n=n.sibling;n!==null;)hw(n,e,r),n=n.sibling}var Jr=null,os=!1;function sl(n,e,r){for(r=r.child;r!==null;)QF(n,e,r),r=r.sibling}function QF(n,e,r){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Ky,r)}catch{}switch(r.tag){case 5:fi||xd(r,e);case 6:var i=Jr,o=os;Jr=null,sl(n,e,r),Jr=i,os=o,Jr!==null&&(os?(n=Jr,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(os?(n=Jr,r=r.stateNode,n.nodeType===8?q_(n.parentNode,r):n.nodeType===1&&q_(n,r),Ip(n)):q_(Jr,r.stateNode));break;case 4:i=Jr,o=os,Jr=r.stateNode.containerInfo,os=!0,sl(n,e,r),Jr=i,os=o;break;case 0:case 11:case 14:case 15:if(!fi&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&uw(r,e,a),o=o.next}while(o!==i)}sl(n,e,r);break;case 1:if(!fi&&(xd(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){lr(r,e,l)}sl(n,e,r);break;case 21:sl(n,e,r);break;case 22:r.mode&1?(fi=(i=fi)||r.memoizedState!==null,sl(n,e,r),fi=i):sl(n,e,r);break;default:sl(n,e,r)}}function LA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new oG),e.forEach(function(i){var o=mG.bind(null,n,i);r.has(i)||(r.add(i),i.then(o,o))})}}function Zo(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var s=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Jr=l.stateNode,os=!1;break e;case 3:Jr=l.stateNode.containerInfo,os=!0;break e;case 4:Jr=l.stateNode.containerInfo,os=!0;break e}l=l.return}if(Jr===null)throw Error(tt(160));QF(s,a,o),Jr=null,os=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){lr(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZF(e,n),e=e.sibling}function ZF(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zo(e,n),Ns(n),i&4){try{dp(3,n,n.return),rx(3,n)}catch(y){lr(n,n.return,y)}try{dp(5,n,n.return)}catch(y){lr(n,n.return,y)}}break;case 1:Zo(e,n),Ns(n),i&512&&r!==null&&xd(r,r.return);break;case 5:if(Zo(e,n),Ns(n),i&512&&r!==null&&xd(r,r.return),n.flags&32){var o=n.stateNode;try{Ap(o,"")}catch(y){lr(n,n.return,y)}}if(i&4&&(o=n.stateNode,o!=null)){var s=n.memoizedProps,a=r!==null?r.memoizedProps:s,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&_L(o,s),U1(l,a);var u=U1(l,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?EL(o,f):d==="dangerouslySetInnerHTML"?wL(o,f):d==="children"?Ap(o,f):xE(o,d,f,u)}switch(l){case"input":O1(o,s);break;case"textarea":bL(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Pd(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Pd(o,!!s.multiple,s.defaultValue,!0):Pd(o,!!s.multiple,s.multiple?[]:"",!1))}o[Bp]=s}catch(y){lr(n,n.return,y)}}break;case 6:if(Zo(e,n),Ns(n),i&4){if(n.stateNode===null)throw Error(tt(162));o=n.stateNode,s=n.memoizedProps;try{o.nodeValue=s}catch(y){lr(n,n.return,y)}}break;case 3:if(Zo(e,n),Ns(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ip(e.containerInfo)}catch(y){lr(n,n.return,y)}break;case 4:Zo(e,n),Ns(n);break;case 13:Zo(e,n),Ns(n),o=n.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(ZE=fr())),i&4&&LA(n);break;case 22:if(d=r!==null&&r.memoizedState!==null,n.mode&1?(fi=(u=fi)||d,Zo(e,n),fi=u):Zo(e,n),Ns(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(St=n,d=n.child;d!==null;){for(f=St=d;St!==null;){switch(h=St,p=h.child,h.tag){case 0:case 11:case 14:case 15:dp(4,h,h.return);break;case 1:xd(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,r=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){lr(i,r,y)}}break;case 5:xd(h,h.return);break;case 22:if(h.memoizedState!==null){UA(f);continue}}p!==null?(p.return=h,St=p):UA(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=CL("display",a))}catch(y){lr(n,n.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){lr(n,n.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zo(e,n),Ns(n),i&4&&LA(n);break;case 21:break;default:Zo(e,n),Ns(n)}}function Ns(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(YF(r)){var i=r;break e}r=r.return}throw Error(tt(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Ap(o,""),i.flags&=-33);var s=DA(n);hw(n,s,o);break;case 3:case 4:var a=i.stateNode.containerInfo,l=DA(n);fw(n,l,a);break;default:throw Error(tt(161))}}catch(c){lr(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function aG(n,e,r){St=n,JF(n)}function JF(n,e,r){for(var i=(n.mode&1)!==0;St!==null;){var o=St,s=o.child;if(o.tag===22&&i){var a=o.memoizedState!==null||Lg;if(!a){var l=o.alternate,c=l!==null&&l.memoizedState!==null||fi;l=Lg;var u=fi;if(Lg=a,(fi=c)&&!u)for(St=o;St!==null;)a=St,c=a.child,a.tag===22&&a.memoizedState!==null?BA(o):c!==null?(c.return=a,St=c):BA(o);for(;s!==null;)St=s,JF(s),s=s.sibling;St=o,Lg=l,fi=u}FA(n)}else o.subtreeFlags&8772&&s!==null?(s.return=o,St=s):FA(n)}}function FA(n){for(;St!==null;){var e=St;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||rx(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!fi)if(r===null)i.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:is(e.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_A(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}_A(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ip(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}fi||e.flags&512&&dw(e)}catch(h){lr(e,e.return,h)}}if(e===n){St=null;break}if(r=e.sibling,r!==null){r.return=e.return,St=r;break}St=e.return}}function UA(n){for(;St!==null;){var e=St;if(e===n){St=null;break}var r=e.sibling;if(r!==null){r.return=e.return,St=r;break}St=e.return}}function BA(n){for(;St!==null;){var e=St;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{rx(4,e)}catch(c){lr(e,r,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(c){lr(e,o,c)}}var s=e.return;try{dw(e)}catch(c){lr(e,s,c)}break;case 5:var a=e.return;try{dw(e)}catch(c){lr(e,a,c)}}}catch(c){lr(e,e.return,c)}if(e===n){St=null;break}var l=e.sibling;if(l!==null){l.return=e.return,St=l;break}St=e.return}}var lG=Math.ceil,q0=Qa.ReactCurrentDispatcher,YE=Qa.ReactCurrentOwner,zo=Qa.ReactCurrentBatchConfig,vn=0,Kr=null,wr=null,ni=0,fo=0,_d=ic(0),Fr=0,Hp=null,su=0,ix=0,QE=0,fp=null,Ui=null,ZE=0,Jd=1/0,va=null,X0=!1,pw=null,kl=null,Fg=!1,Ol=null,K0=0,hp=0,mw=null,r0=-1,i0=0;function Mi(){return vn&6?fr():r0!==-1?r0:r0=fr()}function Vl(n){return n.mode&1?vn&2&&ni!==0?ni&-ni:j6.transition!==null?(i0===0&&(i0=UL()),i0):(n=Pn,n!==0||(n=window.event,n=n===void 0?16:HL(n.type)),n):1}function xs(n,e,r,i){if(50<hp)throw hp=0,mw=null,Error(tt(185));Bm(n,r,i),(!(vn&2)||n!==Kr)&&(n===Kr&&(!(vn&2)&&(ix|=r),Fr===4&&Ml(n,ni)),Ki(n,i),r===1&&vn===0&&!(e.mode&1)&&(Jd=fr()+500,ex&&oc()))}function Ki(n,e){var r=n.callbackNode;jV(n,e);var i=O0(n,n===Kr?ni:0);if(i===0)r!==null&&qR(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&qR(r),e===1)n.tag===0?H6($A.bind(null,n)):cF($A.bind(null,n)),z6(function(){!(vn&6)&&oc()}),r=null;else{switch(BL(i)){case 1:r=CE;break;case 4:r=LL;break;case 16:r=P0;break;case 536870912:r=FL;break;default:r=P0}r=a3(r,e3.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function e3(n,e){if(r0=-1,i0=0,vn&6)throw Error(tt(327));var r=n.callbackNode;if(Fd()&&n.callbackNode!==r)return null;var i=O0(n,n===Kr?ni:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Y0(n,i);else{e=i;var o=vn;vn|=2;var s=n3();(Kr!==n||ni!==e)&&(va=null,Jd=fr()+500,Xc(n,e));do try{dG();break}catch(l){t3(n,l)}while(!0);UE(),q0.current=s,vn=o,wr!==null?e=0:(Kr=null,ni=0,e=Fr)}if(e!==0){if(e===2&&(o=V1(n),o!==0&&(i=o,e=gw(n,o))),e===1)throw r=Hp,Xc(n,0),Ml(n,i),Ki(n,fr()),r;if(e===6)Ml(n,i);else{if(o=n.current.alternate,!(i&30)&&!cG(o)&&(e=Y0(n,i),e===2&&(s=V1(n),s!==0&&(i=s,e=gw(n,s))),e===1))throw r=Hp,Xc(n,0),Ml(n,i),Ki(n,fr()),r;switch(n.finishedWork=o,n.finishedLanes=i,e){case 0:case 1:throw Error(tt(345));case 2:Mc(n,Ui,va);break;case 3:if(Ml(n,i),(i&130023424)===i&&(e=ZE+500-fr(),10<e)){if(O0(n,0)!==0)break;if(o=n.suspendedLanes,(o&i)!==i){Mi(),n.pingedLanes|=n.suspendedLanes&o;break}n.timeoutHandle=Y1(Mc.bind(null,n,Ui,va),e);break}Mc(n,Ui,va);break;case 4:if(Ml(n,i),(i&4194240)===i)break;for(e=n.eventTimes,o=-1;0<i;){var a=31-ys(i);s=1<<a,a=e[a],a>o&&(o=a),i&=~s}if(i=o,i=fr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*lG(i/1960))-i,10<i){n.timeoutHandle=Y1(Mc.bind(null,n,Ui,va),i);break}Mc(n,Ui,va);break;case 5:Mc(n,Ui,va);break;default:throw Error(tt(329))}}}return Ki(n,fr()),n.callbackNode===r?e3.bind(null,n):null}function gw(n,e){var r=fp;return n.current.memoizedState.isDehydrated&&(Xc(n,e).flags|=256),n=Y0(n,e),n!==2&&(e=Ui,Ui=r,e!==null&&vw(e)),n}function vw(n){Ui===null?Ui=n:Ui.push.apply(Ui,n)}function cG(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],s=o.getSnapshot;o=o.value;try{if(!ws(s(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ml(n,e){for(e&=~QE,e&=~ix,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-ys(e),i=1<<r;n[r]=-1,e&=~i}}function $A(n){if(vn&6)throw Error(tt(327));Fd();var e=O0(n,0);if(!(e&1))return Ki(n,fr()),null;var r=Y0(n,e);if(n.tag!==0&&r===2){var i=V1(n);i!==0&&(e=i,r=gw(n,i))}if(r===1)throw r=Hp,Xc(n,0),Ml(n,e),Ki(n,fr()),r;if(r===6)throw Error(tt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Mc(n,Ui,va),Ki(n,fr()),null}function JE(n,e){var r=vn;vn|=1;try{return n(e)}finally{vn=r,vn===0&&(Jd=fr()+500,ex&&oc())}}function au(n){Ol!==null&&Ol.tag===0&&!(vn&6)&&Fd();var e=vn;vn|=1;var r=zo.transition,i=Pn;try{if(zo.transition=null,Pn=1,n)return n()}finally{Pn=i,zo.transition=r,vn=e,!(vn&6)&&oc()}}function eT(){fo=_d.current,Xn(_d)}function Xc(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,$6(r)),wr!==null)for(r=wr.return;r!==null;){var i=r;switch(DE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&U0();break;case 3:Qd(),Xn(qi),Xn(pi),GE();break;case 5:VE(i);break;case 4:Qd();break;case 13:Xn(nr);break;case 19:Xn(nr);break;case 10:BE(i.type._context);break;case 22:case 23:eT()}r=r.return}if(Kr=n,wr=n=Gl(n.current,null),ni=fo=e,Fr=0,Hp=null,QE=ix=su=0,Ui=fp=null,Vc!==null){for(e=0;e<Vc.length;e++)if(r=Vc[e],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=o,i.next=a}r.pending=i}Vc=null}return n}function t3(n,e){do{var r=wr;try{if(UE(),e0.current=W0,j0){for(var i=or.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}j0=!1}if(ou=0,qr=Dr=or=null,up=!1,kp=0,YE.current=null,r===null||r.return===null){Fr=1,Hp=e,wr=null;break}e:{var s=n,a=r.return,l=r,c=e;if(e=ni,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=TA(a);if(p!==null){p.flags&=-257,MA(p,a,l,s,e),p.mode&1&&EA(s,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(c),e.updateQueue=y}else g.add(c);break e}else{if(!(e&1)){EA(s,u,e),tT();break e}c=Error(tt(426))}}else if(Jn&&l.mode&1){var v=TA(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),MA(v,a,l,s,e),LE(Zd(c,l));break e}}s=c=Zd(c,l),Fr!==4&&(Fr=2),fp===null?fp=[s]:fp.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=BF(s,c,e);xA(s,m);break e;case 1:l=c;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(kl===null||!kl.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=$F(s,l,e);xA(s,S);break e}}s=s.return}while(s!==null)}i3(r)}catch(w){e=w,wr===r&&r!==null&&(wr=r=r.return);continue}break}while(!0)}function n3(){var n=q0.current;return q0.current=W0,n===null?W0:n}function tT(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Kr===null||!(su&268435455)&&!(ix&268435455)||Ml(Kr,ni)}function Y0(n,e){var r=vn;vn|=2;var i=n3();(Kr!==n||ni!==e)&&(va=null,Xc(n,e));do try{uG();break}catch(o){t3(n,o)}while(!0);if(UE(),vn=r,q0.current=i,wr!==null)throw Error(tt(261));return Kr=null,ni=0,Fr}function uG(){for(;wr!==null;)r3(wr)}function dG(){for(;wr!==null&&!FV();)r3(wr)}function r3(n){var e=s3(n.alternate,n,fo);n.memoizedProps=n.pendingProps,e===null?i3(n):wr=e,YE.current=null}function i3(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=iG(r,e),r!==null){r.flags&=32767,wr=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Fr=6,wr=null;return}}else if(r=rG(r,e,fo),r!==null){wr=r;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=n}while(e!==null);Fr===0&&(Fr=5)}function Mc(n,e,r){var i=Pn,o=zo.transition;try{zo.transition=null,Pn=1,fG(n,e,r,i)}finally{zo.transition=o,Pn=i}return null}function fG(n,e,r,i){do Fd();while(Ol!==null);if(vn&6)throw Error(tt(327));r=n.finishedWork;var o=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(tt(177));n.callbackNode=null,n.callbackPriority=0;var s=r.lanes|r.childLanes;if(WV(n,s),n===Kr&&(wr=Kr=null,ni=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fg||(Fg=!0,a3(P0,function(){return Fd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=zo.transition,zo.transition=null;var a=Pn;Pn=1;var l=vn;vn|=4,YE.current=null,sG(n,r),ZF(r,n),O6(X1),I0=!!q1,X1=q1=null,n.current=r,aG(r),UV(),vn=l,Pn=a,zo.transition=s}else n.current=r;if(Fg&&(Fg=!1,Ol=n,K0=o),s=n.pendingLanes,s===0&&(kl=null),zV(r.stateNode),Ki(n,fr()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)o=e[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(X0)throw X0=!1,n=pw,pw=null,n;return K0&1&&n.tag!==0&&Fd(),s=n.pendingLanes,s&1?n===mw?hp++:(hp=0,mw=n):hp=0,oc(),null}function Fd(){if(Ol!==null){var n=BL(K0),e=zo.transition,r=Pn;try{if(zo.transition=null,Pn=16>n?16:n,Ol===null)var i=!1;else{if(n=Ol,Ol=null,K0=0,vn&6)throw Error(tt(331));var o=vn;for(vn|=4,St=n.current;St!==null;){var s=St,a=s.child;if(St.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(St=u;St!==null;){var d=St;switch(d.tag){case 0:case 11:case 15:dp(8,d,s)}var f=d.child;if(f!==null)f.return=d,St=f;else for(;St!==null;){d=St;var h=d.sibling,p=d.return;if(KF(d),d===u){St=null;break}if(h!==null){h.return=p,St=h;break}St=p}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}St=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,St=a;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dp(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,St=m;break e}St=s.return}}var x=n.current;for(St=x;St!==null;){a=St;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,St=b;else e:for(a=x;St!==null;){if(l=St,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rx(9,l)}}catch(w){lr(l,l.return,w)}if(l===a){St=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,St=S;break e}St=l.return}}if(vn=o,oc(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Ky,n)}catch{}i=!0}return i}finally{Pn=r,zo.transition=e}}return!1}function zA(n,e,r){e=Zd(r,e),e=BF(n,e,1),n=zl(n,e,1),e=Mi(),n!==null&&(Bm(n,1,e),Ki(n,e))}function lr(n,e,r){if(n.tag===3)zA(n,n,r);else for(;e!==null;){if(e.tag===3){zA(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(kl===null||!kl.has(i))){n=Zd(r,n),n=$F(e,n,1),e=zl(e,n,1),n=Mi(),e!==null&&(Bm(e,1,n),Ki(e,n));break}}e=e.return}}function hG(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Mi(),n.pingedLanes|=n.suspendedLanes&r,Kr===n&&(ni&r)===r&&(Fr===4||Fr===3&&(ni&130023424)===ni&&500>fr()-ZE?Xc(n,0):QE|=r),Ki(n,e)}function o3(n,e){e===0&&(n.mode&1?(e=Tg,Tg<<=1,!(Tg&130023424)&&(Tg=4194304)):e=1);var r=Mi();n=ka(n,e),n!==null&&(Bm(n,e,r),Ki(n,r))}function pG(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),o3(n,r)}function mG(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,o=n.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(tt(314))}i!==null&&i.delete(e),o3(n,r)}var s3;s3=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||qi.current)zi=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return zi=!1,nG(n,e,r);zi=!!(n.flags&131072)}else zi=!1,Jn&&e.flags&1048576&&uF(e,z0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;n0(n,e),n=e.pendingProps;var o=Xd(e,pi.current);Ld(e,r),o=jE(null,e,i,n,o,r);var s=WE();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xi(i)?(s=!0,B0(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,zE(e),o.updater=nx,e.stateNode=o,o._reactInternals=e,rw(e,i,n,r),e=sw(null,e,i,!0,s,r)):(e.tag=0,Jn&&s&&IE(e),Si(null,e,o,r),e=e.child),e;case 16:i=e.elementType;e:{switch(n0(n,e),n=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=vG(i),n=is(i,n),o){case 0:e=ow(null,e,i,n,r);break e;case 1:e=NA(null,e,i,n,r);break e;case 11:e=RA(null,e,i,n,r);break e;case 14:e=AA(null,e,i,is(i.type,n),r);break e}throw Error(tt(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:is(i,o),ow(n,e,i,o,r);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:is(i,o),NA(n,e,i,o,r);case 3:e:{if(GF(e),n===null)throw Error(tt(387));i=e.pendingProps,s=e.memoizedState,o=s.element,gF(n,e),G0(e,i,null,r);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Zd(Error(tt(423)),e),e=PA(n,e,i,r,o);break e}else if(i!==o){o=Zd(Error(tt(424)),e),e=PA(n,e,i,r,o);break e}else for(go=$l(e.stateNode.containerInfo.firstChild),yo=e,Jn=!0,cs=null,r=pF(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kd(),i===o){e=Va(n,e,r);break e}Si(n,e,i,r)}e=e.child}return e;case 5:return vF(e),n===null&&ew(e),i=e.type,o=e.pendingProps,s=n!==null?n.memoizedProps:null,a=o.children,K1(i,o)?a=null:s!==null&&K1(i,s)&&(e.flags|=32),VF(n,e),Si(n,e,a,r),e.child;case 6:return n===null&&ew(e),null;case 13:return HF(n,e,r);case 4:return kE(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Yd(e,null,i,r):Si(n,e,i,r),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:is(i,o),RA(n,e,i,o,r);case 7:return Si(n,e,e.pendingProps,r),e.child;case 8:return Si(n,e,e.pendingProps.children,r),e.child;case 12:return Si(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,kn(k0,i._currentValue),i._currentValue=a,s!==null)if(ws(s.value,a)){if(s.children===o.children&&!qi.current){e=Va(n,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Oa(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),tw(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(tt(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),tw(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Si(n,e,o.children,r),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,Ld(e,r),o=Ho(o),i=i(o),e.flags|=1,Si(n,e,i,r),e.child;case 14:return i=e.type,o=is(i,e.pendingProps),o=is(i.type,o),AA(n,e,i,o,r);case 15:return zF(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:is(i,o),n0(n,e),e.tag=1,Xi(i)?(n=!0,B0(e)):n=!1,Ld(e,r),UF(e,i,o),rw(e,i,o,r),sw(null,e,i,!0,n,r);case 19:return jF(n,e,r);case 22:return kF(n,e,r)}throw Error(tt(156,e.tag))};function a3(n,e){return DL(n,e)}function gG(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bo(n,e,r,i){return new gG(n,e,r,i)}function nT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function vG(n){if(typeof n=="function")return nT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===bE)return 11;if(n===SE)return 14}return 2}function Gl(n,e){var r=n.alternate;return r===null?(r=Bo(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function o0(n,e,r,i,o,s){var a=2;if(i=n,typeof n=="function")nT(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case ud:return Kc(r.children,o,s,e);case _E:a=8,o|=8;break;case M1:return n=Bo(12,r,e,o|2),n.elementType=M1,n.lanes=s,n;case R1:return n=Bo(13,r,e,o),n.elementType=R1,n.lanes=s,n;case A1:return n=Bo(19,r,e,o),n.elementType=A1,n.lanes=s,n;case vL:return ox(r,o,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case mL:a=10;break e;case gL:a=9;break e;case bE:a=11;break e;case SE:a=14;break e;case Sl:a=16,i=null;break e}throw Error(tt(130,n==null?n:typeof n,""))}return e=Bo(a,r,e,o),e.elementType=n,e.type=i,e.lanes=s,e}function Kc(n,e,r,i){return n=Bo(7,n,i,e),n.lanes=r,n}function ox(n,e,r,i){return n=Bo(22,n,i,e),n.elementType=vL,n.lanes=r,n.stateNode={isHidden:!1},n}function tb(n,e,r){return n=Bo(6,n,null,e),n.lanes=r,n}function nb(n,e,r){return e=Bo(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function yG(n,e,r,i,o){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=F_(0),this.expirationTimes=F_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=F_(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function rT(n,e,r,i,o,s,a,l,c){return n=new yG(n,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Bo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zE(s),n}function xG(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cd,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function l3(n){if(!n)return Yl;n=n._reactInternals;e:{if(Su(n)!==n||n.tag!==1)throw Error(tt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tt(171))}if(n.tag===1){var r=n.type;if(Xi(r))return lF(n,r,e)}return e}function c3(n,e,r,i,o,s,a,l,c){return n=rT(r,i,!0,n,o,s,a,l,c),n.context=l3(null),r=n.current,i=Mi(),o=Vl(r),s=Oa(i,o),s.callback=e??null,zl(r,s,o),n.current.lanes=o,Bm(n,o,i),Ki(n,i),n}function sx(n,e,r,i){var o=e.current,s=Mi(),a=Vl(o);return r=l3(r),e.context===null?e.context=r:e.pendingContext=r,e=Oa(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=zl(o,e,a),n!==null&&(xs(n,o,a,s),Jv(n,o,a)),a}function Q0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function iT(n,e){kA(n,e),(n=n.alternate)&&kA(n,e)}function _G(){return null}var u3=typeof reportError=="function"?reportError:function(n){console.error(n)};function oT(n){this._internalRoot=n}ax.prototype.render=oT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(tt(409));sx(n,e,null,null)};ax.prototype.unmount=oT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;au(function(){sx(null,n,null,null)}),e[za]=null}};function ax(n){this._internalRoot=n}ax.prototype.unstable_scheduleHydration=function(n){if(n){var e=kL();n={blockedOn:null,target:n,priority:e};for(var r=0;r<Tl.length&&e!==0&&e<Tl[r].priority;r++);Tl.splice(r,0,n),r===0&&GL(n)}};function sT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function VA(){}function bG(n,e,r,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var u=Q0(a);s.call(u)}}var a=c3(e,i,n,0,null,!1,!1,"",VA);return n._reactRootContainer=a,n[za]=a.current,Fp(n.nodeType===8?n.parentNode:n),au(),a}for(;o=n.lastChild;)n.removeChild(o);if(typeof i=="function"){var l=i;i=function(){var u=Q0(c);l.call(u)}}var c=rT(n,0,!1,null,null,!1,!1,"",VA);return n._reactRootContainer=c,n[za]=c.current,Fp(n.nodeType===8?n.parentNode:n),au(function(){sx(e,c,r,i)}),c}function cx(n,e,r,i,o){var s=r._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var l=o;o=function(){var c=Q0(a);l.call(c)}}sx(e,a,n,o)}else a=bG(r,e,n,o,i);return Q0(a)}$L=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=Xh(e.pendingLanes);r!==0&&(EE(e,r|1),Ki(e,fr()),!(vn&6)&&(Jd=fr()+500,oc()))}break;case 13:au(function(){var i=ka(n,1);if(i!==null){var o=Mi();xs(i,n,1,o)}}),iT(n,1)}};TE=function(n){if(n.tag===13){var e=ka(n,134217728);if(e!==null){var r=Mi();xs(e,n,134217728,r)}iT(n,134217728)}};zL=function(n){if(n.tag===13){var e=Vl(n),r=ka(n,e);if(r!==null){var i=Mi();xs(r,n,e,i)}iT(n,e)}};kL=function(){return Pn};VL=function(n,e){var r=Pn;try{return Pn=n,e()}finally{Pn=r}};$1=function(n,e,r){switch(e){case"input":if(O1(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var o=Jy(i);if(!o)throw Error(tt(90));xL(i),O1(i,o)}}}break;case"textarea":bL(n,r);break;case"select":e=r.value,e!=null&&Pd(n,!!r.multiple,e,!1)}};RL=JE;AL=au;var SG={usingClientEntryPoint:!1,Events:[zm,pd,Jy,TL,ML,JE]},fh={findFiberByHostInstance:kc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wG={bundleType:fh.bundleType,version:fh.version,rendererPackageName:fh.rendererPackageName,rendererConfig:fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=OL(n),n===null?null:n.stateNode},findFiberByHostInstance:fh.findFiberByHostInstance||_G,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ug.isDisabled&&Ug.supportsFiber)try{Ky=Ug.inject(wG),Gs=Ug}catch{}}So.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SG;So.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sT(e))throw Error(tt(200));return xG(n,e,null,r)};So.createRoot=function(n,e){if(!sT(n))throw Error(tt(299));var r=!1,i="",o=u3;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=rT(n,1,!1,null,null,r,!1,i,o),n[za]=e.current,Fp(n.nodeType===8?n.parentNode:n),new oT(e)};So.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(tt(188)):(n=Object.keys(n).join(","),Error(tt(268,n)));return n=OL(e),n=n===null?null:n.stateNode,n};So.flushSync=function(n){return au(n)};So.hydrate=function(n,e,r){if(!lx(e))throw Error(tt(200));return cx(null,n,e,!0,r)};So.hydrateRoot=function(n,e,r){if(!sT(n))throw Error(tt(405));var i=r!=null&&r.hydratedSources||null,o=!1,s="",a=u3;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=c3(e,null,n,1,r??null,o,!1,s,a),n[za]=e.current,Fp(n),i)for(n=0;n<i.length;n++)r=i[n],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new ax(e)};So.render=function(n,e,r){if(!lx(e))throw Error(tt(200));return cx(null,n,e,!1,r)};So.unmountComponentAtNode=function(n){if(!lx(n))throw Error(tt(40));return n._reactRootContainer?(au(function(){cx(null,null,n,!1,function(){n._reactRootContainer=null,n[za]=null})}),!0):!1};So.unstable_batchedUpdates=JE;So.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!lx(r))throw Error(tt(200));if(n==null||n._reactInternals===void 0)throw Error(tt(38));return cx(n,e,r,!1,i)};So.version="18.3.1-next-f1338f8080-20240426";function d3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d3)}catch(n){console.error(n)}}d3(),dL.exports=So;var Ql=dL.exports;const yw=_u(Ql),CG=JD({__proto__:null,default:yw},[Ql]);var f3,GA=Ql;f3=GA.createRoot,GA.hydrateRoot;var h3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(s=o(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var l in s)e.call(s,l)&&s[l]&&(a=o(a,l));return a}function o(s,a){return a?s?s+" "+a:s+a:s}n.exports?(r.default=r,n.exports=r):window.classNames=r})()})(h3);var EG=h3.exports;const _e=_u(EG);function ut(){return ut=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},ut.apply(null,arguments)}function Mt(n){"@babel/helpers - typeof";return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(n)}var TG=Symbol.for("react.element"),MG=Symbol.for("react.transitional.element"),RG=Symbol.for("react.fragment");function p3(n){return n&&Mt(n)==="object"&&(n.$$typeof===TG||n.$$typeof===MG)&&n.type===RG}function Ga(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return se.Children.forEach(n,function(i){i==null&&!e.keepEmpty||(Array.isArray(i)?r=r.concat(Ga(i)):p3(i)&&i.props?r=r.concat(Ga(i.props.children,e)):r.push(i))}),r}var xw={},AG=function(e){};function NG(n,e){}function PG(n,e){}function OG(){xw={}}function m3(n,e,r){!e&&!xw[r]&&(n(!1,r),xw[r]=!0)}function Yi(n,e){m3(NG,n,e)}function IG(n,e){m3(PG,n,e)}Yi.preMessage=AG;Yi.resetWarned=OG;Yi.noteOnce=IG;function DG(n,e){if(Mt(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(Mt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function g3(n){var e=DG(n,"string");return Mt(e)=="symbol"?e:e+""}function ee(n,e,r){return(e=g3(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function HA(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function re(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HA(Object(r),!0).forEach(function(i){ee(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function jp(n){return n instanceof HTMLElement||n instanceof SVGElement}function LG(n){return n&&Mt(n)==="object"&&jp(n.nativeElement)?n.nativeElement:jp(n)?n:null}function pp(n){var e=LG(n);if(e)return e;if(n instanceof se.Component){var r;return(r=yw.findDOMNode)===null||r===void 0?void 0:r.call(yw,n)}return null}var v3={exports:{}},On={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=Symbol.for("react.element"),lT=Symbol.for("react.portal"),ux=Symbol.for("react.fragment"),dx=Symbol.for("react.strict_mode"),fx=Symbol.for("react.profiler"),hx=Symbol.for("react.provider"),px=Symbol.for("react.context"),FG=Symbol.for("react.server_context"),mx=Symbol.for("react.forward_ref"),gx=Symbol.for("react.suspense"),vx=Symbol.for("react.suspense_list"),yx=Symbol.for("react.memo"),xx=Symbol.for("react.lazy"),UG=Symbol.for("react.offscreen"),y3;y3=Symbol.for("react.module.reference");function Ko(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case aT:switch(n=n.type,n){case ux:case fx:case dx:case gx:case vx:return n;default:switch(n=n&&n.$$typeof,n){case FG:case px:case mx:case xx:case yx:case hx:return n;default:return e}}case lT:return e}}}On.ContextConsumer=px;On.ContextProvider=hx;On.Element=aT;On.ForwardRef=mx;On.Fragment=ux;On.Lazy=xx;On.Memo=yx;On.Portal=lT;On.Profiler=fx;On.StrictMode=dx;On.Suspense=gx;On.SuspenseList=vx;On.isAsyncMode=function(){return!1};On.isConcurrentMode=function(){return!1};On.isContextConsumer=function(n){return Ko(n)===px};On.isContextProvider=function(n){return Ko(n)===hx};On.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===aT};On.isForwardRef=function(n){return Ko(n)===mx};On.isFragment=function(n){return Ko(n)===ux};On.isLazy=function(n){return Ko(n)===xx};On.isMemo=function(n){return Ko(n)===yx};On.isPortal=function(n){return Ko(n)===lT};On.isProfiler=function(n){return Ko(n)===fx};On.isStrictMode=function(n){return Ko(n)===dx};On.isSuspense=function(n){return Ko(n)===gx};On.isSuspenseList=function(n){return Ko(n)===vx};On.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===ux||n===fx||n===dx||n===gx||n===vx||n===UG||typeof n=="object"&&n!==null&&(n.$$typeof===xx||n.$$typeof===yx||n.$$typeof===hx||n.$$typeof===px||n.$$typeof===mx||n.$$typeof===y3||n.getModuleId!==void 0)};On.typeOf=Ko;v3.exports=On;var rb=v3.exports;function _x(n,e,r){var i=_.useRef({});return(!("value"in i.current)||r(i.current.condition,e))&&(i.current.value=n(),i.current.condition=e),i.current.value}var cT=function(e,r){typeof e=="function"?e(r):Mt(e)==="object"&&e&&"current"in e&&(e.current=r)},ta=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r.filter(Boolean);return o.length<=1?o[0]:function(s){r.forEach(function(a){cT(a,s)})}},zf=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return _x(function(){return ta.apply(void 0,r)},r,function(o,s){return o.length!==s.length||o.every(function(a,l){return a!==s[l]})})},Vm=function(e){var r,i;if(!e)return!1;if(x3(e)&&e.props.propertyIsEnumerable("ref"))return!0;var o=rb.isMemo(e)?e.type.type:e.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==rb.ForwardRef||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render)&&e.$$typeof!==rb.ForwardRef)};function x3(n){return _.isValidElement(n)&&!p3(n)}var bx=function(e){if(e&&x3(e)){var r=e;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null},_w=_.createContext(null);function BG(n){var e=n.children,r=n.onBatchResize,i=_.useRef(0),o=_.useRef([]),s=_.useContext(_w),a=_.useCallback(function(l,c,u){i.current+=1;var d=i.current;o.current.push({size:l,element:c,data:u}),Promise.resolve().then(function(){d===i.current&&(r==null||r(o.current),o.current=[])}),s==null||s(l,c,u)},[r,s]);return _.createElement(_w.Provider,{value:a},e)}var _3=function(){if(typeof Map<"u")return Map;function n(e,r){var i=-1;return e.some(function(o,s){return o[0]===r?(i=s,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var i=n(this.__entries__,r),o=this.__entries__[i];return o&&o[1]},e.prototype.set=function(r,i){var o=n(this.__entries__,r);~o?this.__entries__[o][1]=i:this.__entries__.push([r,i])},e.prototype.delete=function(r){var i=this.__entries__,o=n(i,r);~o&&i.splice(o,1)},e.prototype.has=function(r){return!!~n(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,i){i===void 0&&(i=null);for(var o=0,s=this.__entries__;o<s.length;o++){var a=s[o];r.call(i,a[1],a[0])}},e}()}(),bw=typeof window<"u"&&typeof document<"u"&&window.document===document,Z0=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),$G=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Z0):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),zG=2;function kG(n,e){var r=!1,i=!1,o=0;function s(){r&&(r=!1,n()),i&&l()}function a(){$G(s)}function l(){var c=Date.now();if(r){if(c-o<zG)return;i=!0}else r=!0,i=!1,setTimeout(a,e);o=c}return l}var VG=20,GG=["top","right","bottom","left","width","height","size","weight"],HG=typeof MutationObserver<"u",jG=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=kG(this.refresh.bind(this),VG)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var r=this.observers_,i=r.indexOf(e);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!bw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),HG?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!bw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var r=e.propertyName,i=r===void 0?"":r,o=GG.some(function(s){return!!~i.indexOf(s)});o&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),b3=function(n,e){for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];Object.defineProperty(n,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return n},ef=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||Z0},S3=Sx(0,0,0,0);function J0(n){return parseFloat(n)||0}function jA(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(i,o){var s=n["border-"+o+"-width"];return i+J0(s)},0)}function WG(n){for(var e=["top","right","bottom","left"],r={},i=0,o=e;i<o.length;i++){var s=o[i],a=n["padding-"+s];r[s]=J0(a)}return r}function qG(n){var e=n.getBBox();return Sx(0,0,e.width,e.height)}function XG(n){var e=n.clientWidth,r=n.clientHeight;if(!e&&!r)return S3;var i=ef(n).getComputedStyle(n),o=WG(i),s=o.left+o.right,a=o.top+o.bottom,l=J0(i.width),c=J0(i.height);if(i.boxSizing==="border-box"&&(Math.round(l+s)!==e&&(l-=jA(i,"left","right")+s),Math.round(c+a)!==r&&(c-=jA(i,"top","bottom")+a)),!YG(n)){var u=Math.round(l+s)-e,d=Math.round(c+a)-r;Math.abs(u)!==1&&(l-=u),Math.abs(d)!==1&&(c-=d)}return Sx(o.left,o.top,l,c)}var KG=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof ef(n).SVGGraphicsElement}:function(n){return n instanceof ef(n).SVGElement&&typeof n.getBBox=="function"}}();function YG(n){return n===ef(n).document.documentElement}function QG(n){return bw?KG(n)?qG(n):XG(n):S3}function ZG(n){var e=n.x,r=n.y,i=n.width,o=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return b3(a,{x:e,y:r,width:i,height:o,top:r,right:e+i,bottom:o+r,left:e}),a}function Sx(n,e,r,i){return{x:n,y:e,width:r,height:i}}var JG=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Sx(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=QG(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),eH=function(){function n(e,r){var i=ZG(r);b3(this,{target:e,contentRect:i})}return n}(),tH=function(){function n(e,r,i){if(this.activeObservations_=[],this.observations_=new _3,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof ef(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new JG(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof ef(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(i){return new eH(i.target,i.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),w3=typeof WeakMap<"u"?new WeakMap:new _3,C3=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=jG.getInstance(),i=new tH(e,r,this);w3.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){C3.prototype[n]=function(){var e;return(e=w3.get(this))[n].apply(e,arguments)}});var nH=function(){return typeof Z0.ResizeObserver<"u"?Z0.ResizeObserver:C3}(),Il=new Map;function rH(n){n.forEach(function(e){var r,i=e.target;(r=Il.get(i))===null||r===void 0||r.forEach(function(o){return o(i)})})}var E3=new nH(rH);function iH(n,e){Il.has(n)||(Il.set(n,new Set),E3.observe(n)),Il.get(n).add(e)}function oH(n,e){Il.has(n)&&(Il.get(n).delete(e),Il.get(n).size||(E3.unobserve(n),Il.delete(n)))}function Gr(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function WA(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,g3(i.key),i)}}function Hr(n,e,r){return e&&WA(n.prototype,e),r&&WA(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function tf(n,e){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tf(n,e)}function sc(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&tf(n,e)}function Wp(n){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wp(n)}function uT(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uT=function(){return!!n})()}function nn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sH(n,e){if(e&&(Mt(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(n)}function ac(n){var e=uT();return function(){var r,i=Wp(n);if(e){var o=Wp(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return sH(this,r)}}var aH=function(n){sc(r,n);var e=ac(r);function r(){return Gr(this,r),e.apply(this,arguments)}return Hr(r,[{key:"render",value:function(){return this.props.children}}]),r}(_.Component);function lH(n,e){var r=n.children,i=n.disabled,o=_.useRef(null),s=_.useRef(null),a=_.useContext(_w),l=typeof r=="function",c=l?r(o):r,u=_.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!l&&_.isValidElement(c)&&Vm(c),f=d?bx(c):null,h=zf(f,o),p=function(){var m;return pp(o.current)||(o.current&&Mt(o.current)==="object"?pp((m=o.current)===null||m===void 0?void 0:m.nativeElement):null)||pp(s.current)};_.useImperativeHandle(e,function(){return p()});var g=_.useRef(n);g.current=n;var y=_.useCallback(function(v){var m=g.current,x=m.onResize,b=m.data,S=v.getBoundingClientRect(),w=S.width,C=S.height,E=v.offsetWidth,M=v.offsetHeight,T=Math.floor(w),R=Math.floor(C);if(u.current.width!==T||u.current.height!==R||u.current.offsetWidth!==E||u.current.offsetHeight!==M){var P={width:T,height:R,offsetWidth:E,offsetHeight:M};u.current=P;var D=E===Math.round(w)?w:E,L=M===Math.round(C)?C:M,A=re(re({},P),{},{offsetWidth:D,offsetHeight:L});a==null||a(A,v,b),x&&Promise.resolve().then(function(){x(A,v)})}},[]);return _.useEffect(function(){var v=p();return v&&!i&&iH(v,y),function(){return oH(v,y)}},[o.current,i]),_.createElement(aH,{ref:s},d?_.cloneElement(c,{ref:h}):c)}var cH=_.forwardRef(lH),uH="rc-observer-key";function dH(n,e){var r=n.children,i=typeof r=="function"?[r]:Ga(r);return i.map(function(o,s){var a=(o==null?void 0:o.key)||"".concat(uH,"-").concat(s);return _.createElement(cH,ut({},n,{key:a,ref:s===0?e:void 0}),o)})}var Za=_.forwardRef(dH);Za.Collection=BG;function na(n,e){var r=Object.assign({},n);return Array.isArray(e)&&e.forEach(function(i){delete r[i]}),r}function Sw(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function fH(n){if(Array.isArray(n))return Sw(n)}function T3(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dT(n,e){if(n){if(typeof n=="string")return Sw(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sw(n,e):void 0}}function hH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(n){return fH(n)||T3(n)||dT(n)||hH()}var M3=function(e){return+setTimeout(e,16)},R3=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(M3=function(e){return window.requestAnimationFrame(e)},R3=function(e){return window.cancelAnimationFrame(e)});var qA=0,fT=new Map;function A3(n){fT.delete(n)}var pr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;qA+=1;var i=qA;function o(s){if(s===0)A3(i),e();else{var a=M3(function(){o(s-1)});fT.set(i,a)}}return o(r),i};pr.cancel=function(n){var e=fT.get(n);return A3(n),R3(e)};function N3(n){if(Array.isArray(n))return n}function pH(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function P3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(n,e){return N3(n)||pH(n,e)||dT(n,e)||P3()}function qp(n){for(var e=0,r,i=0,o=n.length;o>=4;++i,o-=4)r=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(o){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function mi(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function ww(n,e){if(!n)return!1;if(n.contains)return n.contains(e);for(var r=e;r;){if(r===n)return!0;r=r.parentNode}return!1}var XA="data-rc-order",KA="data-rc-priority",mH="rc-util-key",Cw=new Map;function O3(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.mark;return e?e.startsWith("data-")?e:"data-".concat(e):mH}function wx(n){if(n.attachTo)return n.attachTo;var e=document.querySelector("head");return e||document.body}function gH(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function hT(n){return Array.from((Cw.get(n)||n).children).filter(function(e){return e.tagName==="STYLE"})}function I3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!mi())return null;var r=e.csp,i=e.prepend,o=e.priority,s=o===void 0?0:o,a=gH(i),l=a==="prependQueue",c=document.createElement("style");c.setAttribute(XA,a),l&&s&&c.setAttribute(KA,"".concat(s)),r!=null&&r.nonce&&(c.nonce=r==null?void 0:r.nonce),c.innerHTML=n;var u=wx(e),d=u.firstChild;if(i){if(l){var f=(e.styles||hT(u)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(XA)))return!1;var p=Number(h.getAttribute(KA)||0);return s>=p});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function D3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=wx(e);return(e.styles||hT(r)).find(function(i){return i.getAttribute(O3(e))===n})}function Xp(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=D3(n,e);if(r){var i=wx(e);i.removeChild(r)}}function vH(n,e){var r=Cw.get(n);if(!r||!ww(document,r)){var i=I3("",e),o=i.parentNode;Cw.set(n,o),n.removeChild(i)}}function Ia(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=wx(r),o=hT(i),s=re(re({},r),{},{styles:o});vH(i,s);var a=D3(e,s);if(a){var l,c;if((l=s.csp)!==null&&l!==void 0&&l.nonce&&a.nonce!==((c=s.csp)===null||c===void 0?void 0:c.nonce)){var u;a.nonce=(u=s.csp)===null||u===void 0?void 0:u.nonce}return a.innerHTML!==n&&(a.innerHTML=n),a}var d=I3(n,s);return d.setAttribute(O3(s),e),d}function yH(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function Cn(n,e){if(n==null)return{};var r,i,o=yH(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function Ew(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=new Set;function o(s,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=i.has(s);if(Yi(!c,"Warning: There may be circular references"),c)return!1;if(s===a)return!0;if(r&&l>1)return!1;i.add(s);var u=l+1;if(Array.isArray(s)){if(!Array.isArray(a)||s.length!==a.length)return!1;for(var d=0;d<s.length;d++)if(!o(s[d],a[d],u))return!1;return!0}if(s&&a&&Mt(s)==="object"&&Mt(a)==="object"){var f=Object.keys(s);return f.length!==Object.keys(a).length?!1:f.every(function(h){return o(s[h],a[h],u)})}return!1}return o(n,e)}var xH="%";function Tw(n){return n.join(xH)}var _H=function(){function n(e){Gr(this,n),ee(this,"instanceId",void 0),ee(this,"cache",new Map),this.instanceId=e}return Hr(n,[{key:"get",value:function(r){return this.opGet(Tw(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,i){return this.opUpdate(Tw(r),i)}},{key:"opUpdate",value:function(r,i){var o=this.cache.get(r),s=i(o);s===null?this.cache.delete(r):this.cache.set(r,s)}}]),n}(),nf="data-token-hash",_s="data-css-hash",Dl="__cssinjs_instance__";function bH(){var n=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(_s,"]"))||[],r=document.head.firstChild;Array.from(e).forEach(function(o){o[Dl]=o[Dl]||n,o[Dl]===n&&document.head.insertBefore(o,r)});var i={};Array.from(document.querySelectorAll("style[".concat(_s,"]"))).forEach(function(o){var s=o.getAttribute(_s);if(i[s]){if(o[Dl]===n){var a;(a=o.parentNode)===null||a===void 0||a.removeChild(o)}}else i[s]=!0})}return new _H(n)}var Cx=_.createContext({hashPriority:"low",cache:bH(),defaultCache:!0});function SH(n,e){if(n.length!==e.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}var pT=function(){function n(){Gr(this,n),ee(this,"cache",void 0),ee(this,"keys",void 0),ee(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Hr(n,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var i,o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return r.forEach(function(l){if(!a)a=void 0;else{var c;a=(c=a)===null||c===void 0||(c=c.map)===null||c===void 0?void 0:c.get(l)}}),(i=a)!==null&&i!==void 0&&i.value&&s&&(a.value[1]=this.cacheCallTimes++),(o=a)===null||o===void 0?void 0:o.value}},{key:"get",value:function(r){var i;return(i=this.internalGet(r,!0))===null||i===void 0?void 0:i[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,i){var o=this;if(!this.has(r)){if(this.size()+1>n.MAX_CACHE_SIZE+n.MAX_CACHE_OFFSET){var s=this.keys.reduce(function(u,d){var f=Ce(u,2),h=f[1];return o.internalGet(d)[1]<h?[d,o.internalGet(d)[1]]:u},[this.keys[0],this.cacheCallTimes]),a=Ce(s,1),l=a[0];this.delete(l)}this.keys.push(r)}var c=this.cache;r.forEach(function(u,d){if(d===r.length-1)c.set(u,{value:[i,o.cacheCallTimes++]});else{var f=c.get(u);f?f.map||(f.map=new Map):c.set(u,{map:new Map}),c=c.get(u).map}})}},{key:"deleteByPath",value:function(r,i){var o=r.get(i[0]);if(i.length===1){var s;return o.map?r.set(i[0],{map:o.map}):r.delete(i[0]),(s=o.value)===null||s===void 0?void 0:s[0]}var a=this.deleteByPath(o.map,i.slice(1));return(!o.map||o.map.size===0)&&!o.value&&r.delete(i[0]),a}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(i){return!SH(i,r)}),this.deleteByPath(this.cache,r)}}]),n}();ee(pT,"MAX_CACHE_SIZE",20);ee(pT,"MAX_CACHE_OFFSET",5);var YA=0,L3=function(){function n(e){Gr(this,n),ee(this,"derivatives",void 0),ee(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=YA,e.length===0&&(e.length>0,void 0),YA+=1}return Hr(n,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(i,o){return o(r,i)},void 0)}}]),n}(),ib=new pT;function Mw(n){var e=Array.isArray(n)?n:[n];return ib.has(e)||ib.set(e,new L3(e)),ib.get(e)}var wH=new WeakMap,ob={};function CH(n,e){for(var r=wH,i=0;i<e.length;i+=1){var o=e[i];r.has(o)||r.set(o,new WeakMap),r=r.get(o)}return r.has(ob)||r.set(ob,n()),r.get(ob)}var QA=new WeakMap;function mp(n){var e=QA.get(n)||"";return e||(Object.keys(n).forEach(function(r){var i=n[r];e+=r,i instanceof L3?e+=i.id:i&&Mt(i)==="object"?e+=mp(i):e+=i}),e=qp(e),QA.set(n,e)),e}function ZA(n,e){return qp("".concat(e,"_").concat(mp(n)))}var Rw=mi();function De(n){return typeof n=="number"?"".concat(n,"px"):n}function ey(n,e,r){var i,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s)return n;var a=re(re({},o),{},(i={},ee(i,nf,e),ee(i,_s,r),i)),l=Object.keys(a).map(function(c){var u=a[c];return u?"".concat(c,'="').concat(u,'"'):null}).filter(function(c){return c}).join(" ");return"<style ".concat(l,">").concat(n,"</style>")}var s0=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},EH=function(e,r,i){return Object.keys(e).length?".".concat(r).concat(i!=null&&i.scope?".".concat(i.scope):"","{").concat(Object.entries(e).map(function(o){var s=Ce(o,2),a=s[0],l=s[1];return"".concat(a,":").concat(l,";")}).join(""),"}"):""},F3=function(e,r,i){var o={},s={};return Object.entries(e).forEach(function(a){var l,c,u=Ce(a,2),d=u[0],f=u[1];if(i!=null&&(l=i.preserve)!==null&&l!==void 0&&l[d])s[d]=f;else if((typeof f=="string"||typeof f=="number")&&!(i!=null&&(c=i.ignore)!==null&&c!==void 0&&c[d])){var h,p=s0(d,i==null?void 0:i.prefix);o[p]=typeof f=="number"&&!(i!=null&&(h=i.unitless)!==null&&h!==void 0&&h[d])?"".concat(f,"px"):String(f),s[d]="var(".concat(p,")")}}),[s,EH(o,r,{scope:i==null?void 0:i.scope})]},JA=mi()?_.useLayoutEffect:_.useEffect,_n=function(e,r){var i=_.useRef(!0);JA(function(){return e(i.current)},r),JA(function(){return i.current=!1,function(){i.current=!0}},[])},e2=function(e,r){_n(function(i){if(!i)return e()},r)},TH=re({},Xy),t2=TH.useInsertionEffect,MH=function(e,r,i){_.useMemo(e,i),_n(function(){return r(!0)},i)},RH=t2?function(n,e,r){return t2(function(){return n(),e()},r)}:MH,AH=re({},Xy),NH=AH.useInsertionEffect,PH=function(e){var r=[],i=!1;function o(s){i||r.push(s)}return _.useEffect(function(){return i=!1,function(){i=!0,r.length&&r.forEach(function(s){return s()})}},e),o},OH=function(){return function(e){e()}},IH=typeof NH<"u"?PH:OH;function mT(n,e,r,i,o){var s=_.useContext(Cx),a=s.cache,l=[n].concat(st(e)),c=Tw(l),u=IH([c]),d=function(g){a.opUpdate(c,function(y){var v=y||[void 0,void 0],m=Ce(v,2),x=m[0],b=x===void 0?0:x,S=m[1],w=S,C=w||r(),E=[b,C];return g?g(E):E})};_.useMemo(function(){d()},[c]);var f=a.opGet(c),h=f[1];return RH(function(){o==null||o(h)},function(p){return d(function(g){var y=Ce(g,2),v=y[0],m=y[1];return p&&v===0&&(o==null||o(h)),[v+1,m]}),function(){a.opUpdate(c,function(g){var y=g||[],v=Ce(y,2),m=v[0],x=m===void 0?0:m,b=v[1],S=x-1;return S===0?(u(function(){(p||!a.opGet(c))&&(i==null||i(b,!1))}),null):[x-1,b]})}},[c]),h}var DH={},LH="css",Ic=new Map;function FH(n){Ic.set(n,(Ic.get(n)||0)+1)}function UH(n,e){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(nf,'="').concat(n,'"]'));r.forEach(function(i){if(i[Dl]===e){var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)}})}}var BH=0;function $H(n,e){Ic.set(n,(Ic.get(n)||0)-1);var r=Array.from(Ic.keys()),i=r.filter(function(o){var s=Ic.get(o)||0;return s<=0});r.length-i.length>BH&&i.forEach(function(o){UH(o,e),Ic.delete(o)})}var zH=function(e,r,i,o){var s=i.getDerivativeToken(e),a=re(re({},s),r);return o&&(a=o(a)),a},U3="token";function kH(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=_.useContext(Cx),o=i.cache.instanceId,s=i.container,a=r.salt,l=a===void 0?"":a,c=r.override,u=c===void 0?DH:c,d=r.formatToken,f=r.getComputedToken,h=r.cssVar,p=CH(function(){return Object.assign.apply(Object,[{}].concat(st(e)))},e),g=mp(p),y=mp(u),v=h?mp(h):"",m=mT(U3,[l,n.id,g,y,v],function(){var x,b=f?f(p,u,n):zH(p,u,n,d),S=re({},b),w="";if(h){var C=F3(b,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),E=Ce(C,2);b=E[0],w=E[1]}var M=ZA(b,l);b._tokenKey=M,S._tokenKey=ZA(S,l);var T=(x=h==null?void 0:h.key)!==null&&x!==void 0?x:M;b._themeKey=T,FH(T);var R="".concat(LH,"-").concat(qp(M));return b._hashId=R,[b,R,S,w,(h==null?void 0:h.key)||""]},function(x){$H(x[0]._themeKey,o)},function(x){var b=Ce(x,4),S=b[0],w=b[3];if(h&&w){var C=Ia(w,qp("css-variables-".concat(S._themeKey)),{mark:_s,prepend:"queue",attachTo:s,priority:-999});C[Dl]=o,C.setAttribute(nf,S._themeKey)}});return m}var VH=function(e,r,i){var o=Ce(e,5),s=o[2],a=o[3],l=o[4],c=i||{},u=c.plain;if(!a)return null;var d=s._tokenKey,f=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(f)},p=ey(a,l,d,h,u);return[f,d,p]},GH={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},B3="comm",$3="rule",z3="decl",HH="@import",jH="@keyframes",WH="@layer",k3=Math.abs,gT=String.fromCharCode;function V3(n){return n.trim()}function a0(n,e,r){return n.replace(e,r)}function qH(n,e,r){return n.indexOf(e,r)}function Kp(n,e){return n.charCodeAt(e)|0}function rf(n,e,r){return n.slice(e,r)}function Ls(n){return n.length}function XH(n){return n.length}function Bg(n,e){return e.push(n),n}var Ex=1,of=1,G3=0,Wo=0,_r=0,kf="";function vT(n,e,r,i,o,s,a,l){return{value:n,root:e,parent:r,type:i,props:o,children:s,line:Ex,column:of,length:a,return:"",siblings:l}}function KH(){return _r}function YH(){return _r=Wo>0?Kp(kf,--Wo):0,of--,_r===10&&(of=1,Ex--),_r}function bs(){return _r=Wo<G3?Kp(kf,Wo++):0,of++,_r===10&&(of=1,Ex++),_r}function Ll(){return Kp(kf,Wo)}function l0(){return Wo}function Tx(n,e){return rf(kf,n,e)}function Yp(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QH(n){return Ex=of=1,G3=Ls(kf=n),Wo=0,[]}function ZH(n){return kf="",n}function sb(n){return V3(Tx(Wo-1,Aw(n===91?n+2:n===40?n+1:n)))}function JH(n){for(;(_r=Ll())&&_r<33;)bs();return Yp(n)>2||Yp(_r)>3?"":" "}function e8(n,e){for(;--e&&bs()&&!(_r<48||_r>102||_r>57&&_r<65||_r>70&&_r<97););return Tx(n,l0()+(e<6&&Ll()==32&&bs()==32))}function Aw(n){for(;bs();)switch(_r){case n:return Wo;case 34:case 39:n!==34&&n!==39&&Aw(_r);break;case 40:n===41&&Aw(n);break;case 92:bs();break}return Wo}function t8(n,e){for(;bs()&&n+_r!==57;)if(n+_r===84&&Ll()===47)break;return"/*"+Tx(e,Wo-1)+"*"+gT(n===47?n:bs())}function n8(n){for(;!Yp(Ll());)bs();return Tx(n,Wo)}function r8(n){return ZH(c0("",null,null,null,[""],n=QH(n),0,[0],n))}function c0(n,e,r,i,o,s,a,l,c){for(var u=0,d=0,f=a,h=0,p=0,g=0,y=1,v=1,m=1,x=0,b="",S=o,w=s,C=i,E=b;v;)switch(g=x,x=bs()){case 40:if(g!=108&&Kp(E,f-1)==58){qH(E+=a0(sb(x),"&","&\f"),"&\f",k3(u?l[u-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:E+=sb(x);break;case 9:case 10:case 13:case 32:E+=JH(g);break;case 92:E+=e8(l0()-1,7);continue;case 47:switch(Ll()){case 42:case 47:Bg(i8(t8(bs(),l0()),e,r,c),c),(Yp(g||1)==5||Yp(Ll()||1)==5)&&Ls(E)&&rf(E,-1,void 0)!==" "&&(E+=" ");break;default:E+="/"}break;case 123*y:l[u++]=Ls(E)*m;case 125*y:case 59:case 0:switch(x){case 0:case 125:v=0;case 59+d:m==-1&&(E=a0(E,/\f/g,"")),p>0&&(Ls(E)-f||y===0&&g===47)&&Bg(p>32?r2(E+";",i,r,f-1,c):r2(a0(E," ","")+";",i,r,f-2,c),c);break;case 59:E+=";";default:if(Bg(C=n2(E,e,r,u,d,o,l,b,S=[],w=[],f,s),s),x===123)if(d===0)c0(E,e,C,C,S,s,f,l,w);else switch(h===99&&Kp(E,3)===110?100:h){case 100:case 108:case 109:case 115:c0(n,C,C,i&&Bg(n2(n,C,C,0,0,o,l,b,o,S=[],f,w),w),o,w,f,l,i?S:w);break;default:c0(E,C,C,C,[""],w,0,l,w)}}u=d=p=0,y=m=1,b=E="",f=a;break;case 58:f=1+Ls(E),p=g;default:if(y<1){if(x==123)--y;else if(x==125&&y++==0&&YH()==125)continue}switch(E+=gT(x),x*y){case 38:m=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(Ls(E)-1)*m,m=1;break;case 64:Ll()===45&&(E+=sb(bs())),h=Ll(),d=f=Ls(b=E+=n8(l0())),x++;break;case 45:g===45&&Ls(E)==2&&(y=0)}}return s}function n2(n,e,r,i,o,s,a,l,c,u,d,f){for(var h=o-1,p=o===0?s:[""],g=XH(p),y=0,v=0,m=0;y<i;++y)for(var x=0,b=rf(n,h+1,h=k3(v=a[y])),S=n;x<g;++x)(S=V3(v>0?p[x]+" "+b:a0(b,/&\f/g,p[x])))&&(c[m++]=S);return vT(n,e,r,o===0?$3:l,c,u,d,f)}function i8(n,e,r,i){return vT(n,e,r,B3,gT(KH()),rf(n,2,-2),0,i)}function r2(n,e,r,i,o){return vT(n,e,r,z3,rf(n,0,i),rf(n,i+1,-1),i,o)}function Nw(n,e){for(var r="",i=0;i<n.length;i++)r+=e(n[i],i,n,e)||"";return r}function o8(n,e,r,i){switch(n.type){case WH:if(n.children.length)break;case HH:case z3:return n.return=n.return||n.value;case B3:return"";case jH:return n.return=n.value+"{"+Nw(n.children,i)+"}";case $3:if(!Ls(n.value=n.props.join(",")))return""}return Ls(r=Nw(n.children,i))?n.return=n.value+"{"+r+"}":""}var i2="data-ant-cssinjs-cache-path",H3="_FILE_STYLE__",Yc,j3=!0;function s8(){if(!Yc&&(Yc={},mi())){var n=document.createElement("div");n.className=i2,n.style.position="fixed",n.style.visibility="hidden",n.style.top="-9999px",document.body.appendChild(n);var e=getComputedStyle(n).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(o){var s=o.split(":"),a=Ce(s,2),l=a[0],c=a[1];Yc[l]=c});var r=document.querySelector("style[".concat(i2,"]"));if(r){var i;j3=!1,(i=r.parentNode)===null||i===void 0||i.removeChild(r)}document.body.removeChild(n)}}function a8(n){return s8(),!!Yc[n]}function l8(n){var e=Yc[n],r=null;if(e&&mi())if(j3)r=H3;else{var i=document.querySelector("style[".concat(_s,'="').concat(Yc[n],'"]'));i?r=i.innerHTML:delete Yc[n]}return[r,e]}var c8="_skip_check_",W3="_multi_value_";function u0(n){var e=Nw(r8(n),o8);return e.replace(/\{%%%\:[^;];}/g,";")}function u8(n){return Mt(n)==="object"&&n&&(c8 in n||W3 in n)}function o2(n,e,r){if(!e)return n;var i=".".concat(e),o=r==="low"?":where(".concat(i,")"):i,s=n.split(",").map(function(a){var l,c=a.trim().split(/\s+/),u=c[0]||"",d=((l=u.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return u="".concat(d).concat(o).concat(u.slice(d.length)),[u].concat(st(c.slice(1))).join(" ")});return s.join(",")}var d8=function n(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},o=i.root,s=i.injectHash,a=i.parentSelectors,l=r.hashId,c=r.layer;r.path;var u=r.hashPriority,d=r.transformers,f=d===void 0?[]:d;r.linters;var h="",p={};function g(m){var x=m.getName(l);if(!p[x]){var b=n(m.style,r,{root:!1,parentSelectors:a}),S=Ce(b,1),w=S[0];p[x]="@keyframes ".concat(m.getName(l)).concat(w)}}function y(m){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return m.forEach(function(b){Array.isArray(b)?y(b,x):b&&x.push(b)}),x}var v=y(Array.isArray(e)?e:[e]);return v.forEach(function(m){var x=typeof m=="string"&&!o?{}:m;if(typeof x=="string")h+="".concat(x,`
`);else if(x._keyframe)g(x);else{var b=f.reduce(function(S,w){var C;return(w==null||(C=w.visit)===null||C===void 0?void 0:C.call(w,S))||S},x);Object.keys(b).forEach(function(S){var w=b[S];if(Mt(w)==="object"&&w&&(S!=="animationName"||!w._keyframe)&&!u8(w)){var C=!1,E=S.trim(),M=!1;(o||s)&&l?E.startsWith("@")?C=!0:E==="&"?E=o2("",l,u):E=o2(S,l,u):o&&!l&&(E==="&"||E==="")&&(E="",M=!0);var T=n(w,r,{root:M,injectHash:C,parentSelectors:[].concat(st(a),[E])}),R=Ce(T,2),P=R[0],D=R[1];p=re(re({},p),D),h+="".concat(E).concat(P)}else{let I=function(N,F){var O=N.replace(/[A-Z]/g,function(U){return"-".concat(U.toLowerCase())}),V=F;!GH[N]&&typeof V=="number"&&V!==0&&(V="".concat(V,"px")),N==="animationName"&&F!==null&&F!==void 0&&F._keyframe&&(g(F),V=F.getName(l)),h+="".concat(O,":").concat(V,";")};var L,A=(L=w==null?void 0:w.value)!==null&&L!==void 0?L:w;Mt(w)==="object"&&w!==null&&w!==void 0&&w[W3]&&Array.isArray(A)?A.forEach(function(N){I(S,N)}):I(S,A)}})}}),o?c&&(h&&(h="@layer ".concat(c.name," {").concat(h,"}")),c.dependencies&&(p["@layer ".concat(c.name)]=c.dependencies.map(function(m){return"@layer ".concat(m,", ").concat(c.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,p]};function q3(n,e){return qp("".concat(n.join("%")).concat(e))}function f8(){return null}var X3="style";function Pw(n,e){var r=n.token,i=n.path,o=n.hashId,s=n.layer,a=n.nonce,l=n.clientOnly,c=n.order,u=c===void 0?0:c,d=_.useContext(Cx),f=d.autoClear;d.mock;var h=d.defaultCache,p=d.hashPriority,g=d.container,y=d.ssrInline,v=d.transformers,m=d.linters,x=d.cache,b=d.layer,S=r._tokenKey,w=[S];b&&w.push("layer"),w.push.apply(w,st(i));var C=Rw,E=mT(X3,w,function(){var D=w.join("|");if(a8(D)){var L=l8(D),A=Ce(L,2),I=A[0],N=A[1];if(I)return[I,S,N,{},l,u]}var F=e(),O=d8(F,{hashId:o,hashPriority:p,layer:b?s:void 0,path:i.join("-"),transformers:v,linters:m}),V=Ce(O,2),U=V[0],k=V[1],W=u0(U),J=q3(w,W);return[W,S,J,k,l,u]},function(D,L){var A=Ce(D,3),I=A[2];(L||f)&&Rw&&Xp(I,{mark:_s})},function(D){var L=Ce(D,4),A=L[0];L[1];var I=L[2],N=L[3];if(C&&A!==H3){var F={mark:_s,prepend:b?!1:"queue",attachTo:g,priority:u},O=typeof a=="function"?a():a;O&&(F.csp={nonce:O});var V=[],U=[];Object.keys(N).forEach(function(W){W.startsWith("@layer")?V.push(W):U.push(W)}),V.forEach(function(W){Ia(u0(N[W]),"_layer-".concat(W),re(re({},F),{},{prepend:!0}))});var k=Ia(A,I,F);k[Dl]=x.instanceId,k.setAttribute(nf,S),U.forEach(function(W){Ia(u0(N[W]),"_effect-".concat(W),F)})}}),M=Ce(E,3),T=M[0],R=M[1],P=M[2];return function(D){var L;if(!y||C||!h)L=_.createElement(f8,null);else{var A;L=_.createElement("style",ut({},(A={},ee(A,nf,R),ee(A,_s,P),A),{dangerouslySetInnerHTML:{__html:T}}))}return _.createElement(_.Fragment,null,L,D)}}var h8=function(e,r,i){var o=Ce(e,6),s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=i||{},h=f.plain;if(u)return null;var p=s,g={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)};return p=ey(s,a,l,g,h),c&&Object.keys(c).forEach(function(y){if(!r[y]){r[y]=!0;var v=u0(c[y]),m=ey(v,a,"_effect-".concat(y),g,h);y.startsWith("@layer")?p=m+p:p+=m}}),[d,l,p]},K3="cssVar",p8=function(e,r){var i=e.key,o=e.prefix,s=e.unitless,a=e.ignore,l=e.token,c=e.scope,u=c===void 0?"":c,d=_.useContext(Cx),f=d.cache.instanceId,h=d.container,p=l._tokenKey,g=[].concat(st(e.path),[i,u,p]),y=mT(K3,g,function(){var v=r(),m=F3(v,i,{prefix:o,unitless:s,ignore:a,scope:u}),x=Ce(m,2),b=x[0],S=x[1],w=q3(g,S);return[b,S,w,i]},function(v){var m=Ce(v,3),x=m[2];Rw&&Xp(x,{mark:_s})},function(v){var m=Ce(v,3),x=m[1],b=m[2];if(x){var S=Ia(x,b,{mark:_s,prepend:"queue",attachTo:h,priority:-999});S[Dl]=f,S.setAttribute(nf,i)}});return y},m8=function(e,r,i){var o=Ce(e,4),s=o[1],a=o[2],l=o[3],c=i||{},u=c.plain;if(!s)return null;var d=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},h=ey(s,l,a,f,u);return[d,a,h]},hh;hh={},ee(hh,X3,h8),ee(hh,U3,VH),ee(hh,K3,m8);var hn=function(){function n(e,r){Gr(this,n),ee(this,"name",void 0),ee(this,"style",void 0),ee(this,"_keyframe",!0),this.name=e,this.style=r}return Hr(n,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),n}();function Lu(n){return n.notSplit=!0,n}Lu(["borderTop","borderBottom"]),Lu(["borderTop"]),Lu(["borderBottom"]),Lu(["borderLeft","borderRight"]),Lu(["borderLeft"]),Lu(["borderRight"]);var yT=_.createContext({});function Y3(n){return N3(n)||T3(n)||dT(n)||P3()}function Bs(n,e){for(var r=n,i=0;i<e.length;i+=1){if(r==null)return;r=r[e[i]]}return r}function Q3(n,e,r,i){if(!e.length)return r;var o=Y3(e),s=o[0],a=o.slice(1),l;return!n&&typeof s=="number"?l=[]:Array.isArray(n)?l=st(n):l=re({},n),i&&r===void 0&&a.length===1?delete l[s][a[0]]:l[s]=Q3(l[s],a,r,i),l}function ss(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&i&&r===void 0&&!Bs(n,e.slice(0,-1))?n:Q3(n,e,r,i)}function g8(n){return Mt(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function s2(n){return Array.isArray(n)?[]:{}}var v8=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function bd(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=s2(e[0]);return e.forEach(function(o){function s(a,l){var c=new Set(l),u=Bs(o,a),d=Array.isArray(u);if(d||g8(u)){if(!c.has(u)){c.add(u);var f=Bs(i,a);d?i=ss(i,a,[]):(!f||Mt(f)!=="object")&&(i=ss(i,a,s2(u))),v8(u).forEach(function(h){s([].concat(st(a),[h]),c)})}}else i=ss(i,a,u)}s([])}),i}function y8(){}const x8=_.createContext({}),xT=()=>{const n=()=>{};return n.deprecated=y8,n},_8=_.createContext(void 0);var Z3={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},b8={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},S8=re(re({},b8),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const J3={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},a2={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},S8),timePickerLocale:Object.assign({},J3)},no="${label} is not a valid ${type}",lu={locale:"en",Pagination:Z3,DatePicker:a2,TimePicker:J3,Calendar:a2,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:no,method:no,array:no,object:no,number:no,date:no,boolean:no,integer:no,float:no,regexp:no,email:no,url:no,hex:no},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let d0=Object.assign({},lu.Modal),f0=[];const l2=()=>f0.reduce((n,e)=>Object.assign(Object.assign({},n),e),lu.Modal);function w8(n){if(n){const e=Object.assign({},n);return f0.push(e),d0=l2(),()=>{f0=f0.filter(r=>r!==e),d0=l2()}}d0=Object.assign({},lu.Modal)}function eU(){return d0}const _T=_.createContext(void 0),lc=(n,e)=>{const r=_.useContext(_T),i=_.useMemo(()=>{var s;const a=e||lu[n],l=(s=r==null?void 0:r[n])!==null&&s!==void 0?s:{};return Object.assign(Object.assign({},typeof a=="function"?a():a),l||{})},[n,e,r]),o=_.useMemo(()=>{const s=r==null?void 0:r.locale;return r!=null&&r.exist&&!s?lu.locale:s},[r]);return[i,o]},C8="internalMark",E8=n=>{const{locale:e={},children:r,_ANT_MARK__:i}=n;_.useEffect(()=>w8(e==null?void 0:e.Modal),[e]);const o=_.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return _.createElement(_T.Provider,{value:o},r)},jr=Math.round;function ab(n,e){const r=n.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],i=r.map(o=>parseFloat(o));for(let o=0;o<3;o+=1)i[o]=e(i[o]||0,r[o]||"",o);return r[3]?i[3]=r[3].includes("%")?i[3]/100:i[3]:i[3]=1,i}const c2=(n,e,r)=>r===0?n:n/100;function ph(n,e){const r=e||255;return n>r?r:n<0?0:n}class Ln{constructor(e){ee(this,"isValid",!0),ee(this,"r",0),ee(this,"g",0),ee(this,"b",0),ee(this,"a",1),ee(this,"_h",void 0),ee(this,"_s",void 0),ee(this,"_l",void 0),ee(this,"_v",void 0),ee(this,"_max",void 0),ee(this,"_min",void 0),ee(this,"_brightness",void 0);function r(o){return o[0]in e&&o[1]in e&&o[2]in e}if(e)if(typeof e=="string"){let s=function(a){return o.startsWith(a)};var i=s;const o=e.trim();/^#?[A-F\d]{3,8}$/i.test(o)?this.fromHexString(o):s("rgb")?this.fromRgbString(o):s("hsl")?this.fromHslString(o):(s("hsv")||s("hsb"))&&this.fromHsvString(o)}else if(e instanceof Ln)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(r("rgb"))this.r=ph(e.r),this.g=ph(e.g),this.b=ph(e.b),this.a=typeof e.a=="number"?ph(e.a,1):1;else if(r("hsl"))this.fromHsl(e);else if(r("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const r=this.toHsv();return r.h=e,this._c(r)}getLuminance(){function e(s){const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}const r=e(this.r),i=e(this.g),o=e(this.b);return .2126*r+.7152*i+.0722*o}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=jr(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const r=this.getHue(),i=this.getSaturation();let o=this.getLightness()-e/100;return o<0&&(o=0),this._c({h:r,s:i,l:o,a:this.a})}lighten(e=10){const r=this.getHue(),i=this.getSaturation();let o=this.getLightness()+e/100;return o>1&&(o=1),this._c({h:r,s:i,l:o,a:this.a})}mix(e,r=50){const i=this._c(e),o=r/100,s=l=>(i[l]-this[l])*o+this[l],a={r:jr(s("r")),g:jr(s("g")),b:jr(s("b")),a:jr(s("a")*100)/100};return this._c(a)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const r=this._c(e),i=this.a+r.a*(1-this.a),o=s=>jr((this[s]*this.a+r[s]*r.a*(1-this.a))/i);return this._c({r:o("r"),g:o("g"),b:o("b"),a:i})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const r=(this.r||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.g||0).toString(16);e+=i.length===2?i:"0"+i;const o=(this.b||0).toString(16);if(e+=o.length===2?o:"0"+o,typeof this.a=="number"&&this.a>=0&&this.a<1){const s=jr(this.a*255).toString(16);e+=s.length===2?s:"0"+s}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),r=jr(this.getSaturation()*100),i=jr(this.getLightness()*100);return this.a!==1?`hsla(${e},${r}%,${i}%,${this.a})`:`hsl(${e},${r}%,${i}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,r,i){const o=this.clone();return o[e]=ph(r,i),o}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const r=e.replace("#","");function i(o,s){return parseInt(r[o]+r[s||o],16)}r.length<6?(this.r=i(0),this.g=i(1),this.b=i(2),this.a=r[3]?i(3)/255:1):(this.r=i(0,1),this.g=i(2,3),this.b=i(4,5),this.a=r[6]?i(6,7)/255:1)}fromHsl({h:e,s:r,l:i,a:o}){if(this._h=e%360,this._s=r,this._l=i,this.a=typeof o=="number"?o:1,r<=0){const h=jr(i*255);this.r=h,this.g=h,this.b=h}let s=0,a=0,l=0;const c=e/60,u=(1-Math.abs(2*i-1))*r,d=u*(1-Math.abs(c%2-1));c>=0&&c<1?(s=u,a=d):c>=1&&c<2?(s=d,a=u):c>=2&&c<3?(a=u,l=d):c>=3&&c<4?(a=d,l=u):c>=4&&c<5?(s=d,l=u):c>=5&&c<6&&(s=u,l=d);const f=i-u/2;this.r=jr((s+f)*255),this.g=jr((a+f)*255),this.b=jr((l+f)*255)}fromHsv({h:e,s:r,v:i,a:o}){this._h=e%360,this._s=r,this._v=i,this.a=typeof o=="number"?o:1;const s=jr(i*255);if(this.r=s,this.g=s,this.b=s,r<=0)return;const a=e/60,l=Math.floor(a),c=a-l,u=jr(i*(1-r)*255),d=jr(i*(1-r*c)*255),f=jr(i*(1-r*(1-c))*255);switch(l){case 0:this.g=f,this.b=u;break;case 1:this.r=d,this.b=u;break;case 2:this.r=u,this.b=f;break;case 3:this.r=u,this.g=d;break;case 4:this.r=f,this.g=u;break;case 5:default:this.g=u,this.b=d;break}}fromHsvString(e){const r=ab(e,c2);this.fromHsv({h:r[0],s:r[1],v:r[2],a:r[3]})}fromHslString(e){const r=ab(e,c2);this.fromHsl({h:r[0],s:r[1],l:r[2],a:r[3]})}fromRgbString(e){const r=ab(e,(i,o)=>o.includes("%")?jr(i/100*255):i);this.r=r[0],this.g=r[1],this.b=r[2],this.a=r[3]}}var $g=2,u2=.16,T8=.05,M8=.05,R8=.15,tU=5,nU=4,A8=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function d2(n,e,r){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=r?Math.round(n.h)-$g*e:Math.round(n.h)+$g*e:i=r?Math.round(n.h)+$g*e:Math.round(n.h)-$g*e,i<0?i+=360:i>=360&&(i-=360),i}function f2(n,e,r){if(n.h===0&&n.s===0)return n.s;var i;return r?i=n.s-u2*e:e===nU?i=n.s+u2:i=n.s+T8*e,i>1&&(i=1),r&&e===tU&&i>.1&&(i=.1),i<.06&&(i=.06),Math.round(i*100)/100}function h2(n,e,r){var i;return r?i=n.v+M8*e:i=n.v-R8*e,i=Math.max(0,Math.min(1,i)),Math.round(i*100)/100}function Qp(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],i=new Ln(n),o=i.toHsv(),s=tU;s>0;s-=1){var a=new Ln({h:d2(o,s,!0),s:f2(o,s,!0),v:h2(o,s,!0)});r.push(a)}r.push(i);for(var l=1;l<=nU;l+=1){var c=new Ln({h:d2(o,l),s:f2(o,l),v:h2(o,l)});r.push(c)}return e.theme==="dark"?A8.map(function(u){var d=u.index,f=u.amount;return new Ln(e.backgroundColor||"#141414").mix(r[d],f).toHexString()}):r.map(function(u){return u.toHexString()})}var lb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ow=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Ow.primary=Ow[5];var Iw=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];Iw.primary=Iw[5];var Dw=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Dw.primary=Dw[5];var ty=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];ty.primary=ty[5];var Lw=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Lw.primary=Lw[5];var Fw=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Fw.primary=Fw[5];var Uw=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Uw.primary=Uw[5];var Bw=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];Bw.primary=Bw[5];var ny=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];ny.primary=ny[5];var $w=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];$w.primary=$w[5];var zw=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];zw.primary=zw[5];var kw=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];kw.primary=kw[5];var Vw=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Vw.primary=Vw[5];var cb={red:Ow,volcano:Iw,orange:Dw,gold:ty,yellow:Lw,lime:Fw,green:Uw,cyan:Bw,blue:ny,geekblue:$w,purple:zw,magenta:kw,grey:Vw};const rU={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Zp=Object.assign(Object.assign({},rU),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function N8(n,e){let{generateColorPalettes:r,generateNeutralColorPalettes:i}=e;const{colorSuccess:o,colorWarning:s,colorError:a,colorInfo:l,colorPrimary:c,colorBgBase:u,colorTextBase:d}=n,f=r(c),h=r(o),p=r(s),g=r(a),y=r(l),v=i(u,d),m=n.colorLink||n.colorInfo,x=r(m),b=new Ln(g[1]).mix(new Ln(g[3]),50).toHexString();return Object.assign(Object.assign({},v),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgFilledHover:b,colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:p[1],colorWarningBgHover:p[2],colorWarningBorder:p[3],colorWarningBorderHover:p[4],colorWarningHover:p[4],colorWarning:p[6],colorWarningActive:p[7],colorWarningTextHover:p[8],colorWarningText:p[9],colorWarningTextActive:p[10],colorInfoBg:y[1],colorInfoBgHover:y[2],colorInfoBorder:y[3],colorInfoBorderHover:y[4],colorInfoHover:y[4],colorInfo:y[6],colorInfoActive:y[7],colorInfoTextHover:y[8],colorInfoText:y[9],colorInfoTextActive:y[10],colorLinkHover:x[4],colorLink:x[6],colorLinkActive:x[7],colorBgMask:new Ln("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const P8=n=>{let e=n,r=n,i=n,o=n;return n<6&&n>=5?e=n+1:n<16&&n>=6?e=n+2:n>=16&&(e=16),n<7&&n>=5?r=4:n<8&&n>=7?r=5:n<14&&n>=8?r=6:n<16&&n>=14?r=7:n>=16&&(r=8),n<6&&n>=2?i=1:n>=6&&(i=2),n>4&&n<8?o=4:n>=8&&(o=6),{borderRadius:n,borderRadiusXS:i,borderRadiusSM:r,borderRadiusLG:e,borderRadiusOuter:o}};function O8(n){const{motionUnit:e,motionBase:r,borderRadius:i,lineWidth:o}=n;return Object.assign({motionDurationFast:`${(r+e).toFixed(1)}s`,motionDurationMid:`${(r+e*2).toFixed(1)}s`,motionDurationSlow:`${(r+e*3).toFixed(1)}s`,lineWidthBold:o+1},P8(i))}const I8=n=>{const{controlHeight:e}=n;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function h0(n){return(n+8)/n}function D8(n){const e=new Array(10).fill(null).map((r,i)=>{const o=i-1,s=n*Math.pow(Math.E,o/5),a=i>1?Math.floor(s):Math.ceil(s);return Math.floor(a/2)*2});return e[1]=n,e.map(r=>({size:r,lineHeight:h0(r)}))}const L8=n=>{const e=D8(n),r=e.map(d=>d.size),i=e.map(d=>d.lineHeight),o=r[1],s=r[0],a=r[2],l=i[1],c=i[0],u=i[2];return{fontSizeSM:s,fontSize:o,fontSizeLG:a,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:l,lineHeightLG:u,lineHeightSM:c,fontHeight:Math.round(l*o),fontHeightLG:Math.round(u*a),fontHeightSM:Math.round(c*s),lineHeightHeading1:i[6],lineHeightHeading2:i[5],lineHeightHeading3:i[4],lineHeightHeading4:i[3],lineHeightHeading5:i[2]}};function F8(n){const{sizeUnit:e,sizeStep:r}=n;return{sizeXXL:e*(r+8),sizeXL:e*(r+4),sizeLG:e*(r+2),sizeMD:e*(r+1),sizeMS:e*r,size:e*r,sizeSM:e*(r-1),sizeXS:e*(r-2),sizeXXS:e*(r-3)}}const Eo=(n,e)=>new Ln(n).setA(e).toRgbString(),mh=(n,e)=>new Ln(n).darken(e).toHexString(),U8=n=>{const e=Qp(n);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},B8=(n,e)=>{const r=n||"#fff",i=e||"#000";return{colorBgBase:r,colorTextBase:i,colorText:Eo(i,.88),colorTextSecondary:Eo(i,.65),colorTextTertiary:Eo(i,.45),colorTextQuaternary:Eo(i,.25),colorFill:Eo(i,.15),colorFillSecondary:Eo(i,.06),colorFillTertiary:Eo(i,.04),colorFillQuaternary:Eo(i,.02),colorBgSolid:Eo(i,1),colorBgSolidHover:Eo(i,.75),colorBgSolidActive:Eo(i,.95),colorBgLayout:mh(r,4),colorBgContainer:mh(r,0),colorBgElevated:mh(r,0),colorBgSpotlight:Eo(i,.85),colorBgBlur:"transparent",colorBorder:mh(r,15),colorBorderSecondary:mh(r,6)}};function $8(n){lb.pink=lb.magenta,cb.pink=cb.magenta;const e=Object.keys(rU).map(r=>{const i=n[r]===lb[r]?cb[r]:Qp(n[r]);return new Array(10).fill(1).reduce((o,s,a)=>(o[`${r}-${a+1}`]=i[a],o[`${r}${a+1}`]=i[a],o),{})}).reduce((r,i)=>(r=Object.assign(Object.assign({},r),i),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),e),N8(n,{generateColorPalettes:U8,generateNeutralColorPalettes:B8})),L8(n.fontSize)),F8(n)),I8(n)),O8(n))}const iU=Mw($8),Gw={token:Zp,override:{override:Zp},hashed:!0},oU=se.createContext(Gw),ry="ant",Mx="anticon",z8=["outlined","borderless","filled"],k8=(n,e)=>e||(n?`${ry}-${n}`:ry),$t=_.createContext({getPrefixCls:k8,iconPrefixCls:Mx}),{Consumer:lEe}=$t,V8=`-ant-${Date.now()}-${Math.random()}`;function G8(n,e){const r={},i=(a,l)=>{let c=a.clone();return c=(l==null?void 0:l(c))||c,c.toRgbString()},o=(a,l)=>{const c=new Ln(a),u=Qp(c.toRgbString());r[`${l}-color`]=i(c),r[`${l}-color-disabled`]=u[1],r[`${l}-color-hover`]=u[4],r[`${l}-color-active`]=u[6],r[`${l}-color-outline`]=c.clone().setA(.2).toRgbString(),r[`${l}-color-deprecated-bg`]=u[0],r[`${l}-color-deprecated-border`]=u[2]};if(e.primaryColor){o(e.primaryColor,"primary");const a=new Ln(e.primaryColor),l=Qp(a.toRgbString());l.forEach((u,d)=>{r[`primary-${d+1}`]=u}),r["primary-color-deprecated-l-35"]=i(a,u=>u.lighten(35)),r["primary-color-deprecated-l-20"]=i(a,u=>u.lighten(20)),r["primary-color-deprecated-t-20"]=i(a,u=>u.tint(20)),r["primary-color-deprecated-t-50"]=i(a,u=>u.tint(50)),r["primary-color-deprecated-f-12"]=i(a,u=>u.setA(u.a*.12));const c=new Ln(l[0]);r["primary-color-active-deprecated-f-30"]=i(c,u=>u.setA(u.a*.3)),r["primary-color-active-deprecated-d-02"]=i(c,u=>u.darken(2))}return e.successColor&&o(e.successColor,"success"),e.warningColor&&o(e.warningColor,"warning"),e.errorColor&&o(e.errorColor,"error"),e.infoColor&&o(e.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(a=>`--${n}-${a}: ${r[a]};`).join(`
`)}
  }
  `.trim()}function H8(n,e){const r=G8(n,e);mi()&&Ia(r,`${V8}-dynamic-theme`)}const Ha=_.createContext(!1),sU=n=>{let{children:e,disabled:r}=n;const i=_.useContext(Ha);return _.createElement(Ha.Provider,{value:r??i},e)},sf=_.createContext(void 0),j8=n=>{let{children:e,size:r}=n;const i=_.useContext(sf);return _.createElement(sf.Provider,{value:r||i},e)};function W8(){const n=_.useContext(Ha),e=_.useContext(sf);return{componentDisabled:n,componentSize:e}}var aU=Hr(function n(){Gr(this,n)}),lU="CALC_UNIT",q8=new RegExp(lU,"g");function ub(n){return typeof n=="number"?"".concat(n).concat(lU):n}var X8=function(n){sc(r,n);var e=ac(r);function r(i,o){var s;Gr(this,r),s=e.call(this),ee(nn(s),"result",""),ee(nn(s),"unitlessCssVar",void 0),ee(nn(s),"lowPriority",void 0);var a=Mt(i);return s.unitlessCssVar=o,i instanceof r?s.result="(".concat(i.result,")"):a==="number"?s.result=ub(i):a==="string"&&(s.result=i),s}return Hr(r,[{key:"add",value:function(o){return o instanceof r?this.result="".concat(this.result," + ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," + ").concat(ub(o))),this.lowPriority=!0,this}},{key:"sub",value:function(o){return o instanceof r?this.result="".concat(this.result," - ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," - ").concat(ub(o))),this.lowPriority=!0,this}},{key:"mul",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof r?this.result="".concat(this.result," * ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," * ").concat(o)),this.lowPriority=!1,this}},{key:"div",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof r?this.result="".concat(this.result," / ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," / ").concat(o)),this.lowPriority=!1,this}},{key:"getResult",value:function(o){return this.lowPriority||o?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(o){var s=this,a=o||{},l=a.unit,c=!0;return typeof l=="boolean"?c=l:Array.from(this.unitlessCssVar).some(function(u){return s.result.includes(u)})&&(c=!1),this.result=this.result.replace(q8,c?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),r}(aU),K8=function(n){sc(r,n);var e=ac(r);function r(i){var o;return Gr(this,r),o=e.call(this),ee(nn(o),"result",0),i instanceof r?o.result=i.result:typeof i=="number"&&(o.result=i),o}return Hr(r,[{key:"add",value:function(o){return o instanceof r?this.result+=o.result:typeof o=="number"&&(this.result+=o),this}},{key:"sub",value:function(o){return o instanceof r?this.result-=o.result:typeof o=="number"&&(this.result-=o),this}},{key:"mul",value:function(o){return o instanceof r?this.result*=o.result:typeof o=="number"&&(this.result*=o),this}},{key:"div",value:function(o){return o instanceof r?this.result/=o.result:typeof o=="number"&&(this.result/=o),this}},{key:"equal",value:function(){return this.result}}]),r}(aU),Y8=function(e,r){var i=e==="css"?X8:K8;return function(o){return new i(o,r)}},p2=function(e,r){return"".concat([r,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function br(n){var e=_.useRef();e.current=n;var r=_.useCallback(function(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(i=e.current)===null||i===void 0?void 0:i.call.apply(i,[e].concat(s))},[]);return r}function af(n){var e=_.useRef(!1),r=_.useState(n),i=Ce(r,2),o=i[0],s=i[1];_.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function a(l,c){c&&e.current||s(l)}return[o,a]}function db(n){return n!==void 0}function Zi(n,e){var r=e||{},i=r.defaultValue,o=r.value,s=r.onChange,a=r.postState,l=af(function(){return db(o)?o:db(i)?typeof i=="function"?i():i:typeof n=="function"?n():n}),c=Ce(l,2),u=c[0],d=c[1],f=o!==void 0?o:u,h=a?a(f):f,p=br(s),g=af([f]),y=Ce(g,2),v=y[0],m=y[1];e2(function(){var b=v[0];u!==b&&p(u,b)},[v]),e2(function(){db(o)||d(o)},[o]);var x=br(function(b,S){d(b,S),m([f],S)});return[h,x]}function m2(n,e,r,i){var o=re({},e[n]);if(i!=null&&i.deprecatedTokens){var s=i.deprecatedTokens;s.forEach(function(l){var c=Ce(l,2),u=c[0],d=c[1];if(o!=null&&o[u]||o!=null&&o[d]){var f;(f=o[d])!==null&&f!==void 0||(o[d]=o==null?void 0:o[u])}})}var a=re(re({},r),o);return Object.keys(a).forEach(function(l){a[l]===e[l]&&delete a[l]}),a}var cU=typeof CSSINJS_STATISTIC<"u",Hw=!0;function Un(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(!cU)return Object.assign.apply(Object,[{}].concat(e));Hw=!1;var i={};return e.forEach(function(o){if(Mt(o)==="object"){var s=Object.keys(o);s.forEach(function(a){Object.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return o[a]}})})}}),Hw=!0,i}var g2={};function Q8(){}var Z8=function(e){var r,i=e,o=Q8;return cU&&typeof Proxy<"u"&&(r=new Set,i=new Proxy(e,{get:function(a,l){if(Hw){var c;(c=r)===null||c===void 0||c.add(l)}return a[l]}}),o=function(a,l){var c;g2[a]={global:Array.from(r),component:re(re({},(c=g2[a])===null||c===void 0?void 0:c.component),l)}}),{token:i,keys:r,flush:o}};function v2(n,e,r){if(typeof r=="function"){var i;return r(Un(e,(i=e[n])!==null&&i!==void 0?i:{}))}return r??{}}function J8(n){return n==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return"max(".concat(i.map(function(s){return De(s)}).join(","),")")},min:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return"min(".concat(i.map(function(s){return De(s)}).join(","),")")}}}var ej=1e3*60*10,tj=function(){function n(){Gr(this,n),ee(this,"map",new Map),ee(this,"objectIDMap",new WeakMap),ee(this,"nextID",0),ee(this,"lastAccessBeat",new Map),ee(this,"accessBeat",0)}return Hr(n,[{key:"set",value:function(r,i){this.clear();var o=this.getCompositeKey(r);this.map.set(o,i),this.lastAccessBeat.set(o,Date.now())}},{key:"get",value:function(r){var i=this.getCompositeKey(r),o=this.map.get(i);return this.lastAccessBeat.set(i,Date.now()),this.accessBeat+=1,o}},{key:"getCompositeKey",value:function(r){var i=this,o=r.map(function(s){return s&&Mt(s)==="object"?"obj_".concat(i.getObjectID(s)):"".concat(Mt(s),"_").concat(s)});return o.join("|")}},{key:"getObjectID",value:function(r){if(this.objectIDMap.has(r))return this.objectIDMap.get(r);var i=this.nextID;return this.objectIDMap.set(r,i),this.nextID+=1,i}},{key:"clear",value:function(){var r=this;if(this.accessBeat>1e4){var i=Date.now();this.lastAccessBeat.forEach(function(o,s){i-o>ej&&(r.map.delete(s),r.lastAccessBeat.delete(s))}),this.accessBeat=0}}}]),n}(),y2=new tj;function nj(n,e){return se.useMemo(function(){var r=y2.get(e);if(r)return r;var i=n();return y2.set(e,i),i},e)}var rj=function(){return{}};function ij(n){var e=n.useCSP,r=e===void 0?rj:e,i=n.useToken,o=n.usePrefix,s=n.getResetStyles,a=n.getCommonStyle,l=n.getCompUnitless;function c(h,p,g,y){var v=Array.isArray(h)?h[0]:h;function m(M){return"".concat(String(v)).concat(M.slice(0,1).toUpperCase()).concat(M.slice(1))}var x=(y==null?void 0:y.unitless)||{},b=typeof l=="function"?l(h):{},S=re(re({},b),{},ee({},m("zIndexPopup"),!0));Object.keys(x).forEach(function(M){S[m(M)]=x[M]});var w=re(re({},y),{},{unitless:S,prefixToken:m}),C=d(h,p,g,w),E=u(v,g,w);return function(M){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,R=C(M,T),P=Ce(R,2),D=P[1],L=E(T),A=Ce(L,2),I=A[0],N=A[1];return[I,D,N]}}function u(h,p,g){var y=g.unitless,v=g.injectStyle,m=v===void 0?!0:v,x=g.prefixToken,b=g.ignore,S=function(E){var M=E.rootCls,T=E.cssVar,R=T===void 0?{}:T,P=i(),D=P.realToken;return p8({path:[h],prefix:R.prefix,key:R.key,unitless:y,ignore:b,token:D,scope:M},function(){var L=v2(h,D,p),A=m2(h,D,L,{deprecatedTokens:g==null?void 0:g.deprecatedTokens});return Object.keys(L).forEach(function(I){A[x(I)]=A[I],delete A[I]}),A}),null},w=function(E){var M=i(),T=M.cssVar;return[function(R){return m&&T?se.createElement(se.Fragment,null,se.createElement(S,{rootCls:E,cssVar:T,component:h}),R):R},T==null?void 0:T.key]};return w}function d(h,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=Array.isArray(h)?h:[h,h],m=Ce(v,1),x=m[0],b=v.join("-"),S=n.layer||{name:"antd"};return function(w){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,E=i(),M=E.theme,T=E.realToken,R=E.hashId,P=E.token,D=E.cssVar,L=o(),A=L.rootPrefixCls,I=L.iconPrefixCls,N=r(),F=D?"css":"js",O=nj(function(){var z=new Set;return D&&Object.keys(y.unitless||{}).forEach(function(j){z.add(s0(j,D.prefix)),z.add(s0(j,p2(x,D.prefix)))}),Y8(F,z)},[F,x,D==null?void 0:D.prefix]),V=J8(F),U=V.max,k=V.min,W={theme:M,token:P,hashId:R,nonce:function(){return N.nonce},clientOnly:y.clientOnly,layer:S,order:y.order||-999};typeof s=="function"&&Pw(re(re({},W),{},{clientOnly:!1,path:["Shared",A]}),function(){return s(P,{prefix:{rootPrefixCls:A,iconPrefixCls:I},csp:N})});var J=Pw(re(re({},W),{},{path:[b,w,I]}),function(){if(y.injectStyle===!1)return[];var z=Z8(P),j=z.token,X=z.flush,Q=v2(x,T,g),ne=".".concat(w),ye=m2(x,T,Q,{deprecatedTokens:y.deprecatedTokens});D&&Q&&Mt(Q)==="object"&&Object.keys(Q).forEach(function(ge){Q[ge]="var(".concat(s0(ge,p2(x,D.prefix)),")")});var me=Un(j,{componentCls:ne,prefixCls:w,iconCls:".".concat(I),antCls:".".concat(A),calc:O,max:U,min:k},D?Q:ye),fe=p(me,{hashId:R,prefixCls:w,rootPrefixCls:A,iconPrefixCls:I});X(x,ye);var le=typeof a=="function"?a(me,w,C,y.resetFont):null;return[y.resetStyle===!1?null:le,fe]});return[J,R]}}function f(h,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=d(h,p,g,re({resetStyle:!1,order:-998},y)),m=function(b){var S=b.prefixCls,w=b.rootCls,C=w===void 0?S:w;return v(S,C),null};return m}return{genStyleHooks:c,genSubStyleComponent:f,genComponentStyleHook:d}}const lf=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],oj="5.23.0";function fb(n){return n>=0&&n<=255}function zg(n,e){const{r,g:i,b:o,a:s}=new Ln(n).toRgb();if(s<1)return n;const{r:a,g:l,b:c}=new Ln(e).toRgb();for(let u=.01;u<=1;u+=.01){const d=Math.round((r-a*(1-u))/u),f=Math.round((i-l*(1-u))/u),h=Math.round((o-c*(1-u))/u);if(fb(d)&&fb(f)&&fb(h))return new Ln({r:d,g:f,b:h,a:Math.round(u*100)/100}).toRgbString()}return new Ln({r,g:i,b:o,a:1}).toRgbString()}var sj=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function uU(n){const{override:e}=n,r=sj(n,["override"]),i=Object.assign({},e);Object.keys(Zp).forEach(h=>{delete i[h]});const o=Object.assign(Object.assign({},r),i),s=480,a=576,l=768,c=992,u=1200,d=1600;if(o.motion===!1){const h="0s";o.motionDurationFast=h,o.motionDurationMid=h,o.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},o),{colorFillContent:o.colorFillSecondary,colorFillContentHover:o.colorFill,colorFillAlter:o.colorFillQuaternary,colorBgContainerDisabled:o.colorFillTertiary,colorBorderBg:o.colorBgContainer,colorSplit:zg(o.colorBorderSecondary,o.colorBgContainer),colorTextPlaceholder:o.colorTextQuaternary,colorTextDisabled:o.colorTextQuaternary,colorTextHeading:o.colorText,colorTextLabel:o.colorTextSecondary,colorTextDescription:o.colorTextTertiary,colorTextLightSolid:o.colorWhite,colorHighlight:o.colorError,colorBgTextHover:o.colorFillSecondary,colorBgTextActive:o.colorFill,colorIcon:o.colorTextTertiary,colorIconHover:o.colorText,colorErrorOutline:zg(o.colorErrorBg,o.colorBgContainer),colorWarningOutline:zg(o.colorWarningBg,o.colorBgContainer),fontSizeIcon:o.fontSizeSM,lineWidthFocus:o.lineWidth*3,lineWidth:o.lineWidth,controlOutlineWidth:o.lineWidth*2,controlInteractiveSize:o.controlHeight/2,controlItemBgHover:o.colorFillTertiary,controlItemBgActive:o.colorPrimaryBg,controlItemBgActiveHover:o.colorPrimaryBgHover,controlItemBgActiveDisabled:o.colorFill,controlTmpOutline:o.colorFillQuaternary,controlOutline:zg(o.colorPrimaryBg,o.colorBgContainer),lineType:o.lineType,borderRadius:o.borderRadius,borderRadiusXS:o.borderRadiusXS,borderRadiusSM:o.borderRadiusSM,borderRadiusLG:o.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:o.sizeXXS,paddingXS:o.sizeXS,paddingSM:o.sizeSM,padding:o.size,paddingMD:o.sizeMD,paddingLG:o.sizeLG,paddingXL:o.sizeXL,paddingContentHorizontalLG:o.sizeLG,paddingContentVerticalLG:o.sizeMS,paddingContentHorizontal:o.sizeMS,paddingContentVertical:o.sizeSM,paddingContentHorizontalSM:o.size,paddingContentVerticalSM:o.sizeXS,marginXXS:o.sizeXXS,marginXS:o.sizeXS,marginSM:o.sizeSM,margin:o.size,marginMD:o.sizeMD,marginLG:o.sizeLG,marginXL:o.sizeXL,marginXXL:o.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:s,screenXSMin:s,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:c-1,screenLG:c,screenLGMin:c,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:d-1,screenXXL:d,screenXXLMin:d,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ln("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ln("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ln("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),i)}var x2=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const dU={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},aj={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},lj={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},fU=(n,e,r)=>{const i=r.getDerivativeToken(n),{override:o}=e,s=x2(e,["override"]);let a=Object.assign(Object.assign({},i),{override:o});return a=uU(a),s&&Object.entries(s).forEach(l=>{let[c,u]=l;const{theme:d}=u,f=x2(u,["theme"]);let h=f;d&&(h=fU(Object.assign(Object.assign({},a),f),{override:f},d)),a[c]=h}),a};function eo(){const{token:n,hashed:e,theme:r,override:i,cssVar:o}=se.useContext(oU),s=`${oj}-${e||""}`,a=r||iU,[l,c,u]=kH(a,[Zp,n],{salt:s,override:i,getComputedToken:fU,formatToken:uU,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:dU,ignore:aj,preserve:lj}});return[a,u,e?c:"",l,o]}const jw={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Yo=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:n.colorText,fontSize:n.fontSize,lineHeight:n.lineHeight,listStyle:"none",fontFamily:e?"inherit":n.fontFamily}},Rx=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),hU=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),cj=n=>({a:{color:n.colorLink,textDecoration:n.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${n.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive},"&:active, &:hover":{textDecoration:n.linkHoverDecoration,outline:0},"&:focus":{textDecoration:n.linkFocusDecoration,outline:0},"&[disabled]":{color:n.colorTextDisabled,cursor:"not-allowed"}}}),uj=(n,e,r,i)=>{const o=`[class^="${e}"], [class*=" ${e}"]`,s=r?`.${r}`:o,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let l={};return i!==!1&&(l={fontFamily:n.fontFamily,fontSize:n.fontSize}),{[s]:Object.assign(Object.assign(Object.assign({},l),a),{[o]:a})}},Ww=(n,e)=>({outline:`${De(n.lineWidthFocus)} solid ${n.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),Gm=(n,e)=>({"&:focus-visible":Object.assign({},Ww(n,e))}),pU=n=>({[`.${n}`]:Object.assign(Object.assign({},Rx()),{[`.${n} .${n}-icon`]:{display:"block"}})}),mU=n=>Object.assign(Object.assign({color:n.colorLink,textDecoration:n.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${n.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},Gm(n)),{"&:focus, &:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive}}),{genStyleHooks:si,genComponentStyleHook:dj,genSubStyleComponent:bT}=ij({usePrefix:()=>{const{getPrefixCls:n,iconPrefixCls:e}=_.useContext($t);return{rootPrefixCls:n(),iconPrefixCls:e}},useToken:()=>{const[n,e,r,i,o]=eo();return{theme:n,realToken:e,hashId:r,token:i,cssVar:o}},useCSP:()=>{const{csp:n}=_.useContext($t);return n??{}},getResetStyles:(n,e)=>{var r;return[{"&":cj(n)},pU((r=e==null?void 0:e.prefix.iconPrefixCls)!==null&&r!==void 0?r:Mx)]},getCommonStyle:uj,getCompUnitless:()=>dU});function fj(n,e){return lf.reduce((r,i)=>{const o=n[`${i}1`],s=n[`${i}3`],a=n[`${i}6`],l=n[`${i}7`];return Object.assign(Object.assign({},r),e(i,{lightColor:o,lightBorderColor:s,darkColor:a,textColor:l}))},{})}const hj=(n,e)=>{const[r,i]=eo();return Pw({token:i,hashId:"",path:["ant-design-icons",n],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[pU(n)])},pj=Object.assign({},Xy),{useId:_2}=pj,mj=()=>"",gj=typeof _2>"u"?mj:_2;function vj(n,e,r){var i;xT();const o=n||{},s=o.inherit===!1||!e?Object.assign(Object.assign({},Gw),{hashed:(i=e==null?void 0:e.hashed)!==null&&i!==void 0?i:Gw.hashed,cssVar:e==null?void 0:e.cssVar}):e,a=gj();return _x(()=>{var l,c;if(!n)return e;const u=Object.assign({},s.components);Object.keys(n.components||{}).forEach(h=>{u[h]=Object.assign(Object.assign({},u[h]),n.components[h])});const d=`css-var-${a.replace(/:/g,"")}`,f=((l=o.cssVar)!==null&&l!==void 0?l:s.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof s.cssVar=="object"?s.cssVar:{}),typeof o.cssVar=="object"?o.cssVar:{}),{key:typeof o.cssVar=="object"&&((c=o.cssVar)===null||c===void 0?void 0:c.key)||d});return Object.assign(Object.assign(Object.assign({},s),o),{token:Object.assign(Object.assign({},s.token),o.token),components:u,cssVar:f})},[o,s],(l,c)=>l.some((u,d)=>{const f=c[d];return!Ew(u,f,!0)}))}var yj=["children"],gU=_.createContext({});function xj(n){var e=n.children,r=Cn(n,yj);return _.createElement(gU.Provider,{value:r},e)}var _j=function(n){sc(r,n);var e=ac(r);function r(){return Gr(this,r),e.apply(this,arguments)}return Hr(r,[{key:"render",value:function(){return this.props.children}}]),r}(_.Component);function bj(n){var e=_.useReducer(function(l){return l+1},0),r=Ce(e,2),i=r[1],o=_.useRef(n),s=br(function(){return o.current}),a=br(function(l){o.current=typeof l=="function"?l(o.current):l,i()});return[s,a]}var _l="none",kg="appear",Vg="enter",Gg="leave",b2="none",as="prepare",Sd="start",wd="active",ST="end",vU="prepared";function S2(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit".concat(n)]="webkit".concat(e),r["Moz".concat(n)]="moz".concat(e),r["ms".concat(n)]="MS".concat(e),r["O".concat(n)]="o".concat(e.toLowerCase()),r}function Sj(n,e){var r={animationend:S2("Animation","AnimationEnd"),transitionend:S2("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete r.animationend.animation,"TransitionEvent"in e||delete r.transitionend.transition),r}var wj=Sj(mi(),typeof window<"u"?window:{}),yU={};if(mi()){var Cj=document.createElement("div");yU=Cj.style}var Hg={};function xU(n){if(Hg[n])return Hg[n];var e=wj[n];if(e)for(var r=Object.keys(e),i=r.length,o=0;o<i;o+=1){var s=r[o];if(Object.prototype.hasOwnProperty.call(e,s)&&s in yU)return Hg[n]=e[s],Hg[n]}return""}var _U=xU("animationend"),bU=xU("transitionend"),SU=!!(_U&&bU),w2=_U||"animationend",C2=bU||"transitionend";function E2(n,e){if(!n)return null;if(Mt(n)==="object"){var r=e.replace(/-\w/g,function(i){return i[1].toUpperCase()});return n[r]}return"".concat(n,"-").concat(e)}const Ej=function(n){var e=_.useRef();function r(o){o&&(o.removeEventListener(C2,n),o.removeEventListener(w2,n))}function i(o){e.current&&e.current!==o&&r(e.current),o&&o!==e.current&&(o.addEventListener(C2,n),o.addEventListener(w2,n),e.current=o)}return _.useEffect(function(){return function(){r(e.current)}},[]),[i,r]};var wU=mi()?_.useLayoutEffect:_.useEffect;const Tj=function(){var n=_.useRef(null);function e(){pr.cancel(n.current)}function r(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=pr(function(){o<=1?i({isCanceled:function(){return s!==n.current}}):r(i,o-1)});n.current=s}return _.useEffect(function(){return function(){e()}},[]),[r,e]};var Mj=[as,Sd,wd,ST],Rj=[as,vU],CU=!1,Aj=!0;function EU(n){return n===wd||n===ST}const Nj=function(n,e,r){var i=af(b2),o=Ce(i,2),s=o[0],a=o[1],l=Tj(),c=Ce(l,2),u=c[0],d=c[1];function f(){a(as,!0)}var h=e?Rj:Mj;return wU(function(){if(s!==b2&&s!==ST){var p=h.indexOf(s),g=h[p+1],y=r(s);y===CU?a(g,!0):g&&u(function(v){function m(){v.isCanceled()||a(g,!0)}y===!0?m():Promise.resolve(y).then(m)})}},[n,s]),_.useEffect(function(){return function(){d()}},[]),[f,s]};function Pj(n,e,r,i){var o=i.motionEnter,s=o===void 0?!0:o,a=i.motionAppear,l=a===void 0?!0:a,c=i.motionLeave,u=c===void 0?!0:c,d=i.motionDeadline,f=i.motionLeaveImmediately,h=i.onAppearPrepare,p=i.onEnterPrepare,g=i.onLeavePrepare,y=i.onAppearStart,v=i.onEnterStart,m=i.onLeaveStart,x=i.onAppearActive,b=i.onEnterActive,S=i.onLeaveActive,w=i.onAppearEnd,C=i.onEnterEnd,E=i.onLeaveEnd,M=i.onVisibleChanged,T=af(),R=Ce(T,2),P=R[0],D=R[1],L=bj(_l),A=Ce(L,2),I=A[0],N=A[1],F=af(null),O=Ce(F,2),V=O[0],U=O[1],k=I(),W=_.useRef(!1),J=_.useRef(null);function z(){return r()}var j=_.useRef(!1);function X(){N(_l),U(null,!0)}var Q=br(function(H){var B=I();if(B!==_l){var K=z();if(!(H&&!H.deadline&&H.target!==K)){var oe=j.current,pe;B===kg&&oe?pe=w==null?void 0:w(K,H):B===Vg&&oe?pe=C==null?void 0:C(K,H):B===Gg&&oe&&(pe=E==null?void 0:E(K,H)),oe&&pe!==!1&&X()}}}),ne=Ej(Q),ye=Ce(ne,1),me=ye[0],fe=function(B){switch(B){case kg:return ee(ee(ee({},as,h),Sd,y),wd,x);case Vg:return ee(ee(ee({},as,p),Sd,v),wd,b);case Gg:return ee(ee(ee({},as,g),Sd,m),wd,S);default:return{}}},le=_.useMemo(function(){return fe(k)},[k]),ge=Nj(k,!n,function(H){if(H===as){var B=le[as];return B?B(z()):CU}if(be in le){var K;U(((K=le[be])===null||K===void 0?void 0:K.call(le,z(),null))||null)}return be===wd&&k!==_l&&(me(z()),d>0&&(clearTimeout(J.current),J.current=setTimeout(function(){Q({deadline:!0})},d))),be===vU&&X(),Aj}),q=Ce(ge,2),ve=q[0],be=q[1],xe=EU(be);j.current=xe;var we=_.useRef(null);wU(function(){if(!(W.current&&we.current===e)){D(e);var H=W.current;W.current=!0;var B;!H&&e&&l&&(B=kg),H&&e&&s&&(B=Vg),(H&&!e&&u||!H&&f&&!e&&u)&&(B=Gg);var K=fe(B);B&&(n||K[as])?(N(B),ve()):N(_l),we.current=e}},[e]),_.useEffect(function(){(k===kg&&!l||k===Vg&&!s||k===Gg&&!u)&&N(_l)},[l,s,u]),_.useEffect(function(){return function(){W.current=!1,clearTimeout(J.current)}},[]);var qe=_.useRef(!1);_.useEffect(function(){P&&(qe.current=!0),P!==void 0&&k===_l&&((qe.current||P)&&(M==null||M(P)),qe.current=!0)},[P,k]);var Fe=V;return le[as]&&be===Sd&&(Fe=re({transition:"none"},Fe)),[k,be,Fe,P??e]}function Oj(n){var e=n;Mt(n)==="object"&&(e=n.transitionSupport);function r(o,s){return!!(o.motionName&&e&&s!==!1)}var i=_.forwardRef(function(o,s){var a=o.visible,l=a===void 0?!0:a,c=o.removeOnLeave,u=c===void 0?!0:c,d=o.forceRender,f=o.children,h=o.motionName,p=o.leavedClassName,g=o.eventProps,y=_.useContext(gU),v=y.motion,m=r(o,v),x=_.useRef(),b=_.useRef();function S(){try{return x.current instanceof HTMLElement?x.current:pp(b.current)}catch{return null}}var w=Pj(m,l,S,o),C=Ce(w,4),E=C[0],M=C[1],T=C[2],R=C[3],P=_.useRef(R);R&&(P.current=!0);var D=_.useCallback(function(O){x.current=O,cT(s,O)},[s]),L,A=re(re({},g),{},{visible:l});if(!f)L=null;else if(E===_l)R?L=f(re({},A),D):!u&&P.current&&p?L=f(re(re({},A),{},{className:p}),D):d||!u&&!p?L=f(re(re({},A),{},{style:{display:"none"}}),D):L=null;else{var I;M===as?I="prepare":EU(M)?I="active":M===Sd&&(I="start");var N=E2(h,"".concat(E,"-").concat(I));L=f(re(re({},A),{},{className:_e(E2(h,E),ee(ee({},N,N&&I),h,typeof h=="string")),style:T}),D)}if(_.isValidElement(L)&&Vm(L)){var F=bx(L);F||(L=_.cloneElement(L,{ref:D}))}return _.createElement(_j,{ref:b},L)});return i.displayName="CSSMotion",i}const wu=Oj(SU);var qw="add",Xw="keep",Kw="remove",hb="removed";function Ij(n){var e;return n&&Mt(n)==="object"&&"key"in n?e=n:e={key:n},re(re({},e),{},{key:String(e.key)})}function Yw(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(Ij)}function Dj(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],i=0,o=e.length,s=Yw(n),a=Yw(e);s.forEach(function(u){for(var d=!1,f=i;f<o;f+=1){var h=a[f];if(h.key===u.key){i<f&&(r=r.concat(a.slice(i,f).map(function(p){return re(re({},p),{},{status:qw})})),i=f),r.push(re(re({},h),{},{status:Xw})),i+=1,d=!0;break}}d||r.push(re(re({},u),{},{status:Kw}))}),i<o&&(r=r.concat(a.slice(i).map(function(u){return re(re({},u),{},{status:qw})})));var l={};r.forEach(function(u){var d=u.key;l[d]=(l[d]||0)+1});var c=Object.keys(l).filter(function(u){return l[u]>1});return c.forEach(function(u){r=r.filter(function(d){var f=d.key,h=d.status;return f!==u||h!==Kw}),r.forEach(function(d){d.key===u&&(d.status=Xw)})}),r}var Lj=["component","children","onVisibleChanged","onAllRemoved"],Fj=["status"],Uj=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Bj(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wu,r=function(i){sc(s,i);var o=ac(s);function s(){var a;Gr(this,s);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=o.call.apply(o,[this].concat(c)),ee(nn(a),"state",{keyEntities:[]}),ee(nn(a),"removeKey",function(d){a.setState(function(f){var h=f.keyEntities.map(function(p){return p.key!==d?p:re(re({},p),{},{status:hb})});return{keyEntities:h}},function(){var f=a.state.keyEntities,h=f.filter(function(p){var g=p.status;return g!==hb}).length;h===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return Hr(s,[{key:"render",value:function(){var l=this,c=this.state.keyEntities,u=this.props,d=u.component,f=u.children,h=u.onVisibleChanged;u.onAllRemoved;var p=Cn(u,Lj),g=d||_.Fragment,y={};return Uj.forEach(function(v){y[v]=p[v],delete p[v]}),delete p.keys,_.createElement(g,p,c.map(function(v,m){var x=v.status,b=Cn(v,Fj),S=x===qw||x===Xw;return _.createElement(e,ut({},y,{key:b.key,visible:S,eventProps:b,onVisibleChanged:function(C){h==null||h(C,{key:b.key}),C||l.removeKey(b.key)}}),function(w,C){return f(re(re({},w),{},{index:m}),C)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,c){var u=l.keys,d=c.keyEntities,f=Yw(u),h=Dj(d,f);return{keyEntities:h.filter(function(p){var g=d.find(function(y){var v=y.key;return p.key===v});return!(g&&g.status===hb&&p.status===Kw)})}}}]),s}(_.Component);return ee(r,"defaultProps",{component:"div"}),r}const $j=Bj(SU);function zj(n){const{children:e}=n,[,r]=eo(),{motion:i}=r,o=_.useRef(!1);return o.current=o.current||i===!1,o.current?_.createElement(xj,{motion:i},e):e}const kj=()=>null;var Vj=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Gj=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let iy,TU,MU,RU;function p0(){return iy||ry}function Hj(){return TU||Mx}function jj(n){return Object.keys(n).some(e=>e.endsWith("Color"))}const Wj=n=>{const{prefixCls:e,iconPrefixCls:r,theme:i,holderRender:o}=n;e!==void 0&&(iy=e),r!==void 0&&(TU=r),"holderRender"in n&&(RU=o),i&&(jj(i)?H8(p0(),i):MU=i)},AU=()=>({getPrefixCls:(n,e)=>e||(n?`${p0()}-${n}`:p0()),getIconPrefixCls:Hj,getRootPrefixCls:()=>iy||p0(),getTheme:()=>MU,holderRender:RU}),qj=n=>{const{children:e,csp:r,autoInsertSpaceInButton:i,alert:o,anchor:s,form:a,locale:l,componentSize:c,direction:u,space:d,splitter:f,virtual:h,dropdownMatchSelectWidth:p,popupMatchSelectWidth:g,popupOverflow:y,legacyLocale:v,parentContext:m,iconPrefixCls:x,theme:b,componentDisabled:S,segmented:w,statistic:C,spin:E,calendar:M,carousel:T,cascader:R,collapse:P,typography:D,checkbox:L,descriptions:A,divider:I,drawer:N,skeleton:F,steps:O,image:V,layout:U,list:k,mentions:W,modal:J,progress:z,result:j,slider:X,breadcrumb:Q,menu:ne,pagination:ye,input:me,textArea:fe,empty:le,badge:ge,radio:q,rate:ve,switch:be,transfer:xe,avatar:we,message:qe,tag:Fe,table:H,card:B,tabs:K,timeline:oe,timePicker:pe,upload:ce,notification:Ue,tree:Re,colorPicker:Le,datePicker:Je,rangePicker:Me,flex:ze,wave:Ee,dropdown:Pe,warning:ke,tour:Ve,tooltip:$e,popover:xt,popconfirm:te,floatButtonGroup:Qe,variant:Se,inputNumber:Oe,treeSelect:Ze}=n,We=_.useCallback((ft,bt)=>{const{prefixCls:It}=n;if(bt)return bt;const yn=It||m.getPrefixCls("");return ft?`${yn}-${ft}`:yn},[m.getPrefixCls,n.prefixCls]),wt=x||m.iconPrefixCls||Mx,Rt=r||m.csp;hj(wt,Rt);const dt=vj(b,m.theme,{prefixCls:We("")}),Xe={csp:Rt,autoInsertSpaceInButton:i,alert:o,anchor:s,locale:l||v,direction:u,space:d,splitter:f,virtual:h,popupMatchSelectWidth:g??p,popupOverflow:y,getPrefixCls:We,iconPrefixCls:wt,theme:dt,segmented:w,statistic:C,spin:E,calendar:M,carousel:T,cascader:R,collapse:P,typography:D,checkbox:L,descriptions:A,divider:I,drawer:N,skeleton:F,steps:O,image:V,input:me,textArea:fe,layout:U,list:k,mentions:W,modal:J,progress:z,result:j,slider:X,breadcrumb:Q,menu:ne,pagination:ye,empty:le,badge:ge,radio:q,rate:ve,switch:be,transfer:xe,avatar:we,message:qe,tag:Fe,table:H,card:B,tabs:K,timeline:oe,timePicker:pe,upload:ce,notification:Ue,tree:Re,colorPicker:Le,datePicker:Je,rangePicker:Me,flex:ze,wave:Ee,dropdown:Pe,warning:ke,tour:Ve,tooltip:$e,popover:xt,popconfirm:te,floatButtonGroup:Qe,variant:Se,inputNumber:Oe,treeSelect:Ze},rt=Object.assign({},m);Object.keys(Xe).forEach(ft=>{Xe[ft]!==void 0&&(rt[ft]=Xe[ft])}),Gj.forEach(ft=>{const bt=n[ft];bt&&(rt[ft]=bt)}),typeof i<"u"&&(rt.button=Object.assign({autoInsertSpace:i},rt.button));const Lt=_x(()=>rt,rt,(ft,bt)=>{const It=Object.keys(ft),yn=Object.keys(bt);return It.length!==yn.length||It.some(un=>ft[un]!==bt[un])}),bn=_.useMemo(()=>({prefixCls:wt,csp:Rt}),[wt,Rt]);let Ke=_.createElement(_.Fragment,null,_.createElement(kj,{dropdownMatchSelectWidth:p}),e);const ot=_.useMemo(()=>{var ft,bt,It,yn;return bd(((ft=lu.Form)===null||ft===void 0?void 0:ft.defaultValidateMessages)||{},((It=(bt=Lt.locale)===null||bt===void 0?void 0:bt.Form)===null||It===void 0?void 0:It.defaultValidateMessages)||{},((yn=Lt.form)===null||yn===void 0?void 0:yn.validateMessages)||{},(a==null?void 0:a.validateMessages)||{})},[Lt,a==null?void 0:a.validateMessages]);Object.keys(ot).length>0&&(Ke=_.createElement(_8.Provider,{value:ot},Ke)),l&&(Ke=_.createElement(E8,{locale:l,_ANT_MARK__:C8},Ke)),(wt||Rt)&&(Ke=_.createElement(yT.Provider,{value:bn},Ke)),c&&(Ke=_.createElement(j8,{size:c},Ke)),Ke=_.createElement(zj,null,Ke);const yt=_.useMemo(()=>{const ft=dt||{},{algorithm:bt,token:It,components:yn,cssVar:un}=ft,Bn=Vj(ft,["algorithm","token","components","cssVar"]),en=bt&&(!Array.isArray(bt)||bt.length>0)?Mw(bt):iU,En={};Object.entries(yn||{}).forEach(Vn=>{let[Ar,vt]=Vn;const $=Object.assign({},vt);"algorithm"in $&&($.algorithm===!0?$.theme=en:(Array.isArray($.algorithm)||typeof $.algorithm=="function")&&($.theme=Mw($.algorithm)),delete $.algorithm),En[Ar]=$});const ar=Object.assign(Object.assign({},Zp),It);return Object.assign(Object.assign({},Bn),{theme:en,token:ar,components:En,override:Object.assign({override:ar},En),cssVar:un})},[dt]);return b&&(Ke=_.createElement(oU.Provider,{value:yt},Ke)),Lt.warning&&(Ke=_.createElement(x8.Provider,{value:Lt.warning},Ke)),S!==void 0&&(Ke=_.createElement(sU,{disabled:S},Ke)),_.createElement($t.Provider,{value:Lt},Ke)},Ja=n=>{const e=_.useContext($t),r=_.useContext(_T);return _.createElement(qj,Object.assign({parentContext:e,legacyLocale:r},n))};Ja.ConfigContext=$t;Ja.SizeContext=sf;Ja.config=Wj;Ja.useConfig=W8;Object.defineProperty(Ja,"SizeContext",{get:()=>sf});var Xj={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function NU(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}function Kj(n){return NU(n)instanceof ShadowRoot}function oy(n){return Kj(n)?NU(n):null}function Yj(n){return n.replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function Qj(n,e){Yi(n,"[@ant-design/icons] ".concat(e))}function T2(n){return Mt(n)==="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(Mt(n.icon)==="object"||typeof n.icon=="function")}function M2(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).reduce(function(e,r){var i=n[r];switch(r){case"class":e.className=i,delete e.class;break;default:delete e[r],e[Yj(r)]=i}return e},{})}function Qw(n,e,r){return r?se.createElement(n.tag,re(re({key:e},M2(n.attrs)),r),(n.children||[]).map(function(i,o){return Qw(i,"".concat(e,"-").concat(n.tag,"-").concat(o))})):se.createElement(n.tag,re({key:e},M2(n.attrs)),(n.children||[]).map(function(i,o){return Qw(i,"".concat(e,"-").concat(n.tag,"-").concat(o))}))}function PU(n){return Qp(n)[0]}function OU(n){return n?Array.isArray(n)?n:[n]:[]}var Zj=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Jj=function(e){var r=_.useContext(yT),i=r.csp,o=r.prefixCls,s=Zj;o&&(s=s.replace(/anticon/g,o)),_.useEffect(function(){var a=e.current,l=oy(a);Ia(s,"@ant-design-icons",{prepend:!0,csp:i,attachTo:l})},[])},eW=["icon","className","onClick","style","primaryColor","secondaryColor"],gp={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function tW(n){var e=n.primaryColor,r=n.secondaryColor;gp.primaryColor=e,gp.secondaryColor=r||PU(e),gp.calculated=!!r}function nW(){return re({},gp)}var Vf=function(e){var r=e.icon,i=e.className,o=e.onClick,s=e.style,a=e.primaryColor,l=e.secondaryColor,c=Cn(e,eW),u=_.useRef(),d=gp;if(a&&(d={primaryColor:a,secondaryColor:l||PU(a)}),Jj(u),Qj(T2(r),"icon should be icon definiton, but got ".concat(r)),!T2(r))return null;var f=r;return f&&typeof f.icon=="function"&&(f=re(re({},f),{},{icon:f.icon(d.primaryColor,d.secondaryColor)})),Qw(f.icon,"svg-".concat(f.name),re(re({className:i,onClick:o,style:s,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c),{},{ref:u}))};Vf.displayName="IconReact";Vf.getTwoToneColors=nW;Vf.setTwoToneColors=tW;function IU(n){var e=OU(n),r=Ce(e,2),i=r[0],o=r[1];return Vf.setTwoToneColors({primaryColor:i,secondaryColor:o})}function rW(){var n=Vf.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var iW=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];IU(ny.primary);var gr=_.forwardRef(function(n,e){var r=n.className,i=n.icon,o=n.spin,s=n.rotate,a=n.tabIndex,l=n.onClick,c=n.twoToneColor,u=Cn(n,iW),d=_.useContext(yT),f=d.prefixCls,h=f===void 0?"anticon":f,p=d.rootClassName,g=_e(p,h,ee(ee({},"".concat(h,"-").concat(i.name),!!i.name),"".concat(h,"-spin"),!!o||i.name==="loading"),r),y=a;y===void 0&&l&&(y=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,m=OU(c),x=Ce(m,2),b=x[0],S=x[1];return _.createElement("span",ut({role:"img","aria-label":i.name},u,{ref:e,tabIndex:y,onClick:l,className:g}),_.createElement(Vf,{icon:i,primaryColor:b,secondaryColor:S,style:v}))});gr.displayName="AntdIcon";gr.getTwoToneColor=rW;gr.setTwoToneColor=IU;var oW=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:Xj}))},DU=_.forwardRef(oW),sW={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},aW=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:sW}))},Ax=_.forwardRef(aW),lW={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},cW=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:lW}))},Hm=_.forwardRef(cW),uW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},dW=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:uW}))},LU=_.forwardRef(dW),fW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},hW=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:fW}))},FU=_.forwardRef(hW),pW=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,mW=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,gW="".concat(pW," ").concat(mW).split(/[\s\n]+/),vW="aria-",yW="data-";function R2(n,e){return n.indexOf(e)===0}function qs(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;e===!1?r={aria:!0,data:!0,attr:!0}:e===!0?r={aria:!0}:r=re({},e);var i={};return Object.keys(n).forEach(function(o){(r.aria&&(o==="role"||R2(o,vW))||r.data&&R2(o,yW)||r.attr&&gW.includes(o))&&(i[o]=n[o])}),i}function UU(n){return n&&se.isValidElement(n)&&n.type===se.Fragment}const xW=(n,e,r)=>se.isValidElement(n)?se.cloneElement(n,typeof r=="function"?r(n.props||{}):r):e;function Zl(n,e){return xW(n,n,e)}const cc=n=>{const[,,,,e]=eo();return e?`${n}-css-var`:""};var He={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var r=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||r>=He.F1&&r<=He.F12)return!1;switch(r){case He.ALT:case He.CAPS_LOCK:case He.CONTEXT_MENU:case He.CTRL:case He.DOWN:case He.END:case He.ESC:case He.HOME:case He.INSERT:case He.LEFT:case He.MAC_FF_META:case He.META:case He.NUMLOCK:case He.NUM_CENTER:case He.PAGE_DOWN:case He.PAGE_UP:case He.PAUSE:case He.PRINT_SCREEN:case He.RIGHT:case He.SHIFT:case He.UP:case He.WIN_KEY:case He.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=He.ZERO&&e<=He.NINE||e>=He.NUM_ZERO&&e<=He.NUM_MULTIPLY||e>=He.A&&e<=He.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case He.SPACE:case He.QUESTION_MARK:case He.NUM_PLUS:case He.NUM_MINUS:case He.NUM_PERIOD:case He.NUM_DIVISION:case He.SEMICOLON:case He.DASH:case He.EQUALS:case He.COMMA:case He.PERIOD:case He.SLASH:case He.APOSTROPHE:case He.SINGLE_QUOTE:case He.OPEN_SQUARE_BRACKET:case He.BACKSLASH:case He.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},BU=_.forwardRef(function(n,e){var r=n.prefixCls,i=n.style,o=n.className,s=n.duration,a=s===void 0?4.5:s,l=n.showProgress,c=n.pauseOnHover,u=c===void 0?!0:c,d=n.eventKey,f=n.content,h=n.closable,p=n.closeIcon,g=p===void 0?"x":p,y=n.props,v=n.onClick,m=n.onNoticeClose,x=n.times,b=n.hovering,S=_.useState(!1),w=Ce(S,2),C=w[0],E=w[1],M=_.useState(0),T=Ce(M,2),R=T[0],P=T[1],D=_.useState(0),L=Ce(D,2),A=L[0],I=L[1],N=b||C,F=a>0&&l,O=function(){m(d)},V=function(j){(j.key==="Enter"||j.code==="Enter"||j.keyCode===He.ENTER)&&O()};_.useEffect(function(){if(!N&&a>0){var z=Date.now()-A,j=setTimeout(function(){O()},a*1e3-A);return function(){u&&clearTimeout(j),I(Date.now()-z)}}},[a,N,x]),_.useEffect(function(){if(!N&&F&&(u||A===0)){var z=performance.now(),j,X=function Q(){cancelAnimationFrame(j),j=requestAnimationFrame(function(ne){var ye=ne+A-z,me=Math.min(ye/(a*1e3),1);P(me*100),me<1&&Q()})};return X(),function(){u&&cancelAnimationFrame(j)}}},[a,A,N,F,x]);var U=_.useMemo(function(){return Mt(h)==="object"&&h!==null?h:h?{closeIcon:g}:{}},[h,g]),k=qs(U,!0),W=100-(!R||R<0?0:R>100?100:R),J="".concat(r,"-notice");return _.createElement("div",ut({},y,{ref:e,className:_e(J,o,ee({},"".concat(J,"-closable"),h)),style:i,onMouseEnter:function(j){var X;E(!0),y==null||(X=y.onMouseEnter)===null||X===void 0||X.call(y,j)},onMouseLeave:function(j){var X;E(!1),y==null||(X=y.onMouseLeave)===null||X===void 0||X.call(y,j)},onClick:v}),_.createElement("div",{className:"".concat(J,"-content")},f),h&&_.createElement("a",ut({tabIndex:0,className:"".concat(J,"-close"),onKeyDown:V,"aria-label":"Close"},k,{onClick:function(j){j.preventDefault(),j.stopPropagation(),O()}}),U.closeIcon),F&&_.createElement("progress",{className:"".concat(J,"-progress"),max:"100",value:W},W+"%"))}),$U=se.createContext({}),_W=function(e){var r=e.children,i=e.classNames;return se.createElement($U.Provider,{value:{classNames:i}},r)},A2=8,N2=3,P2=16,bW=function(e){var r={offset:A2,threshold:N2,gap:P2};if(e&&Mt(e)==="object"){var i,o,s;r.offset=(i=e.offset)!==null&&i!==void 0?i:A2,r.threshold=(o=e.threshold)!==null&&o!==void 0?o:N2,r.gap=(s=e.gap)!==null&&s!==void 0?s:P2}return[!!e,r]},SW=["className","style","classNames","styles"],wW=function(e){var r=e.configList,i=e.placement,o=e.prefixCls,s=e.className,a=e.style,l=e.motion,c=e.onAllNoticeRemoved,u=e.onNoticeClose,d=e.stack,f=_.useContext($U),h=f.classNames,p=_.useRef({}),g=_.useState(null),y=Ce(g,2),v=y[0],m=y[1],x=_.useState([]),b=Ce(x,2),S=b[0],w=b[1],C=r.map(function(N){return{config:N,key:String(N.key)}}),E=bW(d),M=Ce(E,2),T=M[0],R=M[1],P=R.offset,D=R.threshold,L=R.gap,A=T&&(S.length>0||C.length<=D),I=typeof l=="function"?l(i):l;return _.useEffect(function(){T&&S.length>1&&w(function(N){return N.filter(function(F){return C.some(function(O){var V=O.key;return F===V})})})},[S,C,T]),_.useEffect(function(){var N;if(T&&p.current[(N=C[C.length-1])===null||N===void 0?void 0:N.key]){var F;m(p.current[(F=C[C.length-1])===null||F===void 0?void 0:F.key])}},[C,T]),se.createElement($j,ut({key:i,className:_e(o,"".concat(o,"-").concat(i),h==null?void 0:h.list,s,ee(ee({},"".concat(o,"-stack"),!!T),"".concat(o,"-stack-expanded"),A)),style:a,keys:C,motionAppear:!0},I,{onAllRemoved:function(){c(i)}}),function(N,F){var O=N.config,V=N.className,U=N.style,k=N.index,W=O,J=W.key,z=W.times,j=String(J),X=O,Q=X.className,ne=X.style,ye=X.classNames,me=X.styles,fe=Cn(X,SW),le=C.findIndex(function(oe){return oe.key===j}),ge={};if(T){var q=C.length-1-(le>-1?le:k-1),ve=i==="top"||i==="bottom"?"-50%":"0";if(q>0){var be,xe,we;ge.height=A?(be=p.current[j])===null||be===void 0?void 0:be.offsetHeight:v==null?void 0:v.offsetHeight;for(var qe=0,Fe=0;Fe<q;Fe++){var H;qe+=((H=p.current[C[C.length-1-Fe].key])===null||H===void 0?void 0:H.offsetHeight)+L}var B=(A?qe:q*P)*(i.startsWith("top")?1:-1),K=!A&&v!==null&&v!==void 0&&v.offsetWidth&&(xe=p.current[j])!==null&&xe!==void 0&&xe.offsetWidth?((v==null?void 0:v.offsetWidth)-P*2*(q<3?q:3))/((we=p.current[j])===null||we===void 0?void 0:we.offsetWidth):1;ge.transform="translate3d(".concat(ve,", ").concat(B,"px, 0) scaleX(").concat(K,")")}else ge.transform="translate3d(".concat(ve,", 0, 0)")}return se.createElement("div",{ref:F,className:_e("".concat(o,"-notice-wrapper"),V,ye==null?void 0:ye.wrapper),style:re(re(re({},U),ge),me==null?void 0:me.wrapper),onMouseEnter:function(){return w(function(pe){return pe.includes(j)?pe:[].concat(st(pe),[j])})},onMouseLeave:function(){return w(function(pe){return pe.filter(function(ce){return ce!==j})})}},se.createElement(BU,ut({},fe,{ref:function(pe){le>-1?p.current[j]=pe:delete p.current[j]},prefixCls:o,classNames:ye,styles:me,className:_e(Q,h==null?void 0:h.notice),style:ne,times:z,key:J,eventKey:J,onNoticeClose:u,hovering:T&&S.length>0})))})},CW=_.forwardRef(function(n,e){var r=n.prefixCls,i=r===void 0?"rc-notification":r,o=n.container,s=n.motion,a=n.maxCount,l=n.className,c=n.style,u=n.onAllRemoved,d=n.stack,f=n.renderNotifications,h=_.useState([]),p=Ce(h,2),g=p[0],y=p[1],v=function(T){var R,P=g.find(function(D){return D.key===T});P==null||(R=P.onClose)===null||R===void 0||R.call(P),y(function(D){return D.filter(function(L){return L.key!==T})})};_.useImperativeHandle(e,function(){return{open:function(T){y(function(R){var P=st(R),D=P.findIndex(function(I){return I.key===T.key}),L=re({},T);if(D>=0){var A;L.times=(((A=R[D])===null||A===void 0?void 0:A.times)||0)+1,P[D]=L}else L.times=0,P.push(L);return a>0&&P.length>a&&(P=P.slice(-a)),P})},close:function(T){v(T)},destroy:function(){y([])}}});var m=_.useState({}),x=Ce(m,2),b=x[0],S=x[1];_.useEffect(function(){var M={};g.forEach(function(T){var R=T.placement,P=R===void 0?"topRight":R;P&&(M[P]=M[P]||[],M[P].push(T))}),Object.keys(b).forEach(function(T){M[T]=M[T]||[]}),S(M)},[g]);var w=function(T){S(function(R){var P=re({},R),D=P[T]||[];return D.length||delete P[T],P})},C=_.useRef(!1);if(_.useEffect(function(){Object.keys(b).length>0?C.current=!0:C.current&&(u==null||u(),C.current=!1)},[b]),!o)return null;var E=Object.keys(b);return Ql.createPortal(_.createElement(_.Fragment,null,E.map(function(M){var T=b[M],R=_.createElement(wW,{key:M,configList:T,placement:M,prefixCls:i,className:l==null?void 0:l(M),style:c==null?void 0:c(M),motion:s,onNoticeClose:v,onAllNoticeRemoved:w,stack:d});return f?f(R,{prefixCls:i,key:M}):R})),o)}),EW=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],TW=function(){return document.body},O2=0;function MW(){for(var n={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(function(o){o&&Object.keys(o).forEach(function(s){var a=o[s];a!==void 0&&(n[s]=a)})}),n}function RW(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.getContainer,r=e===void 0?TW:e,i=n.motion,o=n.prefixCls,s=n.maxCount,a=n.className,l=n.style,c=n.onAllRemoved,u=n.stack,d=n.renderNotifications,f=Cn(n,EW),h=_.useState(),p=Ce(h,2),g=p[0],y=p[1],v=_.useRef(),m=_.createElement(CW,{container:g,ref:v,prefixCls:o,motion:i,maxCount:s,className:a,style:l,onAllRemoved:c,stack:u,renderNotifications:d}),x=_.useState([]),b=Ce(x,2),S=b[0],w=b[1],C=_.useMemo(function(){return{open:function(M){var T=MW(f,M);(T.key===null||T.key===void 0)&&(T.key="rc-notification-".concat(O2),O2+=1),w(function(R){return[].concat(st(R),[{type:"open",config:T}])})},close:function(M){w(function(T){return[].concat(st(T),[{type:"close",key:M}])})},destroy:function(){w(function(M){return[].concat(st(M),[{type:"destroy"}])})}}},[]);return _.useEffect(function(){y(r())}),_.useEffect(function(){v.current&&S.length&&(S.forEach(function(E){switch(E.type){case"open":v.current.open(E.config);break;case"close":v.current.close(E.key);break;case"destroy":v.current.destroy();break}}),w(function(E){return E.filter(function(M){return!S.includes(M)})}))},[S]),[C,m]}var AW={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},NW=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:AW}))},jm=_.forwardRef(NW);const wT=se.createContext(void 0),bl=100,PW=10,zU=bl*PW,kU={Modal:bl,Drawer:bl,Popover:bl,Popconfirm:bl,Tooltip:bl,Tour:bl,FloatButton:bl},OW={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function IW(n){return n in kU}const CT=(n,e)=>{const[,r]=eo(),i=se.useContext(wT),o=IW(n);let s;if(e!==void 0)s=[e,e];else{let a=i??0;o?a+=(i?0:r.zIndexPopupBase)+kU[n]:a+=OW[n],s=[i===void 0?e:a,a]}return s},DW=n=>{const{componentCls:e,iconCls:r,boxShadow:i,colorText:o,colorSuccess:s,colorError:a,colorWarning:l,colorInfo:c,fontSizeLG:u,motionEaseInOutCirc:d,motionDurationSlow:f,marginXS:h,paddingXS:p,borderRadiusLG:g,zIndexPopup:y,contentPadding:v,contentBg:m}=n,x=`${e}-notice`,b=new hn("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:p,transform:"translateY(0)",opacity:1}}),S=new hn("MessageMoveOut",{"0%":{maxHeight:n.height,padding:p,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),w={padding:p,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${r}`]:{marginInlineEnd:h,fontSize:u},[`${x}-content`]:{display:"inline-block",padding:v,background:m,borderRadius:g,boxShadow:i,pointerEvents:"all"},[`${e}-success > ${r}`]:{color:s},[`${e}-error > ${r}`]:{color:a},[`${e}-warning > ${r}`]:{color:l},[`${e}-info > ${r},
      ${e}-loading > ${r}`]:{color:c}};return[{[e]:Object.assign(Object.assign({},Yo(n)),{color:o,position:"fixed",top:h,width:"100%",pointerEvents:"none",zIndex:y,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:b,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:S,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[`${x}-wrapper`]:Object.assign({},w)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},w),{padding:0,textAlign:"start"})}]},LW=n=>({zIndexPopup:n.zIndexPopupBase+zU+10,contentBg:n.colorBgElevated,contentPadding:`${(n.controlHeightLG-n.fontSize*n.lineHeight)/2}px ${n.paddingSM}px`}),VU=si("Message",n=>{const e=Un(n,{height:150});return[DW(e)]},LW);var FW=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const UW={info:_.createElement(FU,null),success:_.createElement(DU,null),error:_.createElement(Ax,null),warning:_.createElement(LU,null),loading:_.createElement(jm,null)},GU=n=>{let{prefixCls:e,type:r,icon:i,children:o}=n;return _.createElement("div",{className:_e(`${e}-custom-content`,`${e}-${r}`)},i||UW[r],_.createElement("span",null,o))},BW=n=>{const{prefixCls:e,className:r,type:i,icon:o,content:s}=n,a=FW(n,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=_.useContext($t),c=e||l("message"),u=cc(c),[d,f,h]=VU(c,u);return d(_.createElement(BU,Object.assign({},a,{prefixCls:c,className:_e(r,f,`${c}-notice-pure-panel`,h,u),eventKey:"pure",duration:null,content:_.createElement(GU,{prefixCls:c,type:i,icon:o},s)})))};function $W(n,e){return{motionName:e??`${n}-move-up`}}function ET(n){let e;const r=new Promise(o=>{e=n(()=>{o(!0)})}),i=()=>{e==null||e()};return i.then=(o,s)=>r.then(o,s),i.promise=r,i}var zW=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const kW=8,VW=3,GW=n=>{let{children:e,prefixCls:r}=n;const i=cc(r),[o,s,a]=VU(r,i);return o(_.createElement(_W,{classNames:{list:_e(s,a,i)}},e))},HW=(n,e)=>{let{prefixCls:r,key:i}=e;return _.createElement(GW,{prefixCls:r,key:i},n)},jW=_.forwardRef((n,e)=>{const{top:r,prefixCls:i,getContainer:o,maxCount:s,duration:a=VW,rtl:l,transitionName:c,onAllRemoved:u}=n,{getPrefixCls:d,getPopupContainer:f,message:h,direction:p}=_.useContext($t),g=i||d("message"),y=()=>({left:"50%",transform:"translateX(-50%)",top:r??kW}),v=()=>_e({[`${g}-rtl`]:l??p==="rtl"}),m=()=>$W(g,c),x=_.createElement("span",{className:`${g}-close-x`},_.createElement(Hm,{className:`${g}-close-icon`})),[b,S]=RW({prefixCls:g,style:y,className:v,motion:m,closable:!1,closeIcon:x,duration:a,getContainer:()=>(o==null?void 0:o())||(f==null?void 0:f())||document.body,maxCount:s,onAllRemoved:u,renderNotifications:HW});return _.useImperativeHandle(e,()=>Object.assign(Object.assign({},b),{prefixCls:g,message:h})),S});let I2=0;function HU(n){const e=_.useRef(null);return xT(),[_.useMemo(()=>{const i=c=>{var u;(u=e.current)===null||u===void 0||u.close(c)},o=c=>{if(!e.current){const C=()=>{};return C.then=()=>{},C}const{open:u,prefixCls:d,message:f}=e.current,h=`${d}-notice`,{content:p,icon:g,type:y,key:v,className:m,style:x,onClose:b}=c,S=zW(c,["content","icon","type","key","className","style","onClose"]);let w=v;return w==null&&(I2+=1,w=`antd-message-${I2}`),ET(C=>(u(Object.assign(Object.assign({},S),{key:w,content:_.createElement(GU,{prefixCls:d,type:y,icon:g},p),placement:"top",className:_e(y&&`${h}-${y}`,m,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),x),onClose:()=>{b==null||b(),C()}})),()=>{i(w)}))},a={open:o,destroy:c=>{var u;c!==void 0?i(c):(u=e.current)===null||u===void 0||u.destroy()}};return["info","success","warning","error","loading"].forEach(c=>{const u=(d,f,h)=>{let p;d&&typeof d=="object"&&"content"in d?p=d:p={content:d};let g,y;typeof f=="function"?y=f:(g=f,y=h);const v=Object.assign(Object.assign({onClose:y,duration:g},p),{type:c});return o(v)};a[c]=u}),a},[]),_.createElement(jW,Object.assign({key:"message-holder"},n,{ref:e}))]}function WW(n){return HU(n)}function qW(){const[n,e]=_.useState([]),r=_.useCallback(i=>(e(o=>[].concat(st(o),[i])),()=>{e(o=>o.filter(s=>s!==i))}),[]);return[n,r]}function Ai(){Ai=function(){return e};var n,e={},r=Object.prototype,i=r.hasOwnProperty,o=Object.defineProperty||function(N,F,O){N[F]=O.value},s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(N,F,O){return Object.defineProperty(N,F,{value:O,enumerable:!0,configurable:!0,writable:!0}),N[F]}try{u({},"")}catch{u=function(O,V,U){return O[V]=U}}function d(N,F,O,V){var U=F&&F.prototype instanceof m?F:m,k=Object.create(U.prototype),W=new A(V||[]);return o(k,"_invoke",{value:R(N,O,W)}),k}function f(N,F,O){try{return{type:"normal",arg:N.call(F,O)}}catch(V){return{type:"throw",arg:V}}}e.wrap=d;var h="suspendedStart",p="suspendedYield",g="executing",y="completed",v={};function m(){}function x(){}function b(){}var S={};u(S,a,function(){return this});var w=Object.getPrototypeOf,C=w&&w(w(I([])));C&&C!==r&&i.call(C,a)&&(S=C);var E=b.prototype=m.prototype=Object.create(S);function M(N){["next","throw","return"].forEach(function(F){u(N,F,function(O){return this._invoke(F,O)})})}function T(N,F){function O(U,k,W,J){var z=f(N[U],N,k);if(z.type!=="throw"){var j=z.arg,X=j.value;return X&&Mt(X)=="object"&&i.call(X,"__await")?F.resolve(X.__await).then(function(Q){O("next",Q,W,J)},function(Q){O("throw",Q,W,J)}):F.resolve(X).then(function(Q){j.value=Q,W(j)},function(Q){return O("throw",Q,W,J)})}J(z.arg)}var V;o(this,"_invoke",{value:function(k,W){function J(){return new F(function(z,j){O(k,W,z,j)})}return V=V?V.then(J,J):J()}})}function R(N,F,O){var V=h;return function(U,k){if(V===g)throw Error("Generator is already running");if(V===y){if(U==="throw")throw k;return{value:n,done:!0}}for(O.method=U,O.arg=k;;){var W=O.delegate;if(W){var J=P(W,O);if(J){if(J===v)continue;return J}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(V===h)throw V=y,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);V=g;var z=f(N,F,O);if(z.type==="normal"){if(V=O.done?y:p,z.arg===v)continue;return{value:z.arg,done:O.done}}z.type==="throw"&&(V=y,O.method="throw",O.arg=z.arg)}}}function P(N,F){var O=F.method,V=N.iterator[O];if(V===n)return F.delegate=null,O==="throw"&&N.iterator.return&&(F.method="return",F.arg=n,P(N,F),F.method==="throw")||O!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+O+"' method")),v;var U=f(V,N.iterator,F.arg);if(U.type==="throw")return F.method="throw",F.arg=U.arg,F.delegate=null,v;var k=U.arg;return k?k.done?(F[N.resultName]=k.value,F.next=N.nextLoc,F.method!=="return"&&(F.method="next",F.arg=n),F.delegate=null,v):k:(F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,v)}function D(N){var F={tryLoc:N[0]};1 in N&&(F.catchLoc=N[1]),2 in N&&(F.finallyLoc=N[2],F.afterLoc=N[3]),this.tryEntries.push(F)}function L(N){var F=N.completion||{};F.type="normal",delete F.arg,N.completion=F}function A(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(D,this),this.reset(!0)}function I(N){if(N||N===""){var F=N[a];if(F)return F.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var O=-1,V=function U(){for(;++O<N.length;)if(i.call(N,O))return U.value=N[O],U.done=!1,U;return U.value=n,U.done=!0,U};return V.next=V}}throw new TypeError(Mt(N)+" is not iterable")}return x.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:x,configurable:!0}),x.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(N){var F=typeof N=="function"&&N.constructor;return!!F&&(F===x||(F.displayName||F.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,b):(N.__proto__=b,u(N,c,"GeneratorFunction")),N.prototype=Object.create(E),N},e.awrap=function(N){return{__await:N}},M(T.prototype),u(T.prototype,l,function(){return this}),e.AsyncIterator=T,e.async=function(N,F,O,V,U){U===void 0&&(U=Promise);var k=new T(d(N,F,O,V),U);return e.isGeneratorFunction(F)?k:k.next().then(function(W){return W.done?W.value:k.next()})},M(E),u(E,c,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),e.keys=function(N){var F=Object(N),O=[];for(var V in F)O.push(V);return O.reverse(),function U(){for(;O.length;){var k=O.pop();if(k in F)return U.value=k,U.done=!1,U}return U.done=!0,U}},e.values=I,A.prototype={constructor:A,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!F)for(var O in this)O.charAt(0)==="t"&&i.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=n)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var O=this;function V(j,X){return W.type="throw",W.arg=F,O.next=j,X&&(O.method="next",O.arg=n),!!X}for(var U=this.tryEntries.length-1;U>=0;--U){var k=this.tryEntries[U],W=k.completion;if(k.tryLoc==="root")return V("end");if(k.tryLoc<=this.prev){var J=i.call(k,"catchLoc"),z=i.call(k,"finallyLoc");if(J&&z){if(this.prev<k.catchLoc)return V(k.catchLoc,!0);if(this.prev<k.finallyLoc)return V(k.finallyLoc)}else if(J){if(this.prev<k.catchLoc)return V(k.catchLoc,!0)}else{if(!z)throw Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return V(k.finallyLoc)}}}},abrupt:function(F,O){for(var V=this.tryEntries.length-1;V>=0;--V){var U=this.tryEntries[V];if(U.tryLoc<=this.prev&&i.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var k=U;break}}k&&(F==="break"||F==="continue")&&k.tryLoc<=O&&O<=k.finallyLoc&&(k=null);var W=k?k.completion:{};return W.type=F,W.arg=O,k?(this.method="next",this.next=k.finallyLoc,v):this.complete(W)},complete:function(F,O){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&O&&(this.next=O),v},finish:function(F){for(var O=this.tryEntries.length-1;O>=0;--O){var V=this.tryEntries[O];if(V.finallyLoc===F)return this.complete(V.completion,V.afterLoc),L(V),v}},catch:function(F){for(var O=this.tryEntries.length-1;O>=0;--O){var V=this.tryEntries[O];if(V.tryLoc===F){var U=V.completion;if(U.type==="throw"){var k=U.arg;L(V)}return k}}throw Error("illegal catch attempt")},delegateYield:function(F,O,V){return this.delegate={iterator:I(F),resultName:O,nextLoc:V},this.method==="next"&&(this.arg=n),v}},e}function D2(n,e,r,i,o,s,a){try{var l=n[s](a),c=l.value}catch(u){return void r(u)}l.done?e(c):Promise.resolve(c).then(i,o)}function Cu(n){return function(){var e=this,r=arguments;return new Promise(function(i,o){var s=n.apply(e,r);function a(c){D2(s,i,o,a,l,"next",c)}function l(c){D2(s,i,o,a,l,"throw",c)}a(void 0)})}}var Wm=re({},CG),XW=Wm.version,pb=Wm.render,KW=Wm.unmountComponentAtNode,Nx;try{var YW=Number((XW||"").split(".")[0]);YW>=18&&(Nx=Wm.createRoot)}catch{}function L2(n){var e=Wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&Mt(e)==="object"&&(e.usingClientEntryPoint=n)}var sy="__rc_react_root__";function QW(n,e){L2(!0);var r=e[sy]||Nx(e);L2(!1),r.render(n),e[sy]=r}function ZW(n,e){pb==null||pb(n,e)}function JW(n,e){if(Nx){QW(n,e);return}ZW(n,e)}function e9(n){return Zw.apply(this,arguments)}function Zw(){return Zw=Cu(Ai().mark(function n(e){return Ai().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.resolve().then(function(){var o;(o=e[sy])===null||o===void 0||o.unmount(),delete e[sy]}));case 1:case"end":return i.stop()}},n)})),Zw.apply(this,arguments)}function t9(n){KW(n)}function n9(n){return Jw.apply(this,arguments)}function Jw(){return Jw=Cu(Ai().mark(function n(e){return Ai().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(Nx===void 0){i.next=2;break}return i.abrupt("return",e9(e));case 2:t9(e);case 3:case"end":return i.stop()}},n)})),Jw.apply(this,arguments)}const r9=(n,e)=>(JW(n,e),()=>n9(e));let i9=r9;function TT(){return i9}const cf=(n,e,r)=>r!==void 0?r:`${n}-${e}`,jU=function(n){if(!n)return!1;if(n instanceof Element){if(n.offsetParent)return!0;if(n.getBBox){var e=n.getBBox(),r=e.width,i=e.height;if(r||i)return!0}if(n.getBoundingClientRect){var o=n.getBoundingClientRect(),s=o.width,a=o.height;if(s||a)return!0}}return!1},o9=n=>{const{componentCls:e,colorPrimary:r}=n;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${n.motionEaseOutCirc}`,`opacity 2s ${n.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${n.motionDurationSlow} ${n.motionEaseInOut}`,`opacity ${n.motionDurationSlow} ${n.motionEaseInOut}`].join(",")}}}}},s9=dj("Wave",n=>[o9(n)]),WU=`${ry}-wave-target`;function mb(n){return n&&n!=="#fff"&&n!=="#ffffff"&&n!=="rgb(255, 255, 255)"&&n!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&n!=="transparent"}function a9(n){const{borderTopColor:e,borderColor:r,backgroundColor:i}=getComputedStyle(n);return mb(e)?e:mb(r)?r:mb(i)?i:null}function gb(n){return Number.isNaN(n)?0:n}const l9=n=>{const{className:e,target:r,component:i,registerUnmount:o}=n,s=_.useRef(null),a=_.useRef(null);_.useEffect(()=>{a.current=o()},[]);const[l,c]=_.useState(null),[u,d]=_.useState([]),[f,h]=_.useState(0),[p,g]=_.useState(0),[y,v]=_.useState(0),[m,x]=_.useState(0),[b,S]=_.useState(!1),w={left:f,top:p,width:y,height:m,borderRadius:u.map(M=>`${M}px`).join(" ")};l&&(w["--wave-color"]=l);function C(){const M=getComputedStyle(r);c(a9(r));const T=M.position==="static",{borderLeftWidth:R,borderTopWidth:P}=M;h(T?r.offsetLeft:gb(-parseFloat(R))),g(T?r.offsetTop:gb(-parseFloat(P))),v(r.offsetWidth),x(r.offsetHeight);const{borderTopLeftRadius:D,borderTopRightRadius:L,borderBottomLeftRadius:A,borderBottomRightRadius:I}=M;d([D,L,I,A].map(N=>gb(parseFloat(N))))}if(_.useEffect(()=>{if(r){const M=pr(()=>{C(),S(!0)});let T;return typeof ResizeObserver<"u"&&(T=new ResizeObserver(C),T.observe(r)),()=>{pr.cancel(M),T==null||T.disconnect()}}},[]),!b)return null;const E=(i==="Checkbox"||i==="Radio")&&(r==null?void 0:r.classList.contains(WU));return _.createElement(wu,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(M,T)=>{var R,P;if(T.deadline||T.propertyName==="opacity"){const D=(R=s.current)===null||R===void 0?void 0:R.parentElement;(P=a.current)===null||P===void 0||P.call(a).then(()=>{D==null||D.remove()})}return!1}},(M,T)=>{let{className:R}=M;return _.createElement("div",{ref:ta(s,T),className:_e(e,R,{"wave-quick":E}),style:w})})},c9=(n,e)=>{var r;const{component:i}=e;if(i==="Checkbox"&&!(!((r=n.querySelector("input"))===null||r===void 0)&&r.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",n==null||n.insertBefore(o,n==null?void 0:n.firstChild);const s=TT();let a=null;function l(){return a}a=s(_.createElement(l9,Object.assign({},e,{target:n,registerUnmount:l})),o)},u9=(n,e,r)=>{const{wave:i}=_.useContext($t),[,o,s]=eo(),a=br(u=>{const d=n.current;if(i!=null&&i.disabled||!d)return;const f=d.querySelector(`.${WU}`)||d,{showEffect:h}=i||{};(h||c9)(f,{className:e,token:o,component:r,event:u,hashId:s})}),l=_.useRef(null);return u=>{pr.cancel(l.current),l.current=pr(()=>{a(u)})}},qU=n=>{const{children:e,disabled:r,component:i}=n,{getPrefixCls:o}=_.useContext($t),s=_.useRef(null),a=o("wave"),[,l]=s9(a),c=u9(s,_e(a,l),i);if(se.useEffect(()=>{const d=s.current;if(!d||d.nodeType!==1||r)return;const f=h=>{!jU(h.target)||!d.getAttribute||d.getAttribute("disabled")||d.disabled||d.className.includes("disabled")||d.className.includes("-leave")||c(h)};return d.addEventListener("click",f,!0),()=>{d.removeEventListener("click",f,!0)}},[r]),!se.isValidElement(e))return e??null;const u=Vm(e)?ta(bx(e),s):s;return Zl(e,{ref:u})},ra=n=>{const e=se.useContext(sf);return se.useMemo(()=>n?typeof n=="string"?n??e:n instanceof Function?n(e):e:e,[n,e])},d9=n=>{const{componentCls:e}=n;return{[e]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},f9=n=>{const{componentCls:e,antCls:r}=n;return{[e]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${e}-item:empty`]:{display:"none"},[`${e}-item > ${r}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},h9=n=>{const{componentCls:e}=n;return{[e]:{"&-gap-row-small":{rowGap:n.spaceGapSmallSize},"&-gap-row-middle":{rowGap:n.spaceGapMiddleSize},"&-gap-row-large":{rowGap:n.spaceGapLargeSize},"&-gap-col-small":{columnGap:n.spaceGapSmallSize},"&-gap-col-middle":{columnGap:n.spaceGapMiddleSize},"&-gap-col-large":{columnGap:n.spaceGapLargeSize}}}},XU=si("Space",n=>{const e=Un(n,{spaceGapSmallSize:n.paddingXS,spaceGapMiddleSize:n.padding,spaceGapLargeSize:n.paddingLG});return[f9(e),h9(e),d9(e)]},()=>({}),{resetStyle:!1});var KU=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Px=_.createContext(null),Ox=(n,e)=>{const r=_.useContext(Px),i=_.useMemo(()=>{if(!r)return"";const{compactDirection:o,isFirstItem:s,isLastItem:a}=r,l=o==="vertical"?"-vertical-":"-";return _e(`${n}-compact${l}item`,{[`${n}-compact${l}first-item`]:s,[`${n}-compact${l}last-item`]:a,[`${n}-compact${l}item-rtl`]:e==="rtl"})},[n,e,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:i}},p9=n=>{let{children:e}=n;return _.createElement(Px.Provider,{value:null},e)},m9=n=>{var{children:e}=n,r=KU(n,["children"]);return _.createElement(Px.Provider,{value:r},e)},g9=n=>{const{getPrefixCls:e,direction:r}=_.useContext($t),{size:i,direction:o,block:s,prefixCls:a,className:l,rootClassName:c,children:u}=n,d=KU(n,["size","direction","block","prefixCls","className","rootClassName","children"]),f=ra(b=>i??b),h=e("space-compact",a),[p,g]=XU(h),y=_e(h,g,{[`${h}-rtl`]:r==="rtl",[`${h}-block`]:s,[`${h}-vertical`]:o==="vertical"},l,c),v=_.useContext(Px),m=Ga(u),x=_.useMemo(()=>m.map((b,S)=>{const w=(b==null?void 0:b.key)||`${h}-item-${S}`;return _.createElement(m9,{key:w,compactSize:f,compactDirection:o,isFirstItem:S===0&&(!v||(v==null?void 0:v.isFirstItem)),isLastItem:S===m.length-1&&(!v||(v==null?void 0:v.isLastItem))},b)}),[i,m,v]);return m.length===0?null:p(_.createElement("div",Object.assign({className:y},d),x))};var v9=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const YU=_.createContext(void 0),y9=n=>{const{getPrefixCls:e,direction:r}=_.useContext($t),{prefixCls:i,size:o,className:s}=n,a=v9(n,["prefixCls","size","className"]),l=e("btn-group",i),[,,c]=eo();let u="";switch(o){case"large":u="lg";break;case"small":u="sm";break}const d=_e(l,{[`${l}-${u}`]:u,[`${l}-rtl`]:r==="rtl"},s,c);return _.createElement(YU.Provider,{value:o},_.createElement("div",Object.assign({},a,{className:d})))},F2=/^[\u4E00-\u9FA5]{2}$/,eC=F2.test.bind(F2);function QU(n){return n==="danger"?{danger:!0}:{type:n}}function U2(n){return typeof n=="string"}function vb(n){return n==="text"||n==="link"}function x9(n,e){if(n==null)return;const r=e?" ":"";return typeof n!="string"&&typeof n!="number"&&U2(n.type)&&eC(n.props.children)?Zl(n,{children:n.props.children.split("").join(r)}):U2(n)?eC(n)?se.createElement("span",null,n.split("").join(r)):se.createElement("span",null,n):UU(n)?se.createElement("span",null,n):n}function _9(n,e){let r=!1;const i=[];return se.Children.forEach(n,o=>{const s=typeof o,a=s==="string"||s==="number";if(r&&a){const l=i.length-1,c=i[l];i[l]=`${c}${o}`}else i.push(o);r=a}),se.Children.map(i,o=>x9(o,e))}["default","primary","danger"].concat(st(lf));const tC=_.forwardRef((n,e)=>{const{className:r,style:i,children:o,prefixCls:s}=n,a=_e(`${s}-icon`,r);return se.createElement("span",{ref:e,className:a,style:i},o)}),B2=_.forwardRef((n,e)=>{const{prefixCls:r,className:i,style:o,iconClassName:s}=n,a=_e(`${r}-loading-icon`,i);return se.createElement(tC,{prefixCls:r,className:a,style:o,ref:e},se.createElement(jm,{className:s}))}),yb=()=>({width:0,opacity:0,transform:"scale(0)"}),xb=n=>({width:n.scrollWidth,opacity:1,transform:"scale(1)"}),b9=n=>{const{prefixCls:e,loading:r,existIcon:i,className:o,style:s,mount:a}=n,l=!!r;return i?se.createElement(B2,{prefixCls:e,className:o,style:s}):se.createElement(wu,{visible:l,motionName:`${e}-loading-icon-motion`,motionAppear:!a,motionEnter:!a,motionLeave:!a,removeOnLeave:!0,onAppearStart:yb,onAppearActive:xb,onEnterStart:yb,onEnterActive:xb,onLeaveStart:xb,onLeaveActive:yb},(c,u)=>{let{className:d,style:f}=c;const h=Object.assign(Object.assign({},s),f);return se.createElement(B2,{prefixCls:e,className:_e(o,d),style:h,ref:u})})},$2=(n,e)=>({[`> span, > ${n}`]:{"&:not(:last-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),S9=n=>{const{componentCls:e,fontSize:r,lineWidth:i,groupBorderColor:o,colorErrorHover:s}=n;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:n.calc(i).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:r}},$2(`${e}-primary`,o),$2(`${e}-danger`,s)]}};var w9=["b"],C9=["v"],_b=function(e){return Math.round(Number(e||0))},E9=function(e){if(e instanceof Ln)return e;if(e&&Mt(e)==="object"&&"h"in e&&"b"in e){var r=e,i=r.b,o=Cn(r,w9);return re(re({},o),{},{v:i})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},Jp=function(n){sc(r,n);var e=ac(r);function r(i){return Gr(this,r),e.call(this,E9(i))}return Hr(r,[{key:"toHsbString",value:function(){var o=this.toHsb(),s=_b(o.s*100),a=_b(o.b*100),l=_b(o.h),c=o.a,u="hsb(".concat(l,", ").concat(s,"%, ").concat(a,"%)"),d="hsba(".concat(l,", ").concat(s,"%, ").concat(a,"%, ").concat(c.toFixed(c===0?0:2),")");return c===1?u:d}},{key:"toHsb",value:function(){var o=this.toHsv(),s=o.v,a=Cn(o,C9);return re(re({},a),{},{b:s,a:this.a})}}]),r}(Ln),T9=function(e){return e instanceof Jp?e:new Jp(e)};T9("#1677ff");const M9=(n,e)=>(n==null?void 0:n.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",R9=(n,e)=>n?M9(n,e):"";let A9=function(){function n(e){Gr(this,n);var r;if(this.cleared=!1,e instanceof n){this.metaColor=e.metaColor.clone(),this.colors=(r=e.colors)===null||r===void 0?void 0:r.map(o=>({color:new n(o.color),percent:o.percent})),this.cleared=e.cleared;return}const i=Array.isArray(e);i&&e.length?(this.colors=e.map(o=>{let{color:s,percent:a}=o;return{color:new n(s),percent:a}}),this.metaColor=new Jp(this.colors[0].color.metaColor)):this.metaColor=new Jp(i?"":e),(!e||i&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Hr(n,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return R9(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:r}=this;return r?`linear-gradient(90deg, ${r.map(o=>`${o.color.toRgbString()} ${o.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(r){return!r||this.isGradient()!==r.isGradient()?!1:this.isGradient()?this.colors.length===r.colors.length&&this.colors.every((i,o)=>{const s=r.colors[o];return i.percent===s.percent&&i.color.equals(s.color)}):this.toHexString()===r.toHexString()}}])}();var N9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},P9=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:N9}))},z2=_.forwardRef(P9);const O9=n=>({animationDuration:n,animationFillMode:"both"}),I9=n=>({animationDuration:n,animationFillMode:"both"}),Ix=function(n,e,r,i){const s=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${s}${n}-enter,
      ${s}${n}-appear
    `]:Object.assign(Object.assign({},O9(i)),{animationPlayState:"paused"}),[`${s}${n}-leave`]:Object.assign(Object.assign({},I9(i)),{animationPlayState:"paused"}),[`
      ${s}${n}-enter${n}-enter-active,
      ${s}${n}-appear${n}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${s}${n}-leave${n}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},D9=new hn("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),L9=new hn("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),F9=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:r}=n,i=`${r}-fade`,o=e?"&":"";return[Ix(i,D9,L9,n.motionDurationMid,e),{[`
        ${o}${i}-enter,
        ${o}${i}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${o}${i}-leave`]:{animationTimingFunction:"linear"}}]},U9=new hn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),B9=new hn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),$9=new hn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),z9=new hn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),k9=new hn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),V9=new hn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),G9=new hn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),H9=new hn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),j9={"move-up":{inKeyframes:G9,outKeyframes:H9},"move-down":{inKeyframes:U9,outKeyframes:B9},"move-left":{inKeyframes:$9,outKeyframes:z9},"move-right":{inKeyframes:k9,outKeyframes:V9}},k2=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=j9[e];return[Ix(i,o,s,n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{opacity:0,animationTimingFunction:n.motionEaseOutCirc},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},ZU=new hn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),JU=new hn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),eB=new hn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),tB=new hn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),W9=new hn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),q9=new hn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),X9=new hn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),K9=new hn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Y9={"slide-up":{inKeyframes:ZU,outKeyframes:JU},"slide-down":{inKeyframes:eB,outKeyframes:tB},"slide-left":{inKeyframes:W9,outKeyframes:q9},"slide-right":{inKeyframes:X9,outKeyframes:K9}},V2=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=Y9[e];return[Ix(i,o,s,n.motionDurationMid),{[`
      ${i}-enter,
      ${i}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:n.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInQuint}}]},Q9=new hn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Z9=new hn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),G2=new hn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),H2=new hn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),J9=new hn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),e7=new hn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),t7=new hn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),n7=new hn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),r7=new hn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),i7=new hn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),o7=new hn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),s7=new hn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),a7={zoom:{inKeyframes:Q9,outKeyframes:Z9},"zoom-big":{inKeyframes:G2,outKeyframes:H2},"zoom-big-fast":{inKeyframes:G2,outKeyframes:H2},"zoom-left":{inKeyframes:t7,outKeyframes:n7},"zoom-right":{inKeyframes:r7,outKeyframes:i7},"zoom-up":{inKeyframes:J9,outKeyframes:e7},"zoom-down":{inKeyframes:o7,outKeyframes:s7}},nB=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=a7[e];return[Ix(i,o,s,e==="zoom-big-fast"?n.motionDurationFast:n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:n.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},l7=(n,e)=>{const{r,g:i,b:o,a:s}=n.toRgb(),a=new Jp(n.toRgbString()).onBackground(e).toHsv();return s<=.5?a.v>.5:r*.299+i*.587+o*.114>192},rB=n=>{const{paddingInline:e,onlyIconSize:r}=n;return Un(n,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:r})},iB=n=>{var e,r,i,o,s,a;const l=(e=n.contentFontSize)!==null&&e!==void 0?e:n.fontSize,c=(r=n.contentFontSizeSM)!==null&&r!==void 0?r:n.fontSize,u=(i=n.contentFontSizeLG)!==null&&i!==void 0?i:n.fontSizeLG,d=(o=n.contentLineHeight)!==null&&o!==void 0?o:h0(l),f=(s=n.contentLineHeightSM)!==null&&s!==void 0?s:h0(c),h=(a=n.contentLineHeightLG)!==null&&a!==void 0?a:h0(u),p=l7(new A9(n.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlTmpOutline}`,primaryShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlOutline}`,dangerShadow:`0 ${n.controlOutlineWidth}px 0 ${n.colorErrorOutline}`,primaryColor:n.colorTextLightSolid,dangerColor:n.colorTextLightSolid,borderColorDisabled:n.colorBorder,defaultGhostColor:n.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:n.colorBgContainer,paddingInline:n.paddingContentHorizontal-n.lineWidth,paddingInlineLG:n.paddingContentHorizontal-n.lineWidth,paddingInlineSM:8-n.lineWidth,onlyIconSize:n.fontSizeLG,onlyIconSizeSM:n.fontSizeLG-2,onlyIconSizeLG:n.fontSizeLG+2,groupBorderColor:n.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:n.colorText,textTextHoverColor:n.colorText,textTextActiveColor:n.colorText,textHoverBg:n.colorFillTertiary,defaultColor:n.colorText,defaultBg:n.colorBgContainer,defaultBorderColor:n.colorBorder,defaultBorderColorDisabled:n.colorBorder,defaultHoverBg:n.colorBgContainer,defaultHoverColor:n.colorPrimaryHover,defaultHoverBorderColor:n.colorPrimaryHover,defaultActiveBg:n.colorBgContainer,defaultActiveColor:n.colorPrimaryActive,defaultActiveBorderColor:n.colorPrimaryActive,solidTextColor:p,contentFontSize:l,contentFontSizeSM:c,contentFontSizeLG:u,contentLineHeight:d,contentLineHeightSM:f,contentLineHeightLG:h,paddingBlock:Math.max((n.controlHeight-l*d)/2-n.lineWidth,0),paddingBlockSM:Math.max((n.controlHeightSM-c*f)/2-n.lineWidth,0),paddingBlockLG:Math.max((n.controlHeightLG-u*h)/2-n.lineWidth,0)}},c7=n=>{const{componentCls:e,iconCls:r,fontWeight:i,opacityLoading:o,motionDurationSlow:s,motionEaseInOut:a,marginXS:l,calc:c}=n;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:n.marginXS,alignItems:"center",justifyContent:"center",fontWeight:i,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`,cursor:"pointer",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:n.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:Rx(),"> a":{color:"currentColor"},"&:not(:disabled)":Gm(n),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:o,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(u=>`${u} ${s} ${a}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:c(l).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:c(l).mul(-1).equal()}}}}}},oB=(n,e,r)=>({[`&:not(:disabled):not(${n}-disabled)`]:{"&:hover":e,"&:active":r}}),u7=n=>({minWidth:n.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),d7=n=>({borderRadius:n.controlHeight,paddingInlineStart:n.calc(n.controlHeight).div(2).equal(),paddingInlineEnd:n.calc(n.controlHeight).div(2).equal()}),f7=n=>({cursor:"not-allowed",borderColor:n.borderColorDisabled,color:n.colorTextDisabled,background:n.colorBgContainerDisabled,boxShadow:"none"}),MT=(n,e,r,i,o,s,a,l)=>({[`&${n}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,background:e,borderColor:i||void 0,boxShadow:"none"},oB(n,Object.assign({background:e},a),Object.assign({background:e},l))),{"&:disabled":{cursor:"not-allowed",color:o||void 0,borderColor:s||void 0}})}),h7=n=>({[`&:disabled, &${n.componentCls}-disabled`]:Object.assign({},f7(n))}),p7=n=>({[`&:disabled, &${n.componentCls}-disabled`]:{cursor:"not-allowed",color:n.colorTextDisabled}}),Dx=(n,e,r,i)=>{const s=i&&["link","text"].includes(i)?p7:h7;return Object.assign(Object.assign({},s(n)),oB(n.componentCls,e,r))},Lx=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-solid`]:Object.assign({color:e,background:r},Dx(n,i,o))}),Fx=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-outlined, &${n.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:r},Dx(n,i,o))}),Ux=n=>({[`&${n.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),Bx=(n,e,r,i)=>({[`&${n.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},Dx(n,r,i))}),Jl=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-${r}`]:Object.assign({color:e,boxShadow:"none"},Dx(n,i,o,r))}),m7=n=>{const{componentCls:e}=n;return lf.reduce((r,i)=>{const o=n[`${i}6`],s=n[`${i}1`],a=n[`${i}5`],l=n[`${i}2`],c=n[`${i}3`],u=n[`${i}7`],d=`0 ${n.controlOutlineWidth} 0 ${n[`${i}1`]}`;return Object.assign(Object.assign({},r),{[`&${e}-color-${i}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:o,boxShadow:d},Lx(n,n.colorTextLightSolid,o,{background:a},{background:u})),Fx(n,o,n.colorBgContainer,{color:a,borderColor:a,background:n.colorBgContainer},{color:u,borderColor:u,background:n.colorBgContainer})),Ux(n)),Bx(n,s,{background:l},{background:c})),Jl(n,o,"link",{color:a},{color:u})),Jl(n,o,"text",{color:a,background:s},{color:u,background:c}))})},{})},g7=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.defaultColor,boxShadow:n.defaultShadow},Lx(n,n.solidTextColor,n.colorBgSolid,{color:n.solidTextColor,background:n.colorBgSolidHover},{color:n.solidTextColor,background:n.colorBgSolidActive})),Ux(n)),Bx(n,n.colorFillTertiary,{background:n.colorFillSecondary},{background:n.colorFill})),Jl(n,n.textTextColor,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),MT(n.componentCls,n.ghostBg,n.defaultGhostColor,n.defaultGhostBorderColor,n.colorTextDisabled,n.colorBorder)),v7=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorPrimary,boxShadow:n.primaryShadow},Fx(n,n.colorPrimary,n.colorBgContainer,{color:n.colorPrimaryTextHover,borderColor:n.colorPrimaryHover,background:n.colorBgContainer},{color:n.colorPrimaryTextActive,borderColor:n.colorPrimaryActive,background:n.colorBgContainer})),Ux(n)),Bx(n,n.colorPrimaryBg,{background:n.colorPrimaryBgHover},{background:n.colorPrimaryBorder})),Jl(n,n.colorLink,"text",{color:n.colorPrimaryTextHover,background:n.colorPrimaryBg},{color:n.colorPrimaryTextActive,background:n.colorPrimaryBorder})),MT(n.componentCls,n.ghostBg,n.colorPrimary,n.colorPrimary,n.colorTextDisabled,n.colorBorder,{color:n.colorPrimaryHover,borderColor:n.colorPrimaryHover},{color:n.colorPrimaryActive,borderColor:n.colorPrimaryActive})),y7=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorError,boxShadow:n.dangerShadow},Lx(n,n.dangerColor,n.colorError,{background:n.colorErrorHover},{background:n.colorErrorActive})),Fx(n,n.colorError,n.colorBgContainer,{color:n.colorErrorHover,borderColor:n.colorErrorBorderHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),Ux(n)),Bx(n,n.colorErrorBg,{background:n.colorErrorBgFilledHover},{background:n.colorErrorBgActive})),Jl(n,n.colorError,"text",{color:n.colorErrorHover,background:n.colorErrorBg},{color:n.colorErrorHover,background:n.colorErrorBgActive})),Jl(n,n.colorError,"link",{color:n.colorErrorHover},{color:n.colorErrorActive})),MT(n.componentCls,n.ghostBg,n.colorError,n.colorError,n.colorTextDisabled,n.colorBorder,{color:n.colorErrorHover,borderColor:n.colorErrorHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),x7=n=>{const{componentCls:e}=n;return Object.assign({[`${e}-color-default`]:g7(n),[`${e}-color-primary`]:v7(n),[`${e}-color-dangerous`]:y7(n)},m7(n))},_7=n=>Object.assign(Object.assign(Object.assign(Object.assign({},Fx(n,n.defaultBorderColor,n.defaultBg,{color:n.defaultHoverColor,borderColor:n.defaultHoverBorderColor,background:n.defaultHoverBg},{color:n.defaultActiveColor,borderColor:n.defaultActiveBorderColor,background:n.defaultActiveBg})),Jl(n,n.textTextColor,"text",{color:n.textTextHoverColor,background:n.textHoverBg},{color:n.textTextActiveColor,background:n.colorBgTextActive})),Lx(n,n.primaryColor,n.colorPrimary,{background:n.colorPrimaryHover,color:n.primaryColor},{background:n.colorPrimaryActive,color:n.primaryColor})),Jl(n,n.colorLink,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),RT=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:i,fontSize:o,borderRadius:s,buttonPaddingHorizontal:a,iconCls:l,buttonPaddingVertical:c,buttonIconOnlyFontSize:u}=n;return[{[e]:{fontSize:o,height:i,padding:`${De(c)} ${De(a)}`,borderRadius:s,[`&${r}-icon-only`]:{width:i,[l]:{fontSize:u,verticalAlign:"calc(-0.125em - 1px)"}}}},{[`${r}${r}-circle${e}`]:u7(n)},{[`${r}${r}-round${e}`]:d7(n)}]},b7=n=>{const e=Un(n,{fontSize:n.contentFontSize});return RT(e,n.componentCls)},S7=n=>{const e=Un(n,{controlHeight:n.controlHeightSM,fontSize:n.contentFontSizeSM,padding:n.paddingXS,buttonPaddingHorizontal:n.paddingInlineSM,buttonPaddingVertical:0,borderRadius:n.borderRadiusSM,buttonIconOnlyFontSize:n.onlyIconSizeSM});return RT(e,`${n.componentCls}-sm`)},w7=n=>{const e=Un(n,{controlHeight:n.controlHeightLG,fontSize:n.contentFontSizeLG,buttonPaddingHorizontal:n.paddingInlineLG,buttonPaddingVertical:0,borderRadius:n.borderRadiusLG,buttonIconOnlyFontSize:n.onlyIconSizeLG});return RT(e,`${n.componentCls}-lg`)},C7=n=>{const{componentCls:e}=n;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},E7=si("Button",n=>{const e=rB(n);return[c7(e),b7(e),S7(e),w7(e),C7(e),x7(e),_7(e),S9(e)]},iB,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function T7(n,e,r){const{focusElCls:i,focus:o,borderElCls:s}=r,a=s?"> *":"",l=["hover",o?"focus":null,"active"].filter(Boolean).map(c=>`&:${c} ${a}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},i?{[`&${i}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function M7(n,e,r){const{borderElCls:i}=r,o=i?`> ${i}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${o}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${o}, &${n}-sm ${o}, &${n}-lg ${o}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${o}, &${n}-sm ${o}, &${n}-lg ${o}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function AT(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=n,i=`${r}-compact`;return{[i]:Object.assign(Object.assign({},T7(n,i,e)),M7(r,i,e))}}function R7(n,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:n.calc(n.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function A7(n,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function N7(n){const e=`${n.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},R7(n,e)),A7(n.componentCls,e))}}const P7=n=>{const{componentCls:e,colorPrimaryHover:r,lineWidth:i,calc:o}=n,s=o(i).mul(-1).equal(),a=l=>({[`${e}-compact${l?"-vertical":""}-item${e}-primary:not([disabled])`]:{"& + &::before":{position:"absolute",top:l?s:0,insetInlineStart:l?0:s,backgroundColor:r,content:'""',width:l?"100%":i,height:l?i:"100%"}}});return Object.assign(Object.assign({},a()),a(!0))},O7=bT(["Button","compact"],n=>{const e=rB(n);return[AT(e),N7(e),P7(e)]},iB);var I7=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function D7(n){if(typeof n=="object"&&n){let e=n==null?void 0:n.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!n,delay:0}}const L7={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},F7=se.forwardRef((n,e)=>{var r,i,o,s;const{loading:a=!1,prefixCls:l,color:c,variant:u,type:d,danger:f=!1,shape:h="default",size:p,styles:g,disabled:y,className:v,rootClassName:m,children:x,icon:b,iconPosition:S="start",ghost:w=!1,block:C=!1,htmlType:E="button",classNames:M,style:T={},autoInsertSpace:R,autoFocus:P}=n,D=I7(n,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),L=d||"default",[A,I]=_.useMemo(()=>{if(c&&u)return[c,u];const Ee=L7[L]||[];return f?["danger",Ee[1]]:Ee},[d,c,u,f]),F=A==="danger"?"dangerous":A,{getPrefixCls:O,direction:V,button:U}=_.useContext($t),k=(r=R??(U==null?void 0:U.autoInsertSpace))!==null&&r!==void 0?r:!0,W=O("btn",l),[J,z,j]=E7(W),X=_.useContext(Ha),Q=y??X,ne=_.useContext(YU),ye=_.useMemo(()=>D7(a),[a]),[me,fe]=_.useState(ye.loading),[le,ge]=_.useState(!1),q=_.useRef(null),ve=zf(e,q),be=_.Children.count(x)===1&&!b&&!vb(I),xe=_.useRef(!0);se.useEffect(()=>(xe.current=!1,()=>{xe.current=!0}),[]),_.useEffect(()=>{let Ee=null;ye.delay>0?Ee=setTimeout(()=>{Ee=null,fe(!0)},ye.delay):fe(ye.loading);function Pe(){Ee&&(clearTimeout(Ee),Ee=null)}return Pe},[ye]),_.useEffect(()=>{if(!q.current||!k)return;const Ee=q.current.textContent||"";be&&eC(Ee)?le||ge(!0):le&&ge(!1)}),_.useEffect(()=>{P&&q.current&&q.current.focus()},[]);const we=se.useCallback(Ee=>{var Pe;if(me||Q){Ee.preventDefault();return}(Pe=n.onClick)===null||Pe===void 0||Pe.call(n,Ee)},[n.onClick,me,Q]),{compactSize:qe,compactItemClassnames:Fe}=Ox(W,V),H={large:"lg",small:"sm",middle:void 0},B=ra(Ee=>{var Pe,ke;return(ke=(Pe=p??qe)!==null&&Pe!==void 0?Pe:ne)!==null&&ke!==void 0?ke:Ee}),K=B&&(i=H[B])!==null&&i!==void 0?i:"",oe=me?"loading":b,pe=na(D,["navigate"]),ce=_e(W,z,j,{[`${W}-${h}`]:h!=="default"&&h,[`${W}-${L}`]:L,[`${W}-dangerous`]:f,[`${W}-color-${F}`]:F,[`${W}-variant-${I}`]:I,[`${W}-${K}`]:K,[`${W}-icon-only`]:!x&&x!==0&&!!oe,[`${W}-background-ghost`]:w&&!vb(I),[`${W}-loading`]:me,[`${W}-two-chinese-chars`]:le&&k&&!me,[`${W}-block`]:C,[`${W}-rtl`]:V==="rtl",[`${W}-icon-end`]:S==="end"},Fe,v,m,U==null?void 0:U.className),Ue=Object.assign(Object.assign({},U==null?void 0:U.style),T),Re=_e(M==null?void 0:M.icon,(o=U==null?void 0:U.classNames)===null||o===void 0?void 0:o.icon),Le=Object.assign(Object.assign({},(g==null?void 0:g.icon)||{}),((s=U==null?void 0:U.styles)===null||s===void 0?void 0:s.icon)||{}),Je=b&&!me?se.createElement(tC,{prefixCls:W,className:Re,style:Le},b):typeof a=="object"&&a.icon?se.createElement(tC,{prefixCls:W,className:Re,style:Le},a.icon):se.createElement(b9,{existIcon:!!b,prefixCls:W,loading:me,mount:xe.current}),Me=x||x===0?_9(x,be&&k):null;if(pe.href!==void 0)return J(se.createElement("a",Object.assign({},pe,{className:_e(ce,{[`${W}-disabled`]:Q}),href:Q?void 0:pe.href,style:Ue,onClick:we,ref:ve,tabIndex:Q?-1:0}),Je,Me));let ze=se.createElement("button",Object.assign({},D,{type:E,className:ce,style:Ue,onClick:we,disabled:Q,ref:ve}),Je,Me,Fe&&se.createElement(O7,{prefixCls:W}));return vb(I)||(ze=se.createElement(qU,{component:"Button",disabled:me},ze)),J(ze)}),Gf=F7;Gf.Group=y9;Gf.__ANT_BUTTON=!0;function bb(n){return!!(n!=null&&n.then)}const sB=n=>{const{type:e,children:r,prefixCls:i,buttonProps:o,close:s,autoFocus:a,emitEvent:l,isSilent:c,quitOnNullishReturnValue:u,actionFn:d}=n,f=_.useRef(!1),h=_.useRef(null),[p,g]=af(!1),y=function(){s==null||s.apply(void 0,arguments)};_.useEffect(()=>{let x=null;return a&&(x=setTimeout(()=>{var b;(b=h.current)===null||b===void 0||b.focus({preventScroll:!0})})),()=>{x&&clearTimeout(x)}},[]);const v=x=>{bb(x)&&(g(!0),x.then(function(){g(!1,!0),y.apply(void 0,arguments),f.current=!1},b=>{if(g(!1,!0),f.current=!1,!(c!=null&&c()))return Promise.reject(b)}))},m=x=>{if(f.current)return;if(f.current=!0,!d){y();return}let b;if(l){if(b=d(x),u&&!bb(b)){f.current=!1,y(x);return}}else if(d.length)b=d(s),f.current=!1;else if(b=d(),!bb(b)){y();return}v(b)};return _.createElement(Gf,Object.assign({},QU(e),{onClick:m,loading:p,prefixCls:i},o,{ref:h}),r)},qm=se.createContext({}),{Provider:aB}=qm,j2=()=>{const{autoFocusButton:n,cancelButtonProps:e,cancelTextLocale:r,isSilent:i,mergedOkCancel:o,rootPrefixCls:s,close:a,onCancel:l,onConfirm:c}=_.useContext(qm);return o?se.createElement(sB,{isSilent:i,actionFn:l,close:function(){a==null||a.apply(void 0,arguments),c==null||c(!1)},autoFocus:n==="cancel",buttonProps:e,prefixCls:`${s}-btn`},r):null},W2=()=>{const{autoFocusButton:n,close:e,isSilent:r,okButtonProps:i,rootPrefixCls:o,okTextLocale:s,okType:a,onConfirm:l,onOk:c}=_.useContext(qm);return se.createElement(sB,{isSilent:r,type:a||"primary",actionFn:c,close:function(){e==null||e.apply(void 0,arguments),l==null||l(!0)},autoFocus:n==="ok",buttonProps:i,prefixCls:`${o}-btn`},s)};var lB=_.createContext(null),q2=[];function U7(n,e){var r=_.useState(function(){if(!mi())return null;var g=document.createElement("div");return g}),i=Ce(r,1),o=i[0],s=_.useRef(!1),a=_.useContext(lB),l=_.useState(q2),c=Ce(l,2),u=c[0],d=c[1],f=a||(s.current?void 0:function(g){d(function(y){var v=[g].concat(st(y));return v})});function h(){o.parentElement||document.body.appendChild(o),s.current=!0}function p(){var g;(g=o.parentElement)===null||g===void 0||g.removeChild(o),s.current=!1}return _n(function(){return n?a?a(h):h():p(),p},[n]),_n(function(){u.length&&(u.forEach(function(g){return g()}),d(q2))},[u]),[o,f]}function B7(n){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=e;var i=r.style;i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll";var o,s;if(n){var a=getComputedStyle(n);i.scrollbarColor=a.scrollbarColor,i.scrollbarWidth=a.scrollbarWidth;var l=getComputedStyle(n,"::-webkit-scrollbar"),c=parseInt(l.width,10),u=parseInt(l.height,10);try{var d=c?"width: ".concat(l.width,";"):"",f=u?"height: ".concat(l.height,";"):"";Ia(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(d,`
`).concat(f,`
}`),e)}catch(g){console.error(g),o=c,s=u}}document.body.appendChild(r);var h=n&&o&&!isNaN(o)?o:r.offsetWidth-r.clientWidth,p=n&&s&&!isNaN(s)?s:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),Xp(e),{width:h,height:p}}function $7(n){return typeof document>"u"||!n||!(n instanceof Element)?{width:0,height:0}:B7(n)}function z7(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var k7="rc-util-locker-".concat(Date.now()),X2=0;function V7(n){var e=!!n,r=_.useState(function(){return X2+=1,"".concat(k7,"_").concat(X2)}),i=Ce(r,1),o=i[0];_n(function(){if(e){var s=$7(document.body).width,a=z7();Ia(`
html body {
  overflow-y: hidden;
  `.concat(a?"width: calc(100% - ".concat(s,"px);"):"",`
}`),o)}else Xp(o);return function(){Xp(o)}},[e,o])}var G7=!1;function H7(n){return G7}var K2=function(e){return e===!1?!1:!mi()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},NT=_.forwardRef(function(n,e){var r=n.open,i=n.autoLock,o=n.getContainer;n.debug;var s=n.autoDestroy,a=s===void 0?!0:s,l=n.children,c=_.useState(r),u=Ce(c,2),d=u[0],f=u[1],h=d||r;_.useEffect(function(){(a||r)&&f(r)},[r,a]);var p=_.useState(function(){return K2(o)}),g=Ce(p,2),y=g[0],v=g[1];_.useEffect(function(){var P=K2(o);v(P??null)});var m=U7(h&&!y),x=Ce(m,2),b=x[0],S=x[1],w=y??b;V7(i&&r&&mi()&&(w===b||w===document.body));var C=null;if(l&&Vm(l)&&e){var E=l;C=E.ref}var M=zf(C,e);if(!h||!mi()||y===void 0)return null;var T=w===!1||H7(),R=l;return e&&(R=_.cloneElement(l,{ref:M})),_.createElement(lB.Provider,{value:S},T?R:Ql.createPortal(R,w))}),cB=_.createContext({});function j7(){var n=re({},Xy);return n.useId}var Y2=0,Q2=j7();const uB=Q2?function(e){var r=Q2();return e||r}:function(e){var r=_.useState("ssr-id"),i=Ce(r,2),o=i[0],s=i[1];return _.useEffect(function(){var a=Y2;Y2+=1,s("rc_unique_".concat(a))},[]),e||o};function Z2(n,e,r){var i=e;return!i&&r&&(i="".concat(n,"-").concat(r)),i}function J2(n,e){var r=n["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var o=n.document;r=o.documentElement[i],typeof r!="number"&&(r=o.body[i])}return r}function W7(n){var e=n.getBoundingClientRect(),r={left:e.left,top:e.top},i=n.ownerDocument,o=i.defaultView||i.parentWindow;return r.left+=J2(o),r.top+=J2(o,!0),r}const q7=_.memo(function(n){var e=n.children;return e},function(n,e){var r=e.shouldUpdate;return!r});var X7={width:0,height:0,overflow:"hidden",outline:"none"},K7={outline:"none"},dB=se.forwardRef(function(n,e){var r=n.prefixCls,i=n.className,o=n.style,s=n.title,a=n.ariaId,l=n.footer,c=n.closable,u=n.closeIcon,d=n.onClose,f=n.children,h=n.bodyStyle,p=n.bodyProps,g=n.modalRender,y=n.onMouseDown,v=n.onMouseUp,m=n.holderRef,x=n.visible,b=n.forceRender,S=n.width,w=n.height,C=n.classNames,E=n.styles,M=se.useContext(cB),T=M.panel,R=zf(m,T),P=_.useRef(),D=_.useRef();se.useImperativeHandle(e,function(){return{focus:function(){var W;(W=P.current)===null||W===void 0||W.focus({preventScroll:!0})},changeActive:function(W){var J=document,z=J.activeElement;W&&z===D.current?P.current.focus({preventScroll:!0}):!W&&z===P.current&&D.current.focus({preventScroll:!0})}}});var L={};S!==void 0&&(L.width=S),w!==void 0&&(L.height=w);var A=l?se.createElement("div",{className:_e("".concat(r,"-footer"),C==null?void 0:C.footer),style:re({},E==null?void 0:E.footer)},l):null,I=s?se.createElement("div",{className:_e("".concat(r,"-header"),C==null?void 0:C.header),style:re({},E==null?void 0:E.header)},se.createElement("div",{className:"".concat(r,"-title"),id:a},s)):null,N=_.useMemo(function(){return Mt(c)==="object"&&c!==null?c:c?{closeIcon:u??se.createElement("span",{className:"".concat(r,"-close-x")})}:{}},[c,u,r]),F=qs(N,!0),O=Mt(c)==="object"&&c.disabled,V=c?se.createElement("button",ut({type:"button",onClick:d,"aria-label":"Close"},F,{className:"".concat(r,"-close"),disabled:O}),N.closeIcon):null,U=se.createElement("div",{className:_e("".concat(r,"-content"),C==null?void 0:C.content),style:E==null?void 0:E.content},V,I,se.createElement("div",ut({className:_e("".concat(r,"-body"),C==null?void 0:C.body),style:re(re({},h),E==null?void 0:E.body)},p),f),A);return se.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":s?a:null,"aria-modal":"true",ref:R,style:re(re({},o),L),className:_e(r,i),onMouseDown:y,onMouseUp:v},se.createElement("div",{ref:P,tabIndex:0,style:K7},se.createElement(q7,{shouldUpdate:x||b},g?g(U):U)),se.createElement("div",{tabIndex:0,ref:D,style:X7}))}),fB=_.forwardRef(function(n,e){var r=n.prefixCls,i=n.title,o=n.style,s=n.className,a=n.visible,l=n.forceRender,c=n.destroyOnClose,u=n.motionName,d=n.ariaId,f=n.onVisibleChanged,h=n.mousePosition,p=_.useRef(),g=_.useState(),y=Ce(g,2),v=y[0],m=y[1],x={};v&&(x.transformOrigin=v);function b(){var S=W7(p.current);m(h&&(h.x||h.y)?"".concat(h.x-S.left,"px ").concat(h.y-S.top,"px"):"")}return _.createElement(wu,{visible:a,onVisibleChanged:f,onAppearPrepare:b,onEnterPrepare:b,forceRender:l,motionName:u,removeOnLeave:c,ref:p},function(S,w){var C=S.className,E=S.style;return _.createElement(dB,ut({},n,{ref:e,title:i,ariaId:d,prefixCls:r,holderRef:w,style:re(re(re({},E),o),x),className:_e(s,C)}))})});fB.displayName="Content";var Y7=function(e){var r=e.prefixCls,i=e.style,o=e.visible,s=e.maskProps,a=e.motionName,l=e.className;return _.createElement(wu,{key:"mask",visible:o,motionName:a,leavedClassName:"".concat(r,"-mask-hidden")},function(c,u){var d=c.className,f=c.style;return _.createElement("div",ut({ref:u,style:re(re({},f),i),className:_e("".concat(r,"-mask"),d,l)},s))})},Q7=function(e){var r=e.prefixCls,i=r===void 0?"rc-dialog":r,o=e.zIndex,s=e.visible,a=s===void 0?!1:s,l=e.keyboard,c=l===void 0?!0:l,u=e.focusTriggerAfterClose,d=u===void 0?!0:u,f=e.wrapStyle,h=e.wrapClassName,p=e.wrapProps,g=e.onClose,y=e.afterOpenChange,v=e.afterClose,m=e.transitionName,x=e.animation,b=e.closable,S=b===void 0?!0:b,w=e.mask,C=w===void 0?!0:w,E=e.maskTransitionName,M=e.maskAnimation,T=e.maskClosable,R=T===void 0?!0:T,P=e.maskStyle,D=e.maskProps,L=e.rootClassName,A=e.classNames,I=e.styles,N=_.useRef(),F=_.useRef(),O=_.useRef(),V=_.useState(a),U=Ce(V,2),k=U[0],W=U[1],J=uB();function z(){ww(F.current,document.activeElement)||(N.current=document.activeElement)}function j(){if(!ww(F.current,document.activeElement)){var ve;(ve=O.current)===null||ve===void 0||ve.focus()}}function X(ve){if(ve)j();else{if(W(!1),C&&N.current&&d){try{N.current.focus({preventScroll:!0})}catch{}N.current=null}k&&(v==null||v())}y==null||y(ve)}function Q(ve){g==null||g(ve)}var ne=_.useRef(!1),ye=_.useRef(),me=function(){clearTimeout(ye.current),ne.current=!0},fe=function(){ye.current=setTimeout(function(){ne.current=!1})},le=null;R&&(le=function(be){ne.current?ne.current=!1:F.current===be.target&&Q(be)});function ge(ve){if(c&&ve.keyCode===He.ESC){ve.stopPropagation(),Q(ve);return}a&&ve.keyCode===He.TAB&&O.current.changeActive(!ve.shiftKey)}_.useEffect(function(){a&&(W(!0),z())},[a]),_.useEffect(function(){return function(){clearTimeout(ye.current)}},[]);var q=re(re(re({zIndex:o},f),I==null?void 0:I.wrapper),{},{display:k?null:"none"});return _.createElement("div",ut({className:_e("".concat(i,"-root"),L)},qs(e,{data:!0})),_.createElement(Y7,{prefixCls:i,visible:C&&a,motionName:Z2(i,E,M),style:re(re({zIndex:o},P),I==null?void 0:I.mask),maskProps:D,className:A==null?void 0:A.mask}),_.createElement("div",ut({tabIndex:-1,onKeyDown:ge,className:_e("".concat(i,"-wrap"),h,A==null?void 0:A.wrapper),ref:F,onClick:le,style:q},p),_.createElement(fB,ut({},e,{onMouseDown:me,onMouseUp:fe,ref:O,closable:S,ariaId:J,prefixCls:i,visible:a&&k,onClose:Q,onVisibleChanged:X,motionName:Z2(i,m,x)}))))},hB=function(e){var r=e.visible,i=e.getContainer,o=e.forceRender,s=e.destroyOnClose,a=s===void 0?!1:s,l=e.afterClose,c=e.panelRef,u=_.useState(r),d=Ce(u,2),f=d[0],h=d[1],p=_.useMemo(function(){return{panel:c}},[c]);return _.useEffect(function(){r&&h(!0)},[r]),!o&&a&&!f?null:_.createElement(cB.Provider,{value:p},_.createElement(NT,{open:r||o||f,autoDestroy:!1,getContainer:i,autoLock:r||f},_.createElement(Q7,ut({},e,{destroyOnClose:a,afterClose:function(){l==null||l(),h(!1)}}))))};hB.displayName="Dialog";var Hc="RC_FORM_INTERNAL_HOOKS",In=function(){Yi(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},uf=_.createContext({getFieldValue:In,getFieldsValue:In,getFieldError:In,getFieldWarning:In,getFieldsError:In,isFieldsTouched:In,isFieldTouched:In,isFieldValidating:In,isFieldsValidating:In,resetFields:In,setFields:In,setFieldValue:In,setFieldsValue:In,validateFields:In,submit:In,getInternalHooks:function(){return In(),{dispatch:In,initEntityValue:In,registerField:In,useSubscribe:In,setInitialValues:In,destroyForm:In,setCallbacks:In,registerWatch:In,getFields:In,setValidateMessages:In,setPreserve:In,getInitialValue:In}}}),ay=_.createContext(null);function nC(n){return n==null?[]:Array.isArray(n)?n:[n]}function Z7(n){return n&&!!n._init}function rC(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var iC=rC();function J7(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function eq(n,e,r){if(uT())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return r&&tf(o,r.prototype),o}function ly(n){var e=typeof Map=="function"?new Map:void 0;return ly=function(i){if(i===null||!J7(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,o)}function o(){return eq(i,arguments,Wp(this).constructor)}return o.prototype=Object.create(i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),tf(o,i)},ly(n)}var tq=/%[sdj%]/g,nq=function(){};function oC(n){if(!n||!n.length)return null;var e={};return n.forEach(function(r){var i=r.field;e[i]=e[i]||[],e[i].push(r)}),e}function vo(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var o=0,s=r.length;if(typeof n=="function")return n.apply(null,r);if(typeof n=="string"){var a=n.replace(tq,function(l){if(l==="%%")return"%";if(o>=s)return l;switch(l){case"%s":return String(r[o++]);case"%d":return Number(r[o++]);case"%j":try{return JSON.stringify(r[o++])}catch{return"[Circular]"}break;default:return l}});return a}return n}function rq(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function zr(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||rq(e)&&typeof n=="string"&&!n)}function iq(n,e,r){var i=[],o=0,s=n.length;function a(l){i.push.apply(i,st(l||[])),o++,o===s&&r(i)}n.forEach(function(l){e(l,a)})}function eN(n,e,r){var i=0,o=n.length;function s(a){if(a&&a.length){r(a);return}var l=i;i=i+1,l<o?e(n[l],s):r([])}s([])}function oq(n){var e=[];return Object.keys(n).forEach(function(r){e.push.apply(e,st(n[r]||[]))}),e}var tN=function(n){sc(r,n);var e=ac(r);function r(i,o){var s;return Gr(this,r),s=e.call(this,"Async Validation Error"),ee(nn(s),"errors",void 0),ee(nn(s),"fields",void 0),s.errors=i,s.fields=o,s}return Hr(r)}(ly(Error));function sq(n,e,r,i,o){if(e.first){var s=new Promise(function(h,p){var g=function(m){return i(m),m.length?p(new tN(m,oC(m))):h(o)},y=oq(n);eN(y,r,g)});return s.catch(function(h){return h}),s}var a=e.firstFields===!0?Object.keys(n):e.firstFields||[],l=Object.keys(n),c=l.length,u=0,d=[],f=new Promise(function(h,p){var g=function(v){if(d.push.apply(d,v),u++,u===c)return i(d),d.length?p(new tN(d,oC(d))):h(o)};l.length||(i(d),h(o)),l.forEach(function(y){var v=n[y];a.indexOf(y)!==-1?eN(v,r,g):iq(v,r,g)})});return f.catch(function(h){return h}),f}function aq(n){return!!(n&&n.message!==void 0)}function lq(n,e){for(var r=n,i=0;i<e.length;i++){if(r==null)return r;r=r[e[i]]}return r}function nN(n,e){return function(r){var i;return n.fullFields?i=lq(e,n.fullFields):i=e[r.field||n.fullField],aq(r)?(r.field=r.field||n.fullField,r.fieldValue=i,r):{message:typeof r=="function"?r():r,fieldValue:i,field:r.field||n.fullField}}}function rN(n,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];Mt(i)==="object"&&Mt(n[r])==="object"?n[r]=re(re({},n[r]),i):n[r]=i}}return n}var Fu="enum",cq=function(e,r,i,o,s){e[Fu]=Array.isArray(e[Fu])?e[Fu]:[],e[Fu].indexOf(r)===-1&&o.push(vo(s.messages[Fu],e.fullField,e[Fu].join(", ")))},uq=function(e,r,i,o,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||o.push(vo(s.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(r)||o.push(vo(s.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},dq=function(e,r,i,o,s){var a=typeof e.len=="number",l=typeof e.min=="number",c=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=r,f=null,h=typeof r=="number",p=typeof r=="string",g=Array.isArray(r);if(h?f="number":p?f="string":g&&(f="array"),!f)return!1;g&&(d=r.length),p&&(d=r.replace(u,"_").length),a?d!==e.len&&o.push(vo(s.messages[f].len,e.fullField,e.len)):l&&!c&&d<e.min?o.push(vo(s.messages[f].min,e.fullField,e.min)):c&&!l&&d>e.max?o.push(vo(s.messages[f].max,e.fullField,e.max)):l&&c&&(d<e.min||d>e.max)&&o.push(vo(s.messages[f].range,e.fullField,e.min,e.max))},pB=function(e,r,i,o,s,a){e.required&&(!i.hasOwnProperty(e.field)||zr(r,a||e.type))&&o.push(vo(s.messages.required,e.fullField))},jg;const fq=function(){if(jg)return jg;var n="[a-fA-F\\d:]",e=function(C){return C&&C.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",o=["(?:".concat(i,":){7}(?:").concat(i,"|:)"),"(?:".concat(i,":){6}(?:").concat(r,"|:").concat(i,"|:)"),"(?:".concat(i,":){5}(?::").concat(r,"|(?::").concat(i,"){1,2}|:)"),"(?:".concat(i,":){4}(?:(?::").concat(i,"){0,1}:").concat(r,"|(?::").concat(i,"){1,3}|:)"),"(?:".concat(i,":){3}(?:(?::").concat(i,"){0,2}:").concat(r,"|(?::").concat(i,"){1,4}|:)"),"(?:".concat(i,":){2}(?:(?::").concat(i,"){0,3}:").concat(r,"|(?::").concat(i,"){1,5}|:)"),"(?:".concat(i,":){1}(?:(?::").concat(i,"){0,4}:").concat(r,"|(?::").concat(i,"){1,6}|:)"),"(?::(?:(?::".concat(i,"){0,5}:").concat(r,"|(?::").concat(i,"){1,7}|:))")],s="(?:%[0-9a-zA-Z]{1,})?",a="(?:".concat(o.join("|"),")").concat(s),l=new RegExp("(?:^".concat(r,"$)|(?:^").concat(a,"$)")),c=new RegExp("^".concat(r,"$")),u=new RegExp("^".concat(a,"$")),d=function(C){return C&&C.exact?l:new RegExp("(?:".concat(e(C)).concat(r).concat(e(C),")|(?:").concat(e(C)).concat(a).concat(e(C),")"),"g")};d.v4=function(w){return w&&w.exact?c:new RegExp("".concat(e(w)).concat(r).concat(e(w)),"g")},d.v6=function(w){return w&&w.exact?u:new RegExp("".concat(e(w)).concat(a).concat(e(w)),"g")};var f="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",p=d.v4().source,g=d.v6().source,y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",v="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",x="(?::\\d{2,5})?",b='(?:[/?#][^\\s"]*)?',S="(?:".concat(f,"|www\\.)").concat(h,"(?:localhost|").concat(p,"|").concat(g,"|").concat(y).concat(v).concat(m,")").concat(x).concat(b);return jg=new RegExp("(?:^".concat(S,"$)"),"i"),jg};var iN={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Yh={integer:function(e){return Yh.number(e)&&parseInt(e,10)===e},float:function(e){return Yh.number(e)&&!Yh.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Mt(e)==="object"&&!Yh.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(iN.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(fq())},hex:function(e){return typeof e=="string"&&!!e.match(iN.hex)}},hq=function(e,r,i,o,s){if(e.required&&r===void 0){pB(e,r,i,o,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;a.indexOf(l)>-1?Yh[l](r)||o.push(vo(s.messages.types[l],e.fullField,e.type)):l&&Mt(r)!==e.type&&o.push(vo(s.messages.types[l],e.fullField,e.type))},pq=function(e,r,i,o,s){(/^\s+$/.test(r)||r==="")&&o.push(vo(s.messages.whitespace,e.fullField))};const cn={required:pB,whitespace:pq,type:hq,range:dq,enum:cq,pattern:uq};var mq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s)}i(a)},gq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(r==null&&!e.required)return i();cn.required(e,r,o,a,s,"array"),r!=null&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},vq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},yq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r,"date")&&!e.required)return i();if(cn.required(e,r,o,a,s),!zr(r,"date")){var c;r instanceof Date?c=r:c=new Date(r),cn.type(e,c,o,a,s),c&&cn.range(e,c.getTime(),o,a,s)}}i(a)},xq="enum",_q=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn[xq](e,r,o,a,s)}i(a)},bq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},Sq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},wq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},Cq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(r===""&&(r=void 0),zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},Eq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},Tq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r,"string")&&!e.required)return i();cn.required(e,r,o,a,s),zr(r,"string")||cn.pattern(e,r,o,a,s)}i(a)},Mq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),zr(r)||cn.type(e,r,o,a,s)}i(a)},Rq=function(e,r,i,o,s){var a=[],l=Array.isArray(r)?"array":Mt(r);cn.required(e,r,o,a,s,l),i(a)},Aq=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r,"string")&&!e.required)return i();cn.required(e,r,o,a,s,"string"),zr(r,"string")||(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s),cn.pattern(e,r,o,a,s),e.whitespace===!0&&cn.whitespace(e,r,o,a,s))}i(a)},Sb=function(e,r,i,o,s){var a=e.type,l=[],c=e.required||!e.required&&o.hasOwnProperty(e.field);if(c){if(zr(r,a)&&!e.required)return i();cn.required(e,r,o,l,s,a),zr(r,a)||cn.type(e,r,o,l,s)}i(l)};const vp={string:Aq,method:wq,number:Cq,boolean:vq,regexp:Mq,integer:Sq,float:bq,array:gq,object:Eq,enum:_q,pattern:Tq,date:yq,url:Sb,hex:Sb,email:Sb,required:Rq,any:mq};var Xm=function(){function n(e){Gr(this,n),ee(this,"rules",null),ee(this,"_messages",iC),this.define(e)}return Hr(n,[{key:"define",value:function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(Mt(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(o){var s=r[o];i.rules[o]=Array.isArray(s)?s:[s]})}},{key:"messages",value:function(r){return r&&(this._messages=rN(rC(),r)),this._messages}},{key:"validate",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=r,l=o,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(g){var y=[],v={};function m(b){if(Array.isArray(b)){var S;y=(S=y).concat.apply(S,st(b))}else y.push(b)}for(var x=0;x<g.length;x++)m(g[x]);y.length?(v=oC(y),c(y,v)):c(null,a)}if(l.messages){var d=this.messages();d===iC&&(d=rC()),rN(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(g){var y=i.rules[g],v=a[g];y.forEach(function(m){var x=m;typeof x.transform=="function"&&(a===r&&(a=re({},a)),v=a[g]=x.transform(v),v!=null&&(x.type=x.type||(Array.isArray(v)?"array":Mt(v)))),typeof x=="function"?x={validator:x}:x=re({},x),x.validator=i.getValidationMethod(x),x.validator&&(x.field=g,x.fullField=x.fullField||g,x.type=i.getType(x),f[g]=f[g]||[],f[g].push({rule:x,value:v,source:a,field:g}))})});var p={};return sq(f,l,function(g,y){var v=g.rule,m=(v.type==="object"||v.type==="array")&&(Mt(v.fields)==="object"||Mt(v.defaultField)==="object");m=m&&(v.required||!v.required&&g.value),v.field=g.field;function x(E,M){return re(re({},M),{},{fullField:"".concat(v.fullField,".").concat(E),fullFields:v.fullFields?[].concat(st(v.fullFields),[E]):[E]})}function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=Array.isArray(E)?E:[E];!l.suppressWarning&&M.length&&n.warning("async-validator:",M),M.length&&v.message!==void 0&&(M=[].concat(v.message));var T=M.map(nN(v,a));if(l.first&&T.length)return p[v.field]=1,y(T);if(!m)y(T);else{if(v.required&&!g.value)return v.message!==void 0?T=[].concat(v.message).map(nN(v,a)):l.error&&(T=[l.error(v,vo(l.messages.required,v.field))]),y(T);var R={};v.defaultField&&Object.keys(g.value).map(function(L){R[L]=v.defaultField}),R=re(re({},R),g.rule.fields);var P={};Object.keys(R).forEach(function(L){var A=R[L],I=Array.isArray(A)?A:[A];P[L]=I.map(x.bind(null,L))});var D=new n(P);D.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),D.validate(g.value,g.rule.options||l,function(L){var A=[];T&&T.length&&A.push.apply(A,st(T)),L&&L.length&&A.push.apply(A,st(L)),y(A.length?A:null)})}}var S;if(v.asyncValidator)S=v.asyncValidator(v,g.value,b,g.source,l);else if(v.validator){try{S=v.validator(v,g.value,b,g.source,l)}catch(E){var w,C;(w=(C=console).error)===null||w===void 0||w.call(C,E),l.suppressValidatorError||setTimeout(function(){throw E},0),b(E.message)}S===!0?b():S===!1?b(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||"".concat(v.fullField||v.field," fails")):S instanceof Array?b(S):S instanceof Error&&b(S.message)}S&&S.then&&S.then(function(){return b()},function(E){return b(E)})},function(g){u(g)},a)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!vp.hasOwnProperty(r.type))throw new Error(vo("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),o=i.indexOf("message");return o!==-1&&i.splice(o,1),i.length===1&&i[0]==="required"?vp.required:vp[this.getType(r)]||void 0}}]),n}();ee(Xm,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");vp[e]=r});ee(Xm,"warning",nq);ee(Xm,"messages",iC);ee(Xm,"validators",vp);var ro="'${name}' is not a valid ${type}",mB={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ro,method:ro,array:ro,object:ro,number:ro,date:ro,boolean:ro,integer:ro,float:ro,regexp:ro,email:ro,url:ro,hex:ro},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},oN=Xm;function Nq(n,e){return n.replace(/\\?\$\{\w+\}/g,function(r){if(r.startsWith("\\"))return r.slice(1);var i=r.slice(2,-1);return e[i]})}var sN="CODE_LOGIC_ERROR";function sC(n,e,r,i,o){return aC.apply(this,arguments)}function aC(){return aC=Cu(Ai().mark(function n(e,r,i,o,s){var a,l,c,u,d,f,h,p,g;return Ai().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a=re({},i),delete a.ruleIndex,oN.warning=function(){},a.validator&&(l=a.validator,a.validator=function(){try{return l.apply(void 0,arguments)}catch(m){return console.error(m),Promise.reject(sN)}}),c=null,a&&a.type==="array"&&a.defaultField&&(c=a.defaultField,delete a.defaultField),u=new oN(ee({},e,[a])),d=bd(mB,o.validateMessages),u.messages(d),f=[],v.prev=10,v.next=13,Promise.resolve(u.validate(ee({},e,r),re({},o)));case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(10),v.t0.errors&&(f=v.t0.errors.map(function(m,x){var b=m.message,S=b===sN?d.default:b;return _.isValidElement(S)?_.cloneElement(S,{key:"error_".concat(x)}):S}));case 18:if(!(!f.length&&c)){v.next=23;break}return v.next=21,Promise.all(r.map(function(m,x){return sC("".concat(e,".").concat(x),m,c,o,s)}));case 21:return h=v.sent,v.abrupt("return",h.reduce(function(m,x){return[].concat(st(m),st(x))},[]));case 23:return p=re(re({},i),{},{name:e,enum:(i.enum||[]).join(", ")},s),g=f.map(function(m){return typeof m=="string"?Nq(m,p):m}),v.abrupt("return",g);case 26:case"end":return v.stop()}},n,null,[[10,15]])})),aC.apply(this,arguments)}function Pq(n,e,r,i,o,s){var a=n.join("."),l=r.map(function(d,f){var h=d.validator,p=re(re({},d),{},{ruleIndex:f});return h&&(p.validator=function(g,y,v){var m=!1,x=function(){for(var w=arguments.length,C=new Array(w),E=0;E<w;E++)C[E]=arguments[E];Promise.resolve().then(function(){Yi(!m,"Your validator function has already return a promise. `callback` will be ignored."),m||v.apply(void 0,C)})},b=h(g,y,x);m=b&&typeof b.then=="function"&&typeof b.catch=="function",Yi(m,"`callback` is deprecated. Please return a promise instead."),m&&b.then(function(){v()}).catch(function(S){v(S||" ")})}),p}).sort(function(d,f){var h=d.warningOnly,p=d.ruleIndex,g=f.warningOnly,y=f.ruleIndex;return!!h==!!g?p-y:h?1:-1}),c;if(o===!0)c=new Promise(function(){var d=Cu(Ai().mark(function f(h,p){var g,y,v;return Ai().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:g=0;case 1:if(!(g<l.length)){x.next=12;break}return y=l[g],x.next=5,sC(a,e,y,i,s);case 5:if(v=x.sent,!v.length){x.next=9;break}return p([{errors:v,rule:y}]),x.abrupt("return");case 9:g+=1,x.next=1;break;case 12:h([]);case 13:case"end":return x.stop()}},f)}));return function(f,h){return d.apply(this,arguments)}}());else{var u=l.map(function(d){return sC(a,e,d,i,s).then(function(f){return{errors:f,rule:d}})});c=(o?Iq(u):Oq(u)).then(function(d){return Promise.reject(d)})}return c.catch(function(d){return d}),c}function Oq(n){return lC.apply(this,arguments)}function lC(){return lC=Cu(Ai().mark(function n(e){return Ai().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(e).then(function(o){var s,a=(s=[]).concat.apply(s,st(o));return a}));case 1:case"end":return i.stop()}},n)})),lC.apply(this,arguments)}function Iq(n){return cC.apply(this,arguments)}function cC(){return cC=Cu(Ai().mark(function n(e){var r;return Ai().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=0,o.abrupt("return",new Promise(function(s){e.forEach(function(a){a.then(function(l){l.errors.length&&s([l]),r+=1,r===e.length&&s([])})})}));case 2:case"end":return o.stop()}},n)})),cC.apply(this,arguments)}function dr(n){return nC(n)}function aN(n,e){var r={};return e.forEach(function(i){var o=Bs(n,i);r=ss(r,i,o)}),r}function Ud(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n&&n.some(function(i){return gB(e,i,r)})}function gB(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!n||!e||!r&&n.length!==e.length?!1:e.every(function(i,o){return n[o]===i})}function Dq(n,e){if(n===e)return!0;if(!n&&e||n&&!e||!n||!e||Mt(n)!=="object"||Mt(e)!=="object")return!1;var r=Object.keys(n),i=Object.keys(e),o=new Set([].concat(r,i));return st(o).every(function(s){var a=n[s],l=e[s];return typeof a=="function"&&typeof l=="function"?!0:a===l})}function Lq(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&Mt(e.target)==="object"&&n in e.target?e.target[n]:e}function lN(n,e,r){var i=n.length;if(e<0||e>=i||r<0||r>=i)return n;var o=n[e],s=e-r;return s>0?[].concat(st(n.slice(0,r)),[o],st(n.slice(r,e)),st(n.slice(e+1,i))):s<0?[].concat(st(n.slice(0,e)),st(n.slice(e+1,r+1)),[o],st(n.slice(r+1,i))):n}var Fq=["name"],To=[];function wb(n,e,r,i,o,s){return typeof n=="function"?n(e,r,"source"in s?{source:s.source}:{}):i!==o}var PT=function(n){sc(r,n);var e=ac(r);function r(i){var o;if(Gr(this,r),o=e.call(this,i),ee(nn(o),"state",{resetCount:0}),ee(nn(o),"cancelRegisterFunc",null),ee(nn(o),"mounted",!1),ee(nn(o),"touched",!1),ee(nn(o),"dirty",!1),ee(nn(o),"validatePromise",void 0),ee(nn(o),"prevValidating",void 0),ee(nn(o),"errors",To),ee(nn(o),"warnings",To),ee(nn(o),"cancelRegister",function(){var c=o.props,u=c.preserve,d=c.isListField,f=c.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(d,u,dr(f)),o.cancelRegisterFunc=null}),ee(nn(o),"getNamePath",function(){var c=o.props,u=c.name,d=c.fieldContext,f=d.prefixName,h=f===void 0?[]:f;return u!==void 0?[].concat(st(h),st(u)):[]}),ee(nn(o),"getRules",function(){var c=o.props,u=c.rules,d=u===void 0?[]:u,f=c.fieldContext;return d.map(function(h){return typeof h=="function"?h(f):h})}),ee(nn(o),"refresh",function(){o.mounted&&o.setState(function(c){var u=c.resetCount;return{resetCount:u+1}})}),ee(nn(o),"metaCache",null),ee(nn(o),"triggerMetaEvent",function(c){var u=o.props.onMetaChange;if(u){var d=re(re({},o.getMeta()),{},{destroy:c});Ew(o.metaCache,d)||u(d),o.metaCache=d}else o.metaCache=null}),ee(nn(o),"onStoreChange",function(c,u,d){var f=o.props,h=f.shouldUpdate,p=f.dependencies,g=p===void 0?[]:p,y=f.onReset,v=d.store,m=o.getNamePath(),x=o.getValue(c),b=o.getValue(v),S=u&&Ud(u,m);switch(d.type==="valueUpdate"&&d.source==="external"&&!Ew(x,b)&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=To,o.warnings=To,o.triggerMetaEvent()),d.type){case"reset":if(!u||S){o.touched=!1,o.dirty=!1,o.validatePromise=void 0,o.errors=To,o.warnings=To,o.triggerMetaEvent(),y==null||y(),o.refresh();return}break;case"remove":{if(h&&wb(h,c,v,x,b,d)){o.reRender();return}break}case"setField":{var w=d.data;if(S){"touched"in w&&(o.touched=w.touched),"validating"in w&&!("originRCField"in w)&&(o.validatePromise=w.validating?Promise.resolve([]):null),"errors"in w&&(o.errors=w.errors||To),"warnings"in w&&(o.warnings=w.warnings||To),o.dirty=!0,o.triggerMetaEvent(),o.reRender();return}else if("value"in w&&Ud(u,m,!0)){o.reRender();return}if(h&&!m.length&&wb(h,c,v,x,b,d)){o.reRender();return}break}case"dependenciesUpdate":{var C=g.map(dr);if(C.some(function(E){return Ud(d.relatedFields,E)})){o.reRender();return}break}default:if(S||(!g.length||m.length||h)&&wb(h,c,v,x,b,d)){o.reRender();return}break}h===!0&&o.reRender()}),ee(nn(o),"validateRules",function(c){var u=o.getNamePath(),d=o.getValue(),f=c||{},h=f.triggerName,p=f.validateOnly,g=p===void 0?!1:p,y=Promise.resolve().then(Cu(Ai().mark(function v(){var m,x,b,S,w,C,E;return Ai().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(o.mounted){T.next=2;break}return T.abrupt("return",[]);case 2:if(m=o.props,x=m.validateFirst,b=x===void 0?!1:x,S=m.messageVariables,w=m.validateDebounce,C=o.getRules(),h&&(C=C.filter(function(R){return R}).filter(function(R){var P=R.validateTrigger;if(!P)return!0;var D=nC(P);return D.includes(h)})),!(w&&h)){T.next=10;break}return T.next=8,new Promise(function(R){setTimeout(R,w)});case 8:if(o.validatePromise===y){T.next=10;break}return T.abrupt("return",[]);case 10:return E=Pq(u,d,C,c,b,S),E.catch(function(R){return R}).then(function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:To;if(o.validatePromise===y){var P;o.validatePromise=null;var D=[],L=[];(P=R.forEach)===null||P===void 0||P.call(R,function(A){var I=A.rule.warningOnly,N=A.errors,F=N===void 0?To:N;I?L.push.apply(L,st(F)):D.push.apply(D,st(F))}),o.errors=D,o.warnings=L,o.triggerMetaEvent(),o.reRender()}}),T.abrupt("return",E);case 13:case"end":return T.stop()}},v)})));return g||(o.validatePromise=y,o.dirty=!0,o.errors=To,o.warnings=To,o.triggerMetaEvent(),o.reRender()),y}),ee(nn(o),"isFieldValidating",function(){return!!o.validatePromise}),ee(nn(o),"isFieldTouched",function(){return o.touched}),ee(nn(o),"isFieldDirty",function(){if(o.dirty||o.props.initialValue!==void 0)return!0;var c=o.props.fieldContext,u=c.getInternalHooks(Hc),d=u.getInitialValue;return d(o.getNamePath())!==void 0}),ee(nn(o),"getErrors",function(){return o.errors}),ee(nn(o),"getWarnings",function(){return o.warnings}),ee(nn(o),"isListField",function(){return o.props.isListField}),ee(nn(o),"isList",function(){return o.props.isList}),ee(nn(o),"isPreserve",function(){return o.props.preserve}),ee(nn(o),"getMeta",function(){o.prevValidating=o.isFieldValidating();var c={touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,warnings:o.warnings,name:o.getNamePath(),validated:o.validatePromise===null};return c}),ee(nn(o),"getOnlyChild",function(c){if(typeof c=="function"){var u=o.getMeta();return re(re({},o.getOnlyChild(c(o.getControlled(),u,o.props.fieldContext))),{},{isFunction:!0})}var d=Ga(c);return d.length!==1||!_.isValidElement(d[0])?{child:d,isFunction:!1}:{child:d[0],isFunction:!1}}),ee(nn(o),"getValue",function(c){var u=o.props.fieldContext.getFieldsValue,d=o.getNamePath();return Bs(c||u(!0),d)}),ee(nn(o),"getControlled",function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.props,d=u.name,f=u.trigger,h=u.validateTrigger,p=u.getValueFromEvent,g=u.normalize,y=u.valuePropName,v=u.getValueProps,m=u.fieldContext,x=h!==void 0?h:m.validateTrigger,b=o.getNamePath(),S=m.getInternalHooks,w=m.getFieldsValue,C=S(Hc),E=C.dispatch,M=o.getValue(),T=v||function(A){return ee({},y,A)},R=c[f],P=d!==void 0?T(M):{},D=re(re({},c),P);D[f]=function(){o.touched=!0,o.dirty=!0,o.triggerMetaEvent();for(var A,I=arguments.length,N=new Array(I),F=0;F<I;F++)N[F]=arguments[F];p?A=p.apply(void 0,N):A=Lq.apply(void 0,[y].concat(N)),g&&(A=g(A,M,w(!0))),A!==M&&E({type:"updateValue",namePath:b,value:A}),R&&R.apply(void 0,N)};var L=nC(x||[]);return L.forEach(function(A){var I=D[A];D[A]=function(){I&&I.apply(void 0,arguments);var N=o.props.rules;N&&N.length&&E({type:"validateField",namePath:b,triggerName:A})}}),D}),i.fieldContext){var s=i.fieldContext.getInternalHooks,a=s(Hc),l=a.initEntityValue;l(nn(o))}return o}return Hr(r,[{key:"componentDidMount",value:function(){var o=this.props,s=o.shouldUpdate,a=o.fieldContext;if(this.mounted=!0,a){var l=a.getInternalHooks,c=l(Hc),u=c.registerField;this.cancelRegisterFunc=u(this)}s===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var o=this.state.resetCount,s=this.props.children,a=this.getOnlyChild(s),l=a.child,c=a.isFunction,u;return c?u=l:_.isValidElement(l)?u=_.cloneElement(l,this.getControlled(l.props)):(Yi(!l,"`children` of Field is not validate ReactElement."),u=l),_.createElement(_.Fragment,{key:o},u)}}]),r}(_.Component);ee(PT,"contextType",uf);ee(PT,"defaultProps",{trigger:"onChange",valuePropName:"value"});function vB(n){var e,r=n.name,i=Cn(n,Fq),o=_.useContext(uf),s=_.useContext(ay),a=r!==void 0?dr(r):void 0,l=(e=i.isListField)!==null&&e!==void 0?e:!!s,c="keep";return l||(c="_".concat((a||[]).join("_"))),_.createElement(PT,ut({key:c,name:a,isListField:l},i,{fieldContext:o}))}function Uq(n){var e=n.name,r=n.initialValue,i=n.children,o=n.rules,s=n.validateTrigger,a=n.isListField,l=_.useContext(uf),c=_.useContext(ay),u=_.useRef({keys:[],id:0}),d=u.current,f=_.useMemo(function(){var y=dr(l.prefixName)||[];return[].concat(st(y),st(dr(e)))},[l.prefixName,e]),h=_.useMemo(function(){return re(re({},l),{},{prefixName:f})},[l,f]),p=_.useMemo(function(){return{getKey:function(v){var m=f.length,x=v[m];return[d.keys[x],v.slice(m+1)]}}},[f]);if(typeof i!="function")return Yi(!1,"Form.List only accepts function as children."),null;var g=function(v,m,x){var b=x.source;return b==="internal"?!1:v!==m};return _.createElement(ay.Provider,{value:p},_.createElement(uf.Provider,{value:h},_.createElement(vB,{name:[],shouldUpdate:g,rules:o,validateTrigger:s,initialValue:r,isList:!0,isListField:a??!!c},function(y,v){var m=y.value,x=m===void 0?[]:m,b=y.onChange,S=l.getFieldValue,w=function(){var T=S(f||[]);return T||[]},C={add:function(T,R){var P=w();R>=0&&R<=P.length?(d.keys=[].concat(st(d.keys.slice(0,R)),[d.id],st(d.keys.slice(R))),b([].concat(st(P.slice(0,R)),[T],st(P.slice(R))))):(d.keys=[].concat(st(d.keys),[d.id]),b([].concat(st(P),[T]))),d.id+=1},remove:function(T){var R=w(),P=new Set(Array.isArray(T)?T:[T]);P.size<=0||(d.keys=d.keys.filter(function(D,L){return!P.has(L)}),b(R.filter(function(D,L){return!P.has(L)})))},move:function(T,R){if(T!==R){var P=w();T<0||T>=P.length||R<0||R>=P.length||(d.keys=lN(d.keys,T,R),b(lN(P,T,R)))}}},E=x||[];return Array.isArray(E)||(E=[]),i(E.map(function(M,T){var R=d.keys[T];return R===void 0&&(d.keys[T]=d.id,R=d.keys[T],d.id+=1),{name:T,key:R,isListField:!0}}),C,v)})))}function Bq(n){var e=!1,r=n.length,i=[];return n.length?new Promise(function(o,s){n.forEach(function(a,l){a.catch(function(c){return e=!0,c}).then(function(c){r-=1,i[l]=c,!(r>0)&&(e&&s(i),o(i))})})}):Promise.resolve([])}var yB="__@field_split__";function Cb(n){return n.map(function(e){return"".concat(Mt(e),":").concat(e)}).join(yB)}var Uu=function(){function n(){Gr(this,n),ee(this,"kvs",new Map)}return Hr(n,[{key:"set",value:function(r,i){this.kvs.set(Cb(r),i)}},{key:"get",value:function(r){return this.kvs.get(Cb(r))}},{key:"update",value:function(r,i){var o=this.get(r),s=i(o);s?this.set(r,s):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(Cb(r))}},{key:"map",value:function(r){return st(this.kvs.entries()).map(function(i){var o=Ce(i,2),s=o[0],a=o[1],l=s.split(yB);return r({key:l.map(function(c){var u=c.match(/^([^:]*):(.*)$/),d=Ce(u,3),f=d[1],h=d[2];return f==="number"?Number(h):h}),value:a})})}},{key:"toJSON",value:function(){var r={};return this.map(function(i){var o=i.key,s=i.value;return r[o.join(".")]=s,null}),r}}]),n}(),$q=["name"],zq=Hr(function n(e){var r=this;Gr(this,n),ee(this,"formHooked",!1),ee(this,"forceRootUpdate",void 0),ee(this,"subscribable",!0),ee(this,"store",{}),ee(this,"fieldEntities",[]),ee(this,"initialValues",{}),ee(this,"callbacks",{}),ee(this,"validateMessages",null),ee(this,"preserve",null),ee(this,"lastValidatePromise",null),ee(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),ee(this,"getInternalHooks",function(i){return i===Hc?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Yi(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),ee(this,"useSubscribe",function(i){r.subscribable=i}),ee(this,"prevWithoutPreserves",null),ee(this,"setInitialValues",function(i,o){if(r.initialValues=i||{},o){var s,a=bd(i,r.store);(s=r.prevWithoutPreserves)===null||s===void 0||s.map(function(l){var c=l.key;a=ss(a,c,Bs(i,c))}),r.prevWithoutPreserves=null,r.updateStore(a)}}),ee(this,"destroyForm",function(i){if(i)r.updateStore({});else{var o=new Uu;r.getFieldEntities(!0).forEach(function(s){r.isMergedPreserve(s.isPreserve())||o.set(s.getNamePath(),!0)}),r.prevWithoutPreserves=o}}),ee(this,"getInitialValue",function(i){var o=Bs(r.initialValues,i);return i.length?bd(o):o}),ee(this,"setCallbacks",function(i){r.callbacks=i}),ee(this,"setValidateMessages",function(i){r.validateMessages=i}),ee(this,"setPreserve",function(i){r.preserve=i}),ee(this,"watchList",[]),ee(this,"registerWatch",function(i){return r.watchList.push(i),function(){r.watchList=r.watchList.filter(function(o){return o!==i})}}),ee(this,"notifyWatch",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var o=r.getFieldsValue(),s=r.getFieldsValue(!0);r.watchList.forEach(function(a){a(o,s,i)})}}),ee(this,"timeoutId",null),ee(this,"warningUnhooked",function(){}),ee(this,"updateStore",function(i){r.store=i}),ee(this,"getFieldEntities",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?r.fieldEntities.filter(function(o){return o.getNamePath().length}):r.fieldEntities}),ee(this,"getFieldsMap",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=new Uu;return r.getFieldEntities(i).forEach(function(s){var a=s.getNamePath();o.set(a,s)}),o}),ee(this,"getFieldEntitiesForNamePathList",function(i){if(!i)return r.getFieldEntities(!0);var o=r.getFieldsMap(!0);return i.map(function(s){var a=dr(s);return o.get(a)||{INVALIDATE_NAME_PATH:dr(s)}})}),ee(this,"getFieldsValue",function(i,o){r.warningUnhooked();var s,a,l;if(i===!0||Array.isArray(i)?(s=i,a=o):i&&Mt(i)==="object"&&(l=i.strict,a=i.filter),s===!0&&!a)return r.store;var c=r.getFieldEntitiesForNamePathList(Array.isArray(s)?s:null),u=[];return c.forEach(function(d){var f,h,p="INVALIDATE_NAME_PATH"in d?d.INVALIDATE_NAME_PATH:d.getNamePath();if(l){var g,y;if((g=(y=d).isList)!==null&&g!==void 0&&g.call(y))return}else if(!s&&(f=(h=d).isListField)!==null&&f!==void 0&&f.call(h))return;if(!a)u.push(p);else{var v="getMeta"in d?d.getMeta():null;a(v)&&u.push(p)}}),aN(r.store,u.map(dr))}),ee(this,"getFieldValue",function(i){r.warningUnhooked();var o=dr(i);return Bs(r.store,o)}),ee(this,"getFieldsError",function(i){r.warningUnhooked();var o=r.getFieldEntitiesForNamePathList(i);return o.map(function(s,a){return s&&!("INVALIDATE_NAME_PATH"in s)?{name:s.getNamePath(),errors:s.getErrors(),warnings:s.getWarnings()}:{name:dr(i[a]),errors:[],warnings:[]}})}),ee(this,"getFieldError",function(i){r.warningUnhooked();var o=dr(i),s=r.getFieldsError([o])[0];return s.errors}),ee(this,"getFieldWarning",function(i){r.warningUnhooked();var o=dr(i),s=r.getFieldsError([o])[0];return s.warnings}),ee(this,"isFieldsTouched",function(){r.warningUnhooked();for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var a=o[0],l=o[1],c,u=!1;o.length===0?c=null:o.length===1?Array.isArray(a)?(c=a.map(dr),u=!1):(c=null,u=a):(c=a.map(dr),u=l);var d=r.getFieldEntities(!0),f=function(v){return v.isFieldTouched()};if(!c)return u?d.every(function(y){return f(y)||y.isList()}):d.some(f);var h=new Uu;c.forEach(function(y){h.set(y,[])}),d.forEach(function(y){var v=y.getNamePath();c.forEach(function(m){m.every(function(x,b){return v[b]===x})&&h.update(m,function(x){return[].concat(st(x),[y])})})});var p=function(v){return v.some(f)},g=h.map(function(y){var v=y.value;return v});return u?g.every(p):g.some(p)}),ee(this,"isFieldTouched",function(i){return r.warningUnhooked(),r.isFieldsTouched([i])}),ee(this,"isFieldsValidating",function(i){r.warningUnhooked();var o=r.getFieldEntities();if(!i)return o.some(function(a){return a.isFieldValidating()});var s=i.map(dr);return o.some(function(a){var l=a.getNamePath();return Ud(s,l)&&a.isFieldValidating()})}),ee(this,"isFieldValidating",function(i){return r.warningUnhooked(),r.isFieldsValidating([i])}),ee(this,"resetWithFieldInitialValue",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=new Uu,s=r.getFieldEntities(!0);s.forEach(function(c){var u=c.props.initialValue,d=c.getNamePath();if(u!==void 0){var f=o.get(d)||new Set;f.add({entity:c,value:u}),o.set(d,f)}});var a=function(u){u.forEach(function(d){var f=d.props.initialValue;if(f!==void 0){var h=d.getNamePath(),p=r.getInitialValue(h);if(p!==void 0)Yi(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var g=o.get(h);if(g&&g.size>1)Yi(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var y=r.getFieldValue(h),v=d.isListField();!v&&(!i.skipExist||y===void 0)&&r.updateStore(ss(r.store,h,st(g)[0].value))}}}})},l;i.entities?l=i.entities:i.namePathList?(l=[],i.namePathList.forEach(function(c){var u=o.get(c);if(u){var d;(d=l).push.apply(d,st(st(u).map(function(f){return f.entity})))}})):l=s,a(l)}),ee(this,"resetFields",function(i){r.warningUnhooked();var o=r.store;if(!i){r.updateStore(bd(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(o,null,{type:"reset"}),r.notifyWatch();return}var s=i.map(dr);s.forEach(function(a){var l=r.getInitialValue(a);r.updateStore(ss(r.store,a,l))}),r.resetWithFieldInitialValue({namePathList:s}),r.notifyObservers(o,s,{type:"reset"}),r.notifyWatch(s)}),ee(this,"setFields",function(i){r.warningUnhooked();var o=r.store,s=[];i.forEach(function(a){var l=a.name,c=Cn(a,$q),u=dr(l);s.push(u),"value"in c&&r.updateStore(ss(r.store,u,c.value)),r.notifyObservers(o,[u],{type:"setField",data:a})}),r.notifyWatch(s)}),ee(this,"getFields",function(){var i=r.getFieldEntities(!0),o=i.map(function(s){var a=s.getNamePath(),l=s.getMeta(),c=re(re({},l),{},{name:a,value:r.getFieldValue(a)});return Object.defineProperty(c,"originRCField",{value:!0}),c});return o}),ee(this,"initEntityValue",function(i){var o=i.props.initialValue;if(o!==void 0){var s=i.getNamePath(),a=Bs(r.store,s);a===void 0&&r.updateStore(ss(r.store,s,o))}}),ee(this,"isMergedPreserve",function(i){var o=i!==void 0?i:r.preserve;return o??!0}),ee(this,"registerField",function(i){r.fieldEntities.push(i);var o=i.getNamePath();if(r.notifyWatch([o]),i.props.initialValue!==void 0){var s=r.store;r.resetWithFieldInitialValue({entities:[i],skipExist:!0}),r.notifyObservers(s,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(a,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(f){return f!==i}),!r.isMergedPreserve(l)&&(!a||c.length>1)){var u=a?void 0:r.getInitialValue(o);if(o.length&&r.getFieldValue(o)!==u&&r.fieldEntities.every(function(f){return!gB(f.getNamePath(),o)})){var d=r.store;r.updateStore(ss(d,o,u,!0)),r.notifyObservers(d,[o],{type:"remove"}),r.triggerDependenciesUpdate(d,o)}}r.notifyWatch([o])}}),ee(this,"dispatch",function(i){switch(i.type){case"updateValue":{var o=i.namePath,s=i.value;r.updateValue(o,s);break}case"validateField":{var a=i.namePath,l=i.triggerName;r.validateFields([a],{triggerName:l});break}}}),ee(this,"notifyObservers",function(i,o,s){if(r.subscribable){var a=re(re({},s),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(l){var c=l.onStoreChange;c(i,o,a)})}else r.forceRootUpdate()}),ee(this,"triggerDependenciesUpdate",function(i,o){var s=r.getDependencyChildrenFields(o);return s.length&&r.validateFields(s),r.notifyObservers(i,s,{type:"dependenciesUpdate",relatedFields:[o].concat(st(s))}),s}),ee(this,"updateValue",function(i,o){var s=dr(i),a=r.store;r.updateStore(ss(r.store,s,o)),r.notifyObservers(a,[s],{type:"valueUpdate",source:"internal"}),r.notifyWatch([s]);var l=r.triggerDependenciesUpdate(a,s),c=r.callbacks.onValuesChange;if(c){var u=aN(r.store,[s]);c(u,r.getFieldsValue())}r.triggerOnFieldsChange([s].concat(st(l)))}),ee(this,"setFieldsValue",function(i){r.warningUnhooked();var o=r.store;if(i){var s=bd(r.store,i);r.updateStore(s)}r.notifyObservers(o,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),ee(this,"setFieldValue",function(i,o){r.setFields([{name:i,value:o,errors:[],warnings:[]}])}),ee(this,"getDependencyChildrenFields",function(i){var o=new Set,s=[],a=new Uu;r.getFieldEntities().forEach(function(c){var u=c.props.dependencies;(u||[]).forEach(function(d){var f=dr(d);a.update(f,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(c),h})})});var l=function c(u){var d=a.get(u)||new Set;d.forEach(function(f){if(!o.has(f)){o.add(f);var h=f.getNamePath();f.isFieldDirty()&&h.length&&(s.push(h),c(h))}})};return l(i),s}),ee(this,"triggerOnFieldsChange",function(i,o){var s=r.callbacks.onFieldsChange;if(s){var a=r.getFields();if(o){var l=new Uu;o.forEach(function(u){var d=u.name,f=u.errors;l.set(d,f)}),a.forEach(function(u){u.errors=l.get(u.name)||u.errors})}var c=a.filter(function(u){var d=u.name;return Ud(i,d)});c.length&&s(c,a)}}),ee(this,"validateFields",function(i,o){r.warningUnhooked();var s,a;Array.isArray(i)||typeof i=="string"||typeof o=="string"?(s=i,a=o):a=i;var l=!!s,c=l?s.map(dr):[],u=[],d=String(Date.now()),f=new Set,h=a||{},p=h.recursive,g=h.dirty;r.getFieldEntities(!0).forEach(function(x){if(l||c.push(x.getNamePath()),!(!x.props.rules||!x.props.rules.length)&&!(g&&!x.isFieldDirty())){var b=x.getNamePath();if(f.add(b.join(d)),!l||Ud(c,b,p)){var S=x.validateRules(re({validateMessages:re(re({},mB),r.validateMessages)},a));u.push(S.then(function(){return{name:b,errors:[],warnings:[]}}).catch(function(w){var C,E=[],M=[];return(C=w.forEach)===null||C===void 0||C.call(w,function(T){var R=T.rule.warningOnly,P=T.errors;R?M.push.apply(M,st(P)):E.push.apply(E,st(P))}),E.length?Promise.reject({name:b,errors:E,warnings:M}):{name:b,errors:E,warnings:M}}))}}});var y=Bq(u);r.lastValidatePromise=y,y.catch(function(x){return x}).then(function(x){var b=x.map(function(S){var w=S.name;return w});r.notifyObservers(r.store,b,{type:"validateFinish"}),r.triggerOnFieldsChange(b,x)});var v=y.then(function(){return r.lastValidatePromise===y?Promise.resolve(r.getFieldsValue(c)):Promise.reject([])}).catch(function(x){var b=x.filter(function(S){return S&&S.errors.length});return Promise.reject({values:r.getFieldsValue(c),errorFields:b,outOfDate:r.lastValidatePromise!==y})});v.catch(function(x){return x});var m=c.filter(function(x){return f.has(x.join(d))});return r.triggerOnFieldsChange(m),v}),ee(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(i){var o=r.callbacks.onFinish;if(o)try{o(i)}catch(s){console.error(s)}}).catch(function(i){var o=r.callbacks.onFinishFailed;o&&o(i)})}),this.forceRootUpdate=e});function xB(n){var e=_.useRef(),r=_.useState({}),i=Ce(r,2),o=i[1];if(!e.current)if(n)e.current=n;else{var s=function(){o({})},a=new zq(s);e.current=a.getForm()}return[e.current]}var uC=_.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),kq=function(e){var r=e.validateMessages,i=e.onFormChange,o=e.onFormFinish,s=e.children,a=_.useContext(uC),l=_.useRef({});return _.createElement(uC.Provider,{value:re(re({},a),{},{validateMessages:re(re({},a.validateMessages),r),triggerFormChange:function(u,d){i&&i(u,{changedFields:d,forms:l.current}),a.triggerFormChange(u,d)},triggerFormFinish:function(u,d){o&&o(u,{values:d,forms:l.current}),a.triggerFormFinish(u,d)},registerForm:function(u,d){u&&(l.current=re(re({},l.current),{},ee({},u,d))),a.registerForm(u,d)},unregisterForm:function(u){var d=re({},l.current);delete d[u],l.current=d,a.unregisterForm(u)}})},s)},Vq=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Gq=function(e,r){var i=e.name,o=e.initialValues,s=e.fields,a=e.form,l=e.preserve,c=e.children,u=e.component,d=u===void 0?"form":u,f=e.validateMessages,h=e.validateTrigger,p=h===void 0?"onChange":h,g=e.onValuesChange,y=e.onFieldsChange,v=e.onFinish,m=e.onFinishFailed,x=e.clearOnDestroy,b=Cn(e,Vq),S=_.useRef(null),w=_.useContext(uC),C=xB(a),E=Ce(C,1),M=E[0],T=M.getInternalHooks(Hc),R=T.useSubscribe,P=T.setInitialValues,D=T.setCallbacks,L=T.setValidateMessages,A=T.setPreserve,I=T.destroyForm;_.useImperativeHandle(r,function(){return re(re({},M),{},{nativeElement:S.current})}),_.useEffect(function(){return w.registerForm(i,M),function(){w.unregisterForm(i)}},[w,M,i]),L(re(re({},w.validateMessages),f)),D({onValuesChange:g,onFieldsChange:function(z){if(w.triggerFormChange(i,z),y){for(var j=arguments.length,X=new Array(j>1?j-1:0),Q=1;Q<j;Q++)X[Q-1]=arguments[Q];y.apply(void 0,[z].concat(X))}},onFinish:function(z){w.triggerFormFinish(i,z),v&&v(z)},onFinishFailed:m}),A(l);var N=_.useRef(null);P(o,!N.current),N.current||(N.current=!0),_.useEffect(function(){return function(){return I(x)}},[]);var F,O=typeof c=="function";if(O){var V=M.getFieldsValue(!0);F=c(V,M)}else F=c;R(!O);var U=_.useRef();_.useEffect(function(){Dq(U.current||[],s||[])||M.setFields(s||[]),U.current=s},[s,M]);var k=_.useMemo(function(){return re(re({},M),{},{validateTrigger:p})},[M,p]),W=_.createElement(ay.Provider,{value:null},_.createElement(uf.Provider,{value:k},F));return d===!1?W:_.createElement(d,ut({},b,{ref:S,onSubmit:function(z){z.preventDefault(),z.stopPropagation(),M.submit()},onReset:function(z){var j;z.preventDefault(),M.resetFields(),(j=b.onReset)===null||j===void 0||j.call(b,z)}}),W)};function cN(n){try{return JSON.stringify(n)}catch{return Math.random()}}function Hq(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=e[0],o=e[1],s=o===void 0?{}:o,a=Z7(s)?{form:s}:s,l=a.form,c=_.useState(),u=Ce(c,2),d=u[0],f=u[1],h=_.useMemo(function(){return cN(d)},[d]),p=_.useRef(h);p.current=h;var g=_.useContext(uf),y=l||g,v=y&&y._init,m=dr(i),x=_.useRef(m);return x.current=m,_.useEffect(function(){if(v){var b=y.getFieldsValue,S=y.getInternalHooks,w=S(Hc),C=w.registerWatch,E=function(P,D){var L=a.preserve?D:P;return typeof i=="function"?i(L):Bs(L,x.current)},M=C(function(R,P){var D=E(R,P),L=cN(D);p.current!==L&&(p.current=L,f(D))}),T=E(b(),b(!0));return d!==T&&f(T),M}},[v]),d}var jq=_.forwardRef(Gq),Km=jq;Km.FormProvider=kq;Km.Field=vB;Km.List=Uq;Km.useForm=xB;Km.useWatch=Hq;const ja=_.createContext({}),Wq=n=>{let{children:e,status:r,override:i}=n;const o=_.useContext(ja),s=_.useMemo(()=>{const a=Object.assign({},o);return i&&delete a.isFormItemInput,r&&(delete a.status,delete a.hasFeedback,delete a.feedbackIcon),a},[r,i,o]);return _.createElement(ja.Provider,{value:s},e)},qq=_.createContext(void 0),cy=n=>{const{space:e,form:r,children:i}=n;if(i==null)return null;let o=i;return r&&(o=se.createElement(Wq,{override:!0,status:!0},o)),e&&(o=se.createElement(p9,null,o)),o};function uN(n){if(n)return{closable:n.closable,closeIcon:n.closeIcon}}function dN(n){const{closable:e,closeIcon:r}=n||{};return se.useMemo(()=>{if(!e&&(e===!1||r===!1||r===null))return!1;if(e===void 0&&r===void 0)return null;let i={closeIcon:typeof r!="boolean"&&r!==null?r:void 0};return e&&typeof e=="object"&&(i=Object.assign(Object.assign({},i),e)),i},[e,r])}function fN(){const n={};for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(o=>{o&&Object.keys(o).forEach(s=>{o[s]!==void 0&&(n[s]=o[s])})}),n}const Xq={};function Kq(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xq;const i=dN(n),o=dN(e),s=typeof i!="boolean"?!!(i!=null&&i.disabled):!1,a=se.useMemo(()=>Object.assign({closeIcon:se.createElement(Hm,null)},r),[r]),l=se.useMemo(()=>i===!1?!1:i?fN(a,o,i):o===!1?!1:o?fN(a,o):a.closable?a:!1,[i,o,a]);return se.useMemo(()=>{if(l===!1)return[!1,null,s];const{closeIconRender:c}=a,{closeIcon:u}=l;let d=u;if(d!=null){c&&(d=c(u));const f=qs(l,!0);Object.keys(f).length&&(d=se.isValidElement(d)?se.cloneElement(d,f):se.createElement("span",Object.assign({},f),d))}return[!0,d,s]},[l,a])}var _B=function(e){if(mi()&&window.document.documentElement){var r=Array.isArray(e)?e:[e],i=window.document.documentElement;return r.some(function(o){return o in i.style})}return!1},Yq=function(e,r){if(!_B(e))return!1;var i=document.createElement("div"),o=i.style[e];return i.style[e]=r,i.style[e]!==o};function hN(n,e){return!Array.isArray(n)&&e!==void 0?Yq(n,e):_B(n)}const Qq=()=>mi()&&window.document.documentElement,$x=n=>{const{prefixCls:e,className:r,style:i,size:o,shape:s}=n,a=_e({[`${e}-lg`]:o==="large",[`${e}-sm`]:o==="small"}),l=_e({[`${e}-circle`]:s==="circle",[`${e}-square`]:s==="square",[`${e}-round`]:s==="round"}),c=_.useMemo(()=>typeof o=="number"?{width:o,height:o,lineHeight:`${o}px`}:{},[o]);return _.createElement("span",{className:_e(e,a,l,r),style:Object.assign(Object.assign({},c),i)})},Zq=new hn("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),zx=n=>({height:n,lineHeight:De(n)}),Bd=n=>Object.assign({width:n},zx(n)),Jq=n=>({background:n.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:Zq,animationDuration:n.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),Eb=(n,e)=>Object.assign({width:e(n).mul(5).equal(),minWidth:e(n).mul(5).equal()},zx(n)),eX=n=>{const{skeletonAvatarCls:e,gradientFromColor:r,controlHeight:i,controlHeightLG:o,controlHeightSM:s}=n;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:r},Bd(i)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},Bd(o)),[`${e}${e}-sm`]:Object.assign({},Bd(s))}},tX=n=>{const{controlHeight:e,borderRadiusSM:r,skeletonInputCls:i,controlHeightLG:o,controlHeightSM:s,gradientFromColor:a,calc:l}=n;return{[i]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:r},Eb(e,l)),[`${i}-lg`]:Object.assign({},Eb(o,l)),[`${i}-sm`]:Object.assign({},Eb(s,l))}},pN=n=>Object.assign({width:n},zx(n)),nX=n=>{const{skeletonImageCls:e,imageSizeBase:r,gradientFromColor:i,borderRadiusSM:o,calc:s}=n;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:i,borderRadius:o},pN(s(r).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},pN(r)),{maxWidth:s(r).mul(4).equal(),maxHeight:s(r).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},Tb=(n,e,r)=>{const{skeletonButtonCls:i}=n;return{[`${r}${i}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${r}${i}-round`]:{borderRadius:e}}},Mb=(n,e)=>Object.assign({width:e(n).mul(2).equal(),minWidth:e(n).mul(2).equal()},zx(n)),rX=n=>{const{borderRadiusSM:e,skeletonButtonCls:r,controlHeight:i,controlHeightLG:o,controlHeightSM:s,gradientFromColor:a,calc:l}=n;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:e,width:l(i).mul(2).equal(),minWidth:l(i).mul(2).equal()},Mb(i,l))},Tb(n,i,r)),{[`${r}-lg`]:Object.assign({},Mb(o,l))}),Tb(n,o,`${r}-lg`)),{[`${r}-sm`]:Object.assign({},Mb(s,l))}),Tb(n,s,`${r}-sm`))},iX=n=>{const{componentCls:e,skeletonAvatarCls:r,skeletonTitleCls:i,skeletonParagraphCls:o,skeletonButtonCls:s,skeletonInputCls:a,skeletonImageCls:l,controlHeight:c,controlHeightLG:u,controlHeightSM:d,gradientFromColor:f,padding:h,marginSM:p,borderRadius:g,titleHeight:y,blockRadius:v,paragraphLiHeight:m,controlHeightXS:x,paragraphMarginTop:b}=n;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:h,verticalAlign:"top",[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:f},Bd(c)),[`${r}-circle`]:{borderRadius:"50%"},[`${r}-lg`]:Object.assign({},Bd(u)),[`${r}-sm`]:Object.assign({},Bd(d))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[i]:{width:"100%",height:y,background:f,borderRadius:v,[`+ ${o}`]:{marginBlockStart:d}},[o]:{padding:0,"> li":{width:"100%",height:m,listStyle:"none",background:f,borderRadius:v,"+ li":{marginBlockStart:x}}},[`${o}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${i}, ${o} > li`]:{borderRadius:g}}},[`${e}-with-avatar ${e}-content`]:{[i]:{marginBlockStart:p,[`+ ${o}`]:{marginBlockStart:b}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},rX(n)),eX(n)),tX(n)),nX(n)),[`${e}${e}-block`]:{width:"100%",[s]:{width:"100%"},[a]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${i},
        ${o} > li,
        ${r},
        ${s},
        ${a},
        ${l}
      `]:Object.assign({},Jq(n))}}},oX=n=>{const{colorFillContent:e,colorFill:r}=n,i=e,o=r;return{color:i,colorGradientEnd:o,gradientFromColor:i,gradientToColor:o,titleHeight:n.controlHeight/2,blockRadius:n.borderRadiusSM,paragraphMarginTop:n.marginLG+n.marginXXS,paragraphLiHeight:n.controlHeight/2}},Hf=si("Skeleton",n=>{const{componentCls:e,calc:r}=n,i=Un(n,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:r(n.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${n.gradientFromColor} 25%, ${n.gradientToColor} 37%, ${n.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[iX(i)]},oX,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),sX=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,shape:s="circle",size:a="default"}=n,{getPrefixCls:l}=_.useContext($t),c=l("skeleton",e),[u,d,f]=Hf(c),h=na(n,["prefixCls","className"]),p=_e(c,`${c}-element`,{[`${c}-active`]:o},r,i,d,f);return u(_.createElement("div",{className:p},_.createElement($x,Object.assign({prefixCls:`${c}-avatar`,shape:s,size:a},h))))},aX=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,block:s=!1,size:a="default"}=n,{getPrefixCls:l}=_.useContext($t),c=l("skeleton",e),[u,d,f]=Hf(c),h=na(n,["prefixCls"]),p=_e(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:s},r,i,d,f);return u(_.createElement("div",{className:p},_.createElement($x,Object.assign({prefixCls:`${c}-button`,size:a},h))))},lX="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",cX=n=>{const{prefixCls:e,className:r,rootClassName:i,style:o,active:s}=n,{getPrefixCls:a}=_.useContext($t),l=a("skeleton",e),[c,u,d]=Hf(l),f=_e(l,`${l}-element`,{[`${l}-active`]:s},r,i,u,d);return c(_.createElement("div",{className:f},_.createElement("div",{className:_e(`${l}-image`,r),style:o},_.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},_.createElement("title",null,"Image placeholder"),_.createElement("path",{d:lX,className:`${l}-image-path`})))))},uX=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,block:s,size:a="default"}=n,{getPrefixCls:l}=_.useContext($t),c=l("skeleton",e),[u,d,f]=Hf(c),h=na(n,["prefixCls"]),p=_e(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:s},r,i,d,f);return u(_.createElement("div",{className:p},_.createElement($x,Object.assign({prefixCls:`${c}-input`,size:a},h))))},dX=n=>{const{prefixCls:e,className:r,rootClassName:i,style:o,active:s,children:a}=n,{getPrefixCls:l}=_.useContext($t),c=l("skeleton",e),[u,d,f]=Hf(c),h=_e(c,`${c}-element`,{[`${c}-active`]:s},d,r,i,f);return u(_.createElement("div",{className:h},_.createElement("div",{className:_e(`${c}-image`,r),style:o},a)))},fX=(n,e)=>{const{width:r,rows:i=2}=e;if(Array.isArray(r))return r[n];if(i-1===n)return r},hX=n=>{const{prefixCls:e,className:r,style:i,rows:o}=n,s=st(new Array(o)).map((a,l)=>_.createElement("li",{key:l,style:{width:fX(l,n)}}));return _.createElement("ul",{className:_e(e,r),style:i},s)},pX=n=>{let{prefixCls:e,className:r,width:i,style:o}=n;return _.createElement("h3",{className:_e(e,r),style:Object.assign({width:i},o)})};function Rb(n){return n&&typeof n=="object"?n:{}}function mX(n,e){return n&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function gX(n,e){return!n&&e?{width:"38%"}:n&&e?{width:"50%"}:{}}function vX(n,e){const r={};return(!n||!e)&&(r.width="61%"),!n&&e?r.rows=3:r.rows=2,r}const jf=n=>{const{prefixCls:e,loading:r,className:i,rootClassName:o,style:s,children:a,avatar:l=!1,title:c=!0,paragraph:u=!0,active:d,round:f}=n,{getPrefixCls:h,direction:p,skeleton:g}=_.useContext($t),y=h("skeleton",e),[v,m,x]=Hf(y);if(r||!("loading"in n)){const b=!!l,S=!!c,w=!!u;let C;if(b){const T=Object.assign(Object.assign({prefixCls:`${y}-avatar`},mX(S,w)),Rb(l));C=_.createElement("div",{className:`${y}-header`},_.createElement($x,Object.assign({},T)))}let E;if(S||w){let T;if(S){const P=Object.assign(Object.assign({prefixCls:`${y}-title`},gX(b,w)),Rb(c));T=_.createElement(pX,Object.assign({},P))}let R;if(w){const P=Object.assign(Object.assign({prefixCls:`${y}-paragraph`},vX(b,S)),Rb(u));R=_.createElement(hX,Object.assign({},P))}E=_.createElement("div",{className:`${y}-content`},T,R)}const M=_e(y,{[`${y}-with-avatar`]:b,[`${y}-active`]:d,[`${y}-rtl`]:p==="rtl",[`${y}-round`]:f},g==null?void 0:g.className,i,o,m,x);return v(_.createElement("div",{className:M,style:Object.assign(Object.assign({},g==null?void 0:g.style),s)},C,E))}return a??null};jf.Button=aX;jf.Avatar=sX;jf.Input=uX;jf.Image=cX;jf.Node=dX;function mN(){}const yX=_.createContext({add:mN,remove:mN});function xX(n){const e=_.useContext(yX),r=_.useRef(null);return br(o=>{if(o){const s=n?o.querySelector(n):o;e.add(s),r.current=s}else e.remove(r.current)})}const gN=()=>{const{cancelButtonProps:n,cancelTextLocale:e,onCancel:r}=_.useContext(qm);return se.createElement(Gf,Object.assign({onClick:r},n),e)},vN=()=>{const{confirmLoading:n,okButtonProps:e,okType:r,okTextLocale:i,onOk:o}=_.useContext(qm);return se.createElement(Gf,Object.assign({},QU(r),{loading:n,onClick:o},e),i)};function bB(n,e){return se.createElement("span",{className:`${n}-close-x`},e||se.createElement(Hm,{className:`${n}-close-icon`}))}const SB=n=>{const{okText:e,okType:r="primary",cancelText:i,confirmLoading:o,onOk:s,onCancel:a,okButtonProps:l,cancelButtonProps:c,footer:u}=n,[d]=lc("Modal",eU()),f=e||(d==null?void 0:d.okText),h=i||(d==null?void 0:d.cancelText),p={confirmLoading:o,okButtonProps:l,cancelButtonProps:c,okTextLocale:f,cancelTextLocale:h,okType:r,onOk:s,onCancel:a},g=se.useMemo(()=>p,st(Object.values(p)));let y;return typeof u=="function"||typeof u>"u"?(y=se.createElement(se.Fragment,null,se.createElement(gN,null),se.createElement(vN,null)),typeof u=="function"&&(y=u(y,{OkBtn:vN,CancelBtn:gN})),y=se.createElement(aB,{value:g},y)):y=u,se.createElement(sU,{disabled:!1},y)},_X=n=>{const{componentCls:e}=n;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},bX=n=>{const{componentCls:e}=n;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},SX=(n,e)=>{const{prefixCls:r,componentCls:i,gridColumns:o}=n,s={};for(let a=o;a>=0;a--)a===0?(s[`${i}${e}-${a}`]={display:"none"},s[`${i}-push-${a}`]={insetInlineStart:"auto"},s[`${i}-pull-${a}`]={insetInlineEnd:"auto"},s[`${i}${e}-push-${a}`]={insetInlineStart:"auto"},s[`${i}${e}-pull-${a}`]={insetInlineEnd:"auto"},s[`${i}${e}-offset-${a}`]={marginInlineStart:0},s[`${i}${e}-order-${a}`]={order:0}):(s[`${i}${e}-${a}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${a/o*100}%`,maxWidth:`${a/o*100}%`}],s[`${i}${e}-push-${a}`]={insetInlineStart:`${a/o*100}%`},s[`${i}${e}-pull-${a}`]={insetInlineEnd:`${a/o*100}%`},s[`${i}${e}-offset-${a}`]={marginInlineStart:`${a/o*100}%`},s[`${i}${e}-order-${a}`]={order:a});return s[`${i}${e}-flex`]={flex:`var(--${r}${e}-flex)`},s},dC=(n,e)=>SX(n,e),wX=(n,e,r)=>({[`@media (min-width: ${De(e)})`]:Object.assign({},dC(n,r))}),CX=()=>({}),EX=()=>({}),TX=si("Grid",_X,CX),wB=n=>({xs:n.screenXSMin,sm:n.screenSMMin,md:n.screenMDMin,lg:n.screenLGMin,xl:n.screenXLMin,xxl:n.screenXXLMin}),MX=si("Grid",n=>{const e=Un(n,{gridColumns:24}),r=wB(e);return delete r.xs,[bX(e),dC(e,""),dC(e,"-xs"),Object.keys(r).map(i=>wX(e,r[i],`-${i}`)).reduce((i,o)=>Object.assign(Object.assign({},i),o),{})]},EX);function yN(n){return{position:n,inset:0}}const RX=n=>{const{componentCls:e,antCls:r}=n;return[{[`${e}-root`]:{[`${e}${r}-zoom-enter, ${e}${r}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:n.motionDurationSlow,userSelect:"none"},[`${e}${r}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},yN("fixed")),{zIndex:n.zIndexPopupBase,height:"100%",backgroundColor:n.colorBgMask,pointerEvents:"none",[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},yN("fixed")),{zIndex:n.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:F9(n)}]},AX=n=>{const{componentCls:e}=n;return[{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${n.screenSMMax}px)`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${De(n.marginXS)} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},Yo(n)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${De(n.calc(n.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:n.paddingLG,[`${e}-title`]:{margin:0,color:n.titleColor,fontWeight:n.fontWeightStrong,fontSize:n.titleFontSize,lineHeight:n.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:n.contentBg,backgroundClip:"padding-box",border:0,borderRadius:n.borderRadiusLG,boxShadow:n.boxShadow,pointerEvents:"auto",padding:n.contentPadding},[`${e}-close`]:Object.assign({position:"absolute",top:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),insetInlineEnd:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),zIndex:n.calc(n.zIndexPopupBase).add(10).equal(),padding:0,color:n.modalCloseIconColor,fontWeight:n.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:n.borderRadiusSM,width:n.modalCloseBtnSize,height:n.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${n.motionDurationMid}, background-color ${n.motionDurationMid}`,"&-x":{display:"flex",fontSize:n.fontSizeLG,fontStyle:"normal",lineHeight:De(n.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:n.modalCloseIconHoverColor,backgroundColor:n.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:n.colorBgTextActive}},Gm(n)),[`${e}-header`]:{color:n.colorText,background:n.headerBg,borderRadius:`${De(n.borderRadiusLG)} ${De(n.borderRadiusLG)} 0 0`,marginBottom:n.headerMarginBottom,padding:n.headerPadding,borderBottom:n.headerBorderBottom},[`${e}-body`]:{fontSize:n.fontSize,lineHeight:n.lineHeight,wordWrap:"break-word",padding:n.bodyPadding,[`${e}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${De(n.margin)} auto`}},[`${e}-footer`]:{textAlign:"end",background:n.footerBg,marginTop:n.footerMarginTop,padding:n.footerPadding,borderTop:n.footerBorderTop,borderRadius:n.footerBorderRadius,[`> ${n.antCls}-btn + ${n.antCls}-btn`]:{marginInlineStart:n.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,
          ${e}-body,
          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},NX=n=>{const{componentCls:e}=n;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},PX=n=>{const{componentCls:e}=n,r=wB(n);delete r.xs;const i=Object.keys(r).map(o=>({[`@media (min-width: ${De(r[o])})`]:{width:`var(--${e.replace(".","")}-${o}-width)`}}));return{[`${e}-root`]:{[e]:[{width:`var(--${e.replace(".","")}-xs-width)`}].concat(st(i))}}},CB=n=>{const e=n.padding,r=n.fontSizeHeading5,i=n.lineHeightHeading5;return Un(n,{modalHeaderHeight:n.calc(n.calc(i).mul(r).equal()).add(n.calc(e).mul(2).equal()).equal(),modalFooterBorderColorSplit:n.colorSplit,modalFooterBorderStyle:n.lineType,modalFooterBorderWidth:n.lineWidth,modalCloseIconColor:n.colorIcon,modalCloseIconHoverColor:n.colorIconHover,modalCloseBtnSize:n.controlHeight,modalConfirmIconSize:n.fontHeight,modalTitleHeight:n.calc(n.titleFontSize).mul(n.titleLineHeight).equal()})},EB=n=>({footerBg:"transparent",headerBg:n.colorBgElevated,titleLineHeight:n.lineHeightHeading5,titleFontSize:n.fontSizeHeading5,contentBg:n.colorBgElevated,titleColor:n.colorTextHeading,contentPadding:n.wireframe?0:`${De(n.paddingMD)} ${De(n.paddingContentHorizontalLG)}`,headerPadding:n.wireframe?`${De(n.padding)} ${De(n.paddingLG)}`:0,headerBorderBottom:n.wireframe?`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",headerMarginBottom:n.wireframe?0:n.marginXS,bodyPadding:n.wireframe?n.paddingLG:0,footerPadding:n.wireframe?`${De(n.paddingXS)} ${De(n.padding)}`:0,footerBorderTop:n.wireframe?`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",footerBorderRadius:n.wireframe?`0 0 ${De(n.borderRadiusLG)} ${De(n.borderRadiusLG)}`:0,footerMarginTop:n.wireframe?0:n.marginSM,confirmBodyPadding:n.wireframe?`${De(n.padding*2)} ${De(n.padding*2)} ${De(n.paddingLG)}`:0,confirmIconMarginInlineEnd:n.wireframe?n.margin:n.marginSM,confirmBtnsMarginTop:n.wireframe?n.marginLG:n.marginSM}),TB=si("Modal",n=>{const e=CB(n);return[AX(e),NX(e),RX(e),nB(e,"zoom"),PX(e)]},EB,{unitless:{titleLineHeight:!0}});var OX=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};let fC;const IX=n=>{fC={x:n.pageX,y:n.pageY},setTimeout(()=>{fC=null},100)};Qq()&&document.documentElement.addEventListener("click",IX,!0);const MB=n=>{var e;const{getPopupContainer:r,getPrefixCls:i,direction:o,modal:s}=_.useContext($t),a=X=>{const{onCancel:Q}=n;Q==null||Q(X)},l=X=>{const{onOk:Q}=n;Q==null||Q(X)},{prefixCls:c,className:u,rootClassName:d,open:f,wrapClassName:h,centered:p,getContainer:g,focusTriggerAfterClose:y=!0,style:v,visible:m,width:x=520,footer:b,classNames:S,styles:w,children:C,loading:E}=n,M=OX(n,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),T=i("modal",c),R=i(),P=cc(T),[D,L,A]=TB(T,P),I=_e(h,{[`${T}-centered`]:!!p,[`${T}-wrap-rtl`]:o==="rtl"}),N=b!==null&&!E?_.createElement(SB,Object.assign({},n,{onOk:l,onCancel:a})):null,[F,O,V]=Kq(uN(n),uN(s),{closable:!0,closeIcon:_.createElement(Hm,{className:`${T}-close-icon`}),closeIconRender:X=>bB(T,X)}),U=xX(`.${T}-content`),[k,W]=CT("Modal",M.zIndex),[J,z]=_.useMemo(()=>x&&typeof x=="object"?[void 0,x]:[x,void 0],[x]),j=_.useMemo(()=>{const X={};return z&&Object.keys(z).forEach(Q=>{const ne=z[Q];ne!==void 0&&(X[`--${T}-${Q}-width`]=typeof ne=="number"?`${ne}px`:ne)}),X},[z]);return D(_.createElement(cy,{form:!0,space:!0},_.createElement(wT.Provider,{value:W},_.createElement(hB,Object.assign({width:J},M,{zIndex:k,getContainer:g===void 0?r:g,prefixCls:T,rootClassName:_e(L,d,A,P),footer:N,visible:f??m,mousePosition:(e=M.mousePosition)!==null&&e!==void 0?e:fC,onClose:a,closable:F&&{disabled:V,closeIcon:O},closeIcon:O,focusTriggerAfterClose:y,transitionName:cf(R,"zoom",n.transitionName),maskTransitionName:cf(R,"fade",n.maskTransitionName),className:_e(L,u,s==null?void 0:s.className),style:Object.assign(Object.assign(Object.assign({},s==null?void 0:s.style),v),j),classNames:Object.assign(Object.assign(Object.assign({},s==null?void 0:s.classNames),S),{wrapper:_e(I,S==null?void 0:S.wrapper)}),styles:Object.assign(Object.assign({},s==null?void 0:s.styles),w),panelRef:U}),E?_.createElement(jf,{active:!0,title:!1,paragraph:{rows:4},className:`${T}-body-skeleton`}):C))))},DX=n=>{const{componentCls:e,titleFontSize:r,titleLineHeight:i,modalConfirmIconSize:o,fontSize:s,lineHeight:a,modalTitleHeight:l,fontHeight:c,confirmBodyPadding:u}=n,d=`${e}-confirm`;return{[d]:{"&-rtl":{direction:"rtl"},[`${n.antCls}-modal-header`]:{display:"none"},[`${d}-body-wrapper`]:Object.assign({},hU()),[`&${e} ${e}-body`]:{padding:u},[`${d}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:n.confirmIconMarginInlineEnd,marginTop:n.calc(n.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${n.iconCls}`]:{marginTop:n.calc(n.calc(l).sub(o).equal()).div(2).equal()}},[`${d}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:n.marginXS,maxWidth:`calc(100% - ${De(n.marginSM)})`},[`${n.iconCls} + ${d}-paragraph`]:{maxWidth:`calc(100% - ${De(n.calc(n.modalConfirmIconSize).add(n.marginSM).equal())})`},[`${d}-title`]:{color:n.colorTextHeading,fontWeight:n.fontWeightStrong,fontSize:r,lineHeight:i},[`${d}-content`]:{color:n.colorText,fontSize:s,lineHeight:a},[`${d}-btns`]:{textAlign:"end",marginTop:n.confirmBtnsMarginTop,[`${n.antCls}-btn + ${n.antCls}-btn`]:{marginBottom:0,marginInlineStart:n.marginXS}}},[`${d}-error ${d}-body > ${n.iconCls}`]:{color:n.colorError},[`${d}-warning ${d}-body > ${n.iconCls},
        ${d}-confirm ${d}-body > ${n.iconCls}`]:{color:n.colorWarning},[`${d}-info ${d}-body > ${n.iconCls}`]:{color:n.colorInfo},[`${d}-success ${d}-body > ${n.iconCls}`]:{color:n.colorSuccess}}},LX=bT(["Modal","confirm"],n=>{const e=CB(n);return[DX(e)]},EB,{order:-1e3});var FX=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function RB(n){const{prefixCls:e,icon:r,okText:i,cancelText:o,confirmPrefixCls:s,type:a,okCancel:l,footer:c,locale:u}=n,d=FX(n,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=r;if(!r&&r!==null)switch(a){case"info":f=_.createElement(FU,null);break;case"success":f=_.createElement(DU,null);break;case"error":f=_.createElement(Ax,null);break;default:f=_.createElement(LU,null)}const h=l??a==="confirm",p=n.autoFocusButton===null?!1:n.autoFocusButton||"ok",[g]=lc("Modal"),y=u||g,v=i||(h?y==null?void 0:y.okText:y==null?void 0:y.justOkText),m=o||(y==null?void 0:y.cancelText),x=Object.assign({autoFocusButton:p,cancelTextLocale:m,okTextLocale:v,mergedOkCancel:h},d),b=_.useMemo(()=>x,st(Object.values(x))),S=_.createElement(_.Fragment,null,_.createElement(j2,null),_.createElement(W2,null)),w=n.title!==void 0&&n.title!==null,C=`${s}-body`;return _.createElement("div",{className:`${s}-body-wrapper`},_.createElement("div",{className:_e(C,{[`${C}-has-title`]:w})},f,_.createElement("div",{className:`${s}-paragraph`},w&&_.createElement("span",{className:`${s}-title`},n.title),_.createElement("div",{className:`${s}-content`},n.content))),c===void 0||typeof c=="function"?_.createElement(aB,{value:b},_.createElement("div",{className:`${s}-btns`},typeof c=="function"?c(S,{OkBtn:W2,CancelBtn:j2}):S)):c,_.createElement(LX,{prefixCls:e}))}const UX=n=>{const{close:e,zIndex:r,maskStyle:i,direction:o,prefixCls:s,wrapClassName:a,rootPrefixCls:l,bodyStyle:c,closable:u=!1,onConfirm:d,styles:f}=n,h=`${s}-confirm`,p=n.width||416,g=n.style||{},y=n.mask===void 0?!0:n.mask,v=n.maskClosable===void 0?!1:n.maskClosable,m=_e(h,`${h}-${n.type}`,{[`${h}-rtl`]:o==="rtl"},n.className),[,x]=eo(),b=_.useMemo(()=>r!==void 0?r:x.zIndexPopupBase+zU,[r,x]);return _.createElement(MB,Object.assign({},n,{className:m,wrapClassName:_e({[`${h}-centered`]:!!n.centered},a),onCancel:()=>{e==null||e({triggerCancel:!0}),d==null||d(!1)},title:"",footer:null,transitionName:cf(l||"","zoom",n.transitionName),maskTransitionName:cf(l||"","fade",n.maskTransitionName),mask:y,maskClosable:v,style:g,styles:Object.assign({body:c,mask:i},f),width:p,zIndex:b,closable:u}),_.createElement(RB,Object.assign({},n,{confirmPrefixCls:h})))},AB=n=>{const{rootPrefixCls:e,iconPrefixCls:r,direction:i,theme:o}=n;return _.createElement(Ja,{prefixCls:e,iconPrefixCls:r,direction:i,theme:o},_.createElement(UX,Object.assign({},n)))},jc=[];let NB="";function PB(){return NB}const BX=n=>{var e,r;const{prefixCls:i,getContainer:o,direction:s}=n,a=eU(),l=_.useContext($t),c=PB()||l.getPrefixCls(),u=i||`${c}-modal`;let d=o;return d===!1&&(d=void 0),se.createElement(AB,Object.assign({},n,{rootPrefixCls:c,prefixCls:u,iconPrefixCls:l.iconPrefixCls,theme:l.theme,direction:s??l.direction,locale:(r=(e=l.locale)===null||e===void 0?void 0:e.Modal)!==null&&r!==void 0?r:a,getContainer:d}))};function Ym(n){const e=AU(),r=document.createDocumentFragment();let i=Object.assign(Object.assign({},n),{close:c,open:!0}),o,s;function a(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];if(h.some(v=>v==null?void 0:v.triggerCancel)){var y;(d=n.onCancel)===null||d===void 0||(y=d).call.apply(y,[n,()=>{}].concat(st(h.slice(1))))}for(let v=0;v<jc.length;v++)if(jc[v]===c){jc.splice(v,1);break}s()}function l(d){clearTimeout(o),o=setTimeout(()=>{const f=e.getPrefixCls(void 0,PB()),h=e.getIconPrefixCls(),p=e.getTheme(),g=se.createElement(BX,Object.assign({},d));s=TT()(se.createElement(Ja,{prefixCls:f,iconPrefixCls:h,theme:p},e.holderRender?e.holderRender(g):g),r)})}function c(){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];i=Object.assign(Object.assign({},i),{open:!1,afterClose:()=>{typeof n.afterClose=="function"&&n.afterClose(),a.apply(this,f)}}),i.visible&&delete i.visible,l(i)}function u(d){typeof d=="function"?i=d(i):i=Object.assign(Object.assign({},i),d),l(i)}return l(i),jc.push(c),{destroy:c,update:u}}function OB(n){return Object.assign(Object.assign({},n),{type:"warning"})}function IB(n){return Object.assign(Object.assign({},n),{type:"info"})}function DB(n){return Object.assign(Object.assign({},n),{type:"success"})}function LB(n){return Object.assign(Object.assign({},n),{type:"error"})}function FB(n){return Object.assign(Object.assign({},n),{type:"confirm"})}function $X(n){let{rootPrefixCls:e}=n;NB=e}var zX=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const kX=(n,e)=>{var r,{afterClose:i,config:o}=n,s=zX(n,["afterClose","config"]);const[a,l]=_.useState(!0),[c,u]=_.useState(o),{direction:d,getPrefixCls:f}=_.useContext($t),h=f("modal"),p=f(),g=()=>{var x;i(),(x=c.afterClose)===null||x===void 0||x.call(c)},y=function(){var x;l(!1);for(var b=arguments.length,S=new Array(b),w=0;w<b;w++)S[w]=arguments[w];if(S.some(M=>M==null?void 0:M.triggerCancel)){var E;(x=c.onCancel)===null||x===void 0||(E=x).call.apply(E,[c,()=>{}].concat(st(S.slice(1))))}};_.useImperativeHandle(e,()=>({destroy:y,update:x=>{u(b=>Object.assign(Object.assign({},b),x))}}));const v=(r=c.okCancel)!==null&&r!==void 0?r:c.type==="confirm",[m]=lc("Modal",lu.Modal);return _.createElement(AB,Object.assign({prefixCls:h,rootPrefixCls:p},c,{close:y,open:a,afterClose:g,okText:c.okText||(v?m==null?void 0:m.okText:m==null?void 0:m.justOkText),direction:c.direction||d,cancelText:c.cancelText||(m==null?void 0:m.cancelText)},s))},VX=_.forwardRef(kX);let xN=0;const GX=_.memo(_.forwardRef((n,e)=>{const[r,i]=qW();return _.useImperativeHandle(e,()=>({patchElement:i}),[]),_.createElement(_.Fragment,null,r)}));function HX(){const n=_.useRef(null),[e,r]=_.useState([]);_.useEffect(()=>{e.length&&(st(e).forEach(a=>{a()}),r([]))},[e]);const i=_.useCallback(s=>function(l){var c;xN+=1;const u=_.createRef();let d;const f=new Promise(v=>{d=v});let h=!1,p;const g=_.createElement(VX,{key:`modal-${xN}`,config:s(l),ref:u,afterClose:()=>{p==null||p()},isSilent:()=>h,onConfirm:v=>{d(v)}});return p=(c=n.current)===null||c===void 0?void 0:c.patchElement(g),p&&jc.push(p),{destroy:()=>{function v(){var m;(m=u.current)===null||m===void 0||m.destroy()}u.current?v():r(m=>[].concat(st(m),[v]))},update:v=>{function m(){var x;(x=u.current)===null||x===void 0||x.update(v)}u.current?m():r(x=>[].concat(st(x),[m]))},then:v=>(h=!0,f.then(v))}},[]);return[_.useMemo(()=>({info:i(IB),success:i(DB),error:i(LB),warning:i(OB),confirm:i(FB)}),[]),_.createElement(GX,{key:"modal-holder",ref:n})]}const jX=se.createContext({});function UB(n){return e=>_.createElement(Ja,{theme:{token:{motion:!1,zIndexPopupBase:0}}},_.createElement(n,Object.assign({},e)))}const WX=(n,e,r,i,o)=>UB(a=>{const{prefixCls:l,style:c}=a,u=_.useRef(null),[d,f]=_.useState(0),[h,p]=_.useState(0),[g,y]=Zi(!1,{value:a.open}),{getPrefixCls:v}=_.useContext($t),m=v("select",l);_.useEffect(()=>{if(y(!0),typeof ResizeObserver<"u"){const S=new ResizeObserver(C=>{const E=C[0].target;f(E.offsetHeight+8),p(E.offsetWidth)}),w=setInterval(()=>{var C;const E=`.${m}-dropdown`,M=(C=u.current)===null||C===void 0?void 0:C.querySelector(E);M&&(clearInterval(w),S.observe(M))},10);return()=>{clearInterval(w),S.disconnect()}}},[]);let x=Object.assign(Object.assign({},a),{style:Object.assign(Object.assign({},c),{margin:0}),open:g,visible:g,getPopupContainer:()=>u.current});Object.assign(x,{[e]:{overflow:{adjustX:!1,adjustY:!1}}});const b={paddingBottom:d,position:"relative",minWidth:h};return _.createElement("div",{ref:u,style:b},_.createElement(n,Object.assign({},x)))}),BB=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n==null?void 0:n.substr(0,4))};var kx=function(e){var r=e.className,i=e.customizeIcon,o=e.customizeIconProps,s=e.children,a=e.onMouseDown,l=e.onClick,c=typeof i=="function"?i(o):i;return _.createElement("span",{className:r,onMouseDown:function(d){d.preventDefault(),a==null||a(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},c!==void 0?c:_.createElement("span",{className:_e(r.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},s))},qX=function(e,r,i,o,s){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=se.useMemo(function(){if(Mt(o)==="object")return o.clearIcon;if(s)return s},[o,s]),d=se.useMemo(function(){return!!(!a&&o&&(i.length||l)&&!(c==="combobox"&&l===""))},[o,a,i.length,l,c]);return{allowClear:d,clearIcon:se.createElement(kx,{className:"".concat(e,"-clear"),onMouseDown:r,customizeIcon:u},"")}},$B=_.createContext(null);function XX(){return _.useContext($B)}function KX(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=_.useState(!1),r=Ce(e,2),i=r[0],o=r[1],s=_.useRef(null),a=function(){window.clearTimeout(s.current)};_.useEffect(function(){return a},[]);var l=function(u,d){a(),s.current=window.setTimeout(function(){o(u),d&&d()},n)};return[i,l,a]}function zB(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=_.useRef(null),r=_.useRef(null);_.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function i(o){(o||e.current===null)&&(e.current=o),window.clearTimeout(r.current),r.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},i]}function YX(n,e,r,i){var o=_.useRef(null);o.current={open:e,triggerOpen:r,customizedTrigger:i},_.useEffect(function(){function s(a){var l;if(!((l=o.current)!==null&&l!==void 0&&l.customizedTrigger)){var c=a.target;c.shadowRoot&&a.composed&&(c=a.composedPath()[0]||c),o.current.open&&n().filter(function(u){return u}).every(function(u){return!u.contains(c)&&u!==c})&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",s),function(){return window.removeEventListener("mousedown",s)}},[])}function QX(n){return n&&![He.ESC,He.SHIFT,He.BACKSPACE,He.TAB,He.WIN_KEY,He.ALT,He.META,He.WIN_KEY_RIGHT,He.CTRL,He.SEMICOLON,He.EQUALS,He.CAPS_LOCK,He.CONTEXT_MENU,He.F1,He.F2,He.F3,He.F4,He.F5,He.F6,He.F7,He.F8,He.F9,He.F10,He.F11,He.F12].includes(n)}var ZX=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Bu=void 0;function JX(n,e){var r=n.prefixCls,i=n.invalidate,o=n.item,s=n.renderItem,a=n.responsive,l=n.responsiveDisabled,c=n.registerSize,u=n.itemKey,d=n.className,f=n.style,h=n.children,p=n.display,g=n.order,y=n.component,v=y===void 0?"div":y,m=Cn(n,ZX),x=a&&!p;function b(M){c(u,M)}_.useEffect(function(){return function(){b(null)}},[]);var S=s&&o!==Bu?s(o,{index:g}):h,w;i||(w={opacity:x?0:1,height:x?0:Bu,overflowY:x?"hidden":Bu,order:a?g:Bu,pointerEvents:x?"none":Bu,position:x?"absolute":Bu});var C={};x&&(C["aria-hidden"]=!0);var E=_.createElement(v,ut({className:_e(!i&&r,d),style:re(re({},w),f)},C,m,{ref:e}),S);return a&&(E=_.createElement(Za,{onResize:function(T){var R=T.offsetWidth;b(R)},disabled:l},E)),E}var yp=_.forwardRef(JX);yp.displayName="Item";function eK(n){if(typeof MessageChannel>"u")pr(n);else{var e=new MessageChannel;e.port1.onmessage=function(){return n()},e.port2.postMessage(void 0)}}function tK(){var n=_.useRef(null),e=function(i){n.current||(n.current=[],eK(function(){Ql.unstable_batchedUpdates(function(){n.current.forEach(function(o){o()}),n.current=null})})),n.current.push(i)};return e}function gh(n,e){var r=_.useState(e),i=Ce(r,2),o=i[0],s=i[1],a=br(function(l){n(function(){s(l)})});return[o,a]}var uy=se.createContext(null),nK=["component"],rK=["className"],iK=["className"],oK=function(e,r){var i=_.useContext(uy);if(!i){var o=e.component,s=o===void 0?"div":o,a=Cn(e,nK);return _.createElement(s,ut({},a,{ref:r}))}var l=i.className,c=Cn(i,rK),u=e.className,d=Cn(e,iK);return _.createElement(uy.Provider,{value:null},_.createElement(yp,ut({ref:r,className:_e(l,u)},c,d)))},kB=_.forwardRef(oK);kB.displayName="RawItem";var sK=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],VB="responsive",GB="invalidate";function aK(n){return"+ ".concat(n.length," ...")}function lK(n,e){var r=n.prefixCls,i=r===void 0?"rc-overflow":r,o=n.data,s=o===void 0?[]:o,a=n.renderItem,l=n.renderRawItem,c=n.itemKey,u=n.itemWidth,d=u===void 0?10:u,f=n.ssr,h=n.style,p=n.className,g=n.maxCount,y=n.renderRest,v=n.renderRawRest,m=n.suffix,x=n.component,b=x===void 0?"div":x,S=n.itemComponent,w=n.onVisibleChange,C=Cn(n,sK),E=f==="full",M=tK(),T=gh(M,null),R=Ce(T,2),P=R[0],D=R[1],L=P||0,A=gh(M,new Map),I=Ce(A,2),N=I[0],F=I[1],O=gh(M,0),V=Ce(O,2),U=V[0],k=V[1],W=gh(M,0),J=Ce(W,2),z=J[0],j=J[1],X=gh(M,0),Q=Ce(X,2),ne=Q[0],ye=Q[1],me=_.useState(null),fe=Ce(me,2),le=fe[0],ge=fe[1],q=_.useState(null),ve=Ce(q,2),be=ve[0],xe=ve[1],we=_.useMemo(function(){return be===null&&E?Number.MAX_SAFE_INTEGER:be||0},[be,P]),qe=_.useState(!1),Fe=Ce(qe,2),H=Fe[0],B=Fe[1],K="".concat(i,"-item"),oe=Math.max(U,z),pe=g===VB,ce=s.length&&pe,Ue=g===GB,Re=ce||typeof g=="number"&&s.length>g,Le=_.useMemo(function(){var dt=s;return ce?P===null&&E?dt=s:dt=s.slice(0,Math.min(s.length,L/d)):typeof g=="number"&&(dt=s.slice(0,g)),dt},[s,d,P,g,ce]),Je=_.useMemo(function(){return ce?s.slice(we+1):s.slice(Le.length)},[s,Le,ce,we]),Me=_.useCallback(function(dt,Xe){var rt;return typeof c=="function"?c(dt):(rt=c&&(dt==null?void 0:dt[c]))!==null&&rt!==void 0?rt:Xe},[c]),ze=_.useCallback(a||function(dt){return dt},[a]);function Ee(dt,Xe,rt){be===dt&&(Xe===void 0||Xe===le)||(xe(dt),rt||(B(dt<s.length-1),w==null||w(dt)),Xe!==void 0&&ge(Xe))}function Pe(dt,Xe){D(Xe.clientWidth)}function ke(dt,Xe){F(function(rt){var Lt=new Map(rt);return Xe===null?Lt.delete(dt):Lt.set(dt,Xe),Lt})}function Ve(dt,Xe){j(Xe),k(z)}function $e(dt,Xe){ye(Xe)}function xt(dt){return N.get(Me(Le[dt],dt))}_n(function(){if(L&&typeof oe=="number"&&Le){var dt=ne,Xe=Le.length,rt=Xe-1;if(!Xe){Ee(0,null);return}for(var Lt=0;Lt<Xe;Lt+=1){var bn=xt(Lt);if(E&&(bn=bn||0),bn===void 0){Ee(Lt-1,void 0,!0);break}if(dt+=bn,rt===0&&dt<=L||Lt===rt-1&&dt+xt(rt)<=L){Ee(rt,null);break}else if(dt+oe>L){Ee(Lt-1,dt-bn-ne+z);break}}m&&xt(0)+ne>L&&ge(null)}},[L,N,z,ne,Me,Le]);var te=H&&!!Je.length,Qe={};le!==null&&ce&&(Qe={position:"absolute",left:le,top:0});var Se={prefixCls:K,responsive:ce,component:S,invalidate:Ue},Oe=l?function(dt,Xe){var rt=Me(dt,Xe);return _.createElement(uy.Provider,{key:rt,value:re(re({},Se),{},{order:Xe,item:dt,itemKey:rt,registerSize:ke,display:Xe<=we})},l(dt,Xe))}:function(dt,Xe){var rt=Me(dt,Xe);return _.createElement(yp,ut({},Se,{order:Xe,key:rt,item:dt,renderItem:ze,itemKey:rt,registerSize:ke,display:Xe<=we}))},Ze={order:te?we:Number.MAX_SAFE_INTEGER,className:"".concat(K,"-rest"),registerSize:Ve,display:te},We=y||aK,wt=v?_.createElement(uy.Provider,{value:re(re({},Se),Ze)},v(Je)):_.createElement(yp,ut({},Se,Ze),typeof We=="function"?We(Je):We),Rt=_.createElement(b,ut({className:_e(!Ue&&i,p),style:h,ref:e},C),Le.map(Oe),Re?wt:null,m&&_.createElement(yp,ut({},Se,{responsive:pe,responsiveDisabled:!ce,order:we,className:"".concat(K,"-suffix"),registerSize:$e,display:!0,style:Qe}),m));return pe?_.createElement(Za,{onResize:Pe,disabled:!ce},Rt):Rt}var Qm=_.forwardRef(lK);Qm.displayName="Overflow";Qm.Item=kB;Qm.RESPONSIVE=VB;Qm.INVALIDATE=GB;var cK=function(e,r){var i,o=e.prefixCls,s=e.id,a=e.inputElement,l=e.disabled,c=e.tabIndex,u=e.autoFocus,d=e.autoComplete,f=e.editable,h=e.activeDescendantId,p=e.value,g=e.maxLength,y=e.onKeyDown,v=e.onMouseDown,m=e.onChange,x=e.onPaste,b=e.onCompositionStart,S=e.onCompositionEnd,w=e.open,C=e.attrs,E=a||_.createElement("input",null),M=E,T=M.ref,R=M.props,P=R.onKeyDown,D=R.onChange,L=R.onMouseDown,A=R.onCompositionStart,I=R.onCompositionEnd,N=R.style;return"maxLength"in E.props,E=_.cloneElement(E,re(re(re({type:"search"},R),{},{id:s,ref:ta(r,T),disabled:l,tabIndex:c,autoComplete:d||"off",autoFocus:u,className:_e("".concat(o,"-selection-search-input"),(i=E)===null||i===void 0||(i=i.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-expanded":w||!1,"aria-haspopup":"listbox","aria-owns":"".concat(s,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(s,"_list"),"aria-activedescendant":w?h:void 0},C),{},{value:f?p:"",maxLength:g,readOnly:!f,unselectable:f?null:"on",style:re(re({},N),{},{opacity:f?null:0}),onKeyDown:function(O){y(O),P&&P(O)},onMouseDown:function(O){v(O),L&&L(O)},onChange:function(O){m(O),D&&D(O)},onCompositionStart:function(O){b(O),A&&A(O)},onCompositionEnd:function(O){S(O),I&&I(O)},onPaste:x})),E},HB=_.forwardRef(cK);function jB(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var uK=typeof window<"u"&&window.document&&window.document.documentElement,dK=uK;function fK(n){return n!=null}function hK(n){return!n&&n!==0}function _N(n){return["string","number"].includes(Mt(n))}function WB(n){var e=void 0;return n&&(_N(n.title)?e=n.title.toString():_N(n.label)&&(e=n.label.toString())),e}function pK(n,e){dK?_.useLayoutEffect(n,e):_.useEffect(n,e)}function mK(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var bN=function(e){e.preventDefault(),e.stopPropagation()},gK=function(e){var r=e.id,i=e.prefixCls,o=e.values,s=e.open,a=e.searchValue,l=e.autoClearSearchValue,c=e.inputRef,u=e.placeholder,d=e.disabled,f=e.mode,h=e.showSearch,p=e.autoFocus,g=e.autoComplete,y=e.activeDescendantId,v=e.tabIndex,m=e.removeIcon,x=e.maxTagCount,b=e.maxTagTextLength,S=e.maxTagPlaceholder,w=S===void 0?function(ge){return"+ ".concat(ge.length," ...")}:S,C=e.tagRender,E=e.onToggleOpen,M=e.onRemove,T=e.onInputChange,R=e.onInputPaste,P=e.onInputKeyDown,D=e.onInputMouseDown,L=e.onInputCompositionStart,A=e.onInputCompositionEnd,I=_.useRef(null),N=_.useState(0),F=Ce(N,2),O=F[0],V=F[1],U=_.useState(!1),k=Ce(U,2),W=k[0],J=k[1],z="".concat(i,"-selection"),j=s||f==="multiple"&&l===!1||f==="tags"?a:"",X=f==="tags"||f==="multiple"&&l===!1||h&&(s||W);pK(function(){V(I.current.scrollWidth)},[j]);var Q=function(q,ve,be,xe,we){return _.createElement("span",{title:WB(q),className:_e("".concat(z,"-item"),ee({},"".concat(z,"-item-disabled"),be))},_.createElement("span",{className:"".concat(z,"-item-content")},ve),xe&&_.createElement(kx,{className:"".concat(z,"-item-remove"),onMouseDown:bN,onClick:we,customizeIcon:m},""))},ne=function(q,ve,be,xe,we,qe){var Fe=function(B){bN(B),E(!s)};return _.createElement("span",{onMouseDown:Fe},C({label:ve,value:q,disabled:be,closable:xe,onClose:we,isMaxTag:!!qe}))},ye=function(q){var ve=q.disabled,be=q.label,xe=q.value,we=!d&&!ve,qe=be;if(typeof b=="number"&&(typeof be=="string"||typeof be=="number")){var Fe=String(qe);Fe.length>b&&(qe="".concat(Fe.slice(0,b),"..."))}var H=function(K){K&&K.stopPropagation(),M(q)};return typeof C=="function"?ne(xe,qe,ve,we,H):Q(q,qe,ve,we,H)},me=function(q){var ve=typeof w=="function"?w(q):w;return typeof C=="function"?ne(void 0,ve,!1,!1,void 0,!0):Q({title:ve},ve,!1)},fe=_.createElement("div",{className:"".concat(z,"-search"),style:{width:O},onFocus:function(){J(!0)},onBlur:function(){J(!1)}},_.createElement(HB,{ref:c,open:s,prefixCls:i,id:r,inputElement:null,disabled:d,autoFocus:p,autoComplete:g,editable:X,activeDescendantId:y,value:j,onKeyDown:P,onMouseDown:D,onChange:T,onPaste:R,onCompositionStart:L,onCompositionEnd:A,tabIndex:v,attrs:qs(e,!0)}),_.createElement("span",{ref:I,className:"".concat(z,"-search-mirror"),"aria-hidden":!0},j,"")),le=_.createElement(Qm,{prefixCls:"".concat(z,"-overflow"),data:o,renderItem:ye,renderRest:me,suffix:fe,itemKey:mK,maxCount:x});return _.createElement("span",{className:"".concat(z,"-wrap")},le,!o.length&&!j&&_.createElement("span",{className:"".concat(z,"-placeholder")},u))},vK=function(e){var r=e.inputElement,i=e.prefixCls,o=e.id,s=e.inputRef,a=e.disabled,l=e.autoFocus,c=e.autoComplete,u=e.activeDescendantId,d=e.mode,f=e.open,h=e.values,p=e.placeholder,g=e.tabIndex,y=e.showSearch,v=e.searchValue,m=e.activeValue,x=e.maxLength,b=e.onInputKeyDown,S=e.onInputMouseDown,w=e.onInputChange,C=e.onInputPaste,E=e.onInputCompositionStart,M=e.onInputCompositionEnd,T=e.title,R=_.useState(!1),P=Ce(R,2),D=P[0],L=P[1],A=d==="combobox",I=A||y,N=h[0],F=v||"";A&&m&&!D&&(F=m),_.useEffect(function(){A&&L(!1)},[A,m]);var O=d!=="combobox"&&!f&&!y?!1:!!F,V=T===void 0?WB(N):T,U=_.useMemo(function(){return N?null:_.createElement("span",{className:"".concat(i,"-selection-placeholder"),style:O?{visibility:"hidden"}:void 0},p)},[N,O,p,i]);return _.createElement("span",{className:"".concat(i,"-selection-wrap")},_.createElement("span",{className:"".concat(i,"-selection-search")},_.createElement(HB,{ref:s,prefixCls:i,id:o,open:f,inputElement:r,disabled:a,autoFocus:l,autoComplete:c,editable:I,activeDescendantId:u,value:F,onKeyDown:b,onMouseDown:S,onChange:function(W){L(!0),w(W)},onPaste:C,onCompositionStart:E,onCompositionEnd:M,tabIndex:g,attrs:qs(e,!0),maxLength:A?x:void 0})),!A&&N?_.createElement("span",{className:"".concat(i,"-selection-item"),title:V,style:O?{visibility:"hidden"}:void 0},N.label):null,U)},yK=function(e,r){var i=_.useRef(null),o=_.useRef(!1),s=e.prefixCls,a=e.open,l=e.mode,c=e.showSearch,u=e.tokenWithEnter,d=e.disabled,f=e.prefix,h=e.autoClearSearchValue,p=e.onSearch,g=e.onSearchSubmit,y=e.onToggleOpen,v=e.onInputKeyDown,m=e.domRef;_.useImperativeHandle(r,function(){return{focus:function(V){i.current.focus(V)},blur:function(){i.current.blur()}}});var x=zB(0),b=Ce(x,2),S=b[0],w=b[1],C=function(V){var U=V.which,k=i.current instanceof HTMLTextAreaElement;!k&&a&&(U===He.UP||U===He.DOWN)&&V.preventDefault(),v&&v(V),U===He.ENTER&&l==="tags"&&!o.current&&!a&&(g==null||g(V.target.value)),!(k&&!a&&~[He.UP,He.DOWN,He.LEFT,He.RIGHT].indexOf(U))&&QX(U)&&y(!0)},E=function(){w(!0)},M=_.useRef(null),T=function(V){p(V,!0,o.current)!==!1&&y(!0)},R=function(){o.current=!0},P=function(V){o.current=!1,l!=="combobox"&&T(V.target.value)},D=function(V){var U=V.target.value;if(u&&M.current&&/[\r\n]/.test(M.current)){var k=M.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");U=U.replace(k,M.current)}M.current=null,T(U)},L=function(V){var U=V.clipboardData,k=U==null?void 0:U.getData("text");M.current=k||""},A=function(V){var U=V.target;if(U!==i.current){var k=document.body.style.msTouchAction!==void 0;k?setTimeout(function(){i.current.focus()}):i.current.focus()}},I=function(V){var U=S();V.target!==i.current&&!U&&!(l==="combobox"&&d)&&V.preventDefault(),(l!=="combobox"&&(!c||!U)||!a)&&(a&&h!==!1&&p("",!0,!1),y())},N={inputRef:i,onInputKeyDown:C,onInputMouseDown:E,onInputChange:D,onInputPaste:L,onInputCompositionStart:R,onInputCompositionEnd:P},F=l==="multiple"||l==="tags"?_.createElement(gK,ut({},e,N)):_.createElement(vK,ut({},e,N));return _.createElement("div",{ref:m,className:"".concat(s,"-selector"),onClick:A,onMouseDown:I},f&&_.createElement("div",{className:"".concat(s,"-prefix")},f),F)},xK=_.forwardRef(yK);function _K(n){var e=n.prefixCls,r=n.align,i=n.arrow,o=n.arrowPos,s=i||{},a=s.className,l=s.content,c=o.x,u=c===void 0?0:c,d=o.y,f=d===void 0?0:d,h=_.useRef();if(!r||!r.points)return null;var p={position:"absolute"};if(r.autoArrow!==!1){var g=r.points[0],y=r.points[1],v=g[0],m=g[1],x=y[0],b=y[1];v===x||!["t","b"].includes(v)?p.top=f:v==="t"?p.top=0:p.bottom=0,m===b||!["l","r"].includes(m)?p.left=u:m==="l"?p.left=0:p.right=0}return _.createElement("div",{ref:h,className:_e("".concat(e,"-arrow"),a),style:p},l)}function bK(n){var e=n.prefixCls,r=n.open,i=n.zIndex,o=n.mask,s=n.motion;return o?_.createElement(wu,ut({},s,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(a){var l=a.className;return _.createElement("div",{style:{zIndex:i},className:_e("".concat(e,"-mask"),l)})}):null}var SK=_.memo(function(n){var e=n.children;return e},function(n,e){return e.cache}),wK=_.forwardRef(function(n,e){var r=n.popup,i=n.className,o=n.prefixCls,s=n.style,a=n.target,l=n.onVisibleChanged,c=n.open,u=n.keepDom,d=n.fresh,f=n.onClick,h=n.mask,p=n.arrow,g=n.arrowPos,y=n.align,v=n.motion,m=n.maskMotion,x=n.forceRender,b=n.getPopupContainer,S=n.autoDestroy,w=n.portal,C=n.zIndex,E=n.onMouseEnter,M=n.onMouseLeave,T=n.onPointerEnter,R=n.onPointerDownCapture,P=n.ready,D=n.offsetX,L=n.offsetY,A=n.offsetR,I=n.offsetB,N=n.onAlign,F=n.onPrepare,O=n.stretch,V=n.targetWidth,U=n.targetHeight,k=typeof r=="function"?r():r,W=c||u,J=(b==null?void 0:b.length)>0,z=_.useState(!b||!J),j=Ce(z,2),X=j[0],Q=j[1];if(_n(function(){!X&&J&&a&&Q(!0)},[X,J,a]),!X)return null;var ne="auto",ye={left:"-1000vw",top:"-1000vh",right:ne,bottom:ne};if(P||!c){var me,fe=y.points,le=y.dynamicInset||((me=y._experimental)===null||me===void 0?void 0:me.dynamicInset),ge=le&&fe[0][1]==="r",q=le&&fe[0][0]==="b";ge?(ye.right=A,ye.left=ne):(ye.left=D,ye.right=ne),q?(ye.bottom=I,ye.top=ne):(ye.top=L,ye.bottom=ne)}var ve={};return O&&(O.includes("height")&&U?ve.height=U:O.includes("minHeight")&&U&&(ve.minHeight=U),O.includes("width")&&V?ve.width=V:O.includes("minWidth")&&V&&(ve.minWidth=V)),c||(ve.pointerEvents="none"),_.createElement(w,{open:x||W,getContainer:b&&function(){return b(a)},autoDestroy:S},_.createElement(bK,{prefixCls:o,open:c,zIndex:C,mask:h,motion:m}),_.createElement(Za,{onResize:N,disabled:!c},function(be){return _.createElement(wu,ut({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(o,"-hidden")},v,{onAppearPrepare:F,onEnterPrepare:F,visible:c,onVisibleChanged:function(we){var qe;v==null||(qe=v.onVisibleChanged)===null||qe===void 0||qe.call(v,we),l(we)}}),function(xe,we){var qe=xe.className,Fe=xe.style,H=_e(o,qe,i);return _.createElement("div",{ref:ta(be,e,we),className:H,style:re(re(re(re({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},ye),ve),Fe),{},{boxSizing:"border-box",zIndex:C},s),onMouseEnter:E,onMouseLeave:M,onPointerEnter:T,onClick:f,onPointerDownCapture:R},p&&_.createElement(_K,{prefixCls:o,arrow:p,arrowPos:g,align:y}),_.createElement(SK,{cache:!c&&!d},k))})}))}),CK=_.forwardRef(function(n,e){var r=n.children,i=n.getTriggerDOMNode,o=Vm(r),s=_.useCallback(function(l){cT(e,i?i(l):l)},[i]),a=zf(s,bx(r));return o?_.cloneElement(r,{ref:a}):r}),SN=_.createContext(null);function wN(n){return n?Array.isArray(n)?n:[n]:[]}function EK(n,e,r,i){return _.useMemo(function(){var o=wN(r??e),s=wN(i??e),a=new Set(o),l=new Set(s);return n&&(a.has("hover")&&(a.delete("hover"),a.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[a,l]},[n,e,r,i])}function TK(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?n[0]===e[0]:n[0]===e[0]&&n[1]===e[1]}function MK(n,e,r,i){for(var o=r.points,s=Object.keys(n),a=0;a<s.length;a+=1){var l,c=s[a];if(TK((l=n[c])===null||l===void 0?void 0:l.points,o,i))return"".concat(e,"-placement-").concat(c)}return""}function CN(n,e,r,i){return e||(r?{motionName:"".concat(n,"-").concat(r)}:i?{motionName:i}:null)}function Zm(n){return n.ownerDocument.defaultView}function hC(n){for(var e=[],r=n==null?void 0:n.parentElement,i=["hidden","scroll","clip","auto"];r;){var o=Zm(r).getComputedStyle(r),s=o.overflowX,a=o.overflowY,l=o.overflow;[s,a,l].some(function(c){return i.includes(c)})&&e.push(r),r=r.parentElement}return e}function em(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?e:n}function vh(n){return em(parseFloat(n),0)}function EN(n,e){var r=re({},n);return(e||[]).forEach(function(i){if(!(i instanceof HTMLBodyElement||i instanceof HTMLHtmlElement)){var o=Zm(i).getComputedStyle(i),s=o.overflow,a=o.overflowClipMargin,l=o.borderTopWidth,c=o.borderBottomWidth,u=o.borderLeftWidth,d=o.borderRightWidth,f=i.getBoundingClientRect(),h=i.offsetHeight,p=i.clientHeight,g=i.offsetWidth,y=i.clientWidth,v=vh(l),m=vh(c),x=vh(u),b=vh(d),S=em(Math.round(f.width/g*1e3)/1e3),w=em(Math.round(f.height/h*1e3)/1e3),C=(g-y-x-b)*S,E=(h-p-v-m)*w,M=v*w,T=m*w,R=x*S,P=b*S,D=0,L=0;if(s==="clip"){var A=vh(a);D=A*S,L=A*w}var I=f.x+R-D,N=f.y+M-L,F=I+f.width+2*D-R-P-C,O=N+f.height+2*L-M-T-E;r.left=Math.max(r.left,I),r.top=Math.max(r.top,N),r.right=Math.min(r.right,F),r.bottom=Math.min(r.bottom,O)}}),r}function TN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),i=r.match(/^(.*)\%$/);return i?n*(parseFloat(i[1])/100):parseFloat(r)}function MN(n,e){var r=e||[],i=Ce(r,2),o=i[0],s=i[1];return[TN(n.width,o),TN(n.height,s)]}function RN(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function $u(n,e){var r=e[0],i=e[1],o,s;return r==="t"?s=n.y:r==="b"?s=n.y+n.height:s=n.y+n.height/2,i==="l"?o=n.x:i==="r"?o=n.x+n.width:o=n.x+n.width/2,{x:o,y:s}}function al(n,e){var r={t:"b",b:"t",l:"r",r:"l"};return n.map(function(i,o){return o===e?r[i]||"c":i}).join("")}function RK(n,e,r,i,o,s,a){var l=_.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[i]||{}}),c=Ce(l,2),u=c[0],d=c[1],f=_.useRef(0),h=_.useMemo(function(){return e?hC(e):[]},[e]),p=_.useRef({}),g=function(){p.current={}};n||g();var y=br(function(){if(e&&r&&n){let xi=function(Ou,ol){var Iu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe,vg=z.x+Ou,yg=z.y+ol,A_=vg+ge,Ct=yg+le,Bt=Math.max(vg,Iu.left),Kn=Math.max(yg,Iu.top),ur=Math.min(A_,Iu.right),Yn=Math.min(Ct,Iu.bottom);return Math.max(0,(ur-Bt)*(Yn-Kn))},Pu=function(){En=z.y+rt,ar=En+le,Vn=z.x+Xe,Ar=Vn+ge};var OR=xi,IR=Pu,x,b,S,w,C=e,E=C.ownerDocument,M=Zm(C),T=M.getComputedStyle(C),R=T.width,P=T.height,D=T.position,L=C.style.left,A=C.style.top,I=C.style.right,N=C.style.bottom,F=C.style.overflow,O=re(re({},o[i]),s),V=E.createElement("div");(x=C.parentElement)===null||x===void 0||x.appendChild(V),V.style.left="".concat(C.offsetLeft,"px"),V.style.top="".concat(C.offsetTop,"px"),V.style.position=D,V.style.height="".concat(C.offsetHeight,"px"),V.style.width="".concat(C.offsetWidth,"px"),C.style.left="0",C.style.top="0",C.style.right="auto",C.style.bottom="auto",C.style.overflow="hidden";var U;if(Array.isArray(r))U={x:r[0],y:r[1],width:0,height:0};else{var k,W,J=r.getBoundingClientRect();J.x=(k=J.x)!==null&&k!==void 0?k:J.left,J.y=(W=J.y)!==null&&W!==void 0?W:J.top,U={x:J.x,y:J.y,width:J.width,height:J.height}}var z=C.getBoundingClientRect();z.x=(b=z.x)!==null&&b!==void 0?b:z.left,z.y=(S=z.y)!==null&&S!==void 0?S:z.top;var j=E.documentElement,X=j.clientWidth,Q=j.clientHeight,ne=j.scrollWidth,ye=j.scrollHeight,me=j.scrollTop,fe=j.scrollLeft,le=z.height,ge=z.width,q=U.height,ve=U.width,be={left:0,top:0,right:X,bottom:Q},xe={left:-fe,top:-me,right:ne-fe,bottom:ye-me},we=O.htmlRegion,qe="visible",Fe="visibleFirst";we!=="scroll"&&we!==Fe&&(we=qe);var H=we===Fe,B=EN(xe,h),K=EN(be,h),oe=we===qe?K:B,pe=H?K:oe;C.style.left="auto",C.style.top="auto",C.style.right="0",C.style.bottom="0";var ce=C.getBoundingClientRect();C.style.left=L,C.style.top=A,C.style.right=I,C.style.bottom=N,C.style.overflow=F,(w=C.parentElement)===null||w===void 0||w.removeChild(V);var Ue=em(Math.round(ge/parseFloat(R)*1e3)/1e3),Re=em(Math.round(le/parseFloat(P)*1e3)/1e3);if(Ue===0||Re===0||jp(r)&&!jU(r))return;var Le=O.offset,Je=O.targetOffset,Me=MN(z,Le),ze=Ce(Me,2),Ee=ze[0],Pe=ze[1],ke=MN(U,Je),Ve=Ce(ke,2),$e=Ve[0],xt=Ve[1];U.x-=$e,U.y-=xt;var te=O.points||[],Qe=Ce(te,2),Se=Qe[0],Oe=Qe[1],Ze=RN(Oe),We=RN(Se),wt=$u(U,Ze),Rt=$u(z,We),dt=re({},O),Xe=wt.x-Rt.x+Ee,rt=wt.y-Rt.y+Pe,Lt=xi(Xe,rt),bn=xi(Xe,rt,K),Ke=$u(U,["t","l"]),ot=$u(z,["t","l"]),yt=$u(U,["b","r"]),ft=$u(z,["b","r"]),bt=O.overflow||{},It=bt.adjustX,yn=bt.adjustY,un=bt.shiftX,Bn=bt.shiftY,en=function(ol){return typeof ol=="boolean"?ol:ol>=0},En,ar,Vn,Ar;Pu();var vt=en(yn),$=We[0]===Ze[0];if(vt&&We[0]==="t"&&(ar>pe.bottom||p.current.bt)){var Z=rt;$?Z-=le-q:Z=Ke.y-ft.y-Pe;var de=xi(Xe,Z),he=xi(Xe,Z,K);de>Lt||de===Lt&&(!H||he>=bn)?(p.current.bt=!0,rt=Z,Pe=-Pe,dt.points=[al(We,0),al(Ze,0)]):p.current.bt=!1}if(vt&&We[0]==="b"&&(En<pe.top||p.current.tb)){var ae=rt;$?ae+=le-q:ae=yt.y-ot.y-Pe;var Ge=xi(Xe,ae),at=xi(Xe,ae,K);Ge>Lt||Ge===Lt&&(!H||at>=bn)?(p.current.tb=!0,rt=ae,Pe=-Pe,dt.points=[al(We,0),al(Ze,0)]):p.current.tb=!1}var ht=en(It),mt=We[1]===Ze[1];if(ht&&We[1]==="l"&&(Ar>pe.right||p.current.rl)){var Et=Xe;mt?Et-=ge-ve:Et=Ke.x-ft.x-Ee;var Ye=xi(Et,rt),et=xi(Et,rt,K);Ye>Lt||Ye===Lt&&(!H||et>=bn)?(p.current.rl=!0,Xe=Et,Ee=-Ee,dt.points=[al(We,1),al(Ze,1)]):p.current.rl=!1}if(ht&&We[1]==="r"&&(Vn<pe.left||p.current.lr)){var _t=Xe;mt?_t+=ge-ve:_t=yt.x-ot.x-Ee;var zt=xi(_t,rt),pn=xi(_t,rt,K);zt>Lt||zt===Lt&&(!H||pn>=bn)?(p.current.lr=!0,Xe=_t,Ee=-Ee,dt.points=[al(We,1),al(Ze,1)]):p.current.lr=!1}Pu();var dn=un===!0?0:un;typeof dn=="number"&&(Vn<K.left&&(Xe-=Vn-K.left-Ee,U.x+ve<K.left+dn&&(Xe+=U.x-K.left+ve-dn)),Ar>K.right&&(Xe-=Ar-K.right-Ee,U.x>K.right-dn&&(Xe+=U.x-K.right+dn)));var kt=Bn===!0?0:Bn;typeof kt=="number"&&(En<K.top&&(rt-=En-K.top-Pe,U.y+q<K.top+kt&&(rt+=U.y-K.top+q-kt)),ar>K.bottom&&(rt-=ar-K.bottom-Pe,U.y>K.bottom-kt&&(rt+=U.y-K.bottom+kt)));var At=z.x+Xe,$n=At+ge,Wt=z.y+rt,Nr=Wt+le,Gt=U.x,Pt=Gt+ve,zn=U.y,Kt=zn+q,ln=Math.max(At,Gt),mn=Math.min($n,Pt),Tn=(ln+mn)/2,An=Tn-At,yi=Math.max(Wt,zn),Pr=Math.min(Nr,Kt),Qo=(yi+Pr)/2,il=Qo-Wt;a==null||a(e,dt);var Rs=ce.right-z.x-(Xe+z.width),As=ce.bottom-z.y-(rt+z.height);Ue===1&&(Xe=Math.round(Xe),Rs=Math.round(Rs)),Re===1&&(rt=Math.round(rt),As=Math.round(As));var R_={ready:!0,offsetX:Xe/Ue,offsetY:rt/Re,offsetR:Rs/Ue,offsetB:As/Re,arrowX:An/Ue,arrowY:il/Re,scaleX:Ue,scaleY:Re,align:dt};d(R_)}}),v=function(){f.current+=1;var b=f.current;Promise.resolve().then(function(){f.current===b&&y()})},m=function(){d(function(b){return re(re({},b),{},{ready:!1})})};return _n(m,[i]),_n(function(){n||m()},[n]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,v]}function AK(n,e,r,i,o){_n(function(){if(n&&e&&r){let h=function(){i(),o()};var f=h,s=e,a=r,l=hC(s),c=hC(a),u=Zm(a),d=new Set([u].concat(st(l),st(c)));return d.forEach(function(p){p.addEventListener("scroll",h,{passive:!0})}),u.addEventListener("resize",h,{passive:!0}),i(),function(){d.forEach(function(p){p.removeEventListener("scroll",h),u.removeEventListener("resize",h)})}}},[n,e,r])}function NK(n,e,r,i,o,s,a,l){var c=_.useRef(n);c.current=n;var u=_.useRef(!1);_.useEffect(function(){if(e&&i&&(!o||s)){var f=function(){u.current=!1},h=function(v){var m;c.current&&!a(((m=v.composedPath)===null||m===void 0||(m=m.call(v))===null||m===void 0?void 0:m[0])||v.target)&&!u.current&&l(!1)},p=Zm(i);p.addEventListener("pointerdown",f,!0),p.addEventListener("mousedown",h,!0),p.addEventListener("contextmenu",h,!0);var g=oy(r);return g&&(g.addEventListener("mousedown",h,!0),g.addEventListener("contextmenu",h,!0)),function(){p.removeEventListener("pointerdown",f,!0),p.removeEventListener("mousedown",h,!0),p.removeEventListener("contextmenu",h,!0),g&&(g.removeEventListener("mousedown",h,!0),g.removeEventListener("contextmenu",h,!0))}}},[e,r,i,o,s]);function d(){u.current=!0}return d}var PK=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function OK(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NT,e=_.forwardRef(function(r,i){var o=r.prefixCls,s=o===void 0?"rc-trigger-popup":o,a=r.children,l=r.action,c=l===void 0?"hover":l,u=r.showAction,d=r.hideAction,f=r.popupVisible,h=r.defaultPopupVisible,p=r.onPopupVisibleChange,g=r.afterPopupVisibleChange,y=r.mouseEnterDelay,v=r.mouseLeaveDelay,m=v===void 0?.1:v,x=r.focusDelay,b=r.blurDelay,S=r.mask,w=r.maskClosable,C=w===void 0?!0:w,E=r.getPopupContainer,M=r.forceRender,T=r.autoDestroy,R=r.destroyPopupOnHide,P=r.popup,D=r.popupClassName,L=r.popupStyle,A=r.popupPlacement,I=r.builtinPlacements,N=I===void 0?{}:I,F=r.popupAlign,O=r.zIndex,V=r.stretch,U=r.getPopupClassNameFromAlign,k=r.fresh,W=r.alignPoint,J=r.onPopupClick,z=r.onPopupAlign,j=r.arrow,X=r.popupMotion,Q=r.maskMotion,ne=r.popupTransitionName,ye=r.popupAnimation,me=r.maskTransitionName,fe=r.maskAnimation,le=r.className,ge=r.getTriggerDOMNode,q=Cn(r,PK),ve=T||R||!1,be=_.useState(!1),xe=Ce(be,2),we=xe[0],qe=xe[1];_n(function(){qe(BB())},[]);var Fe=_.useRef({}),H=_.useContext(SN),B=_.useMemo(function(){return{registerSubPopup:function(Bt,Kn){Fe.current[Bt]=Kn,H==null||H.registerSubPopup(Bt,Kn)}}},[H]),K=uB(),oe=_.useState(null),pe=Ce(oe,2),ce=pe[0],Ue=pe[1],Re=_.useRef(null),Le=br(function(Ct){Re.current=Ct,jp(Ct)&&ce!==Ct&&Ue(Ct),H==null||H.registerSubPopup(K,Ct)}),Je=_.useState(null),Me=Ce(Je,2),ze=Me[0],Ee=Me[1],Pe=_.useRef(null),ke=br(function(Ct){jp(Ct)&&ze!==Ct&&(Ee(Ct),Pe.current=Ct)}),Ve=_.Children.only(a),$e=(Ve==null?void 0:Ve.props)||{},xt={},te=br(function(Ct){var Bt,Kn,ur=ze;return(ur==null?void 0:ur.contains(Ct))||((Bt=oy(ur))===null||Bt===void 0?void 0:Bt.host)===Ct||Ct===ur||(ce==null?void 0:ce.contains(Ct))||((Kn=oy(ce))===null||Kn===void 0?void 0:Kn.host)===Ct||Ct===ce||Object.values(Fe.current).some(function(Yn){return(Yn==null?void 0:Yn.contains(Ct))||Ct===Yn})}),Qe=CN(s,X,ye,ne),Se=CN(s,Q,fe,me),Oe=_.useState(h||!1),Ze=Ce(Oe,2),We=Ze[0],wt=Ze[1],Rt=f??We,dt=br(function(Ct){f===void 0&&wt(Ct)});_n(function(){wt(f||!1)},[f]);var Xe=_.useRef(Rt);Xe.current=Rt;var rt=_.useRef([]);rt.current=[];var Lt=br(function(Ct){var Bt;dt(Ct),((Bt=rt.current[rt.current.length-1])!==null&&Bt!==void 0?Bt:Rt)!==Ct&&(rt.current.push(Ct),p==null||p(Ct))}),bn=_.useRef(),Ke=function(){clearTimeout(bn.current)},ot=function(Bt){var Kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ke(),Kn===0?Lt(Bt):bn.current=setTimeout(function(){Lt(Bt)},Kn*1e3)};_.useEffect(function(){return Ke},[]);var yt=_.useState(!1),ft=Ce(yt,2),bt=ft[0],It=ft[1];_n(function(Ct){(!Ct||Rt)&&It(!0)},[Rt]);var yn=_.useState(null),un=Ce(yn,2),Bn=un[0],en=un[1],En=_.useState(null),ar=Ce(En,2),Vn=ar[0],Ar=ar[1],vt=function(Bt){Ar([Bt.clientX,Bt.clientY])},$=RK(Rt,ce,W&&Vn!==null?Vn:ze,A,N,F,z),Z=Ce($,11),de=Z[0],he=Z[1],ae=Z[2],Ge=Z[3],at=Z[4],ht=Z[5],mt=Z[6],Et=Z[7],Ye=Z[8],et=Z[9],_t=Z[10],zt=EK(we,c,u,d),pn=Ce(zt,2),dn=pn[0],kt=pn[1],At=dn.has("click"),$n=kt.has("click")||kt.has("contextMenu"),Wt=br(function(){bt||_t()}),Nr=function(){Xe.current&&W&&$n&&ot(!1)};AK(Rt,ze,ce,Wt,Nr),_n(function(){Wt()},[Vn,A]),_n(function(){Rt&&!(N!=null&&N[A])&&Wt()},[JSON.stringify(F)]);var Gt=_.useMemo(function(){var Ct=MK(N,s,et,W);return _e(Ct,U==null?void 0:U(et))},[et,U,N,s,W]);_.useImperativeHandle(i,function(){return{nativeElement:Pe.current,popupElement:Re.current,forceAlign:Wt}});var Pt=_.useState(0),zn=Ce(Pt,2),Kt=zn[0],ln=zn[1],mn=_.useState(0),Tn=Ce(mn,2),An=Tn[0],yi=Tn[1],Pr=function(){if(V&&ze){var Bt=ze.getBoundingClientRect();ln(Bt.width),yi(Bt.height)}},Qo=function(){Pr(),Wt()},il=function(Bt){It(!1),_t(),g==null||g(Bt)},Rs=function(){return new Promise(function(Bt){Pr(),en(function(){return Bt})})};_n(function(){Bn&&(_t(),Bn(),en(null))},[Bn]);function As(Ct,Bt,Kn,ur){xt[Ct]=function(Yn){var xg;ur==null||ur(Yn),ot(Bt,Kn);for(var N_=arguments.length,DR=new Array(N_>1?N_-1:0),_g=1;_g<N_;_g++)DR[_g-1]=arguments[_g];(xg=$e[Ct])===null||xg===void 0||xg.call.apply(xg,[$e,Yn].concat(DR))}}(At||$n)&&(xt.onClick=function(Ct){var Bt;Xe.current&&$n?ot(!1):!Xe.current&&At&&(vt(Ct),ot(!0));for(var Kn=arguments.length,ur=new Array(Kn>1?Kn-1:0),Yn=1;Yn<Kn;Yn++)ur[Yn-1]=arguments[Yn];(Bt=$e.onClick)===null||Bt===void 0||Bt.call.apply(Bt,[$e,Ct].concat(ur))});var R_=NK(Rt,$n,ze,ce,S,C,te,ot),OR=dn.has("hover"),IR=kt.has("hover"),xi,Pu;OR&&(As("onMouseEnter",!0,y,function(Ct){vt(Ct)}),As("onPointerEnter",!0,y,function(Ct){vt(Ct)}),xi=function(Bt){(Rt||bt)&&ce!==null&&ce!==void 0&&ce.contains(Bt.target)&&ot(!0,y)},W&&(xt.onMouseMove=function(Ct){var Bt;(Bt=$e.onMouseMove)===null||Bt===void 0||Bt.call($e,Ct)})),IR&&(As("onMouseLeave",!1,m),As("onPointerLeave",!1,m),Pu=function(){ot(!1,m)}),dn.has("focus")&&As("onFocus",!0,x),kt.has("focus")&&As("onBlur",!1,b),dn.has("contextMenu")&&(xt.onContextMenu=function(Ct){var Bt;Xe.current&&kt.has("contextMenu")?ot(!1):(vt(Ct),ot(!0)),Ct.preventDefault();for(var Kn=arguments.length,ur=new Array(Kn>1?Kn-1:0),Yn=1;Yn<Kn;Yn++)ur[Yn-1]=arguments[Yn];(Bt=$e.onContextMenu)===null||Bt===void 0||Bt.call.apply(Bt,[$e,Ct].concat(ur))}),le&&(xt.className=_e($e.className,le));var Ou=re(re({},$e),xt),ol={},Iu=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Iu.forEach(function(Ct){q[Ct]&&(ol[Ct]=function(){for(var Bt,Kn=arguments.length,ur=new Array(Kn),Yn=0;Yn<Kn;Yn++)ur[Yn]=arguments[Yn];(Bt=Ou[Ct])===null||Bt===void 0||Bt.call.apply(Bt,[Ou].concat(ur)),q[Ct].apply(q,ur)})});var vg=_.cloneElement(Ve,re(re({},Ou),ol)),yg={x:ht,y:mt},A_=j?re({},j!==!0?j:{}):null;return _.createElement(_.Fragment,null,_.createElement(Za,{disabled:!Rt,ref:ke,onResize:Qo},_.createElement(CK,{getTriggerDOMNode:ge},vg)),_.createElement(SN.Provider,{value:B},_.createElement(wK,{portal:n,ref:Le,prefixCls:s,popup:P,className:_e(D,Gt),style:L,target:ze,onMouseEnter:xi,onMouseLeave:Pu,onPointerEnter:xi,zIndex:O,open:Rt,keepDom:bt,fresh:k,onClick:J,onPointerDownCapture:R_,mask:S,motion:Qe,maskMotion:Se,onVisibleChanged:il,onPrepare:Rs,forceRender:M,autoDestroy:ve,getPopupContainer:E,align:et,arrow:A_,arrowPos:yg,ready:de,offsetX:he,offsetY:ae,offsetR:Ge,offsetB:at,onAlign:Wt,stretch:V,targetWidth:Kt/Et,targetHeight:An/Ye})))});return e}const qB=OK(NT);var IK=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],DK=function(e){var r=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},LK=function(e,r){var i=e.prefixCls;e.disabled;var o=e.visible,s=e.children,a=e.popupElement,l=e.animation,c=e.transitionName,u=e.dropdownStyle,d=e.dropdownClassName,f=e.direction,h=f===void 0?"ltr":f,p=e.placement,g=e.builtinPlacements,y=e.dropdownMatchSelectWidth,v=e.dropdownRender,m=e.dropdownAlign,x=e.getPopupContainer,b=e.empty,S=e.getTriggerDOMNode,w=e.onPopupVisibleChange,C=e.onPopupMouseEnter,E=Cn(e,IK),M="".concat(i,"-dropdown"),T=a;v&&(T=v(a));var R=_.useMemo(function(){return g||DK(y)},[g,y]),P=l?"".concat(M,"-").concat(l):c,D=typeof y=="number",L=_.useMemo(function(){return D?null:y===!1?"minWidth":"width"},[y,D]),A=u;D&&(A=re(re({},A),{},{width:y}));var I=_.useRef(null);return _.useImperativeHandle(r,function(){return{getPopupElement:function(){var F;return(F=I.current)===null||F===void 0?void 0:F.popupElement}}}),_.createElement(qB,ut({},E,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:p||(h==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:R,prefixCls:M,popupTransitionName:P,popup:_.createElement("div",{onMouseEnter:C},T),ref:I,stretch:L,popupAlign:m,popupVisible:o,getPopupContainer:x,popupClassName:_e(d,ee({},"".concat(M,"-empty"),b)),popupStyle:A,getTriggerDOMNode:S,onPopupVisibleChange:w}),s)},FK=_.forwardRef(LK);function AN(n,e){var r=n.key,i;return"value"in n&&(i=n.value),r??(i!==void 0?i:"rc-index-key-".concat(e))}function pC(n){return typeof n<"u"&&!Number.isNaN(n)}function XB(n,e){var r=n||{},i=r.label,o=r.value,s=r.options,a=r.groupLabel,l=i||(e?"children":"label");return{label:l,value:o||"value",options:s||"options",groupLabel:a||l}}function UK(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.fieldNames,i=e.childrenAsData,o=[],s=XB(r,!1),a=s.label,l=s.value,c=s.options,u=s.groupLabel;function d(f,h){Array.isArray(f)&&f.forEach(function(p){if(h||!(c in p)){var g=p[l];o.push({key:AN(p,o.length),groupOption:h,data:p,label:p[a],value:g})}else{var y=p[u];y===void 0&&i&&(y=p.label),o.push({key:AN(p,o.length),group:!0,data:p,label:y}),d(p[c],!0)}})}return d(n,!1),o}function mC(n){var e=re({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return Yi(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var BK=function(e,r,i){if(!r||!r.length)return null;var o=!1,s=function l(c,u){var d=Y3(u),f=d[0],h=d.slice(1);if(!f)return[c];var p=c.split(f);return o=o||p.length>1,p.reduce(function(g,y){return[].concat(st(g),st(l(y,h)))},[]).filter(Boolean)},a=s(e,r);return o?typeof i<"u"?a.slice(0,i):a:null},OT=_.createContext(null);function $K(n){var e=n.visible,r=n.values;if(!e)return null;var i=50;return _.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(r.slice(0,i).map(function(o){var s=o.label,a=o.value;return["number","string"].includes(Mt(s))?s:a}).join(", ")),r.length>i?", ...":null)}var zK=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],kK=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],gC=function(e){return e==="tags"||e==="multiple"},VK=_.forwardRef(function(n,e){var r,i=n.id,o=n.prefixCls,s=n.className,a=n.showSearch,l=n.tagRender,c=n.direction,u=n.omitDomProps,d=n.displayValues,f=n.onDisplayValuesChange,h=n.emptyOptions,p=n.notFoundContent,g=p===void 0?"Not Found":p,y=n.onClear,v=n.mode,m=n.disabled,x=n.loading,b=n.getInputElement,S=n.getRawInputElement,w=n.open,C=n.defaultOpen,E=n.onDropdownVisibleChange,M=n.activeValue,T=n.onActiveValueChange,R=n.activeDescendantId,P=n.searchValue,D=n.autoClearSearchValue,L=n.onSearch,A=n.onSearchSplit,I=n.tokenSeparators,N=n.allowClear,F=n.prefix,O=n.suffixIcon,V=n.clearIcon,U=n.OptionList,k=n.animation,W=n.transitionName,J=n.dropdownStyle,z=n.dropdownClassName,j=n.dropdownMatchSelectWidth,X=n.dropdownRender,Q=n.dropdownAlign,ne=n.placement,ye=n.builtinPlacements,me=n.getPopupContainer,fe=n.showAction,le=fe===void 0?[]:fe,ge=n.onFocus,q=n.onBlur,ve=n.onKeyUp,be=n.onKeyDown,xe=n.onMouseDown,we=Cn(n,zK),qe=gC(v),Fe=(a!==void 0?a:qe)||v==="combobox",H=re({},we);kK.forEach(function(Gt){delete H[Gt]}),u==null||u.forEach(function(Gt){delete H[Gt]});var B=_.useState(!1),K=Ce(B,2),oe=K[0],pe=K[1];_.useEffect(function(){pe(BB())},[]);var ce=_.useRef(null),Ue=_.useRef(null),Re=_.useRef(null),Le=_.useRef(null),Je=_.useRef(null),Me=_.useRef(!1),ze=KX(),Ee=Ce(ze,3),Pe=Ee[0],ke=Ee[1],Ve=Ee[2];_.useImperativeHandle(e,function(){var Gt,Pt;return{focus:(Gt=Le.current)===null||Gt===void 0?void 0:Gt.focus,blur:(Pt=Le.current)===null||Pt===void 0?void 0:Pt.blur,scrollTo:function(Kt){var ln;return(ln=Je.current)===null||ln===void 0?void 0:ln.scrollTo(Kt)},nativeElement:ce.current||Ue.current}});var $e=_.useMemo(function(){var Gt;if(v!=="combobox")return P;var Pt=(Gt=d[0])===null||Gt===void 0?void 0:Gt.value;return typeof Pt=="string"||typeof Pt=="number"?String(Pt):""},[P,v,d]),xt=v==="combobox"&&typeof b=="function"&&b()||null,te=typeof S=="function"&&S(),Qe=zf(Ue,te==null||(r=te.props)===null||r===void 0?void 0:r.ref),Se=_.useState(!1),Oe=Ce(Se,2),Ze=Oe[0],We=Oe[1];_n(function(){We(!0)},[]);var wt=Zi(!1,{defaultValue:C,value:w}),Rt=Ce(wt,2),dt=Rt[0],Xe=Rt[1],rt=Ze?dt:!1,Lt=!g&&h;(m||Lt&&rt&&v==="combobox")&&(rt=!1);var bn=Lt?!1:rt,Ke=_.useCallback(function(Gt){var Pt=Gt!==void 0?Gt:!rt;m||(Xe(Pt),rt!==Pt&&(E==null||E(Pt)))},[m,rt,Xe,E]),ot=_.useMemo(function(){return(I||[]).some(function(Gt){return[`
`,`\r
`].includes(Gt)})},[I]),yt=_.useContext(OT)||{},ft=yt.maxCount,bt=yt.rawValues,It=function(Pt,zn,Kt){if(!(qe&&pC(ft)&&(bt==null?void 0:bt.size)>=ft)){var ln=!0,mn=Pt;T==null||T(null);var Tn=BK(Pt,I,pC(ft)?ft-bt.size:void 0),An=Kt?null:Tn;return v!=="combobox"&&An&&(mn="",A==null||A(An),Ke(!1),ln=!1),L&&$e!==mn&&L(mn,{source:zn?"typing":"effect"}),ln}},yn=function(Pt){!Pt||!Pt.trim()||L(Pt,{source:"submit"})};_.useEffect(function(){!rt&&!qe&&v!=="combobox"&&It("",!1,!1)},[rt]),_.useEffect(function(){dt&&m&&Xe(!1),m&&!Me.current&&ke(!1)},[m]);var un=zB(),Bn=Ce(un,2),en=Bn[0],En=Bn[1],ar=_.useRef(!1),Vn=function(Pt){var zn=en(),Kt=Pt.key,ln=Kt==="Enter";if(ln&&(v!=="combobox"&&Pt.preventDefault(),rt||Ke(!0)),En(!!$e),Kt==="Backspace"&&!zn&&qe&&!$e&&d.length){for(var mn=st(d),Tn=null,An=mn.length-1;An>=0;An-=1){var yi=mn[An];if(!yi.disabled){mn.splice(An,1),Tn=yi;break}}Tn&&f(mn,{type:"remove",values:[Tn]})}for(var Pr=arguments.length,Qo=new Array(Pr>1?Pr-1:0),il=1;il<Pr;il++)Qo[il-1]=arguments[il];if(rt&&(!ln||!ar.current)){var Rs;(Rs=Je.current)===null||Rs===void 0||Rs.onKeyDown.apply(Rs,[Pt].concat(Qo))}ln&&(ar.current=!0),be==null||be.apply(void 0,[Pt].concat(Qo))},Ar=function(Pt){for(var zn=arguments.length,Kt=new Array(zn>1?zn-1:0),ln=1;ln<zn;ln++)Kt[ln-1]=arguments[ln];if(rt){var mn;(mn=Je.current)===null||mn===void 0||mn.onKeyUp.apply(mn,[Pt].concat(Kt))}Pt.key==="Enter"&&(ar.current=!1),ve==null||ve.apply(void 0,[Pt].concat(Kt))},vt=function(Pt){var zn=d.filter(function(Kt){return Kt!==Pt});f(zn,{type:"remove",values:[Pt]})},$=_.useRef(!1),Z=function(){ke(!0),m||(ge&&!$.current&&ge.apply(void 0,arguments),le.includes("focus")&&Ke(!0)),$.current=!0},de=function(){Me.current=!0,ke(!1,function(){$.current=!1,Me.current=!1,Ke(!1)}),!m&&($e&&(v==="tags"?L($e,{source:"submit"}):v==="multiple"&&L("",{source:"blur"})),q&&q.apply(void 0,arguments))},he=[];_.useEffect(function(){return function(){he.forEach(function(Gt){return clearTimeout(Gt)}),he.splice(0,he.length)}},[]);var ae=function(Pt){var zn,Kt=Pt.target,ln=(zn=Re.current)===null||zn===void 0?void 0:zn.getPopupElement();if(ln&&ln.contains(Kt)){var mn=setTimeout(function(){var Pr=he.indexOf(mn);if(Pr!==-1&&he.splice(Pr,1),Ve(),!oe&&!ln.contains(document.activeElement)){var Qo;(Qo=Le.current)===null||Qo===void 0||Qo.focus()}});he.push(mn)}for(var Tn=arguments.length,An=new Array(Tn>1?Tn-1:0),yi=1;yi<Tn;yi++)An[yi-1]=arguments[yi];xe==null||xe.apply(void 0,[Pt].concat(An))},Ge=_.useState({}),at=Ce(Ge,2),ht=at[1];function mt(){ht({})}var Et;te&&(Et=function(Pt){Ke(Pt)}),YX(function(){var Gt;return[ce.current,(Gt=Re.current)===null||Gt===void 0?void 0:Gt.getPopupElement()]},bn,Ke,!!te);var Ye=_.useMemo(function(){return re(re({},n),{},{notFoundContent:g,open:rt,triggerOpen:bn,id:i,showSearch:Fe,multiple:qe,toggleOpen:Ke})},[n,g,bn,rt,i,Fe,qe,Ke]),et=!!O||x,_t;et&&(_t=_.createElement(kx,{className:_e("".concat(o,"-arrow"),ee({},"".concat(o,"-arrow-loading"),x)),customizeIcon:O,customizeIconProps:{loading:x,searchValue:$e,open:rt,focused:Pe,showSearch:Fe}}));var zt=function(){var Pt;y==null||y(),(Pt=Le.current)===null||Pt===void 0||Pt.focus(),f([],{type:"clear",values:d}),It("",!1,!1)},pn=qX(o,zt,d,N,V,m,$e,v),dn=pn.allowClear,kt=pn.clearIcon,At=_.createElement(U,{ref:Je}),$n=_e(o,s,ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({},"".concat(o,"-focused"),Pe),"".concat(o,"-multiple"),qe),"".concat(o,"-single"),!qe),"".concat(o,"-allow-clear"),N),"".concat(o,"-show-arrow"),et),"".concat(o,"-disabled"),m),"".concat(o,"-loading"),x),"".concat(o,"-open"),rt),"".concat(o,"-customize-input"),xt),"".concat(o,"-show-search"),Fe)),Wt=_.createElement(FK,{ref:Re,disabled:m,prefixCls:o,visible:bn,popupElement:At,animation:k,transitionName:W,dropdownStyle:J,dropdownClassName:z,direction:c,dropdownMatchSelectWidth:j,dropdownRender:X,dropdownAlign:Q,placement:ne,builtinPlacements:ye,getPopupContainer:me,empty:h,getTriggerDOMNode:function(Pt){return Ue.current||Pt},onPopupVisibleChange:Et,onPopupMouseEnter:mt},te?_.cloneElement(te,{ref:Qe}):_.createElement(xK,ut({},n,{domRef:Ue,prefixCls:o,inputElement:xt,ref:Le,id:i,prefix:F,showSearch:Fe,autoClearSearchValue:D,mode:v,activeDescendantId:R,tagRender:l,values:d,open:rt,onToggleOpen:Ke,activeValue:M,searchValue:$e,onSearch:It,onSearchSubmit:yn,onRemove:vt,tokenWithEnter:ot}))),Nr;return te?Nr=Wt:Nr=_.createElement("div",ut({className:$n},H,{ref:ce,onMouseDown:ae,onKeyDown:Vn,onKeyUp:Ar,onFocus:Z,onBlur:de}),_.createElement($K,{visible:Pe&&!rt,values:d}),Wt,_t,dn&&kt),_.createElement($B.Provider,{value:Ye},Nr)}),IT=function(){return null};IT.isSelectOptGroup=!0;var DT=function(){return null};DT.isSelectOption=!0;var KB=_.forwardRef(function(n,e){var r=n.height,i=n.offsetY,o=n.offsetX,s=n.children,a=n.prefixCls,l=n.onInnerResize,c=n.innerProps,u=n.rtl,d=n.extra,f={},h={display:"flex",flexDirection:"column"};return i!==void 0&&(f={height:r,position:"relative",overflow:"hidden"},h=re(re({},h),{},ee(ee(ee(ee(ee({transform:"translateY(".concat(i,"px)")},u?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),_.createElement("div",{style:f},_.createElement(Za,{onResize:function(g){var y=g.offsetHeight;y&&l&&l()}},_.createElement("div",ut({style:h,className:_e(ee({},"".concat(a,"-holder-inner"),a)),ref:e},c),s,d)))});KB.displayName="Filler";function GK(n){var e=n.children,r=n.setRef,i=_.useCallback(function(o){r(o)},[]);return _.cloneElement(e,{ref:i})}function HK(n,e,r,i,o,s,a,l){var c=l.getKey;return n.slice(e,r+1).map(function(u,d){var f=e+d,h=a(u,f,{style:{width:i},offsetX:o}),p=c(u);return _.createElement(GK,{key:p,setRef:function(y){return s(u,y)}},h)})}function jK(n,e,r){var i=n.length,o=e.length,s,a;if(i===0&&o===0)return null;i<o?(s=n,a=e):(s=e,a=n);var l={__EMPTY_ITEM__:!0};function c(g){return g!==void 0?r(g):l}for(var u=null,d=Math.abs(i-o)!==1,f=0;f<a.length;f+=1){var h=c(s[f]),p=c(a[f]);if(h!==p){u=f,d=d||h!==c(a[f+1]);break}}return u===null?null:{index:u,multiple:d}}function WK(n,e,r){var i=_.useState(n),o=Ce(i,2),s=o[0],a=o[1],l=_.useState(null),c=Ce(l,2),u=c[0],d=c[1];return _.useEffect(function(){var f=jK(s||[],n||[],e);(f==null?void 0:f.index)!==void 0&&d(n[f.index]),a(n)},[n]),[u]}var NN=(typeof navigator>"u"?"undefined":Mt(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const YB=function(n,e,r,i){var o=_.useRef(!1),s=_.useRef(null);function a(){clearTimeout(s.current),o.current=!0,s.current=setTimeout(function(){o.current=!1},50)}var l=_.useRef({top:n,bottom:e,left:r,right:i});return l.current.top=n,l.current.bottom=e,l.current.left=r,l.current.right=i,function(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=c?u<0&&l.current.left||u>0&&l.current.right:u<0&&l.current.top||u>0&&l.current.bottom;return d&&f?(clearTimeout(s.current),o.current=!1):(!f||o.current)&&a(),!o.current&&f}};function qK(n,e,r,i,o,s,a){var l=_.useRef(0),c=_.useRef(null),u=_.useRef(null),d=_.useRef(!1),f=YB(e,r,i,o);function h(x,b){if(pr.cancel(c.current),!f(!1,b)){var S=x;if(!S._virtualHandled)S._virtualHandled=!0;else return;l.current+=b,u.current=b,NN||S.preventDefault(),c.current=pr(function(){var w=d.current?10:1;a(l.current*w,!1),l.current=0})}}function p(x,b){a(b,!0),NN||x.preventDefault()}var g=_.useRef(null),y=_.useRef(null);function v(x){if(n){pr.cancel(y.current),y.current=pr(function(){g.current=null},2);var b=x.deltaX,S=x.deltaY,w=x.shiftKey,C=b,E=S;(g.current==="sx"||!g.current&&w&&S&&!b)&&(C=S,E=0,g.current="sx");var M=Math.abs(C),T=Math.abs(E);g.current===null&&(g.current=s&&M>T?"x":"y"),g.current==="y"?h(x,E):p(x,C)}}function m(x){n&&(d.current=x.detail===u.current)}return[v,m]}function XK(n,e,r,i){var o=_.useMemo(function(){return[new Map,[]]},[n,r.id,i]),s=Ce(o,2),a=s[0],l=s[1],c=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,h=a.get(d),p=a.get(f);if(h===void 0||p===void 0)for(var g=n.length,y=l.length;y<g;y+=1){var v,m=n[y],x=e(m);a.set(x,y);var b=(v=r.get(x))!==null&&v!==void 0?v:i;if(l[y]=(l[y-1]||0)+b,x===d&&(h=y),x===f&&(p=y),h!==void 0&&p!==void 0)break}return{top:l[h-1]||0,bottom:l[p]}};return c}var KK=function(){function n(){Gr(this,n),ee(this,"maps",void 0),ee(this,"id",0),ee(this,"diffKeys",new Set),this.maps=Object.create(null)}return Hr(n,[{key:"set",value:function(r,i){this.maps[r]=i,this.id+=1,this.diffKeys.add(r)}},{key:"get",value:function(r){return this.maps[r]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),n}();function PN(n){var e=parseFloat(n);return isNaN(e)?0:e}function YK(n,e,r){var i=_.useState(0),o=Ce(i,2),s=o[0],a=o[1],l=_.useRef(new Map),c=_.useRef(new KK),u=_.useRef(0);function d(){u.current+=1}function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;d();var g=function(){l.current.forEach(function(m,x){if(m&&m.offsetParent){var b=pp(m),S=b.offsetHeight,w=getComputedStyle(b),C=w.marginTop,E=w.marginBottom,M=PN(C),T=PN(E),R=S+M+T;c.current.get(x)!==R&&c.current.set(x,R)}}),a(function(m){return m+1})};if(p)g();else{u.current+=1;var y=u.current;Promise.resolve().then(function(){y===u.current&&g()})}}function h(p,g){var y=n(p);l.current.get(y),g?(l.current.set(y,g),f()):l.current.delete(y)}return _.useEffect(function(){return d},[]),[h,f,c.current,s]}var ON=14/15;function QK(n,e,r){var i=_.useRef(!1),o=_.useRef(0),s=_.useRef(0),a=_.useRef(null),l=_.useRef(null),c,u=function(p){if(i.current){var g=Math.ceil(p.touches[0].pageX),y=Math.ceil(p.touches[0].pageY),v=o.current-g,m=s.current-y,x=Math.abs(v)>Math.abs(m);x?o.current=g:s.current=y;var b=r(x,x?v:m,!1,p);b&&p.preventDefault(),clearInterval(l.current),b&&(l.current=setInterval(function(){x?v*=ON:m*=ON;var S=Math.floor(x?v:m);(!r(x,S,!0)||Math.abs(S)<=.1)&&clearInterval(l.current)},16))}},d=function(){i.current=!1,c()},f=function(p){c(),p.touches.length===1&&!i.current&&(i.current=!0,o.current=Math.ceil(p.touches[0].pageX),s.current=Math.ceil(p.touches[0].pageY),a.current=p.target,a.current.addEventListener("touchmove",u,{passive:!1}),a.current.addEventListener("touchend",d,{passive:!0}))};c=function(){a.current&&(a.current.removeEventListener("touchmove",u),a.current.removeEventListener("touchend",d))},_n(function(){return n&&e.current.addEventListener("touchstart",f,{passive:!0}),function(){var h;(h=e.current)===null||h===void 0||h.removeEventListener("touchstart",f),c(),clearInterval(l.current)}},[n])}function IN(n){return Math.floor(Math.pow(n,.5))}function vC(n,e){var r="touches"in n?n.touches[0]:n;return r[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}function ZK(n,e,r){_.useEffect(function(){var i=e.current;if(n&&i){var o=!1,s,a,l=function(){pr.cancel(s)},c=function h(){l(),s=pr(function(){r(a),h()})},u=function(p){var g=p;g._virtualHandled||(g._virtualHandled=!0,o=!0)},d=function(){o=!1,l()},f=function(p){if(o){var g=vC(p,!1),y=i.getBoundingClientRect(),v=y.top,m=y.bottom;if(g<=v){var x=v-g;a=-IN(x),c()}else if(g>=m){var b=g-m;a=IN(b),c()}else l()}};return i.addEventListener("mousedown",u),i.ownerDocument.addEventListener("mouseup",d),i.ownerDocument.addEventListener("mousemove",f),function(){i.removeEventListener("mousedown",u),i.ownerDocument.removeEventListener("mouseup",d),i.ownerDocument.removeEventListener("mousemove",f),l()}}},[n])}var JK=10;function eY(n,e,r,i,o,s,a,l){var c=_.useRef(),u=_.useState(null),d=Ce(u,2),f=d[0],h=d[1];return _n(function(){if(f&&f.times<JK){if(!n.current){h(function(V){return re({},V)});return}s();var p=f.targetAlign,g=f.originAlign,y=f.index,v=f.offset,m=n.current.clientHeight,x=!1,b=p,S=null;if(m){for(var w=p||g,C=0,E=0,M=0,T=Math.min(e.length-1,y),R=0;R<=T;R+=1){var P=o(e[R]);E=C;var D=r.get(P);M=E+(D===void 0?i:D),C=M}for(var L=w==="top"?v:m-v,A=T;A>=0;A-=1){var I=o(e[A]),N=r.get(I);if(N===void 0){x=!0;break}if(L-=N,L<=0)break}switch(w){case"top":S=E-v;break;case"bottom":S=M-m+v;break;default:{var F=n.current.scrollTop,O=F+m;E<F?b="top":M>O&&(b="bottom")}}S!==null&&a(S),S!==f.lastTop&&(x=!0)}x&&h(re(re({},f),{},{times:f.times+1,targetAlign:b,lastTop:S}))}},[f,n.current]),function(p){if(p==null){l();return}if(pr.cancel(c.current),typeof p=="number")a(p);else if(p&&Mt(p)==="object"){var g,y=p.align;"index"in p?g=p.index:g=e.findIndex(function(x){return o(x)===p.key});var v=p.offset,m=v===void 0?0:v;h({times:0,index:g,offset:m,originAlign:y})}}}var DN=_.forwardRef(function(n,e){var r=n.prefixCls,i=n.rtl,o=n.scrollOffset,s=n.scrollRange,a=n.onStartMove,l=n.onStopMove,c=n.onScroll,u=n.horizontal,d=n.spinSize,f=n.containerSize,h=n.style,p=n.thumbStyle,g=_.useState(!1),y=Ce(g,2),v=y[0],m=y[1],x=_.useState(null),b=Ce(x,2),S=b[0],w=b[1],C=_.useState(null),E=Ce(C,2),M=E[0],T=E[1],R=!i,P=_.useRef(),D=_.useRef(),L=_.useState(!1),A=Ce(L,2),I=A[0],N=A[1],F=_.useRef(),O=function(){clearTimeout(F.current),N(!0),F.current=setTimeout(function(){N(!1)},3e3)},V=s-f||0,U=f-d||0,k=_.useMemo(function(){if(o===0||V===0)return 0;var me=o/V;return me*U},[o,V,U]),W=function(fe){fe.stopPropagation(),fe.preventDefault()},J=_.useRef({top:k,dragging:v,pageY:S,startTop:M});J.current={top:k,dragging:v,pageY:S,startTop:M};var z=function(fe){m(!0),w(vC(fe,u)),T(J.current.top),a(),fe.stopPropagation(),fe.preventDefault()};_.useEffect(function(){var me=function(q){q.preventDefault()},fe=P.current,le=D.current;return fe.addEventListener("touchstart",me,{passive:!1}),le.addEventListener("touchstart",z,{passive:!1}),function(){fe.removeEventListener("touchstart",me),le.removeEventListener("touchstart",z)}},[]);var j=_.useRef();j.current=V;var X=_.useRef();X.current=U,_.useEffect(function(){if(v){var me,fe=function(q){var ve=J.current,be=ve.dragging,xe=ve.pageY,we=ve.startTop;pr.cancel(me);var qe=P.current.getBoundingClientRect(),Fe=f/(u?qe.width:qe.height);if(be){var H=(vC(q,u)-xe)*Fe,B=we;!R&&u?B-=H:B+=H;var K=j.current,oe=X.current,pe=oe?B/oe:0,ce=Math.ceil(pe*K);ce=Math.max(ce,0),ce=Math.min(ce,K),me=pr(function(){c(ce,u)})}},le=function(){m(!1),l()};return window.addEventListener("mousemove",fe,{passive:!0}),window.addEventListener("touchmove",fe,{passive:!0}),window.addEventListener("mouseup",le,{passive:!0}),window.addEventListener("touchend",le,{passive:!0}),function(){window.removeEventListener("mousemove",fe),window.removeEventListener("touchmove",fe),window.removeEventListener("mouseup",le),window.removeEventListener("touchend",le),pr.cancel(me)}}},[v]),_.useEffect(function(){return O(),function(){clearTimeout(F.current)}},[o]),_.useImperativeHandle(e,function(){return{delayHidden:O}});var Q="".concat(r,"-scrollbar"),ne={position:"absolute",visibility:I?null:"hidden"},ye={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(ne.height=8,ne.left=0,ne.right=0,ne.bottom=0,ye.height="100%",ye.width=d,R?ye.left=k:ye.right=k):(ne.width=8,ne.top=0,ne.bottom=0,R?ne.right=0:ne.left=0,ye.width="100%",ye.height=d,ye.top=k),_.createElement("div",{ref:P,className:_e(Q,ee(ee(ee({},"".concat(Q,"-horizontal"),u),"".concat(Q,"-vertical"),!u),"".concat(Q,"-visible"),I)),style:re(re({},ne),h),onMouseDown:W,onMouseMove:O},_.createElement("div",{ref:D,className:_e("".concat(Q,"-thumb"),ee({},"".concat(Q,"-thumb-moving"),v)),style:re(re({},ye),p),onMouseDown:z}))}),tY=20;function LN(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=n/e*n;return isNaN(r)&&(r=0),r=Math.max(r,tY),Math.floor(r)}var nY=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],rY=[],iY={overflowY:"auto",overflowAnchor:"none"};function oY(n,e){var r=n.prefixCls,i=r===void 0?"rc-virtual-list":r,o=n.className,s=n.height,a=n.itemHeight,l=n.fullHeight,c=l===void 0?!0:l,u=n.style,d=n.data,f=n.children,h=n.itemKey,p=n.virtual,g=n.direction,y=n.scrollWidth,v=n.component,m=v===void 0?"div":v,x=n.onScroll,b=n.onVirtualScroll,S=n.onVisibleChange,w=n.innerProps,C=n.extraRender,E=n.styles,M=Cn(n,nY),T=_.useCallback(function(vt){return typeof h=="function"?h(vt):vt==null?void 0:vt[h]},[h]),R=YK(T),P=Ce(R,4),D=P[0],L=P[1],A=P[2],I=P[3],N=!!(p!==!1&&s&&a),F=_.useMemo(function(){return Object.values(A.maps).reduce(function(vt,$){return vt+$},0)},[A.id,A.maps]),O=N&&d&&(Math.max(a*d.length,F)>s||!!y),V=g==="rtl",U=_e(i,ee({},"".concat(i,"-rtl"),V),o),k=d||rY,W=_.useRef(),J=_.useRef(),z=_.useRef(),j=_.useState(0),X=Ce(j,2),Q=X[0],ne=X[1],ye=_.useState(0),me=Ce(ye,2),fe=me[0],le=me[1],ge=_.useState(!1),q=Ce(ge,2),ve=q[0],be=q[1],xe=function(){be(!0)},we=function(){be(!1)},qe={getKey:T};function Fe(vt){ne(function($){var Z;typeof vt=="function"?Z=vt($):Z=vt;var de=Oe(Z);return W.current.scrollTop=de,de})}var H=_.useRef({start:0,end:k.length}),B=_.useRef(),K=WK(k,T),oe=Ce(K,1),pe=oe[0];B.current=pe;var ce=_.useMemo(function(){if(!N)return{scrollHeight:void 0,start:0,end:k.length-1,offset:void 0};if(!O){var vt;return{scrollHeight:((vt=J.current)===null||vt===void 0?void 0:vt.offsetHeight)||0,start:0,end:k.length-1,offset:void 0}}for(var $=0,Z,de,he,ae=k.length,Ge=0;Ge<ae;Ge+=1){var at=k[Ge],ht=T(at),mt=A.get(ht),Et=$+(mt===void 0?a:mt);Et>=Q&&Z===void 0&&(Z=Ge,de=$),Et>Q+s&&he===void 0&&(he=Ge),$=Et}return Z===void 0&&(Z=0,de=0,he=Math.ceil(s/a)),he===void 0&&(he=k.length-1),he=Math.min(he+1,k.length-1),{scrollHeight:$,start:Z,end:he,offset:de}},[O,N,Q,k,I,s]),Ue=ce.scrollHeight,Re=ce.start,Le=ce.end,Je=ce.offset;H.current.start=Re,H.current.end=Le,_.useLayoutEffect(function(){var vt=A.getRecord();if(vt.size===1){var $=Array.from(vt)[0],Z=T(k[Re]);if(Z===$){var de=A.get($),he=de-a;Fe(function(ae){return ae+he})}}A.resetRecord()},[Ue]);var Me=_.useState({width:0,height:s}),ze=Ce(Me,2),Ee=ze[0],Pe=ze[1],ke=function($){Pe({width:$.offsetWidth,height:$.offsetHeight})},Ve=_.useRef(),$e=_.useRef(),xt=_.useMemo(function(){return LN(Ee.width,y)},[Ee.width,y]),te=_.useMemo(function(){return LN(Ee.height,Ue)},[Ee.height,Ue]),Qe=Ue-s,Se=_.useRef(Qe);Se.current=Qe;function Oe(vt){var $=vt;return Number.isNaN(Se.current)||($=Math.min($,Se.current)),$=Math.max($,0),$}var Ze=Q<=0,We=Q>=Qe,wt=fe<=0,Rt=fe>=y,dt=YB(Ze,We,wt,Rt),Xe=function(){return{x:V?-fe:fe,y:Q}},rt=_.useRef(Xe()),Lt=br(function(vt){if(b){var $=re(re({},Xe()),vt);(rt.current.x!==$.x||rt.current.y!==$.y)&&(b($),rt.current=$)}});function bn(vt,$){var Z=vt;$?(Ql.flushSync(function(){le(Z)}),Lt()):Fe(Z)}function Ke(vt){var $=vt.currentTarget.scrollTop;$!==Q&&Fe($),x==null||x(vt),Lt()}var ot=function($){var Z=$,de=y?y-Ee.width:0;return Z=Math.max(Z,0),Z=Math.min(Z,de),Z},yt=br(function(vt,$){$?(Ql.flushSync(function(){le(function(Z){var de=Z+(V?-vt:vt);return ot(de)})}),Lt()):Fe(function(Z){var de=Z+vt;return de})}),ft=qK(N,Ze,We,wt,Rt,!!y,yt),bt=Ce(ft,2),It=bt[0],yn=bt[1];QK(N,W,function(vt,$,Z,de){var he=de;return dt(vt,$,Z)?!1:!he||!he._virtualHandled?(he&&(he._virtualHandled=!0),It({preventDefault:function(){},deltaX:vt?$:0,deltaY:vt?0:$}),!0):!1}),ZK(O,W,function(vt){Fe(function($){return $+vt})}),_n(function(){function vt(Z){var de=Ze&&Z.detail<0,he=We&&Z.detail>0;N&&!de&&!he&&Z.preventDefault()}var $=W.current;return $.addEventListener("wheel",It,{passive:!1}),$.addEventListener("DOMMouseScroll",yn,{passive:!0}),$.addEventListener("MozMousePixelScroll",vt,{passive:!1}),function(){$.removeEventListener("wheel",It),$.removeEventListener("DOMMouseScroll",yn),$.removeEventListener("MozMousePixelScroll",vt)}},[N,Ze,We]),_n(function(){if(y){var vt=ot(fe);le(vt),Lt({x:vt})}},[Ee.width,y]);var un=function(){var $,Z;($=Ve.current)===null||$===void 0||$.delayHidden(),(Z=$e.current)===null||Z===void 0||Z.delayHidden()},Bn=eY(W,k,A,a,T,function(){return L(!0)},Fe,un);_.useImperativeHandle(e,function(){return{nativeElement:z.current,getScrollInfo:Xe,scrollTo:function($){function Z(de){return de&&Mt(de)==="object"&&("left"in de||"top"in de)}Z($)?($.left!==void 0&&le(ot($.left)),Bn($.top)):Bn($)}}}),_n(function(){if(S){var vt=k.slice(Re,Le+1);S(vt,k)}},[Re,Le,k]);var en=XK(k,T,A,a),En=C==null?void 0:C({start:Re,end:Le,virtual:O,offsetX:fe,offsetY:Je,rtl:V,getSize:en}),ar=HK(k,Re,Le,y,fe,D,f,qe),Vn=null;s&&(Vn=re(ee({},c?"height":"maxHeight",s),iY),N&&(Vn.overflowY="hidden",y&&(Vn.overflowX="hidden"),ve&&(Vn.pointerEvents="none")));var Ar={};return V&&(Ar.dir="rtl"),_.createElement("div",ut({ref:z,style:re(re({},u),{},{position:"relative"}),className:U},Ar,M),_.createElement(Za,{onResize:ke},_.createElement(m,{className:"".concat(i,"-holder"),style:Vn,ref:W,onScroll:Ke,onMouseEnter:un},_.createElement(KB,{prefixCls:i,height:Ue,offsetX:fe,offsetY:Je,scrollWidth:y,onInnerResize:L,ref:J,innerProps:w,rtl:V,extra:En},ar))),O&&Ue>s&&_.createElement(DN,{ref:Ve,prefixCls:i,scrollOffset:Q,scrollRange:Ue,rtl:V,onScroll:bn,onStartMove:xe,onStopMove:we,spinSize:te,containerSize:Ee.height,style:E==null?void 0:E.verticalScrollBar,thumbStyle:E==null?void 0:E.verticalScrollBarThumb}),O&&y>Ee.width&&_.createElement(DN,{ref:$e,prefixCls:i,scrollOffset:fe,scrollRange:y,rtl:V,onScroll:bn,onStartMove:xe,onStopMove:we,spinSize:xt,containerSize:Ee.width,horizontal:!0,style:E==null?void 0:E.horizontalScrollBar,thumbStyle:E==null?void 0:E.horizontalScrollBarThumb}))}var QB=_.forwardRef(oY);QB.displayName="List";function sY(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var aY=["disabled","title","children","style","className"];function FN(n){return typeof n=="string"||typeof n=="number"}var lY=function(e,r){var i=XX(),o=i.prefixCls,s=i.id,a=i.open,l=i.multiple,c=i.mode,u=i.searchValue,d=i.toggleOpen,f=i.notFoundContent,h=i.onPopupScroll,p=_.useContext(OT),g=p.maxCount,y=p.flattenOptions,v=p.onActiveValue,m=p.defaultActiveFirstOption,x=p.onSelect,b=p.menuItemSelectedIcon,S=p.rawValues,w=p.fieldNames,C=p.virtual,E=p.direction,M=p.listHeight,T=p.listItemHeight,R=p.optionRender,P="".concat(o,"-item"),D=_x(function(){return y},[a,y],function(fe,le){return le[0]&&fe[1]!==le[1]}),L=_.useRef(null),A=_.useMemo(function(){return l&&pC(g)&&(S==null?void 0:S.size)>=g},[l,g,S==null?void 0:S.size]),I=function(le){le.preventDefault()},N=function(le){var ge;(ge=L.current)===null||ge===void 0||ge.scrollTo(typeof le=="number"?{index:le}:le)},F=_.useCallback(function(fe){return c==="combobox"?!1:S.has(fe)},[c,st(S).toString(),S.size]),O=function(le){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,q=D.length,ve=0;ve<q;ve+=1){var be=(le+ve*ge+q)%q,xe=D[be]||{},we=xe.group,qe=xe.data;if(!we&&!(qe!=null&&qe.disabled)&&(F(qe.value)||!A))return be}return-1},V=_.useState(function(){return O(0)}),U=Ce(V,2),k=U[0],W=U[1],J=function(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;W(le);var q={source:ge?"keyboard":"mouse"},ve=D[le];if(!ve){v(null,-1,q);return}v(ve.value,le,q)};_.useEffect(function(){J(m!==!1?O(0):-1)},[D.length,u]);var z=_.useCallback(function(fe){return c==="combobox"?String(fe).toLowerCase()===u.toLowerCase():S.has(fe)},[c,u,st(S).toString(),S.size]);_.useEffect(function(){var fe=setTimeout(function(){if(!l&&a&&S.size===1){var ge=Array.from(S)[0],q=D.findIndex(function(ve){var be=ve.data;return be.value===ge});q!==-1&&(J(q),N(q))}});if(a){var le;(le=L.current)===null||le===void 0||le.scrollTo(void 0)}return function(){return clearTimeout(fe)}},[a,u]);var j=function(le){le!==void 0&&x(le,{selected:!S.has(le)}),l||d(!1)};if(_.useImperativeHandle(r,function(){return{onKeyDown:function(le){var ge=le.which,q=le.ctrlKey;switch(ge){case He.N:case He.P:case He.UP:case He.DOWN:{var ve=0;if(ge===He.UP?ve=-1:ge===He.DOWN?ve=1:sY()&&q&&(ge===He.N?ve=1:ge===He.P&&(ve=-1)),ve!==0){var be=O(k+ve,ve);N(be),J(be,!0)}break}case He.TAB:case He.ENTER:{var xe,we=D[k];we&&!(we!=null&&(xe=we.data)!==null&&xe!==void 0&&xe.disabled)&&!A?j(we.value):j(void 0),a&&le.preventDefault();break}case He.ESC:d(!1),a&&le.stopPropagation()}},onKeyUp:function(){},scrollTo:function(le){N(le)}}}),D.length===0)return _.createElement("div",{role:"listbox",id:"".concat(s,"_list"),className:"".concat(P,"-empty"),onMouseDown:I},f);var X=Object.keys(w).map(function(fe){return w[fe]}),Q=function(le){return le.label};function ne(fe,le){var ge=fe.group;return{role:ge?"presentation":"option",id:"".concat(s,"_list_").concat(le)}}var ye=function(le){var ge=D[le];if(!ge)return null;var q=ge.data||{},ve=q.value,be=ge.group,xe=qs(q,!0),we=Q(ge);return ge?_.createElement("div",ut({"aria-label":typeof we=="string"&&!be?we:null},xe,{key:le},ne(ge,le),{"aria-selected":z(ve)}),ve):null},me={role:"listbox",id:"".concat(s,"_list")};return _.createElement(_.Fragment,null,C&&_.createElement("div",ut({},me,{style:{height:0,width:0,overflow:"hidden"}}),ye(k-1),ye(k),ye(k+1)),_.createElement(QB,{itemKey:"key",ref:L,data:D,height:M,itemHeight:T,fullHeight:!1,onMouseDown:I,onScroll:h,virtual:C,direction:E,innerProps:C?null:me},function(fe,le){var ge=fe.group,q=fe.groupOption,ve=fe.data,be=fe.label,xe=fe.value,we=ve.key;if(ge){var qe,Fe=(qe=ve.title)!==null&&qe!==void 0?qe:FN(be)?be.toString():void 0;return _.createElement("div",{className:_e(P,"".concat(P,"-group"),ve.className),title:Fe},be!==void 0?be:we)}var H=ve.disabled,B=ve.title;ve.children;var K=ve.style,oe=ve.className,pe=Cn(ve,aY),ce=na(pe,X),Ue=F(xe),Re=H||!Ue&&A,Le="".concat(P,"-option"),Je=_e(P,Le,oe,ee(ee(ee(ee({},"".concat(Le,"-grouped"),q),"".concat(Le,"-active"),k===le&&!Re),"".concat(Le,"-disabled"),Re),"".concat(Le,"-selected"),Ue)),Me=Q(fe),ze=!b||typeof b=="function"||Ue,Ee=typeof Me=="number"?Me:Me||xe,Pe=FN(Ee)?Ee.toString():void 0;return B!==void 0&&(Pe=B),_.createElement("div",ut({},qs(ce),C?{}:ne(fe,le),{"aria-selected":z(xe),className:Je,title:Pe,onMouseMove:function(){k===le||Re||J(le)},onClick:function(){Re||j(xe)},style:K}),_.createElement("div",{className:"".concat(Le,"-content")},typeof R=="function"?R(fe,{index:le}):Ee),_.isValidElement(b)||Ue,ze&&_.createElement(kx,{className:"".concat(P,"-option-state"),customizeIcon:b,customizeIconProps:{value:xe,disabled:Re,isSelected:Ue}},Ue?"":null))}))},cY=_.forwardRef(lY);const uY=function(n,e){var r=_.useRef({values:new Map,options:new Map}),i=_.useMemo(function(){var s=r.current,a=s.values,l=s.options,c=n.map(function(f){if(f.label===void 0){var h;return re(re({},f),{},{label:(h=a.get(f.value))===null||h===void 0?void 0:h.label})}return f}),u=new Map,d=new Map;return c.forEach(function(f){u.set(f.value,f),d.set(f.value,e.get(f.value)||l.get(f.value))}),r.current.values=u,r.current.options=d,c},[n,e]),o=_.useCallback(function(s){return e.get(s)||r.current.options.get(s)},[e]);return[i,o]};function Ab(n,e){return jB(n).join("").toUpperCase().includes(e)}const dY=function(n,e,r,i,o){return _.useMemo(function(){if(!r||i===!1)return n;var s=e.options,a=e.label,l=e.value,c=[],u=typeof i=="function",d=r.toUpperCase(),f=u?i:function(p,g){return o?Ab(g[o],d):g[s]?Ab(g[a!=="children"?a:"label"],d):Ab(g[l],d)},h=u?function(p){return mC(p)}:function(p){return p};return n.forEach(function(p){if(p[s]){var g=f(r,h(p));if(g)c.push(p);else{var y=p[s].filter(function(v){return f(r,h(v))});y.length&&c.push(re(re({},p),{},ee({},s,y)))}return}f(r,h(p))&&c.push(p)}),c},[n,i,o,r,e])};var UN=0,fY=mi();function hY(){var n;return fY?(n=UN,UN+=1):n="TEST_OR_SSR",n}function pY(n){var e=_.useState(),r=Ce(e,2),i=r[0],o=r[1];return _.useEffect(function(){o("rc_select_".concat(hY()))},[]),n||i}var mY=["children","value"],gY=["children"];function vY(n){var e=n,r=e.key,i=e.props,o=i.children,s=i.value,a=Cn(i,mY);return re({key:r,value:s!==void 0?s:r,children:o},a)}function ZB(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ga(n).map(function(r,i){if(!_.isValidElement(r)||!r.type)return null;var o=r,s=o.type.isSelectOptGroup,a=o.key,l=o.props,c=l.children,u=Cn(l,gY);return e||!s?vY(r):re(re({key:"__RC_SELECT_GRP__".concat(a===null?i:a,"__"),label:a},u),{},{options:ZB(c)})}).filter(function(r){return r})}var yY=function(e,r,i,o,s){return _.useMemo(function(){var a=e,l=!e;l&&(a=ZB(r));var c=new Map,u=new Map,d=function(p,g,y){y&&typeof y=="string"&&p.set(g[y],g)},f=function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<p.length;y+=1){var v=p[y];!v[i.options]||g?(c.set(v[i.value],v),d(u,v,i.label),d(u,v,o),d(u,v,s)):h(v[i.options],!0)}};return f(a),{options:a,valueOptions:c,labelOptions:u}},[e,r,i,o,s])};function BN(n){var e=_.useRef();e.current=n;var r=_.useCallback(function(){return e.current.apply(e,arguments)},[]);return r}var xY=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],_Y=["inputValue"];function bY(n){return!n||Mt(n)!=="object"}var SY=_.forwardRef(function(n,e){var r=n.id,i=n.mode,o=n.prefixCls,s=o===void 0?"rc-select":o,a=n.backfill,l=n.fieldNames,c=n.inputValue,u=n.searchValue,d=n.onSearch,f=n.autoClearSearchValue,h=f===void 0?!0:f,p=n.onSelect,g=n.onDeselect,y=n.dropdownMatchSelectWidth,v=y===void 0?!0:y,m=n.filterOption,x=n.filterSort,b=n.optionFilterProp,S=n.optionLabelProp,w=n.options,C=n.optionRender,E=n.children,M=n.defaultActiveFirstOption,T=n.menuItemSelectedIcon,R=n.virtual,P=n.direction,D=n.listHeight,L=D===void 0?200:D,A=n.listItemHeight,I=A===void 0?20:A,N=n.labelRender,F=n.value,O=n.defaultValue,V=n.labelInValue,U=n.onChange,k=n.maxCount,W=Cn(n,xY),J=pY(r),z=gC(i),j=!!(!w&&E),X=_.useMemo(function(){return m===void 0&&i==="combobox"?!1:m},[m,i]),Q=_.useMemo(function(){return XB(l,j)},[JSON.stringify(l),j]),ne=Zi("",{value:u!==void 0?u:c,postState:function(ot){return ot||""}}),ye=Ce(ne,2),me=ye[0],fe=ye[1],le=yY(w,E,Q,b,S),ge=le.valueOptions,q=le.labelOptions,ve=le.options,be=_.useCallback(function(Ke){var ot=jB(Ke);return ot.map(function(yt){var ft,bt,It,yn,un;if(bY(yt))ft=yt;else{var Bn;It=yt.key,bt=yt.label,ft=(Bn=yt.value)!==null&&Bn!==void 0?Bn:It}var en=ge.get(ft);if(en){var En;bt===void 0&&(bt=en==null?void 0:en[S||Q.label]),It===void 0&&(It=(En=en==null?void 0:en.key)!==null&&En!==void 0?En:ft),yn=en==null?void 0:en.disabled,un=en==null?void 0:en.title}return{label:bt,value:ft,key:It,disabled:yn,title:un}})},[Q,S,ge]),xe=Zi(O,{value:F}),we=Ce(xe,2),qe=we[0],Fe=we[1],H=_.useMemo(function(){var Ke,ot=z&&qe===null?[]:qe,yt=be(ot);return i==="combobox"&&hK((Ke=yt[0])===null||Ke===void 0?void 0:Ke.value)?[]:yt},[qe,be,i,z]),B=uY(H,ge),K=Ce(B,2),oe=K[0],pe=K[1],ce=_.useMemo(function(){if(!i&&oe.length===1){var Ke=oe[0];if(Ke.value===null&&(Ke.label===null||Ke.label===void 0))return[]}return oe.map(function(ot){var yt;return re(re({},ot),{},{label:(yt=typeof N=="function"?N(ot):ot.label)!==null&&yt!==void 0?yt:ot.value})})},[i,oe,N]),Ue=_.useMemo(function(){return new Set(oe.map(function(Ke){return Ke.value}))},[oe]);_.useEffect(function(){if(i==="combobox"){var Ke,ot=(Ke=oe[0])===null||Ke===void 0?void 0:Ke.value;fe(fK(ot)?String(ot):"")}},[oe]);var Re=BN(function(Ke,ot){var yt=ot??Ke;return ee(ee({},Q.value,Ke),Q.label,yt)}),Le=_.useMemo(function(){if(i!=="tags")return ve;var Ke=st(ve),ot=function(ft){return ge.has(ft)};return st(oe).sort(function(yt,ft){return yt.value<ft.value?-1:1}).forEach(function(yt){var ft=yt.value;ot(ft)||Ke.push(Re(ft,yt.label))}),Ke},[Re,ve,ge,oe,i]),Je=dY(Le,Q,me,X,b),Me=_.useMemo(function(){return i!=="tags"||!me||Je.some(function(Ke){return Ke[b||"value"]===me})||Je.some(function(Ke){return Ke[Q.value]===me})?Je:[Re(me)].concat(st(Je))},[Re,b,i,Je,me,Q]),ze=function Ke(ot){var yt=st(ot).sort(function(ft,bt){return x(ft,bt,{searchValue:me})});return yt.map(function(ft){return Array.isArray(ft.options)?re(re({},ft),{},{options:ft.options.length>0?Ke(ft.options):ft.options}):ft})},Ee=_.useMemo(function(){return x?ze(Me):Me},[Me,x,me]),Pe=_.useMemo(function(){return UK(Ee,{fieldNames:Q,childrenAsData:j})},[Ee,Q,j]),ke=function(ot){var yt=be(ot);if(Fe(yt),U&&(yt.length!==oe.length||yt.some(function(It,yn){var un;return((un=oe[yn])===null||un===void 0?void 0:un.value)!==(It==null?void 0:It.value)}))){var ft=V?yt:yt.map(function(It){return It.value}),bt=yt.map(function(It){return mC(pe(It.value))});U(z?ft:ft[0],z?bt:bt[0])}},Ve=_.useState(null),$e=Ce(Ve,2),xt=$e[0],te=$e[1],Qe=_.useState(0),Se=Ce(Qe,2),Oe=Se[0],Ze=Se[1],We=M!==void 0?M:i!=="combobox",wt=_.useCallback(function(Ke,ot){var yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ft=yt.source,bt=ft===void 0?"keyboard":ft;Ze(ot),a&&i==="combobox"&&Ke!==null&&bt==="keyboard"&&te(String(Ke))},[a,i]),Rt=function(ot,yt,ft){var bt=function(){var vt,$=pe(ot);return[V?{label:$==null?void 0:$[Q.label],value:ot,key:(vt=$==null?void 0:$.key)!==null&&vt!==void 0?vt:ot}:ot,mC($)]};if(yt&&p){var It=bt(),yn=Ce(It,2),un=yn[0],Bn=yn[1];p(un,Bn)}else if(!yt&&g&&ft!=="clear"){var en=bt(),En=Ce(en,2),ar=En[0],Vn=En[1];g(ar,Vn)}},dt=BN(function(Ke,ot){var yt,ft=z?ot.selected:!0;ft?yt=z?[].concat(st(oe),[Ke]):[Ke]:yt=oe.filter(function(bt){return bt.value!==Ke}),ke(yt),Rt(Ke,ft),i==="combobox"?te(""):(!gC||h)&&(fe(""),te(""))}),Xe=function(ot,yt){ke(ot);var ft=yt.type,bt=yt.values;(ft==="remove"||ft==="clear")&&bt.forEach(function(It){Rt(It.value,!1,ft)})},rt=function(ot,yt){if(fe(ot),te(null),yt.source==="submit"){var ft=(ot||"").trim();if(ft){var bt=Array.from(new Set([].concat(st(Ue),[ft])));ke(bt),Rt(ft,!0),fe("")}return}yt.source!=="blur"&&(i==="combobox"&&ke(ot),d==null||d(ot))},Lt=function(ot){var yt=ot;i!=="tags"&&(yt=ot.map(function(bt){var It=q.get(bt);return It==null?void 0:It.value}).filter(function(bt){return bt!==void 0}));var ft=Array.from(new Set([].concat(st(Ue),st(yt))));ke(ft),ft.forEach(function(bt){Rt(bt,!0)})},bn=_.useMemo(function(){var Ke=R!==!1&&v!==!1;return re(re({},le),{},{flattenOptions:Pe,onActiveValue:wt,defaultActiveFirstOption:We,onSelect:dt,menuItemSelectedIcon:T,rawValues:Ue,fieldNames:Q,virtual:Ke,direction:P,listHeight:L,listItemHeight:I,childrenAsData:j,maxCount:k,optionRender:C})},[k,le,Pe,wt,We,dt,T,Ue,Q,R,v,P,L,I,j,C]);return _.createElement(OT.Provider,{value:bn},_.createElement(VK,ut({},W,{id:J,prefixCls:s,ref:e,omitDomProps:_Y,mode:i,displayValues:ce,onDisplayValuesChange:Xe,direction:P,searchValue:me,onSearch:rt,autoClearSearchValue:h,onSearchSplit:Lt,dropdownMatchSelectWidth:v,OptionList:cY,emptyOptions:!Pe.length,activeValue:xt,activeDescendantId:"".concat(J,"_list_").concat(Oe)})))}),LT=SY;LT.Option=DT;LT.OptGroup=IT;function dy(n,e,r){return _e({[`${n}-status-success`]:e==="success",[`${n}-status-warning`]:e==="warning",[`${n}-status-error`]:e==="error",[`${n}-status-validating`]:e==="validating",[`${n}-has-feedback`]:r})}const Vx=(n,e)=>e||n,wY=()=>{const[,n]=eo(),[e]=lc("Empty"),i=new Ln(n.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return _.createElement("svg",{style:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},_.createElement("title",null,(e==null?void 0:e.description)||"Empty"),_.createElement("g",{fill:"none",fillRule:"evenodd"},_.createElement("g",{transform:"translate(24 31.67)"},_.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),_.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),_.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),_.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),_.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),_.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),_.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},_.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),_.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},CY=()=>{const[,n]=eo(),[e]=lc("Empty"),{colorFill:r,colorFillTertiary:i,colorFillQuaternary:o,colorBgContainer:s}=n,{borderColor:a,shadowColor:l,contentColor:c}=_.useMemo(()=>({borderColor:new Ln(r).onBackground(s).toHexString(),shadowColor:new Ln(i).onBackground(s).toHexString(),contentColor:new Ln(o).onBackground(s).toHexString()}),[r,i,o,s]);return _.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},_.createElement("title",null,(e==null?void 0:e.description)||"Empty"),_.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},_.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),_.createElement("g",{fillRule:"nonzero",stroke:a},_.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),_.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))},EY=n=>{const{componentCls:e,margin:r,marginXS:i,marginXL:o,fontSize:s,lineHeight:a}=n;return{[e]:{marginInline:i,fontSize:s,lineHeight:a,textAlign:"center",[`${e}-image`]:{height:n.emptyImgHeight,marginBottom:i,opacity:n.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:n.colorTextDescription},[`${e}-footer`]:{marginTop:r},"&-normal":{marginBlock:o,color:n.colorTextDescription,[`${e}-description`]:{color:n.colorTextDescription},[`${e}-image`]:{height:n.emptyImgHeightMD}},"&-small":{marginBlock:i,color:n.colorTextDescription,[`${e}-image`]:{height:n.emptyImgHeightSM}}}}},TY=si("Empty",n=>{const{componentCls:e,controlHeightLG:r,calc:i}=n,o=Un(n,{emptyImgCls:`${e}-img`,emptyImgHeight:i(r).mul(2.5).equal(),emptyImgHeightMD:r,emptyImgHeightSM:i(r).mul(.875).equal()});return[EY(o)]});var MY=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const JB=_.createElement(wY,null),e$=_.createElement(CY,null),Dc=n=>{var e,r,i,o,s,a,l,c;const{className:u,rootClassName:d,prefixCls:f,image:h=JB,description:p,children:g,imageStyle:y,style:v,classNames:m,styles:x}=n,b=MY(n,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:S,direction:w,empty:C}=_.useContext($t),E=S("empty",f),[M,T,R]=TY(E),[P]=lc("Empty"),D=typeof p<"u"?p:P==null?void 0:P.description,L=typeof D=="string"?D:"empty";let A=null;return typeof h=="string"?A=_.createElement("img",{alt:L,src:h}):A=h,M(_.createElement("div",Object.assign({className:_e(T,R,E,C==null?void 0:C.className,{[`${E}-normal`]:h===e$,[`${E}-rtl`]:w==="rtl"},u,d,(e=C==null?void 0:C.classNames)===null||e===void 0?void 0:e.root,m==null?void 0:m.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},(r=C==null?void 0:C.styles)===null||r===void 0?void 0:r.root),C==null?void 0:C.style),x==null?void 0:x.root),v)},b),_.createElement("div",{className:_e(`${E}-image`,(i=C==null?void 0:C.classNames)===null||i===void 0?void 0:i.image,m==null?void 0:m.image),style:Object.assign(Object.assign(Object.assign({},y),(o=C==null?void 0:C.styles)===null||o===void 0?void 0:o.image),x==null?void 0:x.image)},A),D&&_.createElement("div",{className:_e(`${E}-description`,(s=C==null?void 0:C.classNames)===null||s===void 0?void 0:s.description,m==null?void 0:m.description),style:Object.assign(Object.assign({},(a=C==null?void 0:C.styles)===null||a===void 0?void 0:a.description),x==null?void 0:x.description)},D),g&&_.createElement("div",{className:_e(`${E}-footer`,(l=C==null?void 0:C.classNames)===null||l===void 0?void 0:l.footer,m==null?void 0:m.footer),style:Object.assign(Object.assign({},(c=C==null?void 0:C.styles)===null||c===void 0?void 0:c.footer),x==null?void 0:x.footer)},g)))};Dc.PRESENTED_IMAGE_DEFAULT=JB;Dc.PRESENTED_IMAGE_SIMPLE=e$;const t$=n=>{const{componentName:e}=n,{getPrefixCls:r}=_.useContext($t),i=r("empty");switch(e){case"Table":case"List":return se.createElement(Dc,{image:Dc.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return se.createElement(Dc,{image:Dc.PRESENTED_IMAGE_SIMPLE,className:`${i}-small`});case"Table.filter":return null;default:return se.createElement(Dc,null)}},FT=function(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var i,o;const{variant:s,[n]:a}=_.useContext($t),l=_.useContext(qq),c=a==null?void 0:a.variant;let u;typeof e<"u"?u=e:r===!1?u="borderless":u=(o=(i=l??c)!==null&&i!==void 0?i:s)!==null&&o!==void 0?o:"outlined";const d=z8.includes(u);return[u,d]},RY=n=>{const r={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:n==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},r),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},r),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},r),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},r),{points:["br","tr"],offset:[0,-4]})}};function AY(n,e){return n||RY(e)}const $N=n=>{const{optionHeight:e,optionFontSize:r,optionLineHeight:i,optionPadding:o}=n;return{position:"relative",display:"block",minHeight:e,padding:o,color:n.colorText,fontWeight:"normal",fontSize:r,lineHeight:i,boxSizing:"border-box"}},NY=n=>{const{antCls:e,componentCls:r}=n,i=`${r}-item`,o=`&${e}-slide-up-enter${e}-slide-up-enter-active`,s=`&${e}-slide-up-appear${e}-slide-up-appear-active`,a=`&${e}-slide-up-leave${e}-slide-up-leave-active`,l=`${r}-dropdown-placement-`;return[{[`${r}-dropdown`]:Object.assign(Object.assign({},Yo(n)),{position:"absolute",top:-9999,zIndex:n.zIndexPopup,boxSizing:"border-box",padding:n.paddingXXS,overflow:"hidden",fontSize:n.fontSize,fontVariant:"initial",backgroundColor:n.colorBgElevated,borderRadius:n.borderRadiusLG,outline:"none",boxShadow:n.boxShadowSecondary,[`
          ${o}${l}bottomLeft,
          ${s}${l}bottomLeft
        `]:{animationName:ZU},[`
          ${o}${l}topLeft,
          ${s}${l}topLeft,
          ${o}${l}topRight,
          ${s}${l}topRight
        `]:{animationName:eB},[`${a}${l}bottomLeft`]:{animationName:JU},[`
          ${a}${l}topLeft,
          ${a}${l}topRight
        `]:{animationName:tB},"&-hidden":{display:"none"},[i]:Object.assign(Object.assign({},$N(n)),{cursor:"pointer",transition:`background ${n.motionDurationSlow} ease`,borderRadius:n.borderRadiusSM,"&-group":{color:n.colorTextDescription,fontSize:n.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},jw),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${i}-option-disabled)`]:{backgroundColor:n.optionActiveBg},[`&-selected:not(${i}-option-disabled)`]:{color:n.optionSelectedColor,fontWeight:n.optionSelectedFontWeight,backgroundColor:n.optionSelectedBg,[`${i}-option-state`]:{color:n.colorPrimary},[`&:has(+ ${i}-option-selected:not(${i}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${i}-option-selected:not(${i}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${i}-option-selected`]:{backgroundColor:n.colorBgContainerDisabled},color:n.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:n.calc(n.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},$N(n)),{color:n.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},V2(n,"slide-up"),V2(n,"slide-down"),k2(n,"move-up"),k2(n,"move-down")]},PY=n=>{const{multipleSelectItemHeight:e,paddingXXS:r,lineWidth:i,INTERNAL_FIXED_ITEM_MARGIN:o}=n,s=n.max(n.calc(r).sub(i).equal(),0),a=n.max(n.calc(s).sub(o).equal(),0);return{basePadding:s,containerPadding:a,itemHeight:De(e),itemLineHeight:De(n.calc(e).sub(n.calc(n.lineWidth).mul(2)).equal())}},OY=n=>{const{multipleSelectItemHeight:e,selectHeight:r,lineWidth:i}=n;return n.calc(r).sub(e).div(2).sub(i).equal()},IY=n=>{const{componentCls:e,iconCls:r,borderRadiusSM:i,motionDurationSlow:o,paddingXS:s,multipleItemColorDisabled:a,multipleItemBorderColorDisabled:l,colorIcon:c,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:d}=n;return{[`${e}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:d,borderRadius:i,cursor:"default",transition:`font-size ${o}, line-height ${o}, height ${o}`,marginInlineEnd:n.calc(d).mul(2).equal(),paddingInlineStart:s,paddingInlineEnd:n.calc(s).div(2).equal(),[`${e}-disabled&`]:{color:a,borderColor:l,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:n.calc(s).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},Rx()),{display:"inline-flex",alignItems:"center",color:c,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${r}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},DY=(n,e)=>{const{componentCls:r,INTERNAL_FIXED_ITEM_MARGIN:i}=n,o=`${r}-selection-overflow`,s=n.multipleSelectItemHeight,a=OY(n),l=e?`${r}-${e}`:"",c=PY(n);return{[`${r}-multiple${l}`]:Object.assign(Object.assign({},IY(n)),{[`${r}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:c.basePadding,paddingBlock:c.containerPadding,borderRadius:n.borderRadius,[`${r}-disabled&`]:{background:n.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${De(i)} 0`,lineHeight:De(s),visibility:"hidden",content:'"\\a0"'}},[`${r}-selection-item`]:{height:c.itemHeight,lineHeight:De(c.itemLineHeight)},[`${r}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:De(s),marginBlock:i}},[`${r}-prefix`]:{marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal()},[`${o}-item + ${o}-item,
        ${r}-prefix + ${r}-selection-wrap
      `]:{[`${r}-selection-search`]:{marginInlineStart:0},[`${r}-selection-placeholder`]:{insetInlineStart:0}},[`${o}-item-suffix`]:{minHeight:c.itemHeight,marginBlock:i},[`${r}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(a).equal(),"\n          &-input,\n          &-mirror\n        ":{height:s,fontFamily:n.fontFamily,lineHeight:De(s),transition:`all ${n.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${r}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal(),insetInlineEnd:n.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${n.motionDurationSlow}`}})}};function Nb(n,e){const{componentCls:r}=n,i=e?`${r}-${e}`:"",o={[`${r}-multiple${i}`]:{fontSize:n.fontSize,[`${r}-selector`]:{[`${r}-show-search&`]:{cursor:"text"}},[`
        &${r}-show-arrow ${r}-selector,
        &${r}-allow-clear ${r}-selector
      `]:{paddingInlineEnd:n.calc(n.fontSizeIcon).add(n.controlPaddingHorizontal).equal()}}};return[DY(n,e),o]}const LY=n=>{const{componentCls:e}=n,r=Un(n,{selectHeight:n.controlHeightSM,multipleSelectItemHeight:n.multipleItemHeightSM,borderRadius:n.borderRadiusSM,borderRadiusSM:n.borderRadiusXS}),i=Un(n,{fontSize:n.fontSizeLG,selectHeight:n.controlHeightLG,multipleSelectItemHeight:n.multipleItemHeightLG,borderRadius:n.borderRadiusLG,borderRadiusSM:n.borderRadius});return[Nb(n),Nb(r,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},Nb(i,"lg")]};function Pb(n,e){const{componentCls:r,inputPaddingHorizontalBase:i,borderRadius:o}=n,s=n.calc(n.controlHeight).sub(n.calc(n.lineWidth).mul(2)).equal(),a=e?`${r}-${e}`:"";return{[`${r}-single${a}`]:{fontSize:n.fontSize,height:n.controlHeight,[`${r}-selector`]:Object.assign(Object.assign({},Yo(n,!0)),{display:"flex",borderRadius:o,flex:"1 1 auto",[`${r}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${r}-selection-item,
          ${r}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:De(s),transition:`all ${n.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${r}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${r}-selection-item:empty:after`,`${r}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${r}-show-arrow ${r}-selection-item,
        &${r}-show-arrow ${r}-selection-search,
        &${r}-show-arrow ${r}-selection-placeholder
      `]:{paddingInlineEnd:n.showArrowPaddingInlineEnd},[`&${r}-open ${r}-selection-item`]:{color:n.colorTextPlaceholder},[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${De(i)}`,[`${r}-selection-search-input`]:{height:s},"&:after":{lineHeight:De(s)}}},[`&${r}-customize-input`]:{[`${r}-selector`]:{"&:after":{display:"none"},[`${r}-selection-search`]:{position:"static",width:"100%"},[`${r}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${De(i)}`,"&:after":{display:"none"}}}}}}}function FY(n){const{componentCls:e}=n,r=n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal();return[Pb(n),Pb(Un(n,{controlHeight:n.controlHeightSM,borderRadius:n.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selector`]:{padding:`0 ${De(r)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:n.calc(r).add(n.calc(n.fontSize).mul(1.5)).equal()},[`
            &${e}-show-arrow ${e}-selection-item,
            &${e}-show-arrow ${e}-selection-placeholder
          `]:{paddingInlineEnd:n.calc(n.fontSize).mul(1.5).equal()}}}},Pb(Un(n,{controlHeight:n.singleItemHeightLG,fontSize:n.fontSizeLG,borderRadius:n.borderRadiusLG}),"lg")]}const UY=n=>{const{fontSize:e,lineHeight:r,lineWidth:i,controlHeight:o,controlHeightSM:s,controlHeightLG:a,paddingXXS:l,controlPaddingHorizontal:c,zIndexPopupBase:u,colorText:d,fontWeightStrong:f,controlItemBgActive:h,controlItemBgHover:p,colorBgContainer:g,colorFillSecondary:y,colorBgContainerDisabled:v,colorTextDisabled:m,colorPrimaryHover:x,colorPrimary:b,controlOutline:S}=n,w=l*2,C=i*2,E=Math.min(o-w,o-C),M=Math.min(s-w,s-C),T=Math.min(a-w,a-C);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(l/2),zIndexPopup:u+50,optionSelectedColor:d,optionSelectedFontWeight:f,optionSelectedBg:h,optionActiveBg:p,optionPadding:`${(o-e*r)/2}px ${c}px`,optionFontSize:e,optionLineHeight:r,optionHeight:o,selectorBg:g,clearBg:g,singleItemHeightLG:a,multipleItemBg:y,multipleItemBorderColor:"transparent",multipleItemHeight:E,multipleItemHeightSM:M,multipleItemHeightLG:T,multipleSelectorBgDisabled:v,multipleItemColorDisabled:m,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(n.fontSize*1.25),hoverBorderColor:x,activeBorderColor:b,activeOutlineColor:S,selectAffixPadding:l}},n$=(n,e)=>{const{componentCls:r,antCls:i,controlOutlineWidth:o}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{border:`${De(n.lineWidth)} ${n.lineType} ${e.borderColor}`,background:n.selectorBg},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{borderColor:e.hoverBorderHover},[`${r}-focused& ${r}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${De(o)} ${e.activeOutlineColor}`,outline:0},[`${r}-prefix`]:{color:e.color}}}},zN=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},n$(n,e))}),BY=n=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},n$(n,{borderColor:n.colorBorder,hoverBorderHover:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeOutlineColor:n.activeOutlineColor,color:n.colorText})),zN(n,{status:"error",borderColor:n.colorError,hoverBorderHover:n.colorErrorHover,activeBorderColor:n.colorError,activeOutlineColor:n.colorErrorOutline,color:n.colorError})),zN(n,{status:"warning",borderColor:n.colorWarning,hoverBorderHover:n.colorWarningHover,activeBorderColor:n.colorWarning,activeOutlineColor:n.colorWarningOutline,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}})}),r$=(n,e)=>{const{componentCls:r,antCls:i}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{background:e.bg,border:`${De(n.lineWidth)} ${n.lineType} transparent`,color:e.color},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{background:e.hoverBg},[`${r}-focused& ${r}-selector`]:{background:n.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},kN=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},r$(n,e))}),$Y=n=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},r$(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor,color:n.colorText})),kN(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,color:n.colorError})),kN(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{borderColor:n.colorBorder,background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.colorBgContainer,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}})}),zY=n=>({"&-borderless":{[`${n.componentCls}-selector`]:{background:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`},[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`},[`&${n.componentCls}-status-error`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorError}},[`&${n.componentCls}-status-warning`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorWarning}}}}),kY=n=>({[n.componentCls]:Object.assign(Object.assign(Object.assign({},BY(n)),$Y(n)),zY(n))}),VY=n=>{const{componentCls:e}=n;return{position:"relative",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},GY=n=>{const{componentCls:e}=n;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},HY=n=>{const{antCls:e,componentCls:r,inputPaddingHorizontalBase:i,iconCls:o}=n;return{[r]:Object.assign(Object.assign({},Yo(n)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${r}-customize-input) ${r}-selector`]:Object.assign(Object.assign({},VY(n)),GY(n)),[`${r}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},jw),{[`> ${e}-typography`]:{display:"inline"}}),[`${r}-selection-placeholder`]:Object.assign(Object.assign({},jw),{flex:1,color:n.colorTextPlaceholder,pointerEvents:"none"}),[`${r}-arrow`]:Object.assign(Object.assign({},Rx()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${n.motionDurationSlow} ease`,[o]:{verticalAlign:"top",transition:`transform ${n.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${r}-suffix)`]:{pointerEvents:"auto"}},[`${r}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${r}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${r}-prefix`]:{flex:"none",marginInlineEnd:n.selectAffixPadding},[`${r}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,zIndex:1,display:"inline-block",width:n.fontSizeIcon,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${n.motionDurationMid} ease, opacity ${n.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:n.colorTextTertiary}},[`&:hover ${r}-clear`]:{opacity:1,background:n.colorBgBase,borderRadius:"50%"}}),[`${r}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${r}-has-feedback`]:{[`${r}-clear`]:{insetInlineEnd:n.calc(i).add(n.fontSize).add(n.paddingXS).equal()}}}}}},jY=n=>{const{componentCls:e}=n;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},HY(n),FY(n),LY(n),NY(n),{[`${e}-rtl`]:{direction:"rtl"}},AT(n,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]},WY=si("Select",(n,e)=>{let{rootPrefixCls:r}=e;const i=Un(n,{rootPrefixCls:r,inputPaddingHorizontalBase:n.calc(n.paddingSM).sub(1).equal(),multipleSelectItemHeight:n.multipleItemHeight,selectHeight:n.controlHeight});return[jY(i),kY(i)]},UY,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var qY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},XY=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:qY}))},i$=_.forwardRef(XY),KY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},YY=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:KY}))},QY=_.forwardRef(YY),ZY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},JY=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:ZY}))},o$=_.forwardRef(JY);function eQ(n){let{suffixIcon:e,clearIcon:r,menuItemSelectedIcon:i,removeIcon:o,loading:s,multiple:a,hasFeedback:l,prefixCls:c,showSuffixIcon:u,feedbackIcon:d,showArrow:f,componentName:h}=n;const p=r??_.createElement(Ax,null),g=x=>e===null&&!l&&!f?null:_.createElement(_.Fragment,null,u!==!1&&x,l&&d);let y=null;if(e!==void 0)y=g(e);else if(s)y=g(_.createElement(jm,{spin:!0}));else{const x=`${c}-suffix`;y=b=>{let{open:S,showSearch:w}=b;return g(S&&w?_.createElement(o$,{className:x}):_.createElement(QY,{className:x}))}}let v=null;i!==void 0?v=i:a?v=_.createElement(i$,null):v=null;let m=null;return o!==void 0?m=o:m=_.createElement(Hm,null),{clearIcon:p,suffixIcon:y,itemIcon:v,removeIcon:m}}function tQ(n,e){return e!==void 0?e:n!==null}var nQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const s$="SECRET_COMBOBOX_MODE_DO_NOT_USE",rQ=(n,e)=>{var r;const{prefixCls:i,bordered:o,className:s,rootClassName:a,getPopupContainer:l,popupClassName:c,dropdownClassName:u,listHeight:d=256,placement:f,listItemHeight:h,size:p,disabled:g,notFoundContent:y,status:v,builtinPlacements:m,dropdownMatchSelectWidth:x,popupMatchSelectWidth:b,direction:S,style:w,allowClear:C,variant:E,dropdownStyle:M,transitionName:T,tagRender:R,maxCount:P,prefix:D}=n,L=nQ(n,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:A,getPrefixCls:I,renderEmpty:N,direction:F,virtual:O,popupMatchSelectWidth:V,popupOverflow:U,select:k}=_.useContext($t),[,W]=eo(),J=h??(W==null?void 0:W.controlHeight),z=I("select",i),j=I(),X=S??F,{compactSize:Q,compactItemClassnames:ne}=Ox(z,X),[ye,me]=FT("select",E,o),fe=cc(z),[le,ge,q]=WY(z,fe),ve=_.useMemo(()=>{const{mode:xt}=n;if(xt!=="combobox")return xt===s$?"combobox":xt},[n.mode]),be=ve==="multiple"||ve==="tags",xe=tQ(n.suffixIcon,n.showArrow),we=(r=b??x)!==null&&r!==void 0?r:V,{status:qe,hasFeedback:Fe,isFormItemInput:H,feedbackIcon:B}=_.useContext(ja),K=Vx(qe,v);let oe;y!==void 0?oe=y:ve==="combobox"?oe=null:oe=(N==null?void 0:N("Select"))||_.createElement(t$,{componentName:"Select"});const{suffixIcon:pe,itemIcon:ce,removeIcon:Ue,clearIcon:Re}=eQ(Object.assign(Object.assign({},L),{multiple:be,hasFeedback:Fe,feedbackIcon:B,showSuffixIcon:xe,prefixCls:z,componentName:"Select"})),Le=C===!0?{clearIcon:Re}:C,Je=na(L,["suffixIcon","itemIcon"]),Me=_e(c||u,{[`${z}-dropdown-${X}`]:X==="rtl"},a,q,fe,ge),ze=ra(xt=>{var te;return(te=p??Q)!==null&&te!==void 0?te:xt}),Ee=_.useContext(Ha),Pe=g??Ee,ke=_e({[`${z}-lg`]:ze==="large",[`${z}-sm`]:ze==="small",[`${z}-rtl`]:X==="rtl",[`${z}-${ye}`]:me,[`${z}-in-form-item`]:H},dy(z,K,Fe),ne,k==null?void 0:k.className,s,a,q,fe,ge),Ve=_.useMemo(()=>f!==void 0?f:X==="rtl"?"bottomRight":"bottomLeft",[f,X]),[$e]=CT("SelectLike",M==null?void 0:M.zIndex);return le(_.createElement(LT,Object.assign({ref:e,virtual:O,showSearch:k==null?void 0:k.showSearch},Je,{style:Object.assign(Object.assign({},k==null?void 0:k.style),w),dropdownMatchSelectWidth:we,transitionName:cf(j,"slide-up",T),builtinPlacements:AY(m,U),listHeight:d,listItemHeight:J,mode:ve,prefixCls:z,placement:Ve,direction:X,prefix:D,suffixIcon:pe,menuItemSelectedIcon:ce,removeIcon:Ue,allowClear:Le,notFoundContent:oe,className:ke,getPopupContainer:l||A,dropdownClassName:Me,disabled:Pe,dropdownStyle:Object.assign(Object.assign({},M),{zIndex:$e}),maxCount:be?P:void 0,tagRender:be?R:void 0})))},Eu=_.forwardRef(rQ),iQ=WX(Eu,"dropdownAlign");Eu.SECRET_COMBOBOX_MODE_DO_NOT_USE=s$;Eu.Option=DT;Eu.OptGroup=IT;Eu._InternalPanelDoNotUseOrYouWillBeFired=iQ;const cu=["xxl","xl","lg","md","sm","xs"],oQ=n=>({xs:`(max-width: ${n.screenXSMax}px)`,sm:`(min-width: ${n.screenSM}px)`,md:`(min-width: ${n.screenMD}px)`,lg:`(min-width: ${n.screenLG}px)`,xl:`(min-width: ${n.screenXL}px)`,xxl:`(min-width: ${n.screenXXL}px)`}),sQ=n=>{const e=n,r=[].concat(cu).reverse();return r.forEach((i,o)=>{const s=i.toUpperCase(),a=`screen${s}Min`,l=`screen${s}`;if(!(e[a]<=e[l]))throw new Error(`${a}<=${l} fails : !(${e[a]}<=${e[l]})`);if(o<r.length-1){const c=`screen${s}Max`;if(!(e[l]<=e[c]))throw new Error(`${l}<=${c} fails : !(${e[l]}<=${e[c]})`);const d=`screen${r[o+1].toUpperCase()}Min`;if(!(e[c]<=e[d]))throw new Error(`${c}<=${d} fails : !(${e[c]}<=${e[d]})`)}}),n};function a$(){const[,n]=eo(),e=oQ(sQ(n));return se.useMemo(()=>{const r=new Map;let i=-1,o={};return{matchHandlers:{},dispatch(s){return o=s,r.forEach(a=>a(o)),r.size>=1},subscribe(s){return r.size||this.register(),i+=1,r.set(i,s),s(o),i},unsubscribe(s){r.delete(s),r.size||this.unregister()},unregister(){Object.keys(e).forEach(s=>{const a=e[s],l=this.matchHandlers[a];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),r.clear()},register(){Object.keys(e).forEach(s=>{const a=e[s],l=u=>{let{matches:d}=u;this.dispatch(Object.assign(Object.assign({},o),{[s]:d}))},c=window.matchMedia(a);c.addListener(l),this.matchHandlers[a]={mql:c,listener:l},l(c)})},responsiveMap:e}},[n])}function aQ(){const[,n]=_.useReducer(e=>e+1,0);return n}function l$(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const e=_.useRef({}),r=aQ(),i=a$();return _n(()=>{const o=i.subscribe(s=>{e.current=s,n&&r()});return()=>i.unsubscribe(o)},[]),e.current}function c$(n){var e=n.children,r=n.prefixCls,i=n.id,o=n.overlayInnerStyle,s=n.bodyClassName,a=n.className,l=n.style;return _.createElement("div",{className:_e("".concat(r,"-content"),a),style:l},_.createElement("div",{className:_e("".concat(r,"-inner"),s),id:i,role:"tooltip",style:o},typeof e=="function"?e():e))}var zu={shiftX:64,adjustY:1},ku={adjustX:1,shiftY:!0},Mo=[0,0],lQ={left:{points:["cr","cl"],overflow:ku,offset:[-4,0],targetOffset:Mo},right:{points:["cl","cr"],overflow:ku,offset:[4,0],targetOffset:Mo},top:{points:["bc","tc"],overflow:zu,offset:[0,-4],targetOffset:Mo},bottom:{points:["tc","bc"],overflow:zu,offset:[0,4],targetOffset:Mo},topLeft:{points:["bl","tl"],overflow:zu,offset:[0,-4],targetOffset:Mo},leftTop:{points:["tr","tl"],overflow:ku,offset:[-4,0],targetOffset:Mo},topRight:{points:["br","tr"],overflow:zu,offset:[0,-4],targetOffset:Mo},rightTop:{points:["tl","tr"],overflow:ku,offset:[4,0],targetOffset:Mo},bottomRight:{points:["tr","br"],overflow:zu,offset:[0,4],targetOffset:Mo},rightBottom:{points:["bl","br"],overflow:ku,offset:[4,0],targetOffset:Mo},bottomLeft:{points:["tl","bl"],overflow:zu,offset:[0,4],targetOffset:Mo},leftBottom:{points:["br","bl"],overflow:ku,offset:[-4,0],targetOffset:Mo}},cQ=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],uQ=function(e,r){var i=e.overlayClassName,o=e.trigger,s=o===void 0?["hover"]:o,a=e.mouseEnterDelay,l=a===void 0?0:a,c=e.mouseLeaveDelay,u=c===void 0?.1:c,d=e.overlayStyle,f=e.prefixCls,h=f===void 0?"rc-tooltip":f,p=e.children,g=e.onVisibleChange,y=e.afterVisibleChange,v=e.transitionName,m=e.animation,x=e.motion,b=e.placement,S=b===void 0?"right":b,w=e.align,C=w===void 0?{}:w,E=e.destroyTooltipOnHide,M=E===void 0?!1:E,T=e.defaultVisible,R=e.getTooltipContainer,P=e.overlayInnerStyle;e.arrowContent;var D=e.overlay,L=e.id,A=e.showArrow,I=A===void 0?!0:A,N=e.classNames,F=e.styles,O=Cn(e,cQ),V=_.useRef(null);_.useImperativeHandle(r,function(){return V.current});var U=re({},O);"visible"in e&&(U.popupVisible=e.visible);var k=function(){return _.createElement(c$,{key:"content",prefixCls:h,id:L,bodyClassName:N==null?void 0:N.body,overlayInnerStyle:re(re({},P),F==null?void 0:F.body)},D)};return _.createElement(qB,ut({popupClassName:_e(i,N==null?void 0:N.root),prefixCls:h,popup:k,action:s,builtinPlacements:lQ,popupPlacement:S,ref:V,popupAlign:C,getPopupContainer:R,onPopupVisibleChange:g,afterPopupVisibleChange:y,popupTransitionName:v,popupAnimation:m,popupMotion:x,defaultPopupVisible:T,autoDestroy:M,mouseLeaveDelay:u,popupStyle:re(re({},d),F==null?void 0:F.root),mouseEnterDelay:l,arrow:I},U),p)};const dQ=_.forwardRef(uQ);function fQ(n){const{sizePopupArrow:e,borderRadiusXS:r,borderRadiusOuter:i}=n,o=e/2,s=0,a=o,l=i*1/Math.sqrt(2),c=o-i*(1-1/Math.sqrt(2)),u=o-r*(1/Math.sqrt(2)),d=i*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),f=2*o-u,h=d,p=2*o-l,g=c,y=2*o-s,v=a,m=o*Math.sqrt(2)+i*(Math.sqrt(2)-2),x=i*(Math.sqrt(2)-1),b=`polygon(${x}px 100%, 50% ${x}px, ${2*o-x}px 100%, ${x}px 100%)`,S=`path('M ${s} ${a} A ${i} ${i} 0 0 0 ${l} ${c} L ${u} ${d} A ${r} ${r} 0 0 1 ${f} ${h} L ${p} ${g} A ${i} ${i} 0 0 0 ${y} ${v} Z')`;return{arrowShadowWidth:m,arrowPath:S,arrowPolygon:b}}const hQ=(n,e,r)=>{const{sizePopupArrow:i,arrowPolygon:o,arrowPath:s,arrowShadowWidth:a,borderRadiusXS:l,calc:c}=n;return{pointerEvents:"none",width:i,height:i,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:i,height:c(i).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[o,s]},content:'""'},"&::after":{content:'""',position:"absolute",width:a,height:a,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${De(l)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:r,zIndex:0,background:"transparent"}}},u$=8;function d$(n){const{contentRadius:e,limitVerticalRadius:r}=n,i=e>12?e+2:12;return{arrowOffsetHorizontal:i,arrowOffsetVertical:r?u$:i}}function Wg(n,e){return n?e:{}}function pQ(n,e,r){const{componentCls:i,boxShadowPopoverArrow:o,arrowOffsetVertical:s,arrowOffsetHorizontal:a}=n,{arrowDistance:l=0,arrowPlacement:c={left:!0,right:!0,top:!0,bottom:!0}}={};return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},hQ(n,e,o)),{"&:before":{background:e}})]},Wg(!!c.top,{[[`&-placement-top > ${i}-arrow`,`&-placement-topLeft > ${i}-arrow`,`&-placement-topRight > ${i}-arrow`].join(",")]:{bottom:l,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":a,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${De(a)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),Wg(!!c.bottom,{[[`&-placement-bottom > ${i}-arrow`,`&-placement-bottomLeft > ${i}-arrow`,`&-placement-bottomRight > ${i}-arrow`].join(",")]:{top:l,transform:"translateY(-100%)"},[`&-placement-bottom > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":a,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${De(a)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),Wg(!!c.left,{[[`&-placement-left > ${i}-arrow`,`&-placement-leftTop > ${i}-arrow`,`&-placement-leftBottom > ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:l},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${i}-arrow`]:{top:s},[`&-placement-leftBottom > ${i}-arrow`]:{bottom:s}})),Wg(!!c.right,{[[`&-placement-right > ${i}-arrow`,`&-placement-rightTop > ${i}-arrow`,`&-placement-rightBottom > ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:l},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${i}-arrow`]:{top:s},[`&-placement-rightBottom > ${i}-arrow`]:{bottom:s}}))}}function mQ(n,e,r,i){if(i===!1)return{adjustX:!1,adjustY:!1};const o=i&&typeof i=="object"?i:{},s={};switch(n){case"top":case"bottom":s.shiftX=e.arrowOffsetHorizontal*2+r,s.shiftY=!0,s.adjustY=!0;break;case"left":case"right":s.shiftY=e.arrowOffsetVertical*2+r,s.shiftX=!0,s.adjustX=!0;break}const a=Object.assign(Object.assign({},s),o);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}const VN={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},gQ={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},vQ=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function yQ(n){const{arrowWidth:e,autoAdjustOverflow:r,arrowPointAtCenter:i,offset:o,borderRadius:s}=n,a=e/2,l={};return Object.keys(VN).forEach(c=>{const u=i&&gQ[c]||VN[c],d=Object.assign(Object.assign({},u),{offset:[0,0],dynamicInset:!0});switch(l[c]=d,vQ.has(c)&&(d.autoArrow=!1),c){case"top":case"topLeft":case"topRight":d.offset[1]=-a-o;break;case"bottom":case"bottomLeft":case"bottomRight":d.offset[1]=a+o;break;case"left":case"leftTop":case"leftBottom":d.offset[0]=-a-o;break;case"right":case"rightTop":case"rightBottom":d.offset[0]=a+o;break}const f=d$({contentRadius:s,limitVerticalRadius:!0});if(i)switch(c){case"topLeft":case"bottomLeft":d.offset[0]=-f.arrowOffsetHorizontal-a;break;case"topRight":case"bottomRight":d.offset[0]=f.arrowOffsetHorizontal+a;break;case"leftTop":case"rightTop":d.offset[1]=-f.arrowOffsetHorizontal*2+a;break;case"leftBottom":case"rightBottom":d.offset[1]=f.arrowOffsetHorizontal*2-a;break}d.overflow=mQ(c,f,e,r),d.htmlRegion="visibleFirst"}),l}const xQ=n=>{const{calc:e,componentCls:r,tooltipMaxWidth:i,tooltipColor:o,tooltipBg:s,tooltipBorderRadius:a,zIndexPopup:l,controlHeight:c,boxShadowSecondary:u,paddingSM:d,paddingXS:f,arrowOffsetHorizontal:h,sizePopupArrow:p}=n,g=e(a).add(p).add(h).equal(),y=e(a).mul(2).add(p).equal();return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},Yo(n)),{position:"absolute",zIndex:l,display:"block",width:"max-content",maxWidth:i,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":s,[`${r}-inner`]:{minWidth:y,minHeight:c,padding:`${De(n.calc(d).div(2).equal())} ${De(f)}`,color:o,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:s,borderRadius:a,boxShadow:u,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:g},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:n.min(a,u$)}},[`${r}-content`]:{position:"relative"}}),fj(n,(v,m)=>{let{darkColor:x}=m;return{[`&${r}-${v}`]:{[`${r}-inner`]:{backgroundColor:x},[`${r}-arrow`]:{"--antd-arrow-background-color":x}}}})),{"&-rtl":{direction:"rtl"}})},pQ(n,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow}}]},_Q=n=>Object.assign(Object.assign({zIndexPopup:n.zIndexPopupBase+70},d$({contentRadius:n.borderRadius,limitVerticalRadius:!0})),fQ(Un(n,{borderRadiusOuter:Math.min(n.borderRadiusOuter,4)}))),f$=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return si("Tooltip",i=>{const{borderRadius:o,colorTextLightSolid:s,colorBgSpotlight:a}=i,l=Un(i,{tooltipMaxWidth:250,tooltipColor:s,tooltipBorderRadius:o,tooltipBg:a});return[xQ(l),nB(i,"zoom-big-fast")]},_Q,{resetStyle:!1,injectStyle:e})(n)},bQ=lf.map(n=>`${n}-inverse`);function SQ(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(st(bQ),st(lf)).includes(n):lf.includes(n)}function h$(n,e){const r=SQ(e),i=_e({[`${n}-${e}`]:e&&r}),o={},s={};return e&&!r&&(o.background=e,s["--antd-arrow-background-color"]=e),{className:i,overlayStyle:o,arrowStyle:s}}const wQ=n=>{const{prefixCls:e,className:r,placement:i="top",title:o,color:s,overlayInnerStyle:a}=n,{getPrefixCls:l}=_.useContext($t),c=l("tooltip",e),[u,d,f]=f$(c),h=h$(c,s),p=h.arrowStyle,g=Object.assign(Object.assign({},a),h.overlayStyle),y=_e(d,f,c,`${c}-pure`,`${c}-placement-${i}`,r,h.className);return u(_.createElement("div",{className:y,style:p},_.createElement("div",{className:`${c}-arrow`}),_.createElement(c$,Object.assign({},n,{className:d,prefixCls:c,overlayInnerStyle:g}),o)))};var CQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const EQ=_.forwardRef((n,e)=>{var r,i,o,s,a,l;const{prefixCls:c,openClassName:u,getTooltipContainer:d,color:f,overlayInnerStyle:h,children:p,afterOpenChange:g,afterVisibleChange:y,destroyTooltipOnHide:v,arrow:m=!0,title:x,overlay:b,builtinPlacements:S,arrowPointAtCenter:w=!1,autoAdjustOverflow:C=!0}=n,E=!!m,[,M]=eo(),{getPopupContainer:T,getPrefixCls:R,direction:P,tooltip:D}=_.useContext($t),L=xT(),A=_.useRef(null),I=()=>{var Je;(Je=A.current)===null||Je===void 0||Je.forceAlign()};_.useImperativeHandle(e,()=>{var Je;return{forceAlign:I,forcePopupAlign:()=>{L.deprecated(!1,"forcePopupAlign","forceAlign"),I()},nativeElement:(Je=A.current)===null||Je===void 0?void 0:Je.nativeElement}});const[N,F]=Zi(!1,{value:(r=n.open)!==null&&r!==void 0?r:n.visible,defaultValue:(i=n.defaultOpen)!==null&&i!==void 0?i:n.defaultVisible}),O=!x&&!b&&x!==0,V=Je=>{var Me,ze;F(O?!1:Je),O||((Me=n.onOpenChange)===null||Me===void 0||Me.call(n,Je),(ze=n.onVisibleChange)===null||ze===void 0||ze.call(n,Je))},U=_.useMemo(()=>{var Je,Me;let ze=w;return typeof m=="object"&&(ze=(Me=(Je=m.pointAtCenter)!==null&&Je!==void 0?Je:m.arrowPointAtCenter)!==null&&Me!==void 0?Me:w),S||yQ({arrowPointAtCenter:ze,autoAdjustOverflow:C,arrowWidth:E?M.sizePopupArrow:0,borderRadius:M.borderRadius,offset:M.marginXXS})},[w,m,S,M]),k=_.useMemo(()=>x===0?x:b||x||"",[b,x]),W=_.createElement(cy,{space:!0},typeof k=="function"?k():k),{getPopupContainer:J,placement:z="top",mouseEnterDelay:j=.1,mouseLeaveDelay:X=.1,overlayStyle:Q,rootClassName:ne,overlayClassName:ye,styles:me,classNames:fe}=n,le=CQ(n,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),ge=R("tooltip",c),q=R(),ve=n["data-popover-inject"];let be=N;!("open"in n)&&!("visible"in n)&&O&&(be=!1);const xe=_.isValidElement(p)&&!UU(p)?p:_.createElement("span",null,p),we=xe.props,qe=!we.className||typeof we.className=="string"?_e(we.className,u||`${ge}-open`):we.className,[Fe,H,B]=f$(ge,!ve),K=h$(ge,f),oe=K.arrowStyle,pe=_e(ye,{[`${ge}-rtl`]:P==="rtl"},K.className,ne,H,B,D==null?void 0:D.className,(o=D==null?void 0:D.classNames)===null||o===void 0?void 0:o.root,fe==null?void 0:fe.root),ce=_e((s=D==null?void 0:D.classNames)===null||s===void 0?void 0:s.body,fe==null?void 0:fe.body),[Ue,Re]=CT("Tooltip",le.zIndex),Le=_.createElement(dQ,Object.assign({},le,{zIndex:Ue,showArrow:E,placement:z,mouseEnterDelay:j,mouseLeaveDelay:X,prefixCls:ge,classNames:{root:pe,body:ce},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oe),(a=D==null?void 0:D.styles)===null||a===void 0?void 0:a.root),D==null?void 0:D.style),Q),me==null?void 0:me.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},(l=D==null?void 0:D.styles)===null||l===void 0?void 0:l.body),h),me==null?void 0:me.body),K.overlayStyle)},getTooltipContainer:J||d||T,ref:A,builtinPlacements:U,overlay:W,visible:be,onVisibleChange:V,afterVisibleChange:g??y,arrowContent:_.createElement("span",{className:`${ge}-arrow-content`}),motion:{motionName:cf(q,"zoom-big-fast",n.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!v}),be?Zl(xe,{className:qe}):xe);return Fe(_.createElement(wT.Provider,{value:Re},Le))}),Jm=EQ;Jm._InternalPanelDoNotUseOrYouWillBeFired=wQ;var TQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},MQ=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:TQ}))},GN=_.forwardRef(MQ);function UT(n){return Un(n,{inputAffixPadding:n.paddingXXS})}const BT=n=>{const{controlHeight:e,fontSize:r,lineHeight:i,lineWidth:o,controlHeightSM:s,controlHeightLG:a,fontSizeLG:l,lineHeightLG:c,paddingSM:u,controlPaddingHorizontalSM:d,controlPaddingHorizontal:f,colorFillAlter:h,colorPrimaryHover:p,colorPrimary:g,controlOutlineWidth:y,controlOutline:v,colorErrorOutline:m,colorWarningOutline:x,colorBgContainer:b}=n;return{paddingBlock:Math.max(Math.round((e-r*i)/2*10)/10-o,0),paddingBlockSM:Math.max(Math.round((s-r*i)/2*10)/10-o,0),paddingBlockLG:Math.ceil((a-l*c)/2*10)/10-o,paddingInline:u-o,paddingInlineSM:d-o,paddingInlineLG:f-o,addonBg:h,activeBorderColor:g,hoverBorderColor:p,activeShadow:`0 0 0 ${y}px ${v}`,errorActiveShadow:`0 0 0 ${y}px ${m}`,warningActiveShadow:`0 0 0 ${y}px ${x}`,hoverBg:b,activeBg:b,inputFontSize:r,inputFontSizeLG:l,inputFontSizeSM:r}},RQ=n=>({borderColor:n.hoverBorderColor,backgroundColor:n.hoverBg}),Gx=n=>({color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},RQ(Un(n,{hoverBorderColor:n.colorBorder,hoverBg:n.colorBgContainerDisabled})))}),$T=(n,e)=>({background:n.colorBgContainer,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:n.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:n.activeBg}}),HN=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},$T(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}}),[`&${n.componentCls}-status-${e.status}${n.componentCls}-disabled`]:{borderColor:e.borderColor}}),AQ=(n,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$T(n,{borderColor:n.colorBorder,hoverBorderColor:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeShadow:n.activeShadow})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},Gx(n))}),HN(n,{status:"error",borderColor:n.colorError,hoverBorderColor:n.colorErrorBorderHover,activeBorderColor:n.colorError,activeShadow:n.errorActiveShadow,affixColor:n.colorError})),HN(n,{status:"warning",borderColor:n.colorWarning,hoverBorderColor:n.colorWarningBorderHover,activeBorderColor:n.colorWarning,activeShadow:n.warningActiveShadow,affixColor:n.colorWarning})),e)}),jN=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),NQ=n=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.addonBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},jN(n,{status:"error",addonBorderColor:n.colorError,addonColor:n.colorErrorText})),jN(n,{status:"warning",addonBorderColor:n.colorWarning,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group-addon`]:Object.assign({},Gx(n))}})}),PQ=(n,e)=>{const{componentCls:r}=n;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${r}-disabled, &[disabled]`]:{color:n.colorTextDisabled,cursor:"not-allowed"},[`&${r}-status-error`]:{"&, & input, & textarea":{color:n.colorError}},[`&${r}-status-warning`]:{"&, & input, & textarea":{color:n.colorWarning}}},e)}},p$=(n,e)=>({background:e.bg,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:e==null?void 0:e.inputColor},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:n.activeBg}}),WN=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},p$(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}})}),OQ=(n,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},p$(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},Gx(n))}),WN(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,inputColor:n.colorErrorText,affixColor:n.colorError})),WN(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,inputColor:n.colorWarningText,affixColor:n.colorWarning})),e)}),qN=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),IQ=n=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary},[`${n.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}}}},qN(n,{status:"error",addonBg:n.colorErrorBg,addonColor:n.colorErrorText})),qN(n,{status:"warning",addonBg:n.colorWarningBg,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary,color:n.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`}}}})}),DQ=n=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:n,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),m$=n=>{const{paddingBlockLG:e,lineHeightLG:r,borderRadiusLG:i,paddingInlineLG:o}=n;return{padding:`${De(e)} ${De(o)}`,fontSize:n.inputFontSizeLG,lineHeight:r,borderRadius:i}},zT=n=>({padding:`${De(n.paddingBlockSM)} ${De(n.paddingInlineSM)}`,fontSize:n.inputFontSizeSM,borderRadius:n.borderRadiusSM}),kT=n=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${De(n.paddingBlock)} ${De(n.paddingInline)}`,color:n.colorText,fontSize:n.inputFontSize,lineHeight:n.lineHeight,borderRadius:n.borderRadius,transition:`all ${n.motionDurationMid}`},DQ(n.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:n.controlHeight,lineHeight:n.lineHeight,verticalAlign:"bottom",transition:`all ${n.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},m$(n)),"&-sm":Object.assign({},zT(n)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),LQ=n=>{const{componentCls:e,antCls:r}=n;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:n.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},m$(n)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},zT(n)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${De(n.paddingInline)}`,color:n.colorText,fontWeight:"normal",fontSize:n.inputFontSize,textAlign:"center",borderRadius:n.borderRadius,transition:`all ${n.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`${De(n.calc(n.paddingBlock).add(1).mul(-1).equal())} ${De(n.calc(n.paddingInline).mul(-1).equal())}`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${De(n.lineWidth)} ${n.lineType} transparent`,boxShadow:"none"}}},[`${r}-cascader-picker`]:{margin:`-9px ${De(n.calc(n.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},hU()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:n.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderInlineEndWidth:n.lineWidth},[e]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${e},
      & > ${r}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:n.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${e},
      & > ${r}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${e},
      & > ${r}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:n.lineWidth,borderStartEndRadius:n.borderRadius,borderEndEndRadius:n.borderRadius},[`& > ${r}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:n.calc(n.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:n.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:n.borderRadius}}}})}},FQ=n=>{const{componentCls:e,controlHeightSM:r,lineWidth:i,calc:o}=n,a=o(r).sub(o(i).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yo(n)),kT(n)),AQ(n)),OQ(n)),PQ(n)),{'&[type="color"]':{height:n.controlHeight,[`&${e}-lg`]:{height:n.controlHeightLG},[`&${e}-sm`]:{height:r,paddingTop:a,paddingBottom:a}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},UQ=n=>{const{componentCls:e}=n;return{[`${e}-clear-icon`]:{margin:0,lineHeight:0,color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${n.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:n.colorTextTertiary},"&:active":{color:n.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${De(n.inputAffixPadding)}`}}}},BQ=n=>{const{componentCls:e,inputAffixPadding:r,colorTextDescription:i,motionDurationSlow:o,colorIcon:s,colorIconHover:a,iconCls:l}=n,c=`${e}-affix-wrapper`,u=`${e}-affix-wrapper-disabled`;return{[c]:Object.assign(Object.assign(Object.assign(Object.assign({},kT(n)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:n.paddingXS}},"&-show-count-suffix":{color:i},"&-show-count-has-suffix":{marginInlineEnd:n.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),UQ(n)),{[`${l}${e}-password-icon`]:{color:s,cursor:"pointer",transition:`all ${o}`,"&:hover":{color:a}}}),[u]:{[`${l}${e}-password-icon`]:{color:s,cursor:"not-allowed","&:hover":{color:s}}}}},$Q=n=>{const{componentCls:e,borderRadiusLG:r,borderRadiusSM:i}=n;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},Yo(n)),LQ(n)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:r,fontSize:n.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:i}}},NQ(n)),IQ(n)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},zQ=n=>{const{componentCls:e,antCls:r}=n,i=`${e}-search`;return{[i]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${i}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:n.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:n.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:n.calc(n.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${i}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${i}-button:not(${r}-btn-primary)`]:{color:n.colorTextDescription,"&:hover":{color:n.colorPrimaryHover},"&:active":{color:n.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${i}-button`]:{height:n.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},kQ=n=>{const{componentCls:e,paddingLG:r}=n,i=`${e}-textarea`;return{[i]:{position:"relative","&-show-count":{[`> ${e}`]:{height:"100%"},[`${e}-data-count`]:{position:"absolute",bottom:n.calc(n.fontSize).mul(n.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:n.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${i}-has-feedback ${e}
      `]:{paddingInlineEnd:r},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:n.paddingInline,insetBlockStart:n.paddingXS},[`${i}-suffix`]:{position:"absolute",top:0,insetInlineEnd:n.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:n.paddingInlineSM}}}}}},VQ=n=>{const{componentCls:e}=n;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:n.colorError}}}},VT=si("Input",n=>{const e=Un(n,UT(n));return[FQ(e),kQ(e),BQ(e),$Q(e),zQ(e),VQ(e),AT(e)]},BT,{resetFont:!1});function GQ(n,e,r){var i=r||{},o=i.noTrailing,s=o===void 0?!1:o,a=i.noLeading,l=a===void 0?!1:a,c=i.debounceMode,u=c===void 0?void 0:c,d,f=!1,h=0;function p(){d&&clearTimeout(d)}function g(v){var m=v||{},x=m.upcomingOnly,b=x===void 0?!1:x;p(),f=!b}function y(){for(var v=arguments.length,m=new Array(v),x=0;x<v;x++)m[x]=arguments[x];var b=this,S=Date.now()-h;if(f)return;function w(){h=Date.now(),e.apply(b,m)}function C(){d=void 0}!l&&u&&!d&&w(),p(),u===void 0&&S>n?l?(h=Date.now(),s||(d=setTimeout(u?C:w,n))):w():s!==!0&&(d=setTimeout(u?C:w,u===void 0?n-S:n))}return y.cancel=g,y}function HQ(n,e,r){var i={},o=i.atBegin,s=o===void 0?!1:o;return GQ(n,e,{debounceMode:s!==!1})}const g$=_.createContext({});var jQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function XN(n){return typeof n=="number"?`${n} ${n} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(n)?`0 0 ${n}`:n}const WQ=["xs","sm","md","lg","xl","xxl"],qQ=_.forwardRef((n,e)=>{const{getPrefixCls:r,direction:i}=_.useContext($t),{gutter:o,wrap:s}=_.useContext(g$),{prefixCls:a,span:l,order:c,offset:u,push:d,pull:f,className:h,children:p,flex:g,style:y}=n,v=jQ(n,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),m=r("col",a),[x,b,S]=MX(m),w={};let C={};WQ.forEach(T=>{let R={};const P=n[T];typeof P=="number"?R.span=P:typeof P=="object"&&(R=P||{}),delete v[T],C=Object.assign(Object.assign({},C),{[`${m}-${T}-${R.span}`]:R.span!==void 0,[`${m}-${T}-order-${R.order}`]:R.order||R.order===0,[`${m}-${T}-offset-${R.offset}`]:R.offset||R.offset===0,[`${m}-${T}-push-${R.push}`]:R.push||R.push===0,[`${m}-${T}-pull-${R.pull}`]:R.pull||R.pull===0,[`${m}-rtl`]:i==="rtl"}),R.flex&&(C[`${m}-${T}-flex`]=!0,w[`--${m}-${T}-flex`]=XN(R.flex))});const E=_e(m,{[`${m}-${l}`]:l!==void 0,[`${m}-order-${c}`]:c,[`${m}-offset-${u}`]:u,[`${m}-push-${d}`]:d,[`${m}-pull-${f}`]:f},h,C,b,S),M={};if(o&&o[0]>0){const T=o[0]/2;M.paddingLeft=T,M.paddingRight=T}return g&&(M.flex=XN(g),s===!1&&!M.minWidth&&(M.minWidth=0)),x(_.createElement("div",Object.assign({},v,{style:Object.assign(Object.assign(Object.assign({},M),y),w),className:E,ref:e}),p))});var XQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function KN(n,e){const[r,i]=_.useState(typeof n=="string"?n:""),o=()=>{if(typeof n=="string"&&i(n),typeof n=="object")for(let s=0;s<cu.length;s++){const a=cu[s];if(!e[a])continue;const l=n[a];if(l!==void 0){i(l);return}}};return _.useEffect(()=>{o()},[JSON.stringify(n),e]),r}const KQ=_.forwardRef((n,e)=>{const{prefixCls:r,justify:i,align:o,className:s,style:a,children:l,gutter:c=0,wrap:u}=n,d=XQ(n,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:f,direction:h}=_.useContext($t),[p,g]=_.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[y,v]=_.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),m=KN(o,y),x=KN(i,y),b=_.useRef(c),S=a$();_.useEffect(()=>{const F=S.subscribe(O=>{v(O);const V=b.current||0;(!Array.isArray(V)&&typeof V=="object"||Array.isArray(V)&&(typeof V[0]=="object"||typeof V[1]=="object"))&&g(O)});return()=>S.unsubscribe(F)},[]);const w=()=>{const F=[void 0,void 0];return(Array.isArray(c)?c:[c,void 0]).forEach((V,U)=>{if(typeof V=="object")for(let k=0;k<cu.length;k++){const W=cu[k];if(p[W]&&V[W]!==void 0){F[U]=V[W];break}}else F[U]=V}),F},C=f("row",r),[E,M,T]=TX(C),R=w(),P=_e(C,{[`${C}-no-wrap`]:u===!1,[`${C}-${x}`]:x,[`${C}-${m}`]:m,[`${C}-rtl`]:h==="rtl"},s,M,T),D={},L=R[0]!=null&&R[0]>0?R[0]/-2:void 0;L&&(D.marginLeft=L,D.marginRight=L);const[A,I]=R;D.rowGap=I;const N=_.useMemo(()=>({gutter:[A,I],wrap:u}),[A,I,u]);return E(_.createElement(g$.Provider,{value:N},_.createElement("div",Object.assign({},d,{className:P,style:Object.assign(Object.assign({},D),a),ref:e}),l)))});function YQ(n){return!!(n.addonBefore||n.addonAfter)}function QQ(n){return!!(n.prefix||n.suffix||n.allowClear)}function YN(n,e,r){var i=e.cloneNode(!0),o=Object.create(n,{target:{value:i},currentTarget:{value:i}});return i.value=r,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(i.selectionStart=e.selectionStart,i.selectionEnd=e.selectionEnd),i.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},o}function fy(n,e,r,i){if(r){var o=e;if(e.type==="click"){o=YN(e,n,""),r(o);return}if(n.type!=="file"&&i!==void 0){o=YN(e,n,i),r(o);return}r(o)}}function v$(n,e){if(n){n.focus(e);var r=e||{},i=r.cursor;if(i){var o=n.value.length;switch(i){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(o,o);break;default:n.setSelectionRange(0,o)}}}}var y$=se.forwardRef(function(n,e){var r,i,o,s=n.inputElement,a=n.children,l=n.prefixCls,c=n.prefix,u=n.suffix,d=n.addonBefore,f=n.addonAfter,h=n.className,p=n.style,g=n.disabled,y=n.readOnly,v=n.focused,m=n.triggerFocus,x=n.allowClear,b=n.value,S=n.handleReset,w=n.hidden,C=n.classes,E=n.classNames,M=n.dataAttrs,T=n.styles,R=n.components,P=n.onClear,D=a??s,L=(R==null?void 0:R.affixWrapper)||"span",A=(R==null?void 0:R.groupWrapper)||"span",I=(R==null?void 0:R.wrapper)||"span",N=(R==null?void 0:R.groupAddon)||"span",F=_.useRef(null),O=function(ve){var be;(be=F.current)!==null&&be!==void 0&&be.contains(ve.target)&&(m==null||m())},V=QQ(n),U=_.cloneElement(D,{value:b,className:_e((r=D.props)===null||r===void 0?void 0:r.className,!V&&(E==null?void 0:E.variant))||null}),k=_.useRef(null);if(se.useImperativeHandle(e,function(){return{nativeElement:k.current||F.current}}),V){var W=null;if(x){var J=!g&&!y&&b,z="".concat(l,"-clear-icon"),j=Mt(x)==="object"&&x!==null&&x!==void 0&&x.clearIcon?x.clearIcon:"";W=se.createElement("button",{type:"button",onClick:function(ve){S==null||S(ve),P==null||P()},onMouseDown:function(ve){return ve.preventDefault()},className:_e(z,ee(ee({},"".concat(z,"-hidden"),!J),"".concat(z,"-has-suffix"),!!u))},j)}var X="".concat(l,"-affix-wrapper"),Q=_e(X,ee(ee(ee(ee(ee({},"".concat(l,"-disabled"),g),"".concat(X,"-disabled"),g),"".concat(X,"-focused"),v),"".concat(X,"-readonly"),y),"".concat(X,"-input-with-clear-btn"),u&&x&&b),C==null?void 0:C.affixWrapper,E==null?void 0:E.affixWrapper,E==null?void 0:E.variant),ne=(u||x)&&se.createElement("span",{className:_e("".concat(l,"-suffix"),E==null?void 0:E.suffix),style:T==null?void 0:T.suffix},W,u);U=se.createElement(L,ut({className:Q,style:T==null?void 0:T.affixWrapper,onClick:O},M==null?void 0:M.affixWrapper,{ref:F}),c&&se.createElement("span",{className:_e("".concat(l,"-prefix"),E==null?void 0:E.prefix),style:T==null?void 0:T.prefix},c),U,ne)}if(YQ(n)){var ye="".concat(l,"-group"),me="".concat(ye,"-addon"),fe="".concat(ye,"-wrapper"),le=_e("".concat(l,"-wrapper"),ye,C==null?void 0:C.wrapper,E==null?void 0:E.wrapper),ge=_e(fe,ee({},"".concat(fe,"-disabled"),g),C==null?void 0:C.group,E==null?void 0:E.groupWrapper);U=se.createElement(A,{className:ge,ref:k},se.createElement(I,{className:le},d&&se.createElement(N,{className:me},d),U,f&&se.createElement(N,{className:me},f)))}return se.cloneElement(U,{className:_e((i=U.props)===null||i===void 0?void 0:i.className,h)||null,style:re(re({},(o=U.props)===null||o===void 0?void 0:o.style),p),hidden:w})}),ZQ=["show"];function x$(n,e){return _.useMemo(function(){var r={};e&&(r.show=Mt(e)==="object"&&e.formatter?e.formatter:!!e),r=re(re({},r),n);var i=r,o=i.show,s=Cn(i,ZQ);return re(re({},s),{},{show:!!o,showFormatter:typeof o=="function"?o:void 0,strategy:s.strategy||function(a){return a.length}})},[n,e])}var JQ=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],eZ=_.forwardRef(function(n,e){var r=n.autoComplete,i=n.onChange,o=n.onFocus,s=n.onBlur,a=n.onPressEnter,l=n.onKeyDown,c=n.onKeyUp,u=n.prefixCls,d=u===void 0?"rc-input":u,f=n.disabled,h=n.htmlSize,p=n.className,g=n.maxLength,y=n.suffix,v=n.showCount,m=n.count,x=n.type,b=x===void 0?"text":x,S=n.classes,w=n.classNames,C=n.styles,E=n.onCompositionStart,M=n.onCompositionEnd,T=Cn(n,JQ),R=_.useState(!1),P=Ce(R,2),D=P[0],L=P[1],A=_.useRef(!1),I=_.useRef(!1),N=_.useRef(null),F=_.useRef(null),O=function(oe){N.current&&v$(N.current,oe)},V=Zi(n.defaultValue,{value:n.value}),U=Ce(V,2),k=U[0],W=U[1],J=k==null?"":String(k),z=_.useState(null),j=Ce(z,2),X=j[0],Q=j[1],ne=x$(m,v),ye=ne.max||g,me=ne.strategy(J),fe=!!ye&&me>ye;_.useImperativeHandle(e,function(){var K;return{focus:O,blur:function(){var pe;(pe=N.current)===null||pe===void 0||pe.blur()},setSelectionRange:function(pe,ce,Ue){var Re;(Re=N.current)===null||Re===void 0||Re.setSelectionRange(pe,ce,Ue)},select:function(){var pe;(pe=N.current)===null||pe===void 0||pe.select()},input:N.current,nativeElement:((K=F.current)===null||K===void 0?void 0:K.nativeElement)||N.current}}),_.useEffect(function(){I.current&&(I.current=!1),L(function(K){return K&&f?!1:K})},[f]);var le=function(oe,pe,ce){var Ue=pe;if(!A.current&&ne.exceedFormatter&&ne.max&&ne.strategy(pe)>ne.max){if(Ue=ne.exceedFormatter(pe,{max:ne.max}),pe!==Ue){var Re,Le;Q([((Re=N.current)===null||Re===void 0?void 0:Re.selectionStart)||0,((Le=N.current)===null||Le===void 0?void 0:Le.selectionEnd)||0])}}else if(ce.source==="compositionEnd")return;W(Ue),N.current&&fy(N.current,oe,i,Ue)};_.useEffect(function(){if(X){var K;(K=N.current)===null||K===void 0||K.setSelectionRange.apply(K,st(X))}},[X]);var ge=function(oe){le(oe,oe.target.value,{source:"change"})},q=function(oe){A.current=!1,le(oe,oe.currentTarget.value,{source:"compositionEnd"}),M==null||M(oe)},ve=function(oe){a&&oe.key==="Enter"&&!I.current&&(I.current=!0,a(oe)),l==null||l(oe)},be=function(oe){oe.key==="Enter"&&(I.current=!1),c==null||c(oe)},xe=function(oe){L(!0),o==null||o(oe)},we=function(oe){I.current&&(I.current=!1),L(!1),s==null||s(oe)},qe=function(oe){W(""),O(),N.current&&fy(N.current,oe,i)},Fe=fe&&"".concat(d,"-out-of-range"),H=function(){var oe=na(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return se.createElement("input",ut({autoComplete:r},oe,{onChange:ge,onFocus:xe,onBlur:we,onKeyDown:ve,onKeyUp:be,className:_e(d,ee({},"".concat(d,"-disabled"),f),w==null?void 0:w.input),style:C==null?void 0:C.input,ref:N,size:h,type:b,onCompositionStart:function(ce){A.current=!0,E==null||E(ce)},onCompositionEnd:q}))},B=function(){var oe=Number(ye)>0;if(y||ne.show){var pe=ne.showFormatter?ne.showFormatter({value:J,count:me,maxLength:ye}):"".concat(me).concat(oe?" / ".concat(ye):"");return se.createElement(se.Fragment,null,ne.show&&se.createElement("span",{className:_e("".concat(d,"-show-count-suffix"),ee({},"".concat(d,"-show-count-has-suffix"),!!y),w==null?void 0:w.count),style:re({},C==null?void 0:C.count)},pe),y)}return null};return se.createElement(y$,ut({},T,{prefixCls:d,className:_e(p,Fe),handleReset:qe,value:J,focused:D,triggerFocus:O,suffix:B(),disabled:f,classes:S,classNames:w,styles:C}),H())});const tZ=n=>{const{getPrefixCls:e,direction:r}=_.useContext($t),{prefixCls:i,className:o}=n,s=e("input-group",i),a=e("input"),[l,c]=VT(a),u=_e(s,{[`${s}-lg`]:n.size==="large",[`${s}-sm`]:n.size==="small",[`${s}-compact`]:n.compact,[`${s}-rtl`]:r==="rtl"},c,o),d=_.useContext(ja),f=_.useMemo(()=>Object.assign(Object.assign({},d),{isFormItemInput:!1}),[d]);return l(_.createElement("span",{className:u,style:n.style,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onFocus:n.onFocus,onBlur:n.onBlur},_.createElement(ja.Provider,{value:f},n.children)))},_$=n=>{let e;return typeof n=="object"&&(n!=null&&n.clearIcon)?e=n:n&&(e={clearIcon:se.createElement(Ax,null)}),e};function b$(n,e){const r=_.useRef([]),i=()=>{r.current.push(setTimeout(()=>{var o,s,a,l;!((o=n.current)===null||o===void 0)&&o.input&&((s=n.current)===null||s===void 0?void 0:s.input.getAttribute("type"))==="password"&&(!((a=n.current)===null||a===void 0)&&a.input.hasAttribute("value"))&&((l=n.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return _.useEffect(()=>(e&&i(),()=>r.current.forEach(o=>{o&&clearTimeout(o)})),[]),i}function nZ(n){return!!(n.prefix||n.suffix||n.allowClear||n.showCount)}var rZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Hx=_.forwardRef((n,e)=>{var r;const{prefixCls:i,bordered:o=!0,status:s,size:a,disabled:l,onBlur:c,onFocus:u,suffix:d,allowClear:f,addonAfter:h,addonBefore:p,className:g,style:y,styles:v,rootClassName:m,onChange:x,classNames:b,variant:S}=n,w=rZ(n,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:C,direction:E,input:M}=se.useContext($t),T=C("input",i),R=_.useRef(null),P=cc(T),[D,L,A]=VT(T,P),{compactSize:I,compactItemClassnames:N}=Ox(T,E),F=ra(ge=>{var q;return(q=a??I)!==null&&q!==void 0?q:ge}),O=se.useContext(Ha),V=l??O,{status:U,hasFeedback:k,feedbackIcon:W}=_.useContext(ja),J=Vx(U,s),z=nZ(n)||!!k;_.useRef(z);const j=b$(R,!0),X=ge=>{j(),c==null||c(ge)},Q=ge=>{j(),u==null||u(ge)},ne=ge=>{j(),x==null||x(ge)},ye=(k||d)&&se.createElement(se.Fragment,null,d,k&&W),me=_$(f??(M==null?void 0:M.allowClear)),[fe,le]=FT("input",S,o);return D(se.createElement(eZ,Object.assign({ref:ta(e,R),prefixCls:T,autoComplete:M==null?void 0:M.autoComplete},w,{disabled:V,onBlur:X,onFocus:Q,style:Object.assign(Object.assign({},M==null?void 0:M.style),y),styles:Object.assign(Object.assign({},M==null?void 0:M.styles),v),suffix:ye,allowClear:me,className:_e(g,m,A,P,N,M==null?void 0:M.className),onChange:ne,addonBefore:p&&se.createElement(cy,{form:!0,space:!0},p),addonAfter:h&&se.createElement(cy,{form:!0,space:!0},h),classNames:Object.assign(Object.assign(Object.assign({},b),M==null?void 0:M.classNames),{input:_e({[`${T}-sm`]:F==="small",[`${T}-lg`]:F==="large",[`${T}-rtl`]:E==="rtl"},b==null?void 0:b.input,(r=M==null?void 0:M.classNames)===null||r===void 0?void 0:r.input,L),variant:_e({[`${T}-${fe}`]:le},dy(T,J)),affixWrapper:_e({[`${T}-affix-wrapper-sm`]:F==="small",[`${T}-affix-wrapper-lg`]:F==="large",[`${T}-affix-wrapper-rtl`]:E==="rtl"},L),wrapper:_e({[`${T}-group-rtl`]:E==="rtl"},L),groupWrapper:_e({[`${T}-group-wrapper-sm`]:F==="small",[`${T}-group-wrapper-lg`]:F==="large",[`${T}-group-wrapper-rtl`]:E==="rtl",[`${T}-group-wrapper-${fe}`]:le},dy(`${T}-group-wrapper`,J,k),L)})})))}),iZ=n=>{const{componentCls:e,paddingXS:r}=n;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:r,"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:n.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:n.calc(n.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:n.paddingXS}}}},oZ=si(["Input","OTP"],n=>{const e=Un(n,UT(n));return[iZ(e)]},BT);var sZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const aZ=_.forwardRef((n,e)=>{const{value:r,onChange:i,onActiveChange:o,index:s,mask:a}=n,l=sZ(n,["value","onChange","onActiveChange","index","mask"]),c=r&&typeof a=="string"?a:r,u=g=>{i(s,g.target.value)},d=_.useRef(null);_.useImperativeHandle(e,()=>d.current);const f=()=>{pr(()=>{var g;const y=(g=d.current)===null||g===void 0?void 0:g.input;document.activeElement===y&&y&&y.select()})},h=g=>{const{key:y,ctrlKey:v,metaKey:m}=g;y==="ArrowLeft"?o(s-1):y==="ArrowRight"?o(s+1):y==="z"&&(v||m)&&g.preventDefault(),f()},p=g=>{g.key==="Backspace"&&!r&&o(s-1),f()};return _.createElement(Hx,Object.assign({type:a===!0?"password":"text"},l,{ref:d,value:c,onInput:u,onFocus:f,onKeyDown:h,onKeyUp:p,onMouseDown:f,onMouseUp:f}))});var lZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function qg(n){return(n||"").split("")}const cZ=_.forwardRef((n,e)=>{const{prefixCls:r,length:i=6,size:o,defaultValue:s,value:a,onChange:l,formatter:c,variant:u,disabled:d,status:f,autoFocus:h,mask:p,type:g,onInput:y,inputMode:v}=n,m=lZ(n,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:x,direction:b}=_.useContext($t),S=x("otp",r),w=qs(m,{aria:!0,data:!0,attr:!0}),C=cc(S),[E,M,T]=oZ(S,C),R=ra(z=>o??z),P=_.useContext(ja),D=Vx(P.status,f),L=_.useMemo(()=>Object.assign(Object.assign({},P),{status:D,hasFeedback:!1,feedbackIcon:null}),[P,D]),A=_.useRef(null),I=_.useRef({});_.useImperativeHandle(e,()=>({focus:()=>{var z;(z=I.current[0])===null||z===void 0||z.focus()},blur:()=>{var z;for(let j=0;j<i;j+=1)(z=I.current[j])===null||z===void 0||z.blur()},nativeElement:A.current}));const N=z=>c?c(z):z,[F,O]=_.useState(qg(N(s||"")));_.useEffect(()=>{a!==void 0&&O(qg(a))},[a]);const V=br(z=>{O(z),y&&y(z),l&&z.length===i&&z.every(j=>j)&&z.some((j,X)=>F[X]!==j)&&l(z.join(""))}),U=br((z,j)=>{let X=st(F);for(let ne=0;ne<z;ne+=1)X[ne]||(X[ne]="");j.length<=1?X[z]=j:X=X.slice(0,z).concat(qg(j)),X=X.slice(0,i);for(let ne=X.length-1;ne>=0&&!X[ne];ne-=1)X.pop();const Q=N(X.map(ne=>ne||" ").join(""));return X=qg(Q).map((ne,ye)=>ne===" "&&!X[ye]?X[ye]:ne),X}),k=(z,j)=>{var X;const Q=U(z,j),ne=Math.min(z+j.length,i-1);ne!==z&&Q[z]!==void 0&&((X=I.current[ne])===null||X===void 0||X.focus()),V(Q)},W=z=>{var j;(j=I.current[z])===null||j===void 0||j.focus()},J={variant:u,disabled:d,status:D,mask:p,type:g,inputMode:v};return E(_.createElement("div",Object.assign({},w,{ref:A,className:_e(S,{[`${S}-sm`]:R==="small",[`${S}-lg`]:R==="large",[`${S}-rtl`]:b==="rtl"},T,M)}),_.createElement(ja.Provider,{value:L},Array.from({length:i}).map((z,j)=>{const X=`otp-${j}`,Q=F[j]||"";return _.createElement(aZ,Object.assign({ref:ne=>{I.current[j]=ne},key:X,index:j,size:R,htmlSize:1,className:`${S}-input`,onChange:k,value:Q,onActiveChange:W,autoFocus:j===0&&h},J))}))))});var uZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},dZ=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:uZ}))},fZ=_.forwardRef(dZ),hZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},pZ=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:hZ}))},mZ=_.forwardRef(pZ),gZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const vZ=n=>n?_.createElement(mZ,null):_.createElement(fZ,null),yZ={click:"onClick",hover:"onMouseOver"},xZ=_.forwardRef((n,e)=>{const{disabled:r,action:i="click",visibilityToggle:o=!0,iconRender:s=vZ}=n,a=_.useContext(Ha),l=r??a,c=typeof o=="object"&&o.visible!==void 0,[u,d]=_.useState(()=>c?o.visible:!1),f=_.useRef(null);_.useEffect(()=>{c&&d(o.visible)},[c,o]);const h=b$(f),p=()=>{var R;if(l)return;u&&h();const P=!u;d(P),typeof o=="object"&&((R=o.onVisibleChange)===null||R===void 0||R.call(o,P))},g=R=>{const P=yZ[i]||"",D=s(u),L={[P]:p,className:`${R}-icon`,key:"passwordIcon",onMouseDown:A=>{A.preventDefault()},onMouseUp:A=>{A.preventDefault()}};return _.cloneElement(_.isValidElement(D)?D:_.createElement("span",null,D),L)},{className:y,prefixCls:v,inputPrefixCls:m,size:x}=n,b=gZ(n,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:S}=_.useContext($t),w=S("input",m),C=S("input-password",v),E=o&&g(C),M=_e(C,y,{[`${C}-${x}`]:!!x}),T=Object.assign(Object.assign({},na(b,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:M,prefixCls:w,suffix:E});return x&&(T.size=x),_.createElement(Hx,Object.assign({ref:ta(e,f)},T))});var _Z=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const bZ=_.forwardRef((n,e)=>{const{prefixCls:r,inputPrefixCls:i,className:o,size:s,suffix:a,enterButton:l=!1,addonAfter:c,loading:u,disabled:d,onSearch:f,onChange:h,onCompositionStart:p,onCompositionEnd:g}=n,y=_Z(n,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:v,direction:m}=_.useContext($t),x=_.useRef(!1),b=v("input-search",r),S=v("input",i),{compactSize:w}=Ox(b,m),C=ra(k=>{var W;return(W=s??w)!==null&&W!==void 0?W:k}),E=_.useRef(null),M=k=>{k!=null&&k.target&&k.type==="click"&&f&&f(k.target.value,k,{source:"clear"}),h==null||h(k)},T=k=>{var W;document.activeElement===((W=E.current)===null||W===void 0?void 0:W.input)&&k.preventDefault()},R=k=>{var W,J;f&&f((J=(W=E.current)===null||W===void 0?void 0:W.input)===null||J===void 0?void 0:J.value,k,{source:"input"})},P=k=>{x.current||u||R(k)},D=typeof l=="boolean"?_.createElement(o$,null):null,L=`${b}-button`;let A;const I=l||{},N=I.type&&I.type.__ANT_BUTTON===!0;N||I.type==="button"?A=Zl(I,Object.assign({onMouseDown:T,onClick:k=>{var W,J;(J=(W=I==null?void 0:I.props)===null||W===void 0?void 0:W.onClick)===null||J===void 0||J.call(W,k),R(k)},key:"enterButton"},N?{className:L,size:C}:{})):A=_.createElement(Gf,{className:L,type:l?"primary":void 0,size:C,disabled:d,key:"enterButton",onMouseDown:T,onClick:R,loading:u,icon:D},l),c&&(A=[A,Zl(c,{key:"addonAfter"})]);const F=_e(b,{[`${b}-rtl`]:m==="rtl",[`${b}-${C}`]:!!C,[`${b}-with-button`]:!!l},o),O=Object.assign(Object.assign({},y),{className:F,prefixCls:S,type:"search"}),V=k=>{x.current=!0,p==null||p(k)},U=k=>{x.current=!1,g==null||g(k)};return _.createElement(Hx,Object.assign({ref:ta(E,e),onPressEnter:P},O,{size:C,onCompositionStart:V,onCompositionEnd:U,addonAfter:A,suffix:a,onChange:M,disabled:d}))});var SZ=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,wZ=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Ob={},io;function CZ(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=n.getAttribute("id")||n.getAttribute("data-reactid")||n.getAttribute("name");if(e&&Ob[r])return Ob[r];var i=window.getComputedStyle(n),o=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),s=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),a=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),l=wZ.map(function(u){return"".concat(u,":").concat(i.getPropertyValue(u))}).join(";"),c={sizingStyle:l,paddingSize:s,borderSize:a,boxSizing:o};return e&&r&&(Ob[r]=c),c}function EZ(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;io||(io=document.createElement("textarea"),io.setAttribute("tab-index","-1"),io.setAttribute("aria-hidden","true"),io.setAttribute("name","hiddenTextarea"),document.body.appendChild(io)),n.getAttribute("wrap")?io.setAttribute("wrap",n.getAttribute("wrap")):io.removeAttribute("wrap");var o=CZ(n,e),s=o.paddingSize,a=o.borderSize,l=o.boxSizing,c=o.sizingStyle;io.setAttribute("style","".concat(c,";").concat(SZ)),io.value=n.value||n.placeholder||"";var u=void 0,d=void 0,f,h=io.scrollHeight;if(l==="border-box"?h+=a:l==="content-box"&&(h-=s),r!==null||i!==null){io.value=" ";var p=io.scrollHeight-s;r!==null&&(u=p*r,l==="border-box"&&(u=u+s+a),h=Math.max(u,h)),i!==null&&(d=p*i,l==="border-box"&&(d=d+s+a),f=h>d?"":"hidden",h=Math.min(d,h))}var g={height:h,overflowY:f,resize:"none"};return u&&(g.minHeight=u),d&&(g.maxHeight=d),g}var TZ=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Ib=0,Db=1,Lb=2,MZ=_.forwardRef(function(n,e){var r=n,i=r.prefixCls,o=r.defaultValue,s=r.value,a=r.autoSize,l=r.onResize,c=r.className,u=r.style,d=r.disabled,f=r.onChange;r.onInternalAutoSize;var h=Cn(r,TZ),p=Zi(o,{value:s,postState:function(z){return z??""}}),g=Ce(p,2),y=g[0],v=g[1],m=function(z){v(z.target.value),f==null||f(z)},x=_.useRef();_.useImperativeHandle(e,function(){return{textArea:x.current}});var b=_.useMemo(function(){return a&&Mt(a)==="object"?[a.minRows,a.maxRows]:[]},[a]),S=Ce(b,2),w=S[0],C=S[1],E=!!a,M=function(){try{if(document.activeElement===x.current){var z=x.current,j=z.selectionStart,X=z.selectionEnd,Q=z.scrollTop;x.current.setSelectionRange(j,X),x.current.scrollTop=Q}}catch{}},T=_.useState(Lb),R=Ce(T,2),P=R[0],D=R[1],L=_.useState(),A=Ce(L,2),I=A[0],N=A[1],F=function(){D(Ib)};_n(function(){E&&F()},[s,w,C,E]),_n(function(){if(P===Ib)D(Db);else if(P===Db){var J=EZ(x.current,!1,w,C);D(Lb),N(J)}else M()},[P]);var O=_.useRef(),V=function(){pr.cancel(O.current)},U=function(z){P===Lb&&(l==null||l(z),a&&(V(),O.current=pr(function(){F()})))};_.useEffect(function(){return V},[]);var k=E?I:null,W=re(re({},u),k);return(P===Ib||P===Db)&&(W.overflowY="hidden",W.overflowX="hidden"),_.createElement(Za,{onResize:U,disabled:!(a||l)},_.createElement("textarea",ut({},h,{ref:x,style:W,className:_e(i,c,ee({},"".concat(i,"-disabled"),d)),disabled:d,value:y,onChange:m})))}),RZ=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],AZ=se.forwardRef(function(n,e){var r,i=n.defaultValue,o=n.value,s=n.onFocus,a=n.onBlur,l=n.onChange,c=n.allowClear,u=n.maxLength,d=n.onCompositionStart,f=n.onCompositionEnd,h=n.suffix,p=n.prefixCls,g=p===void 0?"rc-textarea":p,y=n.showCount,v=n.count,m=n.className,x=n.style,b=n.disabled,S=n.hidden,w=n.classNames,C=n.styles,E=n.onResize,M=n.onClear,T=n.onPressEnter,R=n.readOnly,P=n.autoSize,D=n.onKeyDown,L=Cn(n,RZ),A=Zi(i,{value:o,defaultValue:i}),I=Ce(A,2),N=I[0],F=I[1],O=N==null?"":String(N),V=se.useState(!1),U=Ce(V,2),k=U[0],W=U[1],J=se.useRef(!1),z=se.useState(null),j=Ce(z,2),X=j[0],Q=j[1],ne=_.useRef(null),ye=_.useRef(null),me=function(){var Pe;return(Pe=ye.current)===null||Pe===void 0?void 0:Pe.textArea},fe=function(){me().focus()};_.useImperativeHandle(e,function(){var Ee;return{resizableTextArea:ye.current,focus:fe,blur:function(){me().blur()},nativeElement:((Ee=ne.current)===null||Ee===void 0?void 0:Ee.nativeElement)||me()}}),_.useEffect(function(){W(function(Ee){return!b&&Ee})},[b]);var le=se.useState(null),ge=Ce(le,2),q=ge[0],ve=ge[1];se.useEffect(function(){if(q){var Ee;(Ee=me()).setSelectionRange.apply(Ee,st(q))}},[q]);var be=x$(v,y),xe=(r=be.max)!==null&&r!==void 0?r:u,we=Number(xe)>0,qe=be.strategy(O),Fe=!!xe&&qe>xe,H=function(Pe,ke){var Ve=ke;!J.current&&be.exceedFormatter&&be.max&&be.strategy(ke)>be.max&&(Ve=be.exceedFormatter(ke,{max:be.max}),ke!==Ve&&ve([me().selectionStart||0,me().selectionEnd||0])),F(Ve),fy(Pe.currentTarget,Pe,l,Ve)},B=function(Pe){J.current=!0,d==null||d(Pe)},K=function(Pe){J.current=!1,H(Pe,Pe.currentTarget.value),f==null||f(Pe)},oe=function(Pe){H(Pe,Pe.target.value)},pe=function(Pe){Pe.key==="Enter"&&T&&T(Pe),D==null||D(Pe)},ce=function(Pe){W(!0),s==null||s(Pe)},Ue=function(Pe){W(!1),a==null||a(Pe)},Re=function(Pe){F(""),fe(),fy(me(),Pe,l)},Le=h,Je;be.show&&(be.showFormatter?Je=be.showFormatter({value:O,count:qe,maxLength:xe}):Je="".concat(qe).concat(we?" / ".concat(xe):""),Le=se.createElement(se.Fragment,null,Le,se.createElement("span",{className:_e("".concat(g,"-data-count"),w==null?void 0:w.count),style:C==null?void 0:C.count},Je)));var Me=function(Pe){var ke;E==null||E(Pe),(ke=me())!==null&&ke!==void 0&&ke.style.height&&Q(!0)},ze=!P&&!y&&!c;return se.createElement(y$,{ref:ne,value:O,allowClear:c,handleReset:Re,suffix:Le,prefixCls:g,classNames:re(re({},w),{},{affixWrapper:_e(w==null?void 0:w.affixWrapper,ee(ee({},"".concat(g,"-show-count"),y),"".concat(g,"-textarea-allow-clear"),c))}),disabled:b,focused:k,className:_e(m,Fe&&"".concat(g,"-out-of-range")),style:re(re({},x),X&&!ze?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Je=="string"?Je:void 0}},hidden:S,readOnly:R,onClear:M},se.createElement(MZ,ut({},L,{autoSize:P,maxLength:u,onKeyDown:pe,onChange:oe,onFocus:ce,onBlur:Ue,onCompositionStart:B,onCompositionEnd:K,className:_e(w==null?void 0:w.textarea),style:re(re({},C==null?void 0:C.textarea),{},{resize:x==null?void 0:x.resize}),disabled:b,prefixCls:g,onResize:Me,ref:ye,readOnly:R})))}),NZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const S$=_.forwardRef((n,e)=>{var r,i;const{prefixCls:o,bordered:s=!0,size:a,disabled:l,status:c,allowClear:u,classNames:d,rootClassName:f,className:h,style:p,styles:g,variant:y}=n,v=NZ(n,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:m,direction:x,textArea:b}=_.useContext($t),S=ra(a),w=_.useContext(Ha),C=l??w,{status:E,hasFeedback:M,feedbackIcon:T}=_.useContext(ja),R=Vx(E,c),P=_.useRef(null);_.useImperativeHandle(e,()=>{var U;return{resizableTextArea:(U=P.current)===null||U===void 0?void 0:U.resizableTextArea,focus:k=>{var W,J;v$((J=(W=P.current)===null||W===void 0?void 0:W.resizableTextArea)===null||J===void 0?void 0:J.textArea,k)},blur:()=>{var k;return(k=P.current)===null||k===void 0?void 0:k.blur()}}});const D=m("input",o),L=cc(D),[A,I,N]=VT(D,L),[F,O]=FT("textArea",y,s),V=_$(u??(b==null?void 0:b.allowClear));return A(_.createElement(AZ,Object.assign({autoComplete:b==null?void 0:b.autoComplete},v,{style:Object.assign(Object.assign({},b==null?void 0:b.style),p),styles:Object.assign(Object.assign({},b==null?void 0:b.styles),g),disabled:C,allowClear:V,className:_e(N,L,h,f,b==null?void 0:b.className),classNames:Object.assign(Object.assign(Object.assign({},d),b==null?void 0:b.classNames),{textarea:_e({[`${D}-sm`]:S==="small",[`${D}-lg`]:S==="large"},I,d==null?void 0:d.textarea,(r=b==null?void 0:b.classNames)===null||r===void 0?void 0:r.textarea),variant:_e({[`${D}-${F}`]:O},dy(D,R)),affixWrapper:_e(`${D}-textarea-affix-wrapper`,{[`${D}-affix-wrapper-rtl`]:x==="rtl",[`${D}-affix-wrapper-sm`]:S==="small",[`${D}-affix-wrapper-lg`]:S==="large",[`${D}-textarea-show-count`]:n.showCount||((i=n.count)===null||i===void 0?void 0:i.show)},I)}),prefixCls:D,suffix:M&&_.createElement("span",{className:`${D}-textarea-suffix`},T),ref:P})))}),Wf=Hx;Wf.Group=tZ;Wf.Search=bZ;Wf.TextArea=S$;Wf.Password=xZ;Wf.OTP=cZ;function QN(n){return["small","middle","large"].includes(n)}function ZN(n){return n?typeof n=="number"&&!Number.isNaN(n):!1}const w$=se.createContext({latestIndex:0}),PZ=w$.Provider,OZ=n=>{let{className:e,index:r,children:i,split:o,style:s}=n;const{latestIndex:a}=_.useContext(w$);return i==null?null:_.createElement(_.Fragment,null,_.createElement("div",{className:e,style:s},i),r<a&&o&&_.createElement("span",{className:`${e}-split`},o))};var IZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const DZ=_.forwardRef((n,e)=>{var r,i,o;const{getPrefixCls:s,space:a,direction:l}=_.useContext($t),{size:c=(r=a==null?void 0:a.size)!==null&&r!==void 0?r:"small",align:u,className:d,rootClassName:f,children:h,direction:p="horizontal",prefixCls:g,split:y,style:v,wrap:m=!1,classNames:x,styles:b}=n,S=IZ(n,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[w,C]=Array.isArray(c)?c:[c,c],E=QN(C),M=QN(w),T=ZN(C),R=ZN(w),P=Ga(h,{keepEmpty:!0}),D=u===void 0&&p==="horizontal"?"center":u,L=s("space",g),[A,I,N]=XU(L),F=_e(L,a==null?void 0:a.className,I,`${L}-${p}`,{[`${L}-rtl`]:l==="rtl",[`${L}-align-${D}`]:D,[`${L}-gap-row-${C}`]:E,[`${L}-gap-col-${w}`]:M},d,f,N),O=_e(`${L}-item`,(i=x==null?void 0:x.item)!==null&&i!==void 0?i:(o=a==null?void 0:a.classNames)===null||o===void 0?void 0:o.item);let V=0;const U=P.map((J,z)=>{var j,X;J!=null&&(V=z);const Q=(J==null?void 0:J.key)||`${O}-${z}`;return _.createElement(OZ,{className:O,key:Q,index:z,split:y,style:(j=b==null?void 0:b.item)!==null&&j!==void 0?j:(X=a==null?void 0:a.styles)===null||X===void 0?void 0:X.item},J)}),k=_.useMemo(()=>({latestIndex:V}),[V]);if(P.length===0)return null;const W={};return m&&(W.flexWrap="wrap"),!M&&R&&(W.columnGap=w),!E&&T&&(W.rowGap=C),A(_.createElement("div",Object.assign({ref:e,className:F,style:Object.assign(Object.assign(Object.assign({},W),a==null?void 0:a.style),v)},S),_.createElement(PZ,{value:k},U)))}),C$=DZ;C$.Compact=g9;const LZ=function(){const n=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let e=1;e<arguments.length;e++){const r=e<0||arguments.length<=e?void 0:arguments[e];r&&Object.keys(r).forEach(i=>{const o=r[i];o!==void 0&&(n[i]=o)})}return n};var FZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},UZ=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:FZ}))},JN=_.forwardRef(UZ),BZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},$Z=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:BZ}))},eP=_.forwardRef($Z),zZ={items_per_page:"/",jump_to:"",jump_to_confirm:"",page:"",prev_page:"",next_page:"",prev_5:" 5 ",next_5:" 5 ",prev_3:" 3 ",next_3:" 3 ",page_size:""},kZ=[10,20,50,100],VZ=function(e){var r=e.pageSizeOptions,i=r===void 0?kZ:r,o=e.locale,s=e.changeSize,a=e.pageSize,l=e.goButton,c=e.quickGo,u=e.rootPrefixCls,d=e.disabled,f=e.buildOptionText,h=e.showSizeChanger,p=e.sizeChangerRender,g=se.useState(""),y=Ce(g,2),v=y[0],m=y[1],x=function(){return!v||Number.isNaN(v)?void 0:Number(v)},b=typeof f=="function"?f:function(D){return"".concat(D," ").concat(o.items_per_page)},S=function(L){m(L.target.value)},w=function(L){l||v===""||(m(""),!(L.relatedTarget&&(L.relatedTarget.className.indexOf("".concat(u,"-item-link"))>=0||L.relatedTarget.className.indexOf("".concat(u,"-item"))>=0))&&(c==null||c(x())))},C=function(L){v!==""&&(L.keyCode===He.ENTER||L.type==="click")&&(m(""),c==null||c(x()))},E=function(){return i.some(function(L){return L.toString()===a.toString()})?i:i.concat([a]).sort(function(L,A){var I=Number.isNaN(Number(L))?0:Number(L),N=Number.isNaN(Number(A))?0:Number(A);return I-N})},M="".concat(u,"-options");if(!h&&!c)return null;var T=null,R=null,P=null;return h&&p&&(T=p({disabled:d,size:a,onSizeChange:function(L){s==null||s(Number(L))},"aria-label":o.page_size,className:"".concat(M,"-size-changer"),options:E().map(function(D){return{label:b(D),value:D}})})),c&&(l&&(P=typeof l=="boolean"?se.createElement("button",{type:"button",onClick:C,onKeyUp:C,disabled:d,className:"".concat(M,"-quick-jumper-button")},o.jump_to_confirm):se.createElement("span",{onClick:C,onKeyUp:C},l)),R=se.createElement("div",{className:"".concat(M,"-quick-jumper")},o.jump_to,se.createElement("input",{disabled:d,type:"text",value:v,onChange:S,onKeyUp:C,onBlur:w,"aria-label":o.page}),o.page,P)),se.createElement("li",{className:M},T,R)},yh=function(e){var r,i=e.rootPrefixCls,o=e.page,s=e.active,a=e.className,l=e.showTitle,c=e.onClick,u=e.onKeyPress,d=e.itemRender,f="".concat(i,"-item"),h=_e(f,"".concat(f,"-").concat(o),(r={},ee(r,"".concat(f,"-active"),s),ee(r,"".concat(f,"-disabled"),!o),r),a),p=function(){c(o)},g=function(m){u(m,c,o)},y=d(o,"page",se.createElement("a",{rel:"nofollow"},o));return y?se.createElement("li",{title:l?String(o):null,className:h,onClick:p,onKeyDown:g,tabIndex:0},y):null},GZ=function(e,r,i){return i};function tP(){}function nP(n){var e=Number(n);return typeof e=="number"&&!Number.isNaN(e)&&isFinite(e)&&Math.floor(e)===e}function vc(n,e,r){var i=typeof n>"u"?e:n;return Math.floor((r-1)/i)+1}var HZ=function(e){var r,i=e.prefixCls,o=i===void 0?"rc-pagination":i,s=e.selectPrefixCls,a=s===void 0?"rc-select":s,l=e.className,c=e.current,u=e.defaultCurrent,d=u===void 0?1:u,f=e.total,h=f===void 0?0:f,p=e.pageSize,g=e.defaultPageSize,y=g===void 0?10:g,v=e.onChange,m=v===void 0?tP:v,x=e.hideOnSinglePage,b=e.align,S=e.showPrevNextJumpers,w=S===void 0?!0:S,C=e.showQuickJumper,E=e.showLessItems,M=e.showTitle,T=M===void 0?!0:M,R=e.onShowSizeChange,P=R===void 0?tP:R,D=e.locale,L=D===void 0?zZ:D,A=e.style,I=e.totalBoundaryShowSizeChanger,N=I===void 0?50:I,F=e.disabled,O=e.simple,V=e.showTotal,U=e.showSizeChanger,k=U===void 0?h>N:U,W=e.sizeChangerRender,J=e.pageSizeOptions,z=e.itemRender,j=z===void 0?GZ:z,X=e.jumpPrevIcon,Q=e.jumpNextIcon,ne=e.prevIcon,ye=e.nextIcon,me=se.useRef(null),fe=Zi(10,{value:p,defaultValue:y}),le=Ce(fe,2),ge=le[0],q=le[1],ve=Zi(1,{value:c,defaultValue:d,postState:function(et){return Math.max(1,Math.min(et,vc(void 0,ge,h)))}}),be=Ce(ve,2),xe=be[0],we=be[1],qe=se.useState(xe),Fe=Ce(qe,2),H=Fe[0],B=Fe[1];_.useEffect(function(){B(xe)},[xe]);var K=Math.max(1,xe-(E?3:5)),oe=Math.min(vc(void 0,ge,h),xe+(E?3:5));function pe(Ye,et){var _t=Ye||se.createElement("button",{type:"button","aria-label":et,className:"".concat(o,"-item-link")});return typeof Ye=="function"&&(_t=se.createElement(Ye,re({},e))),_t}function ce(Ye){var et=Ye.target.value,_t=vc(void 0,ge,h),zt;return et===""?zt=et:Number.isNaN(Number(et))?zt=H:et>=_t?zt=_t:zt=Number(et),zt}function Ue(Ye){return nP(Ye)&&Ye!==xe&&nP(h)&&h>0}var Re=h>ge?C:!1;function Le(Ye){(Ye.keyCode===He.UP||Ye.keyCode===He.DOWN)&&Ye.preventDefault()}function Je(Ye){var et=ce(Ye);switch(et!==H&&B(et),Ye.keyCode){case He.ENTER:Ee(et);break;case He.UP:Ee(et-1);break;case He.DOWN:Ee(et+1);break}}function Me(Ye){Ee(ce(Ye))}function ze(Ye){var et=vc(Ye,ge,h),_t=xe>et&&et!==0?et:xe;q(Ye),B(_t),P==null||P(xe,Ye),we(_t),m==null||m(_t,Ye)}function Ee(Ye){if(Ue(Ye)&&!F){var et=vc(void 0,ge,h),_t=Ye;return Ye>et?_t=et:Ye<1&&(_t=1),_t!==H&&B(_t),we(_t),m==null||m(_t,ge),_t}return xe}var Pe=xe>1,ke=xe<vc(void 0,ge,h);function Ve(){Pe&&Ee(xe-1)}function $e(){ke&&Ee(xe+1)}function xt(){Ee(K)}function te(){Ee(oe)}function Qe(Ye,et){if(Ye.key==="Enter"||Ye.charCode===He.ENTER||Ye.keyCode===He.ENTER){for(var _t=arguments.length,zt=new Array(_t>2?_t-2:0),pn=2;pn<_t;pn++)zt[pn-2]=arguments[pn];et.apply(void 0,zt)}}function Se(Ye){Qe(Ye,Ve)}function Oe(Ye){Qe(Ye,$e)}function Ze(Ye){Qe(Ye,xt)}function We(Ye){Qe(Ye,te)}function wt(Ye){var et=j(Ye,"prev",pe(ne,"prev page"));return se.isValidElement(et)?se.cloneElement(et,{disabled:!Pe}):et}function Rt(Ye){var et=j(Ye,"next",pe(ye,"next page"));return se.isValidElement(et)?se.cloneElement(et,{disabled:!ke}):et}function dt(Ye){(Ye.type==="click"||Ye.keyCode===He.ENTER)&&Ee(H)}var Xe=null,rt=qs(e,{aria:!0,data:!0}),Lt=V&&se.createElement("li",{className:"".concat(o,"-total-text")},V(h,[h===0?0:(xe-1)*ge+1,xe*ge>h?h:xe*ge])),bn=null,Ke=vc(void 0,ge,h);if(x&&h<=ge)return null;var ot=[],yt={rootPrefixCls:o,onClick:Ee,onKeyPress:Qe,showTitle:T,itemRender:j,page:-1},ft=xe-1>0?xe-1:0,bt=xe+1<Ke?xe+1:Ke,It=C&&C.goButton,yn=Mt(O)==="object"?O.readOnly:!O,un=It,Bn=null;O&&(It&&(typeof It=="boolean"?un=se.createElement("button",{type:"button",onClick:dt,onKeyUp:dt},L.jump_to_confirm):un=se.createElement("span",{onClick:dt,onKeyUp:dt},It),un=se.createElement("li",{title:T?"".concat(L.jump_to).concat(xe,"/").concat(Ke):null,className:"".concat(o,"-simple-pager")},un)),Bn=se.createElement("li",{title:T?"".concat(xe,"/").concat(Ke):null,className:"".concat(o,"-simple-pager")},yn?H:se.createElement("input",{type:"text",value:H,disabled:F,onKeyDown:Le,onKeyUp:Je,onChange:Je,onBlur:Me,size:3}),se.createElement("span",{className:"".concat(o,"-slash")},"/"),Ke));var en=E?1:2;if(Ke<=3+en*2){Ke||ot.push(se.createElement(yh,ut({},yt,{key:"noPager",page:1,className:"".concat(o,"-item-disabled")})));for(var En=1;En<=Ke;En+=1)ot.push(se.createElement(yh,ut({},yt,{key:En,page:En,active:xe===En})))}else{var ar=E?L.prev_3:L.prev_5,Vn=E?L.next_3:L.next_5,Ar=j(K,"jump-prev",pe(X,"prev page")),vt=j(oe,"jump-next",pe(Q,"next page"));w&&(Xe=Ar?se.createElement("li",{title:T?ar:null,key:"prev",onClick:xt,tabIndex:0,onKeyDown:Ze,className:_e("".concat(o,"-jump-prev"),ee({},"".concat(o,"-jump-prev-custom-icon"),!!X))},Ar):null,bn=vt?se.createElement("li",{title:T?Vn:null,key:"next",onClick:te,tabIndex:0,onKeyDown:We,className:_e("".concat(o,"-jump-next"),ee({},"".concat(o,"-jump-next-custom-icon"),!!Q))},vt):null);var $=Math.max(1,xe-en),Z=Math.min(xe+en,Ke);xe-1<=en&&(Z=1+en*2),Ke-xe<=en&&($=Ke-en*2);for(var de=$;de<=Z;de+=1)ot.push(se.createElement(yh,ut({},yt,{key:de,page:de,active:xe===de})));if(xe-1>=en*2&&xe!==3&&(ot[0]=se.cloneElement(ot[0],{className:_e("".concat(o,"-item-after-jump-prev"),ot[0].props.className)}),ot.unshift(Xe)),Ke-xe>=en*2&&xe!==Ke-2){var he=ot[ot.length-1];ot[ot.length-1]=se.cloneElement(he,{className:_e("".concat(o,"-item-before-jump-next"),he.props.className)}),ot.push(bn)}$!==1&&ot.unshift(se.createElement(yh,ut({},yt,{key:1,page:1}))),Z!==Ke&&ot.push(se.createElement(yh,ut({},yt,{key:Ke,page:Ke})))}var ae=wt(ft);if(ae){var Ge=!Pe||!Ke;ae=se.createElement("li",{title:T?L.prev_page:null,onClick:Ve,tabIndex:Ge?null:0,onKeyDown:Se,className:_e("".concat(o,"-prev"),ee({},"".concat(o,"-disabled"),Ge)),"aria-disabled":Ge},ae)}var at=Rt(bt);if(at){var ht,mt;O?(ht=!ke,mt=Pe?0:null):(ht=!ke||!Ke,mt=ht?null:0),at=se.createElement("li",{title:T?L.next_page:null,onClick:$e,tabIndex:mt,onKeyDown:Oe,className:_e("".concat(o,"-next"),ee({},"".concat(o,"-disabled"),ht)),"aria-disabled":ht},at)}var Et=_e(o,l,(r={},ee(r,"".concat(o,"-start"),b==="start"),ee(r,"".concat(o,"-center"),b==="center"),ee(r,"".concat(o,"-end"),b==="end"),ee(r,"".concat(o,"-simple"),O),ee(r,"".concat(o,"-disabled"),F),r));return se.createElement("ul",ut({className:Et,style:A,ref:me},rt),Lt,ae,O?Bn:ot,at,se.createElement(VZ,{locale:L,rootPrefixCls:o,disabled:F,selectPrefixCls:a,changeSize:ze,pageSize:ge,pageSizeOptions:J,quickGo:Re?Ee:null,goButton:un,showSizeChanger:k,sizeChangerRender:W}))};const jZ=n=>{const{componentCls:e}=n;return{[`${e}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed"}}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:n.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:n.colorBorder,backgroundColor:n.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:n.itemActiveBgDisabled},a:{color:n.itemActiveColorDisabled}}},[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${e}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${e}-simple-pager`]:{color:n.colorTextDisabled},[`${e}-jump-prev, ${e}-jump-next`]:{[`${e}-item-link-icon`]:{opacity:0},[`${e}-item-ellipsis`]:{opacity:1}}},[`&${e}-simple`]:{[`${e}-prev, ${e}-next`]:{[`&${e}-disabled ${e}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},WZ=n=>{const{componentCls:e}=n;return{[`&${e}-mini ${e}-total-text, &${e}-mini ${e}-simple-pager`]:{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)},[`&${e}-mini ${e}-item`]:{minWidth:n.itemSizeSM,height:n.itemSizeSM,margin:0,lineHeight:De(n.calc(n.itemSizeSM).sub(2).equal())},[`&${e}-mini:not(${e}-disabled) ${e}-item:not(${e}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive}},[`&${e}-mini ${e}-prev, &${e}-mini ${e}-next`]:{minWidth:n.itemSizeSM,height:n.itemSizeSM,margin:0,lineHeight:De(n.itemSizeSM)},[`&${e}-mini:not(${e}-disabled)`]:{[`${e}-prev, ${e}-next`]:{[`&:hover ${e}-item-link`]:{backgroundColor:n.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:n.colorBgTextActive},[`&${e}-disabled:hover ${e}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${e}-mini ${e}-prev ${e}-item-link,
    &${e}-mini ${e}-next ${e}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)}},[`&${e}-mini ${e}-jump-prev, &${e}-mini ${e}-jump-next`]:{height:n.itemSizeSM,marginInlineEnd:0,lineHeight:De(n.itemSizeSM)},[`&${e}-mini ${e}-options`]:{marginInlineStart:n.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:n.miniOptionsSizeChangerTop},"&-quick-jumper":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM),input:Object.assign(Object.assign({},zT(n)),{width:n.paginationMiniQuickJumperInputWidth,height:n.controlHeightSM})}}}},qZ=n=>{const{componentCls:e}=n;return{[`
    &${e}-simple ${e}-prev,
    &${e}-simple ${e}-next
    `]:{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM),verticalAlign:"top",[`${e}-item-link`]:{height:n.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive},"&::after":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)}}},[`&${e}-simple ${e}-simple-pager`]:{display:"inline-block",height:n.itemSizeSM,marginInlineEnd:n.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${De(n.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:n.itemInputBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadius,outline:"none",transition:`border-color ${n.motionDurationMid}`,color:"inherit","&:hover":{borderColor:n.colorPrimary},"&:focus":{borderColor:n.colorPrimaryHover,boxShadow:`${De(n.inputOutlineOffset)} 0 ${De(n.controlOutlineWidth)} ${n.controlOutline}`},"&[disabled]":{color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,cursor:"not-allowed"}}}}},XZ=n=>{const{componentCls:e}=n;return{[`${e}-jump-prev, ${e}-jump-next`]:{outline:0,[`${e}-item-container`]:{position:"relative",[`${e}-item-link-icon`]:{color:n.colorPrimary,fontSize:n.fontSizeSM,opacity:0,transition:`all ${n.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${e}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:n.colorTextDisabled,letterSpacing:n.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:n.paginationEllipsisTextIndent,opacity:1,transition:`all ${n.motionDurationMid}`}},"&:hover":{[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}}},[`
    ${e}-prev,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{marginInlineEnd:n.marginXS},[`
    ${e}-prev,
    ${e}-next,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{display:"inline-block",minWidth:n.itemSize,height:n.itemSize,color:n.colorText,fontFamily:n.fontFamily,lineHeight:De(n.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:n.borderRadius,cursor:"pointer",transition:`all ${n.motionDurationMid}`},[`${e}-prev, ${e}-next`]:{outline:0,button:{color:n.colorText,cursor:"pointer",userSelect:"none"},[`${e}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:n.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`,borderRadius:n.borderRadius,outline:"none",transition:`all ${n.motionDurationMid}`},[`&:hover ${e}-item-link`]:{backgroundColor:n.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:n.colorBgTextActive},[`&${e}-disabled:hover`]:{[`${e}-item-link`]:{backgroundColor:"transparent"}}},[`${e}-slash`]:{marginInlineEnd:n.paginationSlashMarginInlineEnd,marginInlineStart:n.paginationSlashMarginInlineStart},[`${e}-options`]:{display:"inline-block",marginInlineStart:n.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:n.controlHeight,marginInlineStart:n.marginXS,lineHeight:De(n.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},kT(n)),$T(n,{borderColor:n.colorBorder,hoverBorderColor:n.colorPrimaryHover,activeBorderColor:n.colorPrimary,activeShadow:n.activeShadow})),{"&[disabled]":Object.assign({},Gx(n)),width:n.calc(n.controlHeightLG).mul(1.25).equal(),height:n.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:n.marginXS,marginInlineEnd:n.marginXS})}}}},KZ=n=>{const{componentCls:e}=n;return{[`${e}-item`]:{display:"inline-block",minWidth:n.itemSize,height:n.itemSize,marginInlineEnd:n.marginXS,fontFamily:n.fontFamily,lineHeight:De(n.calc(n.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:n.itemBg,border:`${De(n.lineWidth)} ${n.lineType} transparent`,borderRadius:n.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${De(n.paginationItemPaddingInline)}`,color:n.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${e}-item-active)`]:{"&:hover":{transition:`all ${n.motionDurationMid}`,backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive}},"&-active":{fontWeight:n.fontWeightStrong,backgroundColor:n.itemActiveBg,borderColor:n.colorPrimary,a:{color:n.colorPrimary},"&:hover":{borderColor:n.colorPrimaryHover},"&:hover a":{color:n.colorPrimaryHover}}}}},YZ=n=>{const{componentCls:e}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yo(n)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${e}-total-text`]:{display:"inline-block",height:n.itemSize,marginInlineEnd:n.marginXS,lineHeight:De(n.calc(n.itemSize).sub(2).equal()),verticalAlign:"middle"}}),KZ(n)),XZ(n)),qZ(n)),WZ(n)),jZ(n)),{[`@media only screen and (max-width: ${n.screenLG}px)`]:{[`${e}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${n.screenSM}px)`]:{[`${e}-options`]:{display:"none"}}}),[`&${n.componentCls}-rtl`]:{direction:"rtl"}}},QZ=n=>{const{componentCls:e}=n;return{[`${e}:not(${e}-disabled)`]:{[`${e}-item`]:Object.assign({},Gm(n)),[`${e}-jump-prev, ${e}-jump-next`]:{"&:focus-visible":Object.assign({[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}},Ww(n))},[`${e}-prev, ${e}-next`]:{[`&:focus-visible ${e}-item-link`]:Object.assign({},Ww(n))}}}},E$=n=>Object.assign({itemBg:n.colorBgContainer,itemSize:n.controlHeight,itemSizeSM:n.controlHeightSM,itemActiveBg:n.colorBgContainer,itemLinkBg:n.colorBgContainer,itemActiveColorDisabled:n.colorTextDisabled,itemActiveBgDisabled:n.controlItemBgActiveDisabled,itemInputBg:n.colorBgContainer,miniOptionsSizeChangerTop:0},BT(n)),T$=n=>Un(n,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:n.calc(n.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:n.calc(n.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:n.calc(n.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:n.calc(n.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:n.marginSM,paginationSlashMarginInlineEnd:n.marginSM,paginationEllipsisTextIndent:"0.13em"},UT(n)),ZZ=si("Pagination",n=>{const e=T$(n);return[YZ(e),QZ(e)]},E$),JZ=n=>{const{componentCls:e}=n;return{[`${e}${e}-bordered${e}-disabled:not(${e}-mini)`]:{"&, &:hover":{[`${e}-item-link`]:{borderColor:n.colorBorder}},"&:focus-visible":{[`${e}-item-link`]:{borderColor:n.colorBorder}},[`${e}-item, ${e}-item-link`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,[`&:hover:not(${e}-item-active)`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,a:{color:n.colorTextDisabled}},[`&${e}-item-active`]:{backgroundColor:n.itemActiveBgDisabled}},[`${e}-prev, ${e}-next`]:{"&:hover button":{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,color:n.colorTextDisabled},[`${e}-item-link`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder}}},[`${e}${e}-bordered:not(${e}-mini)`]:{[`${e}-prev, ${e}-next`]:{"&:hover button":{borderColor:n.colorPrimaryHover,backgroundColor:n.itemBg},[`${e}-item-link`]:{backgroundColor:n.itemLinkBg,borderColor:n.colorBorder},[`&:hover ${e}-item-link`]:{borderColor:n.colorPrimary,backgroundColor:n.itemBg,color:n.colorPrimary},[`&${e}-disabled`]:{[`${e}-item-link`]:{borderColor:n.colorBorder,color:n.colorTextDisabled}}},[`${e}-item`]:{backgroundColor:n.itemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,[`&:hover:not(${e}-item-active)`]:{borderColor:n.colorPrimary,backgroundColor:n.itemBg,a:{color:n.colorPrimary}},"&-active":{borderColor:n.colorPrimary}}}}},eJ=bT(["Pagination","bordered"],n=>{const e=T$(n);return[JZ(e)]},E$);function rP(n){return _.useMemo(()=>typeof n=="boolean"?[n,{}]:n&&typeof n=="object"?[!0,n]:[void 0,void 0],[n])}var tJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const nJ=n=>{const{align:e,prefixCls:r,selectPrefixCls:i,className:o,rootClassName:s,style:a,size:l,locale:c,responsive:u,showSizeChanger:d,selectComponentClass:f,pageSizeOptions:h}=n,p=tJ(n,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:g}=l$(u),[,y]=eo(),{getPrefixCls:v,direction:m,pagination:x={}}=_.useContext($t),b=v("pagination",r),[S,w,C]=ZZ(b),E=ra(l),M=E==="small"||!!(g&&!E&&u),[T]=lc("Pagination",Z3),R=Object.assign(Object.assign({},T),c),[P,D]=rP(d),[L,A]=rP(x.showSizeChanger),I=P??L,N=D??A,F=f||Eu,O=_.useMemo(()=>h?h.map(z=>Number(z)):void 0,[h]),V=z=>{var j;const{disabled:X,size:Q,onSizeChange:ne,"aria-label":ye,className:me,options:fe}=z,{className:le,onChange:ge}=N||{},q=(j=fe.find(ve=>String(ve.value)===String(Q)))===null||j===void 0?void 0:j.value;return _.createElement(F,Object.assign({disabled:X,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:ve=>ve.parentNode,"aria-label":ye,options:fe},N,{value:q,onChange:(ve,be)=>{ne==null||ne(ve),ge==null||ge(ve,be)},size:M?"small":"middle",className:_e(me,le)}))},U=_.useMemo(()=>{const z=_.createElement("span",{className:`${b}-item-ellipsis`},""),j=_.createElement("button",{className:`${b}-item-link`,type:"button",tabIndex:-1},m==="rtl"?_.createElement(z2,null):_.createElement(GN,null)),X=_.createElement("button",{className:`${b}-item-link`,type:"button",tabIndex:-1},m==="rtl"?_.createElement(GN,null):_.createElement(z2,null)),Q=_.createElement("a",{className:`${b}-item-link`},_.createElement("div",{className:`${b}-item-container`},m==="rtl"?_.createElement(eP,{className:`${b}-item-link-icon`}):_.createElement(JN,{className:`${b}-item-link-icon`}),z)),ne=_.createElement("a",{className:`${b}-item-link`},_.createElement("div",{className:`${b}-item-container`},m==="rtl"?_.createElement(JN,{className:`${b}-item-link-icon`}):_.createElement(eP,{className:`${b}-item-link-icon`}),z));return{prevIcon:j,nextIcon:X,jumpPrevIcon:Q,jumpNextIcon:ne}},[m,b]),k=v("select",i),W=_e({[`${b}-${e}`]:!!e,[`${b}-mini`]:M,[`${b}-rtl`]:m==="rtl",[`${b}-bordered`]:y.wireframe},x==null?void 0:x.className,o,s,w,C),J=Object.assign(Object.assign({},x==null?void 0:x.style),a);return S(_.createElement(_.Fragment,null,y.wireframe&&_.createElement(eJ,{prefixCls:b}),_.createElement(HZ,Object.assign({},U,p,{style:J,prefixCls:b,selectPrefixCls:k,className:W,locale:R,pageSizeOptions:O,showSizeChanger:I,sizeChangerRender:V}))))},hy=100,M$=hy/5,R$=hy/2-M$/2,Fb=R$*2*Math.PI,iP=50,oP=n=>{const{dotClassName:e,style:r,hasCircleCls:i}=n;return _.createElement("circle",{className:_e(`${e}-circle`,{[`${e}-circle-bg`]:i}),r:R$,cx:iP,cy:iP,strokeWidth:M$,style:r})},rJ=n=>{let{percent:e,prefixCls:r}=n;const i=`${r}-dot`,o=`${i}-holder`,s=`${o}-hidden`,[a,l]=_.useState(!1);_n(()=>{e!==0&&l(!0)},[e!==0]);const c=Math.max(Math.min(e,100),0);if(!a)return null;const u={strokeDashoffset:`${Fb/4}`,strokeDasharray:`${Fb*c/100} ${Fb*(100-c)/100}`};return _.createElement("span",{className:_e(o,`${i}-progress`,c<=0&&s)},_.createElement("svg",{viewBox:`0 0 ${hy} ${hy}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},_.createElement(oP,{dotClassName:i,hasCircleCls:!0}),_.createElement(oP,{dotClassName:i,style:u})))};function iJ(n){const{prefixCls:e,percent:r=0}=n,i=`${e}-dot`,o=`${i}-holder`,s=`${o}-hidden`;return _.createElement(_.Fragment,null,_.createElement("span",{className:_e(o,r>0&&s)},_.createElement("span",{className:_e(i,`${e}-dot-spin`)},[1,2,3,4].map(a=>_.createElement("i",{className:`${e}-dot-item`,key:a})))),_.createElement(rJ,{prefixCls:e,percent:r}))}function oJ(n){const{prefixCls:e,indicator:r,percent:i}=n,o=`${e}-dot`;return r&&_.isValidElement(r)?Zl(r,{className:_e(r.props.className,o),percent:i}):_.createElement(iJ,{prefixCls:e,percent:i})}const sJ=new hn("antSpinMove",{to:{opacity:1}}),aJ=new hn("antRotate",{to:{transform:"rotate(405deg)"}}),lJ=n=>{const{componentCls:e,calc:r}=n;return{[e]:Object.assign(Object.assign({},Yo(n)),{position:"absolute",display:"none",color:n.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${n.motionDurationSlow} ${n.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${e}-text`]:{fontSize:n.fontSize,paddingTop:r(r(n.dotSize).sub(n.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:n.colorBgMask,zIndex:n.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${n.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[e]:{[`${e}-dot-holder`]:{color:n.colorWhite},[`${e}-text`]:{color:n.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${e}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:n.contentHeight,[`${e}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:r(n.dotSize).mul(-1).div(2).equal()},[`${e}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${n.colorBgContainer}`},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${e}-dot`]:{margin:r(n.dotSizeSM).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeSM).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${e}-dot`]:{margin:r(n.dotSizeLG).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeLG).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${e}-container`]:{position:"relative",transition:`opacity ${n.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:n.colorBgContainer,opacity:0,transition:`all ${n.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:n.spinDotDefault},[`${e}-dot-holder`]:{width:"1em",height:"1em",fontSize:n.dotSize,display:"inline-block",transition:`transform ${n.motionDurationSlow} ease, opacity ${n.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:n.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${e}-dot-progress`]:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",insetInlineStart:"50%"},[`${e}-dot`]:{position:"relative",display:"inline-block",fontSize:n.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),height:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:sJ,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:aJ,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(i=>`${i} ${n.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:n.colorFillSecondary}},[`&-sm ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeSM}},[`&-sm ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal(),height:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal()}},[`&-lg ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeLG}},[`&-lg ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal(),height:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal()}},[`&${e}-show-text ${e}-text`]:{display:"block"}})}},cJ=n=>{const{controlHeightLG:e,controlHeight:r}=n;return{contentHeight:400,dotSize:e/2,dotSizeSM:e*.35,dotSizeLG:r}},uJ=si("Spin",n=>{const e=Un(n,{spinDotDefault:n.colorTextDescription});return[lJ(e)]},cJ),dJ=200,sP=[[30,.05],[70,.03],[96,.01]];function fJ(n,e){const[r,i]=_.useState(0),o=_.useRef(null),s=e==="auto";return _.useEffect(()=>(s&&n&&(i(0),o.current=setInterval(()=>{i(a=>{const l=100-a;for(let c=0;c<sP.length;c+=1){const[u,d]=sP[c];if(a<=u)return a+l*d}return a})},dJ)),()=>{clearInterval(o.current)}),[s,n]),s?r:e}var hJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};let A$;function pJ(n,e){return!!n&&!!e&&!Number.isNaN(Number(e))}const GT=n=>{var e;const{prefixCls:r,spinning:i=!0,delay:o=0,className:s,rootClassName:a,size:l="default",tip:c,wrapperClassName:u,style:d,children:f,fullscreen:h=!1,indicator:p,percent:g}=n,y=hJ(n,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:v,direction:m,spin:x}=_.useContext($t),b=v("spin",r),[S,w,C]=uJ(b),[E,M]=_.useState(()=>i&&!pJ(i,o)),T=fJ(E,g);_.useEffect(()=>{if(i){const N=HQ(o,()=>{M(!0)});return N(),()=>{var F;(F=N==null?void 0:N.cancel)===null||F===void 0||F.call(N)}}M(!1)},[o,i]);const R=_.useMemo(()=>typeof f<"u"&&!h,[f,h]),P=_e(b,x==null?void 0:x.className,{[`${b}-sm`]:l==="small",[`${b}-lg`]:l==="large",[`${b}-spinning`]:E,[`${b}-show-text`]:!!c,[`${b}-rtl`]:m==="rtl"},s,!h&&a,w,C),D=_e(`${b}-container`,{[`${b}-blur`]:E}),L=(e=p??(x==null?void 0:x.indicator))!==null&&e!==void 0?e:A$,A=Object.assign(Object.assign({},x==null?void 0:x.style),d),I=_.createElement("div",Object.assign({},y,{style:A,className:P,"aria-live":"polite","aria-busy":E}),_.createElement(oJ,{prefixCls:b,indicator:L,percent:T}),c&&(R||h)?_.createElement("div",{className:`${b}-text`},c):null);return S(R?_.createElement("div",Object.assign({},y,{className:_e(`${b}-nested-loading`,u,w,C)}),E&&_.createElement("div",{key:"loading"},I),_.createElement("div",{className:D,key:"container"},f)):h?_.createElement("div",{className:_e(`${b}-fullscreen`,{[`${b}-fullscreen-show`]:E},a,w,C)},I):I)};GT.setDefaultIndicator=n=>{A$=n};const HT=se.createContext({});HT.Consumer;var N$=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const mJ=n=>{var{prefixCls:e,className:r,avatar:i,title:o,description:s}=n,a=N$(n,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=_.useContext($t),c=l("list",e),u=_e(`${c}-item-meta`,r),d=se.createElement("div",{className:`${c}-item-meta-content`},o&&se.createElement("h4",{className:`${c}-item-meta-title`},o),s&&se.createElement("div",{className:`${c}-item-meta-description`},s));return se.createElement("div",Object.assign({},a,{className:u}),i&&se.createElement("div",{className:`${c}-item-meta-avatar`},i),(o||s)&&d)},gJ=se.forwardRef((n,e)=>{const{prefixCls:r,children:i,actions:o,extra:s,styles:a,className:l,classNames:c,colStyle:u}=n,d=N$(n,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:f,itemLayout:h}=_.useContext(HT),{getPrefixCls:p,list:g}=_.useContext($t),y=E=>{var M,T;return _e((T=(M=g==null?void 0:g.item)===null||M===void 0?void 0:M.classNames)===null||T===void 0?void 0:T[E],c==null?void 0:c[E])},v=E=>{var M,T;return Object.assign(Object.assign({},(T=(M=g==null?void 0:g.item)===null||M===void 0?void 0:M.styles)===null||T===void 0?void 0:T[E]),a==null?void 0:a[E])},m=()=>{let E=!1;return _.Children.forEach(i,M=>{typeof M=="string"&&(E=!0)}),E&&_.Children.count(i)>1},x=()=>h==="vertical"?!!s:!m(),b=p("list",r),S=o&&o.length>0&&se.createElement("ul",{className:_e(`${b}-item-action`,y("actions")),key:"actions",style:v("actions")},o.map((E,M)=>se.createElement("li",{key:`${b}-item-action-${M}`},E,M!==o.length-1&&se.createElement("em",{className:`${b}-item-action-split`})))),w=f?"div":"li",C=se.createElement(w,Object.assign({},d,f?{}:{ref:e},{className:_e(`${b}-item`,{[`${b}-item-no-flex`]:!x()},l)}),h==="vertical"&&s?[se.createElement("div",{className:`${b}-item-main`,key:"content"},i,S),se.createElement("div",{className:_e(`${b}-item-extra`,y("extra")),key:"extra",style:v("extra")},s)]:[i,S,Zl(s,{key:"extra"})]);return f?se.createElement(qQ,{ref:e,flex:1,style:u},C):C}),P$=gJ;P$.Meta=mJ;const vJ=n=>{const{listBorderedCls:e,componentCls:r,paddingLG:i,margin:o,itemPaddingSM:s,itemPaddingLG:a,marginLG:l,borderRadiusLG:c}=n;return{[e]:{border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:c,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:i},[`${r}-pagination`]:{margin:`${De(o)} ${De(l)}`}},[`${e}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:s}},[`${e}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:a}}}},yJ=n=>{const{componentCls:e,screenSM:r,screenMD:i,marginLG:o,marginSM:s,margin:a}=n;return{[`@media screen and (max-width:${i}px)`]:{[e]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${r}px)`]:{[e]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:s}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:n.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${De(a)}`}}}}}},xJ=n=>{const{componentCls:e,antCls:r,controlHeight:i,minHeight:o,paddingSM:s,marginLG:a,padding:l,itemPadding:c,colorPrimary:u,itemPaddingSM:d,itemPaddingLG:f,paddingXS:h,margin:p,colorText:g,colorTextDescription:y,motionDurationSlow:v,lineWidth:m,headerBg:x,footerBg:b,emptyTextPadding:S,metaMarginBottom:w,avatarMarginRight:C,titleMarginBottom:E,descriptionFontSize:M}=n;return{[e]:Object.assign(Object.assign({},Yo(n)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:x},[`${e}-footer`]:{background:b},[`${e}-header, ${e}-footer`]:{paddingBlock:s},[`${e}-pagination`]:{marginBlockStart:a,[`${r}-pagination-options`]:{textAlign:"start"}},[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:g,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:C},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:g},[`${e}-item-meta-title`]:{margin:`0 0 ${De(n.marginXXS)} 0`,color:g,fontSize:n.fontSize,lineHeight:n.lineHeight,"> a":{color:g,transition:`all ${v}`,"&:hover":{color:u}}},[`${e}-item-meta-description`]:{color:y,fontSize:M,lineHeight:n.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:n.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${De(h)}`,color:y,fontSize:n.fontSize,lineHeight:n.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:m,height:n.calc(n.fontHeight).sub(n.calc(n.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:n.colorSplit}}},[`${e}-empty`]:{padding:`${De(l)} 0`,color:y,fontSize:n.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:S,color:n.colorTextDisabled,fontSize:n.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${r}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:a},[`${e}-item-meta`]:{marginBlockEnd:w,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:E,color:g,fontSize:n.fontSizeLG,lineHeight:n.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${De(l)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${r}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:f},[`${e}-sm ${e}-item`]:{padding:d},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},_J=n=>({contentWidth:220,itemPadding:`${De(n.paddingContentVertical)} 0`,itemPaddingSM:`${De(n.paddingContentVerticalSM)} ${De(n.paddingContentHorizontal)}`,itemPaddingLG:`${De(n.paddingContentVerticalLG)} ${De(n.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:n.padding,metaMarginBottom:n.padding,avatarMarginRight:n.padding,titleMarginBottom:n.paddingSM,descriptionFontSize:n.fontSize}),bJ=si("List",n=>{const e=Un(n,{listBorderedCls:`${n.componentCls}-bordered`,minHeight:n.controlHeightLG});return[xJ(e),vJ(e),yJ(e)]},_J);var SJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function wJ(n,e){var{pagination:r=!1,prefixCls:i,bordered:o=!1,split:s=!0,className:a,rootClassName:l,style:c,children:u,itemLayout:d,loadMore:f,grid:h,dataSource:p=[],size:g,header:y,footer:v,loading:m=!1,rowKey:x,renderItem:b,locale:S}=n,w=SJ(n,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const C=r&&typeof r=="object"?r:{},[E,M]=_.useState(C.defaultCurrent||1),[T,R]=_.useState(C.defaultPageSize||10),{getPrefixCls:P,renderEmpty:D,direction:L,list:A}=_.useContext($t),I={current:1,total:0},N=H=>(B,K)=>{var oe;M(B),R(K),r&&((oe=r==null?void 0:r[H])===null||oe===void 0||oe.call(r,B,K))},F=N("onChange"),O=N("onShowSizeChange"),V=(H,B)=>{if(!b)return null;let K;return typeof x=="function"?K=x(H):x?K=H[x]:K=H.key,K||(K=`list-item-${B}`),_.createElement(_.Fragment,{key:K},b(H,B))},U=()=>!!(f||r||v),k=P("list",i),[W,J,z]=bJ(k);let j=m;typeof j=="boolean"&&(j={spinning:j});const X=!!(j!=null&&j.spinning),Q=ra(g);let ne="";switch(Q){case"large":ne="lg";break;case"small":ne="sm";break}const ye=_e(k,{[`${k}-vertical`]:d==="vertical",[`${k}-${ne}`]:ne,[`${k}-split`]:s,[`${k}-bordered`]:o,[`${k}-loading`]:X,[`${k}-grid`]:!!h,[`${k}-something-after-last-item`]:U(),[`${k}-rtl`]:L==="rtl"},A==null?void 0:A.className,a,l,J,z),me=LZ(I,{total:p.length,current:E,pageSize:T},r||{}),fe=Math.ceil(me.total/me.pageSize);me.current>fe&&(me.current=fe);const le=r&&_.createElement("div",{className:_e(`${k}-pagination`)},_.createElement(nJ,Object.assign({align:"end"},me,{onChange:F,onShowSizeChange:O})));let ge=st(p);r&&p.length>(me.current-1)*me.pageSize&&(ge=st(p).splice((me.current-1)*me.pageSize,me.pageSize));const q=Object.keys(h||{}).some(H=>["xs","sm","md","lg","xl","xxl"].includes(H)),ve=l$(q),be=_.useMemo(()=>{for(let H=0;H<cu.length;H+=1){const B=cu[H];if(ve[B])return B}},[ve]),xe=_.useMemo(()=>{if(!h)return;const H=be&&h[be]?h[be]:h.column;if(H)return{width:`${100/H}%`,maxWidth:`${100/H}%`}},[JSON.stringify(h),be]);let we=X&&_.createElement("div",{style:{minHeight:53}});if(ge.length>0){const H=ge.map((B,K)=>V(B,K));we=h?_.createElement(KQ,{gutter:h.gutter},_.Children.map(H,B=>_.createElement("div",{key:B==null?void 0:B.key,style:xe},B))):_.createElement("ul",{className:`${k}-items`},H)}else!u&&!X&&(we=_.createElement("div",{className:`${k}-empty-text`},(S==null?void 0:S.emptyText)||(D==null?void 0:D("List"))||_.createElement(t$,{componentName:"List"})));const qe=me.position||"bottom",Fe=_.useMemo(()=>({grid:h,itemLayout:d}),[JSON.stringify(h),d]);return W(_.createElement(HT.Provider,{value:Fe},_.createElement("div",Object.assign({ref:e,style:Object.assign(Object.assign({},A==null?void 0:A.style),c),className:ye},w),(qe==="top"||qe==="both")&&le,y&&_.createElement("div",{className:`${k}-header`},y),_.createElement(GT,Object.assign({},j),we,u),v&&_.createElement("div",{className:`${k}-footer`},v),f||(qe==="bottom"||qe==="both")&&le)))}const CJ=_.forwardRef(wJ),m0=CJ;m0.Item=P$;function EJ(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&n==null?[]:Array.isArray(n)?n:[n]}let Po=null,Wc=n=>n(),tm=[],nm={};function aP(){const{getContainer:n,duration:e,rtl:r,maxCount:i,top:o}=nm,s=(n==null?void 0:n())||document.body;return{getContainer:()=>s,duration:e,rtl:r,maxCount:i,top:o}}const TJ=se.forwardRef((n,e)=>{const{messageConfig:r,sync:i}=n,{getPrefixCls:o}=_.useContext($t),s=nm.prefixCls||o("message"),a=_.useContext(jX),[l,c]=HU(Object.assign(Object.assign(Object.assign({},r),{prefixCls:s}),a.message));return se.useImperativeHandle(e,()=>{const u=Object.assign({},l);return Object.keys(u).forEach(d=>{u[d]=function(){return i(),l[d].apply(l,arguments)}}),{instance:u,sync:i}}),c}),MJ=se.forwardRef((n,e)=>{const[r,i]=se.useState(aP),o=()=>{i(aP)};se.useEffect(o,[]);const s=AU(),a=s.getRootPrefixCls(),l=s.getIconPrefixCls(),c=s.getTheme(),u=se.createElement(TJ,{ref:e,sync:o,messageConfig:r});return se.createElement(Ja,{prefixCls:a,iconPrefixCls:l,theme:c},s.holderRender?s.holderRender(u):u)});function jx(){if(!Po){const n=document.createDocumentFragment(),e={fragment:n};Po=e,Wc(()=>{TT()(se.createElement(MJ,{ref:i=>{const{instance:o,sync:s}=i||{};Promise.resolve().then(()=>{!e.instance&&o&&(e.instance=o,e.sync=s,jx())})}}),n)});return}Po.instance&&(tm.forEach(n=>{const{type:e,skipped:r}=n;if(!r)switch(e){case"open":{Wc(()=>{const i=Po.instance.open(Object.assign(Object.assign({},nm),n.config));i==null||i.then(n.resolve),n.setCloseFn(i)});break}case"destroy":Wc(()=>{Po==null||Po.instance.destroy(n.key)});break;default:Wc(()=>{var i;const o=(i=Po.instance)[e].apply(i,st(n.args));o==null||o.then(n.resolve),n.setCloseFn(o)})}}),tm=[])}function RJ(n){nm=Object.assign(Object.assign({},nm),n),Wc(()=>{var e;(e=Po==null?void 0:Po.sync)===null||e===void 0||e.call(Po)})}function AJ(n){const e=ET(r=>{let i;const o={type:"open",config:n,resolve:r,setCloseFn:s=>{i=s}};return tm.push(o),()=>{i?Wc(()=>{i()}):o.skipped=!0}});return jx(),e}function NJ(n,e){const r=ET(i=>{let o;const s={type:n,args:e,resolve:i,setCloseFn:a=>{o=a}};return tm.push(s),()=>{o?Wc(()=>{o()}):s.skipped=!0}});return jx(),r}const PJ=n=>{tm.push({type:"destroy",key:n}),jx()},OJ=["success","info","warning","error","loading"],IJ={open:AJ,destroy:PJ,config:RJ,useMessage:WW,_InternalPanelDoNotUseOrYouWillBeFired:BW},O$=IJ;OJ.forEach(n=>{O$[n]=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return NJ(n,r)}});var DJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const LJ=n=>{const{prefixCls:e,className:r,closeIcon:i,closable:o,type:s,title:a,children:l,footer:c}=n,u=DJ(n,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:d}=_.useContext($t),f=d(),h=e||d("modal"),p=cc(f),[g,y,v]=TB(h,p),m=`${h}-confirm`;let x={};return s?x={closable:o??!1,title:"",footer:"",children:_.createElement(RB,Object.assign({},n,{prefixCls:h,confirmPrefixCls:m,rootPrefixCls:f,content:l}))}:x={closable:o??!0,title:a,footer:c!==null&&_.createElement(SB,Object.assign({},n)),children:l},g(_.createElement(dB,Object.assign({prefixCls:h,className:_e(y,`${h}-pure-panel`,s&&m,s&&`${m}-${s}`,r,v,p)},u,{closeIcon:bB(h,i),closable:o},x)))},FJ=UB(LJ);function I$(n){return Ym(OB(n))}const Ts=MB;Ts.useModal=HX;Ts.info=function(e){return Ym(IB(e))};Ts.success=function(e){return Ym(DB(e))};Ts.error=function(e){return Ym(LB(e))};Ts.warning=I$;Ts.warn=I$;Ts.confirm=function(e){return Ym(FB(e))};Ts.destroyAll=function(){for(;jc.length;){const e=jc.pop();e&&e()}};Ts.config=$X;Ts._InternalPanelDoNotUseOrYouWillBeFired=FJ;var UJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},BJ=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:UJ}))},$J=_.forwardRef(BJ),zJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},kJ=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:zJ}))},VJ=_.forwardRef(kJ),GJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},HJ=function(e,r){return _.createElement(gr,ut({},e,{ref:r,icon:GJ}))},jJ=_.forwardRef(HJ),WJ=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],D$=_.forwardRef(function(n,e){var r,i=n.prefixCls,o=i===void 0?"rc-switch":i,s=n.className,a=n.checked,l=n.defaultChecked,c=n.disabled,u=n.loadingIcon,d=n.checkedChildren,f=n.unCheckedChildren,h=n.onClick,p=n.onChange,g=n.onKeyDown,y=Cn(n,WJ),v=Zi(!1,{value:a,defaultValue:l}),m=Ce(v,2),x=m[0],b=m[1];function S(M,T){var R=x;return c||(R=M,b(R),p==null||p(R,T)),R}function w(M){M.which===He.LEFT?S(!1,M):M.which===He.RIGHT&&S(!0,M),g==null||g(M)}function C(M){var T=S(!x,M);h==null||h(T,M)}var E=_e(o,s,(r={},ee(r,"".concat(o,"-checked"),x),ee(r,"".concat(o,"-disabled"),c),r));return _.createElement("button",ut({},y,{type:"button",role:"switch","aria-checked":x,disabled:c,className:E,ref:e,onKeyDown:w,onClick:C}),u,_.createElement("span",{className:"".concat(o,"-inner")},_.createElement("span",{className:"".concat(o,"-inner-checked")},d),_.createElement("span",{className:"".concat(o,"-inner-unchecked")},f)))});D$.displayName="Switch";const qJ=n=>{const{componentCls:e,trackHeightSM:r,trackPadding:i,trackMinWidthSM:o,innerMinMarginSM:s,innerMaxMarginSM:a,handleSizeSM:l,calc:c}=n,u=`${e}-inner`,d=De(c(l).add(c(i).mul(2)).equal()),f=De(c(a).mul(2).equal());return{[e]:{[`&${e}-small`]:{minWidth:o,height:r,lineHeight:De(r),[`${e}-inner`]:{paddingInlineStart:a,paddingInlineEnd:s,[`${u}-checked, ${u}-unchecked`]:{minHeight:r},[`${u}-checked`]:{marginInlineStart:`calc(-100% + ${d} - ${f})`,marginInlineEnd:`calc(100% - ${d} + ${f})`},[`${u}-unchecked`]:{marginTop:c(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${e}-handle`]:{width:l,height:l},[`${e}-loading-icon`]:{top:c(c(l).sub(n.switchLoadingIconSize)).div(2).equal(),fontSize:n.switchLoadingIconSize},[`&${e}-checked`]:{[`${e}-inner`]:{paddingInlineStart:s,paddingInlineEnd:a,[`${u}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${u}-unchecked`]:{marginInlineStart:`calc(100% - ${d} + ${f})`,marginInlineEnd:`calc(-100% + ${d} - ${f})`}},[`${e}-handle`]:{insetInlineStart:`calc(100% - ${De(c(l).add(i).equal())})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${u}`]:{[`${u}-unchecked`]:{marginInlineStart:c(n.marginXXS).div(2).equal(),marginInlineEnd:c(n.marginXXS).mul(-1).div(2).equal()}},[`&${e}-checked ${u}`]:{[`${u}-checked`]:{marginInlineStart:c(n.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:c(n.marginXXS).div(2).equal()}}}}}}},XJ=n=>{const{componentCls:e,handleSize:r,calc:i}=n;return{[e]:{[`${e}-loading-icon${n.iconCls}`]:{position:"relative",top:i(i(r).sub(n.fontSize)).div(2).equal(),color:n.switchLoadingIconColor,verticalAlign:"top"},[`&${e}-checked ${e}-loading-icon`]:{color:n.switchColor}}}},KJ=n=>{const{componentCls:e,trackPadding:r,handleBg:i,handleShadow:o,handleSize:s,calc:a}=n,l=`${e}-handle`;return{[e]:{[l]:{position:"absolute",top:r,insetInlineStart:r,width:s,height:s,transition:`all ${n.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:i,borderRadius:a(s).div(2).equal(),boxShadow:o,transition:`all ${n.switchDuration} ease-in-out`,content:'""'}},[`&${e}-checked ${l}`]:{insetInlineStart:`calc(100% - ${De(a(s).add(r).equal())})`},[`&:not(${e}-disabled):active`]:{[`${l}::before`]:{insetInlineEnd:n.switchHandleActiveInset,insetInlineStart:0},[`&${e}-checked ${l}::before`]:{insetInlineEnd:0,insetInlineStart:n.switchHandleActiveInset}}}}},YJ=n=>{const{componentCls:e,trackHeight:r,trackPadding:i,innerMinMargin:o,innerMaxMargin:s,handleSize:a,calc:l}=n,c=`${e}-inner`,u=De(l(a).add(l(i).mul(2)).equal()),d=De(l(s).mul(2).equal());return{[e]:{[c]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:s,paddingInlineEnd:o,transition:`padding-inline-start ${n.switchDuration} ease-in-out, padding-inline-end ${n.switchDuration} ease-in-out`,[`${c}-checked, ${c}-unchecked`]:{display:"block",color:n.colorTextLightSolid,fontSize:n.fontSizeSM,transition:`margin-inline-start ${n.switchDuration} ease-in-out, margin-inline-end ${n.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:r},[`${c}-checked`]:{marginInlineStart:`calc(-100% + ${u} - ${d})`,marginInlineEnd:`calc(100% - ${u} + ${d})`},[`${c}-unchecked`]:{marginTop:l(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${e}-checked ${c}`]:{paddingInlineStart:o,paddingInlineEnd:s,[`${c}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${c}-unchecked`]:{marginInlineStart:`calc(100% - ${u} + ${d})`,marginInlineEnd:`calc(-100% + ${u} - ${d})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${c}`]:{[`${c}-unchecked`]:{marginInlineStart:l(i).mul(2).equal(),marginInlineEnd:l(i).mul(-1).mul(2).equal()}},[`&${e}-checked ${c}`]:{[`${c}-checked`]:{marginInlineStart:l(i).mul(-1).mul(2).equal(),marginInlineEnd:l(i).mul(2).equal()}}}}}},QJ=n=>{const{componentCls:e,trackHeight:r,trackMinWidth:i}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},Yo(n)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:i,height:r,lineHeight:De(r),verticalAlign:"middle",background:n.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${n.motionDurationMid}`,userSelect:"none",[`&:hover:not(${e}-disabled)`]:{background:n.colorTextTertiary}}),Gm(n)),{[`&${e}-checked`]:{background:n.switchColor,[`&:hover:not(${e}-disabled)`]:{background:n.colorPrimaryHover}},[`&${e}-loading, &${e}-disabled`]:{cursor:"not-allowed",opacity:n.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${e}-rtl`]:{direction:"rtl"}})}},ZJ=n=>{const{fontSize:e,lineHeight:r,controlHeight:i,colorWhite:o}=n,s=e*r,a=i/2,l=2,c=s-l*2,u=a-l*2;return{trackHeight:s,trackHeightSM:a,trackMinWidth:c*2+l*4,trackMinWidthSM:u*2+l*2,trackPadding:l,handleBg:o,handleSize:c,handleSizeSM:u,handleShadow:`0 2px 4px 0 ${new Ln("#00230b").setA(.2).toRgbString()}`,innerMinMargin:c/2,innerMaxMargin:c+l+l*2,innerMinMarginSM:u/2,innerMaxMarginSM:u+l+l*2}},JJ=si("Switch",n=>{const e=Un(n,{switchDuration:n.motionDurationMid,switchColor:n.colorPrimary,switchDisabledOpacity:n.opacityLoading,switchLoadingIconSize:n.calc(n.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${n.opacityLoading})`,switchHandleActiveInset:"-30%"});return[QJ(e),YJ(e),KJ(e),XJ(e),qJ(e)]},ZJ);var eee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const tee=_.forwardRef((n,e)=>{const{prefixCls:r,size:i,disabled:o,loading:s,className:a,rootClassName:l,style:c,checked:u,value:d,defaultChecked:f,defaultValue:h,onChange:p}=n,g=eee(n,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[y,v]=Zi(!1,{value:u??d,defaultValue:f??h}),{getPrefixCls:m,direction:x,switch:b}=_.useContext($t),S=_.useContext(Ha),w=(o??S)||s,C=m("switch",r),E=_.createElement("div",{className:`${C}-handle`},s&&_.createElement(jm,{className:`${C}-loading-icon`})),[M,T,R]=JJ(C),P=ra(i),D=_e(b==null?void 0:b.className,{[`${C}-small`]:P==="small",[`${C}-loading`]:s,[`${C}-rtl`]:x==="rtl"},a,l,T,R),L=Object.assign(Object.assign({},b==null?void 0:b.style),c),A=function(){v(arguments.length<=0?void 0:arguments[0]),p==null||p.apply(void 0,arguments)};return M(_.createElement(qU,{component:"Switch"},_.createElement(D$,Object.assign({},g,{checked:y,onChange:A,prefixCls:C,className:D,style:L,disabled:w,ref:e,loadingIcon:E}))))}),L$=tee;L$.__ANT_SWITCH=!0;const nee=(n,e,r,i)=>{const{titleMarginBottom:o,fontWeightStrong:s}=i;return{marginBottom:o,color:r,fontWeight:s,fontSize:n,lineHeight:e}},ree=n=>{const e=[1,2,3,4,5],r={};return e.forEach(i=>{r[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=nee(n[`fontSizeHeading${i}`],n[`lineHeightHeading${i}`],n.colorTextHeading,n)}),r},iee=n=>{const{componentCls:e}=n;return{"a&, a":Object.assign(Object.assign({},mU(n)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:n.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},oee=n=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:ty[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:n.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),see=n=>{const{componentCls:e,paddingSM:r}=n,i=r;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:n.calc(n.paddingSM).mul(-1).equal(),marginTop:n.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${De(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:n.calc(n.marginXS).add(2).equal(),insetBlockEnd:n.marginXS,color:n.colorTextDescription,fontWeight:"normal",fontSize:n.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},aee=n=>({[`${n.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:n.colorSuccess}},[`${n.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),lee=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),cee=n=>{const{componentCls:e,titleMarginTop:r}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorText,wordBreak:"break-word",lineHeight:n.lineHeight,[`&${e}-secondary`]:{color:n.colorTextDescription},[`&${e}-success`]:{color:n.colorSuccess},[`&${e}-warning`]:{color:n.colorWarning},[`&${e}-danger`]:{color:n.colorError,"a&:active, a&:focus":{color:n.colorErrorActive},"a&:hover":{color:n.colorErrorHover}},[`&${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},ree(n)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:r},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:r}}}),oee(n)),iee(n)),{[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},mU(n)),{marginInlineStart:n.marginXXS})}),see(n)),aee(n)),lee()),{"&-rtl":{direction:"rtl"}})}},uee=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),F$=si("Typography",n=>[cee(n)],uee),dee=n=>{const{prefixCls:e,"aria-label":r,className:i,style:o,direction:s,maxLength:a,autoSize:l=!0,value:c,onSave:u,onCancel:d,onEnd:f,component:h,enterIcon:p=_.createElement(jJ,null)}=n,g=_.useRef(null),y=_.useRef(!1),v=_.useRef(null),[m,x]=_.useState(c);_.useEffect(()=>{x(c)},[c]),_.useEffect(()=>{var A;if(!((A=g.current)===null||A===void 0)&&A.resizableTextArea){const{textArea:I}=g.current.resizableTextArea;I.focus();const{length:N}=I.value;I.setSelectionRange(N,N)}},[]);const b=A=>{let{target:I}=A;x(I.value.replace(/[\n\r]/g,""))},S=()=>{y.current=!0},w=()=>{y.current=!1},C=A=>{let{keyCode:I}=A;y.current||(v.current=I)},E=()=>{u(m.trim())},M=A=>{let{keyCode:I,ctrlKey:N,altKey:F,metaKey:O,shiftKey:V}=A;v.current!==I||y.current||N||F||O||V||(I===He.ENTER?(E(),f==null||f()):I===He.ESC&&d())},T=()=>{E()},[R,P,D]=F$(e),L=_e(e,`${e}-edit-content`,{[`${e}-rtl`]:s==="rtl",[`${e}-${h}`]:!!h},i,P,D);return R(_.createElement("div",{className:L,style:o},_.createElement(S$,{ref:g,maxLength:a,value:m,onChange:b,onKeyDown:C,onKeyUp:M,onCompositionStart:S,onCompositionEnd:w,onBlur:T,"aria-label":r,rows:1,autoSize:l}),p!==null?Zl(p,{className:`${e}-edit-content-confirm`}):null))};var fee=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var e=document.activeElement,r=[],i=0;i<n.rangeCount;i++)r.push(n.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||r.forEach(function(o){n.addRange(o)}),e&&e.focus()}},hee=fee,lP={"text/plain":"Text","text/html":"Url",default:"Text"},pee="Copy to clipboard: #{key}, Enter";function mee(n){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,e)}function gee(n,e){var r,i,o,s,a,l,c=!1;e||(e={}),r=e.debug||!1;try{o=hee(),s=document.createRange(),a=document.getSelection(),l=document.createElement("span"),l.textContent=n,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var f=lP[e.format]||lP.default;window.clipboardData.setData(f,n)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,n);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(l),s.selectNodeContents(l),a.addRange(s);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");c=!0}catch(d){r&&console.error("unable to copy using execCommand: ",d),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",n),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(f){r&&console.error("unable to copy using clipboardData: ",f),r&&console.error("falling back to prompt"),i=mee("message"in e?e.message:pee),window.prompt(i,n)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(s):a.removeAllRanges()),l&&document.body.removeChild(l),o()}return c}var vee=gee;const yee=_u(vee);var xee=function(n,e,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(d){try{u(i.next(d))}catch(f){a(f)}}function c(d){try{u(i.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};const _ee=n=>{let{copyConfig:e,children:r}=n;const[i,o]=_.useState(!1),[s,a]=_.useState(!1),l=_.useRef(null),c=()=>{l.current&&clearTimeout(l.current)},u={};e.format&&(u.format=e.format),_.useEffect(()=>c,[]);const d=br(f=>xee(void 0,void 0,void 0,function*(){var h;f==null||f.preventDefault(),f==null||f.stopPropagation(),a(!0);try{const p=typeof e.text=="function"?yield e.text():e.text;yee(p||EJ(r,!0).join("")||"",u),a(!1),o(!0),c(),l.current=setTimeout(()=>{o(!1)},3e3),(h=e.onCopy)===null||h===void 0||h.call(e,f)}catch(p){throw a(!1),p}}));return{copied:i,copyLoading:s,onClick:d}};function Ub(n,e){return _.useMemo(()=>{const r=!!n;return[r,Object.assign(Object.assign({},e),r&&typeof n=="object"?n:null)]},[n])}const bee=n=>{const e=_.useRef(void 0);return _.useEffect(()=>{e.current=n}),e.current},See=(n,e,r)=>_.useMemo(()=>n===!0?{title:e??r}:_.isValidElement(n)?{title:n}:typeof n=="object"?Object.assign({title:e??r},n):{title:n},[n,e,r]);var wee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const U$=_.forwardRef((n,e)=>{const{prefixCls:r,component:i="article",className:o,rootClassName:s,setContentRef:a,children:l,direction:c,style:u}=n,d=wee(n,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:f,direction:h,typography:p}=_.useContext($t),g=c??h,y=a?ta(e,a):e,v=f("typography",r),[m,x,b]=F$(v),S=_e(v,p==null?void 0:p.className,{[`${v}-rtl`]:g==="rtl"},o,s,x,b),w=Object.assign(Object.assign({},p==null?void 0:p.style),u);return m(_.createElement(i,Object.assign({className:S,style:w,ref:y},d),l))});function cP(n){return n===!1?[!1,!1]:Array.isArray(n)?n:[n]}function Bb(n,e,r){return n===!0||n===void 0?e:n||r&&e}function Cee(n){const e=document.createElement("em");n.appendChild(e);const r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return n.removeChild(e),r.left>i.left||i.right>r.right||r.top>i.top||i.bottom>r.bottom}const jT=n=>["string","number"].includes(typeof n),Eee=n=>{let{prefixCls:e,copied:r,locale:i,iconOnly:o,tooltips:s,icon:a,tabIndex:l,onCopy:c,loading:u}=n;const d=cP(s),f=cP(a),{copied:h,copy:p}=i??{},g=r?h:p,y=Bb(d[r?1:0],g),v=typeof y=="string"?y:g;return _.createElement(Jm,{title:y},_.createElement("button",{type:"button",className:_e(`${e}-copy`,{[`${e}-copy-success`]:r,[`${e}-copy-icon-only`]:o}),onClick:c,"aria-label":v,tabIndex:l},r?Bb(f[1],_.createElement(i$,null),!0):Bb(f[0],u?_.createElement(jm,null):_.createElement($J,null),!0)))},Xg=_.forwardRef((n,e)=>{let{style:r,children:i}=n;const o=_.useRef(null);return _.useImperativeHandle(e,()=>({isExceed:()=>{const s=o.current;return s.scrollHeight>s.clientHeight},getHeight:()=>o.current.clientHeight})),_.createElement("span",{"aria-hidden":!0,ref:o,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},r)},i)}),Tee=n=>n.reduce((e,r)=>e+(jT(r)?String(r).length:1),0);function uP(n,e){let r=0;const i=[];for(let o=0;o<n.length;o+=1){if(r===e)return i;const s=n[o],l=jT(s)?String(s).length:1,c=r+l;if(c>e){const u=e-r;return i.push(String(s).slice(0,u)),i}i.push(s),r=c}return n}const $b=0,zb=1,kb=2,Vb=3,dP=4,Kg={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function Mee(n){const{enableMeasure:e,width:r,text:i,children:o,rows:s,expanded:a,miscDeps:l,onEllipsis:c}=n,u=_.useMemo(()=>Ga(i),[i]),d=_.useMemo(()=>Tee(u),[i]),f=_.useMemo(()=>o(u,!1),[i]),[h,p]=_.useState(null),g=_.useRef(null),y=_.useRef(null),v=_.useRef(null),m=_.useRef(null),x=_.useRef(null),[b,S]=_.useState(!1),[w,C]=_.useState($b),[E,M]=_.useState(0),[T,R]=_.useState(null);_n(()=>{C(e&&r&&d?zb:$b)},[r,i,s,e,u]),_n(()=>{var A,I,N,F;if(w===zb){C(kb);const O=y.current&&getComputedStyle(y.current).whiteSpace;R(O)}else if(w===kb){const O=!!(!((A=v.current)===null||A===void 0)&&A.isExceed());C(O?Vb:dP),p(O?[0,d]:null),S(O);const V=((I=v.current)===null||I===void 0?void 0:I.getHeight())||0,U=s===1?0:((N=m.current)===null||N===void 0?void 0:N.getHeight())||0,k=((F=x.current)===null||F===void 0?void 0:F.getHeight())||0,W=Math.max(V,U+k);M(W+1),c(O)}},[w]);const P=h?Math.ceil((h[0]+h[1])/2):0;_n(()=>{var A;const[I,N]=h||[0,0];if(I!==N){const O=(((A=g.current)===null||A===void 0?void 0:A.getHeight())||0)>E;let V=P;N-I===1&&(V=O?I:N),p(O?[I,V]:[V,N])}},[h,P]);const D=_.useMemo(()=>{if(!e)return o(u,!1);if(w!==Vb||!h||h[0]!==h[1]){const A=o(u,!1);return[dP,$b].includes(w)?A:_.createElement("span",{style:Object.assign(Object.assign({},Kg),{WebkitLineClamp:s})},A)}return o(a?u:uP(u,h[0]),b)},[a,w,h,u].concat(st(l))),L={width:r,margin:0,padding:0,whiteSpace:T==="nowrap"?"normal":"inherit"};return _.createElement(_.Fragment,null,D,w===kb&&_.createElement(_.Fragment,null,_.createElement(Xg,{style:Object.assign(Object.assign(Object.assign({},L),Kg),{WebkitLineClamp:s}),ref:v},f),_.createElement(Xg,{style:Object.assign(Object.assign(Object.assign({},L),Kg),{WebkitLineClamp:s-1}),ref:m},f),_.createElement(Xg,{style:Object.assign(Object.assign(Object.assign({},L),Kg),{WebkitLineClamp:1}),ref:x},o([],!0))),w===Vb&&h&&h[0]!==h[1]&&_.createElement(Xg,{style:Object.assign(Object.assign({},L),{top:400}),ref:g},o(uP(u,P),!0)),w===zb&&_.createElement("span",{style:{whiteSpace:"inherit"},ref:y}))}const Ree=n=>{let{enableEllipsis:e,isEllipsis:r,children:i,tooltipProps:o}=n;return!(o!=null&&o.title)||!e?i:_.createElement(Jm,Object.assign({open:r?void 0:!1},o),i)};var Aee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function Nee(n,e){let{mark:r,code:i,underline:o,delete:s,strong:a,keyboard:l,italic:c}=n,u=e;function d(f,h){h&&(u=_.createElement(f,{},u))}return d("strong",a),d("u",o),d("del",s),d("code",i),d("mark",r),d("kbd",l),d("i",c),u}const Pee="...",Wx=_.forwardRef((n,e)=>{var r;const{prefixCls:i,className:o,style:s,type:a,disabled:l,children:c,ellipsis:u,editable:d,copyable:f,component:h,title:p}=n,g=Aee(n,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:y,direction:v}=_.useContext($t),[m]=lc("Text"),x=_.useRef(null),b=_.useRef(null),S=y("typography",i),w=na(g,["mark","code","delete","underline","strong","keyboard","italic"]),[C,E]=Ub(d),[M,T]=Zi(!1,{value:E.editing}),{triggerType:R=["icon"]}=E,P=Ve=>{var $e;Ve&&(($e=E.onStart)===null||$e===void 0||$e.call(E)),T(Ve)},D=bee(M);_n(()=>{var Ve;!M&&D&&((Ve=b.current)===null||Ve===void 0||Ve.focus())},[M]);const L=Ve=>{Ve==null||Ve.preventDefault(),P(!0)},A=Ve=>{var $e;($e=E.onChange)===null||$e===void 0||$e.call(E,Ve),P(!1)},I=()=>{var Ve;(Ve=E.onCancel)===null||Ve===void 0||Ve.call(E),P(!1)},[N,F]=Ub(f),{copied:O,copyLoading:V,onClick:U}=_ee({copyConfig:F,children:c}),[k,W]=_.useState(!1),[J,z]=_.useState(!1),[j,X]=_.useState(!1),[Q,ne]=_.useState(!1),[ye,me]=_.useState(!0),[fe,le]=Ub(u,{expandable:!1,symbol:Ve=>Ve?m==null?void 0:m.collapse:m==null?void 0:m.expand}),[ge,q]=Zi(le.defaultExpanded||!1,{value:le.expanded}),ve=fe&&(!ge||le.expandable==="collapsible"),{rows:be=1}=le,xe=_.useMemo(()=>ve&&(le.suffix!==void 0||le.onEllipsis||le.expandable||C||N),[ve,le,C,N]);_n(()=>{fe&&!xe&&(W(hN("webkitLineClamp")),z(hN("textOverflow")))},[xe,fe]);const[we,qe]=_.useState(ve),Fe=_.useMemo(()=>xe?!1:be===1?J:k,[xe,J,k]);_n(()=>{qe(Fe&&ve)},[Fe,ve]);const H=ve&&(we?Q:j),B=ve&&be===1&&we,K=ve&&be>1&&we,oe=(Ve,$e)=>{var xt;q($e.expanded),(xt=le.onExpand)===null||xt===void 0||xt.call(le,Ve,$e)},[pe,ce]=_.useState(0),Ue=Ve=>{let{offsetWidth:$e}=Ve;ce($e)},Re=Ve=>{var $e;X(Ve),j!==Ve&&(($e=le.onEllipsis)===null||$e===void 0||$e.call(le,Ve))};_.useEffect(()=>{const Ve=x.current;if(fe&&we&&Ve){const $e=Cee(Ve);Q!==$e&&ne($e)}},[fe,we,c,K,ye,pe]),_.useEffect(()=>{const Ve=x.current;if(typeof IntersectionObserver>"u"||!Ve||!we||!ve)return;const $e=new IntersectionObserver(()=>{me(!!Ve.offsetParent)});return $e.observe(Ve),()=>{$e.disconnect()}},[we,ve]);const Le=See(le.tooltip,E.text,c),Je=_.useMemo(()=>{if(!(!fe||we))return[E.text,c,p,Le.title].find(jT)},[fe,we,p,Le.title,H]);if(M)return _.createElement(dee,{value:(r=E.text)!==null&&r!==void 0?r:typeof c=="string"?c:"",onSave:A,onCancel:I,onEnd:E.onEnd,prefixCls:S,className:o,style:s,direction:v,component:h,maxLength:E.maxLength,autoSize:E.autoSize,enterIcon:E.enterIcon});const Me=()=>{const{expandable:Ve,symbol:$e}=le;return Ve?_.createElement("button",{type:"button",key:"expand",className:`${S}-${ge?"collapse":"expand"}`,onClick:xt=>oe(xt,{expanded:!ge}),"aria-label":ge?m.collapse:m==null?void 0:m.expand},typeof $e=="function"?$e(ge):$e):null},ze=()=>{if(!C)return;const{icon:Ve,tooltip:$e,tabIndex:xt}=E,te=Ga($e)[0]||(m==null?void 0:m.edit),Qe=typeof te=="string"?te:"";return R.includes("icon")?_.createElement(Jm,{key:"edit",title:$e===!1?"":te},_.createElement("button",{type:"button",ref:b,className:`${S}-edit`,onClick:L,"aria-label":Qe,tabIndex:xt},Ve||_.createElement(VJ,{role:"button"}))):null},Ee=()=>N?_.createElement(Eee,Object.assign({key:"copy"},F,{prefixCls:S,copied:O,locale:m,onCopy:U,loading:V,iconOnly:c==null})):null,Pe=Ve=>[Ve&&Me(),ze(),Ee()],ke=Ve=>[Ve&&!ge&&_.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Pee),le.suffix,Pe(Ve)];return _.createElement(Za,{onResize:Ue,disabled:!ve},Ve=>_.createElement(Ree,{tooltipProps:Le,enableEllipsis:ve,isEllipsis:H},_.createElement(U$,Object.assign({className:_e({[`${S}-${a}`]:a,[`${S}-disabled`]:l,[`${S}-ellipsis`]:fe,[`${S}-ellipsis-single-line`]:B,[`${S}-ellipsis-multiple-line`]:K},o),prefixCls:i,style:Object.assign(Object.assign({},s),{WebkitLineClamp:K?be:void 0}),component:h,ref:ta(Ve,x,e),direction:v,onClick:R.includes("text")?L:void 0,"aria-label":Je==null?void 0:Je.toString(),title:p},w),_.createElement(Mee,{enableMeasure:ve&&!we,text:c,rows:be,width:pe,onEllipsis:Re,expanded:ge,miscDeps:[O,ge,V,C,N,m]},($e,xt)=>Nee(n,_.createElement(_.Fragment,null,$e.length>0&&xt&&!ge&&Je?_.createElement("span",{key:"show-content","aria-hidden":!0},$e):$e,ke(xt)))))))});var Oee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Iee=_.forwardRef((n,e)=>{var{ellipsis:r,rel:i}=n,o=Oee(n,["ellipsis","rel"]);const s=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete s.navigate,_.createElement(Wx,Object.assign({},s,{ref:e,ellipsis:!!r,component:"a"}))}),B$=_.forwardRef((n,e)=>_.createElement(Wx,Object.assign({ref:e},n,{component:"div"})));var Dee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Lee=(n,e)=>{var{ellipsis:r}=n,i=Dee(n,["ellipsis"]);const o=_.useMemo(()=>r&&typeof r=="object"?na(r,["expandable","rows"]):r,[r]);return _.createElement(Wx,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},Fee=_.forwardRef(Lee);var Uee=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Bee=[1,2,3,4,5],$ee=_.forwardRef((n,e)=>{const{level:r=1}=n,i=Uee(n,["level"]),o=Bee.includes(r)?`h${r}`:"h1";return _.createElement(Wx,Object.assign({ref:e},i,{component:o}))}),eg=U$;eg.Text=Fee;eg.Link=Iee;eg.Title=$ee;eg.Paragraph=B$;function zee(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function kee(n,e,r){return e=Kee(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function fP(n,e){return Hee(n)||zee(n,e)||$$(n,e)||qee()}function Vee(n){return Gee(n)||jee(n)||$$(n)||Wee()}function Gee(n){if(Array.isArray(n))return yC(n)}function Hee(n){if(Array.isArray(n))return n}function jee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $$(n,e){if(n){if(typeof n=="string")return yC(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yC(n,e)}}function yC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Wee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xee(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kee(n){var e=Xee(n,"string");return typeof e=="symbol"?e:String(e)}var Yee=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(Vee(Object.entries(e).filter(function(o){var s=fP(o,1),a=s[0];return!i.has(a)}).map(function(o){var s=fP(o,2),a=s[0],l=s[1];return kee({},a,l)}))))};function xC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Qee(n){if(Array.isArray(n))return n}function Zee(n){if(Array.isArray(n))return xC(n)}function Jee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ete(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function tte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rte(n,e){return Qee(n)||ete(n,e)||z$(n,e)||tte()}function hP(n){return Zee(n)||Jee(n)||z$(n)||nte()}function z$(n,e){if(n){if(typeof n=="string")return xC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xC(n,e):void 0}}function k$(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,o=e.nodeMapper,s=o===void 0?function(d){return d}:o,a=e.methodNames,l=a===void 0?[]:a,c=e.initPropNames,u=c===void 0?[]:c;return _.forwardRef(function(d,f){var h=_.useRef(),p=_.useMemo(function(){var v=Object.fromEntries(u.filter(function(m){return d.hasOwnProperty(m)}).map(function(m){return[m,d[m]]}));return n(v)},[]);pP(function(){p(s(h.current))},_.useLayoutEffect),pP(function(){return p._destructor instanceof Function?p._destructor:void 0});var g=_.useCallback(function(v){for(var m=arguments.length,x=new Array(m>1?m-1:0),b=1;b<m;b++)x[b-1]=arguments[b];return p[v]instanceof Function?p[v].apply(p,x):void 0},[p]),y=_.useRef({});return Object.keys(Yee(d,[].concat(hP(l),hP(u)))).filter(function(v){return y.current[v]!==d[v]}).forEach(function(v){return g(v,d[v])}),y.current=d,_.useImperativeHandle(f,function(){return Object.fromEntries(l.map(function(v){return[v,function(){for(var m=arguments.length,x=new Array(m),b=0;b<m;b++)x[b]=arguments[b];return g.apply(void 0,[v].concat(x))}]}))},[g]),se.createElement(i,{ref:h})})}function pP(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_.useEffect,r=_.useRef(),i=_.useRef(!1),o=_.useRef(!1),s=_.useState(0),a=rte(s,2);a[0];var l=a[1];i.current&&(o.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(c){return c+1}),function(){o.current&&r.current&&r.current()}},[])}var _C="http://www.w3.org/1999/xhtml";const mP={svg:"http://www.w3.org/2000/svg",xhtml:_C,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qx(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),mP.hasOwnProperty(e)?{space:mP[e],local:n}:n}function ite(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===_C&&e.documentElement.namespaceURI===_C?e.createElement(n):e.createElementNS(r,n)}}function ote(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function V$(n){var e=qx(n);return(e.local?ote:ite)(e)}function ste(){}function WT(n){return n==null?ste:function(){return this.querySelector(n)}}function ate(n){typeof n!="function"&&(n=WT(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=new Array(a),c,u,d=0;d<a;++d)(c=s[d])&&(u=n.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new _o(i,this._parents)}function lte(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function cte(){return[]}function G$(n){return n==null?cte:function(){return this.querySelectorAll(n)}}function ute(n){return function(){return lte(n.apply(this,arguments))}}function dte(n){typeof n=="function"?n=ute(n):n=G$(n);for(var e=this._groups,r=e.length,i=[],o=[],s=0;s<r;++s)for(var a=e[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&(i.push(n.call(c,c.__data__,u,a)),o.push(c));return new _o(i,o)}function H$(n){return function(){return this.matches(n)}}function j$(n){return function(e){return e.matches(n)}}var fte=Array.prototype.find;function hte(n){return function(){return fte.call(this.children,n)}}function pte(){return this.firstElementChild}function mte(n){return this.select(n==null?pte:hte(typeof n=="function"?n:j$(n)))}var gte=Array.prototype.filter;function vte(){return Array.from(this.children)}function yte(n){return function(){return gte.call(this.children,n)}}function xte(n){return this.selectAll(n==null?vte:yte(typeof n=="function"?n:j$(n)))}function _te(n){typeof n!="function"&&(n=H$(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new _o(i,this._parents)}function W$(n){return new Array(n.length)}function bte(){return new _o(this._enter||this._groups.map(W$),this._parents)}function py(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}py.prototype={constructor:py,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Ste(n){return function(){return n}}function wte(n,e,r,i,o,s){for(var a=0,l,c=e.length,u=s.length;a<u;++a)(l=e[a])?(l.__data__=s[a],i[a]=l):r[a]=new py(n,s[a]);for(;a<c;++a)(l=e[a])&&(o[a]=l)}function Cte(n,e,r,i,o,s,a){var l,c,u=new Map,d=e.length,f=s.length,h=new Array(d),p;for(l=0;l<d;++l)(c=e[l])&&(h[l]=p=a.call(c,c.__data__,l,e)+"",u.has(p)?o[l]=c:u.set(p,c));for(l=0;l<f;++l)p=a.call(n,s[l],l,s)+"",(c=u.get(p))?(i[l]=c,c.__data__=s[l],u.delete(p)):r[l]=new py(n,s[l]);for(l=0;l<d;++l)(c=e[l])&&u.get(h[l])===c&&(o[l]=c)}function Ete(n){return n.__data__}function Tte(n,e){if(!arguments.length)return Array.from(this,Ete);var r=e?Cte:wte,i=this._parents,o=this._groups;typeof n!="function"&&(n=Ste(n));for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=i[u],f=o[u],h=f.length,p=Mte(n.call(d,d&&d.__data__,u,i)),g=p.length,y=l[u]=new Array(g),v=a[u]=new Array(g),m=c[u]=new Array(h);r(d,f,y,v,m,p,e);for(var x=0,b=0,S,w;x<g;++x)if(S=y[x]){for(x>=b&&(b=x+1);!(w=v[b])&&++b<g;);S._next=w||null}}return a=new _o(a,i),a._enter=l,a._exit=c,a}function Mte(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Rte(){return new _o(this._exit||this._groups.map(W$),this._parents)}function Ate(n,e,r){var i=this.enter(),o=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?s.remove():r(s),i&&o?i.merge(o).order():o}function Nte(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,o=r.length,s=i.length,a=Math.min(o,s),l=new Array(o),c=0;c<a;++c)for(var u=r[c],d=i[c],f=u.length,h=l[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<o;++c)l[c]=r[c];return new _o(l,this._parents)}function Pte(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],o=i.length-1,s=i[o],a;--o>=0;)(a=i[o])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Ote(n){n||(n=Ite);function e(f,h){return f&&h?n(f.__data__,h.__data__):!f-!h}for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s){for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,d=0;d<l;++d)(u=a[d])&&(c[d]=u);c.sort(e)}return new _o(o,this._parents).order()}function Ite(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Dte(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Lte(){return Array.from(this)}function Fte(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length;o<s;++o){var a=i[o];if(a)return a}return null}function Ute(){let n=0;for(const e of this)++n;return n}function Bte(){return!this.node()}function $te(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var o=e[r],s=0,a=o.length,l;s<a;++s)(l=o[s])&&n.call(l,l.__data__,s,o);return this}function zte(n){return function(){this.removeAttribute(n)}}function kte(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Vte(n,e){return function(){this.setAttribute(n,e)}}function Gte(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Hte(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function jte(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function Wte(n,e){var r=qx(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?kte:zte:typeof e=="function"?r.local?jte:Hte:r.local?Gte:Vte)(r,e))}function q$(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function qte(n){return function(){this.style.removeProperty(n)}}function Xte(n,e,r){return function(){this.style.setProperty(n,e,r)}}function Kte(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function Yte(n,e,r){return arguments.length>1?this.each((e==null?qte:typeof e=="function"?Kte:Xte)(n,e,r??"")):df(this.node(),n)}function df(n,e){return n.style.getPropertyValue(e)||q$(n).getComputedStyle(n,null).getPropertyValue(e)}function Qte(n){return function(){delete this[n]}}function Zte(n,e){return function(){this[n]=e}}function Jte(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function ene(n,e){return arguments.length>1?this.each((e==null?Qte:typeof e=="function"?Jte:Zte)(n,e)):this.node()[n]}function X$(n){return n.trim().split(/^|\s+/)}function qT(n){return n.classList||new K$(n)}function K$(n){this._node=n,this._names=X$(n.getAttribute("class")||"")}K$.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Y$(n,e){for(var r=qT(n),i=-1,o=e.length;++i<o;)r.add(e[i])}function Q$(n,e){for(var r=qT(n),i=-1,o=e.length;++i<o;)r.remove(e[i])}function tne(n){return function(){Y$(this,n)}}function nne(n){return function(){Q$(this,n)}}function rne(n,e){return function(){(e.apply(this,arguments)?Y$:Q$)(this,n)}}function ine(n,e){var r=X$(n+"");if(arguments.length<2){for(var i=qT(this.node()),o=-1,s=r.length;++o<s;)if(!i.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?rne:e?tne:nne)(r,e))}function one(){this.textContent=""}function sne(n){return function(){this.textContent=n}}function ane(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function lne(n){return arguments.length?this.each(n==null?one:(typeof n=="function"?ane:sne)(n)):this.node().textContent}function cne(){this.innerHTML=""}function une(n){return function(){this.innerHTML=n}}function dne(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function fne(n){return arguments.length?this.each(n==null?cne:(typeof n=="function"?dne:une)(n)):this.node().innerHTML}function hne(){this.nextSibling&&this.parentNode.appendChild(this)}function pne(){return this.each(hne)}function mne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gne(){return this.each(mne)}function vne(n){var e=typeof n=="function"?n:V$(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function yne(){return null}function xne(n,e){var r=typeof n=="function"?n:V$(n),i=e==null?yne:typeof e=="function"?e:WT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function _ne(){var n=this.parentNode;n&&n.removeChild(this)}function bne(){return this.each(_ne)}function Sne(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function wne(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Cne(n){return this.select(n?wne:Sne)}function Ene(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Tne(n){return function(e){n.call(this,e,this.__data__)}}function Mne(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function Rne(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,o=e.length,s;r<o;++r)s=e[r],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function Ane(n,e,r){return function(){var i=this.__on,o,s=Tne(e);if(i){for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=r),o.value=e;return}}this.addEventListener(n.type,s,r),o={type:n.type,name:n.name,value:e,listener:s,options:r},i?i.push(o):this.__on=[o]}}function Nne(n,e,r){var i=Mne(n+""),o,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(o=0,d=l[c];o<s;++o)if((a=i[o]).type===d.type&&a.name===d.name)return d.value}return}for(l=e?Ane:Rne,o=0;o<s;++o)this.each(l(i[o],e,r));return this}function Z$(n,e,r){var i=q$(n),o=i.CustomEvent;typeof o=="function"?o=new o(e,r):(o=i.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function Pne(n,e){return function(){return Z$(this,n,e)}}function One(n,e){return function(){return Z$(this,n,e.apply(this,arguments))}}function Ine(n,e){return this.each((typeof e=="function"?One:Pne)(n,e))}function*Dne(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length,a;o<s;++o)(a=i[o])&&(yield a)}var J$=[null];function _o(n,e){this._groups=n,this._parents=e}function tg(){return new _o([[document.documentElement]],J$)}function Lne(){return this}_o.prototype=tg.prototype={constructor:_o,select:ate,selectAll:dte,selectChild:mte,selectChildren:xte,filter:_te,data:Tte,enter:bte,exit:Rte,join:Ate,merge:Nte,selection:Lne,order:Pte,sort:Ote,call:Dte,nodes:Lte,node:Fte,size:Ute,empty:Bte,each:$te,attr:Wte,style:Yte,property:ene,classed:ine,text:lne,html:fne,raise:pne,lower:gne,append:vne,insert:xne,remove:bne,clone:Cne,datum:Ene,on:Nne,dispatch:Ine,[Symbol.iterator]:Dne};function fs(n){return typeof n=="string"?new _o([[document.querySelector(n)]],[document.documentElement]):new _o([[n]],J$)}function Fne(n){let e;for(;e=n.sourceEvent;)n=e;return n}function ya(n,e){if(n=Fne(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}}return[n.pageX,n.pageY]}var Une={value:()=>{}};function ng(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new g0(r)}function g0(n){this._=n}function Bne(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",o=r.indexOf(".");if(o>=0&&(i=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}g0.prototype=ng.prototype={constructor:g0,on:function(n,e){var r=this._,i=Bne(n+"",r),o,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((o=(n=i[s]).type)&&(o=$ne(r[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(o=(n=i[s]).type)r[o]=gP(r[o],n.name,e);else if(e==null)for(o in r)r[o]=gP(r[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new g0(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,s;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,o=s.length;i<o;++i)s[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],o=0,s=i.length;o<s;++o)i[o].value.apply(e,r)}};function $ne(n,e){for(var r=0,i=n.length,o;r<i;++r)if((o=n[r]).name===e)return o.value}function gP(n,e,r){for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n[i]=Une,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const zne={passive:!1},rm={capture:!0,passive:!1};function Gb(n){n.stopImmediatePropagation()}function $d(n){n.preventDefault(),n.stopImmediatePropagation()}function ez(n){var e=n.document.documentElement,r=fs(n).on("dragstart.drag",$d,rm);"onselectstart"in e?r.on("selectstart.drag",$d,rm):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function tz(n,e){var r=n.document.documentElement,i=fs(n).on("dragstart.drag",null);e&&(i.on("click.drag",$d,rm),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Yg=n=>()=>n;function bC(n,{sourceEvent:e,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}bC.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function kne(n){return!n.ctrlKey&&!n.button}function Vne(){return this.parentNode}function Gne(n,e){return e??{x:n.x,y:n.y}}function Hne(){return navigator.maxTouchPoints||"ontouchstart"in this}function jne(){var n=kne,e=Vne,r=Gne,i=Hne,o={},s=ng("start","drag","end"),a=0,l,c,u,d,f=0;function h(S){S.on("mousedown.drag",p).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,zne).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,w){if(!(d||!n.call(this,S,w))){var C=b(this,e.call(this,S,w),S,w,"mouse");C&&(fs(S.view).on("mousemove.drag",g,rm).on("mouseup.drag",y,rm),ez(S.view),Gb(S),u=!1,l=S.clientX,c=S.clientY,C("start",S))}}function g(S){if($d(S),!u){var w=S.clientX-l,C=S.clientY-c;u=w*w+C*C>f}o.mouse("drag",S)}function y(S){fs(S.view).on("mousemove.drag mouseup.drag",null),tz(S.view,u),$d(S),o.mouse("end",S)}function v(S,w){if(n.call(this,S,w)){var C=S.changedTouches,E=e.call(this,S,w),M=C.length,T,R;for(T=0;T<M;++T)(R=b(this,E,S,w,C[T].identifier,C[T]))&&(Gb(S),R("start",S,C[T]))}}function m(S){var w=S.changedTouches,C=w.length,E,M;for(E=0;E<C;++E)(M=o[w[E].identifier])&&($d(S),M("drag",S,w[E]))}function x(S){var w=S.changedTouches,C=w.length,E,M;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<C;++E)(M=o[w[E].identifier])&&(Gb(S),M("end",S,w[E]))}function b(S,w,C,E,M,T){var R=s.copy(),P=ya(T||C,w),D,L,A;if((A=r.call(S,new bC("beforestart",{sourceEvent:C,target:h,identifier:M,active:a,x:P[0],y:P[1],dx:0,dy:0,dispatch:R}),E))!=null)return D=A.x-P[0]||0,L=A.y-P[1]||0,function I(N,F,O){var V=P,U;switch(N){case"start":o[M]=I,U=a++;break;case"end":delete o[M],--a;case"drag":P=ya(O||F,w),U=a;break}R.call(N,S,new bC(N,{sourceEvent:F,subject:A,target:h,identifier:M,active:U,x:P[0]+D,y:P[1]+L,dx:P[0]-V[0],dy:P[1]-V[1],dispatch:R}),E)}}return h.filter=function(S){return arguments.length?(n=typeof S=="function"?S:Yg(!!S),h):n},h.container=function(S){return arguments.length?(e=typeof S=="function"?S:Yg(S),h):e},h.subject=function(S){return arguments.length?(r=typeof S=="function"?S:Yg(S),h):r},h.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:Yg(!!S),h):i},h.on=function(){var S=s.on.apply(s,arguments);return S===s?h:S},h.clickDistance=function(S){return arguments.length?(f=(S=+S)*S,h):Math.sqrt(f)},h}function XT(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function nz(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function rg(){}var im=.7,my=1/im,zd="\\s*([+-]?\\d+)\\s*",om="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wne=/^#([0-9a-f]{3,8})$/,qne=new RegExp(`^rgb\\(${zd},${zd},${zd}\\)$`),Xne=new RegExp(`^rgb\\(${js},${js},${js}\\)$`),Kne=new RegExp(`^rgba\\(${zd},${zd},${zd},${om}\\)$`),Yne=new RegExp(`^rgba\\(${js},${js},${js},${om}\\)$`),Qne=new RegExp(`^hsl\\(${om},${js},${js}\\)$`),Zne=new RegExp(`^hsla\\(${om},${js},${js},${om}\\)$`),vP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XT(rg,sm,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:yP,formatHex:yP,formatHex8:Jne,formatHsl:ere,formatRgb:xP,toString:xP});function yP(){return this.rgb().formatHex()}function Jne(){return this.rgb().formatHex8()}function ere(){return rz(this).formatHsl()}function xP(){return this.rgb().formatRgb()}function sm(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=Wne.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?_P(e):r===3?new ki(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Qg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Qg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qne.exec(n))?new ki(e[1],e[2],e[3],1):(e=Xne.exec(n))?new ki(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Kne.exec(n))?Qg(e[1],e[2],e[3],e[4]):(e=Yne.exec(n))?Qg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qne.exec(n))?wP(e[1],e[2]/100,e[3]/100,1):(e=Zne.exec(n))?wP(e[1],e[2]/100,e[3]/100,e[4]):vP.hasOwnProperty(n)?_P(vP[n]):n==="transparent"?new ki(NaN,NaN,NaN,0):null}function _P(n){return new ki(n>>16&255,n>>8&255,n&255,1)}function Qg(n,e,r,i){return i<=0&&(n=e=r=NaN),new ki(n,e,r,i)}function tre(n){return n instanceof rg||(n=sm(n)),n?(n=n.rgb(),new ki(n.r,n.g,n.b,n.opacity)):new ki}function SC(n,e,r,i){return arguments.length===1?tre(n):new ki(n,e,r,i??1)}function ki(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}XT(ki,SC,nz(rg,{brighter(n){return n=n==null?my:Math.pow(my,n),new ki(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?im:Math.pow(im,n),new ki(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ki(Qc(this.r),Qc(this.g),Qc(this.b),gy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bP,formatHex:bP,formatHex8:nre,formatRgb:SP,toString:SP}));function bP(){return`#${qc(this.r)}${qc(this.g)}${qc(this.b)}`}function nre(){return`#${qc(this.r)}${qc(this.g)}${qc(this.b)}${qc((isNaN(this.opacity)?1:this.opacity)*255)}`}function SP(){const n=gy(this.opacity);return`${n===1?"rgb(":"rgba("}${Qc(this.r)}, ${Qc(this.g)}, ${Qc(this.b)}${n===1?")":`, ${n})`}`}function gy(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Qc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function qc(n){return n=Qc(n),(n<16?"0":"")+n.toString(16)}function wP(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new hs(n,e,r,i)}function rz(n){if(n instanceof hs)return new hs(n.h,n.s,n.l,n.opacity);if(n instanceof rg||(n=sm(n)),!n)return new hs;if(n instanceof hs)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,o=Math.min(e,r,i),s=Math.max(e,r,i),a=NaN,l=s-o,c=(s+o)/2;return l?(e===s?a=(r-i)/l+(r<i)*6:r===s?a=(i-e)/l+2:a=(e-r)/l+4,l/=c<.5?s+o:2-s-o,a*=60):l=c>0&&c<1?0:a,new hs(a,l,c,n.opacity)}function rre(n,e,r,i){return arguments.length===1?rz(n):new hs(n,e,r,i??1)}function hs(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}XT(hs,rre,nz(rg,{brighter(n){return n=n==null?my:Math.pow(my,n),new hs(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?im:Math.pow(im,n),new hs(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,o=2*r-i;return new ki(Hb(n>=240?n-240:n+120,o,i),Hb(n,o,i),Hb(n<120?n+240:n-120,o,i),this.opacity)},clamp(){return new hs(CP(this.h),Zg(this.s),Zg(this.l),gy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=gy(this.opacity);return`${n===1?"hsl(":"hsla("}${CP(this.h)}, ${Zg(this.s)*100}%, ${Zg(this.l)*100}%${n===1?")":`, ${n})`}`}}));function CP(n){return n=(n||0)%360,n<0?n+360:n}function Zg(n){return Math.max(0,Math.min(1,n||0))}function Hb(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const iz=n=>()=>n;function ire(n,e){return function(r){return n+r*e}}function ore(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function sre(n){return(n=+n)==1?oz:function(e,r){return r-e?ore(e,r,n):iz(isNaN(e)?r:e)}}function oz(n,e){var r=e-n;return r?ire(n,r):iz(isNaN(n)?e:n)}const EP=function n(e){var r=sre(e);function i(o,s){var a=r((o=SC(o)).r,(s=SC(s)).r),l=r(o.g,s.g),c=r(o.b,s.b),u=oz(o.opacity,s.opacity);return function(d){return o.r=a(d),o.g=l(d),o.b=c(d),o.opacity=u(d),o+""}}return i.gamma=n,i}(1);function Cl(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var wC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jb=new RegExp(wC.source,"g");function are(n){return function(){return n}}function lre(n){return function(e){return n(e)+""}}function cre(n,e){var r=wC.lastIndex=jb.lastIndex=0,i,o,s,a=-1,l=[],c=[];for(n=n+"",e=e+"";(i=wC.exec(n))&&(o=jb.exec(e));)(s=o.index)>r&&(s=e.slice(r,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,c.push({i:a,x:Cl(i,o)})),r=jb.lastIndex;return r<e.length&&(s=e.slice(r),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?lre(c[0].x):are(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var TP=180/Math.PI,CC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sz(n,e,r,i,o,s){var a,l,c;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(c=n*r+e*i)&&(r-=n*c,i-=e*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),n*i<e*r&&(n=-n,e=-e,c=-c,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(e,n)*TP,skewX:Math.atan(c)*TP,scaleX:a,scaleY:l}}var Jg;function ure(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?CC:sz(e.a,e.b,e.c,e.d,e.e,e.f)}function dre(n){return n==null||(Jg||(Jg=document.createElementNS("http://www.w3.org/2000/svg","g")),Jg.setAttribute("transform",n),!(n=Jg.transform.baseVal.consolidate()))?CC:(n=n.matrix,sz(n.a,n.b,n.c,n.d,n.e,n.f))}function az(n,e,r,i){function o(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var y=p.push("translate(",null,e,null,r);g.push({i:y-4,x:Cl(u,f)},{i:y-2,x:Cl(d,h)})}else(f||h)&&p.push("translate("+f+e+h+r)}function a(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(o(f)+"rotate(",null,i)-2,x:Cl(u,d)})):d&&f.push(o(f)+"rotate("+d+i)}function l(u,d,f,h){u!==d?h.push({i:f.push(o(f)+"skewX(",null,i)-2,x:Cl(u,d)}):d&&f.push(o(f)+"skewX("+d+i)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var y=p.push(o(p)+"scale(",null,",",null,")");g.push({i:y-4,x:Cl(u,f)},{i:y-2,x:Cl(d,h)})}else(f!==1||h!==1)&&p.push(o(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=n(u),d=n(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),a(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,y=h.length,v;++g<y;)f[(v=h[g]).i]=v.x(p);return f.join("")}}}var fre=az(ure,"px, ","px)","deg)"),hre=az(dre,", ",")",")"),pre=1e-12;function MP(n){return((n=Math.exp(n))+1/n)/2}function mre(n){return((n=Math.exp(n))-1/n)/2}function gre(n){return((n=Math.exp(2*n))-1)/(n+1)}const vre=function n(e,r,i){function o(s,a){var l=s[0],c=s[1],u=s[2],d=a[0],f=a[1],h=a[2],p=d-l,g=f-c,y=p*p+g*g,v,m;if(y<pre)m=Math.log(h/u)/e,v=function(E){return[l+E*p,c+E*g,u*Math.exp(e*E*m)]};else{var x=Math.sqrt(y),b=(h*h-u*u+i*y)/(2*u*r*x),S=(h*h-u*u-i*y)/(2*h*r*x),w=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(S*S+1)-S);m=(C-w)/e,v=function(E){var M=E*m,T=MP(w),R=u/(r*x)*(T*gre(e*M+w)-mre(w));return[l+R*p,c+R*g,u*T/MP(e*M+w)]}}return v.duration=m*1e3*e/Math.SQRT2,v}return o.rho=function(s){var a=Math.max(.001,+s),l=a*a,c=l*l;return n(a,l,c)},o}(Math.SQRT2,2,4);var ff=0,Qh=0,xh=0,lz=1e3,vy,Zh,yy=0,uu=0,Xx=0,am=typeof performance=="object"&&performance.now?performance:Date,cz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function KT(){return uu||(cz(yre),uu=am.now()+Xx)}function yre(){uu=0}function xy(){this._call=this._time=this._next=null}xy.prototype=YT.prototype={constructor:xy,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?KT():+r)+(e==null?0:+e),!this._next&&Zh!==this&&(Zh?Zh._next=this:vy=this,Zh=this),this._call=n,this._time=r,EC()},stop:function(){this._call&&(this._call=null,this._time=1/0,EC())}};function YT(n,e,r){var i=new xy;return i.restart(n,e,r),i}function xre(){KT(),++ff;for(var n=vy,e;n;)(e=uu-n._time)>=0&&n._call.call(void 0,e),n=n._next;--ff}function RP(){uu=(yy=am.now())+Xx,ff=Qh=0;try{xre()}finally{ff=0,bre(),uu=0}}function _re(){var n=am.now(),e=n-yy;e>lz&&(Xx-=e,yy=n)}function bre(){for(var n,e=vy,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:vy=r);Zh=n,EC(i)}function EC(n){if(!ff){Qh&&(Qh=clearTimeout(Qh));var e=n-uu;e>24?(n<1/0&&(Qh=setTimeout(RP,n-am.now()-Xx)),xh&&(xh=clearInterval(xh))):(xh||(yy=am.now(),xh=setInterval(_re,lz)),ff=1,cz(RP))}}function AP(n,e,r){var i=new xy;return e=e==null?0:+e,i.restart(o=>{i.stop(),n(o+e)},e,r),i}var Sre=ng("start","end","cancel","interrupt"),wre=[],uz=0,NP=1,TC=2,v0=3,PP=4,MC=5,y0=6;function Kx(n,e,r,i,o,s){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;Cre(n,r,{name:e,index:i,group:o,on:Sre,tween:wre,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:uz})}function QT(n,e){var r=Ms(n,e);if(r.state>uz)throw new Error("too late; already scheduled");return r}function ia(n,e){var r=Ms(n,e);if(r.state>v0)throw new Error("too late; already running");return r}function Ms(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Cre(n,e,r){var i=n.__transition,o;i[e]=r,r.timer=YT(s,0,r.time);function s(u){r.state=NP,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var d,f,h,p;if(r.state!==NP)return c();for(d in i)if(p=i[d],p.name===r.name){if(p.state===v0)return AP(a);p.state===PP?(p.state=y0,p.timer.stop(),p.on.call("interrupt",n,n.__data__,p.index,p.group),delete i[d]):+d<e&&(p.state=y0,p.timer.stop(),p.on.call("cancel",n,n.__data__,p.index,p.group),delete i[d])}if(AP(function(){r.state===v0&&(r.state=PP,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=TC,r.on.call("start",n,n.__data__,r.index,r.group),r.state===TC){for(r.state=v0,o=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(n,n.__data__,r.index,r.group))&&(o[++f]=p);o.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=MC,1),f=-1,h=o.length;++f<h;)o[f].call(n,d);r.state===MC&&(r.on.call("end",n,n.__data__,r.index,r.group),c())}function c(){r.state=y0,r.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function x0(n,e){var r=n.__transition,i,o,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){s=!1;continue}o=i.state>TC&&i.state<MC,i.state=y0,i.timer.stop(),i.on.call(o?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}s&&delete n.__transition}}function Ere(n){return this.each(function(){x0(this,n)})}function Tre(n,e){var r,i;return function(){var o=ia(this,n),s=o.tween;if(s!==r){i=r=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}o.tween=i}}function Mre(n,e,r){var i,o;if(typeof r!="function")throw new Error;return function(){var s=ia(this,n),a=s.tween;if(a!==i){o=(i=a).slice();for(var l={name:e,value:r},c=0,u=o.length;c<u;++c)if(o[c].name===e){o[c]=l;break}c===u&&o.push(l)}s.tween=o}}function Rre(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=Ms(this.node(),r).tween,o=0,s=i.length,a;o<s;++o)if((a=i[o]).name===n)return a.value;return null}return this.each((e==null?Tre:Mre)(r,n,e))}function ZT(n,e,r){var i=n._id;return n.each(function(){var o=ia(this,i);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return Ms(o,i).value[e]}}function dz(n,e){var r;return(typeof e=="number"?Cl:e instanceof sm?EP:(r=sm(e))?(e=r,EP):cre)(n,e)}function Are(n){return function(){this.removeAttribute(n)}}function Nre(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Pre(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttribute(n);return a===o?null:a===i?s:s=e(i=a,r)}}function Ore(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttributeNS(n.space,n.local);return a===o?null:a===i?s:s=e(i=a,r)}}function Ire(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function Dre(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function Lre(n,e){var r=qx(n),i=r==="transform"?hre:dz;return this.attrTween(n,typeof e=="function"?(r.local?Dre:Ire)(r,i,ZT(this,"attr."+n,e)):e==null?(r.local?Nre:Are)(r):(r.local?Ore:Pre)(r,i,e))}function Fre(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function Ure(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function Bre(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Ure(n,s)),r}return o._value=e,o}function $re(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Fre(n,s)),r}return o._value=e,o}function zre(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=qx(n);return this.tween(r,(i.local?Bre:$re)(i,e))}function kre(n,e){return function(){QT(this,n).delay=+e.apply(this,arguments)}}function Vre(n,e){return e=+e,function(){QT(this,n).delay=e}}function Gre(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?kre:Vre)(e,n)):Ms(this.node(),e).delay}function Hre(n,e){return function(){ia(this,n).duration=+e.apply(this,arguments)}}function jre(n,e){return e=+e,function(){ia(this,n).duration=e}}function Wre(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Hre:jre)(e,n)):Ms(this.node(),e).duration}function qre(n,e){if(typeof e!="function")throw new Error;return function(){ia(this,n).ease=e}}function Xre(n){var e=this._id;return arguments.length?this.each(qre(e,n)):Ms(this.node(),e).ease}function Kre(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ia(this,n).ease=r}}function Yre(n){if(typeof n!="function")throw new Error;return this.each(Kre(this._id,n))}function Qre(n){typeof n!="function"&&(n=H$(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new Wa(i,this._parents,this._name,this._id)}function Zre(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=e[l],u=r[l],d=c.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;l<i;++l)a[l]=e[l];return new Wa(a,this._parents,this._name,this._id)}function Jre(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function eie(n,e,r){var i,o,s=Jre(e)?QT:ia;return function(){var a=s(this,n),l=a.on;l!==i&&(o=(i=l).copy()).on(e,r),a.on=o}}function tie(n,e){var r=this._id;return arguments.length<2?Ms(this.node(),r).on.on(n):this.each(eie(r,n,e))}function nie(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function rie(){return this.on("end.remove",nie(this._id))}function iie(n){var e=this._name,r=this._id;typeof n!="function"&&(n=WT(n));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],c=l.length,u=s[a]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=n.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,Kx(u[h],e,r,h,u,Ms(d,r)));return new Wa(s,this._parents,e,r)}function oie(n){var e=this._name,r=this._id;typeof n!="function"&&(n=G$(n));for(var i=this._groups,o=i.length,s=[],a=[],l=0;l<o;++l)for(var c=i[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=n.call(d,d.__data__,f,c),p,g=Ms(d,r),y=0,v=h.length;y<v;++y)(p=h[y])&&Kx(p,e,r,y,h,g);s.push(h),a.push(d)}return new Wa(s,a,e,r)}var sie=tg.prototype.constructor;function aie(){return new sie(this._groups,this._parents)}function lie(n,e){var r,i,o;return function(){var s=df(this,n),a=(this.style.removeProperty(n),df(this,n));return s===a?null:s===r&&a===i?o:o=e(r=s,i=a)}}function fz(n){return function(){this.style.removeProperty(n)}}function cie(n,e,r){var i,o=r+"",s;return function(){var a=df(this,n);return a===o?null:a===i?s:s=e(i=a,r)}}function uie(n,e,r){var i,o,s;return function(){var a=df(this,n),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),df(this,n))),a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l))}}function die(n,e){var r,i,o,s="style."+e,a="end."+s,l;return function(){var c=ia(this,n),u=c.on,d=c.value[s]==null?l||(l=fz(e)):void 0;(u!==r||o!==d)&&(i=(r=u).copy()).on(a,o=d),c.on=i}}function fie(n,e,r){var i=(n+="")=="transform"?fre:dz;return e==null?this.styleTween(n,lie(n,i)).on("end.style."+n,fz(n)):typeof e=="function"?this.styleTween(n,uie(n,i,ZT(this,"style."+n,e))).each(die(this._id,n)):this.styleTween(n,cie(n,i,e),r).on("end.style."+n,null)}function hie(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function pie(n,e,r){var i,o;function s(){var a=e.apply(this,arguments);return a!==o&&(i=(o=a)&&hie(n,a,r)),i}return s._value=e,s}function mie(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,pie(n,e,r??""))}function gie(n){return function(){this.textContent=n}}function vie(n){return function(){var e=n(this);this.textContent=e??""}}function yie(n){return this.tween("text",typeof n=="function"?vie(ZT(this,"text",n)):gie(n==null?"":n+""))}function xie(n){return function(e){this.textContent=n.call(this,e)}}function _ie(n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&xie(o)),e}return i._value=n,i}function bie(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,_ie(n))}function Sie(){for(var n=this._name,e=this._id,r=hz(),i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)if(c=a[u]){var d=Ms(c,e);Kx(c,n,r,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Wa(i,this._parents,n,r)}function wie(){var n,e,r=this,i=r._id,o=r.size();return new Promise(function(s,a){var l={value:a},c={value:function(){--o===0&&s()}};r.each(function(){var u=ia(this,i),d=u.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),o===0&&s()})}var Cie=0;function Wa(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function hz(){return++Cie}var sa=tg.prototype;Wa.prototype={constructor:Wa,select:iie,selectAll:oie,selectChild:sa.selectChild,selectChildren:sa.selectChildren,filter:Qre,merge:Zre,selection:aie,transition:Sie,call:sa.call,nodes:sa.nodes,node:sa.node,size:sa.size,empty:sa.empty,each:sa.each,on:tie,attr:Lre,attrTween:zre,style:fie,styleTween:mie,text:yie,textTween:bie,remove:rie,tween:Rre,delay:Gre,duration:Wre,ease:Xre,easeVarying:Yre,end:wie,[Symbol.iterator]:sa[Symbol.iterator]};function Eie(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Tie={time:null,delay:0,duration:250,ease:Eie};function Mie(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function Rie(n){var e,r;n instanceof Wa?(e=n._id,n=n._name):(e=hz(),(r=Tie).time=KT(),n=n==null?null:n+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&Kx(c,n,e,u,a,r||Mie(c,e));return new Wa(i,this._parents,n,e)}tg.prototype.interrupt=Ere;tg.prototype.transition=Rie;const ev=n=>()=>n;function Aie(n,{sourceEvent:e,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Ra(n,e,r){this.k=n,this.x=e,this.y=r}Ra.prototype={constructor:Ra,scale:function(n){return n===1?this:new Ra(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Ra(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var JT=new Ra(1,0,0);Ds.prototype=Ra.prototype;function Ds(n){for(;!n.__zoom;)if(!(n=n.parentNode))return JT;return n.__zoom}function Wb(n){n.stopImmediatePropagation()}function _h(n){n.preventDefault(),n.stopImmediatePropagation()}function Nie(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Pie(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function OP(){return this.__zoom||JT}function Oie(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function Iie(){return navigator.maxTouchPoints||"ontouchstart"in this}function Die(n,e,r){var i=n.invertX(e[0][0])-r[0][0],o=n.invertX(e[1][0])-r[1][0],s=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function Lie(){var n=Nie,e=Pie,r=Die,i=Oie,o=Iie,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=vre,u=ng("start","zoom","end"),d,f,h,p=500,g=150,y=0,v=10;function m(A){A.property("__zoom",OP).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(A,I,N,F){var O=A.selection?A.selection():A;O.property("__zoom",OP),A!==O?w(A,I,N,F):O.interrupt().each(function(){C(this,arguments).event(F).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},m.scaleBy=function(A,I,N,F){m.scaleTo(A,function(){var O=this.__zoom.k,V=typeof I=="function"?I.apply(this,arguments):I;return O*V},N,F)},m.scaleTo=function(A,I,N,F){m.transform(A,function(){var O=e.apply(this,arguments),V=this.__zoom,U=N==null?S(O):typeof N=="function"?N.apply(this,arguments):N,k=V.invert(U),W=typeof I=="function"?I.apply(this,arguments):I;return r(b(x(V,W),U,k),O,a)},N,F)},m.translateBy=function(A,I,N,F){m.transform(A,function(){return r(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof N=="function"?N.apply(this,arguments):N),e.apply(this,arguments),a)},null,F)},m.translateTo=function(A,I,N,F,O){m.transform(A,function(){var V=e.apply(this,arguments),U=this.__zoom,k=F==null?S(V):typeof F=="function"?F.apply(this,arguments):F;return r(JT.translate(k[0],k[1]).scale(U.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof N=="function"?-N.apply(this,arguments):-N),V,a)},F,O)};function x(A,I){return I=Math.max(s[0],Math.min(s[1],I)),I===A.k?A:new Ra(I,A.x,A.y)}function b(A,I,N){var F=I[0]-N[0]*A.k,O=I[1]-N[1]*A.k;return F===A.x&&O===A.y?A:new Ra(A.k,F,O)}function S(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function w(A,I,N,F){A.on("start.zoom",function(){C(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(F).end()}).tween("zoom",function(){var O=this,V=arguments,U=C(O,V).event(F),k=e.apply(O,V),W=N==null?S(k):typeof N=="function"?N.apply(O,V):N,J=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),z=O.__zoom,j=typeof I=="function"?I.apply(O,V):I,X=c(z.invert(W).concat(J/z.k),j.invert(W).concat(J/j.k));return function(Q){if(Q===1)Q=j;else{var ne=X(Q),ye=J/ne[2];Q=new Ra(ye,W[0]-ne[0]*ye,W[1]-ne[1]*ye)}U.zoom(null,Q)}})}function C(A,I,N){return!N&&A.__zooming||new E(A,I)}function E(A,I){this.that=A,this.args=I,this.active=0,this.sourceEvent=null,this.extent=e.apply(A,I),this.taps=0}E.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,I){return this.mouse&&A!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var I=fs(this.that).datum();u.call(A,this.that,new Aie(A,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),I)}};function M(A,...I){if(!n.apply(this,arguments))return;var N=C(this,I).event(A),F=this.__zoom,O=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,i.apply(this,arguments)))),V=ya(A);if(N.wheel)(N.mouse[0][0]!==V[0]||N.mouse[0][1]!==V[1])&&(N.mouse[1]=F.invert(N.mouse[0]=V)),clearTimeout(N.wheel);else{if(F.k===O)return;N.mouse=[V,F.invert(V)],x0(this),N.start()}_h(A),N.wheel=setTimeout(U,g),N.zoom("mouse",r(b(x(F,O),N.mouse[0],N.mouse[1]),N.extent,a));function U(){N.wheel=null,N.end()}}function T(A,...I){if(h||!n.apply(this,arguments))return;var N=A.currentTarget,F=C(this,I,!0).event(A),O=fs(A.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",J,!0),V=ya(A,N),U=A.clientX,k=A.clientY;ez(A.view),Wb(A),F.mouse=[V,this.__zoom.invert(V)],x0(this),F.start();function W(z){if(_h(z),!F.moved){var j=z.clientX-U,X=z.clientY-k;F.moved=j*j+X*X>y}F.event(z).zoom("mouse",r(b(F.that.__zoom,F.mouse[0]=ya(z,N),F.mouse[1]),F.extent,a))}function J(z){O.on("mousemove.zoom mouseup.zoom",null),tz(z.view,F.moved),_h(z),F.event(z).end()}}function R(A,...I){if(n.apply(this,arguments)){var N=this.__zoom,F=ya(A.changedTouches?A.changedTouches[0]:A,this),O=N.invert(F),V=N.k*(A.shiftKey?.5:2),U=r(b(x(N,V),F,O),e.apply(this,I),a);_h(A),l>0?fs(this).transition().duration(l).call(w,U,F,A):fs(this).call(m.transform,U,F,A)}}function P(A,...I){if(n.apply(this,arguments)){var N=A.touches,F=N.length,O=C(this,I,A.changedTouches.length===F).event(A),V,U,k,W;for(Wb(A),U=0;U<F;++U)k=N[U],W=ya(k,this),W=[W,this.__zoom.invert(W),k.identifier],O.touch0?!O.touch1&&O.touch0[2]!==W[2]&&(O.touch1=W,O.taps=0):(O.touch0=W,V=!0,O.taps=1+!!d);d&&(d=clearTimeout(d)),V&&(O.taps<2&&(f=W[0],d=setTimeout(function(){d=null},p)),x0(this),O.start())}}function D(A,...I){if(this.__zooming){var N=C(this,I).event(A),F=A.changedTouches,O=F.length,V,U,k,W;for(_h(A),V=0;V<O;++V)U=F[V],k=ya(U,this),N.touch0&&N.touch0[2]===U.identifier?N.touch0[0]=k:N.touch1&&N.touch1[2]===U.identifier&&(N.touch1[0]=k);if(U=N.that.__zoom,N.touch1){var J=N.touch0[0],z=N.touch0[1],j=N.touch1[0],X=N.touch1[1],Q=(Q=j[0]-J[0])*Q+(Q=j[1]-J[1])*Q,ne=(ne=X[0]-z[0])*ne+(ne=X[1]-z[1])*ne;U=x(U,Math.sqrt(Q/ne)),k=[(J[0]+j[0])/2,(J[1]+j[1])/2],W=[(z[0]+X[0])/2,(z[1]+X[1])/2]}else if(N.touch0)k=N.touch0[0],W=N.touch0[1];else return;N.zoom("touch",r(b(U,k,W),N.extent,a))}}function L(A,...I){if(this.__zooming){var N=C(this,I).event(A),F=A.changedTouches,O=F.length,V,U;for(Wb(A),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),V=0;V<O;++V)U=F[V],N.touch0&&N.touch0[2]===U.identifier?delete N.touch0:N.touch1&&N.touch1[2]===U.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(U=ya(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<v)){var k=fs(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return m.wheelDelta=function(A){return arguments.length?(i=typeof A=="function"?A:ev(+A),m):i},m.filter=function(A){return arguments.length?(n=typeof A=="function"?A:ev(!!A),m):n},m.touchable=function(A){return arguments.length?(o=typeof A=="function"?A:ev(!!A),m):o},m.extent=function(A){return arguments.length?(e=typeof A=="function"?A:ev([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),m):e},m.scaleExtent=function(A){return arguments.length?(s[0]=+A[0],s[1]=+A[1],m):[s[0],s[1]]},m.translateExtent=function(A){return arguments.length?(a[0][0]=+A[0][0],a[1][0]=+A[1][0],a[0][1]=+A[0][1],a[1][1]=+A[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(A){return arguments.length?(r=A,m):r},m.duration=function(A){return arguments.length?(l=+A,m):l},m.interpolate=function(A){return arguments.length?(c=A,m):c},m.on=function(){var A=u.on.apply(u,arguments);return A===u?m:A},m.clickDistance=function(A){return arguments.length?(y=(A=+A)*A,m):Math.sqrt(y)},m.tapDistance=function(A){return arguments.length?(v=+A,m):v},m}class IP extends Map{constructor(e,r=Bie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,o]of e)this.set(i,o)}get(e){return super.get(DP(this,e))}has(e){return super.has(DP(this,e))}set(e,r){return super.set(Fie(this,e),r)}delete(e){return super.delete(Uie(this,e))}}function DP({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function Fie({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function Uie({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function Bie(n){return n!==null&&typeof n=="object"?n.valueOf():n}function RC(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function AC(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}var $ie=typeof global=="object"&&global&&global.Object===Object&&global,zie=typeof self=="object"&&self&&self.Object===Object&&self,pz=$ie||zie||Function("return this")(),_y=pz.Symbol,mz=Object.prototype,kie=mz.hasOwnProperty,Vie=mz.toString,bh=_y?_y.toStringTag:void 0;function Gie(n){var e=kie.call(n,bh),r=n[bh];try{n[bh]=void 0;var i=!0}catch{}var o=Vie.call(n);return i&&(e?n[bh]=r:delete n[bh]),o}var Hie=Object.prototype,jie=Hie.toString;function Wie(n){return jie.call(n)}var qie="[object Null]",Xie="[object Undefined]",LP=_y?_y.toStringTag:void 0;function Kie(n){return n==null?n===void 0?Xie:qie:LP&&LP in Object(n)?Gie(n):Wie(n)}function Yie(n){return n!=null&&typeof n=="object"}var Qie="[object Symbol]";function Zie(n){return typeof n=="symbol"||Yie(n)&&Kie(n)==Qie}var Jie=/\s/;function eoe(n){for(var e=n.length;e--&&Jie.test(n.charAt(e)););return e}var toe=/^\s+/;function noe(n){return n&&n.slice(0,eoe(n)+1).replace(toe,"")}function by(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var FP=NaN,roe=/^[-+]0x[0-9a-f]+$/i,ioe=/^0b[01]+$/i,ooe=/^0o[0-7]+$/i,soe=parseInt;function UP(n){if(typeof n=="number")return n;if(Zie(n))return FP;if(by(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=by(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=noe(n);var r=ioe.test(n);return r||ooe.test(n)?soe(n.slice(2),r?2:8):roe.test(n)?FP:+n}var qb=function(){return pz.Date.now()},aoe="Expected a function",loe=Math.max,coe=Math.min;function gz(n,e,r){var i,o,s,a,l,c,u=0,d=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(aoe);e=UP(e)||0,by(r)&&(d=!!r.leading,f="maxWait"in r,s=f?loe(UP(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function p(C){var E=i,M=o;return i=o=void 0,u=C,a=n.apply(M,E),a}function g(C){return u=C,l=setTimeout(m,e),d?p(C):a}function y(C){var E=C-c,M=C-u,T=e-E;return f?coe(T,s-M):T}function v(C){var E=C-c,M=C-u;return c===void 0||E>=e||E<0||f&&M>=s}function m(){var C=qb();if(v(C))return x(C);l=setTimeout(m,y(C))}function x(C){return l=void 0,h&&i?p(C):(i=o=void 0,a)}function b(){l!==void 0&&clearTimeout(l),u=0,i=c=o=l=void 0}function S(){return l===void 0?a:x(qb())}function w(){var C=qb(),E=v(C);if(i=arguments,o=this,c=C,E){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(m,e),p(c)}return l===void 0&&(l=setTimeout(m,e)),a}return w.cancel=b,w.flush=S,w}var uoe="Expected a function";function doe(n,e,r){var i=!0,o=!0;if(typeof n!="function")throw new TypeError(uoe);return by(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),gz(n,e,{leading:i,maxWait:e,trailing:o})}var Da=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Da.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Da.Bounce.In(n*2)*.5:Da.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Jh=function(){return performance.now()},eM=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var a=s[o];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,o=e;i<o.length;i++){var s=o[i];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=Jh()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var s=this._tweens[i[o]],a=!r;s&&s.update(e,a)===!1&&!r&&this.remove(s)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),NC={Linear:function(n,e){var r=n.length-1,i=r*e,o=Math.floor(i),s=NC.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[r],n[r-1],r-i):s(n[o],n[o+1>r?r:o+1],i-o)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},vz=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),PC=new eM,Sy=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Da.Linear.None,this._interpolationFunction=NC.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=vz.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=PC,PC.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=Jh()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var s in this._valuesEnd)o[s]=this._valuesEnd[s];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,o,s){for(var a in i){var l=e[a],c=Array.isArray(l),u=c?"array":typeof l,d=!c&&Array.isArray(i[a]);if(!(u==="undefined"||u==="function")){if(d){var f=i[a];if(f.length===0)continue;for(var h=[l],p=0,g=f.length;p<g;p+=1){var y=this._handleRelativeValue(l,f[p]);if(isNaN(y)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(y)}d&&(i[a]=h)}if((u==="object"||c)&&l&&!d){r[a]=c?[]:{};var v=l;for(var m in v)r[a][m]=v[m];o[a]=c?[]:{};var f=i[a];if(!this._isDynamic){var x={};for(var m in f)x[m]=f[m];i[a]=f=x}this._setupProperties(v,r[a],f,o[a],s)}else(typeof r[a]>"u"||s)&&(r[a]=l),c||(r[a]*=1),d?o[a]=i[a].slice().reverse():o[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=Jh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=Jh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Da.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=NC.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,o;if(e===void 0&&(e=Jh()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||a>c)return 1;var y=Math.trunc(a/l),v=a-y*l,m=Math.min(v/i._duration,1);return m===0&&a===i._duration?1:m},d=u(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,o){for(var s in i)if(r[s]!==void 0){var a=r[s]||0,l=i[s],c=Array.isArray(e[s]),u=Array.isArray(l),d=!c&&u;d?e[s]=this._interpolationFunction(l,o):typeof l=="object"&&l?this._updateProperties(e[s],a,l,o):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[s]=a+(l-a)*o))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();vz.nextId;var Xs=PC;Xs.getAll.bind(Xs);Xs.removeAll.bind(Xs);Xs.add.bind(Xs);Xs.remove.bind(Xs);Xs.update.bind(Xs);function BP(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function foe(n){if(Array.isArray(n))return n}function hoe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function poe(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function moe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function goe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function voe(n,e){return foe(n)||moe(n,e)||yoe(n,e)||goe()}function yoe(n,e){if(n){if(typeof n=="string")return BP(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BP(n,e):void 0}}var xoe=poe(function n(e,r){var i=r.default,o=i===void 0?null:i,s=r.triggerUpdate,a=s===void 0?!0:s,l=r.onChange,c=l===void 0?function(u,d){}:l;hoe(this,n),this.name=e,this.defaultVal=o,this.triggerUpdate=a,this.onChange=c});function ig(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,o=i===void 0?{}:i,s=n.methods,a=s===void 0?{}:s,l=n.aliases,c=l===void 0?{}:l,u=n.init,d=u===void 0?function(){}:u,f=n.update,h=f===void 0?function(){}:f,p=Object.keys(o).map(function(g){return new xoe(g,o[g])});return function g(){for(var y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];var x=!!(this instanceof g&&this.constructor),b=x?v.shift():void 0,S=v[0],w=S===void 0?{}:S,C=Object.assign({},r instanceof Function?r(w):r,{initialised:!1}),E={};function M(P){return T(P,w),R(),M}var T=function(D,L){d.call(M,D,C,L),C.initialised=!0},R=gz(function(){C.initialised&&(h.call(M,C,E),E={})},1);return p.forEach(function(P){M[P.name]=D(P);function D(L){var A=L.name,I=L.triggerUpdate,N=I===void 0?!1:I,F=L.onChange,O=F===void 0?function(k,W){}:F,V=L.defaultVal,U=V===void 0?null:V;return function(k){var W=C[A];if(!arguments.length)return W;var J=k===void 0?U:k;return C[A]=J,O.call(M,J,C,W),!E.hasOwnProperty(A)&&(E[A]=W),N&&R(),M}}}),Object.keys(a).forEach(function(P){M[P]=function(){for(var D,L=arguments.length,A=new Array(L),I=0;I<L;I++)A[I]=arguments[I];return(D=a[P]).call.apply(D,[M,C].concat(A))}}),Object.entries(c).forEach(function(P){var D=voe(P,2),L=D[0],A=D[1];return M[L]=M[A]}),M.resetProps=function(){return p.forEach(function(P){M[P.name](P.defaultVal)}),M},M.resetProps(),C._rerender=R,x&&b&&M(b),M}}var Nt=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function wy(n){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(n)}var _oe=/^\s+/,boe=/\s+$/;function Ot(n,e){if(n=n||"",e=e||{},n instanceof Ot)return n;if(!(this instanceof Ot))return new Ot(n,e);var r=Soe(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Ot.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,o,s,a,l;return r=e.r/255,i=e.g/255,o=e.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),o<=.03928?l=o/12.92:l=Math.pow((o+.055)/1.055,2.4),.2126*s+.7152*a+.0722*l},setAlpha:function(e){return this._a=yz(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=zP(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=zP(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=$P(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=$P(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return kP(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Toe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Zn(this._r,255)*100)+"%",g:Math.round(Zn(this._g,255)*100)+"%",b:Math.round(Zn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%)":"rgba("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Boe[kP(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+VP(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(e){var s=Ot(e);i="#"+VP(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,o=this._a<1&&this._a>=0,s=!r&&o&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Ot(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Noe,arguments)},brighten:function(){return this._applyModification(Poe,arguments)},darken:function(){return this._applyModification(Ooe,arguments)},desaturate:function(){return this._applyModification(Moe,arguments)},saturate:function(){return this._applyModification(Roe,arguments)},greyscale:function(){return this._applyModification(Aoe,arguments)},spin:function(){return this._applyModification(Ioe,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Foe,arguments)},complement:function(){return this._applyCombination(Doe,arguments)},monochromatic:function(){return this._applyCombination(Uoe,arguments)},splitcomplement:function(){return this._applyCombination(Loe,arguments)},triad:function(){return this._applyCombination(GP,[3])},tetrad:function(){return this._applyCombination(GP,[4])}};Ot.fromRatio=function(n,e){if(wy(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=ep(n[i]));n=r}return Ot(n,e)};function Soe(n){var e={r:0,g:0,b:0},r=1,i=null,o=null,s=null,a=!1,l=!1;return typeof n=="string"&&(n=Voe(n)),wy(n)=="object"&&(aa(n.r)&&aa(n.g)&&aa(n.b)?(e=woe(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):aa(n.h)&&aa(n.s)&&aa(n.v)?(i=ep(n.s),o=ep(n.v),e=Eoe(n.h,i,o),a=!0,l="hsv"):aa(n.h)&&aa(n.s)&&aa(n.l)&&(i=ep(n.s),s=ep(n.l),e=Coe(n.h,i,s),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=yz(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function woe(n,e,r){return{r:Zn(n,255)*255,g:Zn(e,255)*255,b:Zn(r,255)*255}}function $P(n,e,r){n=Zn(n,255),e=Zn(e,255),r=Zn(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=(i+o)/2;if(i==o)s=a=0;else{var c=i-o;switch(a=l>.5?c/(2-i-o):c/(i+o),i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,l}}function Coe(n,e,r){var i,o,s;n=Zn(n,360),e=Zn(e,100),r=Zn(r,100);function a(u,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(d-u)*6*f:f<1/2?d:f<2/3?u+(d-u)*(2/3-f)*6:u}if(e===0)i=o=s=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=a(c,l,n+1/3),o=a(c,l,n),s=a(c,l,n-1/3)}return{r:i*255,g:o*255,b:s*255}}function zP(n,e,r){n=Zn(n,255),e=Zn(e,255),r=Zn(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=i,c=i-o;if(a=i===0?0:c/i,i==o)s=0;else{switch(i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,v:l}}function Eoe(n,e,r){n=Zn(n,360)*6,e=Zn(e,100),r=Zn(r,100);var i=Math.floor(n),o=n-i,s=r*(1-e),a=r*(1-o*e),l=r*(1-(1-o)*e),c=i%6,u=[r,a,s,s,l,r][c],d=[l,r,r,a,s,s][c],f=[s,s,l,r,r,a][c];return{r:u*255,g:d*255,b:f*255}}function kP(n,e,r,i){var o=[gs(Math.round(n).toString(16)),gs(Math.round(e).toString(16)),gs(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Toe(n,e,r,i,o){var s=[gs(Math.round(n).toString(16)),gs(Math.round(e).toString(16)),gs(Math.round(r).toString(16)),gs(xz(i))];return o&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function VP(n,e,r,i){var o=[gs(xz(i)),gs(Math.round(n).toString(16)),gs(Math.round(e).toString(16)),gs(Math.round(r).toString(16))];return o.join("")}Ot.equals=function(n,e){return!n||!e?!1:Ot(n).toRgbString()==Ot(e).toRgbString()};Ot.random=function(){return Ot.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Moe(n,e){e=e===0?0:e||10;var r=Ot(n).toHsl();return r.s-=e/100,r.s=Yx(r.s),Ot(r)}function Roe(n,e){e=e===0?0:e||10;var r=Ot(n).toHsl();return r.s+=e/100,r.s=Yx(r.s),Ot(r)}function Aoe(n){return Ot(n).desaturate(100)}function Noe(n,e){e=e===0?0:e||10;var r=Ot(n).toHsl();return r.l+=e/100,r.l=Yx(r.l),Ot(r)}function Poe(n,e){e=e===0?0:e||10;var r=Ot(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Ot(r)}function Ooe(n,e){e=e===0?0:e||10;var r=Ot(n).toHsl();return r.l-=e/100,r.l=Yx(r.l),Ot(r)}function Ioe(n,e){var r=Ot(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Ot(r)}function Doe(n){var e=Ot(n).toHsl();return e.h=(e.h+180)%360,Ot(e)}function GP(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ot(n).toHsl(),i=[Ot(n)],o=360/e,s=1;s<e;s++)i.push(Ot({h:(r.h+s*o)%360,s:r.s,l:r.l}));return i}function Loe(n){var e=Ot(n).toHsl(),r=e.h;return[Ot(n),Ot({h:(r+72)%360,s:e.s,l:e.l}),Ot({h:(r+216)%360,s:e.s,l:e.l})]}function Foe(n,e,r){e=e||6,r=r||30;var i=Ot(n).toHsl(),o=360/r,s=[Ot(n)];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,s.push(Ot(i));return s}function Uoe(n,e){e=e||6;for(var r=Ot(n).toHsv(),i=r.h,o=r.s,s=r.v,a=[],l=1/e;e--;)a.push(Ot({h:i,s:o,v:s})),s=(s+l)%1;return a}Ot.mix=function(n,e,r){r=r===0?0:r||50;var i=Ot(n).toRgb(),o=Ot(e).toRgb(),s=r/100,a={r:(o.r-i.r)*s+i.r,g:(o.g-i.g)*s+i.g,b:(o.b-i.b)*s+i.b,a:(o.a-i.a)*s+i.a};return Ot(a)};Ot.readability=function(n,e){var r=Ot(n),i=Ot(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Ot.isReadable=function(n,e,r){var i=Ot.readability(n,e),o,s;switch(s=!1,o=Goe(r),o.level+o.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};Ot.mostReadable=function(n,e,r){var i=null,o=0,s,a,l,c;r=r||{},a=r.includeFallbackColors,l=r.level,c=r.size;for(var u=0;u<e.length;u++)s=Ot.readability(n,e[u]),s>o&&(o=s,i=Ot(e[u]));return Ot.isReadable(n,i,{level:l,size:c})||!a?i:(r.includeFallbackColors=!1,Ot.mostReadable(n,["#fff","#000"],r))};var OC=Ot.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Boe=Ot.hexNames=$oe(OC);function $oe(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function yz(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Zn(n,e){zoe(n)&&(n="100%");var r=koe(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Yx(n){return Math.min(1,Math.max(0,n))}function co(n){return parseInt(n,16)}function zoe(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function koe(n){return typeof n=="string"&&n.indexOf("%")!=-1}function gs(n){return n.length==1?"0"+n:""+n}function ep(n){return n<=1&&(n=n*100+"%"),n}function xz(n){return Math.round(parseFloat(n)*255).toString(16)}function HP(n){return co(n)/255}var ns=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function aa(n){return!!ns.CSS_UNIT.exec(n)}function Voe(n){n=n.replace(_oe,"").replace(boe,"").toLowerCase();var e=!1;if(OC[n])n=OC[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=ns.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=ns.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ns.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=ns.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ns.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=ns.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ns.hex8.exec(n))?{r:co(r[1]),g:co(r[2]),b:co(r[3]),a:HP(r[4]),format:e?"name":"hex8"}:(r=ns.hex6.exec(n))?{r:co(r[1]),g:co(r[2]),b:co(r[3]),format:e?"name":"hex"}:(r=ns.hex4.exec(n))?{r:co(r[1]+""+r[1]),g:co(r[2]+""+r[2]),b:co(r[3]+""+r[3]),a:HP(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=ns.hex3.exec(n))?{r:co(r[1]+""+r[1]),g:co(r[2]+""+r[2]),b:co(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function Goe(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function IC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Hoe(n){if(Array.isArray(n))return IC(n)}function _z(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function joe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Woe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ro(n,e){return n.get(_z(n,e))}function jP(n,e,r){joe(n,e),e.set(n,r)}function WP(n,e,r){return n.set(_z(n,e),r),r}function qoe(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Joe(i.key),i)}}function Xoe(n,e,r){return e&&qoe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Koe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Yoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qoe(n){return Hoe(n)||Koe(n)||ese(n)||Yoe()}function Zoe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Joe(n){var e=Zoe(n,"string");return typeof e=="symbol"?e:e+""}function ese(n,e){if(n){if(typeof n=="string")return IC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?IC(n,e):void 0}}var tse=123,nse=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},bz=function(e,r,i){return(e<<16)+(r<<8)+i},rse=function(e){var r=Ot(e).toRgb(),i=r.r,o=r.g,s=r.b;return bz(i,o,s)},qP=function(e,r){return e*tse%Math.pow(2,r)},yc=new WeakMap,la=new WeakMap,ise=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Woe(this,n),jP(this,yc,void 0),jP(this,la,void 0),WP(la,this,e),this.reset()}return Xoe(n,[{key:"reset",value:function(){WP(yc,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ro(yc,this).length>=Math.pow(2,24-Ro(la,this)))return null;var i=Ro(yc,this).length,o=qP(i,Ro(la,this)),s=nse(i+(o<<24-Ro(la,this)));return Ro(yc,this).push(r),s}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?rse(r):bz.apply(void 0,Qoe(r));if(!i)return null;var o=i&Math.pow(2,24-Ro(la,this))-1,s=i>>24-Ro(la,this)&Math.pow(2,Ro(la,this))-1;return qP(o,Ro(la,this))!==s||o>=Ro(yc,this).length?null:Ro(yc,this)[o]}}])}();function Sz(n,e,r){var i,o=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function s(){var a,l=i.length,c,u=0,d=0,f=0;for(a=0;a<l;++a)c=i[a],u+=c.x||0,d+=c.y||0,f+=c.z||0;for(u=(u/l-n)*o,d=(d/l-e)*o,f=(f/l-r)*o,a=0;a<l;++a)c=i[a],u&&(c.x-=u),d&&(c.y-=d),f&&(c.z-=f)}return s.initialize=function(a){i=a},s.x=function(a){return arguments.length?(n=+a,s):n},s.y=function(a){return arguments.length?(e=+a,s):e},s.z=function(a){return arguments.length?(r=+a,s):r},s.strength=function(a){return arguments.length?(o=+a,s):o},s}function ose(n){const e=+this._x.call(null,n);return wz(this.cover(e),e,n)}function wz(n,e,r){if(isNaN(e))return n;var i,o=n._root,s={data:r},a=n._x0,l=n._x1,c,u,d,f,h;if(!o)return n._root=s,n;for(;o.length;)if((d=e>=(c=(a+l)/2))?a=c:l=c,i=o,!(o=o[f=+d]))return i[f]=s,n;if(u=+n._x.call(null,o.data),e===u)return s.next=o,i?i[f]=s:n._root=s,n;do i=i?i[f]=new Array(2):n._root=new Array(2),(d=e>=(c=(a+l)/2))?a=c:l=c;while((f=+d)==(h=+(u>=c)));return i[h]=o,i[f]=s,n}function sse(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,o=-1/0;for(let s=0,a;s<e;++s)isNaN(a=+this._x.call(null,n[s]))||(r[s]=a,a<i&&(i=a),a>o&&(o=a));if(i>o)return this;this.cover(i).cover(o);for(let s=0;s<e;++s)wz(this,r[s],n[s]);return this}function ase(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,o=this._root,s,a;e>n||n>=r;)switch(a=+(n<e),s=new Array(2),s[a]=o,o=s,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=e,this._x1=r,this}function lse(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function cse(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function La(n,e,r){this.node=n,this.x0=e,this.x1=r}function use(n,e){var r,i=this._x0,o,s,a=this._x1,l=[],c=this._root,u,d;for(c&&l.push(new La(c,i,a)),e==null?e=1/0:(i=n-e,a=n+e);u=l.pop();)if(!(!(c=u.node)||(o=u.x0)>a||(s=u.x1)<i))if(c.length){var f=(o+s)/2;l.push(new La(c[1],f,s),new La(c[0],o,f)),(d=+(n>=f))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=u)}else{var h=Math.abs(n-+this._x.call(null,c.data));h<e&&(e=h,i=n-h,a=n+h,r=c.data)}return r}function dse(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._x1,c,u,d,f,h;if(!r)return this;if(r.length)for(;;){if((d=c>=(u=(a+l)/2))?a=u:l=u,e=r,!(r=r[f=+d]))return this;if(!r.length)break;e[f+1&1]&&(i=e,h=f)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[f]=s:delete e[f],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[h]=r:this._root=r),this):(this._root=s,this)}function fse(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function hse(){return this._root}function pse(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function mse(n){var e=[],r,i=this._root,o,s,a;for(i&&e.push(new La(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.x1)&&i.length){var l=(s+a)/2;(o=i[1])&&e.push(new La(o,l,a)),(o=i[0])&&e.push(new La(o,s,l))}return this}function gse(n){var e=[],r=[],i;for(this._root&&e.push(new La(this._root,this._x0,this._x1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.x1,c=(a+l)/2;(s=o[0])&&e.push(new La(s,a,c)),(s=o[1])&&e.push(new La(s,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function vse(n){return n[0]}function yse(n){return arguments.length?(this._x=n,this):this._x}function Cz(n,e){var r=new tM(e??vse,NaN,NaN);return n==null?r:r.addAll(n)}function tM(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function XP(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var to=Cz.prototype=tM.prototype;to.copy=function(){var n=new tM(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=XP(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var o=0;o<2;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(2)}):e.target[o]=XP(i));return n};to.add=ose;to.addAll=sse;to.cover=ase;to.data=lse;to.extent=cse;to.find=use;to.remove=dse;to.removeAll=fse;to.root=hse;to.size=pse;to.visit=mse;to.visitAfter=gse;to.x=yse;function xse(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return Ez(this.cover(e,r),e,r,n)}function Ez(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var o,s=n._root,a={data:i},l=n._x0,c=n._y0,u=n._x1,d=n._y1,f,h,p,g,y,v,m,x;if(!s)return n._root=a,n;for(;s.length;)if((y=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h,o=s,!(s=s[m=v<<1|y]))return o[m]=a,n;if(p=+n._x.call(null,s.data),g=+n._y.call(null,s.data),e===p&&r===g)return a.next=s,o?o[m]=a:n._root=a,n;do o=o?o[m]=new Array(4):n._root=new Array(4),(y=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h;while((m=v<<1|y)===(x=(g>=h)<<1|p>=f));return o[x]=s,o[m]=a,n}function _se(n){var e,r,i=n.length,o,s,a=new Array(i),l=new Array(i),c=1/0,u=1/0,d=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,e=n[r]))||isNaN(s=+this._y.call(null,e))||(a[r]=o,l[r]=s,o<c&&(c=o),o>d&&(d=o),s<u&&(u=s),s>f&&(f=s));if(c>d||u>f)return this;for(this.cover(c,u).cover(d,f),r=0;r<i;++r)Ez(this,a[r],l[r],n[r]);return this}function bse(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,o=this._x1,s=this._y1;if(isNaN(r))o=(r=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var a=o-r||1,l=this._root,c,u;r>n||n>=o||i>e||e>=s;)switch(u=(e<i)<<1|n<r,c=new Array(4),c[u]=l,l=c,a*=2,u){case 0:o=r+a,s=i+a;break;case 1:r=o-a,s=i+a;break;case 2:o=r+a,i=s-a;break;case 3:r=o-a,i=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=o,this._y1=s,this}function Sse(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function wse(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ci(n,e,r,i,o){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=o}function Cse(n,e,r){var i,o=this._x0,s=this._y0,a,l,c,u,d=this._x1,f=this._y1,h=[],p=this._root,g,y;for(p&&h.push(new Ci(p,o,s,d,f)),r==null?r=1/0:(o=n-r,s=e-r,d=n+r,f=e+r,r*=r);g=h.pop();)if(!(!(p=g.node)||(a=g.x0)>d||(l=g.y0)>f||(c=g.x1)<o||(u=g.y1)<s))if(p.length){var v=(a+c)/2,m=(l+u)/2;h.push(new Ci(p[3],v,m,c,u),new Ci(p[2],a,m,v,u),new Ci(p[1],v,l,c,m),new Ci(p[0],a,l,v,m)),(y=(e>=m)<<1|n>=v)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=g)}else{var x=n-+this._x.call(null,p.data),b=e-+this._y.call(null,p.data),S=x*x+b*b;if(S<r){var w=Math.sqrt(r=S);o=n-w,s=e-w,d=n+w,f=e+w,i=p.data}}return i}function Ese(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._x1,u=this._y1,d,f,h,p,g,y,v,m;if(!r)return this;if(r.length)for(;;){if((g=d>=(h=(a+c)/2))?a=h:c=h,(y=f>=(p=(l+u)/2))?l=p:u=p,e=r,!(r=r[v=y<<1|g]))return this;if(!r.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(i=e,m=v)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[v]=s:delete e[v],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=s,this)}function Tse(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Mse(){return this._root}function Rse(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Ase(n){var e=[],r,i=this._root,o,s,a,l,c;for(i&&e.push(new Ci(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.x1,c=r.y1)&&i.length){var u=(s+l)/2,d=(a+c)/2;(o=i[3])&&e.push(new Ci(o,u,d,l,c)),(o=i[2])&&e.push(new Ci(o,s,d,u,c)),(o=i[1])&&e.push(new Ci(o,u,a,l,d)),(o=i[0])&&e.push(new Ci(o,s,a,u,d))}return this}function Nse(n){var e=[],r=[],i;for(this._root&&e.push(new Ci(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.x1,u=i.y1,d=(a+c)/2,f=(l+u)/2;(s=o[0])&&e.push(new Ci(s,a,l,d,f)),(s=o[1])&&e.push(new Ci(s,d,l,c,f)),(s=o[2])&&e.push(new Ci(s,a,f,d,u)),(s=o[3])&&e.push(new Ci(s,d,f,c,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Pse(n){return n[0]}function Ose(n){return arguments.length?(this._x=n,this):this._x}function Ise(n){return n[1]}function Dse(n){return arguments.length?(this._y=n,this):this._y}function Tz(n,e,r){var i=new nM(e??Pse,r??Ise,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function nM(n,e,r,i,o,s){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=o,this._y1=s,this._root=void 0}function KP(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Di=Tz.prototype=nM.prototype;Di.copy=function(){var n=new nM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=KP(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var o=0;o<4;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(4)}):e.target[o]=KP(i));return n};Di.add=xse;Di.addAll=_se;Di.cover=bse;Di.data=Sse;Di.extent=wse;Di.find=Cse;Di.remove=Ese;Di.removeAll=Tse;Di.root=Mse;Di.size=Rse;Di.visit=Ase;Di.visitAfter=Nse;Di.x=Ose;Di.y=Dse;function Lse(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return Mz(this.cover(e,r,i),e,r,i,n)}function Mz(n,e,r,i,o){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var s,a=n._root,l={data:o},c=n._x0,u=n._y0,d=n._z0,f=n._x1,h=n._y1,p=n._z1,g,y,v,m,x,b,S,w,C,E,M;if(!a)return n._root=l,n;for(;a.length;)if((S=e>=(g=(c+f)/2))?c=g:f=g,(w=r>=(y=(u+h)/2))?u=y:h=y,(C=i>=(v=(d+p)/2))?d=v:p=v,s=a,!(a=a[E=C<<2|w<<1|S]))return s[E]=l,n;if(m=+n._x.call(null,a.data),x=+n._y.call(null,a.data),b=+n._z.call(null,a.data),e===m&&r===x&&i===b)return l.next=a,s?s[E]=l:n._root=l,n;do s=s?s[E]=new Array(8):n._root=new Array(8),(S=e>=(g=(c+f)/2))?c=g:f=g,(w=r>=(y=(u+h)/2))?u=y:h=y,(C=i>=(v=(d+p)/2))?d=v:p=v;while((E=C<<2|w<<1|S)===(M=(b>=v)<<2|(x>=y)<<1|m>=g));return s[M]=a,s[E]=l,n}function Fse(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),o=new Float64Array(e);let s=1/0,a=1/0,l=1/0,c=-1/0,u=-1/0,d=-1/0;for(let f=0,h,p,g,y;f<e;++f)isNaN(p=+this._x.call(null,h=n[f]))||isNaN(g=+this._y.call(null,h))||isNaN(y=+this._z.call(null,h))||(r[f]=p,i[f]=g,o[f]=y,p<s&&(s=p),p>c&&(c=p),g<a&&(a=g),g>u&&(u=g),y<l&&(l=y),y>d&&(d=y));if(s>c||a>u||l>d)return this;this.cover(s,a,l).cover(c,u,d);for(let f=0;f<e;++f)Mz(this,r[f],i[f],o[f],n[f]);return this}function Use(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,s=this._z0,a=this._x1,l=this._y1,c=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(o=Math.floor(e))+1,c=(s=Math.floor(r))+1;else{for(var u=a-i||1,d=this._root,f,h;i>n||n>=a||o>e||e>=l||s>r||r>=c;)switch(h=(r<s)<<2|(e<o)<<1|n<i,f=new Array(8),f[h]=d,d=f,u*=2,h){case 0:a=i+u,l=o+u,c=s+u;break;case 1:i=a-u,l=o+u,c=s+u;break;case 2:a=i+u,o=l-u,c=s+u;break;case 3:i=a-u,o=l-u,c=s+u;break;case 4:a=i+u,l=o+u,s=c-u;break;case 5:i=a-u,l=o+u,s=c-u;break;case 6:a=i+u,o=l-u,s=c-u;break;case 7:i=a-u,o=l-u,s=c-u;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this}function Bse(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function $se(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Fn(n,e,r,i,o,s,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=o,this.y1=s,this.z1=a}function zse(n,e,r,i){var o,s=this._x0,a=this._y0,l=this._z0,c,u,d,f,h,p,g=this._x1,y=this._y1,v=this._z1,m=[],x=this._root,b,S;for(x&&m.push(new Fn(x,s,a,l,g,y,v)),i==null?i=1/0:(s=n-i,a=e-i,l=r-i,g=n+i,y=e+i,v=r+i,i*=i);b=m.pop();)if(!(!(x=b.node)||(c=b.x0)>g||(u=b.y0)>y||(d=b.z0)>v||(f=b.x1)<s||(h=b.y1)<a||(p=b.z1)<l))if(x.length){var w=(c+f)/2,C=(u+h)/2,E=(d+p)/2;m.push(new Fn(x[7],w,C,E,f,h,p),new Fn(x[6],c,C,E,w,h,p),new Fn(x[5],w,u,E,f,C,p),new Fn(x[4],c,u,E,w,C,p),new Fn(x[3],w,C,d,f,h,E),new Fn(x[2],c,C,d,w,h,E),new Fn(x[1],w,u,d,f,C,E),new Fn(x[0],c,u,d,w,C,E)),(S=(r>=E)<<2|(e>=C)<<1|n>=w)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-S],m[m.length-1-S]=b)}else{var M=n-+this._x.call(null,x.data),T=e-+this._y.call(null,x.data),R=r-+this._z.call(null,x.data),P=M*M+T*T+R*R;if(P<i){var D=Math.sqrt(i=P);s=n-D,a=e-D,l=r-D,g=n+D,y=e+D,v=r+D,o=x.data}}return o}function kse(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n))||isNaN(g=+this._z.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._z0,u=this._x1,d=this._y1,f=this._z1,h,p,g,y,v,m,x,b,S,w,C;if(!r)return this;if(r.length)for(;;){if((x=h>=(y=(a+u)/2))?a=y:u=y,(b=p>=(v=(l+d)/2))?l=v:d=v,(S=g>=(m=(c+f)/2))?c=m:f=m,e=r,!(r=r[w=S<<2|b<<1|x]))return this;if(!r.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(i=e,C=w)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[w]=s:delete e[w],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[C]=r:this._root=r),this):(this._root=s,this)}function Vse(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Gse(){return this._root}function Hse(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function jse(n){var e=[],r,i=this._root,o,s,a,l,c,u,d;for(i&&e.push(new Fn(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,d=r.z1)&&i.length){var f=(s+c)/2,h=(a+u)/2,p=(l+d)/2;(o=i[7])&&e.push(new Fn(o,f,h,p,c,u,d)),(o=i[6])&&e.push(new Fn(o,s,h,p,f,u,d)),(o=i[5])&&e.push(new Fn(o,f,a,p,c,h,d)),(o=i[4])&&e.push(new Fn(o,s,a,p,f,h,d)),(o=i[3])&&e.push(new Fn(o,f,h,l,c,u,p)),(o=i[2])&&e.push(new Fn(o,s,h,l,f,u,p)),(o=i[1])&&e.push(new Fn(o,f,a,l,c,h,p)),(o=i[0])&&e.push(new Fn(o,s,a,l,f,h,p))}return this}function Wse(n){var e=[],r=[],i;for(this._root&&e.push(new Fn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.z0,u=i.x1,d=i.y1,f=i.z1,h=(a+u)/2,p=(l+d)/2,g=(c+f)/2;(s=o[0])&&e.push(new Fn(s,a,l,c,h,p,g)),(s=o[1])&&e.push(new Fn(s,h,l,c,u,p,g)),(s=o[2])&&e.push(new Fn(s,a,p,c,h,d,g)),(s=o[3])&&e.push(new Fn(s,h,p,c,u,d,g)),(s=o[4])&&e.push(new Fn(s,a,l,g,h,p,f)),(s=o[5])&&e.push(new Fn(s,h,l,g,u,p,f)),(s=o[6])&&e.push(new Fn(s,a,p,g,h,d,f)),(s=o[7])&&e.push(new Fn(s,h,p,g,u,d,f))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function qse(n){return n[0]}function Xse(n){return arguments.length?(this._x=n,this):this._x}function Kse(n){return n[1]}function Yse(n){return arguments.length?(this._y=n,this):this._y}function Qse(n){return n[2]}function Zse(n){return arguments.length?(this._z=n,this):this._z}function Rz(n,e,r,i){var o=new rM(e??qse,r??Kse,i??Qse,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?o:o.addAll(n)}function rM(n,e,r,i,o,s,a,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this._root=void 0}function YP(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var vi=Rz.prototype=rM.prototype;vi.copy=function(){var n=new rM(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=YP(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var o=0;o<8;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(8)}):e.target[o]=YP(i));return n};vi.add=Lse;vi.addAll=Fse;vi.cover=Use;vi.data=Bse;vi.extent=$se;vi.find=zse;vi.remove=kse;vi.removeAll=Vse;vi.root=Gse;vi.size=Hse;vi.visit=jse;vi.visitAfter=Wse;vi.x=Xse;vi.y=Yse;vi.z=Zse;function Aa(n){return function(){return n}}function _a(n){return(n()-.5)*1e-6}function Jse(n){return n.index}function QP(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function Az(n){var e=Jse,r=h,i,o=Aa(30),s,a,l,c,u,d,f=1;n==null&&(n=[]);function h(m){return 1/Math.min(c[m.source.index],c[m.target.index])}function p(m){for(var x=0,b=n.length;x<f;++x)for(var S=0,w,C,E,M=0,T=0,R=0,P,D;S<b;++S)w=n[S],C=w.source,E=w.target,M=E.x+E.vx-C.x-C.vx||_a(d),l>1&&(T=E.y+E.vy-C.y-C.vy||_a(d)),l>2&&(R=E.z+E.vz-C.z-C.vz||_a(d)),P=Math.sqrt(M*M+T*T+R*R),P=(P-s[S])/P*m*i[S],M*=P,T*=P,R*=P,E.vx-=M*(D=u[S]),l>1&&(E.vy-=T*D),l>2&&(E.vz-=R*D),C.vx+=M*(D=1-D),l>1&&(C.vy+=T*D),l>2&&(C.vz+=R*D)}function g(){if(a){var m,x=a.length,b=n.length,S=new Map(a.map((C,E)=>[e(C,E,a),C])),w;for(m=0,c=new Array(x);m<b;++m)w=n[m],w.index=m,typeof w.source!="object"&&(w.source=QP(S,w.source)),typeof w.target!="object"&&(w.target=QP(S,w.target)),c[w.source.index]=(c[w.source.index]||0)+1,c[w.target.index]=(c[w.target.index]||0)+1;for(m=0,u=new Array(b);m<b;++m)w=n[m],u[m]=c[w.source.index]/(c[w.source.index]+c[w.target.index]);i=new Array(b),y(),s=new Array(b),v()}}function y(){if(a)for(var m=0,x=n.length;m<x;++m)i[m]=+r(n[m],m,n)}function v(){if(a)for(var m=0,x=n.length;m<x;++m)s[m]=+o(n[m],m,n)}return p.initialize=function(m,...x){a=m,d=x.find(b=>typeof b=="function")||Math.random,l=x.find(b=>[1,2,3].includes(b))||2,g()},p.links=function(m){return arguments.length?(n=m,g(),p):n},p.id=function(m){return arguments.length?(e=m,p):e},p.iterations=function(m){return arguments.length?(f=+m,p):f},p.strength=function(m){return arguments.length?(r=typeof m=="function"?m:Aa(+m),y(),p):r},p.distance=function(m){return arguments.length?(o=typeof m=="function"?m:Aa(+m),v(),p):o},p}const eae=1664525,tae=1013904223,ZP=4294967296;function nae(){let n=1;return()=>(n=(eae*n+tae)%ZP)/ZP}var JP=3;function Xb(n){return n.x}function eO(n){return n.y}function rae(n){return n.z}var iae=10,oae=Math.PI*(3-Math.sqrt(5)),sae=Math.PI*20/(9+Math.sqrt(221));function Nz(n,e){e=e||2;var r=Math.min(JP,Math.max(1,Math.round(e))),i,o=1,s=.001,a=1-Math.pow(s,1/300),l=0,c=.6,u=new Map,d=YT(p),f=ng("tick","end"),h=nae();n==null&&(n=[]);function p(){g(),f.call("tick",i),o<s&&(d.stop(),f.call("end",i))}function g(m){var x,b=n.length,S;m===void 0&&(m=1);for(var w=0;w<m;++w)for(o+=(l-o)*a,u.forEach(function(C){C(o)}),x=0;x<b;++x)S=n[x],S.fx==null?S.x+=S.vx*=c:(S.x=S.fx,S.vx=0),r>1&&(S.fy==null?S.y+=S.vy*=c:(S.y=S.fy,S.vy=0)),r>2&&(S.fz==null?S.z+=S.vz*=c:(S.z=S.fz,S.vz=0));return i}function y(){for(var m=0,x=n.length,b;m<x;++m){if(b=n[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),b.fz!=null&&(b.z=b.fz),isNaN(b.x)||r>1&&isNaN(b.y)||r>2&&isNaN(b.z)){var S=iae*(r>2?Math.cbrt(.5+m):r>1?Math.sqrt(.5+m):m),w=m*oae,C=m*sae;r===1?b.x=S:r===2?(b.x=S*Math.cos(w),b.y=S*Math.sin(w)):(b.x=S*Math.sin(w)*Math.cos(C),b.y=S*Math.cos(w),b.z=S*Math.sin(w)*Math.sin(C))}(isNaN(b.vx)||r>1&&isNaN(b.vy)||r>2&&isNaN(b.vz))&&(b.vx=0,r>1&&(b.vy=0),r>2&&(b.vz=0))}}function v(m){return m.initialize&&m.initialize(n,h,r),m}return y(),i={tick:g,restart:function(){return d.restart(p),i},stop:function(){return d.stop(),i},numDimensions:function(m){return arguments.length?(r=Math.min(JP,Math.max(1,Math.round(m))),u.forEach(v),i):r},nodes:function(m){return arguments.length?(n=m,y(),u.forEach(v),i):n},alpha:function(m){return arguments.length?(o=+m,i):o},alphaMin:function(m){return arguments.length?(s=+m,i):s},alphaDecay:function(m){return arguments.length?(a=+m,i):+a},alphaTarget:function(m){return arguments.length?(l=+m,i):l},velocityDecay:function(m){return arguments.length?(c=1-m,i):1-c},randomSource:function(m){return arguments.length?(h=m,u.forEach(v),i):h},force:function(m,x){return arguments.length>1?(x==null?u.delete(m):u.set(m,v(x)),i):u.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),x=m.shift()||0,b=(r>1?m.shift():null)||0,S=(r>2?m.shift():null)||0,w=m.shift()||1/0,C=0,E=n.length,M,T,R,P,D,L;for(w*=w,C=0;C<E;++C)D=n[C],M=x-D.x,T=b-(D.y||0),R=S-(D.z||0),P=M*M+T*T+R*R,P<w&&(L=D,w=P);return L},on:function(m,x){return arguments.length>1?(f.on(m,x),i):f.on(m)}}}function Pz(){var n,e,r,i,o,s=Aa(-30),a,l=1,c=1/0,u=.81;function d(g){var y,v=n.length,m=(e===1?Cz(n,Xb):e===2?Tz(n,Xb,eO):e===3?Rz(n,Xb,eO,rae):null).visitAfter(h);for(o=g,y=0;y<v;++y)r=n[y],m.visit(p)}function f(){if(n){var g,y=n.length,v;for(a=new Array(y),g=0;g<y;++g)v=n[g],a[v.index]=+s(v,g,n)}}function h(g){var y=0,v,m,x=0,b,S,w,C,E=g.length;if(E){for(b=S=w=C=0;C<E;++C)(v=g[C])&&(m=Math.abs(v.value))&&(y+=v.value,x+=m,b+=m*(v.x||0),S+=m*(v.y||0),w+=m*(v.z||0));y*=Math.sqrt(4/E),g.x=b/x,e>1&&(g.y=S/x),e>2&&(g.z=w/x)}else{v=g,v.x=v.data.x,e>1&&(v.y=v.data.y),e>2&&(v.z=v.data.z);do y+=a[v.data.index];while(v=v.next)}g.value=y}function p(g,y,v,m,x){if(!g.value)return!0;var b=[v,m,x][e-1],S=g.x-r.x,w=e>1?g.y-r.y:0,C=e>2?g.z-r.z:0,E=b-y,M=S*S+w*w+C*C;if(E*E/u<M)return M<c&&(S===0&&(S=_a(i),M+=S*S),e>1&&w===0&&(w=_a(i),M+=w*w),e>2&&C===0&&(C=_a(i),M+=C*C),M<l&&(M=Math.sqrt(l*M)),r.vx+=S*g.value*o/M,e>1&&(r.vy+=w*g.value*o/M),e>2&&(r.vz+=C*g.value*o/M)),!0;if(g.length||M>=c)return;(g.data!==r||g.next)&&(S===0&&(S=_a(i),M+=S*S),e>1&&w===0&&(w=_a(i),M+=w*w),e>2&&C===0&&(C=_a(i),M+=C*C),M<l&&(M=Math.sqrt(l*M)));do g.data!==r&&(E=a[g.data.index]*o/M,r.vx+=S*E,e>1&&(r.vy+=w*E),e>2&&(r.vz+=C*E));while(g=g.next)}return d.initialize=function(g,...y){n=g,i=y.find(v=>typeof v=="function")||Math.random,e=y.find(v=>[1,2,3].includes(v))||2,f()},d.strength=function(g){return arguments.length?(s=typeof g=="function"?g:Aa(+g),f(),d):s},d.distanceMin=function(g){return arguments.length?(l=g*g,d):Math.sqrt(l)},d.distanceMax=function(g){return arguments.length?(c=g*g,d):Math.sqrt(c)},d.theta=function(g){return arguments.length?(u=g*g,d):Math.sqrt(u)},d}function Oz(n,e,r,i){var o,s,a=Aa(.1),l,c;typeof n!="function"&&(n=Aa(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function u(f){for(var h=0,p=o.length;h<p;++h){var g=o[h],y=g.x-e||1e-6,v=(g.y||0)-r||1e-6,m=(g.z||0)-i||1e-6,x=Math.sqrt(y*y+v*v+m*m),b=(c[h]-x)*l[h]*f/x;g.vx+=y*b,s>1&&(g.vy+=v*b),s>2&&(g.vz+=m*b)}}function d(){if(o){var f,h=o.length;for(l=new Array(h),c=new Array(h),f=0;f<h;++f)c[f]=+n(o[f],f,o),l[f]=isNaN(c[f])?0:+a(o[f],f,o)}}return u.initialize=function(f,...h){o=f,s=h.find(p=>[1,2,3].includes(p))||2,d()},u.strength=function(f){return arguments.length?(a=typeof f=="function"?f:Aa(+f),d(),u):a},u.radius=function(f){return arguments.length?(n=typeof f=="function"?f:Aa(+f),d(),u):n},u.x=function(f){return arguments.length?(e=+f,u):e},u.y=function(f){return arguments.length?(r=+f,u):r},u.z=function(f){return arguments.length?(i=+f,u):i},u}const{abs:Sh,cos:ca,sin:Vu,acos:aae,atan2:wh,sqrt:ll,pow:No}=Math;function Ch(n){return n<0?-No(-n,1/3):No(n,1/3)}const Iz=Math.PI,tv=2*Iz,cl=Iz/2,lae=1e-6,Kb=Number.MAX_SAFE_INTEGER||9007199254740991,Yb=Number.MIN_SAFE_INTEGER||-9007199254740991,cae={x:0,y:0,z:0},it={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),ll(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const o=1-n;let s=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:o*s[0].x+n*s[1].x,y:o*s[0].y+n*s[1].y,t:n};return r&&(l.z=o*s[0].z+n*s[1].z),l}if(i<4){let l=o*o,c=n*n,u,d,f,h=0;i===2?(s=[s[0],s[1],s[2],cae],u=l,d=o*n*2,f=c):i===3&&(u=l*o,d=l*n*3,f=o*c*3,h=n*c);const p={x:u*s[0].x+d*s[1].x+f*s[2].x+h*s[3].x,y:u*s[0].y+d*s[1].y+f*s[2].y+h*s[3].y,t:n};return r&&(p.z=u*s[0].z+d*s[1].z+f*s[2].z+h*s[3].z),p}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const o=1-n,s=r,a=e;let l=s[0],c=s[1],u=s[2],d=s[3],f;if(l*=o,c*=n,a.length===2)return f=l+c,{x:(l*a[0].x+c*a[1].x)/f,y:(l*a[0].y+c*a[1].y)/f,z:i?(l*a[0].z+c*a[1].z)/f:!1,t:n};if(l*=o,c*=2*o,u*=n*n,a.length===3)return f=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/f,y:(l*a[0].y+c*a[1].y+u*a[2].y)/f,z:i?(l*a[0].z+c*a[1].z+u*a[2].z)/f:!1,t:n};if(l*=o,c*=1.5*o,u*=3*o,d*=n*n*n,a.length===4)return f=l+c+u+d,{x:(l*a[0].x+c*a[1].x+u*a[2].x+d*a[3].x)/f,y:(l*a[0].y+c*a[1].y+u*a[2].y+d*a[3].y)/f,z:i?(l*a[0].z+c*a[1].z+u*a[2].z+d*a[3].z)/f:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,o=i.length,s=o-1;o>1;o--,s--){const a=[];for(let l=0,c;l<s;l++)c={x:s*(i[l+1].x-i[l].x),y:s*(i[l+1].y-i[l].y)},e&&(c.z=s*(i[l+1].z-i[l].z)),a.push(c);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||it.approximately(n,e)||it.approximately(n,r)},approximately:function(n,e,r){return Sh(n-e)<=(r||lae)},length:function(n){const r=it.Tvalues.length;let i=0;for(let o=0,s;o<r;o++)s=.5*it.Tvalues[o]+.5,i+=it.Cvalues[o]*it.arcfn(s,n);return .5*i},map:function(n,e,r,i,o){const s=r-e,a=o-i,l=n-e,c=l/s;return i+a*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(it.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-n.x,a=r.y-n.y,l=i*a-o*s,c=i*s+o*a;return wh(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return ll(r*r+i*i)},closest:function(n,e){let r=No(2,63),i,o;return n.forEach(function(s,a){o=it.dist(e,s),o<r&&(r=o,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=No(n,e)+No(1-n,e),i=r-1;return Sh(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=No(1-n,e),i=No(n,e)+r;return r/i},lli8:function(n,e,r,i,o,s,a,l){const c=(n*i-e*r)*(o-a)-(n-r)*(o*l-s*a),u=(n*i-e*r)*(s-l)-(e-i)*(o*l-s*a),d=(n-r)*(s-l)-(e-i)*(o-a);return d==0?!1:{x:c/d,y:u/d}},lli4:function(n,e,r,i){const o=n.x,s=n.y,a=e.x,l=e.y,c=r.x,u=r.y,d=i.x,f=i.y;return it.lli8(o,s,a,l,c,u,d,f)},lli:function(n,e){return it.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new Hn(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=Kb,r=Kb,i=Yb,o=Yb;return n.forEach(function(s){const a=s.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),o<a.y.max&&(o=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(n,e,r,i,o){if(!it.bboxoverlap(e,i))return[];const s=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const d=c.intersects(u,o);d.length>0&&(d.c1=c,d.c2=u,d.s1=n,d.s2=r,s.push(d))})}),s},makeshape:function(n,e,r){const i=e.points.length,o=n.points.length,s=it.makeline(e.points[i-1],n.points[0]),a=it.makeline(n.points[o-1],e.points[0]),l={startcap:s,forward:n,back:e,endcap:a,bbox:it.findbbox([s,n,e,a])};return l.intersections=function(c){return it.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=Kb,o=Yb,s,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)s=r[l],a=n.get(s),a[e]<i&&(i=a[e]),a[e]>o&&(o=a[e]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,o=-wh(e.p2.y-i,e.p2.x-r),s=function(a){return{x:(a.x-r)*ca(o)-(a.y-i)*Vu(o),y:(a.x-r)*Vu(o)+(a.y-i)*ca(o)}};return n.map(s)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=it.align(n,e),o=function(E){return 0<=E&&E<=1};if(r===2){const E=i[0].y,M=i[1].y,T=i[2].y,R=E-2*M+T;if(R!==0){const P=-ll(M*M-E*T),D=-E+M,L=-(P+D)/R,A=-(-P+D)/R;return[L,A].filter(o)}else if(M!==T&&R===0)return[(2*M-T)/(2*M-2*T)].filter(o);return[]}const s=i[0].y,a=i[1].y,l=i[2].y,c=i[3].y;let u=-s+3*a-3*l+c,d=3*s-6*a+3*l,f=-3*s+3*a,h=s;if(it.approximately(u,0)){if(it.approximately(d,0))return it.approximately(f,0)?[]:[-h/f].filter(o);const E=ll(f*f-4*d*h),M=2*d;return[(E-f)/M,(-f-E)/M].filter(o)}d/=u,f/=u,h/=u;const p=(3*f-d*d)/3,g=p/3,y=(2*d*d*d-9*d*f+27*h)/27,v=y/2,m=v*v+g*g*g;let x,b,S,w,C;if(m<0){const E=-p/3,M=E*E*E,T=ll(M),R=-y/(2*T),P=R<-1?-1:R>1?1:R,D=aae(P),L=Ch(T),A=2*L;return S=A*ca(D/3)-d/3,w=A*ca((D+tv)/3)-d/3,C=A*ca((D+2*tv)/3)-d/3,[S,w,C].filter(o)}else{if(m===0)return x=v<0?Ch(-v):-Ch(v),S=2*x-d/3,w=-x-d/3,[S,w].filter(o);{const E=ll(m);return x=Ch(-v+E),b=Ch(v+E),[x-b-d/3].filter(o)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],o=e-2*r+i;if(o!==0){const s=-ll(r*r-e*i),a=-e+r,l=-(s+a)/o,c=-(-s+a)/o;return[l,c]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,o){let s,a,l,c,u=0,d=0;const f=it.compute(n,e),h=it.compute(n,r),p=f.x*f.x+f.y*f.y;if(i?(s=ll(No(f.y*h.z-h.y*f.z,2)+No(f.z*h.x-h.z*f.x,2)+No(f.x*h.y-h.x*f.y,2)),a=No(p+f.z*f.z,3/2)):(s=f.x*h.y-f.y*h.x,a=No(p,3/2)),s===0||a===0)return{k:0,r:0};if(u=s/a,d=a/s,!o){const g=it.curvature(n-.001,e,r,i,!0).k,y=it.curvature(n+.001,e,r,i,!0).k;c=(y-u+(u-g))/2,l=(Sh(y-u)+Sh(u-g))/2}return{k:u,r:d,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=it.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,o=e[1].x*e[2].y,s=e[3].x*e[2].y,a=18*(-3*r+2*i+3*o-s),l=18*(3*r-i-3*o),c=18*(o-r);if(it.approximately(a,0)){if(!it.approximately(l,0)){let h=-c/l;if(0<=h&&h<=1)return[h]}return[]}const u=2*a;if(it.approximately(u,0))return[];const d=l*l-4*a*c;if(d<0)return[];const f=Math.sqrt(d);return[(f-l)/u,-(l+f)/u].filter(function(h){return 0<=h&&h<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let o=0,s,a,l,c;o<i;o++)if(s=r[o],a=n[s].mid,l=e[s].mid,c=(n[s].size+e[s].size)/2,Sh(a-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),o=e.bbox(),s=1e5,a=r||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(s*(n._t1+n._t2)/2|0)/s+"/"+(s*(e._t1+e._t2)/2|0)/s];let l=n.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(f){return it.bboxoverlap(f.left.bbox(),f.right.bbox())});let d=[];return u.length===0||(u.forEach(function(f){d=d.concat(it.pairiteration(f.left,f.right,a))}),d=d.filter(function(f,h){return d.indexOf(f)===h})),d},getccenter:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-e.x,a=r.y-e.y,l=i*ca(cl)-o*Vu(cl),c=i*Vu(cl)+o*ca(cl),u=s*ca(cl)-a*Vu(cl),d=s*Vu(cl)+a*ca(cl),f=(n.x+e.x)/2,h=(n.y+e.y)/2,p=(e.x+r.x)/2,g=(e.y+r.y)/2,y=f+l,v=h+c,m=p+u,x=g+d,b=it.lli8(f,h,y,v,p,g,m,x),S=it.dist(b,n);let w=wh(n.y-b.y,n.x-b.x),C=wh(e.y-b.y,e.x-b.x),E=wh(r.y-b.y,r.x-b.x),M;return w<E?((w>C||C>E)&&(w+=tv),w>E&&(M=E,E=w,w=M)):E<C&&C<w?(M=E,E=w,w=M):E+=tv,b.s=w,b.e=E,b.r=S,b},numberSort:function(n,e){return n-e}};class xp{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return it.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)it.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new xp(r)}}const{abs:Eh,min:tO,max:nO,cos:uae,sin:dae,acos:fae,sqrt:Th}=Math,hae=Math.PI;class Hn{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const p=[];r.forEach(function(g){["x","y","z"].forEach(function(y){typeof g[y]<"u"&&p.push(g[y])})}),r=p}let o=!1;const s=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!o&&(s===9||s===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let p=0,g=a?3:2;p<s;p+=g){var c={x:r[p],y:r[p+1]};a&&(c.z=r[p+2]),l.push(c)}const u=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const f=it.align(l,{p1:l[0],p2:l[u]}),h=it.dist(l[0],l[u]);this._linear=f.reduce((p,g)=>p+Eh(g.y),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new Hn(r,r,i);if(o===1)return new Hn(e,r,r);const s=Hn.getABC(2,e,r,i,o);return new Hn(e,s.A,i)}static cubicFromPoints(e,r,i,o,s){typeof o>"u"&&(o=.5);const a=Hn.getABC(3,e,r,i,o);typeof s>"u"&&(s=it.dist(r,a.C));const l=s*(1-o)/o,c=it.dist(e,i),u=(i.x-e.x)/c,d=(i.y-e.y)/c,f=s*u,h=s*d,p=l*u,g=l*d,y={x:r.x-f,y:r.y-h},v={x:r.x+p,y:r.y+g},m=a.A,x={x:m.x+(y.x-m.x)/(1-o),y:m.y+(y.y-m.y)/(1-o)},b={x:m.x+(v.x-m.x)/o,y:m.y+(v.y-m.y)/o},S={x:e.x+(x.x-e.x)/o,y:e.y+(x.y-e.y)/o},w={x:i.x+(b.x-i.x)/(1-o),y:i.y+(b.y-i.y)/(1-o)};return new Hn(e,S,w,i)}static getUtils(){return it}getUtils(){return Hn.getUtils()}static get PolyBezier(){return xp}valueOf(){return this.toString()}toString(){return it.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let s=1,a=e.length;s<a;s++)o.push(e[s].x),o.push(e[s].y);return o.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=it.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=it.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return it.length(this.derivative.bind(this))}static getABC(e=2,r,i,o,s=.5){const a=it.projectionratio(s,e),l=1-a,c={x:a*r.x+l*o.x,y:a*r.y+l*o.y},u=it.abcratio(s,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:r,E:o}}getABC(e,r){r=r||this.get(e);let i=this.points[0],o=this.points[this.order];return Hn.getABC(this.order,i,r,o,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,o;r<e;r++)o=r/(e-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),o=[];for(let s=0,a,l=0;s<i.length;s++)a=i[s],it.dist(a,e)<r&&(o.push(a),l+=s/i.length);return o.length?t/=o.length:!1}project(e){const r=this.getLUT(),i=r.length-1,o=it.closest(r,e),s=o.mpos,a=(s-1)/i,l=(s+1)/i,c=.1/i;let u=o.mdist,d=a,f=d,h;u+=1;for(let p;d<l+c;d+=c)h=this.compute(d),p=it.dist(e,h),p<u&&(u=p,f=d);return f=f<0?0:f>1?1:f,h=this.compute(f),h.t=f,h.d=u,h}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?it.computeWithRatios(e,this.points,this.ratios,this._3d):it.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let o=1,s,a;o<i;o++)s=e[o],a=e[o-1],r[o]={x:(i-o)/i*s.x+o/i*a.x,y:(i-o)/i*s.y+o/i*a.y};return r[i]=e[i-1],new Hn(r)}derivative(e){return it.compute(e,this.dpoints[0],this._3d)}dderivative(e){return it.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Hn(it.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return it.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return it.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Th(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),o=Th(r.x*r.x+r.y*r.y+r.z*r.z),s=Th(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=s,i.y/=s,i.z/=s;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Th(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const c=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],o=[],s=0;for(o[s++]=r[0],o[s++]=r[1],o[s++]=r[2],this.order===3&&(o[s++]=r[3]);r.length>1;){i=[];for(let a=0,l,c=r.length-1;a<c;a++)l=it.lerp(e,r[a],r[a+1]),o[s++]=l,i.push(l);r=i}return o}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),o={left:this.order===2?new Hn([i[0],i[3],i[5]]):new Hn([i[0],i[4],i[7],i[9]]),right:this.order===2?new Hn([i[5],i[4],i[2]]):new Hn([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=it.map(0,0,1,this._t1,this._t2),o.left._t2=it.map(e,0,1,this._t1,this._t2),o.right._t1=it.map(e,0,1,this._t1,this._t2),o.right._t2=it.map(1,0,1,this._t1,this._t2),r?(r=it.map(r,e,1,0,1),o.right.split(r).left):o}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let o=function(a){return a[i]},s=this.dpoints[0].map(o);e[i]=it.droots(s),this.order===3&&(s=this.dpoints[1].map(o),e[i]=e[i].concat(it.droots(s))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(it.numberSort))}).bind(this)),e.values=r.sort(it.numberSort).filter(function(i,o){return r.indexOf(i)===o}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=it.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return it.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),o=this.normal(e),s={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(s.z=i.z+o.z*r),s}if(this._linear){const i=this.normal(0),o=this.points.map(function(s){const a={x:s.x+e*i.x,y:s.y+e*i.y};return s.z&&i.z&&(a.z=s.z+e*i.z),a});return[new Hn(o)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const o=it.angle(this.points[0],this.points[3],this.points[1]),s=it.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&s<0||o<0&&s>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Eh(fae(i))<hae/3}reduce(){let e,r=0,i=0,o=.01,s,a=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],s=this.split(r,i),s._t1=r,s._t2=i,a.push(s),r=i;return a.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(s=u.split(r,i),!s.simple()){if(i-=o,Eh(r-i)<o)return[];s=u.split(r,i),s._t1=it.map(r,0,1,u._t1,u._t2),s._t2=it.map(i,0,1,u._t1,u._t2),l.push(s),r=i;break}r<1&&(s=u.split(r,1),s._t1=it.map(r,0,1,u._t1,u._t2),s._t2=u._t2,l.push(s))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const o=this.order;let s=this.points.map((a,l)=>(1-l/o)*r+l/o*i);return new Hn(this.points.map((a,l)=>({x:a.x+e.x*s[l],y:a.y+e.y*s[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const o=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],d=it.lli4(c[0],c[0].c,c[1],c[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const h=u[f*r]=it.copy(s[f*r]);h.x+=(f?l:a)*c[f].n.x,h.y+=(f?l:a)*c[f].n.y}),i?([0,1].forEach(function(f){if(!(r===2&&f)){var h=s[f+1],p={x:h.x-d.x,y:h.y-d.y},g=i?i((f+1)/r):e;i&&!o&&(g=-g);var y=Th(p.x*p.x+p.y*p.y);p.x/=y,p.y/=y,u[f+1]={x:h.x+g*p.x,y:h.y+g*p.y}}}),new Hn(u)):([0,1].forEach(f=>{if(r===2&&f)return;const h=u[f*r],p=this.derivative(f),g={x:h.x+p.x,y:h.y+p.y};u[f+1]=it.lli4(h,g,d,s[f+1])}),new Hn(u))}outline(e,r,i,o){if(r=r===void 0?e:r,this._linear){const w=this.normal(0),C=this.points[0],E=this.points[this.points.length-1];let M,T,R;i===void 0&&(i=e,o=r),M={x:C.x+w.x*e,y:C.y+w.y*e},R={x:E.x+w.x*i,y:E.y+w.y*i},T={x:(M.x+R.x)/2,y:(M.y+R.y)/2};const P=[M,T,R];M={x:C.x-w.x*r,y:C.y-w.y*r},R={x:E.x-w.x*o,y:E.y-w.y*o},T={x:(M.x+R.x)/2,y:(M.y+R.y)/2};const D=[R,T,M],L=it.makeline(D[2],P[0]),A=it.makeline(P[2],D[0]),I=[L,new Hn(P),A,new Hn(D)];return new xp(I)}const s=this.reduce(),a=s.length,l=[];let c=[],u,d=0,f=this.length();const h=typeof i<"u"&&typeof o<"u";function p(w,C,E,M,T){return function(R){const P=M/E,D=(M+T)/E,L=C-w;return it.map(R,0,1,w+P*L,w+D*L)}}s.forEach(function(w){const C=w.length();h?(l.push(w.scale(p(e,i,f,d,C))),c.push(w.scale(p(-r,-o,f,d,C)))):(l.push(w.scale(e)),c.push(w.scale(-r))),d+=C}),c=c.map(function(w){return u=w.points,u[3]?w.points=[u[3],u[2],u[1],u[0]]:w.points=[u[2],u[1],u[0]],w}).reverse();const g=l[0].points[0],y=l[a-1].points[l[a-1].points.length-1],v=c[a-1].points[c[a-1].points.length-1],m=c[0].points[0],x=it.makeline(v,g),b=it.makeline(y,m),S=[x].concat(l).concat([b]).concat(c);return new xp(S)}outlineshapes(e,r,i){r=r||e;const o=this.outline(e,r).curves,s=[];for(let a=1,l=o.length;a<l/2;a++){const c=it.makeshape(o[a],o[l-a],i);c.startcap.virtual=a>1,c.endcap.virtual=a<l/2-1,s.push(c)}return s}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Hn&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=tO(e.p1.x,e.p2.x),i=tO(e.p1.y,e.p2.y),o=nO(e.p1.x,e.p2.x),s=nO(e.p1.y,e.p2.y);return it.roots(this.points,e).filter(a=>{var l=this.get(a);return it.between(l.x,r,o)&&it.between(l.y,i,s)})}selfintersects(e){const r=this.reduce(),i=r.length-2,o=[];for(let s=0,a,l,c;s<i;s++)l=r.slice(s,s+1),c=r.slice(s+2),a=this.curveintersects(l,c,e),o.push(...a);return o}curveintersects(e,r,i){const o=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&o.push({left:a,right:l})})});let s=[];return o.forEach(function(a){const l=it.pairiteration(a.left,a.right,i);l.length>0&&(s=s.concat(l))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,o){const s=(o-i)/4,a=this.get(i+s),l=this.get(o-s),c=it.dist(e,r),u=it.dist(e,a),d=it.dist(e,l);return Eh(u-c)+Eh(d-c)}_iterate(e,r){let i=0,o=1,s;do{s=0,o=1;let a=this.get(i),l,c,u,d,f=!1,h=!1,p,g=o,y=1;do if(h=f,d=u,g=(i+o)/2,l=this.get(g),c=this.get(o),u=it.getccenter(a,l,c),u.interval={start:i,end:o},f=this._error(u,a,i,o)<=e,p=h&&!f,p||(y=o),f){if(o>=1){if(u.interval.end=y=1,d=u,o>1){let m={x:u.x+u.r*uae(u.e),y:u.y+u.r*dae(u.e)};u.e+=it.angle({x:u.x,y:u.y},m,this.get(1))}break}o=o+(o-i)/2}else o=g;while(!p&&s++<100);if(s>=100)break;d=d||u,r.push(d),i=y}while(o<1);return r}}function DC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function pae(n){if(Array.isArray(n))return n}function mae(n){if(Array.isArray(n))return DC(n)}function gae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function vae(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function yae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ae(n,e){if(n==null)return{};var r,i,o=bae(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function bae(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function Sae(n,e){return pae(n)||vae(n,e)||Dz(n,e)||yae()}function wae(n){return mae(n)||gae(n)||Dz(n)||xae()}function Cae(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Eae(n){var e=Cae(n,"string");return typeof e=="symbol"?e:e+""}function Dz(n,e){if(n){if(typeof n=="string")return DC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DC(n,e):void 0}}var LC=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),s=n.reduce(function(l,c){var u=l,d=c;return o.forEach(function(f,h){var p=f.keyAccessor,g=f.isProp,y;if(g){var v=d,m=v[p],x=_ae(v,[p].map(Eae));y=m,d=x}else y=p(d,h);h+1<o.length?(u.hasOwnProperty(y)||(u[y]={}),u=u[y]):r?(u.hasOwnProperty(y)||(u[y]=[]),u[y].push(d)):u[y]=d}),l},{});r instanceof Function&&function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===o.length?Object.keys(c).forEach(function(d){return c[d]=r(c[d])}):Object.values(c).forEach(function(d){return l(d,u+1)})}(s);var a=s;return i&&(a=[],function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===o.length?a.push({keys:u,vals:c}):Object.entries(c).forEach(function(d){var f=Sae(d,2),h=f[0],p=f[1];return l(p,[].concat(wae(u),[h]))})}(s),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function Tae(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const rO=Symbol("implicit");function iM(){var n=new IP,e=[],r=[],i=rO;function o(s){let a=n.get(s);if(a===void 0){if(i!==rO)return i;n.set(s,a=e.push(s)-1)}return r[a%r.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new IP;for(const a of s)n.has(a)||n.set(a,e.push(a)-1);return o},o.range=function(s){return arguments.length?(r=Array.from(s),o):r.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.copy=function(){return iM(e,r).unknown(i)},Tae.apply(o,arguments),o}function Mae(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const Lz=Mae("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Rae(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var Aae=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .graph-tooltip {
  position: absolute;
  top: 0;
  font-family: sans-serif;
  font-size: 16px;
  padding: 4px;
  border-radius: 3px;
  color: #eee;
  background: rgba(0,0,0,0.65);
  visibility: hidden; /* by default */
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;Rae(Aae);function FC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Nae(n){if(Array.isArray(n))return n}function Pae(n){if(Array.isArray(n))return FC(n)}function iO(n,e,r){if(Fz())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return o}function lm(n,e,r){return(e=Uae(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Fz(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fz=function(){return!!n})()}function Oae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Iae(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function Dae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oO(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Gu(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oO(Object(r),!0).forEach(function(i){lm(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function _p(n,e){return Nae(n)||Iae(n,e)||Uz(n,e)||Dae()}function Uo(n){return Pae(n)||Oae(n)||Uz(n)||Lae()}function Fae(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Uae(n){var e=Fae(n,"string");return typeof e=="symbol"?e:e+""}function UC(n){"@babel/helpers - typeof";return UC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UC(n)}function Uz(n,e){if(n){if(typeof n=="string")return FC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FC(n,e):void 0}}var Bae=iM(Lz);function sO(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=Bae(e(i))})}function $ae(n,e){var r=n.nodes,i=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.nodeFilter,a=s===void 0?function(){return!0}:s,l=o.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!a(p)}}),i.forEach(function(p){var g=p.source,y=p.target,v=S(g),m=S(y);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var x=u[v],b=u[m];x.out.push(b);function S(w){return UC(w)==="object"?e(w):w}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(Uo(Object.entries(u).filter(function(p){var g=_p(p,2),y=g[1];return!y.skip}).map(function(p){var g=_p(p,2),y=g[0],v=g[1];return lm({},y,v.depth)}))));return f;function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var S=p[m];if(g.indexOf(S)!==-1){var w=[].concat(Uo(g.slice(g.indexOf(S))),[S]).map(function(C){return e(C.data)});return d.some(function(C){return C.length===w.length&&C.every(function(E,M){return E===w[M]})})||(d.push(w),c(w)),1}y>S.depth&&(S.depth=y,h(S.out,[].concat(Uo(g),[S]),y+(S.skip?0:1)))},m=0,x=p.length;m<x;m++)v()}}var zae=2,ci=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},aO=function(e,r){if(!r.isShadow){var i=Nt(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var s=Math.round(Math.abs(i(o)));s?o.__photons=Uo(Array(s)).map(function(){return{}}):delete o.__photons})}},Cy=ig({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,aO(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ci},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ci},nodeColor:{default:"color",triggerUpdate:!1,onChange:ci},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ci},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ci},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ci},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ci},linkColor:{default:"color",triggerUpdate:!1,onChange:ci},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ci},linkWidth:{default:1,triggerUpdate:!1,onChange:ci},linkCurvature:{default:0,triggerUpdate:!1,onChange:ci},linkCanvasObject:{triggerUpdate:!1,onChange:ci},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ci},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ci},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ci},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ci},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:aO},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),o(),!e.isShadow&&s(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=Nt(e.nodeVisibility),c=Nt(e.nodeVal),u=Nt(e.nodeColor),d=Nt(e.nodeCanvasObjectMode),f=e.ctx,h=e.isShadow/e.globalScale,p=e.graphData.nodes.filter(l);f.save(),p.forEach(function(g){var y=d(g);if(e.nodeCanvasObject&&(y==="before"||y==="replace")&&(e.nodeCanvasObject(g,f,e.globalScale),y==="replace")){f.restore();return}var v=Math.sqrt(Math.max(0,c(g)||1))*e.nodeRelSize+h;f.beginPath(),f.arc(g.x,g.y,v,0,2*Math.PI,!1),f.fillStyle=u(g)||"rgba(31, 120, 180, 0.92)",f.fill(),e.nodeCanvasObject&&y==="after"&&e.nodeCanvasObject(g,e.ctx,e.globalScale)}),f.restore()}function o(){var l=Nt(e.linkVisibility),c=Nt(e.linkColor),u=Nt(e.linkWidth),d=Nt(e.linkLineDash),f=Nt(e.linkCurvature),h=Nt(e.linkCanvasObjectMode),p=e.ctx,g=e.isShadow*2,y=e.graphData.links.filter(l);y.forEach(C);var v=[],m=[],x=y;if(e.linkCanvasObject){var b=[],S=[];y.forEach(function(E){return({before:v,after:m,replace:b}[h(E)]||S).push(E)}),x=[].concat(Uo(v),m,S),v=v.concat(b)}p.save(),v.forEach(function(E){return e.linkCanvasObject(E,p,e.globalScale)}),p.restore();var w=LC(x,[c,u,d]);p.save(),Object.entries(w).forEach(function(E){var M=_p(E,2),T=M[0],R=M[1],P=!T||T==="undefined"?"rgba(0,0,0,0.15)":T;Object.entries(R).forEach(function(D){var L=_p(D,2),A=L[0],I=L[1],N=(A||1)/e.globalScale+g;Object.entries(I).forEach(function(F){var O=_p(F,2);O[0];var V=O[1],U=d(V[0]);p.beginPath(),V.forEach(function(k){var W=k.source,J=k.target;if(!(!W||!J||!W.hasOwnProperty("x")||!J.hasOwnProperty("x"))){p.moveTo(W.x,W.y);var z=k.__controlPoints;z?p[z.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,Uo(z).concat([J.x,J.y])):p.lineTo(J.x,J.y)}}),p.strokeStyle=P,p.lineWidth=N,p.setLineDash(U||[]),p.stroke()})})}),p.restore(),p.save(),m.forEach(function(E){return e.linkCanvasObject(E,p,e.globalScale)}),p.restore();function C(E){var M=f(E);if(!M){E.__controlPoints=null;return}var T=E.source,R=E.target;if(!(!T||!R||!T.hasOwnProperty("x")||!R.hasOwnProperty("x"))){var P=Math.sqrt(Math.pow(R.x-T.x,2)+Math.pow(R.y-T.y,2));if(P>0){var D=Math.atan2(R.y-T.y,R.x-T.x),L=P*M,A={x:(T.x+R.x)/2+L*Math.cos(D-Math.PI/2),y:(T.y+R.y)/2+L*Math.sin(D-Math.PI/2)};E.__controlPoints=[A.x,A.y]}else{var I=M*70;E.__controlPoints=[R.x,R.y-I,R.x+I,R.y]}}}}function s(){var l=1.6,c=.2,u=Nt(e.linkDirectionalArrowLength),d=Nt(e.linkDirectionalArrowRelPos),f=Nt(e.linkVisibility),h=Nt(e.linkDirectionalArrowColor||e.linkColor),p=Nt(e.nodeVal),g=e.ctx;g.save(),e.graphData.links.filter(f).forEach(function(y){var v=u(y);if(!(!v||v<0)){var m=y.source,x=y.target;if(!(!m||!x||!m.hasOwnProperty("x")||!x.hasOwnProperty("x"))){var b=Math.sqrt(Math.max(0,p(m)||1))*e.nodeRelSize,S=Math.sqrt(Math.max(0,p(x)||1))*e.nodeRelSize,w=Math.min(1,Math.max(0,d(y))),C=h(y)||"rgba(0,0,0,0.28)",E=v/l/2,M=y.__controlPoints&&iO(Hn,[m.x,m.y].concat(Uo(y.__controlPoints),[x.x,x.y])),T=M?function(N){return M.get(N)}:function(N){return{x:m.x+(x.x-m.x)*N||0,y:m.y+(x.y-m.y)*N||0}},R=M?M.length():Math.sqrt(Math.pow(x.x-m.x,2)+Math.pow(x.y-m.y,2)),P=b+v+(R-b-S-v)*w,D=T(P/R),L=T((P-v)/R),A=T((P-v*(1-c))/R),I=Math.atan2(D.y-L.y,D.x-L.x)-Math.PI/2;g.beginPath(),g.moveTo(D.x,D.y),g.lineTo(L.x+E*Math.cos(I),L.y+E*Math.sin(I)),g.lineTo(A.x,A.y),g.lineTo(L.x-E*Math.cos(I),L.y-E*Math.sin(I)),g.fillStyle=C,g.fill()}}}),g.restore()}function a(){var l=Nt(e.linkDirectionalParticles),c=Nt(e.linkDirectionalParticleSpeed),u=Nt(e.linkDirectionalParticleWidth),d=Nt(e.linkVisibility),f=Nt(e.linkDirectionalParticleColor||e.linkColor),h=e.ctx;h.save(),e.graphData.links.filter(d).forEach(function(p){var g=l(p);if(!(!p.hasOwnProperty("__photons")||!p.__photons.length)){var y=p.source,v=p.target;if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var m=c(p),x=p.__photons||[],b=Math.max(0,u(p)/2)/Math.sqrt(e.globalScale),S=f(p)||"rgba(0,0,0,0.28)";h.fillStyle=S;var w=p.__controlPoints?iO(Hn,[y.x,y.y].concat(Uo(p.__controlPoints),[v.x,v.y])):null,C=0,E=!1;x.forEach(function(M){var T=!!M.__singleHop;if(M.hasOwnProperty("__progressRatio")||(M.__progressRatio=T?0:C/g),!T&&C++,M.__progressRatio+=m,M.__progressRatio>=1)if(!T)M.__progressRatio=M.__progressRatio%1;else{E=!0;return}var R=M.__progressRatio,P=w?w.get(R):{x:y.x+(v.x-y.x)*R||0,y:y.y+(v.y-y.y)*R||0};h.beginPath(),h.arc(P.x,P.y,b,0,2*Math.PI,!1),h.fill()}),E&&(p.__photons=p.__photons.filter(function(M){return!M.__singleHop||M.__progressRatio<=1}))}}}),h.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Nz().force("link",Az()).force("charge",Pz()).force("center",Sz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&sO(e.graphData.nodes,Nt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&sO(e.graphData.links,Nt(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(h){h.source=h[e.linkSource],h.target=h[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(h){return h[e.nodeId]}).links(e.graphData.links);var o=e.dagMode&&$ae(e.graphData,function(h){return h[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),s=Math.max.apply(Math,Uo(Object.values(o||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(s||1)*zae*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(h){return delete h[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),u=function(p){return(o[p[e.nodeId]]-s/2)*a*(c?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(h){return h[d]=u(h)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?Oz(function(h){var p=o[h[e.nodeId]]||-1;return(e.dagMode==="radialin"?s-p:p)*a}).strength(function(h){return e.dagNodeFilter(h)?1:0}):null);for(var f=0;f<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);f++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Bz(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(s){return{default:i[s](),onChange:function(l,c){r.forEach(function(u){return c[u][s](l)})},triggerUpdate:!1}},linkMethod:function(s){return function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=[];return r.forEach(function(f){var h=a[f],p=h[s].apply(h,c);p!==h&&d.push(p)}),d.length?d[0]:this}}}}var kae=800,Vae=4,$z=Bz("forceGraph",Cy),Gae=Bz(["forceGraph","shadowGraph"],Cy),Hae=Object.assign.apply(Object,Uo(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return lm({},n,$z.linkProp(n))})).concat(Uo(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return lm({},n,Gae.linkProp(n))})))),jae=Object.assign.apply(Object,Uo(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return lm({},n,$z.linkMethod(n))})));function Qb(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(s){s.style.width="".concat(n.width,"px"),s.style.height="".concat(n.height,"px"),s.width=n.width*i,s.height=n.height*i,!e&&!r&&s.getContext("2d").scale(i,i)});var o=Ds(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/o,(n.height-r)/2/o),n.needsRedraw=!0}}function zz(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function lO(n,e,r){n.save(),zz(n),n.clearRect(0,0,e,r),n.restore()}var Wae=ig({props:Gu({width:{default:window.innerWidth,onChange:function(e,r){return Qb(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return Qb(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(o){return(o||[]).every(function(s){return!s.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(o){var s=o.type,a=o.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=r.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:s,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},Hae),aliases:{stopAnimation:"pauseAnimation"},methods:Gu({graph2ScreenCoords:function(e,r,i){var o=Ds(e.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(e,r,i){var o=Ds(e.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(e,r,i,o){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var s=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?e.tweenGroup.add(new Sy(a()).to(s,o).easing(Da.Quadratic.Out).onUpdate(l).start()):l(s),this}return a();function a(){var c=Ds(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var u=c.x,d=c.y;e.zoom.translateTo(e.zoom.__baseElem,u===void 0?a().x:u,d===void 0?a().y:d),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new Sy({k:o()}).to({k:r},i).easing(Da.Quadratic.Out).onUpdate(function(a){var l=a.k;return s(l)}).start()):s(r),this;return o();function o(){return Ds(e.canvas).k}function s(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,s);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,r),this.zoom(u,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=Nt(e.nodeVal),o=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},s=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:o(a)}});return s.length?{x:[AC(s,function(a){return a.x-a.r}),RC(s,function(a){return a.x+a.r})],y:[AC(s,function(a){return a.y-a.r}),RC(s,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},jae),stateInit:function(){return{lastSetZoom:1,zoom:Lie(),forceGraph:new Cy,shadowGraph:new Cy().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new ise,tweenGroup:new eM}},init:function(e,r){var i=this;e.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",e.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var s=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var h=null,p=window.devicePixelRatio,g=l.x>0&&l.y>0?a.getImageData(l.x*p,l.y*p,1,1):null;return g&&(h=r.colorTracker.lookup(g.data)),h};fs(r.canvas).call(jne().subject(function(){if(!r.enableNodeDrag)return null;var f=c();return f&&f.type==="Node"?f.d:null}).on("start",function(f){var h=f.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},f.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(f){var h=f.subject,p=h.__initialDragPos,g=f,y=Ds(r.canvas).k,v={x:p.x+(g.x-p.x)/y-h.x,y:p.y+(g.y-p.y)/y-h.y};["x","y"].forEach(function(m){return h["f".concat(m)]=h[m]=p[m]+(g[m]-p[m])/y}),r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,v)}).on("end",function(f){var h=f.subject,p=h.__initialDragPos,g={x:h.x-p.x,y:h.y-p.y};p.fx===void 0&&(h.fx=void 0),p.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,g))})),r.zoom(r.zoom.__baseElem=fs(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(f){return!f.button&&r.enableZoomPanInteraction&&(f.type!=="wheel"||Nt(r.enableZoomInteraction)(f))&&(f.type==="wheel"||Nt(r.enablePanInteraction)(f))}).on("zoom",function(f){var h=f.transform;[s,a].forEach(function(p){zz(p),p.translate(h.x,h.y),p.scale(h.k,h.k)}),r.onZoom&&r.onZoom(Gu(Gu({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(f){return r.onZoomEnd&&r.onZoomEnd(Gu(Gu({},f.transform),i.centerAt()))}),Qb(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Ds(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=Vae/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)});var u=document.createElement("div");u.classList.add("graph-tooltip"),o.appendChild(u),["pointermove","pointerdown"].forEach(function(f){return o.addEventListener(f,function(h){f==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType!=="touch"||h.movementX===void 0||[h.movementX,h.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var p=g(o);l.x=h.pageX-p.left,l.y=h.pageY-p.top,u.style.top="".concat(l.y,"px"),u.style.left="".concat(l.x,"px"),u.style.transform="translate(-".concat(l.x/r.width*100,"%, ").concat(r.height-l.y<100?"calc(-100% - 8px)":"21px",")");function g(y){var v=y.getBoundingClientRect(),m=window.pageXOffset||document.documentElement.scrollLeft,x=window.pageYOffset||document.documentElement.scrollTop;return{top:v.top+x,left:v.left+m}}},{passive:!0})}),o.addEventListener("pointerup",function(f){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[f,r.pointerDownEvent];requestAnimationFrame(function(){if(f.button===0)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"Click")];p&&p.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(f.button===2)if(r.hoverObj){var g=r["on".concat(r.hoverObj.type,"RightClick")];g&&g.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})},{passive:!0}),o.addEventListener("contextmenu",function(f){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(f.preventDefault(),!1)}),r.forceGraph(s),r.shadowGraph(a);var d=doe(function(){lO(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return Nt(r.linkWidth)(h)+r.linkHoverPrecision});var f=Ds(r.canvas);r.shadowGraph.globalScale(f.k).tickFrame()},kae);r.flushShadowCanvas=d.flush,(this._animationCycle=function f(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(w){return w.__photons&&w.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var p=r.isPointerDragging?null:c();if(p!==r.hoverObj){var g=r.hoverObj,y=g?g.type:null,v=p?p.type:null;if(y&&y!==v){var m=r["on".concat(y,"Hover")];m&&m(null,g.d)}if(v){var x=r["on".concat(v,"Hover")];x&&x(p.d,y===v?g.d:null)}var b=p&&Nt(r["".concat(p.type.toLowerCase(),"Label")])(p.d)||"";u.style.visibility=b?"visible":"hidden",u.innerHTML=b,r.canvas.classList[p&&r["on".concat(v,"Click")]||!p&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=p}h&&d()}if(h){lO(s,r.width,r.height);var S=Ds(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(s,S),r.forceGraph.globalScale(S).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(s,S)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(f)})()},update:function(e){}}),kz={exports:{}},qae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xae=qae,Kae=Xae;function Vz(){}function Gz(){}Gz.resetWarningCache=Vz;var Yae=function(){function n(i,o,s,a,l,c){if(c!==Kae){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Gz,resetWarningCache:Vz};return r.PropTypes=r,r};kz.exports=Yae();var Qae=kz.exports;const G=_u(Qae),Qx={width:G.number,height:G.number,graphData:G.shape({nodes:G.arrayOf(G.object).isRequired,links:G.arrayOf(G.object).isRequired}),backgroundColor:G.string,nodeRelSize:G.number,nodeId:G.string,nodeLabel:G.oneOfType([G.string,G.func]),nodeVal:G.oneOfType([G.number,G.string,G.func]),nodeVisibility:G.oneOfType([G.bool,G.string,G.func]),nodeColor:G.oneOfType([G.string,G.func]),nodeAutoColorBy:G.oneOfType([G.string,G.func]),onNodeHover:G.func,onNodeClick:G.func,linkSource:G.string,linkTarget:G.string,linkLabel:G.oneOfType([G.string,G.func]),linkVisibility:G.oneOfType([G.bool,G.string,G.func]),linkColor:G.oneOfType([G.string,G.func]),linkAutoColorBy:G.oneOfType([G.string,G.func]),linkWidth:G.oneOfType([G.number,G.string,G.func]),linkCurvature:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowLength:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowColor:G.oneOfType([G.string,G.func]),linkDirectionalArrowRelPos:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticles:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleSpeed:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleWidth:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleColor:G.oneOfType([G.string,G.func]),onLinkHover:G.func,onLinkClick:G.func,dagMode:G.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:G.number,dagNodeFilter:G.func,onDagError:G.func,d3AlphaMin:G.number,d3AlphaDecay:G.number,d3VelocityDecay:G.number,warmupTicks:G.number,cooldownTicks:G.number,cooldownTime:G.number,onEngineTick:G.func,onEngineStop:G.func,getGraphBbox:G.func},Hz={zoomToFit:G.func,onNodeRightClick:G.func,onNodeDrag:G.func,onNodeDragEnd:G.func,onLinkRightClick:G.func,linkHoverPrecision:G.number,onBackgroundClick:G.func,onBackgroundRightClick:G.func,enablePointerInteraction:G.bool,enableNodeDrag:G.bool},oM={showNavInfo:G.bool,nodeOpacity:G.number,nodeResolution:G.number,nodeThreeObject:G.oneOfType([G.object,G.string,G.func]),nodeThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkOpacity:G.number,linkResolution:G.number,linkCurveRotation:G.oneOfType([G.number,G.string,G.func]),linkMaterial:G.oneOfType([G.object,G.string,G.func]),linkThreeObject:G.oneOfType([G.object,G.string,G.func]),linkThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkPositionUpdate:G.func,linkDirectionalArrowResolution:G.number,linkDirectionalParticleResolution:G.number,forceEngine:G.oneOf(["d3","ngraph"]),ngraphPhysics:G.object,numDimensions:G.oneOf([1,2,3])},Zae=Object.assign({},Qx,Hz,{linkLineDash:G.oneOfType([G.arrayOf(G.number),G.string,G.func]),nodeCanvasObjectMode:G.oneOfType([G.string,G.func]),nodeCanvasObject:G.func,nodePointerAreaPaint:G.func,linkCanvasObjectMode:G.oneOfType([G.string,G.func]),linkCanvasObject:G.func,linkPointerAreaPaint:G.func,autoPauseRedraw:G.bool,minZoom:G.number,maxZoom:G.number,enableZoomInteraction:G.oneOfType([G.bool,G.func]),enablePanInteraction:G.oneOfType([G.bool,G.func]),onZoom:G.func,onZoomEnd:G.func,onRenderFramePre:G.func,onRenderFramePost:G.func});Object.assign({},Qx,Hz,oM,{enableNavigationControls:G.bool,controlType:G.oneOf(["trackball","orbit","fly"]),rendererConfig:G.object,extraRenderers:G.arrayOf(G.shape({render:G.func.isRequired}))});Object.assign({},Qx,oM,{nodeDesc:G.oneOfType([G.string,G.func]),linkDesc:G.oneOfType([G.string,G.func])});Object.assign({},Qx,oM,{markerAttrs:G.object,yOffset:G.number,glScale:G.number});const sM=k$(Wae,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});sM.displayName="ForceGraph2D";sM.propTypes=Zae;function Zb(n){return function(){return n}}function cO(n){return(n()-.5)*1e-6}function Jae(n){return n.index}function uO(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function ele(n){var e=Jae,r=f,i,o=Zb(30),s,a,l,c,u,d=1;n==null&&(n=[]);function f(v){return 1/Math.min(l[v.source.index],l[v.target.index])}function h(v){for(var m=0,x=n.length;m<d;++m)for(var b=0,S,w,C,E,M,T,R;b<x;++b)S=n[b],w=S.source,C=S.target,E=C.x+C.vx-w.x-w.vx||cO(u),M=C.y+C.vy-w.y-w.vy||cO(u),T=Math.sqrt(E*E+M*M),T=(T-s[b])/T*v*i[b],E*=T,M*=T,C.vx-=E*(R=c[b]),C.vy-=M*R,w.vx+=E*(R=1-R),w.vy+=M*R}function p(){if(a){var v,m=a.length,x=n.length,b=new Map(a.map((w,C)=>[e(w,C,a),w])),S;for(v=0,l=new Array(m);v<x;++v)S=n[v],S.index=v,typeof S.source!="object"&&(S.source=uO(b,S.source)),typeof S.target!="object"&&(S.target=uO(b,S.target)),l[S.source.index]=(l[S.source.index]||0)+1,l[S.target.index]=(l[S.target.index]||0)+1;for(v=0,c=new Array(x);v<x;++v)S=n[v],c[v]=l[S.source.index]/(l[S.source.index]+l[S.target.index]);i=new Array(x),g(),s=new Array(x),y()}}function g(){if(a)for(var v=0,m=n.length;v<m;++v)i[v]=+r(n[v],v,n)}function y(){if(a)for(var v=0,m=n.length;v<m;++v)s[v]=+o(n[v],v,n)}return h.initialize=function(v,m){a=v,u=m,p()},h.links=function(v){return arguments.length?(n=v,p(),h):n},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(d=+v,h):d},h.strength=function(v){return arguments.length?(r=typeof v=="function"?v:Zb(+v),g(),h):r},h.distance=function(v){return arguments.length?(o=typeof v=="function"?v:Zb(+v),y(),h):o},h}const tle=window.innerWidth<=600?600:window.innerWidth,nle=window.innerHeight<=600?600:window.innerHeight,rle=n=>(1-n)*Math.sqrt(Math.pow(tle/4,2)+Math.pow(nle/4,2))*.5,ile=(n,e)=>{const r=/(?:https?:\/\/)?(?:arxiv\.org\/abs\/)?(\d{4}\.\d{5})/,i=n.match(r);if(i)return{article_id:i[1],site:"arxiv",id_type:"arxiv_id",top_n:e};const o=/(?:https?:\/\/)?(?:doi\.org\/)?(10\.48550\/arXiv\.\d{4}\.\d{5})/,s=n.match(o);if(s)return{article_id:s[1],site:"arxiv",id_type:"arxiv_doi",top_n:e};const a=/^(SCOPUS_ID:\d{11})$/,l=n.match(a);if(l)return{article_id:l[1],site:"scopus",id_type:"scopus_id",top_n:e};const c=/^(10\.\d{4,9}\/[-._;()/:A-Z0-9]+)$/i,u=n.match(c);return u?{article_id:u[1],site:"scopus",id_type:"scopus_doi",top_n:e}:null},ole="#29727e",sle=30,ale="#cd3232",lle=80,jz=n=>{const e=_.useRef(),[r,i]=_.useState(0),s={nodes:[{id:0,name:n.original_article.title,color:ale,size:sle}],links:[]};return _.useEffect(()=>{e.current.d3Force("link",ele().distance(l=>l.distance))},[]),_.useEffect(()=>{const l=()=>{const c=window.innerWidth*lle/100;i(c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),{graphData:(()=>{const l=[],c=[];return n.similar_articles.forEach((u,d)=>{l.push({id:d+1,name:u.title,color:"#eed78c"}),c.push({source:d+1,target:0,distance:rle(u.similarity),color:ole,name:`Similarity: ${Number(u.similarity*100).toFixed(2)}%`})}),{nodes:[...s.nodes,...l],links:[...s.links,...c]}})(),forceGraphRef:e,forceGraphWidth:r}},cle=8,dO=3,ule=({articles:n,selectedId:e,selectCallback:r})=>{const{graphData:i,forceGraphRef:o,forceGraphWidth:s}=jz(n),a=(c,u)=>{u.beginPath(),u.fillStyle=c.id===e?"#1677ff":c.color,c.size?u.arc(c.x,c.y,15,0,2*Math.PI,!1):c.id===e?u.arc(c.x,c.y,10,0,2*Math.PI,!1):u.arc(c.x,c.y,5,0,2*Math.PI,!1),u.fill()},l=c=>{r(Number(c.id))};return Ut.jsx(sM,{width:s,graphData:i,ref:o,backgroundColor:"#000011",nodeRelSize:cle,linkWidth:dO,linkDirectionalParticles:1,linkDirectionalParticleSpeed:.005,linkDirectionalParticleColor:()=>"#b9b9b9",linkDirectionalParticleWidth:dO,nodeCanvasObject:a,onNodeClick:l,onLinkClick:c=>console.log(c),linkColor:c=>c.source.id==e?"#1677ff":c.color?c.color:"grey"})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const qf="171",ei={ROTATE:0,DOLLY:1,PAN:2},Na={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Wz=0,BC=1,qz=2,dle=0,aM=1,fle=2,ho=3,Cs=0,er=1,Ei=2,Ri=0,ko=1,du=2,hf=3,pf=4,lM=5,po=100,cM=101,uM=102,Xz=103,Kz=104,dM=200,fM=201,hM=202,pM=203,cm=204,um=205,mM=206,gM=207,vM=208,yM=209,xM=210,hle=211,ple=212,mle=213,gle=214,dm=0,fm=1,hm=2,ec=3,pm=4,mm=5,gm=6,vm=7,og=0,Yz=1,Qz=2,Qi=0,Zz=1,Jz=2,ek=3,tk=4,vle=5,nk=6,rk=7,_M=300,qo=301,Xo=302,tc=303,nc=304,fu=306,hu=1e3,$s=1001,pu=1002,qn=1003,Ey=1004,zs=1005,Ur=1006,kd=1007,Vi=1008,hi=1009,Zc=1010,Jc=1011,vs=1012,Xr=1013,rr=1014,hr=1015,Yr=1016,Zx=1017,Jx=1018,Ks=1020,e_=35902,bM=1021,sg=1022,ti=1023,SM=1024,wM=1025,Ws=1026,Ys=1027,ag=1028,Xf=1029,mu=1030,Kf=1031,yle=1032,Yf=1033,eu=33776,Hl=33777,jl=33778,Wl=33779,ym=35840,xm=35841,_m=35842,bm=35843,Sm=36196,mf=37492,gf=37496,vf=37808,yf=37809,xf=37810,_f=37811,bf=37812,Sf=37813,wf=37814,Cf=37815,Ef=37816,Tf=37817,Mf=37818,Rf=37819,Af=37820,Nf=37821,tu=36492,$C=36494,zC=36495,CM=36283,wm=36284,Cm=36285,Em=36286,xle=3200,_le=3201,qa=0,ik=1,mo="",Dt="srgb",Vo="srgb-linear",Ty="linear",Mn="srgb",ble=0,Rc=7680,Sle=7681,wle=7682,Cle=7683,Ele=34055,Tle=34056,Mle=5386,Rle=512,Ale=513,Nle=514,Ple=515,Ole=516,Ile=517,Dle=518,kC=519,EM=512,t_=513,TM=514,n_=515,MM=516,RM=517,AM=518,NM=519,My=35044,Cd=35048,fO="300 es",$o=2e3,gu=2001;class uc{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(r)===-1&&i[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const s=o.indexOf(r);s!==-1&&o.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const o=i.slice(0);for(let s=0,a=o.length;s<a;s++)o[s].call(this,e);e.target=null}}}const ui=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hO=1234567;const bp=Math.PI/180,Pf=180/Math.PI;function Fa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ui[n&255]+ui[n>>8&255]+ui[n>>16&255]+ui[n>>24&255]+"-"+ui[e&255]+ui[e>>8&255]+"-"+ui[e>>16&15|64]+ui[e>>24&255]+"-"+ui[r&63|128]+ui[r>>8&255]+"-"+ui[r>>16&255]+ui[r>>24&255]+ui[i&255]+ui[i>>8&255]+ui[i>>16&255]+ui[i>>24&255]).toLowerCase()}function Jt(n,e,r){return Math.max(e,Math.min(r,n))}function PM(n,e){return(n%e+e)%e}function Lle(n,e,r,i,o){return i+(n-e)*(o-i)/(r-e)}function Fle(n,e,r){return n!==e?(r-n)/(e-n):0}function Sp(n,e,r){return(1-r)*n+r*e}function Ule(n,e,r,i){return Sp(n,e,1-Math.exp(-r*i))}function Ble(n,e=1){return e-Math.abs(PM(n,e*2)-e)}function $le(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*(3-2*n))}function zle(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*n*(n*(n*6-15)+10))}function kle(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Vle(n,e){return n+Math.random()*(e-n)}function Gle(n){return n*(.5-Math.random())}function Hle(n){n!==void 0&&(hO=n);let e=hO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function jle(n){return n*bp}function Wle(n){return n*Pf}function qle(n){return(n&n-1)===0&&n!==0}function Xle(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Kle(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Yle(n,e,r,i,o){const s=Math.cos,a=Math.sin,l=s(r/2),c=a(r/2),u=s((e+i)/2),d=a((e+i)/2),f=s((e-i)/2),h=a((e-i)/2),p=s((i-e)/2),g=a((i-e)/2);switch(o){case"XYX":n.set(l*d,c*f,c*h,l*u);break;case"YZY":n.set(c*h,l*d,c*f,l*u);break;case"ZXZ":n.set(c*f,c*h,l*d,l*u);break;case"XZX":n.set(l*d,c*g,c*p,l*u);break;case"YXY":n.set(c*p,l*d,c*g,l*u);break;case"ZYZ":n.set(c*g,c*p,l*d,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function Ti(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Ry={DEG2RAD:bp,RAD2DEG:Pf,generateUUID:Fa,clamp:Jt,euclideanModulo:PM,mapLinear:Lle,inverseLerp:Fle,lerp:Sp,damp:Ule,pingpong:Ble,smoothstep:$le,smootherstep:zle,randInt:kle,randFloat:Vle,randFloatSpread:Gle,seededRandom:Hle,degToRad:jle,radToDeg:Wle,isPowerOfTwo:qle,ceilPowerOfTwo:Xle,floorPowerOfTwo:Kle,setQuaternionFromProperEuler:Yle,normalize:Zt,denormalize:Ti};class je{constructor(e=0,r=0){je.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,i=this.y,o=e.elements;return this.x=o[0]*r+o[3]*i+o[6],this.y=o[1]*r+o[4]*i+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y;return r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const i=Math.cos(r),o=Math.sin(r),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*o+e.x,this.y=s*o+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vt{constructor(e,r,i,o,s,a,l,c,u){Vt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,i,o,s,a,l,c,u)}set(e,r,i,o,s,a,l,c,u){const d=this.elements;return d[0]=e,d[1]=o,d[2]=l,d[3]=r,d[4]=s,d[5]=c,d[6]=i,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this}extractBasis(e,r,i){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,o=r.elements,s=this.elements,a=i[0],l=i[3],c=i[6],u=i[1],d=i[4],f=i[7],h=i[2],p=i[5],g=i[8],y=o[0],v=o[3],m=o[6],x=o[1],b=o[4],S=o[7],w=o[2],C=o[5],E=o[8];return s[0]=a*y+l*x+c*w,s[3]=a*v+l*b+c*C,s[6]=a*m+l*S+c*E,s[1]=u*y+d*x+f*w,s[4]=u*v+d*b+f*C,s[7]=u*m+d*S+f*E,s[2]=h*y+p*x+g*w,s[5]=h*v+p*b+g*C,s[8]=h*m+p*S+g*E,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return r*a*d-r*l*u-i*s*d+i*l*c+o*s*u-o*a*c}invert(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=d*a-l*u,h=l*c-d*s,p=u*s-a*c,g=r*f+i*h+o*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=f*y,e[1]=(o*u-d*i)*y,e[2]=(l*i-o*a)*y,e[3]=h*y,e[4]=(d*r-o*c)*y,e[5]=(o*s-l*r)*y,e[6]=p*y,e[7]=(i*c-u*r)*y,e[8]=(a*r-i*s)*y,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,i,o,s,a,l){const c=Math.cos(s),u=Math.sin(s);return this.set(i*c,i*u,-i*(c*a+u*l)+a+e,-o*u,o*c,-o*(-u*a+c*l)+l+r,0,0,1),this}scale(e,r){return this.premultiply(Jb.makeScale(e,r)),this}rotate(e){return this.premultiply(Jb.makeRotation(-e)),this}translate(e,r){return this.premultiply(Jb.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,i,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,i=e.elements;for(let o=0;o<9;o++)if(r[o]!==i[o])return!1;return!0}fromArray(e,r=0){for(let i=0;i<9;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Jb=new Vt;function ok(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Tm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function sk(){const n=Tm("canvas");return n.style.display="block",n}const pO={};function Lc(n){n in pO||(pO[n]=!0,console.warn(n))}function Qle(n,e,r){return new Promise(function(i,o){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:o();break;case n.TIMEOUT_EXPIRED:setTimeout(s,r);break;default:i()}}setTimeout(s,r)})}function Zle(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Jle(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const mO=new Vt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),gO=new Vt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function ece(){const n={enabled:!0,workingColorSpace:Vo,spaces:{},convert:function(o,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Mn&&(o.r=Ua(o.r),o.g=Ua(o.g),o.b=Ua(o.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(o.applyMatrix3(this.spaces[s].toXYZ),o.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Mn&&(o.r=Vd(o.r),o.g=Vd(o.g),o.b=Vd(o.b))),o},fromWorkingColorSpace:function(o,s){return this.convert(o,this.workingColorSpace,s)},toWorkingColorSpace:function(o,s){return this.convert(o,s,this.workingColorSpace)},getPrimaries:function(o){return this.spaces[o].primaries},getTransfer:function(o){return o===mo?Ty:this.spaces[o].transfer},getLuminanceCoefficients:function(o,s=this.workingColorSpace){return o.fromArray(this.spaces[s].luminanceCoefficients)},define:function(o){Object.assign(this.spaces,o)},_getMatrix:function(o,s,a){return o.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(o){return this.spaces[o].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(o=this.workingColorSpace){return this.spaces[o].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Vo]:{primaries:e,whitePoint:i,transfer:Ty,toXYZ:mO,fromXYZ:gO,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Dt},outputColorSpaceConfig:{drawingBufferColorSpace:Dt}},[Dt]:{primaries:e,whitePoint:i,transfer:Mn,toXYZ:mO,fromXYZ:gO,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Dt}}}),n}const rn=ece();function Ua(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Vd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Hu;class tce{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Hu===void 0&&(Hu=Tm("canvas")),Hu.width=e.width,Hu.height=e.height;const i=Hu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Hu}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=Tm("canvas");r.width=e.width,r.height=e.height;const i=r.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0;a<s.length;a++)s[a]=Ua(s[a]/255)*255;return i.putImageData(o,0,0),r}else if(e.data){const r=e.data.slice(0);for(let i=0;i<r.length;i++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[i]=Math.floor(Ua(r[i]/255)*255):r[i]=Ua(r[i]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let nce=0;class ak{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nce++}),this.uuid=Fa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let s;if(Array.isArray(o)){s=[];for(let a=0,l=o.length;a<l;a++)o[a].isDataTexture?s.push(eS(o[a].image)):s.push(eS(o[a]))}else s=eS(o);i.url=s}return r||(e.images[this.uuid]=i),i}}function eS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?tce.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rce=0;class $r extends uc{constructor(e=$r.DEFAULT_IMAGE,r=$r.DEFAULT_MAPPING,i=$s,o=$s,s=Ur,a=Vi,l=ti,c=hi,u=$r.DEFAULT_ANISOTROPY,d=mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rce++}),this.uuid=Fa(),this.name="",this.source=new ak(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=i,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),r||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_M)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hu:e.x=e.x-Math.floor(e.x);break;case $s:e.x=e.x<0?0:1;break;case pu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hu:e.y=e.y-Math.floor(e.y);break;case $s:e.y=e.y<0?0:1;break;case pu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}$r.DEFAULT_IMAGE=null;$r.DEFAULT_MAPPING=_M;$r.DEFAULT_ANISOTROPY=1;class qt{constructor(e=0,r=0,i=0,o=1){qt.prototype.isVector4=!0,this.x=e,this.y=r,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,i,o){return this.x=e,this.y=r,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,i=this.y,o=this.z,s=this.w,a=e.elements;return this.x=a[0]*r+a[4]*i+a[8]*o+a[12]*s,this.y=a[1]*r+a[5]*i+a[9]*o+a[13]*s,this.z=a[2]*r+a[6]*i+a[10]*o+a[14]*s,this.w=a[3]*r+a[7]*i+a[11]*o+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,i,o,s;const c=e.elements,u=c[0],d=c[4],f=c[8],h=c[1],p=c[5],g=c[9],y=c[2],v=c[6],m=c[10];if(Math.abs(d-h)<.01&&Math.abs(f-y)<.01&&Math.abs(g-v)<.01){if(Math.abs(d+h)<.1&&Math.abs(f+y)<.1&&Math.abs(g+v)<.1&&Math.abs(u+p+m-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const b=(u+1)/2,S=(p+1)/2,w=(m+1)/2,C=(d+h)/4,E=(f+y)/4,M=(g+v)/4;return b>S&&b>w?b<.01?(i=0,o=.707106781,s=.707106781):(i=Math.sqrt(b),o=C/i,s=E/i):S>w?S<.01?(i=.707106781,o=0,s=.707106781):(o=Math.sqrt(S),i=C/o,s=M/o):w<.01?(i=.707106781,o=.707106781,s=0):(s=Math.sqrt(w),i=E/s,o=M/s),this.set(i,o,s,r),this}let x=Math.sqrt((v-g)*(v-g)+(f-y)*(f-y)+(h-d)*(h-d));return Math.abs(x)<.001&&(x=1),this.x=(v-g)/x,this.y=(f-y)/x,this.z=(h-d)/x,this.w=Math.acos((u+p+m-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this.z=Jt(this.z,e.z,r.z),this.w=Jt(this.w,e.w,r.w),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this.z=Jt(this.z,e,r),this.w=Jt(this.w,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this.w=e.w+(r.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qf extends uc{constructor(e=1,r=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new qt(0,0,e,r),this.scissorTest=!1,this.viewport=new qt(0,0,e,r);const o={width:e,height:r,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ur,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new $r(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,r,i=1){if(this.width!==e||this.height!==r||this.depth!==i){this.width=e,this.height=r,this.depth=i;for(let o=0,s=this.textures.length;o<s;o++)this.textures[o].image.width=e,this.textures[o].image.height=r,this.textures[o].image.depth=i;this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,o=e.textures.length;i<o;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new ak(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ss extends Qf{constructor(e=1,r=1,i={}){super(e,r,i),this.isWebGLRenderTarget=!0}}class OM extends $r{constructor(e=null,r=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:i,depth:o},this.magFilter=qn,this.minFilter=qn,this.wrapR=$s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ice extends $r{constructor(e=null,r=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:i,depth:o},this.magFilter=qn,this.minFilter=qn,this.wrapR=$s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qs{constructor(e=0,r=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=i,this._w=o}static slerpFlat(e,r,i,o,s,a,l){let c=i[o+0],u=i[o+1],d=i[o+2],f=i[o+3];const h=s[a+0],p=s[a+1],g=s[a+2],y=s[a+3];if(l===0){e[r+0]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f;return}if(l===1){e[r+0]=h,e[r+1]=p,e[r+2]=g,e[r+3]=y;return}if(f!==y||c!==h||u!==p||d!==g){let v=1-l;const m=c*h+u*p+d*g+f*y,x=m>=0?1:-1,b=1-m*m;if(b>Number.EPSILON){const w=Math.sqrt(b),C=Math.atan2(w,m*x);v=Math.sin(v*C)/w,l=Math.sin(l*C)/w}const S=l*x;if(c=c*v+h*S,u=u*v+p*S,d=d*v+g*S,f=f*v+y*S,v===1-l){const w=1/Math.sqrt(c*c+u*u+d*d+f*f);c*=w,u*=w,d*=w,f*=w}}e[r]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f}static multiplyQuaternionsFlat(e,r,i,o,s,a){const l=i[o],c=i[o+1],u=i[o+2],d=i[o+3],f=s[a],h=s[a+1],p=s[a+2],g=s[a+3];return e[r]=l*g+d*f+c*p-u*h,e[r+1]=c*g+d*h+u*f-l*p,e[r+2]=u*g+d*p+l*h-c*f,e[r+3]=d*g-l*f-c*h-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,i,o){return this._x=e,this._y=r,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const i=e._x,o=e._y,s=e._z,a=e._order,l=Math.cos,c=Math.sin,u=l(i/2),d=l(o/2),f=l(s/2),h=c(i/2),p=c(o/2),g=c(s/2);switch(a){case"XYZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"YXZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"ZXY":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"ZYX":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"YZX":this._x=h*d*f+u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f-h*p*g;break;case"XZY":this._x=h*d*f-u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const i=r/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],d=r[6],f=r[10],h=i+l+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(d-c)*p,this._y=(s-u)*p,this._z=(a-o)*p}else if(i>l&&i>f){const p=2*Math.sqrt(1+i-l-f);this._w=(d-c)/p,this._x=.25*p,this._y=(o+a)/p,this._z=(s+u)/p}else if(l>f){const p=2*Math.sqrt(1+l-i-f);this._w=(s-u)/p,this._x=(o+a)/p,this._y=.25*p,this._z=(c+d)/p}else{const p=2*Math.sqrt(1+f-i-l);this._w=(a-o)/p,this._x=(s+u)/p,this._y=(c+d)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let i=e.dot(r)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jt(this.dot(e),-1,1)))}rotateTowards(e,r){const i=this.angleTo(e);if(i===0)return this;const o=Math.min(1,r/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const i=e._x,o=e._y,s=e._z,a=e._w,l=r._x,c=r._y,u=r._z,d=r._w;return this._x=i*d+a*l+o*u-s*c,this._y=o*d+a*c+s*l-i*u,this._z=s*d+a*u+i*c-o*l,this._w=a*d-i*l-o*c-s*u,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const i=this._x,o=this._y,s=this._z,a=this._w;let l=a*e._w+i*e._x+o*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=o,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-r;return this._w=p*a+r*this._w,this._x=p*i+r*this._x,this._y=p*o+r*this._y,this._z=p*s+r*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,l),f=Math.sin((1-r)*d)/u,h=Math.sin(r*d)/u;return this._w=a*f+this._w*h,this._x=i*f+this._x*h,this._y=o*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,r,i){return this.copy(e).slerp(r,i)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),i=Math.random(),o=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(o*Math.sin(e),o*Math.cos(e),s*Math.sin(r),s*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,r=0,i=0){Y.prototype.isVector3=!0,this.x=e,this.y=r,this.z=i}set(e,r,i){return i===void 0&&(i=this.z),this.x=e,this.y=r,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(vO.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(vO.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,i=this.y,o=this.z,s=e.elements;return this.x=s[0]*r+s[3]*i+s[6]*o,this.y=s[1]*r+s[4]*i+s[7]*o,this.z=s[2]*r+s[5]*i+s[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,i=this.y,o=this.z,s=e.elements,a=1/(s[3]*r+s[7]*i+s[11]*o+s[15]);return this.x=(s[0]*r+s[4]*i+s[8]*o+s[12])*a,this.y=(s[1]*r+s[5]*i+s[9]*o+s[13])*a,this.z=(s[2]*r+s[6]*i+s[10]*o+s[14])*a,this}applyQuaternion(e){const r=this.x,i=this.y,o=this.z,s=e.x,a=e.y,l=e.z,c=e.w,u=2*(a*o-l*i),d=2*(l*r-s*o),f=2*(s*i-a*r);return this.x=r+c*u+a*f-l*d,this.y=i+c*d+l*u-s*f,this.z=o+c*f+s*d-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,i=this.y,o=this.z,s=e.elements;return this.x=s[0]*r+s[4]*i+s[8]*o,this.y=s[1]*r+s[5]*i+s[9]*o,this.z=s[2]*r+s[6]*i+s[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this.z=Jt(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this.z=Jt(this.z,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const i=e.x,o=e.y,s=e.z,a=r.x,l=r.y,c=r.z;return this.x=o*c-s*l,this.y=s*a-i*c,this.z=i*l-o*a,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const i=e.dot(this)/r;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return tS.copy(this).projectOnVector(e),this.sub(tS)}reflect(e){return this.sub(tS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return r*r+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,i){const o=Math.sin(r)*e;return this.x=o*Math.sin(i),this.y=Math.cos(r)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,i){return this.x=e*Math.sin(r),this.y=i,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=i,this.z=o,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,i=Math.sqrt(1-r*r);return this.x=i*Math.cos(e),this.y=r,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tS=new Y,vO=new Qs;class Tu{constructor(e=new Y(1/0,1/0,1/0),r=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r+=3)this.expandByPoint(Jo.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,i=e.count;r<i;r++)this.expandByPoint(Jo.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const i=Jo.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(r===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,Jo):Jo.fromBufferAttribute(s,a),Jo.applyMatrix4(e.matrixWorld),this.expandByPoint(Jo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),nv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),nv.copy(i.boundingBox)),nv.applyMatrix4(e.matrixWorld),this.union(nv)}const o=e.children;for(let s=0,a=o.length;s<a;s++)this.expandByObject(o[s],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Jo),Jo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,i;return e.normal.x>0?(r=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),r<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mh),rv.subVectors(this.max,Mh),ju.subVectors(e.a,Mh),Wu.subVectors(e.b,Mh),qu.subVectors(e.c,Mh),ul.subVectors(Wu,ju),dl.subVectors(qu,Wu),xc.subVectors(ju,qu);let r=[0,-ul.z,ul.y,0,-dl.z,dl.y,0,-xc.z,xc.y,ul.z,0,-ul.x,dl.z,0,-dl.x,xc.z,0,-xc.x,-ul.y,ul.x,0,-dl.y,dl.x,0,-xc.y,xc.x,0];return!nS(r,ju,Wu,qu,rv)||(r=[1,0,0,0,1,0,0,0,1],!nS(r,ju,Wu,qu,rv))?!1:(iv.crossVectors(ul,dl),r=[iv.x,iv.y,iv.z],nS(r,ju,Wu,qu,rv))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Jo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Jo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ua[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ua[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ua[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ua[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ua[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ua[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ua[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ua[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ua),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ua=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Jo=new Y,nv=new Tu,ju=new Y,Wu=new Y,qu=new Y,ul=new Y,dl=new Y,xc=new Y,Mh=new Y,rv=new Y,iv=new Y,_c=new Y;function nS(n,e,r,i,o){for(let s=0,a=n.length-3;s<=a;s+=3){_c.fromArray(n,s);const l=o.x*Math.abs(_c.x)+o.y*Math.abs(_c.y)+o.z*Math.abs(_c.z),c=e.dot(_c),u=r.dot(_c),d=i.dot(_c);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>l)return!1}return!0}const oce=new Tu,Rh=new Y,rS=new Y;class r_{constructor(e=new Y,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const i=this.center;r!==void 0?i.copy(r):oce.setFromPoints(e).getCenter(i);let o=0;for(let s=0,a=e.length;s<a;s++)o=Math.max(o,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const i=this.center.distanceToSquared(e);return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rh.subVectors(e,this.center);const r=Rh.lengthSq();if(r>this.radius*this.radius){const i=Math.sqrt(r),o=(i-this.radius)*.5;this.center.addScaledVector(Rh,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(rS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rh.copy(e.center).add(rS)),this.expandByPoint(Rh.copy(e.center).sub(rS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const da=new Y,iS=new Y,ov=new Y,fl=new Y,oS=new Y,sv=new Y,sS=new Y;class i_{constructor(e=new Y,r=new Y(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,da)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=da.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(da.copy(this.origin).addScaledVector(this.direction,r),da.distanceToSquared(e))}distanceSqToSegment(e,r,i,o){iS.copy(e).add(r).multiplyScalar(.5),ov.copy(r).sub(e).normalize(),fl.copy(this.origin).sub(iS);const s=e.distanceTo(r)*.5,a=-this.direction.dot(ov),l=fl.dot(this.direction),c=-fl.dot(ov),u=fl.lengthSq(),d=Math.abs(1-a*a);let f,h,p,g;if(d>0)if(f=a*c-l,h=a*l-c,g=s*d,f>=0)if(h>=-g)if(h<=g){const y=1/d;f*=y,h*=y,p=f*(f+a*h+2*l)+h*(a*f+h+2*c)+u}else h=s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;else h=-s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;else h<=-g?(f=Math.max(0,-(-a*s+l)),h=f>0?-s:Math.min(Math.max(-s,-c),s),p=-f*f+h*(h+2*c)+u):h<=g?(f=0,h=Math.min(Math.max(-s,-c),s),p=h*(h+2*c)+u):(f=Math.max(0,-(a*s+l)),h=f>0?s:Math.min(Math.max(-s,-c),s),p=-f*f+h*(h+2*c)+u);else h=a>0?-s:s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),o&&o.copy(iS).addScaledVector(ov,h),p}intersectSphere(e,r){da.subVectors(e.center,this.origin);const i=da.dot(this.direction),o=da.dot(da)-i*i,s=e.radius*e.radius;if(o>s)return null;const a=Math.sqrt(s-o),l=i-a,c=i+a;return c<0?null:l<0?this.at(c,r):this.at(l,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/r;return i>=0?i:null}intersectPlane(e,r){const i=this.distanceToPlane(e);return i===null?null:this.at(i,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let i,o,s,a,l,c;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(i=(e.min.x-h.x)*u,o=(e.max.x-h.x)*u):(i=(e.max.x-h.x)*u,o=(e.min.x-h.x)*u),d>=0?(s=(e.min.y-h.y)*d,a=(e.max.y-h.y)*d):(s=(e.max.y-h.y)*d,a=(e.min.y-h.y)*d),i>a||s>o||((s>i||isNaN(i))&&(i=s),(a<o||isNaN(o))&&(o=a),f>=0?(l=(e.min.z-h.z)*f,c=(e.max.z-h.z)*f):(l=(e.max.z-h.z)*f,c=(e.min.z-h.z)*f),i>c||l>o)||((l>i||i!==i)&&(i=l),(c<o||o!==o)&&(o=c),o<0)?null:this.at(i>=0?i:o,r)}intersectsBox(e){return this.intersectBox(e,da)!==null}intersectTriangle(e,r,i,o,s){oS.subVectors(r,e),sv.subVectors(i,e),sS.crossVectors(oS,sv);let a=this.direction.dot(sS),l;if(a>0){if(o)return null;l=1}else if(a<0)l=-1,a=-a;else return null;fl.subVectors(this.origin,e);const c=l*this.direction.dot(sv.crossVectors(fl,sv));if(c<0)return null;const u=l*this.direction.dot(oS.cross(fl));if(u<0||c+u>a)return null;const d=-l*fl.dot(sS);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class fn{constructor(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v){fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v)}set(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v){const m=this.elements;return m[0]=e,m[4]=r,m[8]=i,m[12]=o,m[1]=s,m[5]=a,m[9]=l,m[13]=c,m[2]=u,m[6]=d,m[10]=f,m[14]=h,m[3]=p,m[7]=g,m[11]=y,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new fn().fromArray(this.elements)}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this}copyPosition(e){const r=this.elements,i=e.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,i){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,r,i){return this.set(e.x,r.x,i.x,0,e.y,r.y,i.y,0,e.z,r.z,i.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,i=e.elements,o=1/Xu.setFromMatrixColumn(e,0).length(),s=1/Xu.setFromMatrixColumn(e,1).length(),a=1/Xu.setFromMatrixColumn(e,2).length();return r[0]=i[0]*o,r[1]=i[1]*o,r[2]=i[2]*o,r[3]=0,r[4]=i[4]*s,r[5]=i[5]*s,r[6]=i[6]*s,r[7]=0,r[8]=i[8]*a,r[9]=i[9]*a,r[10]=i[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,i=e.x,o=e.y,s=e.z,a=Math.cos(i),l=Math.sin(i),c=Math.cos(o),u=Math.sin(o),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=a*d,p=a*f,g=l*d,y=l*f;r[0]=c*d,r[4]=-c*f,r[8]=u,r[1]=p+g*u,r[5]=h-y*u,r[9]=-l*c,r[2]=y-h*u,r[6]=g+p*u,r[10]=a*c}else if(e.order==="YXZ"){const h=c*d,p=c*f,g=u*d,y=u*f;r[0]=h+y*l,r[4]=g*l-p,r[8]=a*u,r[1]=a*f,r[5]=a*d,r[9]=-l,r[2]=p*l-g,r[6]=y+h*l,r[10]=a*c}else if(e.order==="ZXY"){const h=c*d,p=c*f,g=u*d,y=u*f;r[0]=h-y*l,r[4]=-a*f,r[8]=g+p*l,r[1]=p+g*l,r[5]=a*d,r[9]=y-h*l,r[2]=-a*u,r[6]=l,r[10]=a*c}else if(e.order==="ZYX"){const h=a*d,p=a*f,g=l*d,y=l*f;r[0]=c*d,r[4]=g*u-p,r[8]=h*u+y,r[1]=c*f,r[5]=y*u+h,r[9]=p*u-g,r[2]=-u,r[6]=l*c,r[10]=a*c}else if(e.order==="YZX"){const h=a*c,p=a*u,g=l*c,y=l*u;r[0]=c*d,r[4]=y-h*f,r[8]=g*f+p,r[1]=f,r[5]=a*d,r[9]=-l*d,r[2]=-u*d,r[6]=p*f+g,r[10]=h-y*f}else if(e.order==="XZY"){const h=a*c,p=a*u,g=l*c,y=l*u;r[0]=c*d,r[4]=-f,r[8]=u*d,r[1]=h*f+y,r[5]=a*d,r[9]=p*f-g,r[2]=g*f-p,r[6]=l*d,r[10]=y*f+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sce,e,ace)}lookAt(e,r,i){const o=this.elements;return oo.subVectors(e,r),oo.lengthSq()===0&&(oo.z=1),oo.normalize(),hl.crossVectors(i,oo),hl.lengthSq()===0&&(Math.abs(i.z)===1?oo.x+=1e-4:oo.z+=1e-4,oo.normalize(),hl.crossVectors(i,oo)),hl.normalize(),av.crossVectors(oo,hl),o[0]=hl.x,o[4]=av.x,o[8]=oo.x,o[1]=hl.y,o[5]=av.y,o[9]=oo.y,o[2]=hl.z,o[6]=av.z,o[10]=oo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,o=r.elements,s=this.elements,a=i[0],l=i[4],c=i[8],u=i[12],d=i[1],f=i[5],h=i[9],p=i[13],g=i[2],y=i[6],v=i[10],m=i[14],x=i[3],b=i[7],S=i[11],w=i[15],C=o[0],E=o[4],M=o[8],T=o[12],R=o[1],P=o[5],D=o[9],L=o[13],A=o[2],I=o[6],N=o[10],F=o[14],O=o[3],V=o[7],U=o[11],k=o[15];return s[0]=a*C+l*R+c*A+u*O,s[4]=a*E+l*P+c*I+u*V,s[8]=a*M+l*D+c*N+u*U,s[12]=a*T+l*L+c*F+u*k,s[1]=d*C+f*R+h*A+p*O,s[5]=d*E+f*P+h*I+p*V,s[9]=d*M+f*D+h*N+p*U,s[13]=d*T+f*L+h*F+p*k,s[2]=g*C+y*R+v*A+m*O,s[6]=g*E+y*P+v*I+m*V,s[10]=g*M+y*D+v*N+m*U,s[14]=g*T+y*L+v*F+m*k,s[3]=x*C+b*R+S*A+w*O,s[7]=x*E+b*P+S*I+w*V,s[11]=x*M+b*D+S*N+w*U,s[15]=x*T+b*L+S*F+w*k,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[4],o=e[8],s=e[12],a=e[1],l=e[5],c=e[9],u=e[13],d=e[2],f=e[6],h=e[10],p=e[14],g=e[3],y=e[7],v=e[11],m=e[15];return g*(+s*c*f-o*u*f-s*l*h+i*u*h+o*l*p-i*c*p)+y*(+r*c*p-r*u*h+s*a*h-o*a*p+o*u*d-s*c*d)+v*(+r*u*f-r*l*p-s*a*f+i*a*p+s*l*d-i*u*d)+m*(-o*l*d-r*c*f+r*l*h+o*a*f-i*a*h+i*c*d)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,i){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=r,o[14]=i),this}invert(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],g=e[12],y=e[13],v=e[14],m=e[15],x=f*v*u-y*h*u+y*c*p-l*v*p-f*c*m+l*h*m,b=g*h*u-d*v*u-g*c*p+a*v*p+d*c*m-a*h*m,S=d*y*u-g*f*u+g*l*p-a*y*p-d*l*m+a*f*m,w=g*f*c-d*y*c-g*l*h+a*y*h+d*l*v-a*f*v,C=r*x+i*b+o*S+s*w;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/C;return e[0]=x*E,e[1]=(y*h*s-f*v*s-y*o*p+i*v*p+f*o*m-i*h*m)*E,e[2]=(l*v*s-y*c*s+y*o*u-i*v*u-l*o*m+i*c*m)*E,e[3]=(f*c*s-l*h*s-f*o*u+i*h*u+l*o*p-i*c*p)*E,e[4]=b*E,e[5]=(d*v*s-g*h*s+g*o*p-r*v*p-d*o*m+r*h*m)*E,e[6]=(g*c*s-a*v*s-g*o*u+r*v*u+a*o*m-r*c*m)*E,e[7]=(a*h*s-d*c*s+d*o*u-r*h*u-a*o*p+r*c*p)*E,e[8]=S*E,e[9]=(g*f*s-d*y*s-g*i*p+r*y*p+d*i*m-r*f*m)*E,e[10]=(a*y*s-g*l*s+g*i*u-r*y*u-a*i*m+r*l*m)*E,e[11]=(d*l*s-a*f*s-d*i*u+r*f*u+a*i*p-r*l*p)*E,e[12]=w*E,e[13]=(d*y*o-g*f*o+g*i*h-r*y*h-d*i*v+r*f*v)*E,e[14]=(g*l*o-a*y*o-g*i*c+r*y*c+a*i*v-r*l*v)*E,e[15]=(a*f*o-d*l*o+d*i*c-r*f*c-a*i*h+r*l*h)*E,this}scale(e){const r=this.elements,i=e.x,o=e.y,s=e.z;return r[0]*=i,r[4]*=o,r[8]*=s,r[1]*=i,r[5]*=o,r[9]*=s,r[2]*=i,r[6]*=o,r[10]*=s,r[3]*=i,r[7]*=o,r[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,i,o))}makeTranslation(e,r,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,i,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const i=Math.cos(r),o=Math.sin(r),s=1-i,a=e.x,l=e.y,c=e.z,u=s*a,d=s*l;return this.set(u*a+i,u*l-o*c,u*c+o*l,0,u*l+o*c,d*l+i,d*c-o*a,0,u*c-o*l,d*c+o*a,s*c*c+i,0,0,0,0,1),this}makeScale(e,r,i){return this.set(e,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,r,i,o,s,a){return this.set(1,i,s,0,e,1,a,0,r,o,1,0,0,0,0,1),this}compose(e,r,i){const o=this.elements,s=r._x,a=r._y,l=r._z,c=r._w,u=s+s,d=a+a,f=l+l,h=s*u,p=s*d,g=s*f,y=a*d,v=a*f,m=l*f,x=c*u,b=c*d,S=c*f,w=i.x,C=i.y,E=i.z;return o[0]=(1-(y+m))*w,o[1]=(p+S)*w,o[2]=(g-b)*w,o[3]=0,o[4]=(p-S)*C,o[5]=(1-(h+m))*C,o[6]=(v+x)*C,o[7]=0,o[8]=(g+b)*E,o[9]=(v-x)*E,o[10]=(1-(h+y))*E,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,r,i){const o=this.elements;let s=Xu.set(o[0],o[1],o[2]).length();const a=Xu.set(o[4],o[5],o[6]).length(),l=Xu.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),e.x=o[12],e.y=o[13],e.z=o[14],es.copy(this);const u=1/s,d=1/a,f=1/l;return es.elements[0]*=u,es.elements[1]*=u,es.elements[2]*=u,es.elements[4]*=d,es.elements[5]*=d,es.elements[6]*=d,es.elements[8]*=f,es.elements[9]*=f,es.elements[10]*=f,r.setFromRotationMatrix(es),i.x=s,i.y=a,i.z=l,this}makePerspective(e,r,i,o,s,a,l=$o){const c=this.elements,u=2*s/(r-e),d=2*s/(i-o),f=(r+e)/(r-e),h=(i+o)/(i-o);let p,g;if(l===$o)p=-(a+s)/(a-s),g=-2*a*s/(a-s);else if(l===gu)p=-a/(a-s),g=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,r,i,o,s,a,l=$o){const c=this.elements,u=1/(r-e),d=1/(i-o),f=1/(a-s),h=(r+e)*u,p=(i+o)*d;let g,y;if(l===$o)g=(a+s)*f,y=-2*f;else if(l===gu)g=s*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=y,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const r=this.elements,i=e.elements;for(let o=0;o<16;o++)if(r[o]!==i[o])return!1;return!0}fromArray(e,r=0){for(let i=0;i<16;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e[r+9]=i[9],e[r+10]=i[10],e[r+11]=i[11],e[r+12]=i[12],e[r+13]=i[13],e[r+14]=i[14],e[r+15]=i[15],e}}const Xu=new Y,es=new fn,sce=new Y(0,0,0),ace=new Y(1,1,1),hl=new Y,av=new Y,oo=new Y,yO=new fn,xO=new Qs;class bo{constructor(e=0,r=0,i=0,o=bo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=i,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,i,o=this._order){return this._x=e,this._y=r,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,i=!0){const o=e.elements,s=o[0],a=o[4],l=o[8],c=o[1],u=o[5],d=o[9],f=o[2],h=o[6],p=o[10];switch(r){case"XYZ":this._y=Math.asin(Jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Jt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Jt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Jt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Jt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,i){return yO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yO,r,i)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return xO.setFromEuler(this),this.setFromQuaternion(xO,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bo.DEFAULT_ORDER="XYZ";class IM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let lce=0;const _O=new Y,Ku=new Qs,fa=new fn,lv=new Y,Ah=new Y,cce=new Y,uce=new Qs,bO=new Y(1,0,0),SO=new Y(0,1,0),wO=new Y(0,0,1),CO={type:"added"},dce={type:"removed"},Yu={type:"childadded",child:null},aS={type:"childremoved",child:null};class Cr extends uc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lce++}),this.uuid=Fa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cr.DEFAULT_UP.clone();const e=new Y,r=new bo,i=new Qs,o=new Y(1,1,1);function s(){i.setFromEuler(r,!1)}function a(){r.setFromQuaternion(i,void 0,!1)}r._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new fn},normalMatrix:{value:new Vt}}),this.matrix=new fn,this.matrixWorld=new fn,this.matrixAutoUpdate=Cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new IM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return Ku.setFromAxisAngle(e,r),this.quaternion.multiply(Ku),this}rotateOnWorldAxis(e,r){return Ku.setFromAxisAngle(e,r),this.quaternion.premultiply(Ku),this}rotateX(e){return this.rotateOnAxis(bO,e)}rotateY(e){return this.rotateOnAxis(SO,e)}rotateZ(e){return this.rotateOnAxis(wO,e)}translateOnAxis(e,r){return _O.copy(e).applyQuaternion(this.quaternion),this.position.add(_O.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(bO,e)}translateY(e){return this.translateOnAxis(SO,e)}translateZ(e){return this.translateOnAxis(wO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(fa.copy(this.matrixWorld).invert())}lookAt(e,r,i){e.isVector3?lv.copy(e):lv.set(e,r,i);const o=this.parent;this.updateWorldMatrix(!0,!1),Ah.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fa.lookAt(Ah,lv,this.up):fa.lookAt(lv,Ah,this.up),this.quaternion.setFromRotationMatrix(fa),o&&(fa.extractRotation(o.matrixWorld),Ku.setFromRotationMatrix(fa),this.quaternion.premultiply(Ku.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(CO),Yu.child=e,this.dispatchEvent(Yu),Yu.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(dce),aS.child=e,this.dispatchEvent(aS),aS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(fa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(CO),Yu.child=e,this.dispatchEvent(Yu),Yu.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let i=0,o=this.children.length;i<o;i++){const a=this.children[i].getObjectByProperty(e,r);if(a!==void 0)return a}}getObjectsByProperty(e,r,i=[]){this[e]===r&&i.push(this);const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,r,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ah,e,cce),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ah,uce,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(e)}updateWorldMatrix(e,r){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const f=c[u];s(e.shapes,f)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(e.materials,this.material[c]));o.material=l}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];o.animations.push(s(e.animations,c))}}if(r){const l=a(e.geometries),c=a(e.materials),u=a(e.textures),d=a(e.images),f=a(e.shapes),h=a(e.skeletons),p=a(e.animations),g=a(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=o,i;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let i=0;i<e.children.length;i++){const o=e.children[i];this.add(o.clone())}return this}}Cr.DEFAULT_UP=new Y(0,1,0);Cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ts=new Y,ha=new Y,lS=new Y,pa=new Y,Qu=new Y,Zu=new Y,EO=new Y,cS=new Y,uS=new Y,dS=new Y,fS=new qt,hS=new qt,pS=new qt;class ps{constructor(e=new Y,r=new Y,i=new Y){this.a=e,this.b=r,this.c=i}static getNormal(e,r,i,o){o.subVectors(i,r),ts.subVectors(e,r),o.cross(ts);const s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}static getBarycoord(e,r,i,o,s){ts.subVectors(o,r),ha.subVectors(i,r),lS.subVectors(e,r);const a=ts.dot(ts),l=ts.dot(ha),c=ts.dot(lS),u=ha.dot(ha),d=ha.dot(lS),f=a*u-l*l;if(f===0)return s.set(0,0,0),null;const h=1/f,p=(u*c-l*d)*h,g=(a*d-l*c)*h;return s.set(1-p-g,g,p)}static containsPoint(e,r,i,o){return this.getBarycoord(e,r,i,o,pa)===null?!1:pa.x>=0&&pa.y>=0&&pa.x+pa.y<=1}static getInterpolation(e,r,i,o,s,a,l,c){return this.getBarycoord(e,r,i,o,pa)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,pa.x),c.addScaledVector(a,pa.y),c.addScaledVector(l,pa.z),c)}static getInterpolatedAttribute(e,r,i,o,s,a){return fS.setScalar(0),hS.setScalar(0),pS.setScalar(0),fS.fromBufferAttribute(e,r),hS.fromBufferAttribute(e,i),pS.fromBufferAttribute(e,o),a.setScalar(0),a.addScaledVector(fS,s.x),a.addScaledVector(hS,s.y),a.addScaledVector(pS,s.z),a}static isFrontFacing(e,r,i,o){return ts.subVectors(i,r),ha.subVectors(e,r),ts.cross(ha).dot(o)<0}set(e,r,i){return this.a.copy(e),this.b.copy(r),this.c.copy(i),this}setFromPointsAndIndices(e,r,i,o){return this.a.copy(e[r]),this.b.copy(e[i]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,r,i,o){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ts.subVectors(this.c,this.b),ha.subVectors(this.a,this.b),ts.cross(ha).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ps.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return ps.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,i,o,s){return ps.getInterpolation(e,this.a,this.b,this.c,r,i,o,s)}containsPoint(e){return ps.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ps.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const i=this.a,o=this.b,s=this.c;let a,l;Qu.subVectors(o,i),Zu.subVectors(s,i),cS.subVectors(e,i);const c=Qu.dot(cS),u=Zu.dot(cS);if(c<=0&&u<=0)return r.copy(i);uS.subVectors(e,o);const d=Qu.dot(uS),f=Zu.dot(uS);if(d>=0&&f<=d)return r.copy(o);const h=c*f-d*u;if(h<=0&&c>=0&&d<=0)return a=c/(c-d),r.copy(i).addScaledVector(Qu,a);dS.subVectors(e,s);const p=Qu.dot(dS),g=Zu.dot(dS);if(g>=0&&p<=g)return r.copy(s);const y=p*u-c*g;if(y<=0&&u>=0&&g<=0)return l=u/(u-g),r.copy(i).addScaledVector(Zu,l);const v=d*g-p*f;if(v<=0&&f-d>=0&&p-g>=0)return EO.subVectors(s,o),l=(f-d)/(f-d+(p-g)),r.copy(o).addScaledVector(EO,l);const m=1/(v+y+h);return a=y*m,l=h*m,r.copy(i).addScaledVector(Qu,a).addScaledVector(Zu,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pl={h:0,s:0,l:0},cv={h:0,s:0,l:0};function mS(n,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(e-n)*6*r:r<1/2?e:r<2/3?n+(e-n)*6*(2/3-r):n}class Tt{constructor(e,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,i)}set(e,r,i){if(r===void 0&&i===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,r,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=Dt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rn.toWorkingColorSpace(this,r),this}setRGB(e,r,i,o=rn.workingColorSpace){return this.r=e,this.g=r,this.b=i,rn.toWorkingColorSpace(this,o),this}setHSL(e,r,i,o=rn.workingColorSpace){if(e=PM(e,1),r=Jt(r,0,1),i=Jt(i,0,1),r===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+r):i+r-i*r,a=2*i-s;this.r=mS(a,s,e+1/3),this.g=mS(a,s,e),this.b=mS(a,s,e-1/3)}return rn.toWorkingColorSpace(this,o),this}setStyle(e,r=Dt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=o[1],l=o[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,r);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,r);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=o[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,r);if(a===6)return this.setHex(parseInt(s,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=Dt){const i=lk[e.toLowerCase()];return i!==void 0?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ua(e.r),this.g=Ua(e.g),this.b=Ua(e.b),this}copyLinearToSRGB(e){return this.r=Vd(e.r),this.g=Vd(e.g),this.b=Vd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Dt){return rn.fromWorkingColorSpace(di.copy(this),e),Math.round(Jt(di.r*255,0,255))*65536+Math.round(Jt(di.g*255,0,255))*256+Math.round(Jt(di.b*255,0,255))}getHexString(e=Dt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=rn.workingColorSpace){rn.fromWorkingColorSpace(di.copy(this),r);const i=di.r,o=di.g,s=di.b,a=Math.max(i,o,s),l=Math.min(i,o,s);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const f=a-l;switch(u=d<=.5?f/(a+l):f/(2-a-l),a){case i:c=(o-s)/f+(o<s?6:0);break;case o:c=(s-i)/f+2;break;case s:c=(i-o)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,r=rn.workingColorSpace){return rn.fromWorkingColorSpace(di.copy(this),r),e.r=di.r,e.g=di.g,e.b=di.b,e}getStyle(e=Dt){rn.fromWorkingColorSpace(di.copy(this),e);const r=di.r,i=di.g,o=di.b;return e!==Dt?`color(${e} ${r.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(i*255)},${Math.round(o*255)})`}offsetHSL(e,r,i){return this.getHSL(pl),this.setHSL(pl.h+e,pl.s+r,pl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,i){return this.r=e.r+(r.r-e.r)*i,this.g=e.g+(r.g-e.g)*i,this.b=e.b+(r.b-e.b)*i,this}lerpHSL(e,r){this.getHSL(pl),e.getHSL(cv);const i=Sp(pl.h,cv.h,r),o=Sp(pl.s,cv.s,r),s=Sp(pl.l,cv.l,r);return this.setHSL(i,o,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,i=this.g,o=this.b,s=e.elements;return this.r=s[0]*r+s[3]*i+s[6]*o,this.g=s[1]*r+s[4]*i+s[7]*o,this.b=s[2]*r+s[5]*i+s[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const di=new Tt;Tt.NAMES=lk;let fce=0;class gi extends uc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:fce++}),this.uuid=Fa(),this.name="",this.type="Material",this.blending=ko,this.side=Cs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=cm,this.blendDst=um,this.blendEquation=po,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tt(0,0,0),this.blendAlpha=0,this.depthFunc=ec,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rc,this.stencilZFail=Rc,this.stencilZPass=Rc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const i=e[r];if(i===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const o=this[r];if(o===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[r]=i}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ko&&(i.blending=this.blending),this.side!==Cs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==cm&&(i.blendSrc=this.blendSrc),this.blendDst!==um&&(i.blendDst=this.blendDst),this.blendEquation!==po&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ec&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==kC&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Rc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Rc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(r){const s=o(e.textures),a=o(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let i=null;if(r!==null){const o=r.length;i=new Array(o);for(let s=0;s!==o;++s)i[s]=r[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Zf extends gi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Sa=hce();function hce(){const n=new ArrayBuffer(4),e=new Float32Array(n),r=new Uint32Array(n),i=new Uint32Array(512),o=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(i[c]=0,i[c|256]=32768,o[c]=24,o[c|256]=24):u<-14?(i[c]=1024>>-u-14,i[c|256]=1024>>-u-14|32768,o[c]=-u-1,o[c|256]=-u-1):u<=15?(i[c]=u+15<<10,i[c|256]=u+15<<10|32768,o[c]=13,o[c|256]=13):u<128?(i[c]=31744,i[c|256]=64512,o[c]=24,o[c|256]=24):(i[c]=31744,i[c|256]=64512,o[c]=13,o[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[c]=u|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:r,baseTable:i,shiftTable:o,mantissaTable:s,exponentTable:a,offsetTable:l}}function so(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Jt(n,-65504,65504),Sa.floatView[0]=n;const e=Sa.uint32View[0],r=e>>23&511;return Sa.baseTable[r]+((e&8388607)>>Sa.shiftTable[r])}function uv(n){const e=n>>10;return Sa.uint32View[0]=Sa.mantissaTable[Sa.offsetTable[e]+(n&1023)]+Sa.exponentTable[e],Sa.floatView[0]}const vr=new Y,dv=new je;class ri{constructor(e,r,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=i,this.usage=My,this.updateRanges=[],this.gpuType=hr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,i){e*=this.itemSize,i*=r.itemSize;for(let o=0,s=this.itemSize;o<s;o++)this.array[e+o]=r.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,i=this.count;r<i;r++)dv.fromBufferAttribute(this,r),dv.applyMatrix3(e),this.setXY(r,dv.x,dv.y);else if(this.itemSize===3)for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.applyMatrix3(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}applyMatrix4(e){for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.applyMatrix4(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.applyNormalMatrix(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.transformDirection(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let i=this.array[e*this.itemSize+r];return this.normalized&&(i=Ti(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+r]=i,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=Ti(r,this.array)),r}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=Ti(r,this.array)),r}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=Ti(r,this.array)),r}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=Ti(r,this.array)),r}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=r,this.array[e+1]=i,this}setXYZ(e,r,i,o){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,r,i,o,s){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==My&&(e.usage=this.usage),e}}class DM extends ri{constructor(e,r,i){super(new Uint16Array(e),r,i)}}class LM extends ri{constructor(e,r,i){super(new Uint32Array(e),r,i)}}class ck extends ri{constructor(e,r,i){super(new Uint16Array(e),r,i),this.isFloat16BufferAttribute=!0}getX(e){let r=uv(this.array[e*this.itemSize]);return this.normalized&&(r=Ti(r,this.array)),r}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize]=so(r),this}getY(e){let r=uv(this.array[e*this.itemSize+1]);return this.normalized&&(r=Ti(r,this.array)),r}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+1]=so(r),this}getZ(e){let r=uv(this.array[e*this.itemSize+2]);return this.normalized&&(r=Ti(r,this.array)),r}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+2]=so(r),this}getW(e){let r=uv(this.array[e*this.itemSize+3]);return this.normalized&&(r=Ti(r,this.array)),r}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+3]=so(r),this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=so(r),this.array[e+1]=so(i),this}setXYZ(e,r,i,o){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.array[e+0]=so(r),this.array[e+1]=so(i),this.array[e+2]=so(o),this}setXYZW(e,r,i,o,s){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.array[e+0]=so(r),this.array[e+1]=so(i),this.array[e+2]=so(o),this.array[e+3]=so(s),this}}class mr extends ri{constructor(e,r,i){super(new Float32Array(e),r,i)}}let pce=0;const Ao=new fn,gS=new Cr,Ju=new Y,ao=new Tu,Nh=new Tu,Wr=new Y;class Li extends uc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pce++}),this.uuid=Fa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ok(e)?LM:DM)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,i=0){this.groups.push({start:e,count:r,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Vt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ao.makeRotationFromQuaternion(e),this.applyMatrix4(Ao),this}rotateX(e){return Ao.makeRotationX(e),this.applyMatrix4(Ao),this}rotateY(e){return Ao.makeRotationY(e),this.applyMatrix4(Ao),this}rotateZ(e){return Ao.makeRotationZ(e),this.applyMatrix4(Ao),this}translate(e,r,i){return Ao.makeTranslation(e,r,i),this.applyMatrix4(Ao),this}scale(e,r,i){return Ao.makeScale(e,r,i),this.applyMatrix4(Ao),this}lookAt(e){return gS.lookAt(e),gS.updateMatrix(),this.applyMatrix4(gS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ju).negate(),this.translate(Ju.x,Ju.y,Ju.z),this}setFromPoints(e){const r=this.getAttribute("position");if(r===void 0){const i=[];for(let o=0,s=e.length;o<s;o++){const a=e[o];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new mr(i,3))}else{const i=Math.min(e.length,r.count);for(let o=0;o<i;o++){const s=e[o];r.setXYZ(o,s.x,s.y,s.z||0)}e.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Tu);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let i=0,o=r.length;i<o;i++){const s=r[i];ao.setFromBufferAttribute(s),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,ao.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,ao.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(ao.min),this.boundingBox.expandByPoint(ao.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new r_);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const i=this.boundingSphere.center;if(ao.setFromBufferAttribute(e),r)for(let s=0,a=r.length;s<a;s++){const l=r[s];Nh.setFromBufferAttribute(l),this.morphTargetsRelative?(Wr.addVectors(ao.min,Nh.min),ao.expandByPoint(Wr),Wr.addVectors(ao.max,Nh.max),ao.expandByPoint(Wr)):(ao.expandByPoint(Nh.min),ao.expandByPoint(Nh.max))}ao.getCenter(i);let o=0;for(let s=0,a=e.count;s<a;s++)Wr.fromBufferAttribute(e,s),o=Math.max(o,i.distanceToSquared(Wr));if(r)for(let s=0,a=r.length;s<a;s++){const l=r[s],c=this.morphTargetsRelative;for(let u=0,d=l.count;u<d;u++)Wr.fromBufferAttribute(l,u),c&&(Ju.fromBufferAttribute(e,u),Wr.add(Ju)),o=Math.max(o,i.distanceToSquared(Wr))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=r.position,o=r.normal,s=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ri(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),l=[],c=[];for(let M=0;M<i.count;M++)l[M]=new Y,c[M]=new Y;const u=new Y,d=new Y,f=new Y,h=new je,p=new je,g=new je,y=new Y,v=new Y;function m(M,T,R){u.fromBufferAttribute(i,M),d.fromBufferAttribute(i,T),f.fromBufferAttribute(i,R),h.fromBufferAttribute(s,M),p.fromBufferAttribute(s,T),g.fromBufferAttribute(s,R),d.sub(u),f.sub(u),p.sub(h),g.sub(h);const P=1/(p.x*g.y-g.x*p.y);isFinite(P)&&(y.copy(d).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(P),v.copy(f).multiplyScalar(p.x).addScaledVector(d,-g.x).multiplyScalar(P),l[M].add(y),l[T].add(y),l[R].add(y),c[M].add(v),c[T].add(v),c[R].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let M=0,T=x.length;M<T;++M){const R=x[M],P=R.start,D=R.count;for(let L=P,A=P+D;L<A;L+=3)m(e.getX(L+0),e.getX(L+1),e.getX(L+2))}const b=new Y,S=new Y,w=new Y,C=new Y;function E(M){w.fromBufferAttribute(o,M),C.copy(w);const T=l[M];b.copy(T),b.sub(w.multiplyScalar(w.dot(T))).normalize(),S.crossVectors(C,T);const P=S.dot(c[M])<0?-1:1;a.setXYZW(M,b.x,b.y,b.z,P)}for(let M=0,T=x.length;M<T;++M){const R=x[M],P=R.start,D=R.count;for(let L=P,A=P+D;L<A;L+=3)E(e.getX(L+0)),E(e.getX(L+1)),E(e.getX(L+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ri(new Float32Array(r.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const o=new Y,s=new Y,a=new Y,l=new Y,c=new Y,u=new Y,d=new Y,f=new Y;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),y=e.getX(h+1),v=e.getX(h+2);o.fromBufferAttribute(r,g),s.fromBufferAttribute(r,y),a.fromBufferAttribute(r,v),d.subVectors(a,s),f.subVectors(o,s),d.cross(f),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,y),u.fromBufferAttribute(i,v),l.add(d),c.add(d),u.add(d),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(v,u.x,u.y,u.z)}else for(let h=0,p=r.count;h<p;h+=3)o.fromBufferAttribute(r,h+0),s.fromBufferAttribute(r,h+1),a.fromBufferAttribute(r,h+2),d.subVectors(a,s),f.subVectors(o,s),d.cross(f),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,i=e.count;r<i;r++)Wr.fromBufferAttribute(e,r),Wr.normalize(),e.setXYZ(r,Wr.x,Wr.y,Wr.z)}toNonIndexed(){function e(l,c){const u=l.array,d=l.itemSize,f=l.normalized,h=new u.constructor(c.length*d);let p=0,g=0;for(let y=0,v=c.length;y<v;y++){l.isInterleavedBufferAttribute?p=c[y]*l.data.stride+l.offset:p=c[y]*d;for(let m=0;m<d;m++)h[g++]=u[p++]}return new ri(h,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Li,i=this.index.array,o=this.attributes;for(const l in o){const c=o[l],u=e(c,i);r.setAttribute(l,u)}const s=this.morphAttributes;for(const l in s){const c=[],u=s[l];for(let d=0,f=u.length;d<f;d++){const h=u[d],p=e(h,i);c.push(p)}r.morphAttributes[l]=c}r.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addGroup(u.start,u.count,u.materialIndex)}return r}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const i=this.attributes;for(const c in i){const u=i[c];e.data.attributes[c]=u.toJSON(e.data)}const o={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let f=0,h=u.length;f<h;f++){const p=u[f];d.push(p.toJSON(e.data))}d.length>0&&(o[c]=d,s=!0)}s&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(r));const o=e.attributes;for(const u in o){const d=o[u];this.setAttribute(u,d.clone(r))}const s=e.morphAttributes;for(const u in s){const d=[],f=s[u];for(let h=0,p=f.length;h<p;h++)d.push(f[h].clone(r));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,d=a.length;u<d;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const TO=new fn,bc=new i_,fv=new r_,MO=new Y,hv=new Y,pv=new Y,mv=new Y,vS=new Y,gv=new Y,RO=new Y,vv=new Y;class Br extends Cr{constructor(e=new Li,r=new Zf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const o=r[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=o.length;s<a;s++){const l=o[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,r){const i=this.geometry,o=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;r.fromBufferAttribute(o,e);const l=this.morphTargetInfluences;if(s&&l){gv.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const d=l[c],f=s[c];d!==0&&(vS.fromBufferAttribute(f,e),a?gv.addScaledVector(vS,d):gv.addScaledVector(vS.sub(r),d))}r.add(gv)}return r}raycast(e,r){const i=this.geometry,o=this.material,s=this.matrixWorld;o!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),fv.copy(i.boundingSphere),fv.applyMatrix4(s),bc.copy(e.ray).recast(e.near),!(fv.containsPoint(bc.origin)===!1&&(bc.intersectSphere(fv,MO)===null||bc.origin.distanceToSquared(MO)>(e.far-e.near)**2))&&(TO.copy(s).invert(),bc.copy(e.ray).applyMatrix4(TO),!(i.boundingBox!==null&&bc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,r,bc)))}_computeIntersections(e,r,i){let o;const s=this.geometry,a=this.material,l=s.index,c=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,h=s.groups,p=s.drawRange;if(l!==null)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const v=h[g],m=a[v.materialIndex],x=Math.max(v.start,p.start),b=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let S=x,w=b;S<w;S+=3){const C=l.getX(S),E=l.getX(S+1),M=l.getX(S+2);o=yv(this,m,e,i,u,d,f,C,E,M),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,r.push(o))}}else{const g=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);for(let v=g,m=y;v<m;v+=3){const x=l.getX(v),b=l.getX(v+1),S=l.getX(v+2);o=yv(this,a,e,i,u,d,f,x,b,S),o&&(o.faceIndex=Math.floor(v/3),r.push(o))}}else if(c!==void 0)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const v=h[g],m=a[v.materialIndex],x=Math.max(v.start,p.start),b=Math.min(c.count,Math.min(v.start+v.count,p.start+p.count));for(let S=x,w=b;S<w;S+=3){const C=S,E=S+1,M=S+2;o=yv(this,m,e,i,u,d,f,C,E,M),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,r.push(o))}}else{const g=Math.max(0,p.start),y=Math.min(c.count,p.start+p.count);for(let v=g,m=y;v<m;v+=3){const x=v,b=v+1,S=v+2;o=yv(this,a,e,i,u,d,f,x,b,S),o&&(o.faceIndex=Math.floor(v/3),r.push(o))}}}}function mce(n,e,r,i,o,s,a,l){let c;if(e.side===er?c=i.intersectTriangle(a,s,o,!0,l):c=i.intersectTriangle(o,s,a,e.side===Cs,l),c===null)return null;vv.copy(l),vv.applyMatrix4(n.matrixWorld);const u=r.ray.origin.distanceTo(vv);return u<r.near||u>r.far?null:{distance:u,point:vv.clone(),object:n}}function yv(n,e,r,i,o,s,a,l,c,u){n.getVertexPosition(l,hv),n.getVertexPosition(c,pv),n.getVertexPosition(u,mv);const d=mce(n,e,r,i,hv,pv,mv,RO);if(d){const f=new Y;ps.getBarycoord(RO,hv,pv,mv,f),o&&(d.uv=ps.getInterpolatedAttribute(o,l,c,u,f,new je)),s&&(d.uv1=ps.getInterpolatedAttribute(s,l,c,u,f,new je)),a&&(d.normal=ps.getInterpolatedAttribute(a,l,c,u,f,new Y),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a:l,b:c,c:u,normal:new Y,materialIndex:0};ps.getNormal(hv,pv,mv,h.normal),d.face=h,d.barycoord=f}return d}class Mu extends Li{constructor(e=1,r=1,i=1,o=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:i,widthSegments:o,heightSegments:s,depthSegments:a};const l=this;o=Math.floor(o),s=Math.floor(s),a=Math.floor(a);const c=[],u=[],d=[],f=[];let h=0,p=0;g("z","y","x",-1,-1,i,r,e,a,s,0),g("z","y","x",1,-1,i,r,-e,a,s,1),g("x","z","y",1,1,e,i,r,o,a,2),g("x","z","y",1,-1,e,i,-r,o,a,3),g("x","y","z",1,-1,e,r,i,o,s,4),g("x","y","z",-1,-1,e,r,-i,o,s,5),this.setIndex(c),this.setAttribute("position",new mr(u,3)),this.setAttribute("normal",new mr(d,3)),this.setAttribute("uv",new mr(f,2));function g(y,v,m,x,b,S,w,C,E,M,T){const R=S/E,P=w/M,D=S/2,L=w/2,A=C/2,I=E+1,N=M+1;let F=0,O=0;const V=new Y;for(let U=0;U<N;U++){const k=U*P-L;for(let W=0;W<I;W++){const J=W*R-D;V[y]=J*x,V[v]=k*b,V[m]=A,u.push(V.x,V.y,V.z),V[y]=0,V[v]=0,V[m]=C>0?1:-1,d.push(V.x,V.y,V.z),f.push(W/E),f.push(1-U/M),F+=1}}for(let U=0;U<M;U++)for(let k=0;k<E;k++){const W=h+k+I*U,J=h+k+I*(U+1),z=h+(k+1)+I*(U+1),j=h+(k+1)+I*U;c.push(W,J,j),c.push(J,z,j),O+=6}l.addGroup(p,O,T),p+=O,h+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Of(n){const e={};for(const r in n){e[r]={};for(const i in n[r]){const o=n[r][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][i]=null):e[r][i]=o.clone():Array.isArray(o)?e[r][i]=o.slice():e[r][i]=o}}return e}function bi(n){const e={};for(let r=0;r<n.length;r++){const i=Of(n[r]);for(const o in i)e[o]=i[o]}return e}function gce(n){const e=[];for(let r=0;r<n.length;r++)e.push(n[r].clone());return e}function uk(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:rn.workingColorSpace}const Ay={clone:Of,merge:bi};var vce=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,yce=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Gi extends gi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=vce,this.fragmentShader=yce,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Of(e.uniforms),this.uniformsGroups=gce(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const o in this.uniforms){const a=this.uniforms[o].value;a&&a.isTexture?r.uniforms[o]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?r.uniforms[o]={type:"c",value:a.getHex()}:a&&a.isVector2?r.uniforms[o]={type:"v2",value:a.toArray()}:a&&a.isVector3?r.uniforms[o]={type:"v3",value:a.toArray()}:a&&a.isVector4?r.uniforms[o]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?r.uniforms[o]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?r.uniforms[o]={type:"m4",value:a.toArray()}:r.uniforms[o]={value:a}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(r.extensions=i),r}}class dk extends Cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fn,this.projectionMatrix=new fn,this.projectionMatrixInverse=new fn,this.coordinateSystem=$o}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ml=new Y,AO=new je,NO=new je;class wi extends dk{constructor(e=50,r=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=Pf*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Pf*2*Math.atan(Math.tan(bp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,i){ml.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ml.x,ml.y).multiplyScalar(-e/ml.z),ml.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ml.x,ml.y).multiplyScalar(-e/ml.z)}getViewSize(e,r){return this.getViewBounds(e,AO,NO),r.subVectors(NO,AO)}setViewOffset(e,r,i,o,s,a){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=o,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(bp*.5*this.fov)/this.zoom,i=2*r,o=this.aspect*i,s=-.5*o;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;s+=a.offsetX*o/c,r-=a.offsetY*i/u,o*=a.width/c,i*=a.height/u}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+o,r,r-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const ed=-90,td=1;class fk extends Cr{constructor(e,r,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new wi(ed,td,e,r);o.layers=this.layers,this.add(o);const s=new wi(ed,td,e,r);s.layers=this.layers,this.add(s);const a=new wi(ed,td,e,r);a.layers=this.layers,this.add(a);const l=new wi(ed,td,e,r);l.layers=this.layers,this.add(l);const c=new wi(ed,td,e,r);c.layers=this.layers,this.add(c);const u=new wi(ed,td,e,r);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[i,o,s,a,l,c]=r;for(const u of r)this.remove(u);if(e===$o)i.up.set(0,1,0),i.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===gu)i.up.set(0,-1,0),i.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of r)this.add(u),u.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,c,u,d]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,o),e.render(r,s),e.setRenderTarget(i,1,o),e.render(r,a),e.setRenderTarget(i,2,o),e.render(r,l),e.setRenderTarget(i,3,o),e.render(r,c),e.setRenderTarget(i,4,o),e.render(r,u),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,o),e.render(r,d),e.setRenderTarget(f,h,p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class o_ extends $r{constructor(e,r,i,o,s,a,l,c,u,d){e=e!==void 0?e:[],r=r!==void 0?r:qo,super(e,r,i,o,s,a,l,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class hk extends Ss{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];this.texture=new o_(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ur}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new Mu(5,5,5),s=new Gi({name:"CubemapFromEquirect",uniforms:Of(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:er,blending:Ri});s.uniforms.tEquirect.value=r;const a=new Br(o,s),l=r.minFilter;return r.minFilter===Vi&&(r.minFilter=Ur),new fk(1,10,this).update(e,a),r.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,r,i,o){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(r,i,o);e.setRenderTarget(s)}}class FM extends Cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new bo,this.environmentIntensity=1,this.environmentRotation=new bo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class pk{constructor(e,r){this.isInterleavedBuffer=!0,this.array=e,this.stride=r,this.count=e!==void 0?e.length/r:0,this.usage=My,this.updateRanges=[],this.version=0,this.uuid=Fa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,i){e*=this.stride,i*=r.stride;for(let o=0,s=this.stride;o<s;o++)this.array[e+o]=r.array[i+o];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(r,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _i=new Y;class UM{constructor(e,r,i,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=r,this.offset=i,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,i=this.data.count;r<i;r++)_i.fromBufferAttribute(this,r),_i.applyMatrix4(e),this.setXYZ(r,_i.x,_i.y,_i.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)_i.fromBufferAttribute(this,r),_i.applyNormalMatrix(e),this.setXYZ(r,_i.x,_i.y,_i.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)_i.fromBufferAttribute(this,r),_i.transformDirection(e),this.setXYZ(r,_i.x,_i.y,_i.z);return this}getComponent(e,r){let i=this.array[e*this.data.stride+this.offset+r];return this.normalized&&(i=Ti(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+r]=i,this}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){let r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=Ti(r,this.array)),r}getY(e){let r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=Ti(r,this.array)),r}getZ(e){let r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=Ti(r,this.array)),r}getW(e){let r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=Ti(r,this.array)),r}setXY(e,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this}setXYZ(e,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=o,this}setXYZW(e,r,i,o,s){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=o,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[o+s])}return new ri(new this.array.constructor(r),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new UM(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[o+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class xce extends gi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class _ce extends $r{constructor(e=null,r=1,i=1,o,s,a,l,c,u=qn,d=qn,f,h){super(null,a,l,c,u,d,o,s,f,h),this.isDataTexture=!0,this.image={data:e,width:r,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bce extends ri{constructor(e,r,i,o=1){super(e,r,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const yS=new Y,Sce=new Y,wce=new Vt;class us{constructor(e=new Y(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,i,o){return this.normal.set(e,r,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,i){const o=yS.subVectors(i,r).cross(Sce.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const i=e.delta(yS),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/o;return s<0||s>1?null:r.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const r=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return r<0&&i>0||i<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const i=r||wce.getNormalMatrix(e),o=this.coplanarPoint(yS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Sc=new r_,xv=new Y;class s_{constructor(e=new us,r=new us,i=new us,o=new us,s=new us,a=new us){this.planes=[e,r,i,o,s,a]}set(e,r,i,o,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(r),l[2].copy(i),l[3].copy(o),l[4].copy(s),l[5].copy(a),this}copy(e){const r=this.planes;for(let i=0;i<6;i++)r[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,r=$o){const i=this.planes,o=e.elements,s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=o[6],h=o[7],p=o[8],g=o[9],y=o[10],v=o[11],m=o[12],x=o[13],b=o[14],S=o[15];if(i[0].setComponents(c-s,h-u,v-p,S-m).normalize(),i[1].setComponents(c+s,h+u,v+p,S+m).normalize(),i[2].setComponents(c+a,h+d,v+g,S+x).normalize(),i[3].setComponents(c-a,h-d,v-g,S-x).normalize(),i[4].setComponents(c-l,h-f,v-y,S-b).normalize(),r===$o)i[5].setComponents(c+l,h+f,v+y,S+b).normalize();else if(r===gu)i[5].setComponents(l,f,y,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Sc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),Sc.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Sc)}intersectsSprite(e){return Sc.center.set(0,0,0),Sc.radius=.7071067811865476,Sc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Sc)}intersectsSphere(e){const r=this.planes,i=e.center,o=-e.radius;for(let s=0;s<6;s++)if(r[s].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){const r=this.planes;for(let i=0;i<6;i++){const o=r[i];if(xv.x=o.normal.x>0?e.max.x:e.min.x,xv.y=o.normal.y>0?e.max.y:e.min.y,xv.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(xv)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let i=0;i<6;i++)if(r[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class a_ extends gi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ny=new Y,Py=new Y,PO=new fn,Ph=new i_,_v=new r_,xS=new Y,OO=new Y;class Cce extends Cr{constructor(e=new Li,r=new a_){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,i=[0];for(let o=1,s=r.count;o<s;o++)Ny.fromBufferAttribute(r,o-1),Py.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=Ny.distanceTo(Py);e.setAttribute("lineDistance",new mr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const i=this.geometry,o=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_v.copy(i.boundingSphere),_v.applyMatrix4(o),_v.radius+=s,e.ray.intersectsSphere(_v)===!1)return;PO.copy(o).invert(),Ph.copy(e.ray).applyMatrix4(PO);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,d=i.index,h=i.attributes.position;if(d!==null){const p=Math.max(0,a.start),g=Math.min(d.count,a.start+a.count);for(let y=p,v=g-1;y<v;y+=u){const m=d.getX(y),x=d.getX(y+1),b=bv(this,e,Ph,c,m,x);b&&r.push(b)}if(this.isLineLoop){const y=d.getX(g-1),v=d.getX(p),m=bv(this,e,Ph,c,y,v);m&&r.push(m)}}else{const p=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count);for(let y=p,v=g-1;y<v;y+=u){const m=bv(this,e,Ph,c,y,y+1);m&&r.push(m)}if(this.isLineLoop){const y=bv(this,e,Ph,c,g-1,p);y&&r.push(y)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const o=r[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=o.length;s<a;s++){const l=o[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function bv(n,e,r,i,o,s){const a=n.geometry.attributes.position;if(Ny.fromBufferAttribute(a,o),Py.fromBufferAttribute(a,s),r.distanceSqToSegment(Ny,Py,xS,OO)>i)return;xS.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(xS);if(!(c<e.near||c>e.far))return{distance:c,point:OO.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}class Ece extends gi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Ed extends Cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Tce extends $r{constructor(e,r){super({width:e,height:r}),this.isFramebufferTexture=!0,this.magFilter=qn,this.minFilter=qn,this.generateMipmaps=!1,this.needsUpdate=!0}}class dc extends $r{constructor(e,r,i,o,s,a,l,c,u,d=Ws){if(d!==Ws&&d!==Ys)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Ws&&(i=rr),i===void 0&&d===Ys&&(i=Ks),super(null,o,s,a,l,c,d,i,u),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=l!==void 0?l:qn,this.minFilter=c!==void 0?c:qn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class el{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const i=this.getUtoTmapping(e);return this.getPoint(i,r)}getPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPoint(i/e));return r}getSpacedPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPointAt(i/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let i,o=this.getPoint(0),s=0;r.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(o),r.push(s),o=i;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const i=this.getLengths();let o=0;const s=i.length;let a;r?a=r:a=e*i[s-1];let l=0,c=s-1,u;for(;l<=c;)if(o=Math.floor(l+(c-l)/2),u=i[o]-a,u<0)l=o+1;else if(u>0)c=o-1;else{c=o;break}if(o=c,i[o]===a)return o/(s-1);const d=i[o],h=i[o+1]-d,p=(a-d)/h;return(o+p)/(s-1)}getTangent(e,r){let o=e-1e-4,s=e+1e-4;o<0&&(o=0),s>1&&(s=1);const a=this.getPoint(o),l=this.getPoint(s),c=r||(a.isVector2?new je:new Y);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,r){const i=this.getUtoTmapping(e);return this.getTangent(i,r)}computeFrenetFrames(e,r){const i=new Y,o=[],s=[],a=[],l=new Y,c=new fn;for(let p=0;p<=e;p++){const g=p/e;o[p]=this.getTangentAt(g,new Y)}s[0]=new Y,a[0]=new Y;let u=Number.MAX_VALUE;const d=Math.abs(o[0].x),f=Math.abs(o[0].y),h=Math.abs(o[0].z);d<=u&&(u=d,i.set(1,0,0)),f<=u&&(u=f,i.set(0,1,0)),h<=u&&i.set(0,0,1),l.crossVectors(o[0],i).normalize(),s[0].crossVectors(o[0],l),a[0].crossVectors(o[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),a[p]=a[p-1].clone(),l.crossVectors(o[p-1],o[p]),l.length()>Number.EPSILON){l.normalize();const g=Math.acos(Jt(o[p-1].dot(o[p]),-1,1));s[p].applyMatrix4(c.makeRotationAxis(l,g))}a[p].crossVectors(o[p],s[p])}if(r===!0){let p=Math.acos(Jt(s[0].dot(s[e]),-1,1));p/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(c.makeRotationAxis(o[g],p*g)),a[g].crossVectors(o[g],s[g])}return{tangents:o,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class mk extends el{constructor(e=0,r=0,i=1,o=1,s=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=r,this.xRadius=i,this.yRadius=o,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,r=new je){const i=r,o=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=o;for(;s>o;)s-=o;s<Number.EPSILON&&(a?s=0:s=o),this.aClockwise===!0&&!a&&(s===o?s=-o:s=s-o);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=c-this.aX,p=u-this.aY;c=h*d-p*f+this.aX,u=h*f+p*d+this.aY}return i.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Mce extends mk{constructor(e,r,i,o,s,a){super(e,r,i,i,o,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function BM(){let n=0,e=0,r=0,i=0;function o(s,a,l,c){n=s,e=l,r=-3*s+3*a-2*l-c,i=2*s-2*a+l+c}return{initCatmullRom:function(s,a,l,c,u){o(a,l,u*(l-s),u*(c-a))},initNonuniformCatmullRom:function(s,a,l,c,u,d,f){let h=(a-s)/u-(l-s)/(u+d)+(l-a)/d,p=(l-a)/d-(c-a)/(d+f)+(c-l)/f;h*=d,p*=d,o(a,l,h,p)},calc:function(s){const a=s*s,l=a*s;return n+e*s+r*a+i*l}}}const Sv=new Y,_S=new BM,bS=new BM,SS=new BM;class Rce extends el{constructor(e=[],r=!1,i="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=i,this.tension=o}getPoint(e,r=new Y){const i=r,o=this.points,s=o.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let u,d;this.closed||l>0?u=o[(l-1)%s]:(Sv.subVectors(o[0],o[1]).add(o[0]),u=Sv);const f=o[l%s],h=o[(l+1)%s];if(this.closed||l+2<s?d=o[(l+2)%s]:(Sv.subVectors(o[s-1],o[s-2]).add(o[s-1]),d=Sv),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),p),y=Math.pow(f.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(d),p);y<1e-4&&(y=1),g<1e-4&&(g=y),v<1e-4&&(v=y),_S.initNonuniformCatmullRom(u.x,f.x,h.x,d.x,g,y,v),bS.initNonuniformCatmullRom(u.y,f.y,h.y,d.y,g,y,v),SS.initNonuniformCatmullRom(u.z,f.z,h.z,d.z,g,y,v)}else this.curveType==="catmullrom"&&(_S.initCatmullRom(u.x,f.x,h.x,d.x,this.tension),bS.initCatmullRom(u.y,f.y,h.y,d.y,this.tension),SS.initCatmullRom(u.z,f.z,h.z,d.z,this.tension));return i.set(_S.calc(c),bS.calc(c),SS.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const o=this.points[r];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(new Y().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function IO(n,e,r,i,o){const s=(i-e)*.5,a=(o-r)*.5,l=n*n,c=n*l;return(2*r-2*i+s+a)*c+(-3*r+3*i-2*s-a)*l+s*n+r}function Ace(n,e){const r=1-n;return r*r*e}function Nce(n,e){return 2*(1-n)*n*e}function Pce(n,e){return n*n*e}function wp(n,e,r,i){return Ace(n,e)+Nce(n,r)+Pce(n,i)}function Oce(n,e){const r=1-n;return r*r*r*e}function Ice(n,e){const r=1-n;return 3*r*r*n*e}function Dce(n,e){return 3*(1-n)*n*n*e}function Lce(n,e){return n*n*n*e}function Cp(n,e,r,i,o){return Oce(n,e)+Ice(n,r)+Dce(n,i)+Lce(n,o)}class Fce extends el{constructor(e=new je,r=new je,i=new je,o=new je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=r,this.v2=i,this.v3=o}getPoint(e,r=new je){const i=r,o=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(Cp(e,o.x,s.x,a.x,l.x),Cp(e,o.y,s.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class gk extends el{constructor(e=new Y,r=new Y,i=new Y,o=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=r,this.v2=i,this.v3=o}getPoint(e,r=new Y){const i=r,o=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(Cp(e,o.x,s.x,a.x,l.x),Cp(e,o.y,s.y,a.y,l.y),Cp(e,o.z,s.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Uce extends el{constructor(e=new je,r=new je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=r}getPoint(e,r=new je){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new je){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Bce extends el{constructor(e=new Y,r=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=r}getPoint(e,r=new Y){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new Y){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $ce extends el{constructor(e=new je,r=new je,i=new je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new je){const i=r,o=this.v0,s=this.v1,a=this.v2;return i.set(wp(e,o.x,s.x,a.x),wp(e,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $M extends el{constructor(e=new Y,r=new Y,i=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new Y){const i=r,o=this.v0,s=this.v1,a=this.v2;return i.set(wp(e,o.x,s.x,a.x),wp(e,o.y,s.y,a.y),wp(e,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zce extends el{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,r=new je){const i=r,o=this.points,s=(o.length-1)*e,a=Math.floor(s),l=s-a,c=o[a===0?a:a-1],u=o[a],d=o[a>o.length-2?o.length-1:a+1],f=o[a>o.length-3?o.length-1:a+2];return i.set(IO(l,c.x,u.x,d.x,f.x),IO(l,c.y,u.y,d.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const o=this.points[r];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(new je().fromArray(o))}return this}}var kce=Object.freeze({__proto__:null,ArcCurve:Mce,CatmullRomCurve3:Rce,CubicBezierCurve:Fce,CubicBezierCurve3:gk,EllipseCurve:mk,LineCurve:Uce,LineCurve3:Bce,QuadraticBezierCurve:$ce,QuadraticBezierCurve3:$M,SplineCurve:zce});class l_ extends Li{constructor(e=1,r=1,i=1,o=32,s=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:i,radialSegments:o,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c};const u=this;o=Math.floor(o),s=Math.floor(s);const d=[],f=[],h=[],p=[];let g=0;const y=[],v=i/2;let m=0;x(),a===!1&&(e>0&&b(!0),r>0&&b(!1)),this.setIndex(d),this.setAttribute("position",new mr(f,3)),this.setAttribute("normal",new mr(h,3)),this.setAttribute("uv",new mr(p,2));function x(){const S=new Y,w=new Y;let C=0;const E=(r-e)/i;for(let M=0;M<=s;M++){const T=[],R=M/s,P=R*(r-e)+e;for(let D=0;D<=o;D++){const L=D/o,A=L*c+l,I=Math.sin(A),N=Math.cos(A);w.x=P*I,w.y=-R*i+v,w.z=P*N,f.push(w.x,w.y,w.z),S.set(I,E,N).normalize(),h.push(S.x,S.y,S.z),p.push(L,1-R),T.push(g++)}y.push(T)}for(let M=0;M<o;M++)for(let T=0;T<s;T++){const R=y[T][M],P=y[T+1][M],D=y[T+1][M+1],L=y[T][M+1];(e>0||T!==0)&&(d.push(R,P,L),C+=3),(r>0||T!==s-1)&&(d.push(P,D,L),C+=3)}u.addGroup(m,C,0),m+=C}function b(S){const w=g,C=new je,E=new Y;let M=0;const T=S===!0?e:r,R=S===!0?1:-1;for(let D=1;D<=o;D++)f.push(0,v*R,0),h.push(0,R,0),p.push(.5,.5),g++;const P=g;for(let D=0;D<=o;D++){const A=D/o*c+l,I=Math.cos(A),N=Math.sin(A);E.x=T*N,E.y=v*R,E.z=T*I,f.push(E.x,E.y,E.z),h.push(0,R,0),C.x=I*.5+.5,C.y=N*.5*R+.5,p.push(C.x,C.y),g++}for(let D=0;D<o;D++){const L=w+D,A=P+D;S===!0?d.push(A,A+1,L):d.push(A+1,A,L),M+=3}u.addGroup(m,M,S===!0?1:2),m+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zM extends l_{constructor(e=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(0,e,r,i,o,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new zM(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class c_ extends Li{constructor(e=1,r=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:i,heightSegments:o};const s=e/2,a=r/2,l=Math.floor(i),c=Math.floor(o),u=l+1,d=c+1,f=e/l,h=r/c,p=[],g=[],y=[],v=[];for(let m=0;m<d;m++){const x=m*h-a;for(let b=0;b<u;b++){const S=b*f-s;g.push(S,-x,0),y.push(0,0,1),v.push(b/l),v.push(1-m/c)}}for(let m=0;m<c;m++)for(let x=0;x<l;x++){const b=x+u*m,S=x+u*(m+1),w=x+1+u*(m+1),C=x+1+u*m;p.push(b,S,C),p.push(S,w,C)}this.setIndex(p),this.setAttribute("position",new mr(g,3)),this.setAttribute("normal",new mr(y,3)),this.setAttribute("uv",new mr(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c_(e.width,e.height,e.widthSegments,e.heightSegments)}}class Jf extends Li{constructor(e=1,r=32,i=16,o=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:o,phiLength:s,thetaStart:a,thetaLength:l},r=Math.max(3,Math.floor(r)),i=Math.max(2,Math.floor(i));const c=Math.min(a+l,Math.PI);let u=0;const d=[],f=new Y,h=new Y,p=[],g=[],y=[],v=[];for(let m=0;m<=i;m++){const x=[],b=m/i;let S=0;m===0&&a===0?S=.5/r:m===i&&c===Math.PI&&(S=-.5/r);for(let w=0;w<=r;w++){const C=w/r;f.x=-e*Math.cos(o+C*s)*Math.sin(a+b*l),f.y=e*Math.cos(a+b*l),f.z=e*Math.sin(o+C*s)*Math.sin(a+b*l),g.push(f.x,f.y,f.z),h.copy(f).normalize(),y.push(h.x,h.y,h.z),v.push(C+S,1-b),x.push(u++)}d.push(x)}for(let m=0;m<i;m++)for(let x=0;x<r;x++){const b=d[m][x+1],S=d[m][x],w=d[m+1][x],C=d[m+1][x+1];(m!==0||a>0)&&p.push(b,S,C),(m!==i-1||c<Math.PI)&&p.push(S,w,C)}this.setIndex(p),this.setAttribute("position",new mr(g,3)),this.setAttribute("normal",new mr(y,3)),this.setAttribute("uv",new mr(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class kM extends Li{constructor(e=new $M(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),r=64,i=1,o=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:r,radius:i,radialSegments:o,closed:s};const a=e.computeFrenetFrames(r,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new Y,c=new Y,u=new je;let d=new Y;const f=[],h=[],p=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new mr(f,3)),this.setAttribute("normal",new mr(h,3)),this.setAttribute("uv",new mr(p,2));function y(){for(let b=0;b<r;b++)v(b);v(s===!1?r:0),x(),m()}function v(b){d=e.getPointAt(b/r,d);const S=a.normals[b],w=a.binormals[b];for(let C=0;C<=o;C++){const E=C/o*Math.PI*2,M=Math.sin(E),T=-Math.cos(E);c.x=T*S.x+M*w.x,c.y=T*S.y+M*w.y,c.z=T*S.z+M*w.z,c.normalize(),h.push(c.x,c.y,c.z),l.x=d.x+i*c.x,l.y=d.y+i*c.y,l.z=d.z+i*c.z,f.push(l.x,l.y,l.z)}}function m(){for(let b=1;b<=r;b++)for(let S=1;S<=o;S++){const w=(o+1)*(b-1)+(S-1),C=(o+1)*b+(S-1),E=(o+1)*b+S,M=(o+1)*(b-1)+S;g.push(w,C,M),g.push(C,E,M)}}function x(){for(let b=0;b<=r;b++)for(let S=0;S<=o;S++)u.x=b/r,u.y=S/o,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new kM(new kce[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Vce extends gi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Tt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class vk extends gi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gce extends vk{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Tt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Hce extends gi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Tt(16777215),this.specular=new Tt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jce extends gi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Tt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Wce extends gi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class VM extends gi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bo,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qce extends gi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xle,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Xce extends gi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Kce extends gi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Tt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yce extends a_{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const DO={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Qce{constructor(e,r,i){const o=this;let s=!1,a=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=i,this.itemStart=function(d){l++,s===!1&&o.onStart!==void 0&&o.onStart(d,a,l),s=!0},this.itemEnd=function(d){a++,o.onProgress!==void 0&&o.onProgress(d,a,l),a===l&&(s=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(d){o.onError!==void 0&&o.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,h=u.length;f<h;f+=2){const p=u[f],g=u[f+1];if(p.global&&(p.lastIndex=0),p.test(d))return g}return null}}}const Zce=new Qce;class GM{constructor(e){this.manager=e!==void 0?e:Zce,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const i=this;return new Promise(function(o,s){i.load(e,o,r,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}GM.DEFAULT_MATERIAL_NAME="__DEFAULT";class Jce extends GM{constructor(e){super(e)}load(e,r,i,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=DO.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){r&&r(a),s.manager.itemEnd(e)},0),a;const l=Tm("img");function c(){d(),DO.add(e,this),r&&r(this),s.manager.itemEnd(e)}function u(f){d(),o&&o(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class eue extends GM{constructor(e){super(e)}load(e,r,i,o){const s=new $r,a=new Jce(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,r!==void 0&&r(s)},i,o),s}}class Ru extends Cr{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Tt(e),this.intensity=r}dispose(){}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(r.object.target=this.target.uuid),r}}class tue extends Ru{constructor(e,r,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Tt(r)}copy(e,r){return super.copy(e,r),this.groundColor.copy(e.groundColor),this}}const wS=new fn,LO=new Y,FO=new Y;class HM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new s_,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,i=this.matrix;LO.setFromMatrixPosition(e.matrixWorld),r.position.copy(LO),FO.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(FO),r.updateMatrixWorld(),wS.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(wS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nue extends HM{constructor(){super(new wi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const r=this.camera,i=Pf*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,s=e.distance||r.far;(i!==r.fov||o!==r.aspect||s!==r.far)&&(r.fov=i,r.aspect=o,r.far=s,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class yk extends Ru{constructor(e,r,i=0,o=Math.PI/3,s=0,a=2){super(e,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.distance=i,this.angle=o,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new nue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UO=new fn,Oh=new Y,CS=new Y;class rue extends HM{constructor(){super(new wi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,r=0){const i=this.camera,o=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Oh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Oh),CS.copy(i.position),CS.add(this._cubeDirections[r]),i.up.copy(this._cubeUps[r]),i.lookAt(CS),i.updateMatrixWorld(),o.makeTranslation(-Oh.x,-Oh.y,-Oh.z),UO.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UO)}}class iue extends Ru{constructor(e,r,i=0,o=2){super(e,r),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=o,this.shadow=new rue}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lg extends dk{constructor(e=-1,r=1,i=1,o=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=i,this.bottom=o,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,i,o,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=o,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let s=i-e,a=i+e,l=o+r,c=o-r;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class oue extends HM{constructor(){super(new lg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xk extends Ru{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.shadow=new oue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _k extends Ru{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class sue extends Ru{constructor(e,r,i=10,o=10){super(e,r),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const r=super.toJSON(e);return r.object.width=this.width,r.object.height=this.height,r}}class aue{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let r=0;r<9;r++)this.coefficients[r].copy(e[r]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,r){const i=e.x,o=e.y,s=e.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.282095),r.addScaledVector(a[1],.488603*o),r.addScaledVector(a[2],.488603*s),r.addScaledVector(a[3],.488603*i),r.addScaledVector(a[4],1.092548*(i*o)),r.addScaledVector(a[5],1.092548*(o*s)),r.addScaledVector(a[6],.315392*(3*s*s-1)),r.addScaledVector(a[7],1.092548*(i*s)),r.addScaledVector(a[8],.546274*(i*i-o*o)),r}getIrradianceAt(e,r){const i=e.x,o=e.y,s=e.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.886227),r.addScaledVector(a[1],2*.511664*o),r.addScaledVector(a[2],2*.511664*s),r.addScaledVector(a[3],2*.511664*i),r.addScaledVector(a[4],2*.429043*i*o),r.addScaledVector(a[5],2*.429043*o*s),r.addScaledVector(a[6],.743125*s*s-.247708),r.addScaledVector(a[7],2*.429043*i*s),r.addScaledVector(a[8],.429043*(i*i-o*o)),r}add(e){for(let r=0;r<9;r++)this.coefficients[r].add(e.coefficients[r]);return this}addScaledSH(e,r){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],r);return this}scale(e){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(e);return this}lerp(e,r){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],r);return this}equals(e){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(e.coefficients[r]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,r=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].fromArray(e,r+o*3);return this}toArray(e=[],r=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].toArray(e,r+o*3);return e}static getBasisAt(e,r){const i=e.x,o=e.y,s=e.z;r[0]=.282095,r[1]=.488603*o,r[2]=.488603*s,r[3]=.488603*i,r[4]=1.092548*i*o,r[5]=1.092548*o*s,r[6]=.315392*(3*s*s-1),r[7]=1.092548*i*s,r[8]=.546274*(i*i-o*o)}}class lue extends Ru{constructor(e=new aue,r=1){super(void 0,r),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const r=super.toJSON(e);return r.object.sh=this.sh.toArray(),r}}class cue extends wi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class bk{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=BO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=BO();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}}function BO(){return performance.now()}class uue extends pk{constructor(e,r,i=1){super(e,r),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const r=super.clone(e);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(e){const r=super.toJSON(e);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}const $O=new fn;class Sk{constructor(e,r,i=0,o=1/0){this.ray=new i_(e,r),this.near=i,this.far=o,this.camera=null,this.layers=new IM,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}setFromXRController(e){return $O.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4($O),this}intersectObject(e,r=!0,i=[]){return VC(e,this,i,r),i.sort(zO),i}intersectObjects(e,r=!0,i=[]){for(let o=0,s=e.length;o<s;o++)VC(e[o],this,i,r);return i.sort(zO),i}}function zO(n,e){return n.distance-e.distance}function VC(n,e,r,i){let o=!0;if(n.layers.test(e.layers)&&n.raycast(e,r)===!1&&(o=!1),o===!0&&i===!0){const s=n.children;for(let a=0,l=s.length;a<l;a++)VC(s[a],e,r,!0)}}class kO{constructor(e=1,r=0,i=0){return this.radius=e,this.phi=r,this.theta=i,this}set(e,r,i){return this.radius=e,this.phi=r,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,i){return this.radius=Math.sqrt(e*e+r*r+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Jt(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class u_ extends uc{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function VO(n,e,r,i){const o=due(i);switch(r){case bM:return n*e;case SM:return n*e;case wM:return n*e*2;case ag:return n*e/o.components*o.byteLength;case Xf:return n*e/o.components*o.byteLength;case mu:return n*e*2/o.components*o.byteLength;case Kf:return n*e*2/o.components*o.byteLength;case sg:return n*e*3/o.components*o.byteLength;case ti:return n*e*4/o.components*o.byteLength;case Yf:return n*e*4/o.components*o.byteLength;case eu:case Hl:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case jl:case Wl:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case xm:case bm:return Math.max(n,16)*Math.max(e,8)/4;case ym:case _m:return Math.max(n,8)*Math.max(e,8)/2;case Sm:case mf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case gf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case vf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case yf:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case xf:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case _f:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case bf:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Sf:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case wf:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Cf:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Ef:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Tf:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Mf:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Rf:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Af:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Nf:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case tu:case $C:case zC:return Math.ceil(n/4)*Math.ceil(e/4)*16;case CM:case wm:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Cm:case Em:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function due(n){switch(n){case hi:case Zc:return{byteLength:1,components:1};case vs:case Jc:case Yr:return{byteLength:2,components:1};case Zx:case Jx:return{byteLength:2,components:4};case rr:case Xr:case hr:return{byteLength:4,components:1};case e_:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:qf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=qf);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function wk(){let n=null,e=!1,r=null,i=null;function o(s,a){r(s,a),i=n.requestAnimationFrame(o)}return{start:function(){e!==!0&&r!==null&&(i=n.requestAnimationFrame(o),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){r=s},setContext:function(s){n=s}}}function fue(n){const e=new WeakMap;function r(l,c){const u=l.array,d=l.usage,f=u.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,u,d),l.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:f}}function i(l,c,u){const d=c.array,f=c.updateRanges;if(n.bindBuffer(u,l),f.length===0)n.bufferSubData(u,0,d);else{f.sort((p,g)=>p.start-g.start);let h=0;for(let p=1;p<f.length;p++){const g=f[h],y=f[p];y.start<=g.start+g.count+1?g.count=Math.max(g.count,y.start+y.count-g.start):(++h,f[h]=y)}f.length=h+1;for(let p=0,g=f.length;p<g;p++){const y=f[p];n.bufferSubData(u,y.start*d.BYTES_PER_ELEMENT,d,y.start,y.count)}c.clearUpdateRanges()}c.onUploadCallback()}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function a(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const u=e.get(l);if(u===void 0)e.set(l,r(l,c));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,l,c),u.version=l.version}}return{get:o,remove:s,update:a}}var hue=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pue=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,mue=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,gue=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vue=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yue=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xue=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_ue=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bue=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Sue=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,wue=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Cue=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Eue=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Tue=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Mue=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Rue=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Aue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Nue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Pue=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Oue=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Iue=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Due=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Lue=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Fue=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Uue=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Bue=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$ue=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zue=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,kue=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Vue=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Gue="gl_FragColor = linearToOutputTexel( gl_FragColor );",Hue=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Wue=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,que=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Xue=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Kue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Yue=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Que=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Zue=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Jue=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ede=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,tde=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nde=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rde=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ide=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ode=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,sde=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,ade=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ude=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,dde=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fde=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,hde=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pde=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,mde=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gde=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vde=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yde=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xde=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_de=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,bde=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Sde=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wde=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Cde=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ede=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Tde=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Mde=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Rde=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Ade=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Nde=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Pde=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ode=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ide=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Dde=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Lde=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Fde=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Ude=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Bde=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$de=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,zde=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,kde=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Vde=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Gde=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Hde=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jde=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Wde=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,qde=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Xde=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Kde=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Yde=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Qde=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Zde=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Jde=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,efe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tfe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nfe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rfe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ife=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ofe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,sfe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,afe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ufe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,dfe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ffe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,hfe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mfe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vfe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yfe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xfe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_fe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bfe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Sfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wfe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Cfe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Efe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tfe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Mfe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rfe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Afe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nfe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Pfe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ofe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Ife=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Dfe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lfe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ffe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ufe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bfe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$fe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zfe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,kfe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vfe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gfe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Hfe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jfe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tn={alphahash_fragment:hue,alphahash_pars_fragment:pue,alphamap_fragment:mue,alphamap_pars_fragment:gue,alphatest_fragment:vue,alphatest_pars_fragment:yue,aomap_fragment:xue,aomap_pars_fragment:_ue,batching_pars_vertex:bue,batching_vertex:Sue,begin_vertex:wue,beginnormal_vertex:Cue,bsdfs:Eue,iridescence_fragment:Tue,bumpmap_pars_fragment:Mue,clipping_planes_fragment:Rue,clipping_planes_pars_fragment:Aue,clipping_planes_pars_vertex:Nue,clipping_planes_vertex:Pue,color_fragment:Oue,color_pars_fragment:Iue,color_pars_vertex:Due,color_vertex:Lue,common:Fue,cube_uv_reflection_fragment:Uue,defaultnormal_vertex:Bue,displacementmap_pars_vertex:$ue,displacementmap_vertex:zue,emissivemap_fragment:kue,emissivemap_pars_fragment:Vue,colorspace_fragment:Gue,colorspace_pars_fragment:Hue,envmap_fragment:jue,envmap_common_pars_fragment:Wue,envmap_pars_fragment:que,envmap_pars_vertex:Xue,envmap_physical_pars_fragment:ode,envmap_vertex:Kue,fog_vertex:Yue,fog_pars_vertex:Que,fog_fragment:Zue,fog_pars_fragment:Jue,gradientmap_pars_fragment:ede,lightmap_pars_fragment:tde,lights_lambert_fragment:nde,lights_lambert_pars_fragment:rde,lights_pars_begin:ide,lights_toon_fragment:sde,lights_toon_pars_fragment:ade,lights_phong_fragment:lde,lights_phong_pars_fragment:cde,lights_physical_fragment:ude,lights_physical_pars_fragment:dde,lights_fragment_begin:fde,lights_fragment_maps:hde,lights_fragment_end:pde,logdepthbuf_fragment:mde,logdepthbuf_pars_fragment:gde,logdepthbuf_pars_vertex:vde,logdepthbuf_vertex:yde,map_fragment:xde,map_pars_fragment:_de,map_particle_fragment:bde,map_particle_pars_fragment:Sde,metalnessmap_fragment:wde,metalnessmap_pars_fragment:Cde,morphinstance_vertex:Ede,morphcolor_vertex:Tde,morphnormal_vertex:Mde,morphtarget_pars_vertex:Rde,morphtarget_vertex:Ade,normal_fragment_begin:Nde,normal_fragment_maps:Pde,normal_pars_fragment:Ode,normal_pars_vertex:Ide,normal_vertex:Dde,normalmap_pars_fragment:Lde,clearcoat_normal_fragment_begin:Fde,clearcoat_normal_fragment_maps:Ude,clearcoat_pars_fragment:Bde,iridescence_pars_fragment:$de,opaque_fragment:zde,packing:kde,premultiplied_alpha_fragment:Vde,project_vertex:Gde,dithering_fragment:Hde,dithering_pars_fragment:jde,roughnessmap_fragment:Wde,roughnessmap_pars_fragment:qde,shadowmap_pars_fragment:Xde,shadowmap_pars_vertex:Kde,shadowmap_vertex:Yde,shadowmask_pars_fragment:Qde,skinbase_vertex:Zde,skinning_pars_vertex:Jde,skinning_vertex:efe,skinnormal_vertex:tfe,specularmap_fragment:nfe,specularmap_pars_fragment:rfe,tonemapping_fragment:ife,tonemapping_pars_fragment:ofe,transmission_fragment:sfe,transmission_pars_fragment:afe,uv_pars_fragment:lfe,uv_pars_vertex:cfe,uv_vertex:ufe,worldpos_vertex:dfe,background_vert:ffe,background_frag:hfe,backgroundCube_vert:pfe,backgroundCube_frag:mfe,cube_vert:gfe,cube_frag:vfe,depth_vert:yfe,depth_frag:xfe,distanceRGBA_vert:_fe,distanceRGBA_frag:bfe,equirect_vert:Sfe,equirect_frag:wfe,linedashed_vert:Cfe,linedashed_frag:Efe,meshbasic_vert:Tfe,meshbasic_frag:Mfe,meshlambert_vert:Rfe,meshlambert_frag:Afe,meshmatcap_vert:Nfe,meshmatcap_frag:Pfe,meshnormal_vert:Ofe,meshnormal_frag:Ife,meshphong_vert:Dfe,meshphong_frag:Lfe,meshphysical_vert:Ffe,meshphysical_frag:Ufe,meshtoon_vert:Bfe,meshtoon_frag:$fe,points_vert:zfe,points_frag:kfe,shadow_vert:Vfe,shadow_frag:Gfe,sprite_vert:Hfe,sprite_frag:jfe},gt={common:{diffuse:{value:new Tt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vt}},envmap:{envMap:{value:null},envMapRotation:{value:new Vt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vt},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new Tt(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}}},Fs={basic:{uniforms:bi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:bi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:bi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)},specular:{value:new Tt(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:bi([gt.common,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.roughnessmap,gt.metalnessmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:bi([gt.common,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.gradientmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:bi([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:bi([gt.points,gt.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:bi([gt.common,gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:bi([gt.common,gt.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:bi([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,{opacity:{value:1}}]),vertexShader:tn.meshnormal_vert,fragmentShader:tn.meshnormal_frag},sprite:{uniforms:bi([gt.sprite,gt.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Vt}},vertexShader:tn.backgroundCube_vert,fragmentShader:tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distanceRGBA:{uniforms:bi([gt.common,gt.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distanceRGBA_vert,fragmentShader:tn.distanceRGBA_frag},shadow:{uniforms:bi([gt.lights,gt.fog,{color:{value:new Tt(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};Fs.physical={uniforms:bi([Fs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vt},clearcoatNormalScale:{value:new je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vt},sheen:{value:0},sheenColor:{value:new Tt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vt},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vt},attenuationDistance:{value:0},attenuationColor:{value:new Tt(0)},specularColor:{value:new Tt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vt},anisotropyVector:{value:new je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vt}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};const wv={r:0,b:0,g:0},wc=new bo,Wfe=new fn;function qfe(n,e,r,i,o,s,a){const l=new Tt(0);let c=s===!0?0:1,u,d,f=null,h=0,p=null;function g(b){let S=b.isScene===!0?b.background:null;return S&&S.isTexture&&(S=(b.backgroundBlurriness>0?r:e).get(S)),S}function y(b){let S=!1;const w=g(b);w===null?m(l,c):w&&w.isColor&&(m(w,1),S=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,a):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(b,S){const w=g(S);w&&(w.isCubeTexture||w.mapping===fu)?(d===void 0&&(d=new Br(new Mu(1,1,1),new Gi({name:"BackgroundCubeMaterial",uniforms:Of(Fs.backgroundCube.uniforms),vertexShader:Fs.backgroundCube.vertexShader,fragmentShader:Fs.backgroundCube.fragmentShader,side:er,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(C,E,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(d)),wc.copy(S.backgroundRotation),wc.x*=-1,wc.y*=-1,wc.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(wc.y*=-1,wc.z*=-1),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Wfe.makeRotationFromEuler(wc)),d.material.toneMapped=rn.getTransfer(w.colorSpace)!==Mn,(f!==w||h!==w.version||p!==n.toneMapping)&&(d.material.needsUpdate=!0,f=w,h=w.version,p=n.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Br(new c_(2,2),new Gi({name:"BackgroundMaterial",uniforms:Of(Fs.background.uniforms),vertexShader:Fs.background.vertexShader,fragmentShader:Fs.background.fragmentShader,side:Cs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=rn.getTransfer(w.colorSpace)!==Mn,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||h!==w.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=w,h=w.version,p=n.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null))}function m(b,S){b.getRGB(wv,uk(n)),i.buffers.color.setClear(wv.r,wv.g,wv.b,S,a)}function x(){d!==void 0&&(d.geometry.dispose(),d.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return l},setClearColor:function(b,S=1){l.set(b),c=S,m(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(b){c=b,m(l,c)},render:y,addToRenderList:v,dispose:x}}function Xfe(n,e){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},o=h(null);let s=o,a=!1;function l(R,P,D,L,A){let I=!1;const N=f(L,D,P);s!==N&&(s=N,u(s.object)),I=p(R,L,D,A),I&&g(R,L,D,A),A!==null&&e.update(A,n.ELEMENT_ARRAY_BUFFER),(I||a)&&(a=!1,S(R,P,D,L),A!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(A).buffer))}function c(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function d(R){return n.deleteVertexArray(R)}function f(R,P,D){const L=D.wireframe===!0;let A=i[R.id];A===void 0&&(A={},i[R.id]=A);let I=A[P.id];I===void 0&&(I={},A[P.id]=I);let N=I[L];return N===void 0&&(N=h(c()),I[L]=N),N}function h(R){const P=[],D=[],L=[];for(let A=0;A<r;A++)P[A]=0,D[A]=0,L[A]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:D,attributeDivisors:L,object:R,attributes:{},index:null}}function p(R,P,D,L){const A=s.attributes,I=P.attributes;let N=0;const F=D.getAttributes();for(const O in F)if(F[O].location>=0){const U=A[O];let k=I[O];if(k===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(k=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(k=R.instanceColor)),U===void 0||U.attribute!==k||k&&U.data!==k.data)return!0;N++}return s.attributesNum!==N||s.index!==L}function g(R,P,D,L){const A={},I=P.attributes;let N=0;const F=D.getAttributes();for(const O in F)if(F[O].location>=0){let U=I[O];U===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(U=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(U=R.instanceColor));const k={};k.attribute=U,U&&U.data&&(k.data=U.data),A[O]=k,N++}s.attributes=A,s.attributesNum=N,s.index=L}function y(){const R=s.newAttributes;for(let P=0,D=R.length;P<D;P++)R[P]=0}function v(R){m(R,0)}function m(R,P){const D=s.newAttributes,L=s.enabledAttributes,A=s.attributeDivisors;D[R]=1,L[R]===0&&(n.enableVertexAttribArray(R),L[R]=1),A[R]!==P&&(n.vertexAttribDivisor(R,P),A[R]=P)}function x(){const R=s.newAttributes,P=s.enabledAttributes;for(let D=0,L=P.length;D<L;D++)P[D]!==R[D]&&(n.disableVertexAttribArray(D),P[D]=0)}function b(R,P,D,L,A,I,N){N===!0?n.vertexAttribIPointer(R,P,D,A,I):n.vertexAttribPointer(R,P,D,L,A,I)}function S(R,P,D,L){y();const A=L.attributes,I=D.getAttributes(),N=P.defaultAttributeValues;for(const F in I){const O=I[F];if(O.location>=0){let V=A[F];if(V===void 0&&(F==="instanceMatrix"&&R.instanceMatrix&&(V=R.instanceMatrix),F==="instanceColor"&&R.instanceColor&&(V=R.instanceColor)),V!==void 0){const U=V.normalized,k=V.itemSize,W=e.get(V);if(W===void 0)continue;const J=W.buffer,z=W.type,j=W.bytesPerElement,X=z===n.INT||z===n.UNSIGNED_INT||V.gpuType===Xr;if(V.isInterleavedBufferAttribute){const Q=V.data,ne=Q.stride,ye=V.offset;if(Q.isInstancedInterleavedBuffer){for(let me=0;me<O.locationSize;me++)m(O.location+me,Q.meshPerAttribute);R.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let me=0;me<O.locationSize;me++)v(O.location+me);n.bindBuffer(n.ARRAY_BUFFER,J);for(let me=0;me<O.locationSize;me++)b(O.location+me,k/O.locationSize,z,U,ne*j,(ye+k/O.locationSize*me)*j,X)}else{if(V.isInstancedBufferAttribute){for(let Q=0;Q<O.locationSize;Q++)m(O.location+Q,V.meshPerAttribute);R.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let Q=0;Q<O.locationSize;Q++)v(O.location+Q);n.bindBuffer(n.ARRAY_BUFFER,J);for(let Q=0;Q<O.locationSize;Q++)b(O.location+Q,k/O.locationSize,z,U,k*j,k/O.locationSize*Q*j,X)}}else if(N!==void 0){const U=N[F];if(U!==void 0)switch(U.length){case 2:n.vertexAttrib2fv(O.location,U);break;case 3:n.vertexAttrib3fv(O.location,U);break;case 4:n.vertexAttrib4fv(O.location,U);break;default:n.vertexAttrib1fv(O.location,U)}}}}x()}function w(){M();for(const R in i){const P=i[R];for(const D in P){const L=P[D];for(const A in L)d(L[A].object),delete L[A];delete P[D]}delete i[R]}}function C(R){if(i[R.id]===void 0)return;const P=i[R.id];for(const D in P){const L=P[D];for(const A in L)d(L[A].object),delete L[A];delete P[D]}delete i[R.id]}function E(R){for(const P in i){const D=i[P];if(D[R.id]===void 0)continue;const L=D[R.id];for(const A in L)d(L[A].object),delete L[A];delete D[R.id]}}function M(){T(),a=!0,s!==o&&(s=o,u(s.object))}function T(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:l,reset:M,resetDefaultState:T,dispose:w,releaseStatesOfGeometry:C,releaseStatesOfProgram:E,initAttributes:y,enableAttribute:v,disableUnusedAttributes:x}}function Kfe(n,e,r){let i;function o(u){i=u}function s(u,d){n.drawArrays(i,u,d),r.update(d,i,1)}function a(u,d,f){f!==0&&(n.drawArraysInstanced(i,u,d,f),r.update(d,i,f))}function l(u,d,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,d,0,f);let p=0;for(let g=0;g<f;g++)p+=d[g];r.update(p,i,1)}function c(u,d,f,h){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)a(u[g],d[g],h[g]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,d,0,h,0,f);let g=0;for(let y=0;y<f;y++)g+=d[y]*h[y];r.update(g,i,1)}}this.setMode=o,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Yfe(n,e,r,i){let o;function s(){if(o!==void 0)return o;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");o=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function a(E){return!(E!==ti&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(E){const M=E===Yr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==hi&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==hr&&!M)}function c(E){if(E==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=r.precision!==void 0?r.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const f=r.logarithmicDepthBuffer===!0,h=r.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),b=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=g>0,C=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:v,maxAttributes:m,maxVertexUniforms:x,maxVaryings:b,maxFragmentUniforms:S,vertexTextures:w,maxSamples:C}}function Qfe(n){const e=this;let r=null,i=0,o=!1,s=!1;const a=new us,l=new Vt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||i!==0||o;return o=h,i=f.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){r=d(f,h,0)},this.setState=function(f,h,p){const g=f.clippingPlanes,y=f.clipIntersection,v=f.clipShadows,m=n.get(f);if(!o||g===null||g.length===0||s&&!v)s?d(null):u();else{const x=s?0:i,b=x*4;let S=m.clippingState||null;c.value=S,S=d(g,h,b,p);for(let w=0;w!==b;++w)S[w]=r[w];m.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function u(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(f,h,p,g){const y=f!==null?f.length:0;let v=null;if(y!==0){if(v=c.value,g!==!0||v===null){const m=p+y*4,x=h.matrixWorldInverse;l.getNormalMatrix(x),(v===null||v.length<m)&&(v=new Float32Array(m));for(let b=0,S=p;b!==y;++b,S+=4)a.copy(f[b]).applyMatrix4(x,l),a.normal.toArray(v,S),v[S+3]=a.constant}c.value=v,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,v}}function Zfe(n){let e=new WeakMap;function r(a,l){return l===tc?a.mapping=qo:l===nc&&(a.mapping=Xo),a}function i(a){if(a&&a.isTexture){const l=a.mapping;if(l===tc||l===nc)if(e.has(a)){const c=e.get(a).texture;return r(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new hk(c.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",o),r(u.texture,a.mapping)}else return null}}return a}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Td=4,GO=[.125,.215,.35,.446,.526,.582],Fc=20,ES=new lg,HO=new Tt;let TS=null,MS=0,RS=0,AS=!1;const Ac=(1+Math.sqrt(5))/2,nd=1/Ac,jO=[new Y(-Ac,nd,0),new Y(Ac,nd,0),new Y(-nd,0,Ac),new Y(nd,0,Ac),new Y(0,Ac,-nd),new Y(0,Ac,nd),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)];let WO=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,i=.1,o=100){TS=this._renderer.getRenderTarget(),MS=this._renderer.getActiveCubeFace(),RS=this._renderer.getActiveMipmapLevel(),AS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,o,s),r>0&&this._blur(s,0,0,r),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=KO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=XO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(TS,MS,RS),this._renderer.xr.enabled=AS,e.scissorTest=!1,Cv(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===qo||e.mapping===Xo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),TS=this._renderer.getRenderTarget(),MS=this._renderer.getActiveCubeFace(),RS=this._renderer.getActiveMipmapLevel(),AS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Ur,minFilter:Ur,generateMipmaps:!1,type:Yr,format:ti,colorSpace:Vo,depthBuffer:!1},o=qO(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qO(e,r,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Jfe(s)),this._blurMaterial=ehe(s,e,r)}return o}_compileMaterial(e){const r=new Br(this._lodPlanes[0],e);this._renderer.compile(r,ES)}_sceneToCubeUV(e,r,i,o){const l=new wi(90,1,r,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,h=d.toneMapping;d.getClearColor(HO),d.toneMapping=Qi,d.autoClear=!1;const p=new Zf({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1}),g=new Br(new Mu,p);let y=!1;const v=e.background;v?v.isColor&&(p.color.copy(v),e.background=null,y=!0):(p.color.copy(HO),y=!0);for(let m=0;m<6;m++){const x=m%3;x===0?(l.up.set(0,c[m],0),l.lookAt(u[m],0,0)):x===1?(l.up.set(0,0,c[m]),l.lookAt(0,u[m],0)):(l.up.set(0,c[m],0),l.lookAt(0,0,u[m]));const b=this._cubeSize;Cv(o,x*b,m>2?b:0,b,b),d.setRenderTarget(o),y&&d.render(g,l),d.render(e,l)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=h,d.autoClear=f,e.background=v}_textureToCubeUV(e,r){const i=this._renderer,o=e.mapping===qo||e.mapping===Xo;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=KO()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=XO());const s=o?this._cubemapMaterial:this._equirectMaterial,a=new Br(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;Cv(r,0,0,3*c,2*c),i.setRenderTarget(r),i.render(a,ES)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const o=this._lodPlanes.length;for(let s=1;s<o;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=jO[(o-s-1)%jO.length];this._blur(e,s-1,s,a,l)}r.autoClear=i}_blur(e,r,i,o,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,r,i,o,"latitudinal",s),this._halfBlur(a,e,i,i,o,"longitudinal",s)}_halfBlur(e,r,i,o,s,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new Br(this._lodPlanes[o],u),h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Fc-1),y=s/g,v=isFinite(s)?1+Math.floor(d*y):Fc;v>Fc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Fc}`);const m=[];let x=0;for(let E=0;E<Fc;++E){const M=E/y,T=Math.exp(-M*M/2);m.push(T),E===0?x+=T:E<v&&(x+=2*T)}for(let E=0;E<m.length;E++)m[E]=m[E]/x;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=m,h.latitudinal.value=a==="latitudinal",l&&(h.poleAxis.value=l);const{_lodMax:b}=this;h.dTheta.value=g,h.mipInt.value=b-i;const S=this._sizeLods[o],w=3*S*(o>b-Td?o-b+Td:0),C=4*(this._cubeSize-S);Cv(r,w,C,3*S,2*S),c.setRenderTarget(r),c.render(f,ES)}};function Jfe(n){const e=[],r=[],i=[];let o=n;const s=n-Td+1+GO.length;for(let a=0;a<s;a++){const l=Math.pow(2,o);r.push(l);let c=1/l;a>n-Td?c=GO[a-n+Td-1]:a===0&&(c=0),i.push(c);const u=1/(l-2),d=-u,f=1+u,h=[d,d,f,d,f,f,d,d,f,f,d,f],p=6,g=6,y=3,v=2,m=1,x=new Float32Array(y*g*p),b=new Float32Array(v*g*p),S=new Float32Array(m*g*p);for(let C=0;C<p;C++){const E=C%3*2/3-1,M=C>2?0:-1,T=[E,M,0,E+2/3,M,0,E+2/3,M+1,0,E,M,0,E+2/3,M+1,0,E,M+1,0];x.set(T,y*g*C),b.set(h,v*g*C);const R=[C,C,C,C,C,C];S.set(R,m*g*C)}const w=new Li;w.setAttribute("position",new ri(x,y)),w.setAttribute("uv",new ri(b,v)),w.setAttribute("faceIndex",new ri(S,m)),e.push(w),o>Td&&o--}return{lodPlanes:e,sizeLods:r,sigmas:i}}function qO(n,e,r){const i=new Ss(n,e,r);return i.texture.mapping=fu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Cv(n,e,r,i,o){n.viewport.set(e,r,i,o),n.scissor.set(e,r,i,o)}function ehe(n,e,r){const i=new Float32Array(Fc),o=new Y(0,1,0);return new Gi({name:"SphericalGaussianBlur",defines:{n:Fc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:jM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ri,depthTest:!1,depthWrite:!1})}function XO(){return new Gi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:jM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ri,depthTest:!1,depthWrite:!1})}function KO(){return new Gi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:jM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ri,depthTest:!1,depthWrite:!1})}function jM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function the(n){let e=new WeakMap,r=null;function i(l){if(l&&l.isTexture){const c=l.mapping,u=c===tc||c===nc,d=c===qo||c===Xo;if(u||d){let f=e.get(l);const h=f!==void 0?f.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==h)return r===null&&(r=new WO(n)),f=u?r.fromEquirectangular(l,f):r.fromCubemap(l,f),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),f.texture;if(f!==void 0)return f.texture;{const p=l.image;return u&&p&&p.height>0||d&&p&&o(p)?(r===null&&(r=new WO(n)),f=u?r.fromEquirectangular(l):r.fromCubemap(l),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),l.addEventListener("dispose",s),f.texture):null}}}return l}function o(l){let c=0;const u=6;for(let d=0;d<u;d++)l[d]!==void 0&&c++;return c===u}function s(l){const c=l.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:a}}function nhe(n){const e={};function r(i){if(e[i]!==void 0)return e[i];let o;switch(i){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(i)}return e[i]=o,o}return{has:function(i){return r(i)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(i){const o=r(i);return o===null&&Lc("THREE.WebGLRenderer: "+i+" extension not supported."),o}}}function rhe(n,e,r,i){const o={},s=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",a),delete o[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function l(f,h){return o[h.id]===!0||(h.addEventListener("dispose",a),o[h.id]=!0,r.memory.geometries++),h}function c(f){const h=f.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function u(f){const h=[],p=f.index,g=f.attributes.position;let y=0;if(p!==null){const x=p.array;y=p.version;for(let b=0,S=x.length;b<S;b+=3){const w=x[b+0],C=x[b+1],E=x[b+2];h.push(w,C,C,E,E,w)}}else if(g!==void 0){const x=g.array;y=g.version;for(let b=0,S=x.length/3-1;b<S;b+=3){const w=b+0,C=b+1,E=b+2;h.push(w,C,C,E,E,w)}}else return;const v=new(ok(h)?LM:DM)(h,1);v.version=y;const m=s.get(f);m&&e.remove(m),s.set(f,v)}function d(f){const h=s.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&u(f)}else u(f);return s.get(f)}return{get:l,update:c,getWireframeAttribute:d}}function ihe(n,e,r){let i;function o(h){i=h}let s,a;function l(h){s=h.type,a=h.bytesPerElement}function c(h,p){n.drawElements(i,p,s,h*a),r.update(p,i,1)}function u(h,p,g){g!==0&&(n.drawElementsInstanced(i,p,s,h*a,g),r.update(p,i,g))}function d(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,h,0,g);let v=0;for(let m=0;m<g;m++)v+=p[m];r.update(v,i,1)}function f(h,p,g,y){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let m=0;m<h.length;m++)u(h[m]/a,p[m],y[m]);else{v.multiDrawElementsInstancedWEBGL(i,p,0,s,h,0,y,0,g);let m=0;for(let x=0;x<g;x++)m+=p[x]*y[x];r.update(m,i,1)}}this.setMode=o,this.setIndex=l,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function ohe(n){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,l){switch(r.calls++,a){case n.TRIANGLES:r.triangles+=l*(s/3);break;case n.LINES:r.lines+=l*(s/2);break;case n.LINE_STRIP:r.lines+=l*(s-1);break;case n.LINE_LOOP:r.lines+=l*s;break;case n.POINTS:r.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function o(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:o,update:i}}function she(n,e,r){const i=new WeakMap,o=new qt;function s(a,l,c){const u=a.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=d!==void 0?d.length:0;let h=i.get(l);if(h===void 0||h.count!==f){let R=function(){M.dispose(),i.delete(l),l.removeEventListener("dispose",R)};var p=R;h!==void 0&&h.texture.dispose();const g=l.morphAttributes.position!==void 0,y=l.morphAttributes.normal!==void 0,v=l.morphAttributes.color!==void 0,m=l.morphAttributes.position||[],x=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let S=0;g===!0&&(S=1),y===!0&&(S=2),v===!0&&(S=3);let w=l.attributes.position.count*S,C=1;w>e.maxTextureSize&&(C=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const E=new Float32Array(w*C*4*f),M=new OM(E,w,C,f);M.type=hr,M.needsUpdate=!0;const T=S*4;for(let P=0;P<f;P++){const D=m[P],L=x[P],A=b[P],I=w*C*4*P;for(let N=0;N<D.count;N++){const F=N*T;g===!0&&(o.fromBufferAttribute(D,N),E[I+F+0]=o.x,E[I+F+1]=o.y,E[I+F+2]=o.z,E[I+F+3]=0),y===!0&&(o.fromBufferAttribute(L,N),E[I+F+4]=o.x,E[I+F+5]=o.y,E[I+F+6]=o.z,E[I+F+7]=0),v===!0&&(o.fromBufferAttribute(A,N),E[I+F+8]=o.x,E[I+F+9]=o.y,E[I+F+10]=o.z,E[I+F+11]=A.itemSize===4?o.w:1)}}h={count:f,texture:M,size:new je(w,C)},i.set(l,h),l.addEventListener("dispose",R)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",a.morphTexture,r);else{let g=0;for(let v=0;v<u.length;v++)g+=u[v];const y=l.morphTargetsRelative?1:1-g;c.getUniforms().setValue(n,"morphTargetBaseInfluence",y),c.getUniforms().setValue(n,"morphTargetInfluences",u)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,r),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function ahe(n,e,r,i){let o=new WeakMap;function s(c){const u=i.render.frame,d=c.geometry,f=e.get(c,d);if(o.get(f)!==u&&(e.update(f),o.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),o.get(c)!==u&&(r.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&r.update(c.instanceColor,n.ARRAY_BUFFER),o.set(c,u))),c.isSkinnedMesh){const h=c.skeleton;o.get(h)!==u&&(h.update(),o.set(h,u))}return f}function a(){o=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:s,dispose:a}}const Ck=new $r,YO=new dc(1,1),Ek=new OM,Tk=new ice,Mk=new o_,QO=[],ZO=[],JO=new Float32Array(16),eI=new Float32Array(9),tI=new Float32Array(4);function eh(n,e,r){const i=n[0];if(i<=0||i>0)return n;const o=e*r;let s=QO[o];if(s===void 0&&(s=new Float32Array(o),QO[o]=s),e!==0){i.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=r,n[a].toArray(s,l)}return s}function kr(n,e){if(n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(n[r]!==e[r])return!1;return!0}function Vr(n,e){for(let r=0,i=e.length;r<i;r++)n[r]=e[r]}function d_(n,e){let r=ZO[e];r===void 0&&(r=new Int32Array(e),ZO[e]=r);for(let i=0;i!==e;++i)r[i]=n.allocateTextureUnit();return r}function lhe(n,e){const r=this.cache;r[0]!==e&&(n.uniform1f(this.addr,e),r[0]=e)}function che(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(kr(r,e))return;n.uniform2fv(this.addr,e),Vr(r,e)}}function uhe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(kr(r,e))return;n.uniform3fv(this.addr,e),Vr(r,e)}}function dhe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(kr(r,e))return;n.uniform4fv(this.addr,e),Vr(r,e)}}function fhe(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(kr(r,e))return;n.uniformMatrix2fv(this.addr,!1,e),Vr(r,e)}else{if(kr(r,i))return;tI.set(i),n.uniformMatrix2fv(this.addr,!1,tI),Vr(r,i)}}function hhe(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(kr(r,e))return;n.uniformMatrix3fv(this.addr,!1,e),Vr(r,e)}else{if(kr(r,i))return;eI.set(i),n.uniformMatrix3fv(this.addr,!1,eI),Vr(r,i)}}function phe(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(kr(r,e))return;n.uniformMatrix4fv(this.addr,!1,e),Vr(r,e)}else{if(kr(r,i))return;JO.set(i),n.uniformMatrix4fv(this.addr,!1,JO),Vr(r,i)}}function mhe(n,e){const r=this.cache;r[0]!==e&&(n.uniform1i(this.addr,e),r[0]=e)}function ghe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(kr(r,e))return;n.uniform2iv(this.addr,e),Vr(r,e)}}function vhe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(kr(r,e))return;n.uniform3iv(this.addr,e),Vr(r,e)}}function yhe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(kr(r,e))return;n.uniform4iv(this.addr,e),Vr(r,e)}}function xhe(n,e){const r=this.cache;r[0]!==e&&(n.uniform1ui(this.addr,e),r[0]=e)}function _he(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(kr(r,e))return;n.uniform2uiv(this.addr,e),Vr(r,e)}}function bhe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(kr(r,e))return;n.uniform3uiv(this.addr,e),Vr(r,e)}}function She(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(kr(r,e))return;n.uniform4uiv(this.addr,e),Vr(r,e)}}function whe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o);let s;this.type===n.SAMPLER_2D_SHADOW?(YO.compareFunction=n_,s=YO):s=Ck,r.setTexture2D(e||s,o)}function Che(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTexture3D(e||Tk,o)}function Ehe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTextureCube(e||Mk,o)}function The(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTexture2DArray(e||Ek,o)}function Mhe(n){switch(n){case 5126:return lhe;case 35664:return che;case 35665:return uhe;case 35666:return dhe;case 35674:return fhe;case 35675:return hhe;case 35676:return phe;case 5124:case 35670:return mhe;case 35667:case 35671:return ghe;case 35668:case 35672:return vhe;case 35669:case 35673:return yhe;case 5125:return xhe;case 36294:return _he;case 36295:return bhe;case 36296:return She;case 35678:case 36198:case 36298:case 36306:case 35682:return whe;case 35679:case 36299:case 36307:return Che;case 35680:case 36300:case 36308:case 36293:return Ehe;case 36289:case 36303:case 36311:case 36292:return The}}function Rhe(n,e){n.uniform1fv(this.addr,e)}function Ahe(n,e){const r=eh(e,this.size,2);n.uniform2fv(this.addr,r)}function Nhe(n,e){const r=eh(e,this.size,3);n.uniform3fv(this.addr,r)}function Phe(n,e){const r=eh(e,this.size,4);n.uniform4fv(this.addr,r)}function Ohe(n,e){const r=eh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,r)}function Ihe(n,e){const r=eh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,r)}function Dhe(n,e){const r=eh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,r)}function Lhe(n,e){n.uniform1iv(this.addr,e)}function Fhe(n,e){n.uniform2iv(this.addr,e)}function Uhe(n,e){n.uniform3iv(this.addr,e)}function Bhe(n,e){n.uniform4iv(this.addr,e)}function $he(n,e){n.uniform1uiv(this.addr,e)}function zhe(n,e){n.uniform2uiv(this.addr,e)}function khe(n,e){n.uniform3uiv(this.addr,e)}function Vhe(n,e){n.uniform4uiv(this.addr,e)}function Ghe(n,e,r){const i=this.cache,o=e.length,s=d_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTexture2D(e[a]||Ck,s[a])}function Hhe(n,e,r){const i=this.cache,o=e.length,s=d_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTexture3D(e[a]||Tk,s[a])}function jhe(n,e,r){const i=this.cache,o=e.length,s=d_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTextureCube(e[a]||Mk,s[a])}function Whe(n,e,r){const i=this.cache,o=e.length,s=d_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTexture2DArray(e[a]||Ek,s[a])}function qhe(n){switch(n){case 5126:return Rhe;case 35664:return Ahe;case 35665:return Nhe;case 35666:return Phe;case 35674:return Ohe;case 35675:return Ihe;case 35676:return Dhe;case 5124:case 35670:return Lhe;case 35667:case 35671:return Fhe;case 35668:case 35672:return Uhe;case 35669:case 35673:return Bhe;case 5125:return $he;case 36294:return zhe;case 36295:return khe;case 36296:return Vhe;case 35678:case 36198:case 36298:case 36306:case 35682:return Ghe;case 35679:case 36299:case 36307:return Hhe;case 35680:case 36300:case 36308:case 36293:return jhe;case 36289:case 36303:case 36311:case 36292:return Whe}}class Xhe{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.setValue=Mhe(r.type)}}class Khe{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=qhe(r.type)}}class Yhe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,i){const o=this.seq;for(let s=0,a=o.length;s!==a;++s){const l=o[s];l.setValue(e,r[l.id],i)}}}const NS=/(\w+)(\])?(\[|\.)?/g;function nI(n,e){n.seq.push(e),n.map[e.id]=e}function Qhe(n,e,r){const i=n.name,o=i.length;for(NS.lastIndex=0;;){const s=NS.exec(i),a=NS.lastIndex;let l=s[1];const c=s[2]==="]",u=s[3];if(c&&(l=l|0),u===void 0||u==="["&&a+2===o){nI(r,u===void 0?new Xhe(l,n,e):new Khe(l,n,e));break}else{let f=r.map[l];f===void 0&&(f=new Yhe(l),nI(r,f)),r=f}}}class _0{constructor(e,r){this.seq=[],this.map={};const i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const s=e.getActiveUniform(r,o),a=e.getUniformLocation(r,s.name);Qhe(s,a,this)}}setValue(e,r,i,o){const s=this.map[r];s!==void 0&&s.setValue(e,i,o)}setOptional(e,r,i){const o=r[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,r,i,o){for(let s=0,a=r.length;s!==a;++s){const l=r[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,o)}}static seqWithValue(e,r){const i=[];for(let o=0,s=e.length;o!==s;++o){const a=e[o];a.id in r&&i.push(a)}return i}}function rI(n,e,r){const i=n.createShader(e);return n.shaderSource(i,r),n.compileShader(i),i}const Zhe=37297;let Jhe=0;function epe(n,e){const r=n.split(`
`),i=[],o=Math.max(e-6,0),s=Math.min(e+6,r.length);for(let a=o;a<s;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${r[a]}`)}return i.join(`
`)}const iI=new Vt;function tpe(n){rn._getMatrix(iI,rn.workingColorSpace,n);const e=`mat3( ${iI.elements.map(r=>r.toFixed(4))} )`;switch(rn.getTransfer(n)){case Ty:return[e,"LinearTransferOETF"];case Mn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function oI(n,e,r){const i=n.getShaderParameter(e,n.COMPILE_STATUS),o=n.getShaderInfoLog(e).trim();if(i&&o==="")return"";const s=/ERROR: 0:(\d+)/.exec(o);if(s){const a=parseInt(s[1]);return r.toUpperCase()+`

`+o+`

`+epe(n.getShaderSource(e),a)}else return o}function npe(n,e){const r=tpe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}function rpe(n,e){let r;switch(e){case Zz:r="Linear";break;case Jz:r="Reinhard";break;case ek:r="Cineon";break;case tk:r="ACESFilmic";break;case nk:r="AgX";break;case rk:r="Neutral";break;case vle:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+n+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const Ev=new Y;function ipe(){rn.getLuminanceCoefficients(Ev);const n=Ev.x.toFixed(4),e=Ev.y.toFixed(4),r=Ev.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function ope(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(tp).join(`
`)}function spe(n){const e=[];for(const r in n){const i=n[r];i!==!1&&e.push("#define "+r+" "+i)}return e.join(`
`)}function ape(n,e){const r={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const s=n.getActiveAttrib(e,o),a=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),r[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:l}}return r}function tp(n){return n!==""}function sI(n,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function aI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lpe=/^[ \t]*#include +<([\w\d./]+)>/gm;function GC(n){return n.replace(lpe,upe)}const cpe=new Map;function upe(n,e){let r=tn[e];if(r===void 0){const i=cpe.get(e);if(i!==void 0)r=tn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return GC(r)}const dpe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lI(n){return n.replace(dpe,fpe)}function fpe(n,e,r,i){let o="";for(let s=parseInt(e);s<parseInt(r);s++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return o}function cI(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function hpe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===aM?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===fle?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ho&&(e="SHADOWMAP_TYPE_VSM"),e}function ppe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case qo:case Xo:e="ENVMAP_TYPE_CUBE";break;case fu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function mpe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Xo:e="ENVMAP_MODE_REFRACTION";break}return e}function gpe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case og:e="ENVMAP_BLENDING_MULTIPLY";break;case Yz:e="ENVMAP_BLENDING_MIX";break;case Qz:e="ENVMAP_BLENDING_ADD";break}return e}function vpe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function ype(n,e,r,i){const o=n.getContext(),s=r.defines;let a=r.vertexShader,l=r.fragmentShader;const c=hpe(r),u=ppe(r),d=mpe(r),f=gpe(r),h=vpe(r),p=ope(r),g=spe(s),y=o.createProgram();let v,m,x=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(v=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(tp).join(`
`),v.length>0&&(v+=`
`),m=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(tp).join(`
`),m.length>0&&(m+=`
`)):(v=[cI(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(tp).join(`
`),m=[cI(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Qi?"#define TONE_MAPPING":"",r.toneMapping!==Qi?tn.tonemapping_pars_fragment:"",r.toneMapping!==Qi?rpe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",tn.colorspace_pars_fragment,npe("linearToOutputTexel",r.outputColorSpace),ipe(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(tp).join(`
`)),a=GC(a),a=sI(a,r),a=aI(a,r),l=GC(l),l=sI(l,r),l=aI(l,r),a=lI(a),l=lI(l),r.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,v=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=["#define varying in",r.glslVersion===fO?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===fO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const b=x+v+a,S=x+m+l,w=rI(o,o.VERTEX_SHADER,b),C=rI(o,o.FRAGMENT_SHADER,S);o.attachShader(y,w),o.attachShader(y,C),r.index0AttributeName!==void 0?o.bindAttribLocation(y,0,r.index0AttributeName):r.morphTargets===!0&&o.bindAttribLocation(y,0,"position"),o.linkProgram(y);function E(P){if(n.debug.checkShaderErrors){const D=o.getProgramInfoLog(y).trim(),L=o.getShaderInfoLog(w).trim(),A=o.getShaderInfoLog(C).trim();let I=!0,N=!0;if(o.getProgramParameter(y,o.LINK_STATUS)===!1)if(I=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(o,y,w,C);else{const F=oI(o,w,"vertex"),O=oI(o,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(y,o.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+D+`
`+F+`
`+O)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(L===""||A==="")&&(N=!1);N&&(P.diagnostics={runnable:I,programLog:D,vertexShader:{log:L,prefix:v},fragmentShader:{log:A,prefix:m}})}o.deleteShader(w),o.deleteShader(C),M=new _0(o,y),T=ape(o,y)}let M;this.getUniforms=function(){return M===void 0&&E(this),M};let T;this.getAttributes=function(){return T===void 0&&E(this),T};let R=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=o.getProgramParameter(y,Zhe)),R},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(y),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Jhe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=C,this}let xpe=0;class _pe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(r),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(o)===!1&&(a.add(o),o.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const i of r)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let i=r.get(e);return i===void 0&&(i=new Set,r.set(e,i)),i}_getShaderStage(e){const r=this.shaderCache;let i=r.get(e);return i===void 0&&(i=new bpe(e),r.set(e,i)),i}}class bpe{constructor(e){this.id=xpe++,this.code=e,this.usedTimes=0}}function Spe(n,e,r,i,o,s,a){const l=new IM,c=new _pe,u=new Set,d=[],f=o.logarithmicDepthBuffer,h=o.vertexTextures;let p=o.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(T){return u.add(T),T===0?"uv":`uv${T}`}function v(T,R,P,D,L){const A=D.fog,I=L.geometry,N=T.isMeshStandardMaterial?D.environment:null,F=(T.isMeshStandardMaterial?r:e).get(T.envMap||N),O=F&&F.mapping===fu?F.image.height:null,V=g[T.type];T.precision!==null&&(p=o.getMaxPrecision(T.precision),p!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",p,"instead."));const U=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,k=U!==void 0?U.length:0;let W=0;I.morphAttributes.position!==void 0&&(W=1),I.morphAttributes.normal!==void 0&&(W=2),I.morphAttributes.color!==void 0&&(W=3);let J,z,j,X;if(V){const Xe=Fs[V];J=Xe.vertexShader,z=Xe.fragmentShader}else J=T.vertexShader,z=T.fragmentShader,c.update(T),j=c.getVertexShaderID(T),X=c.getFragmentShaderID(T);const Q=n.getRenderTarget(),ne=n.state.buffers.depth.getReversed(),ye=L.isInstancedMesh===!0,me=L.isBatchedMesh===!0,fe=!!T.map,le=!!T.matcap,ge=!!F,q=!!T.aoMap,ve=!!T.lightMap,be=!!T.bumpMap,xe=!!T.normalMap,we=!!T.displacementMap,qe=!!T.emissiveMap,Fe=!!T.metalnessMap,H=!!T.roughnessMap,B=T.anisotropy>0,K=T.clearcoat>0,oe=T.dispersion>0,pe=T.iridescence>0,ce=T.sheen>0,Ue=T.transmission>0,Re=B&&!!T.anisotropyMap,Le=K&&!!T.clearcoatMap,Je=K&&!!T.clearcoatNormalMap,Me=K&&!!T.clearcoatRoughnessMap,ze=pe&&!!T.iridescenceMap,Ee=pe&&!!T.iridescenceThicknessMap,Pe=ce&&!!T.sheenColorMap,ke=ce&&!!T.sheenRoughnessMap,Ve=!!T.specularMap,$e=!!T.specularColorMap,xt=!!T.specularIntensityMap,te=Ue&&!!T.transmissionMap,Qe=Ue&&!!T.thicknessMap,Se=!!T.gradientMap,Oe=!!T.alphaMap,Ze=T.alphaTest>0,We=!!T.alphaHash,wt=!!T.extensions;let Rt=Qi;T.toneMapped&&(Q===null||Q.isXRRenderTarget===!0)&&(Rt=n.toneMapping);const dt={shaderID:V,shaderType:T.type,shaderName:T.name,vertexShader:J,fragmentShader:z,defines:T.defines,customVertexShaderID:j,customFragmentShaderID:X,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:p,batching:me,batchingColor:me&&L._colorsTexture!==null,instancing:ye,instancingColor:ye&&L.instanceColor!==null,instancingMorph:ye&&L.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:Q===null?n.outputColorSpace:Q.isXRRenderTarget===!0?Q.texture.colorSpace:Vo,alphaToCoverage:!!T.alphaToCoverage,map:fe,matcap:le,envMap:ge,envMapMode:ge&&F.mapping,envMapCubeUVHeight:O,aoMap:q,lightMap:ve,bumpMap:be,normalMap:xe,displacementMap:h&&we,emissiveMap:qe,normalMapObjectSpace:xe&&T.normalMapType===ik,normalMapTangentSpace:xe&&T.normalMapType===qa,metalnessMap:Fe,roughnessMap:H,anisotropy:B,anisotropyMap:Re,clearcoat:K,clearcoatMap:Le,clearcoatNormalMap:Je,clearcoatRoughnessMap:Me,dispersion:oe,iridescence:pe,iridescenceMap:ze,iridescenceThicknessMap:Ee,sheen:ce,sheenColorMap:Pe,sheenRoughnessMap:ke,specularMap:Ve,specularColorMap:$e,specularIntensityMap:xt,transmission:Ue,transmissionMap:te,thicknessMap:Qe,gradientMap:Se,opaque:T.transparent===!1&&T.blending===ko&&T.alphaToCoverage===!1,alphaMap:Oe,alphaTest:Ze,alphaHash:We,combine:T.combine,mapUv:fe&&y(T.map.channel),aoMapUv:q&&y(T.aoMap.channel),lightMapUv:ve&&y(T.lightMap.channel),bumpMapUv:be&&y(T.bumpMap.channel),normalMapUv:xe&&y(T.normalMap.channel),displacementMapUv:we&&y(T.displacementMap.channel),emissiveMapUv:qe&&y(T.emissiveMap.channel),metalnessMapUv:Fe&&y(T.metalnessMap.channel),roughnessMapUv:H&&y(T.roughnessMap.channel),anisotropyMapUv:Re&&y(T.anisotropyMap.channel),clearcoatMapUv:Le&&y(T.clearcoatMap.channel),clearcoatNormalMapUv:Je&&y(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&y(T.clearcoatRoughnessMap.channel),iridescenceMapUv:ze&&y(T.iridescenceMap.channel),iridescenceThicknessMapUv:Ee&&y(T.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&y(T.sheenColorMap.channel),sheenRoughnessMapUv:ke&&y(T.sheenRoughnessMap.channel),specularMapUv:Ve&&y(T.specularMap.channel),specularColorMapUv:$e&&y(T.specularColorMap.channel),specularIntensityMapUv:xt&&y(T.specularIntensityMap.channel),transmissionMapUv:te&&y(T.transmissionMap.channel),thicknessMapUv:Qe&&y(T.thicknessMap.channel),alphaMapUv:Oe&&y(T.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(xe||B),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!I.attributes.uv&&(fe||Oe),fog:!!A,useFog:T.fog===!0,fogExp2:!!A&&A.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:ne,skinning:L.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:W,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:Rt,decodeVideoTexture:fe&&T.map.isVideoTexture===!0&&rn.getTransfer(T.map.colorSpace)===Mn,decodeVideoTextureEmissive:qe&&T.emissiveMap.isVideoTexture===!0&&rn.getTransfer(T.emissiveMap.colorSpace)===Mn,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Ei,flipSided:T.side===er,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:wt&&T.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(wt&&T.extensions.multiDraw===!0||me)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return dt.vertexUv1s=u.has(1),dt.vertexUv2s=u.has(2),dt.vertexUv3s=u.has(3),u.clear(),dt}function m(T){const R=[];if(T.shaderID?R.push(T.shaderID):(R.push(T.customVertexShaderID),R.push(T.customFragmentShaderID)),T.defines!==void 0)for(const P in T.defines)R.push(P),R.push(T.defines[P]);return T.isRawShaderMaterial===!1&&(x(R,T),b(R,T),R.push(n.outputColorSpace)),R.push(T.customProgramCacheKey),R.join()}function x(T,R){T.push(R.precision),T.push(R.outputColorSpace),T.push(R.envMapMode),T.push(R.envMapCubeUVHeight),T.push(R.mapUv),T.push(R.alphaMapUv),T.push(R.lightMapUv),T.push(R.aoMapUv),T.push(R.bumpMapUv),T.push(R.normalMapUv),T.push(R.displacementMapUv),T.push(R.emissiveMapUv),T.push(R.metalnessMapUv),T.push(R.roughnessMapUv),T.push(R.anisotropyMapUv),T.push(R.clearcoatMapUv),T.push(R.clearcoatNormalMapUv),T.push(R.clearcoatRoughnessMapUv),T.push(R.iridescenceMapUv),T.push(R.iridescenceThicknessMapUv),T.push(R.sheenColorMapUv),T.push(R.sheenRoughnessMapUv),T.push(R.specularMapUv),T.push(R.specularColorMapUv),T.push(R.specularIntensityMapUv),T.push(R.transmissionMapUv),T.push(R.thicknessMapUv),T.push(R.combine),T.push(R.fogExp2),T.push(R.sizeAttenuation),T.push(R.morphTargetsCount),T.push(R.morphAttributeCount),T.push(R.numDirLights),T.push(R.numPointLights),T.push(R.numSpotLights),T.push(R.numSpotLightMaps),T.push(R.numHemiLights),T.push(R.numRectAreaLights),T.push(R.numDirLightShadows),T.push(R.numPointLightShadows),T.push(R.numSpotLightShadows),T.push(R.numSpotLightShadowsWithMaps),T.push(R.numLightProbes),T.push(R.shadowMapType),T.push(R.toneMapping),T.push(R.numClippingPlanes),T.push(R.numClipIntersection),T.push(R.depthPacking)}function b(T,R){l.disableAll(),R.supportsVertexTextures&&l.enable(0),R.instancing&&l.enable(1),R.instancingColor&&l.enable(2),R.instancingMorph&&l.enable(3),R.matcap&&l.enable(4),R.envMap&&l.enable(5),R.normalMapObjectSpace&&l.enable(6),R.normalMapTangentSpace&&l.enable(7),R.clearcoat&&l.enable(8),R.iridescence&&l.enable(9),R.alphaTest&&l.enable(10),R.vertexColors&&l.enable(11),R.vertexAlphas&&l.enable(12),R.vertexUv1s&&l.enable(13),R.vertexUv2s&&l.enable(14),R.vertexUv3s&&l.enable(15),R.vertexTangents&&l.enable(16),R.anisotropy&&l.enable(17),R.alphaHash&&l.enable(18),R.batching&&l.enable(19),R.dispersion&&l.enable(20),R.batchingColor&&l.enable(21),T.push(l.mask),l.disableAll(),R.fog&&l.enable(0),R.useFog&&l.enable(1),R.flatShading&&l.enable(2),R.logarithmicDepthBuffer&&l.enable(3),R.reverseDepthBuffer&&l.enable(4),R.skinning&&l.enable(5),R.morphTargets&&l.enable(6),R.morphNormals&&l.enable(7),R.morphColors&&l.enable(8),R.premultipliedAlpha&&l.enable(9),R.shadowMapEnabled&&l.enable(10),R.doubleSided&&l.enable(11),R.flipSided&&l.enable(12),R.useDepthPacking&&l.enable(13),R.dithering&&l.enable(14),R.transmission&&l.enable(15),R.sheen&&l.enable(16),R.opaque&&l.enable(17),R.pointsUvs&&l.enable(18),R.decodeVideoTexture&&l.enable(19),R.decodeVideoTextureEmissive&&l.enable(20),R.alphaToCoverage&&l.enable(21),T.push(l.mask)}function S(T){const R=g[T.type];let P;if(R){const D=Fs[R];P=Ay.clone(D.uniforms)}else P=T.uniforms;return P}function w(T,R){let P;for(let D=0,L=d.length;D<L;D++){const A=d[D];if(A.cacheKey===R){P=A,++P.usedTimes;break}}return P===void 0&&(P=new ype(n,R,T,s),d.push(P)),P}function C(T){if(--T.usedTimes===0){const R=d.indexOf(T);d[R]=d[d.length-1],d.pop(),T.destroy()}}function E(T){c.remove(T)}function M(){c.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:S,acquireProgram:w,releaseProgram:C,releaseShaderCache:E,programs:d,dispose:M}}function wpe(){let n=new WeakMap;function e(a){return n.has(a)}function r(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function i(a){n.delete(a)}function o(a,l,c){n.get(a)[l]=c}function s(){n=new WeakMap}return{has:e,get:r,remove:i,update:o,dispose:s}}function Cpe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function uI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function dI(){const n=[];let e=0;const r=[],i=[],o=[];function s(){e=0,r.length=0,i.length=0,o.length=0}function a(f,h,p,g,y,v){let m=n[e];return m===void 0?(m={id:f.id,object:f,geometry:h,material:p,groupOrder:g,renderOrder:f.renderOrder,z:y,group:v},n[e]=m):(m.id=f.id,m.object=f,m.geometry=h,m.material=p,m.groupOrder=g,m.renderOrder=f.renderOrder,m.z=y,m.group=v),e++,m}function l(f,h,p,g,y,v){const m=a(f,h,p,g,y,v);p.transmission>0?i.push(m):p.transparent===!0?o.push(m):r.push(m)}function c(f,h,p,g,y,v){const m=a(f,h,p,g,y,v);p.transmission>0?i.unshift(m):p.transparent===!0?o.unshift(m):r.unshift(m)}function u(f,h){r.length>1&&r.sort(f||Cpe),i.length>1&&i.sort(h||uI),o.length>1&&o.sort(h||uI)}function d(){for(let f=e,h=n.length;f<h;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:r,transmissive:i,transparent:o,init:s,push:l,unshift:c,finish:d,sort:u}}function Epe(){let n=new WeakMap;function e(i,o){const s=n.get(i);let a;return s===void 0?(a=new dI,n.set(i,[a])):o>=s.length?(a=new dI,s.push(a)):a=s[o],a}function r(){n=new WeakMap}return{get:e,dispose:r}}function Tpe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new Y,color:new Tt};break;case"SpotLight":r={position:new Y,direction:new Y,color:new Tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Y,color:new Tt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Y,skyColor:new Tt,groundColor:new Tt};break;case"RectAreaLight":r={color:new Tt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return n[e.id]=r,r}}}function Mpe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=r,r}}}let Rpe=0;function Ape(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Npe(n){const e=new Tpe,r=Mpe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new Y);const o=new Y,s=new fn,a=new fn;function l(u){let d=0,f=0,h=0;for(let T=0;T<9;T++)i.probe[T].set(0,0,0);let p=0,g=0,y=0,v=0,m=0,x=0,b=0,S=0,w=0,C=0,E=0;u.sort(Ape);for(let T=0,R=u.length;T<R;T++){const P=u[T],D=P.color,L=P.intensity,A=P.distance,I=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)d+=D.r*L,f+=D.g*L,h+=D.b*L;else if(P.isLightProbe){for(let N=0;N<9;N++)i.probe[N].addScaledVector(P.sh.coefficients[N],L);E++}else if(P.isDirectionalLight){const N=e.get(P);if(N.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const F=P.shadow,O=r.get(P);O.shadowIntensity=F.intensity,O.shadowBias=F.bias,O.shadowNormalBias=F.normalBias,O.shadowRadius=F.radius,O.shadowMapSize=F.mapSize,i.directionalShadow[p]=O,i.directionalShadowMap[p]=I,i.directionalShadowMatrix[p]=P.shadow.matrix,x++}i.directional[p]=N,p++}else if(P.isSpotLight){const N=e.get(P);N.position.setFromMatrixPosition(P.matrixWorld),N.color.copy(D).multiplyScalar(L),N.distance=A,N.coneCos=Math.cos(P.angle),N.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),N.decay=P.decay,i.spot[y]=N;const F=P.shadow;if(P.map&&(i.spotLightMap[w]=P.map,w++,F.updateMatrices(P),P.castShadow&&C++),i.spotLightMatrix[y]=F.matrix,P.castShadow){const O=r.get(P);O.shadowIntensity=F.intensity,O.shadowBias=F.bias,O.shadowNormalBias=F.normalBias,O.shadowRadius=F.radius,O.shadowMapSize=F.mapSize,i.spotShadow[y]=O,i.spotShadowMap[y]=I,S++}y++}else if(P.isRectAreaLight){const N=e.get(P);N.color.copy(D).multiplyScalar(L),N.halfWidth.set(P.width*.5,0,0),N.halfHeight.set(0,P.height*.5,0),i.rectArea[v]=N,v++}else if(P.isPointLight){const N=e.get(P);if(N.color.copy(P.color).multiplyScalar(P.intensity),N.distance=P.distance,N.decay=P.decay,P.castShadow){const F=P.shadow,O=r.get(P);O.shadowIntensity=F.intensity,O.shadowBias=F.bias,O.shadowNormalBias=F.normalBias,O.shadowRadius=F.radius,O.shadowMapSize=F.mapSize,O.shadowCameraNear=F.camera.near,O.shadowCameraFar=F.camera.far,i.pointShadow[g]=O,i.pointShadowMap[g]=I,i.pointShadowMatrix[g]=P.shadow.matrix,b++}i.point[g]=N,g++}else if(P.isHemisphereLight){const N=e.get(P);N.skyColor.copy(P.color).multiplyScalar(L),N.groundColor.copy(P.groundColor).multiplyScalar(L),i.hemi[m]=N,m++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=gt.LTC_FLOAT_1,i.rectAreaLTC2=gt.LTC_FLOAT_2):(i.rectAreaLTC1=gt.LTC_HALF_1,i.rectAreaLTC2=gt.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=h;const M=i.hash;(M.directionalLength!==p||M.pointLength!==g||M.spotLength!==y||M.rectAreaLength!==v||M.hemiLength!==m||M.numDirectionalShadows!==x||M.numPointShadows!==b||M.numSpotShadows!==S||M.numSpotMaps!==w||M.numLightProbes!==E)&&(i.directional.length=p,i.spot.length=y,i.rectArea.length=v,i.point.length=g,i.hemi.length=m,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=S+w-C,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=E,M.directionalLength=p,M.pointLength=g,M.spotLength=y,M.rectAreaLength=v,M.hemiLength=m,M.numDirectionalShadows=x,M.numPointShadows=b,M.numSpotShadows=S,M.numSpotMaps=w,M.numLightProbes=E,i.version=Rpe++)}function c(u,d){let f=0,h=0,p=0,g=0,y=0;const v=d.matrixWorldInverse;for(let m=0,x=u.length;m<x;m++){const b=u[m];if(b.isDirectionalLight){const S=i.directional[f];S.direction.setFromMatrixPosition(b.matrixWorld),o.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),f++}else if(b.isSpotLight){const S=i.spot[p];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(b.matrixWorld),o.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),p++}else if(b.isRectAreaLight){const S=i.rectArea[g];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),a.identity(),s.copy(b.matrixWorld),s.premultiply(v),a.extractRotation(s),S.halfWidth.set(b.width*.5,0,0),S.halfHeight.set(0,b.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),g++}else if(b.isPointLight){const S=i.point[h];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),h++}else if(b.isHemisphereLight){const S=i.hemi[y];S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),y++}}}return{setup:l,setupView:c,state:i}}function fI(n){const e=new Npe(n),r=[],i=[];function o(d){u.camera=d,r.length=0,i.length=0}function s(d){r.push(d)}function a(d){i.push(d)}function l(){e.setup(r)}function c(d){e.setupView(r,d)}const u={lightsArray:r,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:o,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function Ppe(n){let e=new WeakMap;function r(o,s=0){const a=e.get(o);let l;return a===void 0?(l=new fI(n),e.set(o,[l])):s>=a.length?(l=new fI(n),a.push(l)):l=a[s],l}function i(){e=new WeakMap}return{get:r,dispose:i}}const Ope=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ipe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Dpe(n,e,r){let i=new s_;const o=new je,s=new je,a=new qt,l=new qce({depthPacking:_le}),c=new Xce,u={},d=r.maxTextureSize,f={[Cs]:er,[er]:Cs,[Ei]:Ei},h=new Gi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:Ope,fragmentShader:Ipe}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new Li;g.setAttribute("position",new ri(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Br(g,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=aM;let m=this.type;this.render=function(C,E,M){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||C.length===0)return;const T=n.getRenderTarget(),R=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),D=n.state;D.setBlending(Ri),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const L=m!==ho&&this.type===ho,A=m===ho&&this.type!==ho;for(let I=0,N=C.length;I<N;I++){const F=C[I],O=F.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;o.copy(O.mapSize);const V=O.getFrameExtents();if(o.multiply(V),s.copy(O.mapSize),(o.x>d||o.y>d)&&(o.x>d&&(s.x=Math.floor(d/V.x),o.x=s.x*V.x,O.mapSize.x=s.x),o.y>d&&(s.y=Math.floor(d/V.y),o.y=s.y*V.y,O.mapSize.y=s.y)),O.map===null||L===!0||A===!0){const k=this.type!==ho?{minFilter:qn,magFilter:qn}:{};O.map!==null&&O.map.dispose(),O.map=new Ss(o.x,o.y,k),O.map.texture.name=F.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const U=O.getViewportCount();for(let k=0;k<U;k++){const W=O.getViewport(k);a.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),D.viewport(a),O.updateMatrices(F,k),i=O.getFrustum(),S(E,M,O.camera,F,this.type)}O.isPointLightShadow!==!0&&this.type===ho&&x(O,M),O.needsUpdate=!1}m=this.type,v.needsUpdate=!1,n.setRenderTarget(T,R,P)};function x(C,E){const M=e.update(y);h.defines.VSM_SAMPLES!==C.blurSamples&&(h.defines.VSM_SAMPLES=C.blurSamples,p.defines.VSM_SAMPLES=C.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Ss(o.x,o.y)),h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(E,null,M,h,y,null),p.uniforms.shadow_pass.value=C.mapPass.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(E,null,M,p,y,null)}function b(C,E,M,T){let R=null;const P=M.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(P!==void 0)R=P;else if(R=M.isPointLight===!0?c:l,n.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const D=R.uuid,L=E.uuid;let A=u[D];A===void 0&&(A={},u[D]=A);let I=A[L];I===void 0&&(I=R.clone(),A[L]=I,E.addEventListener("dispose",w)),R=I}if(R.visible=E.visible,R.wireframe=E.wireframe,T===ho?R.side=E.shadowSide!==null?E.shadowSide:E.side:R.side=E.shadowSide!==null?E.shadowSide:f[E.side],R.alphaMap=E.alphaMap,R.alphaTest=E.alphaTest,R.map=E.map,R.clipShadows=E.clipShadows,R.clippingPlanes=E.clippingPlanes,R.clipIntersection=E.clipIntersection,R.displacementMap=E.displacementMap,R.displacementScale=E.displacementScale,R.displacementBias=E.displacementBias,R.wireframeLinewidth=E.wireframeLinewidth,R.linewidth=E.linewidth,M.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const D=n.properties.get(R);D.light=M}return R}function S(C,E,M,T,R){if(C.visible===!1)return;if(C.layers.test(E.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&R===ho)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,C.matrixWorld);const L=e.update(C),A=C.material;if(Array.isArray(A)){const I=L.groups;for(let N=0,F=I.length;N<F;N++){const O=I[N],V=A[O.materialIndex];if(V&&V.visible){const U=b(C,V,T,R);C.onBeforeShadow(n,C,E,M,L,U,O),n.renderBufferDirect(M,null,L,U,C,O),C.onAfterShadow(n,C,E,M,L,U,O)}}}else if(A.visible){const I=b(C,A,T,R);C.onBeforeShadow(n,C,E,M,L,I,null),n.renderBufferDirect(M,null,L,I,C,null),C.onAfterShadow(n,C,E,M,L,I,null)}}const D=C.children;for(let L=0,A=D.length;L<A;L++)S(D[L],E,M,T,R)}function w(C){C.target.removeEventListener("dispose",w);for(const M in u){const T=u[M],R=C.target.uuid;R in T&&(T[R].dispose(),delete T[R])}}}const Lpe={[dm]:fm,[hm]:gm,[pm]:vm,[ec]:mm,[fm]:dm,[gm]:hm,[vm]:pm,[mm]:ec};function Fpe(n,e){function r(){let te=!1;const Qe=new qt;let Se=null;const Oe=new qt(0,0,0,0);return{setMask:function(Ze){Se!==Ze&&!te&&(n.colorMask(Ze,Ze,Ze,Ze),Se=Ze)},setLocked:function(Ze){te=Ze},setClear:function(Ze,We,wt,Rt,dt){dt===!0&&(Ze*=Rt,We*=Rt,wt*=Rt),Qe.set(Ze,We,wt,Rt),Oe.equals(Qe)===!1&&(n.clearColor(Ze,We,wt,Rt),Oe.copy(Qe))},reset:function(){te=!1,Se=null,Oe.set(-1,0,0,0)}}}function i(){let te=!1,Qe=!1,Se=null,Oe=null,Ze=null;return{setReversed:function(We){if(Qe!==We){const wt=e.get("EXT_clip_control");Qe?wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.ZERO_TO_ONE_EXT):wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.NEGATIVE_ONE_TO_ONE_EXT);const Rt=Ze;Ze=null,this.setClear(Rt)}Qe=We},getReversed:function(){return Qe},setTest:function(We){We?Q(n.DEPTH_TEST):ne(n.DEPTH_TEST)},setMask:function(We){Se!==We&&!te&&(n.depthMask(We),Se=We)},setFunc:function(We){if(Qe&&(We=Lpe[We]),Oe!==We){switch(We){case dm:n.depthFunc(n.NEVER);break;case fm:n.depthFunc(n.ALWAYS);break;case hm:n.depthFunc(n.LESS);break;case ec:n.depthFunc(n.LEQUAL);break;case pm:n.depthFunc(n.EQUAL);break;case mm:n.depthFunc(n.GEQUAL);break;case gm:n.depthFunc(n.GREATER);break;case vm:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Oe=We}},setLocked:function(We){te=We},setClear:function(We){Ze!==We&&(Qe&&(We=1-We),n.clearDepth(We),Ze=We)},reset:function(){te=!1,Se=null,Oe=null,Ze=null,Qe=!1}}}function o(){let te=!1,Qe=null,Se=null,Oe=null,Ze=null,We=null,wt=null,Rt=null,dt=null;return{setTest:function(Xe){te||(Xe?Q(n.STENCIL_TEST):ne(n.STENCIL_TEST))},setMask:function(Xe){Qe!==Xe&&!te&&(n.stencilMask(Xe),Qe=Xe)},setFunc:function(Xe,rt,Lt){(Se!==Xe||Oe!==rt||Ze!==Lt)&&(n.stencilFunc(Xe,rt,Lt),Se=Xe,Oe=rt,Ze=Lt)},setOp:function(Xe,rt,Lt){(We!==Xe||wt!==rt||Rt!==Lt)&&(n.stencilOp(Xe,rt,Lt),We=Xe,wt=rt,Rt=Lt)},setLocked:function(Xe){te=Xe},setClear:function(Xe){dt!==Xe&&(n.clearStencil(Xe),dt=Xe)},reset:function(){te=!1,Qe=null,Se=null,Oe=null,Ze=null,We=null,wt=null,Rt=null,dt=null}}}const s=new r,a=new i,l=new o,c=new WeakMap,u=new WeakMap;let d={},f={},h=new WeakMap,p=[],g=null,y=!1,v=null,m=null,x=null,b=null,S=null,w=null,C=null,E=new Tt(0,0,0),M=0,T=!1,R=null,P=null,D=null,L=null,A=null;const I=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,F=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(O)[1]),N=F>=1):O.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),N=F>=2);let V=null,U={};const k=n.getParameter(n.SCISSOR_BOX),W=n.getParameter(n.VIEWPORT),J=new qt().fromArray(k),z=new qt().fromArray(W);function j(te,Qe,Se,Oe){const Ze=new Uint8Array(4),We=n.createTexture();n.bindTexture(te,We),n.texParameteri(te,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(te,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let wt=0;wt<Se;wt++)te===n.TEXTURE_3D||te===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,Oe,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(Qe+wt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return We}const X={};X[n.TEXTURE_2D]=j(n.TEXTURE_2D,n.TEXTURE_2D,1),X[n.TEXTURE_CUBE_MAP]=j(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),X[n.TEXTURE_2D_ARRAY]=j(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),X[n.TEXTURE_3D]=j(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Q(n.DEPTH_TEST),a.setFunc(ec),be(!1),xe(BC),Q(n.CULL_FACE),q(Ri);function Q(te){d[te]!==!0&&(n.enable(te),d[te]=!0)}function ne(te){d[te]!==!1&&(n.disable(te),d[te]=!1)}function ye(te,Qe){return f[te]!==Qe?(n.bindFramebuffer(te,Qe),f[te]=Qe,te===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Qe),te===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function me(te,Qe){let Se=p,Oe=!1;if(te){Se=h.get(Qe),Se===void 0&&(Se=[],h.set(Qe,Se));const Ze=te.textures;if(Se.length!==Ze.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let We=0,wt=Ze.length;We<wt;We++)Se[We]=n.COLOR_ATTACHMENT0+We;Se.length=Ze.length,Oe=!0}}else Se[0]!==n.BACK&&(Se[0]=n.BACK,Oe=!0);Oe&&n.drawBuffers(Se)}function fe(te){return g!==te?(n.useProgram(te),g=te,!0):!1}const le={[po]:n.FUNC_ADD,[cM]:n.FUNC_SUBTRACT,[uM]:n.FUNC_REVERSE_SUBTRACT};le[Xz]=n.MIN,le[Kz]=n.MAX;const ge={[dM]:n.ZERO,[fM]:n.ONE,[hM]:n.SRC_COLOR,[cm]:n.SRC_ALPHA,[xM]:n.SRC_ALPHA_SATURATE,[vM]:n.DST_COLOR,[mM]:n.DST_ALPHA,[pM]:n.ONE_MINUS_SRC_COLOR,[um]:n.ONE_MINUS_SRC_ALPHA,[yM]:n.ONE_MINUS_DST_COLOR,[gM]:n.ONE_MINUS_DST_ALPHA,[hle]:n.CONSTANT_COLOR,[ple]:n.ONE_MINUS_CONSTANT_COLOR,[mle]:n.CONSTANT_ALPHA,[gle]:n.ONE_MINUS_CONSTANT_ALPHA};function q(te,Qe,Se,Oe,Ze,We,wt,Rt,dt,Xe){if(te===Ri){y===!0&&(ne(n.BLEND),y=!1);return}if(y===!1&&(Q(n.BLEND),y=!0),te!==lM){if(te!==v||Xe!==T){if((m!==po||S!==po)&&(n.blendEquation(n.FUNC_ADD),m=po,S=po),Xe)switch(te){case ko:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case du:n.blendFunc(n.ONE,n.ONE);break;case hf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case pf:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}else switch(te){case ko:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case du:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case hf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case pf:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}x=null,b=null,w=null,C=null,E.set(0,0,0),M=0,v=te,T=Xe}return}Ze=Ze||Qe,We=We||Se,wt=wt||Oe,(Qe!==m||Ze!==S)&&(n.blendEquationSeparate(le[Qe],le[Ze]),m=Qe,S=Ze),(Se!==x||Oe!==b||We!==w||wt!==C)&&(n.blendFuncSeparate(ge[Se],ge[Oe],ge[We],ge[wt]),x=Se,b=Oe,w=We,C=wt),(Rt.equals(E)===!1||dt!==M)&&(n.blendColor(Rt.r,Rt.g,Rt.b,dt),E.copy(Rt),M=dt),v=te,T=!1}function ve(te,Qe){te.side===Ei?ne(n.CULL_FACE):Q(n.CULL_FACE);let Se=te.side===er;Qe&&(Se=!Se),be(Se),te.blending===ko&&te.transparent===!1?q(Ri):q(te.blending,te.blendEquation,te.blendSrc,te.blendDst,te.blendEquationAlpha,te.blendSrcAlpha,te.blendDstAlpha,te.blendColor,te.blendAlpha,te.premultipliedAlpha),a.setFunc(te.depthFunc),a.setTest(te.depthTest),a.setMask(te.depthWrite),s.setMask(te.colorWrite);const Oe=te.stencilWrite;l.setTest(Oe),Oe&&(l.setMask(te.stencilWriteMask),l.setFunc(te.stencilFunc,te.stencilRef,te.stencilFuncMask),l.setOp(te.stencilFail,te.stencilZFail,te.stencilZPass)),qe(te.polygonOffset,te.polygonOffsetFactor,te.polygonOffsetUnits),te.alphaToCoverage===!0?Q(n.SAMPLE_ALPHA_TO_COVERAGE):ne(n.SAMPLE_ALPHA_TO_COVERAGE)}function be(te){R!==te&&(te?n.frontFace(n.CW):n.frontFace(n.CCW),R=te)}function xe(te){te!==Wz?(Q(n.CULL_FACE),te!==P&&(te===BC?n.cullFace(n.BACK):te===qz?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ne(n.CULL_FACE),P=te}function we(te){te!==D&&(N&&n.lineWidth(te),D=te)}function qe(te,Qe,Se){te?(Q(n.POLYGON_OFFSET_FILL),(L!==Qe||A!==Se)&&(n.polygonOffset(Qe,Se),L=Qe,A=Se)):ne(n.POLYGON_OFFSET_FILL)}function Fe(te){te?Q(n.SCISSOR_TEST):ne(n.SCISSOR_TEST)}function H(te){te===void 0&&(te=n.TEXTURE0+I-1),V!==te&&(n.activeTexture(te),V=te)}function B(te,Qe,Se){Se===void 0&&(V===null?Se=n.TEXTURE0+I-1:Se=V);let Oe=U[Se];Oe===void 0&&(Oe={type:void 0,texture:void 0},U[Se]=Oe),(Oe.type!==te||Oe.texture!==Qe)&&(V!==Se&&(n.activeTexture(Se),V=Se),n.bindTexture(te,Qe||X[te]),Oe.type=te,Oe.texture=Qe)}function K(){const te=U[V];te!==void 0&&te.type!==void 0&&(n.bindTexture(te.type,null),te.type=void 0,te.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ce(){try{n.texSubImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ue(){try{n.texSubImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Le(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Je(){try{n.texStorage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Me(){try{n.texStorage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ze(){try{n.texImage2D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ee(){try{n.texImage3D.apply(n,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Pe(te){J.equals(te)===!1&&(n.scissor(te.x,te.y,te.z,te.w),J.copy(te))}function ke(te){z.equals(te)===!1&&(n.viewport(te.x,te.y,te.z,te.w),z.copy(te))}function Ve(te,Qe){let Se=u.get(Qe);Se===void 0&&(Se=new WeakMap,u.set(Qe,Se));let Oe=Se.get(te);Oe===void 0&&(Oe=n.getUniformBlockIndex(Qe,te.name),Se.set(te,Oe))}function $e(te,Qe){const Oe=u.get(Qe).get(te);c.get(Qe)!==Oe&&(n.uniformBlockBinding(Qe,Oe,te.__bindingPointIndex),c.set(Qe,Oe))}function xt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},V=null,U={},f={},h=new WeakMap,p=[],g=null,y=!1,v=null,m=null,x=null,b=null,S=null,w=null,C=null,E=new Tt(0,0,0),M=0,T=!1,R=null,P=null,D=null,L=null,A=null,J.set(0,0,n.canvas.width,n.canvas.height),z.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:Q,disable:ne,bindFramebuffer:ye,drawBuffers:me,useProgram:fe,setBlending:q,setMaterial:ve,setFlipSided:be,setCullFace:xe,setLineWidth:we,setPolygonOffset:qe,setScissorTest:Fe,activeTexture:H,bindTexture:B,unbindTexture:K,compressedTexImage2D:oe,compressedTexImage3D:pe,texImage2D:ze,texImage3D:Ee,updateUBOMapping:Ve,uniformBlockBinding:$e,texStorage2D:Je,texStorage3D:Me,texSubImage2D:ce,texSubImage3D:Ue,compressedTexSubImage2D:Re,compressedTexSubImage3D:Le,scissor:Pe,viewport:ke,reset:xt}}function Upe(n,e,r,i,o,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new je,d=new WeakMap;let f;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(H,B){return p?new OffscreenCanvas(H,B):Tm("canvas")}function y(H,B,K){let oe=1;const pe=Fe(H);if((pe.width>K||pe.height>K)&&(oe=K/Math.max(pe.width,pe.height)),oe<1)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const ce=Math.floor(oe*pe.width),Ue=Math.floor(oe*pe.height);f===void 0&&(f=g(ce,Ue));const Re=B?g(ce,Ue):f;return Re.width=ce,Re.height=Ue,Re.getContext("2d").drawImage(H,0,0,ce,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+ce+"x"+Ue+")."),Re}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),H;return H}function v(H){return H.generateMipmaps}function m(H){n.generateMipmap(H)}function x(H){return H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:H.isWebGL3DRenderTarget?n.TEXTURE_3D:H.isWebGLArrayRenderTarget||H.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function b(H,B,K,oe,pe=!1){if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let ce=B;if(B===n.RED&&(K===n.FLOAT&&(ce=n.R32F),K===n.HALF_FLOAT&&(ce=n.R16F),K===n.UNSIGNED_BYTE&&(ce=n.R8)),B===n.RED_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.R8UI),K===n.UNSIGNED_SHORT&&(ce=n.R16UI),K===n.UNSIGNED_INT&&(ce=n.R32UI),K===n.BYTE&&(ce=n.R8I),K===n.SHORT&&(ce=n.R16I),K===n.INT&&(ce=n.R32I)),B===n.RG&&(K===n.FLOAT&&(ce=n.RG32F),K===n.HALF_FLOAT&&(ce=n.RG16F),K===n.UNSIGNED_BYTE&&(ce=n.RG8)),B===n.RG_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.RG8UI),K===n.UNSIGNED_SHORT&&(ce=n.RG16UI),K===n.UNSIGNED_INT&&(ce=n.RG32UI),K===n.BYTE&&(ce=n.RG8I),K===n.SHORT&&(ce=n.RG16I),K===n.INT&&(ce=n.RG32I)),B===n.RGB_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.RGB8UI),K===n.UNSIGNED_SHORT&&(ce=n.RGB16UI),K===n.UNSIGNED_INT&&(ce=n.RGB32UI),K===n.BYTE&&(ce=n.RGB8I),K===n.SHORT&&(ce=n.RGB16I),K===n.INT&&(ce=n.RGB32I)),B===n.RGBA_INTEGER&&(K===n.UNSIGNED_BYTE&&(ce=n.RGBA8UI),K===n.UNSIGNED_SHORT&&(ce=n.RGBA16UI),K===n.UNSIGNED_INT&&(ce=n.RGBA32UI),K===n.BYTE&&(ce=n.RGBA8I),K===n.SHORT&&(ce=n.RGBA16I),K===n.INT&&(ce=n.RGBA32I)),B===n.RGB&&K===n.UNSIGNED_INT_5_9_9_9_REV&&(ce=n.RGB9_E5),B===n.RGBA){const Ue=pe?Ty:rn.getTransfer(oe);K===n.FLOAT&&(ce=n.RGBA32F),K===n.HALF_FLOAT&&(ce=n.RGBA16F),K===n.UNSIGNED_BYTE&&(ce=Ue===Mn?n.SRGB8_ALPHA8:n.RGBA8),K===n.UNSIGNED_SHORT_4_4_4_4&&(ce=n.RGBA4),K===n.UNSIGNED_SHORT_5_5_5_1&&(ce=n.RGB5_A1)}return(ce===n.R16F||ce===n.R32F||ce===n.RG16F||ce===n.RG32F||ce===n.RGBA16F||ce===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ce}function S(H,B){let K;return H?B===null||B===rr||B===Ks?K=n.DEPTH24_STENCIL8:B===hr?K=n.DEPTH32F_STENCIL8:B===vs&&(K=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===rr||B===Ks?K=n.DEPTH_COMPONENT24:B===hr?K=n.DEPTH_COMPONENT32F:B===vs&&(K=n.DEPTH_COMPONENT16),K}function w(H,B){return v(H)===!0||H.isFramebufferTexture&&H.minFilter!==qn&&H.minFilter!==Ur?Math.log2(Math.max(B.width,B.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?B.mipmaps.length:1}function C(H){const B=H.target;B.removeEventListener("dispose",C),M(B),B.isVideoTexture&&d.delete(B)}function E(H){const B=H.target;B.removeEventListener("dispose",E),R(B)}function M(H){const B=i.get(H);if(B.__webglInit===void 0)return;const K=H.source,oe=h.get(K);if(oe){const pe=oe[B.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&T(H),Object.keys(oe).length===0&&h.delete(K)}i.remove(H)}function T(H){const B=i.get(H);n.deleteTexture(B.__webglTexture);const K=H.source,oe=h.get(K);delete oe[B.__cacheKey],a.memory.textures--}function R(H){const B=i.get(H);if(H.depthTexture&&(H.depthTexture.dispose(),i.remove(H.depthTexture)),H.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(B.__webglFramebuffer[oe]))for(let pe=0;pe<B.__webglFramebuffer[oe].length;pe++)n.deleteFramebuffer(B.__webglFramebuffer[oe][pe]);else n.deleteFramebuffer(B.__webglFramebuffer[oe]);B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer[oe])}else{if(Array.isArray(B.__webglFramebuffer))for(let oe=0;oe<B.__webglFramebuffer.length;oe++)n.deleteFramebuffer(B.__webglFramebuffer[oe]);else n.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&n.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let oe=0;oe<B.__webglColorRenderbuffer.length;oe++)B.__webglColorRenderbuffer[oe]&&n.deleteRenderbuffer(B.__webglColorRenderbuffer[oe]);B.__webglDepthRenderbuffer&&n.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const K=H.textures;for(let oe=0,pe=K.length;oe<pe;oe++){const ce=i.get(K[oe]);ce.__webglTexture&&(n.deleteTexture(ce.__webglTexture),a.memory.textures--),i.remove(K[oe])}i.remove(H)}let P=0;function D(){P=0}function L(){const H=P;return H>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+o.maxTextures),P+=1,H}function A(H){const B=[];return B.push(H.wrapS),B.push(H.wrapT),B.push(H.wrapR||0),B.push(H.magFilter),B.push(H.minFilter),B.push(H.anisotropy),B.push(H.internalFormat),B.push(H.format),B.push(H.type),B.push(H.generateMipmaps),B.push(H.premultiplyAlpha),B.push(H.flipY),B.push(H.unpackAlignment),B.push(H.colorSpace),B.join()}function I(H,B){const K=i.get(H);if(H.isVideoTexture&&we(H),H.isRenderTargetTexture===!1&&H.version>0&&K.__version!==H.version){const oe=H.image;if(oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{z(K,H,B);return}}r.bindTexture(n.TEXTURE_2D,K.__webglTexture,n.TEXTURE0+B)}function N(H,B){const K=i.get(H);if(H.version>0&&K.__version!==H.version){z(K,H,B);return}r.bindTexture(n.TEXTURE_2D_ARRAY,K.__webglTexture,n.TEXTURE0+B)}function F(H,B){const K=i.get(H);if(H.version>0&&K.__version!==H.version){z(K,H,B);return}r.bindTexture(n.TEXTURE_3D,K.__webglTexture,n.TEXTURE0+B)}function O(H,B){const K=i.get(H);if(H.version>0&&K.__version!==H.version){j(K,H,B);return}r.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+B)}const V={[hu]:n.REPEAT,[$s]:n.CLAMP_TO_EDGE,[pu]:n.MIRRORED_REPEAT},U={[qn]:n.NEAREST,[Ey]:n.NEAREST_MIPMAP_NEAREST,[zs]:n.NEAREST_MIPMAP_LINEAR,[Ur]:n.LINEAR,[kd]:n.LINEAR_MIPMAP_NEAREST,[Vi]:n.LINEAR_MIPMAP_LINEAR},k={[EM]:n.NEVER,[NM]:n.ALWAYS,[t_]:n.LESS,[n_]:n.LEQUAL,[TM]:n.EQUAL,[AM]:n.GEQUAL,[MM]:n.GREATER,[RM]:n.NOTEQUAL};function W(H,B){if(B.type===hr&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Ur||B.magFilter===kd||B.magFilter===zs||B.magFilter===Vi||B.minFilter===Ur||B.minFilter===kd||B.minFilter===zs||B.minFilter===Vi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(H,n.TEXTURE_WRAP_S,V[B.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,V[B.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,V[B.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,U[B.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,U[B.minFilter]),B.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,k[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===qn||B.minFilter!==zs&&B.minFilter!==Vi||B.type===hr&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||i.get(B).__currentAnisotropy){const K=e.get("EXT_texture_filter_anisotropic");n.texParameterf(H,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,o.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy}}}function J(H,B){let K=!1;H.__webglInit===void 0&&(H.__webglInit=!0,B.addEventListener("dispose",C));const oe=B.source;let pe=h.get(oe);pe===void 0&&(pe={},h.set(oe,pe));const ce=A(B);if(ce!==H.__cacheKey){pe[ce]===void 0&&(pe[ce]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,K=!0),pe[ce].usedTimes++;const Ue=pe[H.__cacheKey];Ue!==void 0&&(pe[H.__cacheKey].usedTimes--,Ue.usedTimes===0&&T(B)),H.__cacheKey=ce,H.__webglTexture=pe[ce].texture}return K}function z(H,B,K){let oe=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(oe=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(oe=n.TEXTURE_3D);const pe=J(H,B),ce=B.source;r.bindTexture(oe,H.__webglTexture,n.TEXTURE0+K);const Ue=i.get(ce);if(ce.version!==Ue.__version||pe===!0){r.activeTexture(n.TEXTURE0+K);const Re=rn.getPrimaries(rn.workingColorSpace),Le=B.colorSpace===mo?null:rn.getPrimaries(B.colorSpace),Je=B.colorSpace===mo||Re===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let Me=y(B.image,!1,o.maxTextureSize);Me=qe(B,Me);const ze=s.convert(B.format,B.colorSpace),Ee=s.convert(B.type);let Pe=b(B.internalFormat,ze,Ee,B.colorSpace,B.isVideoTexture);W(oe,B);let ke;const Ve=B.mipmaps,$e=B.isVideoTexture!==!0,xt=Ue.__version===void 0||pe===!0,te=ce.dataReady,Qe=w(B,Me);if(B.isDepthTexture)Pe=S(B.format===Ys,B.type),xt&&($e?r.texStorage2D(n.TEXTURE_2D,1,Pe,Me.width,Me.height):r.texImage2D(n.TEXTURE_2D,0,Pe,Me.width,Me.height,0,ze,Ee,null));else if(B.isDataTexture)if(Ve.length>0){$e&&xt&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Ve[0].width,Ve[0].height);for(let Se=0,Oe=Ve.length;Se<Oe;Se++)ke=Ve[Se],$e?te&&r.texSubImage2D(n.TEXTURE_2D,Se,0,0,ke.width,ke.height,ze,Ee,ke.data):r.texImage2D(n.TEXTURE_2D,Se,Pe,ke.width,ke.height,0,ze,Ee,ke.data);B.generateMipmaps=!1}else $e?(xt&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Me.width,Me.height),te&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,Me.width,Me.height,ze,Ee,Me.data)):r.texImage2D(n.TEXTURE_2D,0,Pe,Me.width,Me.height,0,ze,Ee,Me.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){$e&&xt&&r.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Pe,Ve[0].width,Ve[0].height,Me.depth);for(let Se=0,Oe=Ve.length;Se<Oe;Se++)if(ke=Ve[Se],B.format!==ti)if(ze!==null)if($e){if(te)if(B.layerUpdates.size>0){const Ze=VO(ke.width,ke.height,B.format,B.type);for(const We of B.layerUpdates){const wt=ke.data.subarray(We*Ze/ke.data.BYTES_PER_ELEMENT,(We+1)*Ze/ke.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,We,ke.width,ke.height,1,ze,wt)}B.clearLayerUpdates()}else r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ke.width,ke.height,Me.depth,ze,ke.data)}else r.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Se,Pe,ke.width,ke.height,Me.depth,0,ke.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $e?te&&r.texSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ke.width,ke.height,Me.depth,ze,Ee,ke.data):r.texImage3D(n.TEXTURE_2D_ARRAY,Se,Pe,ke.width,ke.height,Me.depth,0,ze,Ee,ke.data)}else{$e&&xt&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Ve[0].width,Ve[0].height);for(let Se=0,Oe=Ve.length;Se<Oe;Se++)ke=Ve[Se],B.format!==ti?ze!==null?$e?te&&r.compressedTexSubImage2D(n.TEXTURE_2D,Se,0,0,ke.width,ke.height,ze,ke.data):r.compressedTexImage2D(n.TEXTURE_2D,Se,Pe,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?te&&r.texSubImage2D(n.TEXTURE_2D,Se,0,0,ke.width,ke.height,ze,Ee,ke.data):r.texImage2D(n.TEXTURE_2D,Se,Pe,ke.width,ke.height,0,ze,Ee,ke.data)}else if(B.isDataArrayTexture)if($e){if(xt&&r.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Pe,Me.width,Me.height,Me.depth),te)if(B.layerUpdates.size>0){const Se=VO(Me.width,Me.height,B.format,B.type);for(const Oe of B.layerUpdates){const Ze=Me.data.subarray(Oe*Se/Me.data.BYTES_PER_ELEMENT,(Oe+1)*Se/Me.data.BYTES_PER_ELEMENT);r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Oe,Me.width,Me.height,1,ze,Ee,Ze)}B.clearLayerUpdates()}else r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,ze,Ee,Me.data)}else r.texImage3D(n.TEXTURE_2D_ARRAY,0,Pe,Me.width,Me.height,Me.depth,0,ze,Ee,Me.data);else if(B.isData3DTexture)$e?(xt&&r.texStorage3D(n.TEXTURE_3D,Qe,Pe,Me.width,Me.height,Me.depth),te&&r.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,ze,Ee,Me.data)):r.texImage3D(n.TEXTURE_3D,0,Pe,Me.width,Me.height,Me.depth,0,ze,Ee,Me.data);else if(B.isFramebufferTexture){if(xt)if($e)r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Me.width,Me.height);else{let Se=Me.width,Oe=Me.height;for(let Ze=0;Ze<Qe;Ze++)r.texImage2D(n.TEXTURE_2D,Ze,Pe,Se,Oe,0,ze,Ee,null),Se>>=1,Oe>>=1}}else if(Ve.length>0){if($e&&xt){const Se=Fe(Ve[0]);r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Se.width,Se.height)}for(let Se=0,Oe=Ve.length;Se<Oe;Se++)ke=Ve[Se],$e?te&&r.texSubImage2D(n.TEXTURE_2D,Se,0,0,ze,Ee,ke):r.texImage2D(n.TEXTURE_2D,Se,Pe,ze,Ee,ke);B.generateMipmaps=!1}else if($e){if(xt){const Se=Fe(Me);r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Se.width,Se.height)}te&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,ze,Ee,Me)}else r.texImage2D(n.TEXTURE_2D,0,Pe,ze,Ee,Me);v(B)&&m(oe),Ue.__version=ce.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function j(H,B,K){if(B.image.length!==6)return;const oe=J(H,B),pe=B.source;r.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+K);const ce=i.get(pe);if(pe.version!==ce.__version||oe===!0){r.activeTexture(n.TEXTURE0+K);const Ue=rn.getPrimaries(rn.workingColorSpace),Re=B.colorSpace===mo?null:rn.getPrimaries(B.colorSpace),Le=B.colorSpace===mo||Ue===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Le);const Je=B.isCompressedTexture||B.image[0].isCompressedTexture,Me=B.image[0]&&B.image[0].isDataTexture,ze=[];for(let Oe=0;Oe<6;Oe++)!Je&&!Me?ze[Oe]=y(B.image[Oe],!0,o.maxCubemapSize):ze[Oe]=Me?B.image[Oe].image:B.image[Oe],ze[Oe]=qe(B,ze[Oe]);const Ee=ze[0],Pe=s.convert(B.format,B.colorSpace),ke=s.convert(B.type),Ve=b(B.internalFormat,Pe,ke,B.colorSpace),$e=B.isVideoTexture!==!0,xt=ce.__version===void 0||oe===!0,te=pe.dataReady;let Qe=w(B,Ee);W(n.TEXTURE_CUBE_MAP,B);let Se;if(Je){$e&&xt&&r.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ve,Ee.width,Ee.height);for(let Oe=0;Oe<6;Oe++){Se=ze[Oe].mipmaps;for(let Ze=0;Ze<Se.length;Ze++){const We=Se[Ze];B.format!==ti?Pe!==null?$e?te&&r.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,0,0,We.width,We.height,Pe,We.data):r.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,Ve,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,0,0,We.width,We.height,Pe,ke,We.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,Ve,We.width,We.height,0,Pe,ke,We.data)}}}else{if(Se=B.mipmaps,$e&&xt){Se.length>0&&Qe++;const Oe=Fe(ze[0]);r.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ve,Oe.width,Oe.height)}for(let Oe=0;Oe<6;Oe++)if(Me){$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,ze[Oe].width,ze[Oe].height,Pe,ke,ze[Oe].data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,Ve,ze[Oe].width,ze[Oe].height,0,Pe,ke,ze[Oe].data);for(let Ze=0;Ze<Se.length;Ze++){const wt=Se[Ze].image[Oe].image;$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,0,0,wt.width,wt.height,Pe,ke,wt.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,Ve,wt.width,wt.height,0,Pe,ke,wt.data)}}else{$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,Pe,ke,ze[Oe]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,Ve,Pe,ke,ze[Oe]);for(let Ze=0;Ze<Se.length;Ze++){const We=Se[Ze];$e?te&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,0,0,Pe,ke,We.image[Oe]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,Ve,Pe,ke,We.image[Oe])}}}v(B)&&m(n.TEXTURE_CUBE_MAP),ce.__version=pe.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function X(H,B,K,oe,pe,ce){const Ue=s.convert(K.format,K.colorSpace),Re=s.convert(K.type),Le=b(K.internalFormat,Ue,Re,K.colorSpace),Je=i.get(B),Me=i.get(K);if(Me.__renderTarget=B,!Je.__hasExternalTextures){const ze=Math.max(1,B.width>>ce),Ee=Math.max(1,B.height>>ce);pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?r.texImage3D(pe,ce,Le,ze,Ee,B.depth,0,Ue,Re,null):r.texImage2D(pe,ce,Le,ze,Ee,0,Ue,Re,null)}r.bindFramebuffer(n.FRAMEBUFFER,H),xe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,oe,pe,Me.__webglTexture,0,be(B)):(pe===n.TEXTURE_2D||pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,oe,pe,Me.__webglTexture,ce),r.bindFramebuffer(n.FRAMEBUFFER,null)}function Q(H,B,K){if(n.bindRenderbuffer(n.RENDERBUFFER,H),B.depthBuffer){const oe=B.depthTexture,pe=oe&&oe.isDepthTexture?oe.type:null,ce=S(B.stencilBuffer,pe),Ue=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=be(B);xe(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,ce,B.width,B.height):K?n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,ce,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,ce,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,H)}else{const oe=B.textures;for(let pe=0;pe<oe.length;pe++){const ce=oe[pe],Ue=s.convert(ce.format,ce.colorSpace),Re=s.convert(ce.type),Le=b(ce.internalFormat,Ue,Re,ce.colorSpace),Je=be(B);K&&xe(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,Le,B.width,B.height):xe(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,Le,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,Le,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ne(H,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(n.FRAMEBUFFER,H),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const oe=i.get(B.depthTexture);oe.__renderTarget=B,(!oe.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),I(B.depthTexture,0);const pe=oe.__webglTexture,ce=be(B);if(B.depthTexture.format===Ws)xe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0,ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0);else if(B.depthTexture.format===Ys)xe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0,ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0);else throw new Error("Unknown depthTexture format")}function ye(H){const B=i.get(H),K=H.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==H.depthTexture){const oe=H.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),oe){const pe=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,oe.removeEventListener("dispose",pe)};oe.addEventListener("dispose",pe),B.__depthDisposeCallback=pe}B.__boundDepthTexture=oe}if(H.depthTexture&&!B.__autoAllocateDepthBuffer){if(K)throw new Error("target.depthTexture not supported in Cube render targets");ne(B.__webglFramebuffer,H)}else if(K){B.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)if(r.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[oe]),B.__webglDepthbuffer[oe]===void 0)B.__webglDepthbuffer[oe]=n.createRenderbuffer(),Q(B.__webglDepthbuffer[oe],H,!1);else{const pe=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ce=B.__webglDepthbuffer[oe];n.bindRenderbuffer(n.RENDERBUFFER,ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,ce)}}else if(r.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=n.createRenderbuffer(),Q(B.__webglDepthbuffer,H,!1);else{const oe=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=B.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,oe,n.RENDERBUFFER,pe)}r.bindFramebuffer(n.FRAMEBUFFER,null)}function me(H,B,K){const oe=i.get(H);B!==void 0&&X(oe.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),K!==void 0&&ye(H)}function fe(H){const B=H.texture,K=i.get(H),oe=i.get(B);H.addEventListener("dispose",E);const pe=H.textures,ce=H.isWebGLCubeRenderTarget===!0,Ue=pe.length>1;if(Ue||(oe.__webglTexture===void 0&&(oe.__webglTexture=n.createTexture()),oe.__version=B.version,a.memory.textures++),ce){K.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(B.mipmaps&&B.mipmaps.length>0){K.__webglFramebuffer[Re]=[];for(let Le=0;Le<B.mipmaps.length;Le++)K.__webglFramebuffer[Re][Le]=n.createFramebuffer()}else K.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){K.__webglFramebuffer=[];for(let Re=0;Re<B.mipmaps.length;Re++)K.__webglFramebuffer[Re]=n.createFramebuffer()}else K.__webglFramebuffer=n.createFramebuffer();if(Ue)for(let Re=0,Le=pe.length;Re<Le;Re++){const Je=i.get(pe[Re]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),a.memory.textures++)}if(H.samples>0&&xe(H)===!1){K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=[],r.bindFramebuffer(n.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let Re=0;Re<pe.length;Re++){const Le=pe[Re];K.__webglColorRenderbuffer[Re]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,K.__webglColorRenderbuffer[Re]);const Je=s.convert(Le.format,Le.colorSpace),Me=s.convert(Le.type),ze=b(Le.internalFormat,Je,Me,Le.colorSpace,H.isXRRenderTarget===!0),Ee=be(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ee,ze,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,K.__webglColorRenderbuffer[Re])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),Q(K.__webglDepthRenderbuffer,H,!0)),r.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ce){r.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture),W(n.TEXTURE_CUBE_MAP,B);for(let Re=0;Re<6;Re++)if(B.mipmaps&&B.mipmaps.length>0)for(let Le=0;Le<B.mipmaps.length;Le++)X(K.__webglFramebuffer[Re][Le],H,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Le);else X(K.__webglFramebuffer[Re],H,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);v(B)&&m(n.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Ue){for(let Re=0,Le=pe.length;Re<Le;Re++){const Je=pe[Re],Me=i.get(Je);r.bindTexture(n.TEXTURE_2D,Me.__webglTexture),W(n.TEXTURE_2D,Je),X(K.__webglFramebuffer,H,Je,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,0),v(Je)&&m(n.TEXTURE_2D)}r.unbindTexture()}else{let Re=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(Re=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),r.bindTexture(Re,oe.__webglTexture),W(Re,B),B.mipmaps&&B.mipmaps.length>0)for(let Le=0;Le<B.mipmaps.length;Le++)X(K.__webglFramebuffer[Le],H,B,n.COLOR_ATTACHMENT0,Re,Le);else X(K.__webglFramebuffer,H,B,n.COLOR_ATTACHMENT0,Re,0);v(B)&&m(Re),r.unbindTexture()}H.depthBuffer&&ye(H)}function le(H){const B=H.textures;for(let K=0,oe=B.length;K<oe;K++){const pe=B[K];if(v(pe)){const ce=x(H),Ue=i.get(pe).__webglTexture;r.bindTexture(ce,Ue),m(ce),r.unbindTexture()}}}const ge=[],q=[];function ve(H){if(H.samples>0){if(xe(H)===!1){const B=H.textures,K=H.width,oe=H.height;let pe=n.COLOR_BUFFER_BIT;const ce=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=i.get(H),Re=B.length>1;if(Re)for(let Le=0;Le<B.length;Le++)r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,null),r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,null,0);r.bindFramebuffer(n.READ_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ue.__webglFramebuffer);for(let Le=0;Le<B.length;Le++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(pe|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(pe|=n.STENCIL_BUFFER_BIT)),Re){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ue.__webglColorRenderbuffer[Le]);const Je=i.get(B[Le]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Je,0)}n.blitFramebuffer(0,0,K,oe,0,0,K,oe,pe,n.NEAREST),c===!0&&(ge.length=0,q.length=0,ge.push(n.COLOR_ATTACHMENT0+Le),H.depthBuffer&&H.resolveDepthBuffer===!1&&(ge.push(ce),q.push(ce),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ge))}if(r.bindFramebuffer(n.READ_FRAMEBUFFER,null),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Re)for(let Le=0;Le<B.length;Le++){r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,Ue.__webglColorRenderbuffer[Le]);const Je=i.get(B[Le]).__webglTexture;r.bindFramebuffer(n.FRAMEBUFFER,Ue.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,Je,0)}r.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer)}else if(H.depthBuffer&&H.resolveDepthBuffer===!1&&c){const B=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[B])}}}function be(H){return Math.min(o.maxSamples,H.samples)}function xe(H){const B=i.get(H);return H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function we(H){const B=a.render.frame;d.get(H)!==B&&(d.set(H,B),H.update())}function qe(H,B){const K=H.colorSpace,oe=H.format,pe=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||K!==Vo&&K!==mo&&(rn.getTransfer(K)===Mn?(oe!==ti||pe!==hi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",K)),B}function Fe(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(u.width=H.naturalWidth||H.width,u.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(u.width=H.displayWidth,u.height=H.displayHeight):(u.width=H.width,u.height=H.height),u}this.allocateTextureUnit=L,this.resetTextureUnits=D,this.setTexture2D=I,this.setTexture2DArray=N,this.setTexture3D=F,this.setTextureCube=O,this.rebindTextures=me,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=le,this.updateMultisampleRenderTarget=ve,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=X,this.useMultisampledRTT=xe}function Bpe(n,e){function r(i,o=mo){let s;const a=rn.getTransfer(o);if(i===hi)return n.UNSIGNED_BYTE;if(i===Zx)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Jx)return n.UNSIGNED_SHORT_5_5_5_1;if(i===e_)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Zc)return n.BYTE;if(i===Jc)return n.SHORT;if(i===vs)return n.UNSIGNED_SHORT;if(i===Xr)return n.INT;if(i===rr)return n.UNSIGNED_INT;if(i===hr)return n.FLOAT;if(i===Yr)return n.HALF_FLOAT;if(i===bM)return n.ALPHA;if(i===sg)return n.RGB;if(i===ti)return n.RGBA;if(i===SM)return n.LUMINANCE;if(i===wM)return n.LUMINANCE_ALPHA;if(i===Ws)return n.DEPTH_COMPONENT;if(i===Ys)return n.DEPTH_STENCIL;if(i===ag)return n.RED;if(i===Xf)return n.RED_INTEGER;if(i===mu)return n.RG;if(i===Kf)return n.RG_INTEGER;if(i===Yf)return n.RGBA_INTEGER;if(i===eu||i===Hl||i===jl||i===Wl)if(a===Mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===eu)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Hl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===jl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Wl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===eu)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Hl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===jl)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Wl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===ym||i===xm||i===_m||i===bm)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===ym)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===xm)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===_m)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===bm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Sm||i===mf||i===gf)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Sm||i===mf)return a===Mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===gf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===vf||i===yf||i===xf||i===_f||i===bf||i===Sf||i===wf||i===Cf||i===Ef||i===Tf||i===Mf||i===Rf||i===Af||i===Nf)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===vf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===yf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===xf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===_f)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===bf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Sf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===wf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Cf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Ef)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Tf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Mf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Rf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Af)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Nf)return a===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===tu||i===$C||i===zC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===tu)return a===Mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===$C)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===zC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===CM||i===wm||i===Cm||i===Em)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===tu)return s.COMPRESSED_RED_RGTC1_EXT;if(i===wm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Cm)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Em)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ks?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:r}}const $pe={type:"move"};class PS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ed,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ed,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ed,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const i of e.hand.values())this._getHandJoint(r,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,i){let o=null,s=null,a=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const y of e.hand.values()){const v=r.getJointPose(y,i),m=this._getHandJoint(u,y);v!==null&&(m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=v.radius),m.visible=v!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=d.position.distanceTo(f.position),p=.02,g=.005;u.inputState.pinching&&h>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=r.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(o=r.getPose(e.targetRaySpace,i),o===null&&s!==null&&(o=s),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent($pe)))}return l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const i=new Ed;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[r.jointName]=i,e.add(i)}return e.joints[r.jointName]}}const zpe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,kpe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Vpe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r,i){if(this.texture===null){const o=new $r,s=e.properties.get(o);s.__webglTexture=r.texture,(r.depthNear!=i.depthNear||r.depthFar!=i.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=o}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,i=new Gi({vertexShader:zpe,fragmentShader:kpe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Br(new c_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Gpe extends uc{constructor(e,r){super();const i=this;let o=null,s=1,a=null,l="local-floor",c=1,u=null,d=null,f=null,h=null,p=null,g=null;const y=new Vpe,v=r.getContextAttributes();let m=null,x=null;const b=[],S=[],w=new je;let C=null;const E=new wi;E.viewport=new qt;const M=new wi;M.viewport=new qt;const T=[E,M],R=new cue;let P=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let j=b[z];return j===void 0&&(j=new PS,b[z]=j),j.getTargetRaySpace()},this.getControllerGrip=function(z){let j=b[z];return j===void 0&&(j=new PS,b[z]=j),j.getGripSpace()},this.getHand=function(z){let j=b[z];return j===void 0&&(j=new PS,b[z]=j),j.getHandSpace()};function L(z){const j=S.indexOf(z.inputSource);if(j===-1)return;const X=b[j];X!==void 0&&(X.update(z.inputSource,z.frame,u||a),X.dispatchEvent({type:z.type,data:z.inputSource}))}function A(){o.removeEventListener("select",L),o.removeEventListener("selectstart",L),o.removeEventListener("selectend",L),o.removeEventListener("squeeze",L),o.removeEventListener("squeezestart",L),o.removeEventListener("squeezeend",L),o.removeEventListener("end",A),o.removeEventListener("inputsourceschange",I);for(let z=0;z<b.length;z++){const j=S[z];j!==null&&(S[z]=null,b[z].disconnect(j))}P=null,D=null,y.reset(),e.setRenderTarget(m),p=null,h=null,f=null,o=null,x=null,J.stop(),i.isPresenting=!1,e.setPixelRatio(C),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){s=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){l=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(z){u=z},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return o},this.setSession=async function(z){if(o=z,o!==null){if(m=e.getRenderTarget(),o.addEventListener("select",L),o.addEventListener("selectstart",L),o.addEventListener("selectend",L),o.addEventListener("squeeze",L),o.addEventListener("squeezestart",L),o.addEventListener("squeezeend",L),o.addEventListener("end",A),o.addEventListener("inputsourceschange",I),v.xrCompatible!==!0&&await r.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(w),o.renderState.layers===void 0){const j={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(o,r,j),o.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),x=new Ss(p.framebufferWidth,p.framebufferHeight,{format:ti,type:hi,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let j=null,X=null,Q=null;v.depth&&(Q=v.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,j=v.stencil?Ys:Ws,X=v.stencil?Ks:rr);const ne={colorFormat:r.RGBA8,depthFormat:Q,scaleFactor:s};f=new XRWebGLBinding(o,r),h=f.createProjectionLayer(ne),o.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),x=new Ss(h.textureWidth,h.textureHeight,{format:ti,type:hi,depthTexture:new dc(h.textureWidth,h.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await o.requestReferenceSpace(l),J.setContext(o),J.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function I(z){for(let j=0;j<z.removed.length;j++){const X=z.removed[j],Q=S.indexOf(X);Q>=0&&(S[Q]=null,b[Q].disconnect(X))}for(let j=0;j<z.added.length;j++){const X=z.added[j];let Q=S.indexOf(X);if(Q===-1){for(let ye=0;ye<b.length;ye++)if(ye>=S.length){S.push(X),Q=ye;break}else if(S[ye]===null){S[ye]=X,Q=ye;break}if(Q===-1)break}const ne=b[Q];ne&&ne.connect(X)}}const N=new Y,F=new Y;function O(z,j,X){N.setFromMatrixPosition(j.matrixWorld),F.setFromMatrixPosition(X.matrixWorld);const Q=N.distanceTo(F),ne=j.projectionMatrix.elements,ye=X.projectionMatrix.elements,me=ne[14]/(ne[10]-1),fe=ne[14]/(ne[10]+1),le=(ne[9]+1)/ne[5],ge=(ne[9]-1)/ne[5],q=(ne[8]-1)/ne[0],ve=(ye[8]+1)/ye[0],be=me*q,xe=me*ve,we=Q/(-q+ve),qe=we*-q;if(j.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(qe),z.translateZ(we),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert(),ne[10]===-1)z.projectionMatrix.copy(j.projectionMatrix),z.projectionMatrixInverse.copy(j.projectionMatrixInverse);else{const Fe=me+we,H=fe+we,B=be-qe,K=xe+(Q-qe),oe=le*fe/H*Fe,pe=ge*fe/H*Fe;z.projectionMatrix.makePerspective(B,K,oe,pe,Fe,H),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}}function V(z,j){j===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(j.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(o===null)return;let j=z.near,X=z.far;y.texture!==null&&(y.depthNear>0&&(j=y.depthNear),y.depthFar>0&&(X=y.depthFar)),R.near=M.near=E.near=j,R.far=M.far=E.far=X,(P!==R.near||D!==R.far)&&(o.updateRenderState({depthNear:R.near,depthFar:R.far}),P=R.near,D=R.far),E.layers.mask=z.layers.mask|2,M.layers.mask=z.layers.mask|4,R.layers.mask=E.layers.mask|M.layers.mask;const Q=z.parent,ne=R.cameras;V(R,Q);for(let ye=0;ye<ne.length;ye++)V(ne[ye],Q);ne.length===2?O(R,E,M):R.projectionMatrix.copy(E.projectionMatrix),U(z,R,Q)};function U(z,j,X){X===null?z.matrix.copy(j.matrixWorld):(z.matrix.copy(X.matrixWorld),z.matrix.invert(),z.matrix.multiply(j.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(j.projectionMatrix),z.projectionMatrixInverse.copy(j.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=Pf*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(h===null&&p===null))return c},this.setFoveation=function(z){c=z,h!==null&&(h.fixedFoveation=z),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=z)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(R)};let k=null;function W(z,j){if(d=j.getViewerPose(u||a),g=j,d!==null){const X=d.views;p!==null&&(e.setRenderTargetFramebuffer(x,p.framebuffer),e.setRenderTarget(x));let Q=!1;X.length!==R.cameras.length&&(R.cameras.length=0,Q=!0);for(let ye=0;ye<X.length;ye++){const me=X[ye];let fe=null;if(p!==null)fe=p.getViewport(me);else{const ge=f.getViewSubImage(h,me);fe=ge.viewport,ye===0&&(e.setRenderTargetTextures(x,ge.colorTexture,h.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(x))}let le=T[ye];le===void 0&&(le=new wi,le.layers.enable(ye),le.viewport=new qt,T[ye]=le),le.matrix.fromArray(me.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(me.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(fe.x,fe.y,fe.width,fe.height),ye===0&&(R.matrix.copy(le.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Q===!0&&R.cameras.push(le)}const ne=o.enabledFeatures;if(ne&&ne.includes("depth-sensing")){const ye=f.getDepthInformation(X[0]);ye&&ye.isValid&&ye.texture&&y.init(e,ye,o.renderState)}}for(let X=0;X<b.length;X++){const Q=S[X],ne=b[X];Q!==null&&ne!==void 0&&ne.update(Q,j,u||a)}k&&k(z,j),j.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:j}),g=null}const J=new wk;J.setAnimationLoop(W),this.setAnimationLoop=function(z){k=z},this.dispose=function(){}}}const Cc=new bo,Hpe=new fn;function jpe(n,e){function r(v,m){v.matrixAutoUpdate===!0&&v.updateMatrix(),m.value.copy(v.matrix)}function i(v,m){m.color.getRGB(v.fogColor.value,uk(n)),m.isFog?(v.fogNear.value=m.near,v.fogFar.value=m.far):m.isFogExp2&&(v.fogDensity.value=m.density)}function o(v,m,x,b,S){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(v,m):m.isMeshToonMaterial?(s(v,m),f(v,m)):m.isMeshPhongMaterial?(s(v,m),d(v,m)):m.isMeshStandardMaterial?(s(v,m),h(v,m),m.isMeshPhysicalMaterial&&p(v,m,S)):m.isMeshMatcapMaterial?(s(v,m),g(v,m)):m.isMeshDepthMaterial?s(v,m):m.isMeshDistanceMaterial?(s(v,m),y(v,m)):m.isMeshNormalMaterial?s(v,m):m.isLineBasicMaterial?(a(v,m),m.isLineDashedMaterial&&l(v,m)):m.isPointsMaterial?c(v,m,x,b):m.isSpriteMaterial?u(v,m):m.isShadowMaterial?(v.color.value.copy(m.color),v.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(v,m){v.opacity.value=m.opacity,m.color&&v.diffuse.value.copy(m.color),m.emissive&&v.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(v.map.value=m.map,r(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.bumpMap&&(v.bumpMap.value=m.bumpMap,r(m.bumpMap,v.bumpMapTransform),v.bumpScale.value=m.bumpScale,m.side===er&&(v.bumpScale.value*=-1)),m.normalMap&&(v.normalMap.value=m.normalMap,r(m.normalMap,v.normalMapTransform),v.normalScale.value.copy(m.normalScale),m.side===er&&v.normalScale.value.negate()),m.displacementMap&&(v.displacementMap.value=m.displacementMap,r(m.displacementMap,v.displacementMapTransform),v.displacementScale.value=m.displacementScale,v.displacementBias.value=m.displacementBias),m.emissiveMap&&(v.emissiveMap.value=m.emissiveMap,r(m.emissiveMap,v.emissiveMapTransform)),m.specularMap&&(v.specularMap.value=m.specularMap,r(m.specularMap,v.specularMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);const x=e.get(m),b=x.envMap,S=x.envMapRotation;b&&(v.envMap.value=b,Cc.copy(S),Cc.x*=-1,Cc.y*=-1,Cc.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Cc.y*=-1,Cc.z*=-1),v.envMapRotation.value.setFromMatrix4(Hpe.makeRotationFromEuler(Cc)),v.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=m.reflectivity,v.ior.value=m.ior,v.refractionRatio.value=m.refractionRatio),m.lightMap&&(v.lightMap.value=m.lightMap,v.lightMapIntensity.value=m.lightMapIntensity,r(m.lightMap,v.lightMapTransform)),m.aoMap&&(v.aoMap.value=m.aoMap,v.aoMapIntensity.value=m.aoMapIntensity,r(m.aoMap,v.aoMapTransform))}function a(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,m.map&&(v.map.value=m.map,r(m.map,v.mapTransform))}function l(v,m){v.dashSize.value=m.dashSize,v.totalSize.value=m.dashSize+m.gapSize,v.scale.value=m.scale}function c(v,m,x,b){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.size.value=m.size*x,v.scale.value=b*.5,m.map&&(v.map.value=m.map,r(m.map,v.uvTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function u(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.rotation.value=m.rotation,m.map&&(v.map.value=m.map,r(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function d(v,m){v.specular.value.copy(m.specular),v.shininess.value=Math.max(m.shininess,1e-4)}function f(v,m){m.gradientMap&&(v.gradientMap.value=m.gradientMap)}function h(v,m){v.metalness.value=m.metalness,m.metalnessMap&&(v.metalnessMap.value=m.metalnessMap,r(m.metalnessMap,v.metalnessMapTransform)),v.roughness.value=m.roughness,m.roughnessMap&&(v.roughnessMap.value=m.roughnessMap,r(m.roughnessMap,v.roughnessMapTransform)),m.envMap&&(v.envMapIntensity.value=m.envMapIntensity)}function p(v,m,x){v.ior.value=m.ior,m.sheen>0&&(v.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),v.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(v.sheenColorMap.value=m.sheenColorMap,r(m.sheenColorMap,v.sheenColorMapTransform)),m.sheenRoughnessMap&&(v.sheenRoughnessMap.value=m.sheenRoughnessMap,r(m.sheenRoughnessMap,v.sheenRoughnessMapTransform))),m.clearcoat>0&&(v.clearcoat.value=m.clearcoat,v.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(v.clearcoatMap.value=m.clearcoatMap,r(m.clearcoatMap,v.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,r(m.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(v.clearcoatNormalMap.value=m.clearcoatNormalMap,r(m.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===er&&v.clearcoatNormalScale.value.negate())),m.dispersion>0&&(v.dispersion.value=m.dispersion),m.iridescence>0&&(v.iridescence.value=m.iridescence,v.iridescenceIOR.value=m.iridescenceIOR,v.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(v.iridescenceMap.value=m.iridescenceMap,r(m.iridescenceMap,v.iridescenceMapTransform)),m.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=m.iridescenceThicknessMap,r(m.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),m.transmission>0&&(v.transmission.value=m.transmission,v.transmissionSamplerMap.value=x.texture,v.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(v.transmissionMap.value=m.transmissionMap,r(m.transmissionMap,v.transmissionMapTransform)),v.thickness.value=m.thickness,m.thicknessMap&&(v.thicknessMap.value=m.thicknessMap,r(m.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=m.attenuationDistance,v.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(v.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(v.anisotropyMap.value=m.anisotropyMap,r(m.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=m.specularIntensity,v.specularColor.value.copy(m.specularColor),m.specularColorMap&&(v.specularColorMap.value=m.specularColorMap,r(m.specularColorMap,v.specularColorMapTransform)),m.specularIntensityMap&&(v.specularIntensityMap.value=m.specularIntensityMap,r(m.specularIntensityMap,v.specularIntensityMapTransform))}function g(v,m){m.matcap&&(v.matcap.value=m.matcap)}function y(v,m){const x=e.get(m).light;v.referencePosition.value.setFromMatrixPosition(x.matrixWorld),v.nearDistance.value=x.shadow.camera.near,v.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function Wpe(n,e,r,i){let o={},s={},a=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(x,b){const S=b.program;i.uniformBlockBinding(x,S)}function u(x,b){let S=o[x.id];S===void 0&&(g(x),S=d(x),o[x.id]=S,x.addEventListener("dispose",v));const w=b.program;i.updateUBOMapping(x,w);const C=e.render.frame;s[x.id]!==C&&(h(x),s[x.id]=C)}function d(x){const b=f();x.__bindingPointIndex=b;const S=n.createBuffer(),w=x.__size,C=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,w,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,S),S}function f(){for(let x=0;x<l;x++)if(a.indexOf(x)===-1)return a.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const b=o[x.id],S=x.uniforms,w=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let C=0,E=S.length;C<E;C++){const M=Array.isArray(S[C])?S[C]:[S[C]];for(let T=0,R=M.length;T<R;T++){const P=M[T];if(p(P,C,T,w)===!0){const D=P.__offset,L=Array.isArray(P.value)?P.value:[P.value];let A=0;for(let I=0;I<L.length;I++){const N=L[I],F=y(N);typeof N=="number"||typeof N=="boolean"?(P.__data[0]=N,n.bufferSubData(n.UNIFORM_BUFFER,D+A,P.__data)):N.isMatrix3?(P.__data[0]=N.elements[0],P.__data[1]=N.elements[1],P.__data[2]=N.elements[2],P.__data[3]=0,P.__data[4]=N.elements[3],P.__data[5]=N.elements[4],P.__data[6]=N.elements[5],P.__data[7]=0,P.__data[8]=N.elements[6],P.__data[9]=N.elements[7],P.__data[10]=N.elements[8],P.__data[11]=0):(N.toArray(P.__data,A),A+=F.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,P.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(x,b,S,w){const C=x.value,E=b+"_"+S;if(w[E]===void 0)return typeof C=="number"||typeof C=="boolean"?w[E]=C:w[E]=C.clone(),!0;{const M=w[E];if(typeof C=="number"||typeof C=="boolean"){if(M!==C)return w[E]=C,!0}else if(M.equals(C)===!1)return M.copy(C),!0}return!1}function g(x){const b=x.uniforms;let S=0;const w=16;for(let E=0,M=b.length;E<M;E++){const T=Array.isArray(b[E])?b[E]:[b[E]];for(let R=0,P=T.length;R<P;R++){const D=T[R],L=Array.isArray(D.value)?D.value:[D.value];for(let A=0,I=L.length;A<I;A++){const N=L[A],F=y(N),O=S%w,V=O%F.boundary,U=O+V;S+=V,U!==0&&w-U<F.storage&&(S+=w-U),D.__data=new Float32Array(F.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=S,S+=F.storage}}}const C=S%w;return C>0&&(S+=w-C),x.__size=S,x.__cache={},this}function y(x){const b={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(b.boundary=4,b.storage=4):x.isVector2?(b.boundary=8,b.storage=8):x.isVector3||x.isColor?(b.boundary=16,b.storage=12):x.isVector4?(b.boundary=16,b.storage=16):x.isMatrix3?(b.boundary=48,b.storage=48):x.isMatrix4?(b.boundary=64,b.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),b}function v(x){const b=x.target;b.removeEventListener("dispose",v);const S=a.indexOf(b.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(o[b.id]),delete o[b.id],delete s[b.id]}function m(){for(const x in o)n.deleteBuffer(o[x]);a=[],o={},s={}}return{bind:c,update:u,dispose:m}}class qpe{constructor(e={}){const{canvas:r=sk(),context:i=null,depth:o=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=a;const g=new Uint32Array(4),y=new Int32Array(4);let v=null,m=null;const x=[],b=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Dt,this.toneMapping=Qi,this.toneMappingExposure=1;const S=this;let w=!1,C=0,E=0,M=null,T=-1,R=null;const P=new qt,D=new qt;let L=null;const A=new Tt(0);let I=0,N=r.width,F=r.height,O=1,V=null,U=null;const k=new qt(0,0,N,F),W=new qt(0,0,N,F);let J=!1;const z=new s_;let j=!1,X=!1;const Q=new fn,ne=new fn,ye=new Y,me=new qt,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let le=!1;function ge(){return M===null?O:1}let q=i;function ve($,Z){return r.getContext($,Z)}try{const $={alpha:!0,depth:o,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${qf}`),r.addEventListener("webglcontextlost",Oe,!1),r.addEventListener("webglcontextrestored",Ze,!1),r.addEventListener("webglcontextcreationerror",We,!1),q===null){const Z="webgl2";if(q=ve(Z,$),q===null)throw ve(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let be,xe,we,qe,Fe,H,B,K,oe,pe,ce,Ue,Re,Le,Je,Me,ze,Ee,Pe,ke,Ve,$e,xt,te;function Qe(){be=new nhe(q),be.init(),$e=new Bpe(q,be),xe=new Yfe(q,be,e,$e),we=new Fpe(q,be),xe.reverseDepthBuffer&&h&&we.buffers.depth.setReversed(!0),qe=new ohe(q),Fe=new wpe,H=new Upe(q,be,we,Fe,xe,$e,qe),B=new Zfe(S),K=new the(S),oe=new fue(q),xt=new Xfe(q,oe),pe=new rhe(q,oe,qe,xt),ce=new ahe(q,pe,oe,qe),Pe=new she(q,xe,H),Me=new Qfe(Fe),Ue=new Spe(S,B,K,be,xe,xt,Me),Re=new jpe(S,Fe),Le=new Epe,Je=new Ppe(be),Ee=new qfe(S,B,K,we,ce,p,c),ze=new Dpe(S,ce,xe),te=new Wpe(q,qe,xe,we),ke=new Kfe(q,be,qe),Ve=new ihe(q,be,qe),qe.programs=Ue.programs,S.capabilities=xe,S.extensions=be,S.properties=Fe,S.renderLists=Le,S.shadowMap=ze,S.state=we,S.info=qe}Qe();const Se=new Gpe(S,q);this.xr=Se,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const $=be.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=be.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function($){$!==void 0&&(O=$,this.setSize(N,F,!1))},this.getSize=function($){return $.set(N,F)},this.setSize=function($,Z,de=!0){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=$,F=Z,r.width=Math.floor($*O),r.height=Math.floor(Z*O),de===!0&&(r.style.width=$+"px",r.style.height=Z+"px"),this.setViewport(0,0,$,Z)},this.getDrawingBufferSize=function($){return $.set(N*O,F*O).floor()},this.setDrawingBufferSize=function($,Z,de){N=$,F=Z,O=de,r.width=Math.floor($*de),r.height=Math.floor(Z*de),this.setViewport(0,0,$,Z)},this.getCurrentViewport=function($){return $.copy(P)},this.getViewport=function($){return $.copy(k)},this.setViewport=function($,Z,de,he){$.isVector4?k.set($.x,$.y,$.z,$.w):k.set($,Z,de,he),we.viewport(P.copy(k).multiplyScalar(O).round())},this.getScissor=function($){return $.copy(W)},this.setScissor=function($,Z,de,he){$.isVector4?W.set($.x,$.y,$.z,$.w):W.set($,Z,de,he),we.scissor(D.copy(W).multiplyScalar(O).round())},this.getScissorTest=function(){return J},this.setScissorTest=function($){we.setScissorTest(J=$)},this.setOpaqueSort=function($){V=$},this.setTransparentSort=function($){U=$},this.getClearColor=function($){return $.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function($=!0,Z=!0,de=!0){let he=0;if($){let ae=!1;if(M!==null){const Ge=M.texture.format;ae=Ge===Yf||Ge===Kf||Ge===Xf}if(ae){const Ge=M.texture.type,at=Ge===hi||Ge===rr||Ge===vs||Ge===Ks||Ge===Zx||Ge===Jx,ht=Ee.getClearColor(),mt=Ee.getClearAlpha(),Et=ht.r,Ye=ht.g,et=ht.b;at?(g[0]=Et,g[1]=Ye,g[2]=et,g[3]=mt,q.clearBufferuiv(q.COLOR,0,g)):(y[0]=Et,y[1]=Ye,y[2]=et,y[3]=mt,q.clearBufferiv(q.COLOR,0,y))}else he|=q.COLOR_BUFFER_BIT}Z&&(he|=q.DEPTH_BUFFER_BIT),de&&(he|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Oe,!1),r.removeEventListener("webglcontextrestored",Ze,!1),r.removeEventListener("webglcontextcreationerror",We,!1),Ee.dispose(),Le.dispose(),Je.dispose(),Fe.dispose(),B.dispose(),K.dispose(),ce.dispose(),xt.dispose(),te.dispose(),Ue.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",bn),Se.removeEventListener("sessionend",Ke),ot.stop()};function Oe($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const $=qe.autoReset,Z=ze.enabled,de=ze.autoUpdate,he=ze.needsUpdate,ae=ze.type;Qe(),qe.autoReset=$,ze.enabled=Z,ze.autoUpdate=de,ze.needsUpdate=he,ze.type=ae}function We($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function wt($){const Z=$.target;Z.removeEventListener("dispose",wt),Rt(Z)}function Rt($){dt($),Fe.remove($)}function dt($){const Z=Fe.get($).programs;Z!==void 0&&(Z.forEach(function(de){Ue.releaseProgram(de)}),$.isShaderMaterial&&Ue.releaseShaderCache($))}this.renderBufferDirect=function($,Z,de,he,ae,Ge){Z===null&&(Z=fe);const at=ae.isMesh&&ae.matrixWorld.determinant()<0,ht=En($,Z,de,he,ae);we.setMaterial(he,at);let mt=de.index,Et=1;if(he.wireframe===!0){if(mt=pe.getWireframeAttribute(de),mt===void 0)return;Et=2}const Ye=de.drawRange,et=de.attributes.position;let _t=Ye.start*Et,zt=(Ye.start+Ye.count)*Et;Ge!==null&&(_t=Math.max(_t,Ge.start*Et),zt=Math.min(zt,(Ge.start+Ge.count)*Et)),mt!==null?(_t=Math.max(_t,0),zt=Math.min(zt,mt.count)):et!=null&&(_t=Math.max(_t,0),zt=Math.min(zt,et.count));const pn=zt-_t;if(pn<0||pn===1/0)return;xt.setup(ae,he,ht,de,mt);let dn,kt=ke;if(mt!==null&&(dn=oe.get(mt),kt=Ve,kt.setIndex(dn)),ae.isMesh)he.wireframe===!0?(we.setLineWidth(he.wireframeLinewidth*ge()),kt.setMode(q.LINES)):kt.setMode(q.TRIANGLES);else if(ae.isLine){let At=he.linewidth;At===void 0&&(At=1),we.setLineWidth(At*ge()),ae.isLineSegments?kt.setMode(q.LINES):ae.isLineLoop?kt.setMode(q.LINE_LOOP):kt.setMode(q.LINE_STRIP)}else ae.isPoints?kt.setMode(q.POINTS):ae.isSprite&&kt.setMode(q.TRIANGLES);if(ae.isBatchedMesh)if(ae._multiDrawInstances!==null)kt.renderMultiDrawInstances(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount,ae._multiDrawInstances);else if(be.get("WEBGL_multi_draw"))kt.renderMultiDraw(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount);else{const At=ae._multiDrawStarts,$n=ae._multiDrawCounts,Wt=ae._multiDrawCount,Nr=mt?oe.get(mt).bytesPerElement:1,Gt=Fe.get(he).currentProgram.getUniforms();for(let Pt=0;Pt<Wt;Pt++)Gt.setValue(q,"_gl_DrawID",Pt),kt.render(At[Pt]/Nr,$n[Pt])}else if(ae.isInstancedMesh)kt.renderInstances(_t,pn,ae.count);else if(de.isInstancedBufferGeometry){const At=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,$n=Math.min(de.instanceCount,At);kt.renderInstances(_t,pn,$n)}else kt.render(_t,pn)};function Xe($,Z,de){$.transparent===!0&&$.side===Ei&&$.forceSinglePass===!1?($.side=er,$.needsUpdate=!0,un($,Z,de),$.side=Cs,$.needsUpdate=!0,un($,Z,de),$.side=Ei):un($,Z,de)}this.compile=function($,Z,de=null){de===null&&(de=$),m=Je.get(de),m.init(Z),b.push(m),de.traverseVisible(function(ae){ae.isLight&&ae.layers.test(Z.layers)&&(m.pushLight(ae),ae.castShadow&&m.pushShadow(ae))}),$!==de&&$.traverseVisible(function(ae){ae.isLight&&ae.layers.test(Z.layers)&&(m.pushLight(ae),ae.castShadow&&m.pushShadow(ae))}),m.setupLights();const he=new Set;return $.traverse(function(ae){if(!(ae.isMesh||ae.isPoints||ae.isLine||ae.isSprite))return;const Ge=ae.material;if(Ge)if(Array.isArray(Ge))for(let at=0;at<Ge.length;at++){const ht=Ge[at];Xe(ht,de,ae),he.add(ht)}else Xe(Ge,de,ae),he.add(Ge)}),b.pop(),m=null,he},this.compileAsync=function($,Z,de=null){const he=this.compile($,Z,de);return new Promise(ae=>{function Ge(){if(he.forEach(function(at){Fe.get(at).currentProgram.isReady()&&he.delete(at)}),he.size===0){ae($);return}setTimeout(Ge,10)}be.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let rt=null;function Lt($){rt&&rt($)}function bn(){ot.stop()}function Ke(){ot.start()}const ot=new wk;ot.setAnimationLoop(Lt),typeof self<"u"&&ot.setContext(self),this.setAnimationLoop=function($){rt=$,Se.setAnimationLoop($),$===null?ot.stop():ot.start()},Se.addEventListener("sessionstart",bn),Se.addEventListener("sessionend",Ke),this.render=function($,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(Z),Z=Se.getCamera()),$.isScene===!0&&$.onBeforeRender(S,$,Z,M),m=Je.get($,b.length),m.init(Z),b.push(m),ne.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),z.setFromProjectionMatrix(ne),X=this.localClippingEnabled,j=Me.init(this.clippingPlanes,X),v=Le.get($,x.length),v.init(),x.push(v),Se.enabled===!0&&Se.isPresenting===!0){const Ge=S.xr.getDepthSensingMesh();Ge!==null&&yt(Ge,Z,-1/0,S.sortObjects)}yt($,Z,0,S.sortObjects),v.finish(),S.sortObjects===!0&&v.sort(V,U),le=Se.enabled===!1||Se.isPresenting===!1||Se.hasDepthSensing()===!1,le&&Ee.addToRenderList(v,$),this.info.render.frame++,j===!0&&Me.beginShadows();const de=m.state.shadowsArray;ze.render(de,$,Z),j===!0&&Me.endShadows(),this.info.autoReset===!0&&this.info.reset();const he=v.opaque,ae=v.transmissive;if(m.setupLights(),Z.isArrayCamera){const Ge=Z.cameras;if(ae.length>0)for(let at=0,ht=Ge.length;at<ht;at++){const mt=Ge[at];bt(he,ae,$,mt)}le&&Ee.render($);for(let at=0,ht=Ge.length;at<ht;at++){const mt=Ge[at];ft(v,$,mt,mt.viewport)}}else ae.length>0&&bt(he,ae,$,Z),le&&Ee.render($),ft(v,$,Z);M!==null&&(H.updateMultisampleRenderTarget(M),H.updateRenderTargetMipmap(M)),$.isScene===!0&&$.onAfterRender(S,$,Z),xt.resetDefaultState(),T=-1,R=null,b.pop(),b.length>0?(m=b[b.length-1],j===!0&&Me.setGlobalState(S.clippingPlanes,m.state.camera)):m=null,x.pop(),x.length>0?v=x[x.length-1]:v=null};function yt($,Z,de,he){if($.visible===!1)return;if($.layers.test(Z.layers)){if($.isGroup)de=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(Z);else if($.isLight)m.pushLight($),$.castShadow&&m.pushShadow($);else if($.isSprite){if(!$.frustumCulled||z.intersectsSprite($)){he&&me.setFromMatrixPosition($.matrixWorld).applyMatrix4(ne);const at=ce.update($),ht=$.material;ht.visible&&v.push($,at,ht,de,me.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||z.intersectsObject($))){const at=ce.update($),ht=$.material;if(he&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),me.copy($.boundingSphere.center)):(at.boundingSphere===null&&at.computeBoundingSphere(),me.copy(at.boundingSphere.center)),me.applyMatrix4($.matrixWorld).applyMatrix4(ne)),Array.isArray(ht)){const mt=at.groups;for(let Et=0,Ye=mt.length;Et<Ye;Et++){const et=mt[Et],_t=ht[et.materialIndex];_t&&_t.visible&&v.push($,at,_t,de,me.z,et)}}else ht.visible&&v.push($,at,ht,de,me.z,null)}}const Ge=$.children;for(let at=0,ht=Ge.length;at<ht;at++)yt(Ge[at],Z,de,he)}function ft($,Z,de,he){const ae=$.opaque,Ge=$.transmissive,at=$.transparent;m.setupLightsView(de),j===!0&&Me.setGlobalState(S.clippingPlanes,de),he&&we.viewport(P.copy(he)),ae.length>0&&It(ae,Z,de),Ge.length>0&&It(Ge,Z,de),at.length>0&&It(at,Z,de),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function bt($,Z,de,he){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[he.id]===void 0&&(m.state.transmissionRenderTarget[he.id]=new Ss(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")||be.has("EXT_color_buffer_float")?Yr:hi,minFilter:Vi,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rn.workingColorSpace}));const Ge=m.state.transmissionRenderTarget[he.id],at=he.viewport||P;Ge.setSize(at.z,at.w);const ht=S.getRenderTarget();S.setRenderTarget(Ge),S.getClearColor(A),I=S.getClearAlpha(),I<1&&S.setClearColor(16777215,.5),S.clear(),le&&Ee.render(de);const mt=S.toneMapping;S.toneMapping=Qi;const Et=he.viewport;if(he.viewport!==void 0&&(he.viewport=void 0),m.setupLightsView(he),j===!0&&Me.setGlobalState(S.clippingPlanes,he),It($,de,he),H.updateMultisampleRenderTarget(Ge),H.updateRenderTargetMipmap(Ge),be.has("WEBGL_multisampled_render_to_texture")===!1){let Ye=!1;for(let et=0,_t=Z.length;et<_t;et++){const zt=Z[et],pn=zt.object,dn=zt.geometry,kt=zt.material,At=zt.group;if(kt.side===Ei&&pn.layers.test(he.layers)){const $n=kt.side;kt.side=er,kt.needsUpdate=!0,yn(pn,de,he,dn,kt,At),kt.side=$n,kt.needsUpdate=!0,Ye=!0}}Ye===!0&&(H.updateMultisampleRenderTarget(Ge),H.updateRenderTargetMipmap(Ge))}S.setRenderTarget(ht),S.setClearColor(A,I),Et!==void 0&&(he.viewport=Et),S.toneMapping=mt}function It($,Z,de){const he=Z.isScene===!0?Z.overrideMaterial:null;for(let ae=0,Ge=$.length;ae<Ge;ae++){const at=$[ae],ht=at.object,mt=at.geometry,Et=he===null?at.material:he,Ye=at.group;ht.layers.test(de.layers)&&yn(ht,Z,de,mt,Et,Ye)}}function yn($,Z,de,he,ae,Ge){$.onBeforeRender(S,Z,de,he,ae,Ge),$.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ae.onBeforeRender(S,Z,de,he,$,Ge),ae.transparent===!0&&ae.side===Ei&&ae.forceSinglePass===!1?(ae.side=er,ae.needsUpdate=!0,S.renderBufferDirect(de,Z,he,ae,$,Ge),ae.side=Cs,ae.needsUpdate=!0,S.renderBufferDirect(de,Z,he,ae,$,Ge),ae.side=Ei):S.renderBufferDirect(de,Z,he,ae,$,Ge),$.onAfterRender(S,Z,de,he,ae,Ge)}function un($,Z,de){Z.isScene!==!0&&(Z=fe);const he=Fe.get($),ae=m.state.lights,Ge=m.state.shadowsArray,at=ae.state.version,ht=Ue.getParameters($,ae.state,Ge,Z,de),mt=Ue.getProgramCacheKey(ht);let Et=he.programs;he.environment=$.isMeshStandardMaterial?Z.environment:null,he.fog=Z.fog,he.envMap=($.isMeshStandardMaterial?K:B).get($.envMap||he.environment),he.envMapRotation=he.environment!==null&&$.envMap===null?Z.environmentRotation:$.envMapRotation,Et===void 0&&($.addEventListener("dispose",wt),Et=new Map,he.programs=Et);let Ye=Et.get(mt);if(Ye!==void 0){if(he.currentProgram===Ye&&he.lightsStateVersion===at)return en($,ht),Ye}else ht.uniforms=Ue.getUniforms($),$.onBeforeCompile(ht,S),Ye=Ue.acquireProgram(ht,mt),Et.set(mt,Ye),he.uniforms=ht.uniforms;const et=he.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(et.clippingPlanes=Me.uniform),en($,ht),he.needsLights=Vn($),he.lightsStateVersion=at,he.needsLights&&(et.ambientLightColor.value=ae.state.ambient,et.lightProbe.value=ae.state.probe,et.directionalLights.value=ae.state.directional,et.directionalLightShadows.value=ae.state.directionalShadow,et.spotLights.value=ae.state.spot,et.spotLightShadows.value=ae.state.spotShadow,et.rectAreaLights.value=ae.state.rectArea,et.ltc_1.value=ae.state.rectAreaLTC1,et.ltc_2.value=ae.state.rectAreaLTC2,et.pointLights.value=ae.state.point,et.pointLightShadows.value=ae.state.pointShadow,et.hemisphereLights.value=ae.state.hemi,et.directionalShadowMap.value=ae.state.directionalShadowMap,et.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,et.spotShadowMap.value=ae.state.spotShadowMap,et.spotLightMatrix.value=ae.state.spotLightMatrix,et.spotLightMap.value=ae.state.spotLightMap,et.pointShadowMap.value=ae.state.pointShadowMap,et.pointShadowMatrix.value=ae.state.pointShadowMatrix),he.currentProgram=Ye,he.uniformsList=null,Ye}function Bn($){if($.uniformsList===null){const Z=$.currentProgram.getUniforms();$.uniformsList=_0.seqWithValue(Z.seq,$.uniforms)}return $.uniformsList}function en($,Z){const de=Fe.get($);de.outputColorSpace=Z.outputColorSpace,de.batching=Z.batching,de.batchingColor=Z.batchingColor,de.instancing=Z.instancing,de.instancingColor=Z.instancingColor,de.instancingMorph=Z.instancingMorph,de.skinning=Z.skinning,de.morphTargets=Z.morphTargets,de.morphNormals=Z.morphNormals,de.morphColors=Z.morphColors,de.morphTargetsCount=Z.morphTargetsCount,de.numClippingPlanes=Z.numClippingPlanes,de.numIntersection=Z.numClipIntersection,de.vertexAlphas=Z.vertexAlphas,de.vertexTangents=Z.vertexTangents,de.toneMapping=Z.toneMapping}function En($,Z,de,he,ae){Z.isScene!==!0&&(Z=fe),H.resetTextureUnits();const Ge=Z.fog,at=he.isMeshStandardMaterial?Z.environment:null,ht=M===null?S.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Vo,mt=(he.isMeshStandardMaterial?K:B).get(he.envMap||at),Et=he.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,Ye=!!de.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),et=!!de.morphAttributes.position,_t=!!de.morphAttributes.normal,zt=!!de.morphAttributes.color;let pn=Qi;he.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(pn=S.toneMapping);const dn=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,kt=dn!==void 0?dn.length:0,At=Fe.get(he),$n=m.state.lights;if(j===!0&&(X===!0||$!==R)){const Tn=$===R&&he.id===T;Me.setState(he,$,Tn)}let Wt=!1;he.version===At.__version?(At.needsLights&&At.lightsStateVersion!==$n.state.version||At.outputColorSpace!==ht||ae.isBatchedMesh&&At.batching===!1||!ae.isBatchedMesh&&At.batching===!0||ae.isBatchedMesh&&At.batchingColor===!0&&ae.colorTexture===null||ae.isBatchedMesh&&At.batchingColor===!1&&ae.colorTexture!==null||ae.isInstancedMesh&&At.instancing===!1||!ae.isInstancedMesh&&At.instancing===!0||ae.isSkinnedMesh&&At.skinning===!1||!ae.isSkinnedMesh&&At.skinning===!0||ae.isInstancedMesh&&At.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&At.instancingColor===!1&&ae.instanceColor!==null||ae.isInstancedMesh&&At.instancingMorph===!0&&ae.morphTexture===null||ae.isInstancedMesh&&At.instancingMorph===!1&&ae.morphTexture!==null||At.envMap!==mt||he.fog===!0&&At.fog!==Ge||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==Me.numPlanes||At.numIntersection!==Me.numIntersection)||At.vertexAlphas!==Et||At.vertexTangents!==Ye||At.morphTargets!==et||At.morphNormals!==_t||At.morphColors!==zt||At.toneMapping!==pn||At.morphTargetsCount!==kt)&&(Wt=!0):(Wt=!0,At.__version=he.version);let Nr=At.currentProgram;Wt===!0&&(Nr=un(he,Z,ae));let Gt=!1,Pt=!1,zn=!1;const Kt=Nr.getUniforms(),ln=At.uniforms;if(we.useProgram(Nr.program)&&(Gt=!0,Pt=!0,zn=!0),he.id!==T&&(T=he.id,Pt=!0),Gt||R!==$){we.buffers.depth.getReversed()?(Q.copy($.projectionMatrix),Zle(Q),Jle(Q),Kt.setValue(q,"projectionMatrix",Q)):Kt.setValue(q,"projectionMatrix",$.projectionMatrix),Kt.setValue(q,"viewMatrix",$.matrixWorldInverse);const An=Kt.map.cameraPosition;An!==void 0&&An.setValue(q,ye.setFromMatrixPosition($.matrixWorld)),xe.logarithmicDepthBuffer&&Kt.setValue(q,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&Kt.setValue(q,"isOrthographic",$.isOrthographicCamera===!0),R!==$&&(R=$,Pt=!0,zn=!0)}if(ae.isSkinnedMesh){Kt.setOptional(q,ae,"bindMatrix"),Kt.setOptional(q,ae,"bindMatrixInverse");const Tn=ae.skeleton;Tn&&(Tn.boneTexture===null&&Tn.computeBoneTexture(),Kt.setValue(q,"boneTexture",Tn.boneTexture,H))}ae.isBatchedMesh&&(Kt.setOptional(q,ae,"batchingTexture"),Kt.setValue(q,"batchingTexture",ae._matricesTexture,H),Kt.setOptional(q,ae,"batchingIdTexture"),Kt.setValue(q,"batchingIdTexture",ae._indirectTexture,H),Kt.setOptional(q,ae,"batchingColorTexture"),ae._colorsTexture!==null&&Kt.setValue(q,"batchingColorTexture",ae._colorsTexture,H));const mn=de.morphAttributes;if((mn.position!==void 0||mn.normal!==void 0||mn.color!==void 0)&&Pe.update(ae,de,Nr),(Pt||At.receiveShadow!==ae.receiveShadow)&&(At.receiveShadow=ae.receiveShadow,Kt.setValue(q,"receiveShadow",ae.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(ln.envMap.value=mt,ln.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),he.isMeshStandardMaterial&&he.envMap===null&&Z.environment!==null&&(ln.envMapIntensity.value=Z.environmentIntensity),Pt&&(Kt.setValue(q,"toneMappingExposure",S.toneMappingExposure),At.needsLights&&ar(ln,zn),Ge&&he.fog===!0&&Re.refreshFogUniforms(ln,Ge),Re.refreshMaterialUniforms(ln,he,O,F,m.state.transmissionRenderTarget[$.id]),_0.upload(q,Bn(At),ln,H)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(_0.upload(q,Bn(At),ln,H),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&Kt.setValue(q,"center",ae.center),Kt.setValue(q,"modelViewMatrix",ae.modelViewMatrix),Kt.setValue(q,"normalMatrix",ae.normalMatrix),Kt.setValue(q,"modelMatrix",ae.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const Tn=he.uniformsGroups;for(let An=0,yi=Tn.length;An<yi;An++){const Pr=Tn[An];te.update(Pr,Nr),te.bind(Pr,Nr)}}return Nr}function ar($,Z){$.ambientLightColor.needsUpdate=Z,$.lightProbe.needsUpdate=Z,$.directionalLights.needsUpdate=Z,$.directionalLightShadows.needsUpdate=Z,$.pointLights.needsUpdate=Z,$.pointLightShadows.needsUpdate=Z,$.spotLights.needsUpdate=Z,$.spotLightShadows.needsUpdate=Z,$.rectAreaLights.needsUpdate=Z,$.hemisphereLights.needsUpdate=Z}function Vn($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function($,Z,de){Fe.get($.texture).__webglTexture=Z,Fe.get($.depthTexture).__webglTexture=de;const he=Fe.get($);he.__hasExternalTextures=!0,he.__autoAllocateDepthBuffer=de===void 0,he.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),he.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function($,Z){const de=Fe.get($);de.__webglFramebuffer=Z,de.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function($,Z=0,de=0){M=$,C=Z,E=de;let he=!0,ae=null,Ge=!1,at=!1;if($){const mt=Fe.get($);if(mt.__useDefaultFramebuffer!==void 0)we.bindFramebuffer(q.FRAMEBUFFER,null),he=!1;else if(mt.__webglFramebuffer===void 0)H.setupRenderTarget($);else if(mt.__hasExternalTextures)H.rebindTextures($,Fe.get($.texture).__webglTexture,Fe.get($.depthTexture).__webglTexture);else if($.depthBuffer){const et=$.depthTexture;if(mt.__boundDepthTexture!==et){if(et!==null&&Fe.has(et)&&($.width!==et.image.width||$.height!==et.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");H.setupDepthRenderbuffer($)}}const Et=$.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(at=!0);const Ye=Fe.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Ye[Z])?ae=Ye[Z][de]:ae=Ye[Z],Ge=!0):$.samples>0&&H.useMultisampledRTT($)===!1?ae=Fe.get($).__webglMultisampledFramebuffer:Array.isArray(Ye)?ae=Ye[de]:ae=Ye,P.copy($.viewport),D.copy($.scissor),L=$.scissorTest}else P.copy(k).multiplyScalar(O).floor(),D.copy(W).multiplyScalar(O).floor(),L=J;if(we.bindFramebuffer(q.FRAMEBUFFER,ae)&&he&&we.drawBuffers($,ae),we.viewport(P),we.scissor(D),we.setScissorTest(L),Ge){const mt=Fe.get($.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+Z,mt.__webglTexture,de)}else if(at){const mt=Fe.get($.texture),Et=Z||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,mt.__webglTexture,de||0,Et)}T=-1},this.readRenderTargetPixels=function($,Z,de,he,ae,Ge,at){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ht=Fe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&at!==void 0&&(ht=ht[at]),ht){we.bindFramebuffer(q.FRAMEBUFFER,ht);try{const mt=$.texture,Et=mt.format,Ye=mt.type;if(!xe.textureFormatReadable(Et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!xe.textureTypeReadable(Ye)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=$.width-he&&de>=0&&de<=$.height-ae&&q.readPixels(Z,de,he,ae,$e.convert(Et),$e.convert(Ye),Ge)}finally{const mt=M!==null?Fe.get(M).__webglFramebuffer:null;we.bindFramebuffer(q.FRAMEBUFFER,mt)}}},this.readRenderTargetPixelsAsync=async function($,Z,de,he,ae,Ge,at){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ht=Fe.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&at!==void 0&&(ht=ht[at]),ht){const mt=$.texture,Et=mt.format,Ye=mt.type;if(!xe.textureFormatReadable(Et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!xe.textureTypeReadable(Ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Z>=0&&Z<=$.width-he&&de>=0&&de<=$.height-ae){we.bindFramebuffer(q.FRAMEBUFFER,ht);const et=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,et),q.bufferData(q.PIXEL_PACK_BUFFER,Ge.byteLength,q.STREAM_READ),q.readPixels(Z,de,he,ae,$e.convert(Et),$e.convert(Ye),0);const _t=M!==null?Fe.get(M).__webglFramebuffer:null;we.bindFramebuffer(q.FRAMEBUFFER,_t);const zt=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await Qle(q,zt,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,et),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Ge),q.deleteBuffer(et),q.deleteSync(zt),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function($,Z=null,de=0){$.isTexture!==!0&&(Lc("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Z=arguments[0]||null,$=arguments[1]);const he=Math.pow(2,-de),ae=Math.floor($.image.width*he),Ge=Math.floor($.image.height*he),at=Z!==null?Z.x:0,ht=Z!==null?Z.y:0;H.setTexture2D($,0),q.copyTexSubImage2D(q.TEXTURE_2D,de,0,0,at,ht,ae,Ge),we.unbindTexture()};const Ar=q.createFramebuffer(),vt=q.createFramebuffer();this.copyTextureToTexture=function($,Z,de=null,he=null,ae=0,Ge=null){$.isTexture!==!0&&(Lc("WebGLRenderer: copyTextureToTexture function signature has changed."),he=arguments[0]||null,$=arguments[1],Z=arguments[2],Ge=arguments[3]||0,de=null),Ge===null&&(ae!==0?(Lc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=ae,ae=0):Ge=0);let at,ht,mt,Et,Ye,et,_t,zt,pn;const dn=$.isCompressedTexture?$.mipmaps[Ge]:$.image;if(de!==null)at=de.max.x-de.min.x,ht=de.max.y-de.min.y,mt=de.isBox3?de.max.z-de.min.z:1,Et=de.min.x,Ye=de.min.y,et=de.isBox3?de.min.z:0;else{const mn=Math.pow(2,-ae);at=Math.floor(dn.width*mn),ht=Math.floor(dn.height*mn),$.isDataArrayTexture?mt=dn.depth:$.isData3DTexture?mt=Math.floor(dn.depth*mn):mt=1,Et=0,Ye=0,et=0}he!==null?(_t=he.x,zt=he.y,pn=he.z):(_t=0,zt=0,pn=0);const kt=$e.convert(Z.format),At=$e.convert(Z.type);let $n;Z.isData3DTexture?(H.setTexture3D(Z,0),$n=q.TEXTURE_3D):Z.isDataArrayTexture||Z.isCompressedArrayTexture?(H.setTexture2DArray(Z,0),$n=q.TEXTURE_2D_ARRAY):(H.setTexture2D(Z,0),$n=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,Z.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,Z.unpackAlignment);const Wt=q.getParameter(q.UNPACK_ROW_LENGTH),Nr=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Gt=q.getParameter(q.UNPACK_SKIP_PIXELS),Pt=q.getParameter(q.UNPACK_SKIP_ROWS),zn=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,dn.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,dn.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Et),q.pixelStorei(q.UNPACK_SKIP_ROWS,Ye),q.pixelStorei(q.UNPACK_SKIP_IMAGES,et);const Kt=$.isDataArrayTexture||$.isData3DTexture,ln=Z.isDataArrayTexture||Z.isData3DTexture;if($.isDepthTexture){const mn=Fe.get($),Tn=Fe.get(Z),An=Fe.get(mn.__renderTarget),yi=Fe.get(Tn.__renderTarget);we.bindFramebuffer(q.READ_FRAMEBUFFER,An.__webglFramebuffer),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,yi.__webglFramebuffer);for(let Pr=0;Pr<mt;Pr++)Kt&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Fe.get($).__webglTexture,ae,et+Pr),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Fe.get(Z).__webglTexture,Ge,pn+Pr)),q.blitFramebuffer(Et,Ye,at,ht,_t,zt,at,ht,q.DEPTH_BUFFER_BIT,q.NEAREST);we.bindFramebuffer(q.READ_FRAMEBUFFER,null),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(ae!==0||$.isRenderTargetTexture||Fe.has($)){const mn=Fe.get($),Tn=Fe.get(Z);we.bindFramebuffer(q.READ_FRAMEBUFFER,Ar),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,vt);for(let An=0;An<mt;An++)Kt?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,mn.__webglTexture,ae,et+An):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,mn.__webglTexture,ae),ln?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Tn.__webglTexture,Ge,pn+An):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Tn.__webglTexture,Ge),ae!==0?q.blitFramebuffer(Et,Ye,at,ht,_t,zt,at,ht,q.COLOR_BUFFER_BIT,q.NEAREST):ln?q.copyTexSubImage3D($n,Ge,_t,zt,pn+An,Et,Ye,at,ht):q.copyTexSubImage2D($n,Ge,_t,zt,Et,Ye,at,ht);we.bindFramebuffer(q.READ_FRAMEBUFFER,null),we.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else ln?$.isDataTexture||$.isData3DTexture?q.texSubImage3D($n,Ge,_t,zt,pn,at,ht,mt,kt,At,dn.data):Z.isCompressedArrayTexture?q.compressedTexSubImage3D($n,Ge,_t,zt,pn,at,ht,mt,kt,dn.data):q.texSubImage3D($n,Ge,_t,zt,pn,at,ht,mt,kt,At,dn):$.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Ge,_t,zt,at,ht,kt,At,dn.data):$.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Ge,_t,zt,dn.width,dn.height,kt,dn.data):q.texSubImage2D(q.TEXTURE_2D,Ge,_t,zt,at,ht,kt,At,dn);q.pixelStorei(q.UNPACK_ROW_LENGTH,Wt),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Nr),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Gt),q.pixelStorei(q.UNPACK_SKIP_ROWS,Pt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,zn),Ge===0&&Z.generateMipmaps&&q.generateMipmap($n),we.unbindTexture()},this.copyTextureToTexture3D=function($,Z,de=null,he=null,ae=0){return $.isTexture!==!0&&(Lc("WebGLRenderer: copyTextureToTexture3D function signature has changed."),de=arguments[0]||null,he=arguments[1]||null,$=arguments[2],Z=arguments[3],ae=arguments[4]||0),Lc('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture($,Z,de,he,ae)},this.initRenderTarget=function($){Fe.get($).__webglFramebuffer===void 0&&H.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?H.setTextureCube($,0):$.isData3DTexture?H.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?H.setTexture2DArray($,0):H.setTexture2D($,0),we.unbindTexture()},this.resetState=function(){C=0,E=0,M=null,we.reset(),xt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return $o}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorspace=rn._getDrawingBufferColorSpace(e),r.unpackColorSpace=rn._getUnpackColorSpace()}}const Gd=new us,wa=new je,Rk=new Y,OS=new je,b0=new je,Oy=new Y,HC=new Y,Ak=new fn,Nk=new Y,Pk=new Y;let Bi=null,Ps=null;const Ca=[],ql={NONE:-1,PAN:0,ROTATE:1};class Xpe extends u_{constructor(e,r,i=null){super(r,i),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new Sk,this.mouseButtons={LEFT:ei.PAN,MIDDLE:ei.PAN,RIGHT:ei.ROTATE},this.touches={ONE:Na.PAN},this._onPointerMove=Kpe.bind(this),this._onPointerDown=Ype.bind(this),this._onPointerCancel=Qpe.bind(this),this._onContextMenu=Zpe.bind(this),i!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const r=this.domElement.getBoundingClientRect();wa.x=(e.clientX-r.left)/r.width*2-1,wa.y=-(e.clientY-r.top)/r.height*2+1}_updateState(e){let r;if(e.pointerType==="touch")r=this.touches.ONE;else switch(e.button){case 0:r=this.mouseButtons.LEFT;break;case 1:r=this.mouseButtons.MIDDLE;break;case 2:r=this.mouseButtons.RIGHT;break;default:r=null}switch(r){case ei.PAN:case Na.PAN:this.state=ql.PAN;break;case ei.ROTATE:case Na.ROTATE:this.state=ql.ROTATE;break;default:this.state=ql.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function Kpe(n){const e=this.object,r=this.domElement,i=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),i.setFromCamera(wa,e),Bi)this.state===ql.PAN?i.ray.intersectPlane(Gd,Oy)&&Bi.position.copy(Oy.sub(Rk).applyMatrix4(Ak)):this.state===ql.ROTATE&&(OS.subVectors(wa,b0).multiplyScalar(this.rotateSpeed),Bi.rotateOnWorldAxis(Nk,OS.x),Bi.rotateOnWorldAxis(Pk.normalize(),-OS.y)),this.dispatchEvent({type:"drag",object:Bi}),b0.copy(wa);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(Ca.length=0,i.setFromCamera(wa,e),i.intersectObjects(this.objects,this.recursive,Ca),Ca.length>0){const o=Ca[0].object;Gd.setFromNormalAndCoplanarPoint(e.getWorldDirection(Gd.normal),HC.setFromMatrixPosition(o.matrixWorld)),Ps!==o&&Ps!==null&&(this.dispatchEvent({type:"hoveroff",object:Ps}),r.style.cursor="auto",Ps=null),Ps!==o&&(this.dispatchEvent({type:"hoveron",object:o}),r.style.cursor="pointer",Ps=o)}else Ps!==null&&(this.dispatchEvent({type:"hoveroff",object:Ps}),r.style.cursor="auto",Ps=null);b0.copy(wa)}}function Ype(n){const e=this.object,r=this.domElement,i=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),Ca.length=0,i.setFromCamera(wa,e),i.intersectObjects(this.objects,this.recursive,Ca),Ca.length>0&&(this.transformGroup===!0?Bi=Ok(Ca[0].object):Bi=Ca[0].object,Gd.setFromNormalAndCoplanarPoint(e.getWorldDirection(Gd.normal),HC.setFromMatrixPosition(Bi.matrixWorld)),i.ray.intersectPlane(Gd,Oy)&&(this.state===ql.PAN?(Ak.copy(Bi.parent.matrixWorld).invert(),Rk.copy(Oy).sub(HC.setFromMatrixPosition(Bi.matrixWorld))):this.state===ql.ROTATE&&(Nk.set(0,1,0).applyQuaternion(e.quaternion).normalize(),Pk.set(1,0,0).applyQuaternion(e.quaternion).normalize())),r.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Bi})),b0.copy(wa))}function Qpe(){this.enabled!==!1&&(Bi&&(this.dispatchEvent({type:"dragend",object:Bi}),Bi=null),this.domElement.style.cursor=Ps?"pointer":"auto",this.state=ql.NONE)}function Zpe(n){this.enabled!==!1&&n.preventDefault()}function Ok(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:Ok(n.parent,e)}var WM=function(e){eme(e);var r=Jpe(e);return e.on=r.on,e.off=r.off,e.fire=r.fire,e};function Jpe(n){var e=Object.create(null);return{on:function(r,i,o){if(typeof i!="function")throw new Error("callback is expected to be a function");var s=e[r];return s||(s=e[r]=[]),s.push({callback:i,ctx:o}),n},off:function(r,i){var o=typeof r>"u";if(o)return e=Object.create(null),n;if(e[r]){var s=typeof i!="function";if(s)delete e[r];else for(var a=e[r],l=0;l<a.length;++l)a[l].callback===i&&a.splice(l,1)}return n},fire:function(r){var i=e[r];if(!i)return n;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var s=0;s<i.length;++s){var a=i[s];a.callback.apply(a.ctx,o)}return n}}}function eme(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],r=0;r<e.length;++r)if(n.hasOwnProperty(e[r]))throw new Error("Subject cannot be eventified, since it already has property '"+e[r]+"'")}var tme=rme,nme=WM;function rme(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,r=new Map,i={},o=0,s=n.multigraph?S:b,a=[],l=N,c=N,u=N,d=N,f={version:20,addNode:y,addLink:x,removeLink:M,removeNode:m,getNode:v,getNodeCount:w,getLinkCount:C,getEdgeCount:C,getLinksCount:C,getNodesCount:w,getLinks:E,forEachNode:V,forEachLinkedNode:L,forEachLink:D,beginUpdate:u,endUpdate:d,clear:P,hasLink:R,hasNode:v,getLink:R};return nme(f),h(),f;function h(){var U=f.on;f.on=k;function k(){return f.beginUpdate=u=F,f.endUpdate=d=O,l=p,c=g,f.on=U,U.apply(f,arguments)}}function p(U,k){a.push({link:U,changeType:k})}function g(U,k){a.push({node:U,changeType:k})}function y(U,k){if(U===void 0)throw new Error("Invalid node identifier");u();var W=v(U);return W?(W.data=k,c(W,"update")):(W=new ime(U,k),c(W,"add")),e.set(U,W),d(),W}function v(U){return e.get(U)}function m(U){var k=v(U);if(!k)return!1;u();var W=k.links;return W&&(W.forEach(T),k.links=null),e.delete(U),c(k,"remove"),d(),!0}function x(U,k,W){u();var J=v(U)||y(U),z=v(k)||y(k),j=s(U,k,W),X=r.has(j.id);return r.set(j.id,j),hI(J,j),U!==k&&hI(z,j),l(j,X?"update":"add"),d(),j}function b(U,k,W){var J=Tv(U,k),z=r.get(J);return z?(z.data=W,z):new pI(U,k,W,J)}function S(U,k,W){var J=Tv(U,k),z=i.hasOwnProperty(J);if(z||R(U,k)){z||(i[J]=0);var j="@"+ ++i[J];J=Tv(U+j,k+j)}return new pI(U,k,W,J)}function w(){return e.size}function C(){return r.size}function E(U){var k=v(U);return k?k.links:null}function M(U,k){return k!==void 0&&(U=R(U,k)),T(U)}function T(U){if(!U||!r.get(U.id))return!1;u(),r.delete(U.id);var k=v(U.fromId),W=v(U.toId);return k&&k.links.delete(U),W&&W.links.delete(U),l(U,"remove"),d(),!0}function R(U,k){if(!(U===void 0||k===void 0))return r.get(Tv(U,k))}function P(){u(),V(function(U){m(U.id)}),d()}function D(U){if(typeof U=="function")for(var k=r.values(),W=k.next();!W.done;){if(U(W.value))return!0;W=k.next()}}function L(U,k,W){var J=v(U);if(J&&J.links&&typeof k=="function")return W?I(J.links,U,k):A(J.links,U,k)}function A(U,k,W){for(var J,z=U.values(),j=z.next();!j.done;){var X=j.value,Q=X.fromId===k?X.toId:X.fromId;if(J=W(e.get(Q),X),J)return!0;j=z.next()}}function I(U,k,W){for(var J,z=U.values(),j=z.next();!j.done;){var X=j.value;if(X.fromId===k&&(J=W(e.get(X.toId),X),J))return!0;j=z.next()}}function N(){}function F(){o+=1}function O(){o-=1,o===0&&a.length>0&&(f.fire("changed",a),a.length=0)}function V(U){if(typeof U!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+U);for(var k=e.values(),W=k.next();!W.done;){if(U(W.value))return!0;W=k.next()}}}function ime(n,e){this.id=n,this.links=null,this.data=e}function hI(n,e){n.links?n.links.add(e):n.links=new Set([e])}function pI(n,e,r,i){this.fromId=n,this.toId=e,this.data=r,this.id=i}function Tv(n,e){return n.toString()+" "+e.toString()}const ome=_u(tme);var qM={exports:{}},cg={exports:{}},Ik=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const sme=Ik;var th=function(e){return r;function r(i,o){let s=o&&o.indent||0,a=o&&o.join!==void 0?o.join:`
`,l=Array(s+1).join(" "),c=[];for(let u=0;u<e;++u){let d=sme(u),f=u===0?"":l;c.push(f+i.replace(/{var}/g,d))}return c.join(a)}};const Dk=th;cg.exports=ame;cg.exports.generateCreateBodyFunctionBody=Lk;cg.exports.getVectorCode=Uk;cg.exports.getBodyCode=Fk;function ame(n,e){let r=Lk(n,e),{Body:i}=new Function(r)();return i}function Lk(n,e){return`
${Uk(n,e)}
${Fk(n)}
return {Body: Body, Vector: Vector};
`}function Fk(n){let e=Dk(n),r=e("{var}",{join:", "});return`
function Body(${r}) {
  this.isPinned = false;
  this.pos = new Vector(${r});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${r}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function Uk(n,e){let r=Dk(n),i="";return e&&(i=`${r(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${r("{var}",{join:", "})}) {
  ${i}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${r('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${r("this.{var} = v.{var};",{indent:4})}
    } else {
      ${r('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${r("this.{var} = ",{join:""})}0;
  };`}var lme=cg.exports,fc={exports:{}};const XM=th,gl=Ik;fc.exports=cme;fc.exports.generateQuadTreeFunctionBody=Bk;fc.exports.getInsertStackCode=Gk;fc.exports.getQuadNodeCode=Vk;fc.exports.isSamePosition=$k;fc.exports.getChildBodyCode=kk;fc.exports.setChildBodyCode=zk;function cme(n){let e=Bk(n);return new Function(e)()}function Bk(n){let e=XM(n),r=Math.pow(2,n);return`
${Gk()}
${Vk(n)}
${$k(n)}
${kk(n)}
${zk(n)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${a("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${gl(0)} - node.min_${gl(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${s()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${o(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function o(l){let c=[],u=Array(l+1).join(" ");for(let d=0;d<n;++d)c.push(u+`if (${gl(d)} > max_${gl(d)}) {`),c.push(u+`  quadIdx = quadIdx + ${Math.pow(2,d)};`),c.push(u+`  min_${gl(d)} = max_${gl(d)};`),c.push(u+`  max_${gl(d)} = node.max_${gl(d)};`),c.push(u+"}");return c.join(`
`)}function s(){let l=Array(11).join(" "),c=[];for(let u=0;u<r;++u)c.push(l+`if (node.quad${u}) {`),c.push(l+`  queue[pushIdx] = node.quad${u};`),c.push(l+"  queueLength += 1;"),c.push(l+"  pushIdx += 1;"),c.push(l+"}");return c.join(`
`)}function a(l){let c=[];for(let u=0;u<r;++u)c.push(`${l}quad${u} = null;`);return c.join(`
`)}}function $k(n){let e=XM(n);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function zk(n){var e=Math.pow(2,n);return`
function setChild(node, idx, child) {
  ${r()}
}`;function r(){let i=[];for(let o=0;o<e;++o){let s=o===0?"  ":"  else ";i.push(`${s}if (idx === ${o}) node.quad${o} = child;`)}return i.join(`
`)}}function kk(n){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let r=[],i=Math.pow(2,n);for(let o=0;o<i;++o)r.push(`  if (idx === ${o}) return node.quad${o};`);return r.join(`
`)}}function Vk(n){let e=XM(n),r=Math.pow(2,n);var i=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${o("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return i;function o(s){let a=[];for(let l=0;l<r;++l)a.push(`${s}quad${l} = null;`);return a.join(`
`)}}function Gk(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var ume=fc.exports,KM={exports:{}};KM.exports=fme;KM.exports.generateFunctionBody=Hk;const dme=th;function fme(n){let e=Hk(n);return new Function("bodies","settings","random",e)}function Hk(n){let e=dme(n);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var hme=KM.exports,YM={exports:{}};const pme=th;YM.exports=mme;YM.exports.generateCreateDragForceFunctionBody=jk;function mme(n){let e=jk(n);return new Function("options",e)}function jk(n){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${pme(n)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var gme=YM.exports,QM={exports:{}};const vme=th;QM.exports=yme;QM.exports.generateCreateSpringForceFunctionBody=Wk;function yme(n){let e=Wk(n);return new Function("options","random",e)}function Wk(n){let e=vme(n);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var xme=QM.exports,ZM={exports:{}};const _me=th;ZM.exports=bme;ZM.exports.generateIntegratorFunctionBody=qk;function bme(n){let e=qk(n);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function qk(n){let e=_me(n);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var Sme=ZM.exports,IS,mI;function wme(){if(mI)return IS;mI=1,IS=n;function n(e,r,i,o){this.from=e,this.to=r,this.length=i,this.coefficient=o}return IS}var DS,gI;function Cme(){if(gI)return DS;gI=1,DS=n;function n(e,r){var i;if(e||(e={}),r){for(i in r)if(r.hasOwnProperty(i)){var o=e.hasOwnProperty(i),s=typeof r[i],a=!o||typeof e[i]!==s;a?e[i]=r[i]:s==="object"&&(e[i]=n(e[i],r[i]))}}return e}return DS}var Ih={exports:{}},vI;function Eme(){if(vI)return Ih.exports;vI=1,Ih.exports=n,Ih.exports.random=n,Ih.exports.randomIterator=l;function n(c){var u=typeof c=="number"?c:+new Date;return new e(u)}function e(c){this.seed=c}e.prototype.next=a,e.prototype.nextDouble=s,e.prototype.uniform=s,e.prototype.gaussian=r;function r(){var c,u,d;do u=this.nextDouble()*2-1,d=this.nextDouble()*2-1,c=u*u+d*d;while(c>=1||c===0);return u*Math.sqrt(-2*Math.log(c)/c)}e.prototype.levy=i;function i(){var c=1.5,u=Math.pow(o(1+c)*Math.sin(Math.PI*c/2)/(o((1+c)/2)*c*Math.pow(2,(c-1)/2)),1/c);return this.gaussian()*u/Math.pow(Math.abs(this.gaussian()),1/c)}function o(c){return Math.sqrt(2*Math.PI/c)*Math.pow(1/Math.E*(c+1/(12*c-1/(10*c))),c)}function s(){var c=this.seed;return c=c+2127912214+(c<<12)&4294967295,c=(c^3345072700^c>>>19)&4294967295,c=c+374761393+(c<<5)&4294967295,c=(c+3550635116^c<<9)&4294967295,c=c+4251993797+(c<<3)&4294967295,c=(c^3042594569^c>>>16)&4294967295,this.seed=c,(c&268435455)/268435456}function a(c){return Math.floor(this.nextDouble()*c)}function l(c,u){var d=u||n();if(typeof d.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:h,shuffle:f};function f(){var p,g,y;for(p=c.length-1;p>0;--p)g=d.next(p+1),y=c[g],c[g]=c[p],c[p]=y;return c}function h(p){var g,y,v;for(g=c.length-1;g>0;--g)y=d.next(g+1),v=c[y],c[y]=c[g],c[g]=v,p(v);c.length&&p(c[0])}}return Ih.exports}var Xk=Ome,Tme=lme,Mme=ume,Rme=hme,Ame=gme,Nme=xme,Pme=Sme,yI={};function Ome(n){var e=wme(),r=Cme(),i=WM;if(n){if(n.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(n.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}n=r(n,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var o=yI[n.dimensions];if(!o){var s=n.dimensions;o={Body:Tme(s,n.debug),createQuadTree:Mme(s),createBounds:Rme(s),createDragForce:Ame(s),createSpringForce:Nme(s),integrate:Pme(s)},yI[s]=o}var a=o.Body,l=o.createQuadTree,c=o.createBounds,u=o.createDragForce,d=o.createSpringForce,f=o.integrate,h=I=>new a(I),p=Eme().random(42),g=[],y=[],v=l(n,p),m=c(g,n,p),x=d(n,p),b=u(n),S=0,w=[],C=new Map,E=0;R("nbody",L),R("spring",A);var M={bodies:g,quadTree:v,springs:y,settings:n,addForce:R,removeForce:P,getForces:D,step:function(){for(var I=0;I<w.length;++I)w[I](E);var N=f(g,n.timeStep,n.adaptiveTimeStepWeight);return E+=1,N},addBody:function(I){if(!I)throw new Error("Body is required");return g.push(I),I},addBodyAt:function(I){if(!I)throw new Error("Body position is required");var N=h(I);return g.push(N),N},removeBody:function(I){if(I){var N=g.indexOf(I);if(!(N<0))return g.splice(N,1),g.length===0&&m.reset(),!0}},addSpring:function(I,N,F,O){if(!I||!N)throw new Error("Cannot add null spring to force simulator");typeof F!="number"&&(F=-1);var V=new e(I,N,F,O>=0?O:-1);return y.push(V),V},getTotalMovement:function(){return S},removeSpring:function(I){if(I){var N=y.indexOf(I);if(N>-1)return y.splice(N,1),!0}},getBestNewBodyPosition:function(I){return m.getBestNewPosition(I)},getBBox:T,getBoundingBox:T,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(I){return I!==void 0?(n.gravity=I,v.options({gravity:I}),this):n.gravity},theta:function(I){return I!==void 0?(n.theta=I,v.options({theta:I}),this):n.theta},random:p};return Ime(n,M),i(M),M;function T(){return m.update(),m.box}function R(I,N){if(C.has(I))throw new Error("Force "+I+" is already added");C.set(I,N),w.push(N)}function P(I){var N=w.indexOf(C.get(I));N<0||(w.splice(N,1),C.delete(I))}function D(){return C}function L(){if(g.length!==0){v.insertBodies(g);for(var I=g.length;I--;){var N=g[I];N.isPinned||(N.reset(),v.updateBodyForce(N),b.update(N))}}}function A(){for(var I=y.length;I--;)x.update(y[I])}}function Ime(n,e){for(var r in n)Dme(n,e,r)}function Dme(n,e,r){if(n.hasOwnProperty(r)&&typeof e[r]!="function"){var i=Number.isFinite(n[r]);i?e[r]=function(o){if(o!==void 0){if(!Number.isFinite(o))throw new Error("Value of "+r+" should be a valid number.");return n[r]=o,e}return n[r]}:e[r]=function(o){return o!==void 0?(n[r]=o,e):n[r]}}}qM.exports=Fme;qM.exports.simulator=Xk;var Lme=WM;function Fme(n,e){if(!n)throw new Error("Graph structure cannot be undefined");var r=e&&e.createSimulator||Xk,i=r(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var o=n.version>19?L:D;e&&typeof e.nodeMass=="function"&&(o=e.nodeMass);var s=new Map,a={},l=0,c=i.settings.springTransform||Ume;b(),v();var u=!1,d={step:function(){if(l===0)return f(!0),!0;var A=i.step();d.lastMove=A,d.fire("step");var I=A/l,N=I<=.01;return f(N),N},getNodePosition:function(A){return P(A).pos},setNodePosition:function(A){var I=P(A);I.setPosition.apply(I,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(A){var I=a[A];if(I)return{from:I.from.pos,to:I.to.pos}},getGraphRect:function(){return i.getBBox()},forEachBody:h,pinNode:function(A,I){var N=P(A.id);N.isPinned=!!I},isNodePinned:function(A){return P(A.id).isPinned},dispose:function(){n.off("changed",x),d.fire("disposed")},getBody:y,getSpring:g,getForceVectorLength:p,simulator:i,graph:n,lastMove:0};return Lme(d),d;function f(A){u!==A&&(u=A,m(A))}function h(A){s.forEach(A)}function p(){var A=0,I=0;return h(function(N){A+=Math.abs(N.force.x),I+=Math.abs(N.force.y)}),Math.sqrt(A*A+I*I)}function g(A,I){var N;if(I===void 0)typeof A!="object"?N=A:N=A.id;else{var F=n.hasLink(A,I);if(!F)return;N=F.id}return a[N]}function y(A){return s.get(A)}function v(){n.on("changed",x)}function m(A){d.fire("stable",A)}function x(A){for(var I=0;I<A.length;++I){var N=A[I];N.changeType==="add"?(N.node&&S(N.node.id),N.link&&C(N.link)):N.changeType==="remove"&&(N.node&&w(N.node),N.link&&E(N.link))}l=n.getNodesCount()}function b(){l=0,n.forEachNode(function(A){S(A.id),l+=1}),n.forEachLink(C)}function S(A){var I=s.get(A);if(!I){var N=n.getNode(A);if(!N)throw new Error("initBody() was called with unknown node id");var F=N.position;if(!F){var O=M(N);F=i.getBestNewBodyPosition(O)}I=i.addBodyAt(F),I.id=A,s.set(A,I),T(A),R(N)&&(I.isPinned=!0)}}function w(A){var I=A.id,N=s.get(I);N&&(s.delete(I),i.removeBody(N))}function C(A){T(A.fromId),T(A.toId);var I=s.get(A.fromId),N=s.get(A.toId),F=i.addSpring(I,N,A.length);c(A,F),a[A.id]=F}function E(A){var I=a[A.id];if(I){var N=n.getNode(A.fromId),F=n.getNode(A.toId);N&&T(N.id),F&&T(F.id),delete a[A.id],i.removeSpring(I)}}function M(A){var I=[];if(!A.links)return I;for(var N=Math.min(A.links.length,2),F=0;F<N;++F){var O=A.links[F],V=O.fromId!==A.id?s.get(O.fromId):s.get(O.toId);V&&V.pos&&I.push(V)}return I}function T(A){var I=s.get(A);if(I.mass=o(A),Number.isNaN(I.mass))throw new Error("Node mass should be a number")}function R(A){return A&&(A.isPinned||A.data&&A.data.isPinned)}function P(A){var I=s.get(A);return I||(S(A),I=s.get(A)),I}function D(A){var I=n.getLinks(A);return I?1+I.length/3:1}function L(A){var I=n.getLinks(A);return I?1+I.size/3:1}}function Ume(){}var Bme=qM.exports;const $me=_u(Bme);function zme(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function xI(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function kme(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xI(Object(r),!0).forEach(function(i){Kk(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Kk(n,e,r){return e=Yme(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Vme(n,e){if(n==null)return{};var r={},i=Object.keys(n),o,s;for(s=0;s<i.length;s++)o=i[s],!(e.indexOf(o)>=0)&&(r[o]=n[o]);return r}function Gme(n,e){if(n==null)return{};var r=Vme(n,e),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(o=0;o<s.length;o++)i=s[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(r[i]=n[i])}return r}function Yk(n,e){return jme(n)||zme(n,e)||Qk(n,e)||Xme()}function Iy(n){return Hme(n)||Wme(n)||Qk(n)||qme()}function Hme(n){if(Array.isArray(n))return jC(n)}function jme(n){if(Array.isArray(n))return n}function Wme(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Qk(n,e){if(n){if(typeof n=="string")return jC(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jC(n,e)}}function jC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function qme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kme(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Yme(n){var e=Kme(n,"string");return typeof e=="symbol"?e:String(e)}var Qme=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function Zme(n,e,r){var i={enter:[],update:[],exit:[]};if(r){var a=LC(n,r,!1),l=LC(e,r,!1),c=Object.assign({},a,l);Object.entries(c).forEach(function(u){var d=Yk(u,2),f=d[0],h=d[1],p=a.hasOwnProperty(f)?l.hasOwnProperty(f)?"update":"exit":"enter";i[p].push(p==="update"?[a[f],l[f]]:h)})}else{var o=new Set(n),s=new Set(e);new Set([].concat(Iy(o),Iy(s))).forEach(function(u){var d=o.has(u)?s.has(u)?"update":"exit":"enter";i[d].push(d==="update"?[u,u]:u)})}return i}function Jme(n,e,r){var i=r.objBindAttr,o=i===void 0?"__obj":i,s=r.dataBindAttr,a=s===void 0?"__data":s,l=r.idAccessor,c=r.purge,u=c===void 0?!1:c,d=function(v){return v.hasOwnProperty(a)},f=e.filter(function(y){return!d(y)}),h=e.filter(d).map(function(y){return y[a]}),p=n,g=u?{enter:p,exit:h,update:[]}:Zme(h,p,l);return g.update=g.update.map(function(y){var v=Yk(y,2),m=v[0],x=v[1];return m!==x&&(x[o]=m[o],x[o][a]=x),x}),g.exit=g.exit.concat(f.map(function(y){return Kk({},o,y)})),g}function ege(n,e,r,i,o){var s=o.createObj,a=s===void 0?function(M){return{}}:s,l=o.updateObj,c=l===void 0?function(M,T){}:l,u=o.exitObj,d=u===void 0?function(M){}:u,f=o.objBindAttr,h=f===void 0?"__obj":f,p=o.dataBindAttr,g=p===void 0?"__data":p,y=Gme(o,Qme),v=Jme(n,e,kme({objBindAttr:h,dataBindAttr:g},y)),m=v.enter,x=v.update,b=v.exit;b.forEach(function(M){var T=M[h];delete M[h],d(T),i(T)});var S=C(m),w=[].concat(Iy(m),Iy(x));E(w),S.forEach(r);function C(M){var T=[];return M.forEach(function(R){var P=a(R);P&&(P[g]=R,R[h]=P,T.push(P))}),T}function E(M){M.forEach(function(T){var R=T[h];R&&(R[g]=T,c(R,T))})}}function WC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function tge(n){if(Array.isArray(n))return n}function nge(n){if(Array.isArray(n))return WC(n)}function rge(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ige(n,e,r){return e=Dy(e),pge(n,eR()?Reflect.construct(e,r||[],Dy(n).constructor):e.apply(n,r))}function oge(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Zk(n,e,r){if(eR())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return o}function sge(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function JM(n,e,r){return(e=gge(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Dy(n){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dy(n)}function age(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&qC(n,e)}function eR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eR=function(){return!!n})()}function lge(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function cge(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function uge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _I(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Jk(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_I(Object(r),!0).forEach(function(i){JM(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):_I(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function fge(n,e){if(n==null)return{};var r,i,o=hge(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function hge(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function pge(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rge(n)}function qC(n,e){return qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qC(n,e)}function bI(n,e){return tge(n)||cge(n,e)||e4(n,e)||uge()}function ls(n){return nge(n)||lge(n)||e4(n)||dge()}function mge(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gge(n){var e=mge(n,"string");return typeof e=="symbol"?e:e+""}function XC(n){"@babel/helpers - typeof";return XC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XC(n)}function e4(n,e){if(n){if(typeof n=="string")return WC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?WC(n,e):void 0}}var t4=function(e){e instanceof Array?e.forEach(t4):(e.map&&e.map.dispose(),e.dispose())},n4=function(e){e.geometry&&e.geometry.dispose(),e.material&&t4(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(n4)},KC=function(e){for(;e.children.length;){var r=e.children[0];e.remove(r),n4(r)}},vge=["objFilter"];function Dh(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.objFilter,o=i===void 0?function(){return!0}:i,s=fge(r,vge);return ege(n,e.children.filter(o),function(a){return e.add(a)},function(a){e.remove(a),KC(a)},Jk({objBindAttr:"__threeObj"},s))}var Lh=function(e){return isNaN(e)?parseInt(Ot(e).toHex(),16):e},LS=function(e){return isNaN(e)?Ot(e).getAlpha():1},yge=iM(Lz);function SI(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=yge(e(i))})}function xge(n,e){var r=n.nodes,i=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.nodeFilter,a=s===void 0?function(){return!0}:s,l=o.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!a(p)}}),i.forEach(function(p){var g=p.source,y=p.target,v=S(g),m=S(y);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var x=u[v],b=u[m];x.out.push(b);function S(w){return XC(w)==="object"?e(w):w}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(ls(Object.entries(u).filter(function(p){var g=bI(p,2),y=g[1];return!y.skip}).map(function(p){var g=bI(p,2),y=g[0],v=g[1];return JM({},y,v.depth)}))));return f;function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var S=p[m];if(g.indexOf(S)!==-1){var w=[].concat(ls(g.slice(g.indexOf(S))),[S]).map(function(C){return e(C.data)});return d.some(function(C){return C.length===w.length&&C.every(function(E,M){return E===w[M]})})||(d.push(w),c(w)),1}y>S.depth&&(S.depth=y,h(S.out,[].concat(ls(g),[S]),y+(S.skip?0:1)))},m=0,x=p.length;m<x;m++)v()}}var Ft=window.THREE?window.THREE:{Group:Ed,Mesh:Br,MeshLambertMaterial:VM,Color:Tt,BufferGeometry:Li,BufferAttribute:ri,Matrix4:fn,Vector3:Y,SphereGeometry:Jf,CylinderGeometry:l_,TubeGeometry:kM,ConeGeometry:zM,Line:Cce,LineBasicMaterial:a_,QuadraticBezierCurve3:$M,CubicBezierCurve3:gk,Box3:Tu},wI={graph:ome,forcelayout:$me},_ge=2,FS=new Ft.BufferGeometry().setAttribute?"setAttribute":"addAttribute",Mv=new Ft.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",bge=ig({props:{jsonUrl:{onChange:function(e,r){var i=this;e&&!r.fetchingJson&&(r.fetchingJson=!0,r.onLoading(),fetch(e).then(function(o){return o.json()}).then(function(o){r.fetchingJson=!1,r.onFinishLoading(o),i.graphData(o)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,r){var i=r.d3ForceLayout.force("charge");i&&i.strength(e>2?-60:-30),e<3&&o(r.graphData.nodes,"z"),e<2&&o(r.graphData.nodes,"y");function o(s,a){s.forEach(function(l){delete l[a],delete l["v".concat(a)]})}}},dagMode:{onChange:function(e,r){!e&&r.forceEngine==="d3"&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=i.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,r,i){return i===void 0?e.d3ForceLayout.force(r):(e.d3ForceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var r=e.forceEngine!=="ngraph";return e.engineRunning&&i(),o(),s(),this;function i(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||r&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[r?"tick":"step"](),e.onEngineTick());var a=Nt(e.nodeThreeObjectExtend);e.graphData.nodes.forEach(function(h){var p=h.__threeObj;if(p){var g=r?h:e.layout.getNodePosition(h[e.nodeId]),y=a(h);(!e.nodePositionUpdate||!e.nodePositionUpdate(y?p.children[0]:p,{x:g.x,y:g.y,z:g.z},h)||y)&&(p.position.x=g.x,p.position.y=g.y||0,p.position.z=g.z||0)}});var l=Nt(e.linkWidth),c=Nt(e.linkCurvature),u=Nt(e.linkCurveRotation),d=Nt(e.linkThreeObjectExtend);e.graphData.links.forEach(function(h){var p=h.__lineObj;if(p){var g=r?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),y=g[r?"source":"from"],v=g[r?"target":"to"];if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){f(h);var m=d(h);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(m?p.children[1]:p,{start:{x:y.x,y:y.y,z:y.z},end:{x:v.x,y:v.y,z:v.z}},h)&&!m)){var x=30,b=h.__curve,S=p.children.length?p.children[0]:p;if(S.type==="Line"){if(b){var C=b.getPoints(x);S.geometry.getAttribute("position").array.length!==C.length*3&&S.geometry[FS]("position",new Ft.BufferAttribute(new Float32Array(C.length*3),3)),S.geometry.setFromPoints(C)}else{var w=S.geometry.getAttribute("position");(!w||!w.array||w.array.length!==6)&&S.geometry[FS]("position",w=new Ft.BufferAttribute(new Float32Array(2*3),3)),w.array[0]=y.x,w.array[1]=y.y||0,w.array[2]=y.z||0,w.array[3]=v.x,w.array[4]=v.y||0,w.array[5]=v.z||0,w.needsUpdate=!0}S.geometry.computeBoundingSphere()}else if(S.type==="Mesh")if(b){S.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(S.position.set(0,0,0),S.rotation.set(0,0,0),S.scale.set(1,1,1));var L=Math.ceil(l(h)*10)/10,A=L/2,I=new Ft.TubeGeometry(b,x,A,e.linkResolution,!1);S.geometry.dispose(),S.geometry=I}else{if(!S.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var E=Math.ceil(l(h)*10)/10,M=E/2,T=new Ft.CylinderGeometry(M,M,1,e.linkResolution,1,!1);T[Mv](new Ft.Matrix4().makeTranslation(0,1/2,0)),T[Mv](new Ft.Matrix4().makeRotationX(Math.PI/2)),S.geometry.dispose(),S.geometry=T}var R=new Ft.Vector3(y.x,y.y||0,y.z||0),P=new Ft.Vector3(v.x,v.y||0,v.z||0),D=R.distanceTo(P);S.position.x=R.x,S.position.y=R.y,S.position.z=R.z,S.scale.z=D,S.parent.localToWorld(P),S.lookAt(P)}}}}});function f(h){var p=r?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),g=p[r?"source":"from"],y=p[r?"target":"to"];if(!(!g||!y||!g.hasOwnProperty("x")||!y.hasOwnProperty("x"))){var v=c(h);if(!v)h.__curve=null;else{var m=new Ft.Vector3(g.x,g.y||0,g.z||0),x=new Ft.Vector3(y.x,y.y||0,y.z||0),b=m.distanceTo(x),S,w=u(h);if(b>0){var C=y.x-g.x,E=y.y-g.y||0,M=new Ft.Vector3().subVectors(x,m),T=M.clone().multiplyScalar(v).cross(C!==0||E!==0?new Ft.Vector3(0,0,1):new Ft.Vector3(0,1,0)).applyAxisAngle(M.normalize(),w).add(new Ft.Vector3().addVectors(m,x).divideScalar(2));S=new Ft.QuadraticBezierCurve3(m,T,x)}else{var R=v*70,P=-w,D=P+Math.PI/2;S=new Ft.CubicBezierCurve3(m,new Ft.Vector3(R*Math.cos(D),R*Math.sin(D),0).add(m),new Ft.Vector3(R*Math.cos(P),R*Math.sin(P),0).add(m),x)}h.__curve=S}}}}function o(){var a=Nt(e.linkDirectionalArrowRelPos),l=Nt(e.linkDirectionalArrowLength),c=Nt(e.nodeVal);e.graphData.links.forEach(function(u){var d=u.__arrowObj;if(d){var f=r?u:e.layout.getLinkPosition(e.layout.graph.getLink(u.source,u.target).id),h=f[r?"source":"from"],p=f[r?"target":"to"];if(!(!h||!p||!h.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var g=Math.cbrt(Math.max(0,c(h)||1))*e.nodeRelSize,y=Math.cbrt(Math.max(0,c(p)||1))*e.nodeRelSize,v=l(u),m=a(u),x=u.__curve?function(M){return u.__curve.getPoint(M)}:function(M){var T=function(P,D,L,A){return D[P]+(L[P]-D[P])*A||0};return{x:T("x",h,p,M),y:T("y",h,p,M),z:T("z",h,p,M)}},b=u.__curve?u.__curve.getLength():Math.sqrt(["x","y","z"].map(function(M){return Math.pow((p[M]||0)-(h[M]||0),2)}).reduce(function(M,T){return M+T},0)),S=g+v+(b-g-y-v)*m,w=x(S/b),C=x((S-v)/b);["x","y","z"].forEach(function(M){return d.position[M]=C[M]});var E=Zk(Ft.Vector3,ls(["x","y","z"].map(function(M){return w[M]})));d.parent.localToWorld(E),d.lookAt(E)}}})}function s(){var a=Nt(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(l){var c=l.__photonsObj&&l.__photonsObj.children,u=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!u||!u.length)&&(!c||!c.length))){var d=r?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),f=d[r?"source":"from"],h=d[r?"target":"to"];if(!(!f||!h||!f.hasOwnProperty("x")||!h.hasOwnProperty("x"))){var p=a(l),g=l.__curve?function(v){return l.__curve.getPoint(v)}:function(v){var m=function(b,S,w,C){return S[b]+(w[b]-S[b])*C||0};return{x:m("x",f,h,v),y:m("y",f,h,v),z:m("z",f,h,v)}},y=[].concat(ls(c||[]),ls(u||[]));y.forEach(function(v,m){var x=v.parent.__linkThreeObjType==="singleHopPhotons";if(v.hasOwnProperty("__progressRatio")||(v.__progressRatio=x?0:m/c.length),v.__progressRatio+=p,v.__progressRatio>=1)if(!x)v.__progressRatio=v.__progressRatio%1;else{v.parent.remove(v),KC(v);return}var b=v.__progressRatio,S=g(b);["x","y","z"].forEach(function(w){return v.position[w]=S[w]})})}}})}},emitParticle:function(e,r){if(r&&e.graphData.links.includes(r)){if(!r.__singleHopPhotonsObj){var i=new Ft.Group;i.__linkThreeObjType="singleHopPhotons",r.__singleHopPhotonsObj=i,e.graphScene.add(i)}var o=Nt(e.linkDirectionalParticleWidth),s=Math.ceil(o(r)*10)/10/2,a=e.linkDirectionalParticleResolution,l=new Ft.SphereGeometry(s,a,a),c=Nt(e.linkColor),u=Nt(e.linkDirectionalParticleColor),d=u(r)||c(r)||"#f0f0f0",f=new Ft.Color(Lh(d)),h=e.linkOpacity*3,p=new Ft.MeshLambertMaterial({color:f,transparent:!0,opacity:h});r.__singleHopPhotonsObj.add(new Ft.Mesh(l,p))}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var i=function o(s){var a=[];if(s.geometry){s.geometry.computeBoundingBox();var l=new Ft.Box3;l.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),a.push(l)}return a.concat.apply(a,ls((s.children||[]).filter(function(c){return!c.hasOwnProperty("__graphObjType")||c.__graphObjType==="node"&&r(c.__data)}).map(o)))}(e.graphScene);return i.length?Object.assign.apply(Object,ls(["x","y","z"].map(function(o){return JM({},o,[AC(i,function(s){return s.min[o]}),RC(i,function(s){return s.max[o]})])}))):null}},stateInit:function(){return{d3ForceLayout:Nz().force("link",Az()).force("charge",Pz()).force("center",Sz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.graphScene=e},update:function(e,r){var i=function(j){return j.some(function(X){return r.hasOwnProperty(X)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&i(["nodeAutoColorBy","graphData","nodeColor"])&&SI(e.graphData.nodes,Nt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&i(["linkAutoColorBy","graphData","linkColor"])&&SI(e.graphData.links,Nt(e.linkAutoColorBy),e.linkColor),e._flushObjects||i(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var o=Nt(e.nodeThreeObject),s=Nt(e.nodeThreeObjectExtend),a=Nt(e.nodeVal),l=Nt(e.nodeColor),c=Nt(e.nodeVisibility),u={},d={};Dh(e.graphData.nodes.filter(c),e.graphScene,{purge:e._flushObjects||i(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(j){return j.__graphObjType==="node"},createObj:function(j){var X=o(j),Q=s(j);X&&e.nodeThreeObject===X&&(X=X.clone());var ne;return X&&!Q?ne=X:(ne=new Ft.Mesh,ne.__graphDefaultObj=!0,X&&Q&&ne.add(X)),ne.__graphObjType="node",ne},updateObj:function(j,X){if(j.__graphDefaultObj){var Q=a(X)||1,ne=Math.cbrt(Q)*e.nodeRelSize,ye=e.nodeResolution;(!j.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||j.geometry.parameters.radius!==ne||j.geometry.parameters.widthSegments!==ye)&&(u.hasOwnProperty(Q)||(u[Q]=new Ft.SphereGeometry(ne,ye,ye)),j.geometry.dispose(),j.geometry=u[Q]);var me=l(X),fe=new Ft.Color(Lh(me||"#ffffaa")),le=e.nodeOpacity*LS(me);(j.material.type!=="MeshLambertMaterial"||!j.material.color.equals(fe)||j.material.opacity!==le)&&(d.hasOwnProperty(me)||(d[me]=new Ft.MeshLambertMaterial({color:fe,transparent:!0,opacity:le})),j.material.dispose(),j.material=d[me])}}})}if(e._flushObjects||i(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var f=Nt(e.linkThreeObject),h=Nt(e.linkThreeObjectExtend),p=Nt(e.linkMaterial),g=Nt(e.linkVisibility),y=Nt(e.linkColor),v=Nt(e.linkWidth),m={},x={},b={},S=e.graphData.links.filter(g);if(Dh(S,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||i(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(j){return j.__graphObjType==="link"},exitObj:function(j){var X=j.__data&&j.__data.__singleHopPhotonsObj;X&&(X.parent.remove(X),KC(X),delete j.__data.__singleHopPhotonsObj)},createObj:function(j){var X=f(j),Q=h(j);X&&e.linkThreeObject===X&&(X=X.clone());var ne;if(!X||Q){var ye=!!v(j);if(ye)ne=new Ft.Mesh;else{var me=new Ft.BufferGeometry;me[FS]("position",new Ft.BufferAttribute(new Float32Array(2*3),3)),ne=new Ft.Line(me)}}var fe;return X?Q?(fe=new Ft.Group,fe.__graphDefaultObj=!0,fe.add(ne),fe.add(X)):fe=X:(fe=ne,fe.__graphDefaultObj=!0),fe.renderOrder=10,fe.__graphObjType="link",fe},updateObj:function(j,X){if(j.__graphDefaultObj){var Q=j.children.length?j.children[0]:j,ne=Math.ceil(v(X)*10)/10,ye=!!ne;if(ye){var me=ne/2,fe=e.linkResolution;if(!Q.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||Q.geometry.parameters.radiusTop!==me||Q.geometry.parameters.radialSegments!==fe){if(!m.hasOwnProperty(ne)){var le=new Ft.CylinderGeometry(me,me,1,fe,1,!1);le[Mv](new Ft.Matrix4().makeTranslation(0,1/2,0)),le[Mv](new Ft.Matrix4().makeRotationX(Math.PI/2)),m[ne]=le}Q.geometry.dispose(),Q.geometry=m[ne]}}var ge=p(X);if(ge)Q.material=ge;else{var q=y(X),ve=new Ft.Color(Lh(q||"#f0f0f0")),be=e.linkOpacity*LS(q),xe=ye?"MeshLambertMaterial":"LineBasicMaterial";if(Q.material.type!==xe||!Q.material.color.equals(ve)||Q.material.opacity!==be){var we=ye?x:b;we.hasOwnProperty(q)||(we[q]=new Ft[xe]({color:ve,transparent:be<1,opacity:be,depthWrite:be>=1})),Q.material.dispose(),Q.material=we[q]}}}}}),e.linkDirectionalArrowLength||r.hasOwnProperty("linkDirectionalArrowLength")){var w=Nt(e.linkDirectionalArrowLength),C=Nt(e.linkDirectionalArrowColor);Dh(S.filter(w),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(j){return j.__linkThreeObjType==="arrow"},createObj:function(){var j=new Ft.Mesh(void 0,new Ft.MeshLambertMaterial({transparent:!0}));return j.__linkThreeObjType="arrow",j},updateObj:function(j,X){var Q=w(X),ne=e.linkDirectionalArrowResolution;if(!j.geometry.type.match(/^Cone(Buffer)?Geometry$/)||j.geometry.parameters.height!==Q||j.geometry.parameters.radialSegments!==ne){var ye=new Ft.ConeGeometry(Q*.25,Q,ne);ye.translate(0,Q/2,0),ye.rotateX(Math.PI/2),j.geometry.dispose(),j.geometry=ye}var me=C(X)||y(X)||"#f0f0f0";j.material.color=new Ft.Color(Lh(me)),j.material.opacity=e.linkOpacity*3*LS(me)}})}if(e.linkDirectionalParticles||r.hasOwnProperty("linkDirectionalParticles")){var E=Nt(e.linkDirectionalParticles),M=Nt(e.linkDirectionalParticleWidth),T=Nt(e.linkDirectionalParticleColor),R={},P={};Dh(S.filter(E),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(j){return j.__linkThreeObjType==="photons"},createObj:function(){var j=new Ft.Group;return j.__linkThreeObjType="photons",j},updateObj:function(j,X){var Q=Math.round(Math.abs(E(X))),ne=!!j.children.length&&j.children[0],ye=Math.ceil(M(X)*10)/10/2,me=e.linkDirectionalParticleResolution,fe;ne&&ne.geometry.parameters.radius===ye&&ne.geometry.parameters.widthSegments===me?fe=ne.geometry:(P.hasOwnProperty(ye)||(P[ye]=new Ft.SphereGeometry(ye,me,me)),fe=P[ye],ne&&ne.geometry.dispose());var le=T(X)||y(X)||"#f0f0f0",ge=new Ft.Color(Lh(le)),q=e.linkOpacity*3,ve;ne&&ne.material.color.equals(ge)&&ne.material.opacity===q?ve=ne.material:(R.hasOwnProperty(le)||(R[le]=new Ft.MeshLambertMaterial({color:ge,transparent:!0,opacity:q})),ve=R[le],ne&&ne.material.dispose()),Dh(ls(new Array(Q)).map(function(be,xe){return{idx:xe}}),j,{idAccessor:function(xe){return xe.idx},createObj:function(){return new Ft.Mesh(fe,ve)},updateObj:function(xe){xe.geometry=fe,xe.material=ve}})}})}}if(e._flushObjects=!1,i(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(z){z.source=z[e.linkSource],z.target=z[e.linkTarget]});var D=e.forceEngine!=="ngraph",L;if(D){(L=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var A=e.d3ForceLayout.force("link");A&&A.id(function(z){return z[e.nodeId]}).links(e.graphData.links);var I=e.dagMode&&xge(e.graphData,function(z){return z[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),N=Math.max.apply(Math,ls(Object.values(I||[]))),F=e.dagLevelDistance||e.graphData.nodes.length/(N||1)*_ge*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(r.dagMode)){var O=["lr","rl"].includes(r.dagMode)?"fx":["td","bu"].includes(r.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(z){return delete z[O]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var V=["rl","td","zout"].includes(e.dagMode),U=function(j){return(I[j[e.nodeId]]-N/2)*F*(V?-1:1)},k=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(z){return z[k]=U(z)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?Oz(function(z){var j=I[z[e.nodeId]]||-1;return(e.dagMode==="radialin"?N-j:j)*F}).strength(function(z){return e.dagNodeFilter(z)?1:0}):null)}else{var W=wI.graph();e.graphData.nodes.forEach(function(z){W.addNode(z[e.nodeId])}),e.graphData.links.forEach(function(z){W.addLink(z.source,z.target)}),L=wI.forcelayout(W,Jk({dimensions:e.numDimensions},e.ngraphPhysics)),L.graph=W}for(var J=0;J<e.warmupTicks&&!(D&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);J++)L[D?"tick":"step"]();e.layout=L,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function Sge(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=function(o){function s(){var a;oge(this,s);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=ige(this,s,[].concat(c)),a.__kapsuleInstance=Zk(n,[].concat(ls(r?[a]:[]),c)),a}return age(s,o),sge(s)}(e);return Object.keys(n()).forEach(function(o){return i.prototype[o]=function(){var s,a=(s=this.__kapsuleInstance)[o].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),i}var wge=window.THREE?window.THREE:{Group:Ed},r4=Sge(bge,wge.Group,!0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Cge=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class Ege{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=Cge,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let r=this.renderObjects.get(e);if(r===void 0){const{geometry:i,material:o,object:s}=e;if(r={material:this.getMaterialData(o),geometry:{attributes:this.getAttributesData(i.attributes),indexVersion:i.index?i.index.version:null,drawRange:{start:i.drawRange.start,count:i.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(r.center=s.center.clone()),s.morphTargetInfluences&&(r.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(r.version=e.bundle.version),r.material.transmission>0){const{width:a,height:l}=e.context;r.bufferWidth=a,r.bufferHeight=l}this.renderObjects.set(e,r)}return r}getAttributesData(e){const r={};for(const i in e){const o=e[i];r[i]={version:o.version}}return r}containsNode(e){const r=e.material;for(const i in r)if(r[i]&&r[i].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const r={};for(const i of this.refreshUniforms){const o=e[i];o!=null&&(typeof o=="object"&&o.clone!==void 0?o.isTexture===!0?r[i]={id:o.id,version:o.version}:r[i]=o.clone():r[i]=o)}return r}equals(e){const{object:r,material:i,geometry:o}=e,s=this.getRenderObjectData(e);if(s.worldMatrix.equals(r.matrixWorld)!==!0)return s.worldMatrix.copy(r.matrixWorld),!1;const a=s.material;for(const y in a){const v=a[y],m=i[y];if(v.equals!==void 0){if(v.equals(m)===!1)return v.copy(m),!1}else if(m.isTexture===!0){if(v.id!==m.id||v.version!==m.version)return v.id=m.id,v.version=m.version,!1}else if(v!==m)return a[y]=m,!1}if(a.transmission>0){const{width:y,height:v}=e.context;if(s.bufferWidth!==y||s.bufferHeight!==v)return s.bufferWidth=y,s.bufferHeight=v,!1}const l=s.geometry,c=o.attributes,u=l.attributes,d=Object.keys(u),f=Object.keys(c);if(d.length!==f.length)return s.geometry.attributes=this.getAttributesData(c),!1;for(const y of d){const v=u[y],m=c[y];if(m===void 0)return delete u[y],!1;if(v.version!==m.version)return v.version=m.version,!1}const h=o.index,p=l.indexVersion,g=h?h.version:null;if(p!==g)return l.indexVersion=g,!1;if(l.drawRange.start!==o.drawRange.start||l.drawRange.count!==o.drawRange.count)return l.drawRange.start=o.drawRange.start,l.drawRange.count=o.drawRange.count,!1;if(s.morphTargetInfluences){let y=!1;for(let v=0;v<s.morphTargetInfluences.length;v++)s.morphTargetInfluences[v]!==r.morphTargetInfluences[v]&&(y=!0);if(y)return!0}return s.center&&s.center.equals(r.center)===!1?(s.center.copy(r.center),!0):(e.bundle!==null&&(s.version=e.bundle.version),!0)}needsRefresh(e,r){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:i}=r;if(this.renderId!==i)return this.renderId=i,!0;const o=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return o||s?!1:this.equals(e)!==!0}}function Mm(n,e=0){let r=3735928559^e,i=1103547991^e;if(n instanceof Array)for(let o=0,s;o<n.length;o++)s=n[o],r=Math.imul(r^s,2654435761),i=Math.imul(i^s,1597334677);else for(let o=0,s;o<n.length;o++)s=n.charCodeAt(o),r=Math.imul(r^s,2654435761),i=Math.imul(i^s,1597334677);return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&i)+(r>>>0)}const Tge=n=>Mm(n),i4=n=>Mm(n),o4=(...n)=>Mm(n);function s4(n,e=!1){const r=[];n.isNode===!0&&(r.push(n.id),n=n.getSelf());for(const{property:i,childNode:o}of Ly(n))r.push(r,Mm(i.slice(0,-4)),o.getCacheKey(e));return Mm(r)}function*Ly(n,e=!1){for(const r in n){if(r.startsWith("_")===!0)continue;const i=n[r];if(Array.isArray(i)===!0)for(let o=0;o<i.length;o++){const s=i[o];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:r,index:o,childNode:s})}else if(i&&i.isNode===!0)yield{property:r,childNode:i};else if(typeof i=="object")for(const o in i){const s=i[o];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:r,index:o,childNode:s})}}}const Mge=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]);function Rge(n){return Mge.get(n)}function Fy(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function a4(n,...e){const r=n?n.slice(-4):void 0;return e.length===1&&(r==="vec2"?e=[e[0],e[0]]:r==="vec3"?e=[e[0],e[0],e[0]]:r==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new Tt(...e):r==="vec2"?new je(...e):r==="vec3"?new Y(...e):r==="vec4"?new qt(...e):r==="mat3"?new Vt(...e):r==="mat4"?new fn(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?Nge(e[0]):null}function Age(n){let e="";const r=new Uint8Array(n);for(let i=0;i<r.length;i++)e+=String.fromCharCode(r[i]);return btoa(e)}function Nge(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const CI={VERTEX:"vertex"},on={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},Pa={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},Pge=["fragment","vertex"],EI=["setup","analyze","generate"],TI=[...Pge,"compute"],nh=["x","y","z","w"];let Oge=0;class Qt extends uc{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=on.NONE,this.updateBeforeType=on.NONE,this.updateAfterType=on.NONE,this.uuid=Ry.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:Oge++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,r){return this.updateType=r,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,on.FRAME)}onRenderUpdate(e){return this.onUpdate(e,on.RENDER)}onObjectUpdate(e){return this.onUpdate(e,on.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of Ly(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const r of this.getChildren())r.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=s4(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const r=this.getNodeType(e);return e.getElementType(r)}getNodeType(e){const r=e.getNodeProperties(this);return r.outputNode?r.outputNode.getNodeType(e):this.nodeType}getShared(e){const r=this.getHash(e);return e.getNodeFromHash(r)||this}setup(e){const r=e.getNodeProperties(this);let i=0;for(const o of this.getChildren())r["node"+i++]=o;return null}analyze(e){if(e.increaseUsage(this)===1){const i=e.getNodeProperties(this);for(const o of Object.values(i))o&&o.isNode===!0&&o.build(e)}}generate(e,r){const{outputNode:i}=e.getNodeProperties(this);if(i&&i.isNode===!0)return i.build(e,r)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,r=null){const i=this.getShared(e);if(this!==i)return i.build(e,r);e.addNode(this),e.addChain(this);let o=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const a=e.getNodeProperties(this);if(a.initialized!==!0){const l=e.stack.nodes.length;a.initialized=!0,a.outputNode=this.setup(e),a.outputNode!==null&&e.stack.nodes.length;for(const c of Object.values(a))c&&c.isNode===!0&&c.build(e)}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const l=this.getNodeType(e),c=e.getDataFromNode(this);o=c.snippet,o===void 0?(o=this.generate(e)||"",c.snippet=o):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),o=e.format(o,l,r)}else o=this.generate(e,r)||"";return e.removeChain(this),e.addSequentialNode(this),o}getSerializeChildren(){return Ly(this)}serialize(e){const r=this.getSerializeChildren(),i={};for(const{property:o,index:s,childNode:a}of r)s!==void 0?(i[o]===void 0&&(i[o]=Number.isInteger(s)?[]:{}),i[o][s]=a.toJSON(e.meta).uuid):i[o]=a.toJSON(e.meta).uuid;Object.keys(i).length>0&&(e.inputNodes=i)}deserialize(e){if(e.inputNodes!==void 0){const r=e.meta.nodes;for(const i in e.inputNodes)if(Array.isArray(e.inputNodes[i])){const o=[];for(const s of e.inputNodes[i])o.push(r[s]);this[i]=o}else if(typeof e.inputNodes[i]=="object"){const o={};for(const s in e.inputNodes[i]){const a=e.inputNodes[i][s];o[s]=r[a]}this[i]=o}else{const o=e.inputNodes[i];this[i]=r[o]}}}toJSON(e){const{uuid:r,type:i}=this,o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[r];s===void 0&&(s={uuid:r,type:i,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},o!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}if(o){const l=a(e.textures),c=a(e.images),u=a(e.nodes);l.length>0&&(s.textures=l),c.length>0&&(s.images=c),u.length>0&&(s.nodes=u)}return s}}class ug extends Qt{static get type(){return"ArrayElementNode"}constructor(e,r){super(),this.node=e,this.indexNode=r,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const r=this.node.build(e),i=this.indexNode.build(e,"uint");return`${r}[ ${i} ]`}}class l4 extends Qt{static get type(){return"ConvertNode"}constructor(e,r){super(),this.node=e,this.convertTo=r}getNodeType(e){const r=this.node.getNodeType(e);let i=null;for(const o of this.convertTo.split("|"))(i===null||e.getTypeLength(r)===e.getTypeLength(o))&&(i=o);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,r){const i=this.node,o=this.getNodeType(e),s=i.build(e,o);return e.format(s,o,r)}}class Mr extends Qt{static get type(){return"TempNode"}constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,r){if(e.getBuildStage()==="generate"){const o=e.getVectorType(this.getNodeType(e,r)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,o,r);if(o!=="void"&&r!=="void"&&this.hasDependencies(e)){const a=super.build(e,o),l=e.getVarFromNode(this,null,o),c=e.getPropertyName(l);return e.addLineFlowCode(`${c} = ${a}`,this),s.snippet=a,s.propertyName=c,e.format(s.propertyName,o,r)}}return super.build(e,r)}}class Ige extends Mr{static get type(){return"JoinNode"}constructor(e=[],r=null){super(r),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((r,i)=>r+e.getTypeLength(i.getNodeType(e)),0))}generate(e,r){const i=this.getNodeType(e),o=this.nodes,s=e.getComponentType(i),a=[];for(const c of o){let u=c.build(e);const d=e.getComponentType(c.getNodeType(e));d!==s&&(u=e.format(u,d,s)),a.push(u)}const l=`${e.getType(i)}( ${a.join(", ")} )`;return e.format(l,i,r)}}const Dge=nh.join("");class MI extends Qt{static get type(){return"SplitNode"}constructor(e,r="x"){super(),this.node=e,this.components=r,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const r of this.components)e=Math.max(nh.indexOf(r)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,r){const i=this.node,o=e.getTypeLength(i.getNodeType(e));let s=null;if(o>1){let a=null;this.getVectorLength()>=o&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const c=i.build(e,a);this.components.length===o&&this.components===Dge.slice(0,this.components.length)?s=e.format(c,a,r):s=e.format(`${c}.${this.components}`,this.getNodeType(e),r)}else s=i.build(e,r);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class Lge extends Mr{static get type(){return"SetNode"}constructor(e,r,i){super(),this.sourceNode=e,this.components=r,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:r,components:i,targetNode:o}=this,s=this.getNodeType(e),a=e.getTypeFromLength(i.length,o.getNodeType(e)),l=o.build(e,a),c=r.build(e,s),u=e.getTypeLength(s),d=[];for(let f=0;f<u;f++){const h=nh[f];h===i[0]?(d.push(l),f+=i.length-1):d.push(c+"."+h)}return`${e.getType(s)}( ${d.join(", ")} )`}}class Fge extends Mr{static get type(){return"FlipNode"}constructor(e,r){super(),this.sourceNode=e,this.components=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:r,sourceNode:i}=this,o=this.getNodeType(e),s=i.build(e),a=e.getVarFromNode(this),l=e.getPropertyName(a);e.addLineFlowCode(l+" = "+s,this);const c=e.getTypeLength(o),u=[];let d=0;for(let f=0;f<c;f++){const h=nh[f];h===r[d]?(u.push("1.0 - "+(l+"."+h)),d++):u.push(l+"."+h)}return`${e.getType(o)}( ${u.join(", ")} )`}}class tR extends Qt{static get type(){return"InputNode"}constructor(e,r=null){super(r),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Fy(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Fy(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=Age(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?a4(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}class tl extends tR{static get type(){return"ConstNode"}constructor(e,r=null){super(e,r),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,r){const i=this.getNodeType(e);return e.format(this.generateConst(e),i,r)}}let If=null;const Md=new Map;function Ne(n,e){if(Md.has(n)){console.warn(`Redefinition of method chaining ${n}`);return}if(typeof e!="function")throw new Error(`Node element ${n} is not a function`);Md.set(n,e)}const c4=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),RI=n=>c4(n).split("").sort().join(""),u4={setup(n,e){const r=e.shift();return n(p_(r),...e)},get(n,e,r){if(typeof e=="string"&&n[e]===void 0){if(n.isStackNode!==!0&&e==="assign")return(...i)=>(If.assign(r,...i),r);if(Md.has(e)){const i=Md.get(e);return n.isStackNode?(...o)=>r.add(i(...o)):(...o)=>i(r,...o)}else{if(e==="self")return n;if(e.endsWith("Assign")&&Md.has(e.slice(0,e.length-6))){const i=Md.get(e.slice(0,e.length-6));return n.isStackNode?(...o)=>r.assign(o[0],i(...o)):(...o)=>r.assign(i(r,...o))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=c4(e),nt(new MI(r,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=RI(e.slice(3).toLowerCase()),i=>nt(new Lge(n,e,i));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=RI(e.slice(4).toLowerCase()),()=>nt(new Fge(nt(n),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),nt(new MI(n,e));if(/^\d+$/.test(e)===!0)return nt(new ug(r,new tl(Number(e),"uint")))}}}return Reflect.get(n,e,r)},set(n,e,r,i){return typeof e=="string"&&n[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(i[e].assign(r),!0):Reflect.set(n,e,r,i)}},US=new WeakMap,AI=new WeakMap,Uge=function(n,e=null){const r=Fy(n);if(r==="node"){let i=US.get(n);return i===void 0&&(i=new Proxy(n,u4),US.set(n,i),US.set(i,i)),i}else{if(e===null&&(r==="float"||r==="boolean")||r&&r!=="shader"&&r!=="string")return nt(YC(n,e));if(r==="shader")return lt(n)}return n},Bge=function(n,e=null){for(const r in n)n[r]=nt(n[r],e);return n},$ge=function(n,e=null){const r=n.length;for(let i=0;i<r;i++)n[i]=nt(n[i],e);return n},zge=function(n,e=null,r=null,i=null){const o=s=>nt(i!==null?Object.assign(s,i):s);return e===null?(...s)=>o(new n(...Hd(s))):r!==null?(r=nt(r),(...s)=>o(new n(e,...Hd(s),r))):(...s)=>o(new n(e,...Hd(s)))},kge=function(n,...e){return nt(new n(...Hd(e)))};class Vge extends Qt{constructor(e,r){super(),this.shaderNode=e,this.inputNodes=r}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}call(e){const{shaderNode:r,inputNodes:i}=this,o=e.getNodeProperties(r);if(o.onceOutput)return o.onceOutput;let s=null;if(r.layout){let a=AI.get(e.constructor);a===void 0&&(a=new WeakMap,AI.set(e.constructor,a));let l=a.get(r);l===void 0&&(l=nt(e.buildFunctionNode(r)),a.set(r,l)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(l),s=nt(l.call(i))}else{const a=r.jsFunc,l=i!==null?a(i,e):a(e);s=nt(l)}return r.once&&(o.onceOutput=s),s}getOutputNode(e){const r=e.getNodeProperties(this);return r.outputNode===null&&(r.outputNode=this.setupOutput(e)),r.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,r){return this.getOutputNode(e).build(e,r)}}class Gge extends Qt{constructor(e,r){super(r),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return p_(e),nt(new Vge(this,e))}setup(){return this.call()}}const Hge=[!1,!0],jge=[0,1,2,3],Wge=[-1,-2],d4=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],nR=new Map;for(const n of Hge)nR.set(n,new tl(n));const rR=new Map;for(const n of jge)rR.set(n,new tl(n,"uint"));const iR=new Map([...rR].map(n=>new tl(n.value,"int")));for(const n of Wge)iR.set(n,new tl(n,"int"));const f_=new Map([...iR].map(n=>new tl(n.value)));for(const n of d4)f_.set(n,new tl(n));for(const n of d4)f_.set(-n,new tl(-n));const h_={bool:nR,uint:rR,ints:iR,float:f_},NI=new Map([...nR,...f_]),YC=(n,e)=>NI.has(n)?NI.get(n):n.isNode===!0?n:new tl(n,e),qge=n=>{try{return n.getNodeType()}catch{return}},Rr=function(n,e=null){return(...r)=>{if((r.length===0||!["bool","float","int","uint"].includes(n)&&r.every(o=>typeof o!="object"))&&(r=[a4(n,...r)]),r.length===1&&e!==null&&e.has(r[0]))return nt(e.get(r[0]));if(r.length===1){const o=YC(r[0],n);return qge(o)===n?nt(o):nt(new l4(o,n))}const i=r.map(o=>YC(o));return nt(new Ige(i,n))}},PI=n=>typeof n=="object"&&n!==null?n.value:n,Xge=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function S0(n,e){return new Proxy(new Gge(n,e),u4)}const nt=(n,e=null)=>Uge(n,e),p_=(n,e=null)=>new Bge(n,e),Hd=(n,e=null)=>new $ge(n,e),Be=(...n)=>new zge(...n),ct=(...n)=>new kge(...n),lt=(n,e)=>{const r=new S0(n,e),i=(...o)=>{let s;return p_(o),o[0]&&o[0].isNode?s=[...o]:s=o[0],r.call(s)};return i.shaderNode=r,i.setLayout=o=>(r.setLayout(o),i),i.once=()=>(r.once=!0,i),i};Ne("toGlobal",n=>(n.global=!0,n));const Uy=n=>{If=n},f4=()=>If,Er=(...n)=>If.If(...n);function Kge(n){return If&&If.add(n),n}Ne("append",Kge);const Yge=new Rr("color"),Ae=new Rr("float",h_.float),cr=new Rr("int",h_.ints),Qge=new Rr("uint",h_.uint),h4=new Rr("bool",h_.bool),pt=new Rr("vec2"),ba=new Rr("ivec2"),Zge=new Rr("uvec2"),Jge=new Rr("bvec2"),Ie=new Rr("vec3"),eve=new Rr("ivec3"),tve=new Rr("uvec3"),nve=new Rr("bvec3"),Yt=new Rr("vec4"),rve=new Rr("ivec4"),ive=new Rr("uvec4"),ove=new Rr("bvec4"),oR=new Rr("mat2"),Ni=new Rr("mat3"),jd=new Rr("mat4");Ne("toColor",Yge);Ne("toFloat",Ae);Ne("toInt",cr);Ne("toUint",Qge);Ne("toBool",h4);Ne("toVec2",pt);Ne("toIVec2",ba);Ne("toUVec2",Zge);Ne("toBVec2",Jge);Ne("toVec3",Ie);Ne("toIVec3",eve);Ne("toUVec3",tve);Ne("toBVec3",nve);Ne("toVec4",Yt);Ne("toIVec4",rve);Ne("toUVec4",ive);Ne("toBVec4",ove);Ne("toMat2",oR);Ne("toMat3",Ni);Ne("toMat4",jd);const sve=Be(ug),ave=(n,e)=>nt(new l4(nt(n),e));Ne("element",sve);Ne("convert",ave);class p4 extends Qt{static get type(){return"UniformGroupNode"}constructor(e,r=!1,i=1){super("string"),this.name=e,this.version=0,this.shared=r,this.order=i,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const lve=n=>new p4(n),m4=(n,e=0)=>new p4(n,!0,e),cve=m4("frame"),jt=m4("render"),g4=lve("object");class dg extends tR{static get type(){return"UniformNode"}constructor(e,r=null){super(e,r),this.isUniformNode=!0,this.name="",this.groupNode=g4}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,r){const i=this.getSelf();return e=e.bind(i),super.onUpdate(o=>{const s=e(o,i);s!==void 0&&(this.value=s)},r)}generate(e,r){const i=this.getNodeType(e),o=this.getUniformHash(e);let s=e.getNodeFromHash(o);s===void 0&&(e.setHashNode(this,o),s=this);const a=s.getInputType(e),l=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.label),c=e.getPropertyName(l);return e.context.label!==void 0&&delete e.context.label,e.format(c,i,r)}}const Xt=(n,e)=>{const r=Xge(e||n),i=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return nt(new dg(i,r))};class Rn extends Qt{static get type(){return"PropertyNode"}constructor(e,r=null,i=!1){super(e),this.name=r,this.varying=i,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let r;return this.varying===!0?(r=e.getVaryingFromNode(this,this.name),r.needsInterpolation=!0):r=e.getVarFromNode(this,this.name),e.getPropertyName(r)}}const uve=(n,e)=>nt(new Rn(n,e)),By=(n,e)=>nt(new Rn(n,e,!0)),Sn=ct(Rn,"vec4","DiffuseColor"),OI=ct(Rn,"vec3","EmissiveColor"),Ea=ct(Rn,"float","Roughness"),$y=ct(Rn,"float","Metalness"),QC=ct(Rn,"float","Clearcoat"),zy=ct(Rn,"float","ClearcoatRoughness"),Rd=ct(Rn,"vec3","Sheen"),sR=ct(Rn,"float","SheenRoughness"),aR=ct(Rn,"float","Iridescence"),v4=ct(Rn,"float","IridescenceIOR"),y4=ct(Rn,"float","IridescenceThickness"),ZC=ct(Rn,"float","AlphaT"),Nc=ct(Rn,"float","Anisotropy"),w0=ct(Rn,"vec3","AnisotropyT"),Wd=ct(Rn,"vec3","AnisotropyB"),uo=ct(Rn,"color","SpecularColor"),ky=ct(Rn,"float","SpecularF90"),JC=ct(Rn,"float","Shininess"),dve=ct(Rn,"vec4","Output"),BS=ct(Rn,"float","dashSize"),II=ct(Rn,"float","gapSize"),C0=ct(Rn,"float","IOR"),eE=ct(Rn,"float","Transmission"),x4=ct(Rn,"float","Thickness"),_4=ct(Rn,"float","AttenuationDistance"),b4=ct(Rn,"color","AttenuationColor"),S4=ct(Rn,"float","Dispersion");class fve extends Mr{static get type(){return"AssignNode"}constructor(e,r){super(),this.targetNode=e,this.sourceNode=r}hasDependencies(){return!1}getNodeType(e,r){return r!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:r}=this;if(e.isAvailable("swizzleAssign")===!1&&r.isSplitNode&&r.components.length>1){const i=e.getTypeLength(r.node.getNodeType(e));return nh.join("").slice(0,i)!==r.components}return!1}generate(e,r){const{targetNode:i,sourceNode:o}=this,s=this.needsSplitAssign(e),a=i.getNodeType(e),l=i.context({assign:!0}).build(e),c=o.build(e,a),u=o.getNodeType(e),d=e.getDataFromNode(this);let f;if(d.initialized===!0)r!=="void"&&(f=l);else if(s){const h=e.getVarFromNode(this,null,a),p=e.getPropertyName(h);e.addLineFlowCode(`${p} = ${c}`,this);const g=i.node.context({assign:!0}).build(e);for(let y=0;y<i.components.length;y++){const v=i.components[y];e.addLineFlowCode(`${g}.${v} = ${p}[ ${y} ]`,this)}r!=="void"&&(f=l)}else f=`${l} = ${c}`,(r==="void"||u==="void")&&(e.addLineFlowCode(f,this),r!=="void"&&(f=l));return d.initialized=!0,e.format(f,a,r)}}const hve=Be(fve);Ne("assign",hve);class pve extends Mr{static get type(){return"FunctionCallNode"}constructor(e=null,r={}){super(),this.functionNode=e,this.parameters=r}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const r=[],i=this.functionNode,o=i.getInputs(e),s=this.parameters,a=(c,u)=>{const d=u.type,f=d==="pointer";let h;return f?h="&"+c.build(e):h=c.build(e,d),h};if(Array.isArray(s))for(let c=0;c<s.length;c++)r.push(a(s[c],o[c]));else for(const c of o){const u=s[c.name];if(u!==void 0)r.push(a(u,c));else throw new Error(`FunctionCallNode: Input '${c.name}' not found in FunctionNode.`)}return`${i.build(e,"property")}( ${r.join(", ")} )`}}const mve=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Hd(e):p_(e[0]),nt(new pve(nt(n),e)));Ne("call",mve);class tr extends Mr{static get type(){return"OperatorNode"}constructor(e,r,i,...o){if(super(),o.length>0){let s=new tr(e,r,i);for(let a=0;a<o.length-1;a++)s=new tr(e,s,o[a]);r=s,i=o[o.length-1]}this.op=e,this.aNode=r,this.bNode=i}getNodeType(e,r){const i=this.op,o=this.aNode,s=this.bNode,a=o.getNodeType(e),l=typeof s<"u"?s.getNodeType(e):null;if(a==="void"||l==="void")return"void";if(i==="%")return a;if(i==="~"||i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(a);if(i==="!"||i==="=="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const c=r?e.getTypeLength(r):Math.max(e.getTypeLength(a),e.getTypeLength(l));return c>1?`bvec${c}`:"bool"}else return a==="float"&&e.isMatrix(l)?l:e.isMatrix(a)&&e.isVector(l)?e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?e.getVectorFromMatrix(l):e.getTypeLength(l)>e.getTypeLength(a)?l:a}generate(e,r){const i=this.op,o=this.aNode,s=this.bNode,a=this.getNodeType(e,r);let l=null,c=null;a!=="void"?(l=o.getNodeType(e),c=typeof s<"u"?s.getNodeType(e):null,i==="<"||i===">"||i==="<="||i===">="||i==="=="?e.isVector(l)?c=l:l!==c&&(l=c="float"):i===">>"||i==="<<"?(l=a,c=e.changeComponentType(c,"uint")):e.isMatrix(l)&&e.isVector(c)?c=e.getVectorFromMatrix(l):e.isVector(l)&&e.isMatrix(c)?l=e.getVectorFromMatrix(c):l=c=a):l=c=a;const u=o.build(e,l),d=typeof s<"u"?s.build(e,c):null,f=e.getTypeLength(r),h=e.getFunctionOperator(i);if(r!=="void")return i==="<"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} < ${d} )`,a,r):i==="<="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} <= ${d} )`,a,r):i===">"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} > ${d} )`,a,r):i===">="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} >= ${d} )`,a,r):i==="!"||i==="~"?e.format(`(${i}${u})`,l,r):h?e.format(`${h}( ${u}, ${d} )`,a,r):e.format(`( ${u} ${i} ${d} )`,a,r);if(l!=="void")return h?e.format(`${h}( ${u}, ${d} )`,a,r):e.format(`${u} ${i} ${d}`,a,r)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Pi=Be(tr,"+"),$i=Be(tr,"-"),sn=Be(tr,"*"),Xa=Be(tr,"/"),w4=Be(tr,"%"),gve=Be(tr,"=="),vve=Be(tr,"!="),yve=Be(tr,"<"),xve=Be(tr,">"),_ve=Be(tr,"<="),bve=Be(tr,">="),Sve=Be(tr,"&&"),wve=Be(tr,"||"),Cve=Be(tr,"!"),Eve=Be(tr,"^^"),Tve=Be(tr,"&"),Mve=Be(tr,"~"),Rve=Be(tr,"|"),Ave=Be(tr,"^"),Nve=Be(tr,"<<"),Pve=Be(tr,">>");Ne("add",Pi);Ne("sub",$i);Ne("mul",sn);Ne("div",Xa);Ne("modInt",w4);Ne("equal",gve);Ne("notEqual",vve);Ne("lessThan",yve);Ne("greaterThan",xve);Ne("lessThanEqual",_ve);Ne("greaterThanEqual",bve);Ne("and",Sve);Ne("or",wve);Ne("not",Cve);Ne("xor",Eve);Ne("bitAnd",Tve);Ne("bitNot",Mve);Ne("bitOr",Rve);Ne("bitXor",Ave);Ne("shiftLeft",Nve);Ne("shiftRight",Pve);const Ove=(...n)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),w4(...n));Ne("remainder",Ove);class ue extends Mr{static get type(){return"MathNode"}constructor(e,r,i=null,o=null){super(),this.method=e,this.aNode=r,this.bNode=i,this.cNode=o}getInputType(e){const r=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,o=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(r)?0:e.getTypeLength(r),a=e.isMatrix(i)?0:e.getTypeLength(i),l=e.isMatrix(o)?0:e.getTypeLength(o);return s>a&&s>l?r:a>l?i:l>s?o:r}getNodeType(e){const r=this.method;return r===ue.LENGTH||r===ue.DISTANCE||r===ue.DOT?"float":r===ue.CROSS?"vec3":r===ue.ALL?"bool":r===ue.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):r===ue.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,r){const i=this.method,o=this.getNodeType(e),s=this.getInputType(e),a=this.aNode,l=this.bNode,c=this.cNode,u=e.renderer.isWebGLRenderer===!0;if(i===ue.TRANSFORM_DIRECTION){let d=a,f=l;e.isMatrix(d.getNodeType(e))?f=Yt(Ie(f),0):d=Yt(Ie(d),0);const h=sn(d,f).xyz;return Am(h).build(e,r)}else{if(i===ue.NEGATE)return e.format("( - "+a.build(e,s)+" )",o,r);if(i===ue.ONE_MINUS)return $i(1,a).build(e,r);if(i===ue.RECIPROCAL)return Xa(1,a).build(e,r);if(i===ue.DIFFERENCE)return Fo($i(a,l)).build(e,r);{const d=[];return i===ue.CROSS||i===ue.MOD?d.push(a.build(e,o),l.build(e,o)):u&&i===ue.STEP?d.push(a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s),l.build(e,s)):u&&(i===ue.MIN||i===ue.MAX)||i===ue.MOD?d.push(a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):i===ue.REFRACT?d.push(a.build(e,s),l.build(e,s),c.build(e,"float")):i===ue.MIX?d.push(a.build(e,s),l.build(e,s),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":s)):(d.push(a.build(e,s)),l!==null&&d.push(l.build(e,s)),c!==null&&d.push(c.build(e,s))),e.format(`${e.getMethod(i,o)}( ${d.join(", ")} )`,o,r)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}ue.ALL="all";ue.ANY="any";ue.EQUALS="equals";ue.RADIANS="radians";ue.DEGREES="degrees";ue.EXP="exp";ue.EXP2="exp2";ue.LOG="log";ue.LOG2="log2";ue.SQRT="sqrt";ue.INVERSE_SQRT="inversesqrt";ue.FLOOR="floor";ue.CEIL="ceil";ue.NORMALIZE="normalize";ue.FRACT="fract";ue.SIN="sin";ue.COS="cos";ue.TAN="tan";ue.ASIN="asin";ue.ACOS="acos";ue.ATAN="atan";ue.ABS="abs";ue.SIGN="sign";ue.LENGTH="length";ue.NEGATE="negate";ue.ONE_MINUS="oneMinus";ue.DFDX="dFdx";ue.DFDY="dFdy";ue.ROUND="round";ue.RECIPROCAL="reciprocal";ue.TRUNC="trunc";ue.FWIDTH="fwidth";ue.BITCAST="bitcast";ue.TRANSPOSE="transpose";ue.ATAN2="atan2";ue.MIN="min";ue.MAX="max";ue.MOD="mod";ue.STEP="step";ue.REFLECT="reflect";ue.DISTANCE="distance";ue.DIFFERENCE="difference";ue.DOT="dot";ue.CROSS="cross";ue.POW="pow";ue.TRANSFORM_DIRECTION="transformDirection";ue.MIX="mix";ue.CLAMP="clamp";ue.REFRACT="refract";ue.SMOOTHSTEP="smoothstep";ue.FACEFORWARD="faceforward";const Ive=Ae(1e-6),Dve=Ae(Math.PI),C4=Be(ue,ue.ALL),Lve=Be(ue,ue.ANY),Fve=Be(ue,ue.EQUALS),Uve=Be(ue,ue.RADIANS),Bve=Be(ue,ue.DEGREES),E4=Be(ue,ue.EXP),Rm=Be(ue,ue.EXP2),T4=Be(ue,ue.LOG),Ba=Be(ue,ue.LOG2),lR=Be(ue,ue.SQRT),$ve=Be(ue,ue.INVERSE_SQRT),nu=Be(ue,ue.FLOOR),cR=Be(ue,ue.CEIL),Am=Be(ue,ue.NORMALIZE),hc=Be(ue,ue.FRACT),ds=Be(ue,ue.SIN),El=Be(ue,ue.COS),zve=Be(ue,ue.TAN),kve=Be(ue,ue.ASIN),Vve=Be(ue,ue.ACOS),Gve=Be(ue,ue.ATAN),Fo=Be(ue,ue.ABS),Vy=Be(ue,ue.SIGN),Xl=Be(ue,ue.LENGTH),Hve=Be(ue,ue.NEGATE),jve=Be(ue,ue.ONE_MINUS),M4=Be(ue,ue.DFDX),R4=Be(ue,ue.DFDY),Wve=Be(ue,ue.ROUND),qve=Be(ue,ue.RECIPROCAL),Xve=Be(ue,ue.TRUNC),Kve=Be(ue,ue.FWIDTH);ue.BITCAST;const Yve=Be(ue,ue.TRANSPOSE),Qve=Be(ue,ue.ATAN2),Nm=Be(ue,ue.MIN),Ji=Be(ue,ue.MAX),A4=Be(ue,ue.MOD),N4=Be(ue,ue.STEP),Zve=Be(ue,ue.REFLECT),Jve=Be(ue,ue.DISTANCE),e0e=Be(ue,ue.DIFFERENCE),uR=Be(ue,ue.DOT),P4=Be(ue,ue.CROSS),m_=Be(ue,ue.POW),O4=Be(ue,ue.POW,2),t0e=Be(ue,ue.POW,3),n0e=Be(ue,ue.POW,4),r0e=Be(ue,ue.TRANSFORM_DIRECTION),i0e=n=>sn(Vy(n),m_(Fo(n),1/3)),o0e=n=>uR(n,n),jn=Be(ue,ue.MIX),Ka=(n,e=0,r=1)=>nt(new ue(ue.CLAMP,nt(n),nt(e),nt(r))),s0e=n=>Ka(n),I4=Be(ue,ue.REFRACT),vu=Be(ue,ue.SMOOTHSTEP),a0e=Be(ue,ue.FACEFORWARD),l0e=lt(([n])=>{const i=43758.5453,o=uR(n.xy,pt(12.9898,78.233)),s=A4(o,Dve);return hc(ds(s).mul(i))}),c0e=(n,e,r)=>jn(e,r,n),u0e=(n,e,r)=>vu(e,r,n);Ne("all",C4);Ne("any",Lve);Ne("equals",Fve);Ne("radians",Uve);Ne("degrees",Bve);Ne("exp",E4);Ne("exp2",Rm);Ne("log",T4);Ne("log2",Ba);Ne("sqrt",lR);Ne("inverseSqrt",$ve);Ne("floor",nu);Ne("ceil",cR);Ne("normalize",Am);Ne("fract",hc);Ne("sin",ds);Ne("cos",El);Ne("tan",zve);Ne("asin",kve);Ne("acos",Vve);Ne("atan",Gve);Ne("abs",Fo);Ne("sign",Vy);Ne("length",Xl);Ne("lengthSq",o0e);Ne("negate",Hve);Ne("oneMinus",jve);Ne("dFdx",M4);Ne("dFdy",R4);Ne("round",Wve);Ne("reciprocal",qve);Ne("trunc",Xve);Ne("fwidth",Kve);Ne("atan2",Qve);Ne("min",Nm);Ne("max",Ji);Ne("mod",A4);Ne("step",N4);Ne("reflect",Zve);Ne("distance",Jve);Ne("dot",uR);Ne("cross",P4);Ne("pow",m_);Ne("pow2",O4);Ne("pow3",t0e);Ne("pow4",n0e);Ne("transformDirection",r0e);Ne("mix",c0e);Ne("clamp",Ka);Ne("refract",I4);Ne("smoothstep",u0e);Ne("faceForward",a0e);Ne("difference",e0e);Ne("saturate",s0e);Ne("cbrt",i0e);Ne("transpose",Yve);Ne("rand",l0e);class d0e extends Qt{static get type(){return"ConditionalNode"}constructor(e,r,i=null){super(),this.condNode=e,this.ifNode=r,this.elseNode=i}getNodeType(e){const r=this.ifNode.getNodeType(e);if(this.elseNode!==null){const i=this.elseNode.getNodeType(e);if(e.getTypeLength(i)>e.getTypeLength(r))return i}return r}setup(e){const r=this.condNode.cache(),i=this.ifNode.cache(),o=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(i).parentNodeBlock=s,o!==null&&(e.getDataFromNode(o).parentNodeBlock=s);const a=e.getNodeProperties(this);a.condNode=r,a.ifNode=i.context({nodeBlock:i}),a.elseNode=o?o.context({nodeBlock:o}):null}generate(e,r){const i=this.getNodeType(e),o=e.getDataFromNode(this);if(o.nodeProperty!==void 0)return o.nodeProperty;const{condNode:s,ifNode:a,elseNode:l}=e.getNodeProperties(this),c=r!=="void",u=c?uve(i).build(e):"";o.nodeProperty=u;const d=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${d} ) {

`).addFlowTab();let f=a.build(e,i);if(f&&(c?f=u+" = "+f+";":f="return "+f+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+f+`

`+e.tab+"}"),l!==null){e.addFlowCode(` else {

`).addFlowTab();let h=l.build(e,i);h&&(c?h=u+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(u,i,r)}}const Hi=Be(d0e);Ne("select",Hi);const f0e=(...n)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),Hi(...n));Ne("cond",f0e);class D4 extends Qt{static get type(){return"ContextNode"}constructor(e,r={}){super(),this.isContextNode=!0,this.node=e,this.value=r}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const r=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e);return e.setContext(r),i}generate(e,r){const i=e.getContext();e.setContext({...e.context,...this.value});const o=this.node.build(e,r);return e.setContext(i),o}}const dR=Be(D4),h0e=(n,e)=>dR(n,{label:e});Ne("context",dR);Ne("label",h0e);class L4 extends Qt{static get type(){return"VarNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.global=!0,this.isVarNode=!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:r,name:i}=this,o=e.getVarFromNode(this,i,e.getVectorType(this.getNodeType(e))),s=e.getPropertyName(o),a=r.build(e,o.type);return e.addLineFlowCode(`${s} = ${a}`,this),s}}const F4=Be(L4);Ne("toVar",(...n)=>F4(...n).append());const p0e=n=>(console.warn('TSL: "temp" is deprecated. Use ".toVar()" instead.'),F4(n));Ne("temp",p0e);class m0e extends Qt{static get type(){return"VaryingNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const r=e.getNodeProperties(this);let i=r.varying;if(i===void 0){const o=this.name,s=this.getNodeType(e);r.varying=i=e.getVaryingFromNode(this,o,s),r.node=this.node}return i.needsInterpolation||(i.needsInterpolation=e.shaderStage==="fragment"),i}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const r=e.getNodeProperties(this),i=this.setupVarying(e);if(r.propertyName===void 0){const o=this.getNodeType(e),s=e.getPropertyName(i,CI.VERTEX);e.flowNodeFromShaderStage(CI.VERTEX,this.node,o,s),r.propertyName=s}return e.getPropertyName(i)}}const nl=Be(m0e);Ne("varying",nl);const g0e=lt(([n])=>{const e=n.mul(.9478672986).add(.0521327014).pow(2.4),r=n.mul(.0773993808),i=n.lessThanEqual(.04045);return jn(e,r,i)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),v0e=lt(([n])=>{const e=n.pow(.41666).mul(1.055).sub(.055),r=n.mul(12.92),i=n.lessThanEqual(.0031308);return jn(e,r,i)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),fg="WorkingColorSpace",fR="OutputColorSpace";class g_ extends Mr{static get type(){return"ColorSpaceNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.source=r,this.target=i}resolveColorSpace(e,r){return r===fg?rn.workingColorSpace:r===fR?e.context.outputColorSpace||e.renderer.outputColorSpace:r}setup(e){const{colorNode:r}=this,i=this.resolveColorSpace(e,this.source),o=this.resolveColorSpace(e,this.target);let s=r;return rn.enabled===!1||i===o||!i||!o||(rn.getTransfer(i)===Mn&&(s=Yt(g0e(s.rgb),s.a)),rn.getPrimaries(i)!==rn.getPrimaries(o)&&(s=Yt(Ni(rn._getMatrix(new Vt,i,o)).mul(s.rgb),s.a)),rn.getTransfer(o)===Mn&&(s=Yt(v0e(s.rgb),s.a))),s}}const y0e=n=>nt(new g_(nt(n),fg,fR)),x0e=n=>nt(new g_(nt(n),fR,fg)),_0e=(n,e)=>nt(new g_(nt(n),fg,e)),U4=(n,e)=>nt(new g_(nt(n),e,fg));Ne("toOutputColorSpace",y0e);Ne("toWorkingColorSpace",x0e);Ne("workingToColorSpace",_0e);Ne("colorSpaceToWorking",U4);let b0e=class extends ug{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),o=this.getNodeType();return e.format(r,i,o)}};class B4 extends Qt{static get type(){return"ReferenceBaseNode"}constructor(e,r,i=null,o=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=o,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.updateType=on.OBJECT}setGroup(e){return this.group=e,this}element(e){return nt(new b0e(this,nt(e)))}setNodeType(e){const r=Xt(null,e).getSelf();this.group!==null&&r.setGroup(this.group),this.node=r}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let o=1;o<r.length;o++)i=i[r[o]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const S0e=(n,e,r)=>nt(new B4(n,e,r));class w0e extends B4{static get type(){return"RendererReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.renderer=i,this.setGroup(jt)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const C0e=(n,e,r)=>nt(new w0e(n,e,r));class E0e extends Mr{static get type(){return"ToneMappingNode"}constructor(e,r=M0e,i=null){super("vec3"),this.toneMapping=e,this.exposureNode=r,this.colorNode=i}getCacheKey(){return o4(super.getCacheKey(),this.toneMapping)}setup(e){const r=this.colorNode||e.context.color,i=this.toneMapping;if(i===Qi)return r;let o=null;const s=e.renderer.library.getToneMappingFunction(i);return s!==null?o=Yt(s(r.rgb,this.exposureNode),r.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),o=r),o}}const T0e=(n,e,r)=>nt(new E0e(n,nt(e),nt(r))),M0e=C0e("toneMappingExposure","float");Ne("toneMapping",(n,e,r)=>T0e(e,r,n));class R0e extends tR{static get type(){return"BufferAttributeNode"}constructor(e,r=null,i=0,o=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferStride=i,this.bufferOffset=o,this.usage=My,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let r=e.globalCache.getData(this.value);return r===void 0&&(r={node:this},e.globalCache.setData(this.value,r)),r.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const r=this.getNodeType(e),i=this.value,o=e.getTypeLength(r),s=this.bufferStride||o,a=this.bufferOffset,l=i.isInterleavedBuffer===!0?i:new pk(i,s),c=new UM(l,o,a);l.setUsage(this.usage),this.attribute=c,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const r=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,r),o=e.getPropertyName(i);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=o,s=o):s=nl(this).build(e,r),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const hR=(n,e,r,i)=>nt(new R0e(n,e,r,i)),A0e=(n,e,r,i)=>hR(n,e,r,i).setUsage(Cd),DI=(n,e,r,i)=>hR(n,e,r,i).setInstanced(!0),LI=(n,e,r,i)=>A0e(n,e,r,i).setInstanced(!0);Ne("toAttribute",n=>hR(n.value));class N0e extends Qt{static get type(){return"ComputeNode"}constructor(e,r,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=r,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.updateBeforeType=on.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:r}=this;let i=r[0];for(let o=1;o<r.length;o++)i*=r[o];this.dispatchCount=Math.ceil(e/i)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:r}=e;if(r==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i,this)}}}const P0e=(n,e,r)=>nt(new N0e(nt(n),e,r));Ne("compute",P0e);class O0e extends Qt{static get type(){return"CacheNode"}constructor(e,r=!0){super(),this.node=e,this.parent=r,this.isCacheNode=!0}getNodeType(e){return this.node.getNodeType(e)}build(e,...r){const i=e.getCache(),o=e.getCacheFromNode(this,this.parent);e.setCache(o);const s=this.node.build(e,...r);return e.setCache(i),s}}const E0=(n,...e)=>nt(new O0e(nt(n),...e));Ne("cache",E0);class I0e extends Qt{static get type(){return"BypassNode"}constructor(e,r){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=r}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const r=this.callNode.build(e,"void");return r!==""&&e.addLineFlowCode(r,this),this.outputNode.build(e)}}const D0e=Be(I0e);Ne("bypass",D0e);class $4 extends Qt{static get type(){return"RemapNode"}constructor(e,r,i,o=Ae(0),s=Ae(1)){super(),this.node=e,this.inLowNode=r,this.inHighNode=i,this.outLowNode=o,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:r,inHighNode:i,outLowNode:o,outHighNode:s,doClamp:a}=this;let l=e.sub(r).div(i.sub(r));return a===!0&&(l=l.clamp()),l.mul(s.sub(o)).add(o)}}const L0e=Be($4,null,null,{doClamp:!1}),F0e=Be($4);Ne("remap",L0e);Ne("remapClamp",F0e);class z4 extends Qt{static get type(){return"ExpressionNode"}constructor(e="",r="void"){super(r),this.snippet=e}generate(e,r){const i=this.getNodeType(e),o=this.snippet;if(i==="void")e.addLineFlowCode(o,this);else return e.format(`( ${o} )`,i,r)}}const Pm=Be(z4),U0e=n=>(n?Hi(n,Pm("discard")):Pm("discard")).append();Ne("discard",U0e);class B0e extends Mr{static get type(){return"RenderOutputNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.toneMapping=r,this.outputColorSpace=i,this.isRenderOutput=!0}setup({context:e}){let r=this.colorNode||e.color;const i=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||Qi,o=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||mo;return i!==Qi&&(r=r.toneMapping(i)),o!==mo&&o!==rn.workingColorSpace&&(r=r.workingToColorSpace(o)),r}}const $0e=(n,e=null,r=null)=>nt(new B0e(nt(n),e,r));Ne("renderOutput",$0e);class z0e extends Qt{static get type(){return"AttributeNode"}constructor(e,r=null){super(r),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let r=this.nodeType;if(r===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const o=e.geometry.getAttribute(i);r=e.getTypeFromAttribute(o)}else r="float"}return r}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const r=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(r)===!0){const s=e.geometry.getAttribute(r),a=e.getTypeFromAttribute(s),l=e.getAttribute(r,a);return e.shaderStage==="vertex"?e.format(l.name,a,i):nl(this).build(e,i)}else return console.warn(`AttributeNode: Vertex attribute "${r}" not found on geometry.`),e.generateConst(i)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const Ya=(n,e)=>nt(new z0e(n,e)),v_=n=>Ya("uv"+(n>0?n:""),"vec2");class k0e extends Qt{static get type(){return"TextureSizeNode"}constructor(e,r=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=r}generate(e,r){const i=this.textureNode.build(e,"property"),o=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${o} )`,this.getNodeType(e),r)}}const Ep=Be(k0e);class V0e extends dg{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=on.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,r=e.images,i=r&&r.length>0?r[0]&&r[0].image||r[0]:e.image;if(i&&i.width!==void 0){const{width:o,height:s}=i;this.value=Math.log2(Math.max(o,s))}}}const G0e=Be(V0e);class hg extends dg{static get type(){return"TextureNode"}constructor(e,r=null,i=null,o=null){super(e),this.isTextureNode=!0,this.uvNode=r,this.levelNode=i,this.biasNode=o,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=on.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(r===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===rr?"uvec4":this.value.type===Xr?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return v_(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Xt(this.value.matrix)),this._matrixUniform.mul(Ie(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?on.FRAME:on.NONE,this}setupUV(e,r){const i=this.value;return e.isFlipY()&&(i.image instanceof ImageBitmap&&i.flipY===!0||i.isRenderTargetTexture===!0||i.isFramebufferTexture===!0||i.isDepthTexture===!0)&&(this.sampler?r=r.flipY():r=r.setY(cr(Ep(this,this.levelNode).y).sub(r.y).sub(1))),r}setup(e){const r=e.getNodeProperties(this);r.referenceNode=this.referenceNode;let i=this.uvNode;(i===null||e.context.forceUVContext===!0)&&e.context.getUV&&(i=e.context.getUV(this)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i)),i=this.setupUV(e,i);let o=this.levelNode;o===null&&e.context.getTextureLevel&&(o=e.context.getTextureLevel(this)),r.uvNode=i,r.levelNode=o,r.biasNode=this.biasNode,r.compareNode=this.compareNode,r.gradNode=this.gradNode,r.depthNode=this.depthNode}generateUV(e,r){return r.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,r,i,o,s,a,l,c){const u=this.value;let d;return o?d=e.generateTextureLevel(u,r,i,o,a):s?d=e.generateTextureBias(u,r,i,s,a):c?d=e.generateTextureGrad(u,r,i,c,a):l?d=e.generateTextureCompare(u,r,i,l,a):this.sampler===!1?d=e.generateTextureLoad(u,r,i,a):d=e.generateTexture(u,r,i,a),d}generate(e,r){const i=e.getNodeProperties(this),o=this.value;if(!o||o.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const s=super.generate(e,"property");if(r==="sampler")return s+"_sampler";if(e.isReference(r))return s;{const a=e.getDataFromNode(this);let l=a.propertyName;if(l===void 0){const{uvNode:d,levelNode:f,biasNode:h,compareNode:p,depthNode:g,gradNode:y}=i,v=this.generateUV(e,d),m=f?f.build(e,"float"):null,x=h?h.build(e,"float"):null,b=g?g.build(e,"int"):null,S=p?p.build(e,"float"):null,w=y?[y[0].build(e,"vec2"),y[1].build(e,"vec2")]:null,C=e.getVarFromNode(this);l=e.getPropertyName(C);const E=this.generateSnippet(e,s,v,m,x,b,S,w);e.addLineFlowCode(`${l} = ${E}`,this),a.snippet=E,a.propertyName=l}let c=l;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(o)&&(c=U4(Pm(c,u),o.colorSpace).setup(e).build(e,u)),e.format(c,u,r)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const r=this.clone();return r.uvNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}blur(e){const r=this.clone();return r.biasNode=nt(e).mul(G0e(r)),r.referenceNode=this.getSelf(),nt(r)}level(e){const r=this.clone();return r.levelNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}size(e){return Ep(this,e)}bias(e){const r=this.clone();return r.biasNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}compare(e){const r=this.clone();return r.compareNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}grad(e,r){const i=this.clone();return i.gradNode=[nt(e),nt(r)],i.referenceNode=this.getSelf(),nt(i)}depth(e){const r=this.clone();return r.depthNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,r=this._matrixUniform;r!==null&&(r.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const gn=Be(hg),rs=(...n)=>gn(...n).setSampler(!1),Uc=Xt("float").label("cameraNear").setGroup(jt).onRenderUpdate(({camera:n})=>n.near),Bc=Xt("float").label("cameraFar").setGroup(jt).onRenderUpdate(({camera:n})=>n.far),Gy=Xt("mat4").label("cameraProjectionMatrix").setGroup(jt).onRenderUpdate(({camera:n})=>n.projectionMatrix),rl=Xt("mat4").label("cameraViewMatrix").setGroup(jt).onRenderUpdate(({camera:n})=>n.matrixWorldInverse),H0e=Xt(new Y).label("cameraPosition").setGroup(jt).onRenderUpdate(({camera:n},e)=>e.value.setFromMatrixPosition(n.matrixWorld));class xn extends Qt{static get type(){return"Object3DNode"}constructor(e,r=null){super(),this.scope=e,this.object3d=r,this.updateType=on.OBJECT,this._uniformNode=new dg(null)}getNodeType(){const e=this.scope;if(e===xn.WORLD_MATRIX)return"mat4";if(e===xn.POSITION||e===xn.VIEW_POSITION||e===xn.DIRECTION||e===xn.SCALE)return"vec3"}update(e){const r=this.object3d,i=this._uniformNode,o=this.scope;if(o===xn.WORLD_MATRIX)i.value=r.matrixWorld;else if(o===xn.POSITION)i.value=i.value||new Y,i.value.setFromMatrixPosition(r.matrixWorld);else if(o===xn.SCALE)i.value=i.value||new Y,i.value.setFromMatrixScale(r.matrixWorld);else if(o===xn.DIRECTION)i.value=i.value||new Y,r.getWorldDirection(i.value);else if(o===xn.VIEW_POSITION){const s=e.camera;i.value=i.value||new Y,i.value.setFromMatrixPosition(r.matrixWorld),i.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const r=this.scope;return r===xn.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(r===xn.POSITION||r===xn.VIEW_POSITION||r===xn.DIRECTION||r===xn.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}xn.WORLD_MATRIX="worldMatrix";xn.POSITION="position";xn.SCALE="scale";xn.VIEW_POSITION="viewPosition";xn.DIRECTION="direction";xn.DIRECTION;xn.WORLD_MATRIX;const j0e=Be(xn,xn.POSITION);xn.SCALE;xn.VIEW_POSITION;class Zs extends xn{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}Zs.DIRECTION;const yu=ct(Zs,Zs.WORLD_MATRIX);Zs.POSITION;Zs.SCALE;Zs.VIEW_POSITION;const W0e=Xt(new Vt).onObjectUpdate(({object:n},e)=>e.value.getNormalMatrix(n.matrixWorld)),y_=rl.mul(yu).toVar("modelViewMatrix"),k4=Ya("position","vec3"),ii=k4.varying("positionLocal"),FI=k4.varying("positionPrevious"),Om=yu.mul(ii).xyz.varying("v_positionWorld"),V4=ii.transformDirection(yu).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Lr=y_.mul(ii).xyz.varying("v_positionView"),ir=Lr.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection");class q0e extends Qt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:r,material:i}=e;return r.coordinateSystem===$o&&i.side===er?"false":e.getFrontFacing()}}const X0e=ct(q0e),x_=Ae(X0e).mul(2).sub(1),G4=Ya("normal","vec3"),Js=lt(n=>n.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),Ie(0,1,0)):G4,"vec3").once()().toVar("normalLocal"),K0e=Lr.dFdx().cross(Lr.dFdy()).normalize().toVar("normalFlat"),Es=lt(n=>{let e;return n.material.flatShading===!0?e=K0e:e=nl(j4(Js),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),H4=nl(Es.transformDirection(rl),"v_normalWorld").normalize().toVar("normalWorld"),Sr=lt(n=>n.context.setupNormal(),"vec3").once()().mul(x_).toVar("transformedNormalView"),pR=Sr.transformDirection(rl).toVar("transformedNormalWorld"),np=lt(n=>n.context.setupClearcoatNormal(),"vec3").once()().mul(x_).toVar("transformedClearcoatNormalView"),Y0e=lt(([n,e=yu])=>{const r=Ni(e),i=n.div(Ie(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2])));return r.mul(i).xyz}),j4=lt(([n],e)=>{const r=e.renderer.nodes.modelNormalViewMatrix;if(r!==null)return r.transformDirection(n);const i=W0e.mul(n);return rl.transformDirection(i)}),Q0e=Xt(0).onReference(({material:n})=>n).onRenderUpdate(({material:n})=>n.refractionRatio),Z0e=ir.negate().reflect(Sr),J0e=ir.negate().refract(Sr,Q0e),eye=Z0e.transformDirection(rl).toVar("reflectVector"),tye=J0e.transformDirection(rl).toVar("reflectVector");class nye extends hg{static get type(){return"CubeTextureNode"}constructor(e,r=null,i=null,o=null){super(e,r,i,o),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===qo?eye:e.mapping===Xo?tye:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Ie(0,0,0))}setUpdateMatrix(){}setupUV(e,r){const i=this.value;return e.renderer.coordinateSystem===gu||!i.isRenderTargetTexture?Ie(r.x.negate(),r.yz):r}generateUV(e,r){return r.build(e,"vec3")}}const Im=Be(nye);class W4 extends dg{static get type(){return"BufferNode"}constructor(e,r,i=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferCount=i}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const mR=(n,e,r)=>nt(new W4(n,e,r));class rye extends ug{static get type(){return"UniformArrayElementNode"}constructor(e,r){super(e,r),this.isArrayBufferElementNode=!0}generate(e){const r=super.generate(e),i=this.getNodeType();return e.format(r,"vec4",i)}}class iye extends W4{static get type(){return"UniformArrayNode"}constructor(e,r=null){super(null,"vec4"),this.array=e,this.elementType=r,this._elementType=null,this._elementLength=0,this.updateType=on.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:r}=this,i=this.getElementLength(),o=this.getElementType();if(i===1)for(let s=0;s<e.length;s++){const a=s*4;r[a]=e[s]}else if(o==="color")for(let s=0;s<e.length;s++){const a=s*4,l=e[s];r[a]=l.r,r[a+1]=l.g,r[a+2]=l.b||0}else for(let s=0;s<e.length;s++){const a=s*4,l=e[s];r[a]=l.x,r[a+1]=l.y,r[a+2]=l.z||0,r[a+3]=l.w||0}}setup(e){const r=this.array.length;this._elementType=this.elementType===null?Fy(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);let i=Float32Array;return this._elementType.charAt(0)==="i"?i=Int32Array:this._elementType.charAt(0)==="u"&&(i=Uint32Array),this.value=new i(r*4),this.bufferCount=r,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),super.setup(e)}element(e){return nt(new rye(this,nt(e)))}}const Rl=(n,e)=>nt(new iye(n,e));class oye extends ug{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),o=this.getNodeType();return e.format(r,i,o)}}class gR extends Qt{static get type(){return"ReferenceNode"}constructor(e,r,i=null,o=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=o,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.name=null,this.updateType=on.OBJECT}element(e){return nt(new oye(this,nt(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let r=null;this.count!==null?r=mR(null,e,this.count):Array.isArray(this.getValueFromReference())?r=Rl(null,e):e==="texture"?r=gn(null):e==="cubeTexture"?r=Im(null):r=Xt(null,e),this.group!==null&&r.setGroup(this.group),this.name!==null&&r.label(this.name),this.node=r.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let o=1;o<r.length;o++)i=i[r[o]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Nn=(n,e,r)=>nt(new gR(n,e,r)),UI=(n,e,r,i)=>nt(new gR(n,e,i,r));class sye extends gR{static get type(){return"MaterialReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.material=i,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Al=(n,e,r)=>nt(new sye(n,e,r)),q4=lt(n=>(n.geometry.hasAttribute("tangent")===!1&&n.geometry.computeTangents(),Ya("tangent","vec4")))(),vR=q4.xyz.toVar("tangentLocal"),X4=y_.mul(Yt(vR,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),aye=n=>n.mul(q4.w).xyz,lye=nl(aye(Es.cross(X4)),"v_bitangentView").normalize().toVar("bitangentView"),rp=Ni(X4,lye,Es),cye=(()=>{let n=Wd.cross(ir);return n=n.cross(Wd).normalize(),n=jn(n,Sr,Nc.mul(Ea.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})(),uye=lt(n=>{const{eye_pos:e,surf_norm:r,mapN:i,uv:o}=n,s=e.dFdx(),a=e.dFdy(),l=o.dFdx(),c=o.dFdy(),u=r,d=a.cross(u),f=u.cross(s),h=d.mul(l.x).add(f.mul(c.x)),p=d.mul(l.y).add(f.mul(c.y)),g=h.dot(h).max(p.dot(p)),y=x_.mul(g.inverseSqrt());return Pi(h.mul(i.x,y),p.mul(i.y,y),u.mul(i.z)).normalize()});class dye extends Mr{static get type(){return"NormalMapNode"}constructor(e,r=null){super("vec3"),this.node=e,this.scaleNode=r,this.normalMapType=qa}setup(e){const{normalMapType:r,scaleNode:i}=this;let o=this.node.mul(2).sub(1);i!==null&&(o=Ie(o.xy.mul(i),o.z));let s=null;return r===ik?s=j4(o):r===qa&&(e.hasGeometryAttribute("tangent")===!0?s=rp.mul(o).normalize():s=uye({eye_pos:Lr,surf_norm:Es,mapN:o,uv:v_()})),s}}const BI=Be(dye),fye=lt(({textureNode:n,bumpScale:e})=>{const r=o=>n.cache().context({getUV:s=>o(s.uvNode||v_()),forceUVContext:!0}),i=Ae(r(o=>o));return pt(Ae(r(o=>o.add(o.dFdx()))).sub(i),Ae(r(o=>o.add(o.dFdy()))).sub(i)).mul(e)}),hye=lt(n=>{const{surf_pos:e,surf_norm:r,dHdxy:i}=n,o=e.dFdx().normalize(),s=e.dFdy().normalize(),a=r,l=s.cross(a),c=a.cross(o),u=o.dot(l).mul(x_),d=u.sign().mul(i.x.mul(l).add(i.y.mul(c)));return u.abs().mul(r).sub(d).normalize()});class pye extends Mr{static get type(){return"BumpMapNode"}constructor(e,r=null){super("vec3"),this.textureNode=e,this.scaleNode=r}setup(){const e=this.scaleNode!==null?this.scaleNode:1,r=fye({textureNode:this.textureNode,bumpScale:e});return hye({surf_pos:Lr,surf_norm:Es,dHdxy:r})}}const mye=Be(pye),$I=new Map;class Te extends Qt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,r){let i=$I.get(e);return i===void 0&&(i=Al(e,r),$I.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const r=e.context.material,i=this.scope;let o=null;if(i===Te.COLOR){const s=r.color!==void 0?this.getColor(i):Ie();r.map&&r.map.isTexture===!0?o=s.mul(this.getTexture("map")):o=s}else if(i===Te.OPACITY){const s=this.getFloat(i);r.alphaMap&&r.alphaMap.isTexture===!0?o=s.mul(this.getTexture("alpha")):o=s}else if(i===Te.SPECULAR_STRENGTH)r.specularMap&&r.specularMap.isTexture===!0?o=this.getTexture("specular").r:o=Ae(1);else if(i===Te.SPECULAR_INTENSITY){const s=this.getFloat(i);r.specularMap?o=s.mul(this.getTexture(i).a):o=s}else if(i===Te.SPECULAR_COLOR){const s=this.getColor(i);r.specularColorMap&&r.specularColorMap.isTexture===!0?o=s.mul(this.getTexture(i).rgb):o=s}else if(i===Te.ROUGHNESS){const s=this.getFloat(i);r.roughnessMap&&r.roughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).g):o=s}else if(i===Te.METALNESS){const s=this.getFloat(i);r.metalnessMap&&r.metalnessMap.isTexture===!0?o=s.mul(this.getTexture(i).b):o=s}else if(i===Te.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(i).mul(s);r.emissiveMap&&r.emissiveMap.isTexture===!0?o=a.mul(this.getTexture(i)):o=a}else if(i===Te.NORMAL)r.normalMap?(o=BI(this.getTexture("normal"),this.getCache("normalScale","vec2")),o.normalMapType=r.normalMapType):r.bumpMap?o=mye(this.getTexture("bump").r,this.getFloat("bumpScale")):o=Es;else if(i===Te.CLEARCOAT){const s=this.getFloat(i);r.clearcoatMap&&r.clearcoatMap.isTexture===!0?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.CLEARCOAT_ROUGHNESS){const s=this.getFloat(i);r.clearcoatRoughnessMap&&r.clearcoatRoughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.CLEARCOAT_NORMAL)r.clearcoatNormalMap?o=BI(this.getTexture(i),this.getCache(i+"Scale","vec2")):o=Es;else if(i===Te.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));r.sheenColorMap&&r.sheenColorMap.isTexture===!0?o=s.mul(this.getTexture("sheenColor").rgb):o=s}else if(i===Te.SHEEN_ROUGHNESS){const s=this.getFloat(i);r.sheenRoughnessMap&&r.sheenRoughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).a):o=s,o=o.clamp(.07,1)}else if(i===Te.ANISOTROPY)if(r.anisotropyMap&&r.anisotropyMap.isTexture===!0){const s=this.getTexture(i);o=oR(Fh.x,Fh.y,Fh.y.negate(),Fh.x).mul(s.rg.mul(2).sub(pt(1)).normalize().mul(s.b))}else o=Fh;else if(i===Te.IRIDESCENCE_THICKNESS){const s=Nn("1","float",r.iridescenceThicknessRange);if(r.iridescenceThicknessMap){const a=Nn("0","float",r.iridescenceThicknessRange);o=s.sub(a).mul(this.getTexture(i).g).add(a)}else o=s}else if(i===Te.TRANSMISSION){const s=this.getFloat(i);r.transmissionMap?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.THICKNESS){const s=this.getFloat(i);r.thicknessMap?o=s.mul(this.getTexture(i).g):o=s}else if(i===Te.IOR)o=this.getFloat(i);else if(i===Te.LIGHT_MAP)o=this.getTexture(i).rgb.mul(this.getFloat("lightMapIntensity"));else if(i===Te.AO_MAP)o=this.getTexture(i).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);o=this.getCache(i,s)}return o}}Te.ALPHA_TEST="alphaTest";Te.COLOR="color";Te.OPACITY="opacity";Te.SHININESS="shininess";Te.SPECULAR="specular";Te.SPECULAR_STRENGTH="specularStrength";Te.SPECULAR_INTENSITY="specularIntensity";Te.SPECULAR_COLOR="specularColor";Te.REFLECTIVITY="reflectivity";Te.ROUGHNESS="roughness";Te.METALNESS="metalness";Te.NORMAL="normal";Te.CLEARCOAT="clearcoat";Te.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Te.CLEARCOAT_NORMAL="clearcoatNormal";Te.EMISSIVE="emissive";Te.ROTATION="rotation";Te.SHEEN="sheen";Te.SHEEN_ROUGHNESS="sheenRoughness";Te.ANISOTROPY="anisotropy";Te.IRIDESCENCE="iridescence";Te.IRIDESCENCE_IOR="iridescenceIOR";Te.IRIDESCENCE_THICKNESS="iridescenceThickness";Te.IOR="ior";Te.TRANSMISSION="transmission";Te.THICKNESS="thickness";Te.ATTENUATION_DISTANCE="attenuationDistance";Te.ATTENUATION_COLOR="attenuationColor";Te.LINE_SCALE="scale";Te.LINE_DASH_SIZE="dashSize";Te.LINE_GAP_SIZE="gapSize";Te.LINE_WIDTH="linewidth";Te.LINE_DASH_OFFSET="dashOffset";Te.POINT_WIDTH="pointWidth";Te.DISPERSION="dispersion";Te.LIGHT_MAP="light";Te.AO_MAP="ao";const gye=ct(Te,Te.ALPHA_TEST),vye=ct(Te,Te.COLOR),yye=ct(Te,Te.SHININESS),xye=ct(Te,Te.EMISSIVE),K4=ct(Te,Te.OPACITY),_ye=ct(Te,Te.SPECULAR),zI=ct(Te,Te.SPECULAR_INTENSITY),bye=ct(Te,Te.SPECULAR_COLOR),T0=ct(Te,Te.SPECULAR_STRENGTH),$S=ct(Te,Te.REFLECTIVITY),Sye=ct(Te,Te.ROUGHNESS),wye=ct(Te,Te.METALNESS),Cye=ct(Te,Te.NORMAL).context({getUV:null}),Eye=ct(Te,Te.CLEARCOAT),Tye=ct(Te,Te.CLEARCOAT_ROUGHNESS),Mye=ct(Te,Te.CLEARCOAT_NORMAL).context({getUV:null}),Rye=ct(Te,Te.ROTATION),Aye=ct(Te,Te.SHEEN),Nye=ct(Te,Te.SHEEN_ROUGHNESS),Pye=ct(Te,Te.ANISOTROPY),Oye=ct(Te,Te.IRIDESCENCE),Iye=ct(Te,Te.IRIDESCENCE_IOR),Dye=ct(Te,Te.IRIDESCENCE_THICKNESS),Lye=ct(Te,Te.TRANSMISSION),Fye=ct(Te,Te.THICKNESS),Uye=ct(Te,Te.IOR),Bye=ct(Te,Te.ATTENUATION_DISTANCE),$ye=ct(Te,Te.ATTENUATION_COLOR),zye=ct(Te,Te.LINE_SCALE),kye=ct(Te,Te.LINE_DASH_SIZE),Vye=ct(Te,Te.LINE_GAP_SIZE);Te.LINE_WIDTH;const Gye=ct(Te,Te.LINE_DASH_OFFSET);Te.POINT_WIDTH;const Hye=ct(Te,Te.DISPERSION),Y4=ct(Te,Te.LIGHT_MAP),jye=ct(Te,Te.AO_MAP),Fh=Xt(new je).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});class Wye extends Mr{static get type(){return"ModelViewProjectionNode"}constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return nl(e.context.mvp);const r=this.positionNode||ii,i=e.renderer.nodes.modelViewMatrix||y_;return Gy.mul(i).mul(r)}}const Q4=Be(Wye);class Wn extends Qt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const r=this.getNodeType(e),i=this.scope;let o;if(i===Wn.VERTEX)o=e.getVertexIndex();else if(i===Wn.INSTANCE)o=e.getInstanceIndex();else if(i===Wn.DRAW)o=e.getDrawIndex();else if(i===Wn.INVOCATION_LOCAL)o=e.getInvocationLocalIndex();else if(i===Wn.INVOCATION_SUBGROUP)o=e.getInvocationSubgroupIndex();else if(i===Wn.SUBGROUP)o=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=o:s=nl(this).build(e,r),s}}Wn.VERTEX="vertex";Wn.INSTANCE="instance";Wn.SUBGROUP="subgroup";Wn.INVOCATION_LOCAL="invocationLocal";Wn.INVOCATION_SUBGROUP="invocationSubgroup";Wn.DRAW="draw";const qye=ct(Wn,Wn.VERTEX),yR=ct(Wn,Wn.INSTANCE);Wn.SUBGROUP;Wn.INVOCATION_SUBGROUP;Wn.INVOCATION_LOCAL;const Xye=ct(Wn,Wn.DRAW);class Kye extends Qt{static get type(){return"InstanceNode"}constructor(e,r,i){super("void"),this.count=e,this.instanceMatrix=r,this.instanceColor=i,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=on.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:r,instanceMatrix:i,instanceColor:o}=this;let{instanceMatrixNode:s,instanceColorNode:a}=this;if(s===null){if(r<=1e3)s=mR(i.array,"mat4",Math.max(r,1)).element(yR);else{const c=new uue(i.array,16,1);this.buffer=c;const u=i.usage===Cd?LI:DI,d=[u(c,"vec4",16,0),u(c,"vec4",16,4),u(c,"vec4",16,8),u(c,"vec4",16,12)];s=jd(...d)}this.instanceMatrixNode=s}if(o&&a===null){const c=new bce(o.array,3),u=o.usage===Cd?LI:DI;this.bufferColor=c,a=Ie(u(c,"vec3",3,0)),this.instanceColorNode=a}const l=s.mul(ii).xyz;if(ii.assign(l),e.hasGeometryAttribute("normal")){const c=Y0e(Js,s);Js.assign(c)}this.instanceColorNode!==null&&By("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==Cd&&this.buffer!=null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==Cd&&this.bufferColor!=null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}class Yye extends Kye{static get type(){return"InstancedMeshNode"}constructor(e){const{count:r,instanceMatrix:i,instanceColor:o}=e;super(r,i,o),this.instanceMesh=e}}const Qye=Be(Yye);class Zye extends Qt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=yR:this.batchingIdNode=Xye);const i=lt(([g])=>{const y=Ep(rs(this.batchMesh._indirectTexture),0),v=cr(g).modInt(cr(y)),m=cr(g).div(cr(y));return rs(this.batchMesh._indirectTexture,ba(v,m)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(cr(this.batchingIdNode)),o=this.batchMesh._matricesTexture,s=Ep(rs(o),0),a=Ae(i).mul(4).toInt().toVar(),l=a.modInt(s),c=a.div(cr(s)),u=jd(rs(o,ba(l,c)),rs(o,ba(l.add(1),c)),rs(o,ba(l.add(2),c)),rs(o,ba(l.add(3),c))),d=this.batchMesh._colorsTexture;if(d!==null){const y=lt(([v])=>{const m=Ep(rs(d),0).x,x=v,b=x.modInt(m),S=x.div(m);return rs(d,ba(b,S)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(i);By("vec3","vBatchColor").assign(y)}const f=Ni(u);ii.assign(u.mul(ii));const h=Js.div(Ie(f[0].dot(f[0]),f[1].dot(f[1]),f[2].dot(f[2]))),p=f.mul(h).xyz;Js.assign(p),e.hasGeometryAttribute("tangent")&&vR.mulAssign(f)}}const Jye=Be(Zye),kI=new WeakMap;class exe extends Qt{static get type(){return"SkinningNode"}constructor(e,r=!1){super("void"),this.skinnedMesh=e,this.useReference=r,this.updateType=on.OBJECT,this.skinIndexNode=Ya("skinIndex","uvec4"),this.skinWeightNode=Ya("skinWeight","vec4");let i,o,s;r?(i=Nn("bindMatrix","mat4"),o=Nn("bindMatrixInverse","mat4"),s=UI("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(i=Xt(e.bindMatrix,"mat4"),o=Xt(e.bindMatrixInverse,"mat4"),s=mR(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=i,this.bindMatrixInverseNode=o,this.boneMatricesNode=s,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,r=ii){const{skinIndexNode:i,skinWeightNode:o,bindMatrixNode:s,bindMatrixInverseNode:a}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w),f=s.mul(r),h=Pi(l.mul(o.x).mul(f),c.mul(o.y).mul(f),u.mul(o.z).mul(f),d.mul(o.w).mul(f));return a.mul(h).xyz}getSkinnedNormal(e=this.boneMatricesNode,r=Js){const{skinIndexNode:i,skinWeightNode:o,bindMatrixNode:s,bindMatrixInverseNode:a}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w);let f=Pi(o.x.mul(l),o.y.mul(c),o.z.mul(u),o.w.mul(d));return f=a.mul(f).mul(s),f.transformDirection(r).xyz}getPreviousSkinnedPosition(e){const r=e.object;return this.previousBoneMatricesNode===null&&(r.skeleton.previousBoneMatrices=new Float32Array(r.skeleton.boneMatrices),this.previousBoneMatricesNode=UI("skeleton.previousBoneMatrices","mat4",r.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,FI)}needsPreviousBoneMatrices(e){const r=e.renderer.getMRT();return r&&r.has("velocity")}setup(e){this.needsPreviousBoneMatrices(e)&&FI.assign(this.getPreviousSkinnedPosition(e));const r=this.getSkinnedPosition();if(ii.assign(r),e.hasGeometryAttribute("normal")){const i=this.getSkinnedNormal();Js.assign(i),e.hasGeometryAttribute("tangent")&&vR.assign(i)}}generate(e,r){if(r!=="void")return ii.build(e,r)}update(e){const i=(this.useReference?e.object:this.skinnedMesh).skeleton;kI.get(i)!==e.frameId&&(kI.set(i,e.frameId),this.previousBoneMatricesNode!==null&&i.previousBoneMatrices.set(i.boneMatrices),i.update())}}const txe=n=>nt(new exe(n,!0));class nxe extends Qt{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const r=e.getNodeProperties(this);if(r.stackNode!==void 0)return r;const i={};for(let s=0,a=this.params.length-1;s<a;s++){const l=this.params[s],c=l.isNode!==!0&&l.name||this.getVarName(s),u=l.isNode!==!0&&l.type||"int";i[c]=Pm(c,u)}const o=e.addStack();return r.returnsNode=this.params[this.params.length-1](i,o,e),r.stackNode=o,e.removeStack(),r}getNodeType(e){const{returnsNode:r}=this.getProperties(e);return r?r.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const r=this.getProperties(e),i=this.params,o=r.stackNode;for(let l=0,c=i.length-1;l<c;l++){const u=i[l];let d=null,f=null,h=null,p=null,g=null,y=null;u.isNode?(p="int",h=this.getVarName(l),d="0",f=u.build(e,p),g="<"):(p=u.type||"int",h=u.name||this.getVarName(l),d=u.start,f=u.end,g=u.condition,y=u.update,typeof d=="number"?d=e.generateConst(p,d):d&&d.isNode&&(d=d.build(e,p)),typeof f=="number"?f=e.generateConst(p,f):f&&f.isNode&&(f=f.build(e,p)),d!==void 0&&f===void 0?(d=d+" - 1",f="0",g=">="):f!==void 0&&d===void 0&&(d="0",g="<"),g===void 0&&(Number(d)>Number(f)?g=">=":g="<"));const v={start:d,end:f},m=v.start,x=v.end;let b="",S="",w="";y||(p==="int"||p==="uint"?g.includes("<")?y="++":y="--":g.includes("<")?y="+= 1.":y="-= 1."),b+=e.getVar(p,h)+" = "+m,S+=h+" "+g+" "+x,w+=h+" "+y;const C=`for ( ${b}; ${S}; ${w} )`;e.addFlowCode((l===0?`
`:"")+e.tab+C+` {

`).addFlowTab()}const s=o.build(e,"void"),a=r.returnsNode?r.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const ms=(...n)=>nt(new nxe(Hd(n,"int"))).append(),rxe=()=>Pm("break").append(),zS=new WeakMap,lo=new qt,VI=lt(({bufferMap:n,influence:e,stride:r,width:i,depth:o,offset:s})=>{const a=cr(qye).mul(r).add(s),l=a.div(i),c=a.sub(l.mul(i));return rs(n,ba(c,l)).depth(o).mul(e)});function ixe(n){const e=n.morphAttributes.position!==void 0,r=n.morphAttributes.normal!==void 0,i=n.morphAttributes.color!==void 0,o=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,s=o!==void 0?o.length:0;let a=zS.get(n);if(a===void 0||a.count!==s){let x=function(){v.dispose(),zS.delete(n),n.removeEventListener("dispose",x)};var l=x;a!==void 0&&a.texture.dispose();const c=n.morphAttributes.position||[],u=n.morphAttributes.normal||[],d=n.morphAttributes.color||[];let f=0;e===!0&&(f=1),r===!0&&(f=2),i===!0&&(f=3);let h=n.attributes.position.count*f,p=1;const g=4096;h>g&&(p=Math.ceil(h/g),h=g);const y=new Float32Array(h*p*4*s),v=new OM(y,h,p,s);v.type=hr,v.needsUpdate=!0;const m=f*4;for(let b=0;b<s;b++){const S=c[b],w=u[b],C=d[b],E=h*p*4*b;for(let M=0;M<S.count;M++){const T=M*m;e===!0&&(lo.fromBufferAttribute(S,M),y[E+T+0]=lo.x,y[E+T+1]=lo.y,y[E+T+2]=lo.z,y[E+T+3]=0),r===!0&&(lo.fromBufferAttribute(w,M),y[E+T+4]=lo.x,y[E+T+5]=lo.y,y[E+T+6]=lo.z,y[E+T+7]=0),i===!0&&(lo.fromBufferAttribute(C,M),y[E+T+8]=lo.x,y[E+T+9]=lo.y,y[E+T+10]=lo.z,y[E+T+11]=C.itemSize===4?lo.w:1)}}a={count:s,texture:v,stride:f,size:new je(h,p)},zS.set(n,a),n.addEventListener("dispose",x)}return a}class oxe extends Qt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Xt(1),this.updateType=on.OBJECT}setup(e){const{geometry:r}=e,i=r.morphAttributes.position!==void 0,o=r.hasAttribute("normal")&&r.morphAttributes.normal!==void 0,s=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,a=s!==void 0?s.length:0,{texture:l,stride:c,size:u}=ixe(r);i===!0&&ii.mulAssign(this.morphBaseInfluence),o===!0&&Js.mulAssign(this.morphBaseInfluence);const d=cr(u.width);ms(a,({i:f})=>{const h=Ae(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?h.assign(rs(this.mesh.morphTexture,ba(cr(f).add(1),cr(yR))).r):h.assign(Nn("morphTargetInfluences","float").element(f).toVar()),i===!0&&ii.addAssign(VI({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:cr(0)})),o===!0&&Js.addAssign(VI({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:cr(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((r,i)=>r+i,0)}}const sxe=Be(oxe);class rh extends Qt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}generate(){console.warn("Abstract function.")}}class axe extends rh{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class lxe extends D4{static get type(){return"LightingContextNode"}constructor(e,r=null,i=null,o=null){super(e),this.lightingModel=r,this.backdropNode=i,this.backdropAlphaNode=o,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:r}=this,i=Ie().toVar("directDiffuse"),o=Ie().toVar("directSpecular"),s=Ie().toVar("indirectDiffuse"),a=Ie().toVar("indirectSpecular"),l={directDiffuse:i,directSpecular:o,indirectDiffuse:s,indirectSpecular:a};return{radiance:Ie().toVar("radiance"),irradiance:Ie().toVar("irradiance"),iblIrradiance:Ie().toVar("iblIrradiance"),ambientOcclusion:Ae(1).toVar("ambientOcclusion"),reflectedLight:l,backdrop:e,backdropAlpha:r}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const cxe=Be(lxe);class uxe extends rh{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let Uh,Bh;class xr extends Qt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===xr.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=on.NONE;return(this.scope===xr.SIZE||this.scope===xr.VIEWPORT)&&(e=on.RENDER),this.updateType=e,e}update({renderer:e}){const r=e.getRenderTarget();this.scope===xr.VIEWPORT?r!==null?Bh.copy(r.viewport):(e.getViewport(Bh),Bh.multiplyScalar(e.getPixelRatio())):r!==null?(Uh.width=r.width,Uh.height=r.height):e.getDrawingBufferSize(Uh)}setup(){const e=this.scope;let r=null;return e===xr.SIZE?r=Xt(Uh||(Uh=new je)):e===xr.VIEWPORT?r=Xt(Bh||(Bh=new qt)):r=pt(__.div(tE)),r}generate(e){if(this.scope===xr.COORDINATE){let r=e.getFragCoord();if(e.isFlipY()){const i=e.getNodeProperties(tE).outputNode.build(e);r=`${e.getType("vec2")}( ${r}.x, ${i}.y - ${r}.y )`}return r}return super.generate(e)}}xr.COORDINATE="coordinate";xr.VIEWPORT="viewport";xr.SIZE="size";xr.UV="uv";const Dm=ct(xr,xr.UV),tE=ct(xr,xr.SIZE),__=ct(xr,xr.COORDINATE),Z4=ct(xr,xr.VIEWPORT);Z4.zw;Z4.xy;const $h=new je;class J4 extends hg{static get type(){return"ViewportTextureNode"}constructor(e=Dm,r=null,i=null){i===null&&(i=new Tce,i.minFilter=Vi),super(i,e,r),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=on.FRAME}updateBefore(e){const r=e.renderer;r.getDrawingBufferSize($h);const i=this.value;(i.image.width!==$h.width||i.image.height!==$h.height)&&(i.image.width=$h.width,i.image.height=$h.height,i.needsUpdate=!0);const o=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,r.copyFramebufferToTexture(i),i.generateMipmaps=o}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const e5=Be(J4,null,null,{generateMipmaps:!0});let kS=null;class dxe extends J4{static get type(){return"ViewportDepthTextureNode"}constructor(e=Dm,r=null){kS===null&&(kS=new dc),super(e,r,kS)}}const fxe=Be(dxe);class ji extends Qt{static get type(){return"ViewportDepthNode"}constructor(e,r=null){super("float"),this.scope=e,this.valueNode=r,this.isViewportDepthNode=!0}generate(e){const{scope:r}=this;return r===ji.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:r}=this,i=this.valueNode;let o=null;if(r===ji.DEPTH_BASE)i!==null&&(o=r5().assign(i));else if(r===ji.DEPTH)e.isPerspectiveCamera?o=hxe(Lr.z,Uc,Bc):o=Tp(Lr.z,Uc,Bc);else if(r===ji.LINEAR_DEPTH)if(i!==null)if(e.isPerspectiveCamera){const s=t5(i,Uc,Bc);o=Tp(s,Uc,Bc)}else o=i;else o=Tp(Lr.z,Uc,Bc);return o}}ji.DEPTH_BASE="depthBase";ji.DEPTH="depth";ji.LINEAR_DEPTH="linearDepth";const Tp=(n,e,r)=>n.add(e).div(e.sub(r)),hxe=(n,e,r)=>e.add(n).mul(r).div(r.sub(e).mul(n)),t5=(n,e,r)=>e.mul(r).div(r.sub(e).mul(n).sub(r)),n5=(n,e,r)=>{e=e.max(1e-6).toVar();const i=Ba(n.negate().div(e)),o=Ba(r.div(e));return i.div(o)},r5=Be(ji,ji.DEPTH_BASE),i5=ct(ji,ji.DEPTH),pxe=Be(ji,ji.LINEAR_DEPTH);fxe();i5.assign=n=>r5(n);class mxe extends Qt{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const gxe=Be(mxe);class Go extends Qt{static get type(){return"ClippingNode"}constructor(e=Go.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const r=e.clippingContext,{intersectionPlanes:i,unionPlanes:o}=r;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Go.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(i,o):this.scope===Go.HARDWARE?this.setupHardwareClipping(o,e):this.setupDefault(i,o)}setupAlphaToCoverage(e,r){return lt(()=>{const i=Ae().toVar("distanceToPlane"),o=Ae().toVar("distanceToGradient"),s=Ae(1).toVar("clipOpacity"),a=r.length;if(!this.hardwareClipping&&a>0){const c=Rl(r);ms(a,({i:u})=>{const d=c.element(u);i.assign(Lr.dot(d.xyz).negate().add(d.w)),o.assign(i.fwidth().div(2)),s.mulAssign(vu(o.negate(),o,i))})}const l=e.length;if(l>0){const c=Rl(e),u=Ae(1).toVar("intersectionClipOpacity");ms(l,({i:d})=>{const f=c.element(d);i.assign(Lr.dot(f.xyz).negate().add(f.w)),o.assign(i.fwidth().div(2)),u.mulAssign(vu(o.negate(),o,i).oneMinus())}),s.mulAssign(u.oneMinus())}Sn.a.mulAssign(s),Sn.a.equal(0).discard()})()}setupDefault(e,r){return lt(()=>{const i=r.length;if(!this.hardwareClipping&&i>0){const s=Rl(r);ms(i,({i:a})=>{const l=s.element(a);Lr.dot(l.xyz).greaterThan(l.w).discard()})}const o=e.length;if(o>0){const s=Rl(e),a=h4(!0).toVar("clipped");ms(o,({i:l})=>{const c=s.element(l);a.assign(Lr.dot(c.xyz).greaterThan(c.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,r){const i=e.length;return r.enableHardwareClipping(i),lt(()=>{const o=Rl(e),s=gxe(r.getClipDistance());ms(i,({i:a})=>{const l=o.element(a),c=Lr.dot(l.xyz).sub(l.w).negate();s.element(a).assign(c)})})()}}Go.ALPHA_TO_COVERAGE="alphaToCoverage";Go.DEFAULT="default";Go.HARDWARE="hardware";const vxe=()=>nt(new Go),yxe=()=>nt(new Go(Go.ALPHA_TO_COVERAGE)),xxe=()=>nt(new Go(Go.HARDWARE)),_xe=.05,GI=lt(([n])=>hc(sn(1e4,ds(sn(17,n.x).add(sn(.1,n.y)))).mul(Pi(.1,Fo(ds(sn(13,n.y).add(n.x))))))),HI=lt(([n])=>GI(pt(GI(n.xy),n.z))),bxe=lt(([n])=>{const e=Ji(Xl(M4(n.xyz)),Xl(R4(n.xyz))),r=Ae(1).div(Ae(_xe).mul(e)).toVar("pixScale"),i=pt(Rm(nu(Ba(r))),Rm(cR(Ba(r)))),o=pt(HI(nu(i.x.mul(n.xyz))),HI(nu(i.y.mul(n.xyz)))),s=hc(Ba(r)),a=Pi(sn(s.oneMinus(),o.x),sn(s,o.y)),l=Nm(s,s.oneMinus()),c=Ie(a.mul(a).div(sn(2,l).mul($i(1,l))),a.sub(sn(.5,l)).div($i(1,l)),$i(1,$i(1,a).mul($i(1,a)).div(sn(2,l).mul($i(1,l))))),u=a.lessThan(l.oneMinus()).select(a.lessThan(l).select(c.x,c.y),c.z);return Ka(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class Tr extends gi{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.forceSinglePass=!1,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.shadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+s4(this)}build(e){this.setup(e)}setupObserver(e){return new Ege(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e);const r=e.renderer,i=r.getRenderTarget();e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let o;const s=this.setupClipping(e);if(this.depthWrite===!0&&(i!==null?i.depthBuffer===!0&&this.setupDepth(e):r.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const a=this.setupLighting(e);s!==null&&e.stack.add(s);const l=Yt(a,Sn.a).max(0);if(o=this.setupOutput(e,l),dve.assign(o),this.outputNode!==null&&(o=this.outputNode),i!==null){const c=r.getMRT(),u=this.mrtNode;c!==null?(o=c,u!==null&&(o=c.merge(u))):u!==null&&(o=u)}}else{let a=this.fragmentNode;a.isOutputStructNode!==!0&&(a=Yt(a)),o=this.setupOutput(e,a)}e.stack.outputNode=o,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:r,intersectionPlanes:i}=e.clippingContext;let o=null;if(r.length>0||i.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?o=yxe():e.stack.add(vxe())}return o}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const r=e.clippingContext.unionPlanes.length;r>0&&r<=8&&e.isAvailable("clipDistance")&&(e.stack.add(xxe()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:r,camera:i}=e;let o=this.depthNode;if(o===null){const s=r.getMRT();s&&s.has("depth")?o=s.get("depth"):r.logarithmicDepthBuffer===!0&&(i.isPerspectiveCamera?o=n5(Lr.z,Uc,Bc):o=Tp(Lr.z,Uc,Bc))}o!==null&&i5.assign(o).append()}setupPosition(e){const{object:r}=e,i=r.geometry;if(e.addStack(),(i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&sxe(r).append(),r.isSkinnedMesh===!0&&txe(r).append(),this.displacementMap){const s=Al("displacementMap","texture"),a=Al("displacementScale","float"),l=Al("displacementBias","float");ii.addAssign(Js.normalize().mul(s.x.mul(a).add(l)))}r.isBatchedMesh&&Jye(r).append(),r.isInstancedMesh&&r.instanceMatrix&&r.instanceMatrix.isInstancedBufferAttribute===!0&&Qye(r).append(),this.positionNode!==null&&ii.assign(this.positionNode),this.setupHardwareClipping(e);const o=Q4();return e.context.vertex=e.removeStack(),e.context.mvp=o,o}setupDiffuseColor({object:e,geometry:r}){let i=this.colorNode?Yt(this.colorNode):vye;this.vertexColors===!0&&r.hasAttribute("color")&&(i=Yt(i.xyz.mul(Ya("color","vec3")),i.a)),e.instanceColor&&(i=By("vec3","vInstanceColor").mul(i)),e.isBatchedMesh&&e._colorsTexture&&(i=By("vec3","vBatchColor").mul(i)),Sn.assign(i);const o=this.opacityNode?Ae(this.opacityNode):K4;if(Sn.a.assign(Sn.a.mul(o)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?Ae(this.alphaTestNode):gye;Sn.a.lessThanEqual(s).discard()}this.alphaHash===!0&&Sn.a.lessThan(bxe(ii)).discard(),this.transparent===!1&&this.blending===ko&&this.alphaToCoverage===!1&&Sn.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Ie(0):Sn.rgb}setupNormal(){return this.normalNode?Ie(this.normalNode):Cye}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Al("envMap","cubeTexture"):Al("envMap","texture")),e}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new uxe(Y4)),r}setupLights(e){const r=[],i=this.setupEnvironment(e);i&&i.isLightingNode&&r.push(i);const o=this.setupLightMap(e);if(o&&o.isLightingNode&&r.push(o),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:jye;r.push(new axe(a))}let s=this.lightsNode||e.lightsNode;return r.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...r])),s}setupLightingModel(){}setupLighting(e){const{material:r}=e,{backdropNode:i,backdropAlphaNode:o,emissiveNode:s}=this,l=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let c=this.setupOutgoingLight(e);if(l&&l.getScope().hasLights){const u=this.setupLightingModel(e);c=cxe(l,u,i,o)}else i!==null&&(c=Ie(o!==null?jn(c,i,o):i));return(s&&s.isNode===!0||r.emissive&&r.emissive.isColor===!0)&&(OI.assign(Ie(s||xye)),c=c.add(OI)),c}setupOutput(e,r){if(this.fog===!0){const i=e.fogNode;i&&(r=Yt(i.mix(r.rgb,i.colorNode),r.a))}return r}setDefaultValues(e){for(const i in e){const o=e[i];this[i]===void 0&&(this[i]=o,o&&o.clone&&(this[i]=o.clone()))}const r=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in r)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&r[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,r[i])}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});const i=gi.prototype.toJSON.call(this,e),o=Ly(this);i.inputNodes={};for(const{property:a,childNode:l}of o)i.inputNodes[a]=l.toJSON(e).uuid;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(r){const a=s(e.textures),l=s(e.images),c=s(e.nodes);a.length>0&&(i.textures=a),l.length>0&&(i.images=l),c.length>0&&(i.nodes=c)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowPositionNode=e.shadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const Sxe=new a_;class wxe extends Tr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(Sxe),this.setValues(e)}}const Cxe=new Yce;class Exe extends Tr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.setDefaultValues(Cxe),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?Ae(this.offsetNodeNode):Gye,r=this.dashScaleNode?Ae(this.dashScaleNode):zye,i=this.dashSizeNode?Ae(this.dashSizeNode):kye,o=this.dashSizeNode?Ae(this.dashGapNode):Vye;BS.assign(i),II.assign(o);const s=nl(Ya("lineDistance").mul(r));(e?s.add(e):s).mod(BS.add(II)).greaterThan(BS).discard()}}const Txe=n=>nt(n).mul(.5).add(.5),Mxe=new Wce;class Rxe extends Tr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(Mxe),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?Ae(this.opacityNode):K4;Sn.assign(Yt(Txe(Sr),e))}}class Axe extends Mr{static get type(){return"EquirectUVNode"}constructor(e=V4){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,r=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return pt(r,i)}}const o5=Be(Axe);class s5 extends hk{constructor(e=1,r={}){super(e,r),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,r){const i=r.minFilter,o=r.generateMipmaps;r.generateMipmaps=!0,this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s=new Mu(5,5,5),a=o5(V4),l=new Tr;l.colorNode=gn(r,a,0),l.side=er,l.blending=Ri;const c=new Br(s,l),u=new FM;u.add(c),r.minFilter===Vi&&(r.minFilter=Ur);const d=new fk(1,10,this),f=e.getMRT();return e.setMRT(null),d.update(e,u),e.setMRT(f),r.minFilter=i,r.currentGenerateMipmaps=o,c.geometry.dispose(),c.material.dispose(),this}}const Mp=new WeakMap;class Nxe extends Mr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Im();const r=new o_;r.isRenderTargetTexture=!0,this._defaultTexture=r,this.updateBeforeType=on.RENDER}updateBefore(e){const{renderer:r,material:i}=e,o=this.envNode;if(o.isTextureNode||o.isMaterialReferenceNode){const s=o.isTextureNode?o.value:i[o.property];if(s&&s.isTexture){const a=s.mapping;if(a===tc||a===nc){if(Mp.has(s)){const l=Mp.get(s);jI(l,s.mapping),this._cubeTexture=l}else{const l=s.image;if(Pxe(l)){const c=new s5(l.height);c.fromEquirectangularTexture(r,s),jI(c.texture,s.mapping),this._cubeTexture=c.texture,Mp.set(s,c.texture),s.addEventListener("dispose",a5)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function Pxe(n){return n==null?!1:n.height>0}function a5(n){const e=n.target;e.removeEventListener("dispose",a5);const r=Mp.get(e);r!==void 0&&(Mp.delete(e),r.dispose())}function jI(n,e){e===tc?n.mapping=qo:e===nc&&(n.mapping=Xo)}const l5=Be(Nxe);class xR extends rh{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=l5(this.envNode)}}class Oxe extends rh{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const r=Ae(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(r)}}class b_{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class c5 extends b_{constructor(){super()}indirect(e,r,i){const o=e.ambientOcclusion,s=e.reflectedLight,a=i.context.irradianceLightMap;s.indirectDiffuse.assign(Yt(0)),a?s.indirectDiffuse.addAssign(a):s.indirectDiffuse.addAssign(Yt(1,1,1,0)),s.indirectDiffuse.mulAssign(o),s.indirectDiffuse.mulAssign(Sn.rgb)}finish(e,r,i){const o=i.material,s=e.outgoingLight,a=i.context.environment;if(a)switch(o.combine){case og:s.rgb.assign(jn(s.rgb,s.rgb.mul(a.rgb),T0.mul($S)));break;case Yz:s.rgb.assign(jn(s.rgb,a.rgb,T0.mul($S)));break;case Qz:s.rgb.addAssign(a.rgb.mul(T0.mul($S)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",o.combine);break}}}const Ixe=new Zf;class Dxe extends Tr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Ixe),this.setValues(e)}setupNormal(){return Es}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new xR(r):null}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new Oxe(Y4)),r}setupOutgoingLight(){return Sn.rgb}setupLightingModel(){return new c5}}const Lm=lt(({f0:n,f90:e,dotVH:r})=>{const i=r.mul(-5.55473).sub(6.98316).mul(r).exp2();return n.mul(i.oneMinus()).add(e.mul(i))}),Df=lt(n=>n.diffuseColor.mul(1/Math.PI)),Lxe=()=>Ae(.25),Fxe=lt(({dotNH:n})=>JC.mul(Ae(.5)).add(1).mul(Ae(1/Math.PI)).mul(n.pow(JC))),Uxe=lt(({lightDirection:n})=>{const e=n.add(ir).normalize(),r=Sr.dot(e).clamp(),i=ir.dot(e).clamp(),o=Lm({f0:uo,f90:1,dotVH:i}),s=Lxe(),a=Fxe({dotNH:r});return o.mul(s).mul(a)});class u5 extends c5{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const s=Sr.dot(e).clamp().mul(r);i.directDiffuse.addAssign(s.mul(Df({diffuseColor:Sn.rgb}))),this.specular===!0&&i.directSpecular.addAssign(s.mul(Uxe({lightDirection:e})).mul(T0))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(Df({diffuseColor:Sn}))),i.indirectDiffuse.mulAssign(e)}}const Bxe=new VM;class $xe extends Tr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Bxe),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new xR(r):null}setupLightingModel(){return new u5(!1)}}const zxe=new Hce;class kxe extends Tr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(zxe),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new xR(r):null}setupLightingModel(){return new u5}setupVariants(){const e=(this.shininessNode?Ae(this.shininessNode):yye).max(1e-4);JC.assign(e);const r=this.specularNode||_ye;uo.assign(r)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const Vxe=lt(n=>{if(n.geometry.hasAttribute("normal")===!1)return Ae(0);const e=Es.dFdx().abs().max(Es.dFdy().abs());return e.x.max(e.y).max(e.z)}),d5=lt(n=>{const{roughness:e}=n,r=Vxe();let i=e.max(.0525);return i=i.add(r),i=i.min(1),i}),Gxe=lt(({alpha:n,dotNL:e,dotNV:r})=>{const i=n.pow2(),o=e.mul(i.add(i.oneMinus().mul(r.pow2())).sqrt()),s=r.mul(i.add(i.oneMinus().mul(e.pow2())).sqrt());return Xa(.5,o.add(s).max(Ive))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),Hxe=lt(({alphaT:n,alphaB:e,dotTV:r,dotBV:i,dotTL:o,dotBL:s,dotNV:a,dotNL:l})=>{const c=l.mul(Ie(n.mul(r),e.mul(i),a).length()),u=a.mul(Ie(n.mul(o),e.mul(s),l).length());return Xa(.5,c.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),jxe=lt(({alpha:n,dotNH:e})=>{const r=n.pow2(),i=e.pow2().mul(r.oneMinus()).oneMinus();return r.div(i.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),Wxe=Ae(1/Math.PI),qxe=lt(({alphaT:n,alphaB:e,dotNH:r,dotTH:i,dotBH:o})=>{const s=n.mul(e),a=Ie(e.mul(i),n.mul(o),s.mul(r)),l=a.dot(a),c=s.div(l);return Wxe.mul(s.mul(c.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),WI=lt(n=>{const{lightDirection:e,f0:r,f90:i,roughness:o,f:s,USE_IRIDESCENCE:a,USE_ANISOTROPY:l}=n,c=n.normalView||Sr,u=o.pow2(),d=e.add(ir).normalize(),f=c.dot(e).clamp(),h=c.dot(ir).clamp(),p=c.dot(d).clamp(),g=ir.dot(d).clamp();let y=Lm({f0:r,f90:i,dotVH:g}),v,m;if(PI(a)&&(y=aR.mix(y,s)),PI(l)){const x=w0.dot(e),b=w0.dot(ir),S=w0.dot(d),w=Wd.dot(e),C=Wd.dot(ir),E=Wd.dot(d);v=Hxe({alphaT:ZC,alphaB:u,dotTV:b,dotBV:C,dotTL:x,dotBL:w,dotNV:h,dotNL:f}),m=qxe({alphaT:ZC,alphaB:u,dotNH:p,dotTH:S,dotBH:E})}else v=Gxe({alpha:u,dotNL:f,dotNV:h}),m=jxe({alpha:u,dotNH:p});return y.mul(v).mul(m)}),f5=lt(({roughness:n,dotNV:e})=>{const r=Yt(-1,-.0275,-.572,.022),i=Yt(1,.0425,1.04,-.04),o=n.mul(r).add(i),s=o.x.mul(o.x).min(e.mul(-9.28).exp2()).mul(o.x).add(o.y);return pt(-1.04,1.04).mul(s).add(o.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),h5=lt(n=>{const{dotNV:e,specularColor:r,specularF90:i,roughness:o}=n,s=f5({dotNV:e,roughness:o});return r.mul(s.x).add(i.mul(s.y))}),Xxe=lt(({f:n,f90:e,dotVH:r})=>{const i=r.oneMinus().saturate(),o=i.mul(i),s=i.mul(o,o).clamp(0,.9999);return n.sub(Ie(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),Kxe=lt(({roughness:n,dotNH:e})=>{const r=n.pow2(),i=Ae(1).div(r),s=e.pow2().oneMinus().max(.0078125);return Ae(2).add(i).mul(s.pow(i.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),Yxe=lt(({dotNV:n,dotNL:e})=>Ae(1).div(Ae(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),Qxe=lt(({lightDirection:n})=>{const e=n.add(ir).normalize(),r=Sr.dot(n).clamp(),i=Sr.dot(ir).clamp(),o=Sr.dot(e).clamp(),s=Kxe({roughness:sR,dotNH:o}),a=Yxe({dotNV:i,dotNL:r});return Rd.mul(s).mul(a)}),Zxe=lt(({N:n,V:e,roughness:r})=>{const s=.0078125,a=n.dot(e).saturate(),l=pt(r,a.oneMinus().sqrt());return l.assign(l.mul(.984375).add(s)),l}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),Jxe=lt(({f:n})=>{const e=n.length();return Ji(e.mul(e).add(n.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),Rv=lt(({v1:n,v2:e})=>{const r=n.dot(e),i=r.abs().toVar(),o=i.mul(.0145206).add(.4965155).mul(i).add(.8543985).toVar(),s=i.add(4.1616724).mul(i).add(3.417594).toVar(),a=o.div(s),l=r.greaterThan(0).select(a,Ji(r.mul(r).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return n.cross(e).mul(l)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),qI=lt(({N:n,V:e,P:r,mInv:i,p0:o,p1:s,p2:a,p3:l})=>{const c=s.sub(o).toVar(),u=l.sub(o).toVar(),d=c.cross(u),f=Ie().toVar();return Er(d.dot(r.sub(o)).greaterThanEqual(0),()=>{const h=e.sub(n.mul(e.dot(n))).normalize(),p=n.cross(h).negate(),g=i.mul(Ni(h,p,n).transpose()).toVar(),y=g.mul(o.sub(r)).normalize().toVar(),v=g.mul(s.sub(r)).normalize().toVar(),m=g.mul(a.sub(r)).normalize().toVar(),x=g.mul(l.sub(r)).normalize().toVar(),b=Ie(0).toVar();b.addAssign(Rv({v1:y,v2:v})),b.addAssign(Rv({v1:v,v2:m})),b.addAssign(Rv({v1:m,v2:x})),b.addAssign(Rv({v1:x,v2:y})),f.assign(Ie(Jxe({f:b})))}),f}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),S_=1/6,p5=n=>sn(S_,sn(n,sn(n,n.negate().add(3)).sub(3)).add(1)),nE=n=>sn(S_,sn(n,sn(n,sn(3,n).sub(6))).add(4)),m5=n=>sn(S_,sn(n,sn(n,sn(-3,n).add(3)).add(3)).add(1)),rE=n=>sn(S_,m_(n,3)),XI=n=>p5(n).add(nE(n)),KI=n=>m5(n).add(rE(n)),YI=n=>Pi(-1,nE(n).div(p5(n).add(nE(n)))),QI=n=>Pi(1,rE(n).div(m5(n).add(rE(n)))),ZI=(n,e,r)=>{const i=n.uvNode,o=sn(i,e.zw).add(.5),s=nu(o),a=hc(o),l=XI(a.x),c=KI(a.x),u=YI(a.x),d=QI(a.x),f=YI(a.y),h=QI(a.y),p=pt(s.x.add(u),s.y.add(f)).sub(.5).mul(e.xy),g=pt(s.x.add(d),s.y.add(f)).sub(.5).mul(e.xy),y=pt(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),v=pt(s.x.add(d),s.y.add(h)).sub(.5).mul(e.xy),m=XI(a.y).mul(Pi(l.mul(n.uv(p).level(r)),c.mul(n.uv(g).level(r)))),x=KI(a.y).mul(Pi(l.mul(n.uv(y).level(r)),c.mul(n.uv(v).level(r))));return m.add(x)},e_e=lt(([n,e=Ae(3)])=>{const r=pt(n.size(cr(e))),i=pt(n.size(cr(e.add(1)))),o=Xa(1,r),s=Xa(1,i),a=ZI(n,Yt(o,r),nu(e)),l=ZI(n,Yt(s,i),cR(e));return hc(e).mix(a,l)}),JI=lt(([n,e,r,i,o])=>{const s=Ie(I4(e.negate(),Am(n),Xa(1,i))),a=Ie(Xl(o[0].xyz),Xl(o[1].xyz),Xl(o[2].xyz));return Am(s).mul(r.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),t_e=lt(([n,e])=>n.mul(Ka(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),n_e=e5(),r_e=e5(),eD=lt(([n,e,r],{material:i})=>{const s=(i.side==er?n_e:r_e).uv(n),a=Ba(tE.x).mul(t_e(e,r));return e_e(s,a)}),tD=lt(([n,e,r])=>(Er(r.notEqual(0),()=>{const i=T4(e).negate().div(r);return E4(i.negate().mul(n))}),Ie(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),i_e=lt(([n,e,r,i,o,s,a,l,c,u,d,f,h,p,g])=>{let y,v;if(g){y=Yt().toVar(),v=Ie().toVar();const w=d.sub(1).mul(g.mul(.025)),C=Ie(d.sub(w),d,d.add(w));ms({start:0,end:3},({i:E})=>{const M=C.element(E),T=JI(n,e,f,M,l),R=a.add(T),P=u.mul(c.mul(Yt(R,1))),D=pt(P.xy.div(P.w)).toVar();D.addAssign(1),D.divAssign(2),D.assign(pt(D.x,D.y.oneMinus()));const L=eD(D,r,M);y.element(E).assign(L.element(E)),y.a.addAssign(L.a),v.element(E).assign(i.element(E).mul(tD(Xl(T),h,p).element(E)))}),y.a.divAssign(3)}else{const w=JI(n,e,f,d,l),C=a.add(w),E=u.mul(c.mul(Yt(C,1))),M=pt(E.xy.div(E.w)).toVar();M.addAssign(1),M.divAssign(2),M.assign(pt(M.x,M.y.oneMinus())),y=eD(M,r,d),v=i.mul(tD(Xl(w),h,p))}const m=v.rgb.mul(y.rgb),x=n.dot(e).clamp(),b=Ie(h5({dotNV:x,specularColor:o,specularF90:s,roughness:r})),S=v.r.add(v.g,v.b).div(3);return Yt(b.oneMinus().mul(m),y.a.oneMinus().mul(S).oneMinus())}),o_e=Ni(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),s_e=n=>{const e=n.sqrt();return Ie(1).add(e).div(Ie(1).sub(e))},nD=(n,e)=>n.sub(e).div(n.add(e)).pow2(),a_e=(n,e)=>{const r=n.mul(2*Math.PI*1e-9),i=Ie(54856e-17,44201e-17,52481e-17),o=Ie(1681e3,1795300,2208400),s=Ie(43278e5,93046e5,66121e5),a=Ae(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(r.mul(2239900).add(e.x).cos()).mul(r.pow2().mul(-45282e5).exp());let l=i.mul(s.mul(2*Math.PI).sqrt()).mul(o.mul(r).add(e).cos()).mul(r.pow2().negate().mul(s).exp());return l=Ie(l.x.add(a),l.y,l.z).div(10685e-11),o_e.mul(l)},l_e=lt(({outsideIOR:n,eta2:e,cosTheta1:r,thinFilmThickness:i,baseF0:o})=>{const s=jn(n,e,vu(0,.03,i)),l=n.div(s).pow2().mul(r.pow2().oneMinus()).oneMinus();Er(l.lessThan(0),()=>Ie(1));const c=l.sqrt(),u=nD(s,n),d=Lm({f0:u,f90:1,dotVH:r}),f=d.oneMinus(),h=s.lessThan(n).select(Math.PI,0),p=Ae(Math.PI).sub(h),g=s_e(o.clamp(0,.9999)),y=nD(g,s.toVec3()),v=Lm({f0:y,f90:1,dotVH:c}),m=Ie(g.x.lessThan(s).select(Math.PI,0),g.y.lessThan(s).select(Math.PI,0),g.z.lessThan(s).select(Math.PI,0)),x=s.mul(i,c,2),b=Ie(p).add(m),S=d.mul(v).clamp(1e-5,.9999),w=S.sqrt(),C=f.pow2().mul(v).div(Ie(1).sub(S)),M=d.add(C).toVar(),T=C.sub(f).toVar();return ms({start:1,end:2,condition:"<=",name:"m"},({m:R})=>{T.mulAssign(w);const P=a_e(Ae(R).mul(x),Ae(R).mul(b)).mul(2);M.addAssign(T.mul(P))}),M.max(Ie(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),c_e=lt(({normal:n,viewDir:e,roughness:r})=>{const i=n.dot(e).saturate(),o=r.pow2(),s=Hi(r.lessThan(.25),Ae(-339.2).mul(o).add(Ae(161.4).mul(r)).sub(25.9),Ae(-8.48).mul(o).add(Ae(14.3).mul(r)).sub(9.95)),a=Hi(r.lessThan(.25),Ae(44).mul(o).sub(Ae(23.7).mul(r)).add(3.26),Ae(1.97).mul(o).sub(Ae(3.27).mul(r)).add(.72));return Hi(r.lessThan(.25),0,Ae(.1).mul(r).sub(.025)).add(s.mul(i).add(a).exp()).mul(1/Math.PI).saturate()}),VS=Ie(.04),GS=Ae(1);class g5 extends b_{constructor(e=!1,r=!1,i=!1,o=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=r,this.iridescence=i,this.anisotropy=o,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Ie().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Ie().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Ie().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Ie().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Ie().toVar("sheenSpecularIndirect")),this.iridescence===!0){const r=Sr.dot(ir).clamp();this.iridescenceFresnel=l_e({outsideIOR:Ae(1),eta2:v4,cosTheta1:r,thinFilmThickness:y4,baseF0:uo}),this.iridescenceF0=Xxe({f:this.iridescenceFresnel,f90:1,dotVH:r})}if(this.transmission===!0){const r=Om,i=H0e.sub(Om).normalize(),o=pR;e.backdrop=i_e(o,i,Ea,Sn,uo,ky,r,yu,rl,Gy,C0,x4,b4,_4,this.dispersion?S4:null),e.backdropAlpha=eE,Sn.a.mulAssign(jn(1,e.backdrop.a,eE))}}computeMultiscattering(e,r,i){const o=Sr.dot(ir).clamp(),s=f5({roughness:Ea,dotNV:o}),l=(this.iridescenceF0?aR.mix(uo,this.iridescenceF0):uo).mul(s.x).add(i.mul(s.y)),u=s.x.add(s.y).oneMinus(),d=uo.add(uo.oneMinus().mul(.047619)),f=l.mul(d).div(u.mul(d).oneMinus());e.addAssign(l),r.addAssign(f.mul(u))}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const s=Sr.dot(e).clamp().mul(r);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(Qxe({lightDirection:e}))),this.clearcoat===!0){const l=np.dot(e).clamp().mul(r);this.clearcoatSpecularDirect.addAssign(l.mul(WI({lightDirection:e,f0:VS,f90:GS,roughness:zy,normalView:np})))}i.directDiffuse.addAssign(s.mul(Df({diffuseColor:Sn.rgb}))),i.directSpecular.addAssign(s.mul(WI({lightDirection:e,f0:uo,f90:1,roughness:Ea,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:r,halfWidth:i,halfHeight:o,reflectedLight:s,ltc_1:a,ltc_2:l}){const c=r.add(i).sub(o),u=r.sub(i).sub(o),d=r.sub(i).add(o),f=r.add(i).add(o),h=Sr,p=ir,g=Lr.toVar(),y=Zxe({N:h,V:p,roughness:Ea}),v=a.uv(y).toVar(),m=l.uv(y).toVar(),x=Ni(Ie(v.x,0,v.y),Ie(0,1,0),Ie(v.z,0,v.w)).toVar(),b=uo.mul(m.x).add(uo.oneMinus().mul(m.y)).toVar();s.directSpecular.addAssign(e.mul(b).mul(qI({N:h,V:p,P:g,mInv:x,p0:c,p1:u,p2:d,p3:f}))),s.directDiffuse.addAssign(e.mul(Sn).mul(qI({N:h,V:p,P:g,mInv:Ni(1,0,0,0,1,0,0,0,1),p0:c,p1:u,p2:d,p3:f})))}indirect(e,r,i){this.indirectDiffuse(e,r,i),this.indirectSpecular(e,r,i),this.ambientOcclusion(e,r,i)}indirectDiffuse({irradiance:e,reflectedLight:r}){r.indirectDiffuse.addAssign(e.mul(Df({diffuseColor:Sn})))}indirectSpecular({radiance:e,iblIrradiance:r,reflectedLight:i}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(r.mul(Rd,c_e({normal:Sr,viewDir:ir,roughness:sR}))),this.clearcoat===!0){const u=np.dot(ir).clamp(),d=h5({dotNV:u,specularColor:VS,specularF90:GS,roughness:zy});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(d))}const o=Ie().toVar("singleScattering"),s=Ie().toVar("multiScattering"),a=r.mul(1/Math.PI);this.computeMultiscattering(o,s,ky);const l=o.add(s),c=Sn.mul(l.r.max(l.g).max(l.b).oneMinus());i.indirectSpecular.addAssign(e.mul(o)),i.indirectSpecular.addAssign(s.mul(a)),i.indirectDiffuse.addAssign(c.mul(a))}ambientOcclusion({ambientOcclusion:e,reflectedLight:r}){const o=Sr.dot(ir).clamp().add(e),s=Ea.mul(-16).oneMinus().negate().exp2(),a=e.sub(o.pow(s).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),r.indirectDiffuse.mulAssign(e),r.indirectSpecular.mulAssign(a)}finish(e){const{outgoingLight:r}=e;if(this.clearcoat===!0){const i=np.dot(ir).clamp(),o=Lm({dotVH:i,f0:VS,f90:GS}),s=r.mul(QC.mul(o).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(QC));r.assign(s)}if(this.sheen===!0){const i=Rd.r.max(Rd.g).max(Rd.b).mul(.157).oneMinus(),o=r.mul(i).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);r.assign(o)}}}const rD=Ae(1),iE=Ae(-2),Av=Ae(.8),HS=Ae(-1),Nv=Ae(.4),jS=Ae(2),Pv=Ae(.305),WS=Ae(3),iD=Ae(.21),u_e=Ae(4),oD=Ae(4),d_e=Ae(16),f_e=lt(([n])=>{const e=Ie(Fo(n)).toVar(),r=Ae(-1).toVar();return Er(e.x.greaterThan(e.z),()=>{Er(e.x.greaterThan(e.y),()=>{r.assign(Hi(n.x.greaterThan(0),0,3))}).Else(()=>{r.assign(Hi(n.y.greaterThan(0),1,4))})}).Else(()=>{Er(e.z.greaterThan(e.y),()=>{r.assign(Hi(n.z.greaterThan(0),2,5))}).Else(()=>{r.assign(Hi(n.y.greaterThan(0),1,4))})}),r}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),h_e=lt(([n,e])=>{const r=pt().toVar();return Er(e.equal(0),()=>{r.assign(pt(n.z,n.y).div(Fo(n.x)))}).ElseIf(e.equal(1),()=>{r.assign(pt(n.x.negate(),n.z.negate()).div(Fo(n.y)))}).ElseIf(e.equal(2),()=>{r.assign(pt(n.x.negate(),n.y).div(Fo(n.z)))}).ElseIf(e.equal(3),()=>{r.assign(pt(n.z.negate(),n.y).div(Fo(n.x)))}).ElseIf(e.equal(4),()=>{r.assign(pt(n.x.negate(),n.z).div(Fo(n.y)))}).Else(()=>{r.assign(pt(n.x,n.y).div(Fo(n.z)))}),sn(.5,r.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),p_e=lt(([n])=>{const e=Ae(0).toVar();return Er(n.greaterThanEqual(Av),()=>{e.assign(rD.sub(n).mul(HS.sub(iE)).div(rD.sub(Av)).add(iE))}).ElseIf(n.greaterThanEqual(Nv),()=>{e.assign(Av.sub(n).mul(jS.sub(HS)).div(Av.sub(Nv)).add(HS))}).ElseIf(n.greaterThanEqual(Pv),()=>{e.assign(Nv.sub(n).mul(WS.sub(jS)).div(Nv.sub(Pv)).add(jS))}).ElseIf(n.greaterThanEqual(iD),()=>{e.assign(Pv.sub(n).mul(u_e.sub(WS)).div(Pv.sub(iD)).add(WS))}).Else(()=>{e.assign(Ae(-2).mul(Ba(sn(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),m_e=lt(([n,e])=>{const r=n.toVar();r.assign(sn(2,r).sub(1));const i=Ie(r,1).toVar();return Er(e.equal(0),()=>{i.assign(i.zyx)}).ElseIf(e.equal(1),()=>{i.assign(i.xzy),i.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{i.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{i.assign(i.zyx),i.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{i.assign(i.xzy),i.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{i.z.mulAssign(-1)}),i}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),g_e=lt(([n,e,r,i,o,s])=>{const a=Ae(r),l=Ie(e),c=Ka(p_e(a),iE,s),u=hc(c),d=nu(c),f=Ie(oE(n,l,d,i,o,s)).toVar();return Er(u.notEqual(0),()=>{const h=Ie(oE(n,l,d.add(1),i,o,s)).toVar();f.assign(jn(f,h,u))}),f}),oE=lt(([n,e,r,i,o,s])=>{const a=Ae(r).toVar(),l=Ie(e),c=Ae(f_e(l)).toVar(),u=Ae(Ji(oD.sub(a),0)).toVar();a.assign(Ji(a,oD));const d=Ae(Rm(a)).toVar(),f=pt(h_e(l,c).mul(d.sub(2)).add(1)).toVar();return Er(c.greaterThan(2),()=>{f.y.addAssign(d),c.subAssign(3)}),f.x.addAssign(c.mul(d)),f.x.addAssign(u.mul(sn(3,d_e))),f.y.addAssign(sn(4,Rm(s).sub(d))),f.x.mulAssign(i),f.y.mulAssign(o),n.uv(f).grad(pt(),pt())}),qS=lt(({envMap:n,mipInt:e,outputDirection:r,theta:i,axis:o,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:l})=>{const c=El(i),u=r.mul(c).add(o.cross(r).mul(ds(i))).add(o.mul(o.dot(r).mul(c.oneMinus())));return oE(n,u,e,s,a,l)}),v_e=lt(({n,latitudinal:e,poleAxis:r,outputDirection:i,weights:o,samples:s,dTheta:a,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})=>{const h=Ie(Hi(e,r,P4(r,i))).toVar();Er(C4(h.equals(Ie(0))),()=>{h.assign(Ie(i.z,0,i.x.negate()))}),h.assign(Am(h));const p=Ie().toVar();return p.addAssign(o.element(cr(0)).mul(qS({theta:0,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),ms({start:cr(1),end:n},({i:g})=>{Er(g.greaterThanEqual(s),()=>{rxe()});const y=Ae(a.mul(Ae(g))).toVar();p.addAssign(o.element(g).mul(qS({theta:y.mul(-1),axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),p.addAssign(o.element(g).mul(qS({theta:y,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})))}),Yt(p,1)});let Hy=null;const sD=new WeakMap;function y_e(n){const e=Math.log2(n)-2,r=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:r,maxMip:e}}function x_e(n){let e=sD.get(n);if((e!==void 0?e.pmremVersion:-1)!==n.pmremVersion){const i=n.image;if(n.isCubeTexture)if(b_e(i))e=Hy.fromCubemap(n,e);else return null;else if(S_e(i))e=Hy.fromEquirectangular(n,e);else return null;e.pmremVersion=n.pmremVersion,sD.set(n,e)}return e.texture}class __e extends Mr{static get type(){return"PMREMNode"}constructor(e,r=null,i=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=r,this.levelNode=i,this._generator=null;const o=new $r;o.isRenderTargetTexture=!0,this._texture=gn(o),this._width=Xt(0),this._height=Xt(0),this._maxMip=Xt(0),this.updateBeforeType=on.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const r=y_e(e.image.height);this._texture.value=e,this._width.value=r.texelWidth,this._height.value=r.texelHeight,this._maxMip.value=r.maxMip}updateBefore(){let e=this._pmrem;const r=e?e.pmremVersion:-1,i=this._value;r!==i.pmremVersion&&(i.isPMREMTexture===!0?e=i:e=x_e(i),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){Hy===null&&(Hy=e.createPMREMGenerator()),this.updateBefore(e);let r=this.uvNode;r===null&&e.context.getUV&&(r=e.context.getUV(this));const i=this.value;e.renderer.coordinateSystem===$o&&i.isPMREMTexture!==!0&&i.isRenderTargetTexture===!0&&(r=Ie(r.x.negate(),r.yz));let o=this.levelNode;return o===null&&e.context.getTextureLevel&&(o=e.context.getTextureLevel(this)),g_e(this._texture,r,o,this._width,this._height,this._maxMip)}}function b_e(n){if(n==null)return!1;let e=0;const r=6;for(let i=0;i<r;i++)n[i]!==void 0&&e++;return e===r}function S_e(n){return n==null?!1:n.height>0}const v5=Be(__e),aD=new WeakMap;class w_e extends rh{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:r}=e;let i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const p=i.isTextureNode?i.value:r[i.property];let g=aD.get(p);g===void 0&&(g=v5(p),aD.set(p,g)),i=g}const s=r.envMap?Nn("envMapIntensity","float",e.material):Nn("environmentIntensity","float",e.scene),l=r.useAnisotropy===!0||r.anisotropy>0?cye:Sr,c=i.context(lD(Ea,l)).mul(s),u=i.context(C_e(pR)).mul(Math.PI).mul(s),d=E0(c),f=E0(u);e.context.radiance.addAssign(d),e.context.iblIrradiance.addAssign(f);const h=e.context.lightingModel.clearcoatRadiance;if(h){const p=i.context(lD(zy,np)).mul(s),g=E0(p);h.addAssign(g)}}}const lD=(n,e)=>{let r=null;return{getUV:()=>(r===null&&(r=ir.negate().reflect(e),r=n.mul(n).mix(r,e).normalize(),r=r.transformDirection(rl)),r),getTextureLevel:()=>n}},C_e=n=>({getUV:()=>n,getTextureLevel:()=>Ae(1)}),E_e=new vk;class y5 extends Tr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(E_e),this.setValues(e)}setupEnvironment(e){let r=super.setupEnvironment(e);return r===null&&e.environmentNode&&(r=e.environmentNode),r?new w_e(r):null}setupLightingModel(){return new g5}setupSpecular(){const e=jn(Ie(.04),Sn.rgb,$y);uo.assign(e),ky.assign(1)}setupVariants(){const e=this.metalnessNode?Ae(this.metalnessNode):wye;$y.assign(e);let r=this.roughnessNode?Ae(this.roughnessNode):Sye;r=d5({roughness:r}),Ea.assign(r),this.setupSpecular(),Sn.assign(Yt(Sn.rgb.mul(e.oneMinus()),Sn.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const T_e=new Gce;class M_e extends y5{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(T_e),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?Ae(this.iorNode):Uye;C0.assign(e),uo.assign(jn(Nm(O4(C0.sub(1).div(C0.add(1))).mul(bye),Ie(1)).mul(zI),Sn.rgb,$y)),ky.assign(jn(zI,1,$y))}setupLightingModel(){return new g5(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const r=this.clearcoatNode?Ae(this.clearcoatNode):Eye,i=this.clearcoatRoughnessNode?Ae(this.clearcoatRoughnessNode):Tye;QC.assign(r),zy.assign(d5({roughness:i}))}if(this.useSheen){const r=this.sheenNode?Ie(this.sheenNode):Aye,i=this.sheenRoughnessNode?Ae(this.sheenRoughnessNode):Nye;Rd.assign(r),sR.assign(i)}if(this.useIridescence){const r=this.iridescenceNode?Ae(this.iridescenceNode):Oye,i=this.iridescenceIORNode?Ae(this.iridescenceIORNode):Iye,o=this.iridescenceThicknessNode?Ae(this.iridescenceThicknessNode):Dye;aR.assign(r),v4.assign(i),y4.assign(o)}if(this.useAnisotropy){const r=(this.anisotropyNode?pt(this.anisotropyNode):Pye).toVar();Nc.assign(r.length()),Er(Nc.equal(0),()=>{r.assign(pt(1,0))}).Else(()=>{r.divAssign(pt(Nc)),Nc.assign(Nc.saturate())}),ZC.assign(Nc.pow2().mix(Ea.pow2(),1)),w0.assign(rp[0].mul(r.x).add(rp[1].mul(r.y))),Wd.assign(rp[1].mul(r.x).sub(rp[0].mul(r.y)))}if(this.useTransmission){const r=this.transmissionNode?Ae(this.transmissionNode):Lye,i=this.thicknessNode?Ae(this.thicknessNode):Fye,o=this.attenuationDistanceNode?Ae(this.attenuationDistanceNode):Bye,s=this.attenuationColorNode?Ie(this.attenuationColorNode):$ye;if(eE.assign(r),x4.assign(i),_4.assign(o),b4.assign(s),this.useDispersion){const a=this.dispersionNode?Ae(this.dispersionNode):Hye;S4.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Ie(this.clearcoatNormalNode):Mye}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const R_e=lt(({normal:n,lightDirection:e,builder:r})=>{const i=n.dot(e),o=pt(i.mul(.5).add(.5),0);if(r.material.gradientMap){const s=Al("gradientMap","texture").context({getUV:()=>o});return Ie(s.r)}else{const s=o.fwidth().mul(.5);return jn(Ie(.7),Ie(1),vu(Ae(.7).sub(s.x),Ae(.7).add(s.x),o.x))}});class A_e extends b_{direct({lightDirection:e,lightColor:r,reflectedLight:i},o,s){const a=R_e({normal:G4,lightDirection:e,builder:s}).mul(r);i.directDiffuse.addAssign(a.mul(Df({diffuseColor:Sn.rgb})))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(Df({diffuseColor:Sn}))),i.indirectDiffuse.mulAssign(e)}}const N_e=new jce;class P_e extends Tr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(N_e),this.setValues(e)}setupLightingModel(){return new A_e}}class O_e extends Mr{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Ie(ir.z,0,ir.x.negate()).normalize(),r=ir.cross(e);return pt(e.dot(Sr),r.dot(Sr)).mul(.495).add(.5)}}const I_e=ct(O_e),D_e=new Kce;class L_e extends Tr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(D_e),this.setValues(e)}setupVariants(e){const r=I_e;let i;e.material.matcap?i=Al("matcap","texture").context({getUV:()=>r}):i=Ie(jn(.2,.8,r.y)),Sn.rgb.mulAssign(i.rgb)}}const F_e=new Ece;class U_e extends Tr{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(F_e),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}class B_e extends Mr{static get type(){return"RotateNode"}constructor(e,r){super(),this.positionNode=e,this.rotationNode=r}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:r,positionNode:i}=this;if(this.getNodeType(e)==="vec2"){const s=r.cos(),a=r.sin();return oR(s,a,a.negate(),s).mul(i)}else{const s=r,a=jd(Yt(1,0,0,0),Yt(0,El(s.x),ds(s.x).negate(),0),Yt(0,ds(s.x),El(s.x),0),Yt(0,0,0,1)),l=jd(Yt(El(s.y),0,ds(s.y),0),Yt(0,1,0,0),Yt(ds(s.y).negate(),0,El(s.y),0),Yt(0,0,0,1)),c=jd(Yt(El(s.z),ds(s.z).negate(),0,0),Yt(ds(s.z),El(s.z),0,0),Yt(0,0,1,0),Yt(0,0,0,1));return a.mul(l).mul(c).mul(Yt(i,1)).xyz}}}const $_e=Be(B_e),z_e=new xce;class k_e extends Tr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(z_e),this.setValues(e)}setupPosition({object:e,camera:r,context:i}){const o=this.sizeAttenuation,{positionNode:s,rotationNode:a,scaleNode:l}=this,c=ii;let u=y_.mul(Ie(s||0)),d=pt(yu[0].xyz.length(),yu[1].xyz.length());if(l!==null&&(d=d.mul(l)),!o)if(r.isPerspectiveCamera)d=d.mul(u.z.negate());else{const y=Ae(2).div(Gy.element(1).element(1));d=d.mul(y.mul(2))}let f=c.xy;if(e.center&&e.center.isVector2===!0){const y=S0e("center","vec2");f=f.sub(y.sub(.5))}f=f.mul(d);const h=Ae(a||Rye),p=$_e(f,h);u=Yt(u.xy.add(p),u.zw);const g=Gy.mul(u);return i.vertex=c,g}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}class V_e extends b_{constructor(){super(),this.shadowNode=Ae(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){Sn.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Sn.rgb)}}const G_e=new Vce;class H_e extends Tr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(G_e),this.setValues(e)}setupLightingModel(){return new V_e}}lt(({texture:n,uv:e})=>{const i=Ie().toVar();return Er(e.x.lessThan(1e-4),()=>{i.assign(Ie(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{i.assign(Ie(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{i.assign(Ie(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{i.assign(Ie(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{i.assign(Ie(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{i.assign(Ie(0,0,-1))}).Else(()=>{const s=n.uv(e.add(Ie(-.01,0,0))).r.sub(n.uv(e.add(Ie(.01,0,0))).r),a=n.uv(e.add(Ie(0,-.01,0))).r.sub(n.uv(e.add(Ie(0,.01,0))).r),l=n.uv(e.add(Ie(0,0,-.01))).r.sub(n.uv(e.add(Ie(0,0,.01))).r);i.assign(Ie(s,a,l))}),i.normalize()});class j_e{constructor(e,r){this.nodes=e,this.info=r,this._context=self,this._animationLoop=null,this._requestId=null}start(){const e=(r,i)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(r,i)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}setAnimationLoop(e){this._animationLoop=e}setContext(e){this._context=e}dispose(){this.stop()}}class ea{constructor(){this.weakMap=new WeakMap}get(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return;return r.get(e[e.length-1])}set(e,r){let i=this.weakMap;for(let o=0;o<e.length;o++){const s=e[o];i.has(s)===!1&&i.set(s,new WeakMap),i=i.get(s)}return i.set(e[e.length-1],r)}delete(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return!1;return r.delete(e[e.length-1])}}let W_e=0;function q_e(n){const e=Object.keys(n);let r=Object.getPrototypeOf(n);for(;r;){const i=Object.getOwnPropertyDescriptors(r);for(const o in i)if(i[o]!==void 0){const s=i[o];s&&typeof s.get=="function"&&e.push(o)}r=Object.getPrototypeOf(r)}return e}class X_e{constructor(e,r,i,o,s,a,l,c,u,d){this._nodes=e,this._geometries=r,this.id=W_e++,this.renderer=i,this.object=o,this.material=s,this.scene=a,this.camera=l,this.lightsNode=c,this.context=u,this.geometry=o.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=d,this.clippingContextCacheKey=d!==null?d.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,r=this.geometry,i=[],o=new Set;for(const s of e){const a=s.node&&s.node.attribute?s.node.attribute:r.getAttribute(s.name);if(a===void 0)continue;i.push(a);const l=a.isInterleavedBufferAttribute?a.data:a;o.add(l)}return this.attributes=i,this.vertexBuffers=Array.from(o.values()),i}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:r,geometry:i,group:o,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),l=this.getIndex(),c=l!==null,u=i.isInstancedBufferGeometry?i.instanceCount:e.count>1?e.count:1;if(u===0)return null;if(a.instanceCount=u,e.isBatchedMesh===!0)return a;let d=1;r.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(d=2);let f=s.start*d,h=(s.start+s.count)*d;o!==null&&(f=Math.max(f,o.start*d),h=Math.min(h,(o.start+o.count)*d));const p=i.attributes.position;let g=1/0;c?g=l.count:p!=null&&(g=p.count),f=Math.max(f,0),h=Math.min(h,g);const y=h-f;return y<0||y===1/0?null:(a.vertexCount=y,a.firstVertex=f,a)}getGeometryCacheKey(){const{geometry:e}=this;let r="";for(const i of Object.keys(e.attributes).sort()){const o=e.attributes[i];r+=i+",",o.data&&(r+=o.data.stride+","),o.offset&&(r+=o.offset+","),o.itemSize&&(r+=o.itemSize+","),o.normalized&&(r+="n,")}return e.index&&(r+="index,"),r}getMaterialCacheKey(){const{object:e,material:r}=this;let i=r.customProgramCacheKey();for(const o of q_e(r)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(o))continue;const s=r[o];let a;if(s!==null){const l=typeof s;l==="number"?a=s!==0?"1":"0":l==="object"?(a="{",s.isTexture&&(a+=s.mapping),a+="}"):a=String(s)}else a=String(s);i+=a+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.morphTargetInfluences&&(i+=e.morphTargetInfluences.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),e.count>1&&(i+=e.uuid+","),i+=e.receiveShadow+",",Tge(i)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const rd=[];class K_e{constructor(e,r,i,o,s,a){this.renderer=e,this.nodes=r,this.geometries=i,this.pipelines=o,this.bindings=s,this.info=a,this.chainMaps={}}get(e,r,i,o,s,a,l,c){const u=this.getChainMap(c);rd[0]=e,rd[1]=r,rd[2]=a,rd[3]=s;let d=u.get(rd);return d===void 0?(d=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,r,i,o,s,a,l,c),u.set(rd,d)):(d.updateClipping(l),d.needsGeometryUpdate&&d.setGeometry(e.geometry),(d.version!==r.version||d.needsUpdate)&&(d.initialCacheKey!==d.getCacheKey()?(d.dispose(),d=this.get(e,r,i,o,s,a,l,c)):d.version=r.version)),d}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new ea)}dispose(){this.chainMaps={}}createRenderObject(e,r,i,o,s,a,l,c,u,d,f){const h=this.getChainMap(f),p=new X_e(e,r,i,o,s,a,l,c,u,d);return p.onDispose=()=>{this.pipelines.delete(p),this.bindings.delete(p),this.nodes.delete(p),h.delete(p.getChainArray())},p}}class pc{constructor(){this.data=new WeakMap}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}delete(e){let r;return this.data.has(e)&&(r=this.data.get(e),this.data.delete(e)),r}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const ks={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Nl=16,Y_e=211,Q_e=212;class Z_e extends pc{constructor(e){super(),this.backend=e}delete(e){const r=super.delete(e);return r!==void 0&&this.backend.destroyAttribute(e),r}update(e,r){const i=this.get(e);if(i.version===void 0)r===ks.VERTEX?this.backend.createAttribute(e):r===ks.INDEX?this.backend.createIndexAttribute(e):r===ks.STORAGE?this.backend.createStorageAttribute(e):r===ks.INDIRECT&&this.backend.createIndirectStorageAttribute(e),i.version=this._getBufferAttribute(e).version;else{const o=this._getBufferAttribute(e);(i.version<o.version||o.usage===Cd)&&(this.backend.updateAttribute(e),i.version=o.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function J_e(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function x5(n){return n.index!==null?n.index.version:n.attributes.position.version}function cD(n){const e=[],r=n.index,i=n.attributes.position;if(r!==null){const s=r.array;for(let a=0,l=s.length;a<l;a+=3){const c=s[a+0],u=s[a+1],d=s[a+2];e.push(c,u,u,d,d,c)}}else{const s=i.array;for(let a=0,l=s.length/3-1;a<l;a+=3){const c=a+0,u=a+1,d=a+2;e.push(c,u,u,d,d,c)}}const o=new(J_e(e)?LM:DM)(e,1);return o.version=x5(n),o}class ebe extends pc{constructor(e,r){super(),this.attributes=e,this.info=r,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const r=e.geometry;return super.has(r)&&this.get(r).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const r=e.geometry,i=this.get(r);i.initialized=!0,this.info.memory.geometries++;const o=()=>{this.info.memory.geometries--;const s=r.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const c of a)this.attributes.delete(c);const l=this.wireframes.get(r);l!==void 0&&this.attributes.delete(l),r.removeEventListener("dispose",o)};r.addEventListener("dispose",o)}updateAttributes(e){const r=e.getAttributes();for(const s of r)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,ks.STORAGE):this.updateAttribute(s,ks.VERTEX);const i=this.getIndex(e);i!==null&&this.updateAttribute(i,ks.INDEX);const o=e.geometry.indirect;o!==null&&this.updateAttribute(o,ks.INDIRECT)}updateAttribute(e,r){const i=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,r),this.attributeCall.set(e,i)):this.attributeCall.get(e.data)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e.data,i),this.attributeCall.set(e,i)):this.attributeCall.get(e)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e,i))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:r,material:i}=e;let o=r.index;if(i.wireframe===!0){const s=this.wireframes;let a=s.get(r);a===void 0?(a=cD(r),s.set(r,a)):a.version!==x5(r)&&(this.attributes.delete(a),a=cD(r),s.set(r,a)),o=a}return o}}class tbe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}update(e,r,i){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=i*(r/3):e.isPoints?this.render.points+=i*r:e.isLineSegments?this.render.lines+=i*(r/2):e.isLine?this.render.lines+=i*(r-1):console.error("THREE.WebGPUInfo: Unknown object type.")}updateTimestamp(e,r){this[e].timestampCalls===0&&(this[e].timestamp=0),this[e].timestamp+=r,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}reset(){const e=this.render.frameCalls;this.render.previousFrameCalls=e;const r=this.compute.frameCalls;this.compute.previousFrameCalls=r,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class _5{constructor(e){this.cacheKey=e,this.usedTimes=0}}class nbe extends _5{constructor(e,r,i){super(e),this.vertexProgram=r,this.fragmentProgram=i}}class rbe extends _5{constructor(e,r){super(e),this.computeProgram=r,this.isComputePipeline=!0}}let ibe=0;class XS{constructor(e,r,i=null,o=null){this.id=ibe++,this.code=e,this.stage=r,this.transforms=i,this.attributes=o,this.usedTimes=0}}class obe extends pc{constructor(e,r){super(),this.backend=e,this.nodes=r,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,r){const{backend:i}=this,o=this.get(e);if(this._needsComputeUpdate(e)){const s=o.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let l=this.programs.compute.get(a.computeShader);l===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),l=new XS(a.computeShader,"compute",a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,l),i.createProgram(l));const c=this._getComputeCacheKey(e,l);let u=this.caches.get(c);u===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getComputePipeline(e,l,c,r)),u.usedTimes++,l.usedTimes++,o.version=e.version,o.pipeline=u}return o.pipeline}getForRender(e,r=null){const{backend:i}=this,o=this.get(e);if(this._needsRenderUpdate(e)){const s=o.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState();let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new XS(a.vertexShader,"vertex"),this.programs.vertex.set(a.vertexShader,l),i.createProgram(l));let c=this.programs.fragment.get(a.fragmentShader);c===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),c=new XS(a.fragmentShader,"fragment"),this.programs.fragment.set(a.fragmentShader,c),i.createProgram(c));const u=this._getRenderCacheKey(e,l,c);let d=this.caches.get(u);d===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),d=this._getRenderPipeline(e,l,c,u,r)):e.pipeline=d,d.usedTimes++,l.usedTimes++,c.usedTimes++,o.pipeline=d}return o.pipeline}delete(e){const r=this.get(e).pipeline;return r&&(r.usedTimes--,r.usedTimes===0&&this._releasePipeline(r),r.isComputePipeline?(r.computeProgram.usedTimes--,r.computeProgram.usedTimes===0&&this._releaseProgram(r.computeProgram)):(r.fragmentProgram.usedTimes--,r.vertexProgram.usedTimes--,r.vertexProgram.usedTimes===0&&this._releaseProgram(r.vertexProgram),r.fragmentProgram.usedTimes===0&&this._releaseProgram(r.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,r,i,o){i=i||this._getComputeCacheKey(e,r);let s=this.caches.get(i);return s===void 0&&(s=new rbe(i,r),this.caches.set(i,s),this.backend.createComputePipeline(s,o)),s}_getRenderPipeline(e,r,i,o,s){o=o||this._getRenderCacheKey(e,r,i);let a=this.caches.get(o);return a===void 0&&(a=new nbe(o,r,i),this.caches.set(o,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,r){return e.id+","+r.id}_getRenderCacheKey(e,r,i){return r.id+","+i.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const r=e.code,i=e.stage;this.programs[i].delete(r)}_needsComputeUpdate(e){const r=this.get(e);return r.pipeline===void 0||r.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class sbe extends pc{constructor(e,r,i,o,s,a){super(),this.backend=e,this.textures=i,this.pipelines=s,this.attributes=o,this.nodes=r,this.info=a,this.pipelines.bindings=this}getForRender(e){const r=e.getBindings();for(const i of r){const o=this.get(i);o.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),o.bindGroup=i)}return r}getForCompute(e){const r=this.nodes.getForCompute(e).bindings;for(const i of r){const o=this.get(i);o.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),o.bindGroup=i)}return r}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const r of e)this._update(r,e)}_init(e){for(const r of e.bindings)if(r.isSampledTexture)this.textures.updateTexture(r.texture);else if(r.isStorageBuffer){const i=r.attribute,o=i.isIndirectStorageBufferAttribute?ks.INDIRECT:ks.STORAGE;this.attributes.update(i,o)}}_update(e,r){const{backend:i}=this;let o=!1,s=!0,a=0,l=0;for(const c of e.bindings)if(!(c.isNodeUniformsGroup&&!this.nodes.updateGroup(c))){if(c.isUniformBuffer)c.update()&&i.updateBinding(c);else if(c.isSampler)c.update();else if(c.isSampledTexture){const u=this.textures.get(c.texture);c.needsBindingsUpdate(u.generation)&&(o=!0);const d=c.update(),f=c.texture;d&&this.textures.updateTexture(f);const h=i.get(f);if(h.externalTexture!==void 0||u.isDefaultTexture?s=!1:(a=a*10+f.id,l+=f.version),i.isWebGPUBackend===!0&&h.texture===void 0&&h.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",c,d,f,c.textureNode.value,o),this.textures.updateTexture(f),o=!0),f.isStorageTexture===!0){const p=this.get(f);c.store===!0?p.needsMipmap=!0:this.textures.needsMipmaps(f)&&p.needsMipmap===!0&&(this.backend.generateMipmaps(f),p.needsMipmap=!1)}}}o===!0&&this.backend.updateBindings(e,r,s?a:0,l)}}function abe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function uD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function dD(n){return(n.transmission>0||n.transmissionNode)&&n.side===Ei&&n.forceSinglePass===!1}class lbe{constructor(e,r,i){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(r,i),this.lightsArray=[],this.scene=r,this.camera=i,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,r,i,o,s,a,l){let c=this.renderItems[this.renderItemsIndex];return c===void 0?(c={id:e.id,object:e,geometry:r,material:i,groupOrder:o,renderOrder:e.renderOrder,z:s,group:a,clippingContext:l},this.renderItems[this.renderItemsIndex]=c):(c.id=e.id,c.object=e,c.geometry=r,c.material=i,c.groupOrder=o,c.renderOrder=e.renderOrder,c.z=s,c.group=a,c.clippingContext=l),this.renderItemsIndex++,c}push(e,r,i,o,s,a,l){const c=this.getNextRenderItem(e,r,i,o,s,a,l);e.occlusionTest===!0&&this.occlusionQueryCount++,i.transparent===!0||i.transmission>0?(dD(i)&&this.transparentDoublePass.push(c),this.transparent.push(c)):this.opaque.push(c)}unshift(e,r,i,o,s,a,l){const c=this.getNextRenderItem(e,r,i,o,s,a,l);i.transparent===!0||i.transmission>0?(dD(i)&&this.transparentDoublePass.unshift(c),this.transparent.unshift(c)):this.opaque.unshift(c)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,r){this.opaque.length>1&&this.opaque.sort(e||abe),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(r||uD),this.transparent.length>1&&this.transparent.sort(r||uD)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,r=this.renderItems.length;e<r;e++){const i=this.renderItems[e];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.groupOrder=null,i.renderOrder=null,i.z=null,i.group=null,i.clippingContext=null}}}class cbe{constructor(e){this.lighting=e,this.lists=new ea}get(e,r){const i=this.lists,o=[e,r];let s=i.get(o);return s===void 0&&(s=new lbe(this.lighting,e,r),i.set(o,s)),s}dispose(){this.lists=new ea}}let ube=0;class dbe{constructor(){this.id=ube++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new qt,this.scissor=!1,this.scissorValue=new qt,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}getCacheKey(){return b5(this)}}function b5(n){const{textures:e,activeCubeFace:r}=n,i=[r];for(const o of e)i.push(o.id);return i4(i)}class fbe{constructor(){this.chainMaps={}}get(e,r,i=null){const o=[e,r];let s;if(i===null)s="default";else{const c=i.texture.format;s=`${i.textures.length}:${c}:${i.samples}:${i.depthBuffer}:${i.stencilBuffer}`}const a=this.getChainMap(s);let l=a.get(o);return l===void 0&&(l=new dbe,a.set(o,l)),i!==null&&(l.sampleCount=i.samples===0?1:i.samples),l}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new ea)}dispose(){this.chainMaps={}}}const hbe=new Y;class pbe extends pc{constructor(e,r,i){super(),this.renderer=e,this.backend=r,this.info=i}updateRenderTarget(e,r=0){const i=this.get(e),o=e.samples===0?1:e.samples,s=i.depthTextureMips||(i.depthTextureMips={}),a=e.textures,l=this.getSize(a[0]),c=l.width>>r,u=l.height>>r;let d=e.depthTexture||s[r];const f=e.depthBuffer===!0||e.stencilBuffer===!0;let h=!1;d===void 0&&f&&(d=new dc,d.format=e.stencilBuffer?Ys:Ws,d.type=e.stencilBuffer?Ks:rr,d.image.width=c,d.image.height=u,s[r]=d),(i.width!==l.width||l.height!==i.height)&&(h=!0,d&&(d.needsUpdate=!0,d.image.width=c,d.image.height=u)),i.width=l.width,i.height=l.height,i.textures=a,i.depthTexture=d||null,i.depth=e.depthBuffer,i.stencil=e.stencilBuffer,i.renderTarget=e,i.sampleCount!==o&&(h=!0,d&&(d.needsUpdate=!0),i.sampleCount=o);const p={sampleCount:o};for(let g=0;g<a.length;g++){const y=a[g];h&&(y.needsUpdate=!0),this.updateTexture(y,p)}if(d&&this.updateTexture(d,p),i.initialized!==!0){i.initialized=!0;const g=()=>{e.removeEventListener("dispose",g);for(let y=0;y<a.length;y++)this._destroyTexture(a[y]);d&&this._destroyTexture(d),this.delete(e)};e.addEventListener("dispose",g)}}updateTexture(e,r={}){const i=this.get(e);if(i.initialized===!0&&i.version===e.version)return;const o=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(o&&i.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=hi}const{width:a,height:l,depth:c}=this.getSize(e);if(r.width=a,r.height=l,r.depth=c,r.needsMipmaps=this.needsMipmaps(e),r.levels=r.needsMipmaps?this.getMipLevels(e,a,l):1,o||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,r),i.generation=e.version;else if(i.initialized!==!0&&s.createSampler(e),e.version>0){const d=e.image;if(d===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(d.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const f=[];for(const h of e.images)f.push(h);r.images=f}else r.image=d;(i.isDefaultTexture===void 0||i.isDefaultTexture===!0)&&(s.createTexture(e,r),i.isDefaultTexture=!1,i.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,r),r.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),i.isDefaultTexture=!0,i.generation=e.version;if(i.initialized!==!0){i.initialized=!0,i.generation=e.version,this.info.memory.textures++;const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",u)}i.version=e.version}getSize(e,r=hbe){let i=e.images?e.images[0]:e.image;return i?(i.image!==void 0&&(i=i.image),r.width=i.width||1,r.height=i.height||1,r.depth=e.isCubeTexture?6:i.depth||1):r.width=r.height=r.depth=1,r}getMipLevels(e,r,i){let o;return e.isCompressedTexture?e.mipmaps?o=e.mipmaps.length:o=1:o=Math.floor(Math.log2(Math.max(r,i)))+1,o}needsMipmaps(e){return this.isEnvironmentTexture(e)||e.isCompressedTexture===!0||e.generateMipmaps}isEnvironmentTexture(e){const r=e.mapping;return r===tc||r===nc||r===qo||r===Xo}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class _R extends Tt{constructor(e,r,i,o=1){super(e,r,i),this.a=o}set(e,r,i,o=1){return this.a=o,super.set(e,r,i)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class mbe extends Rn{static get type(){return"ParameterNode"}constructor(e,r=null){super(e,r),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class gbe extends Qt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}If(e,r){const i=new S0(r);return this._currentCond=Hi(e,i),this.add(this._currentCond)}ElseIf(e,r){const i=new S0(r),o=Hi(e,i);return this._currentCond.elseNode=o,this._currentCond=o,this}Else(e){return this._currentCond.elseNode=new S0(e),this}build(e,...r){const i=f4();Uy(this);for(const o of this.nodes)o.build(e,"void");return Uy(i),this.outputNode?this.outputNode.build(e,...r):super.build(e,...r)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const KS=Be(gbe);new us;new Y;new Y;new Y;new fn;new Y(0,0,-1);new qt;new Y;new Y;new qt;new je;const vbe=new Qf;Dm.flipX();vbe.depthTexture=new dc(1,1);const YS=new lg(-1,1,1,-1,0,1);class ybe extends Li{constructor(e=!1){super();const r=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new mr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new mr(r,2))}}const xbe=new ybe;class S5 extends Br{constructor(e=null){super(xbe,e),this.camera=YS,this.isQuadMesh=!0}renderAsync(e){return e.renderAsync(this,YS)}render(e){e.render(this,YS)}}const zh=new bo,QS=new fn;class Wi extends Qt{static get type(){return"SceneNode"}constructor(e=Wi.BACKGROUND_BLURRINESS,r=null){super(),this.scope=e,this.scene=r}setup(e){const r=this.scope,i=this.scene!==null?this.scene:e.scene;let o;return r===Wi.BACKGROUND_BLURRINESS?o=Nn("backgroundBlurriness","float",i):r===Wi.BACKGROUND_INTENSITY?o=Nn("backgroundIntensity","float",i):r===Wi.BACKGROUND_ROTATION?o=Xt("mat4").label("backgroundRotation").setGroup(jt).onRenderUpdate(()=>{const s=i.background;return s!==null&&s.isTexture&&s.mapping!==_M?(zh.copy(i.backgroundRotation),zh.x*=-1,zh.y*=-1,zh.z*=-1,QS.makeRotationFromEuler(zh)):QS.identity(),QS}):console.error("THREE.SceneNode: Unknown scope:",r),o}}Wi.BACKGROUND_BLURRINESS="backgroundBlurriness";Wi.BACKGROUND_INTENSITY="backgroundIntensity";Wi.BACKGROUND_ROTATION="backgroundRotation";const _be=ct(Wi,Wi.BACKGROUND_BLURRINESS),fD=ct(Wi,Wi.BACKGROUND_INTENSITY),bbe=ct(Wi,Wi.BACKGROUND_ROTATION),Sbe=new je;class wbe extends hg{static get type(){return"PassTextureNode"}constructor(e,r){super(r),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class hD extends wbe{static get type(){return"PassMultipleTextureNode"}constructor(e,r,i=!1){super(e,null),this.textureName=r,this.previousTexture=i}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class w_ extends Mr{static get type(){return"PassNode"}constructor(e,r,i,o={}){super("vec4"),this.scope=e,this.scene=r,this.camera=i,this.options=o,this._pixelRatio=1,this._width=1,this._height=1;const s=new dc;s.isRenderTargetTexture=!0,s.name="depth";const a=new Qf(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Yr,...o});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this.updateBeforeType=on.FRAME,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Xt(0),this._cameraFar=Xt(0),this._mrt=null,this.isPassNode=!0}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let r=this._textures[e];return r===void 0&&(r=this.renderTarget.texture.clone(),r.isRenderTargetTexture=!0,r.name=e,this._textures[e]=r,this.renderTarget.textures.push(r)),r}getPreviousTexture(e){let r=this._previousTextures[e];return r===void 0&&(r=this.getTexture(e).clone(),r.isRenderTargetTexture=!0,this._previousTextures[e]=r),r}toggleTexture(e){const r=this._previousTextures[e];if(r!==void 0){const i=this._textures[e],o=this.renderTarget.textures.indexOf(i);this.renderTarget.textures[o]=r,this._textures[e]=r,this._previousTextures[e]=i,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let r=this._textureNodes[e];return r===void 0&&(r=nt(new hD(this,e)),r.updateTexture(),this._textureNodes[e]=r),r}getPreviousTextureNode(e="output"){let r=this._previousTextureNodes[e];return r===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),r=nt(new hD(this,e,!0)),r.updateTexture(),this._previousTextureNodes[e]=r),r}getViewZNode(e="depth"){let r=this._viewZNodes[e];if(r===void 0){const i=this._cameraNear,o=this._cameraFar;this._viewZNodes[e]=r=t5(this.getTextureNode(e),i,o)}return r}getLinearDepthNode(e="depth"){let r=this._linearDepthNodes[e];if(r===void 0){const i=this._cameraNear,o=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=r=Tp(s,i,o)}return r}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===w_.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:r}=e,{scene:i,camera:o}=this;this._pixelRatio=r.getPixelRatio();const s=r.getSize(Sbe);this.setSize(s.width,s.height);const a=r.getRenderTarget(),l=r.getMRT();this._cameraNear.value=o.near,this._cameraFar.value=o.far;for(const c in this._previousTextures)this.toggleTexture(c);r.setRenderTarget(this.renderTarget),r.setMRT(this._mrt),r.render(i,o),r.setRenderTarget(a),r.setMRT(l)}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget.setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}w_.COLOR="color";w_.DEPTH="depth";const Cbe=lt(([n,e])=>n.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Ebe=lt(([n,e])=>(n=n.mul(e),n.div(n.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Tbe=lt(([n,e])=>{n=n.mul(e),n=n.sub(.004).max(0);const r=n.mul(n.mul(6.2).add(.5)),i=n.mul(n.mul(6.2).add(1.7)).add(.06);return r.div(i).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Mbe=lt(([n])=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),r=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(r)}),Rbe=lt(([n,e])=>{const r=Ni(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=Ni(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=r.mul(n),n=Mbe(n),n=i.mul(n),n.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Abe=Ni(Ie(1.6605,-.1246,-.0182),Ie(-.5876,1.1329,-.1006),Ie(-.0728,-.0083,1.1187)),Nbe=Ni(Ie(.6274,.0691,.0164),Ie(.3293,.9195,.088),Ie(.0433,.0113,.8956)),Pbe=lt(([n])=>{const e=Ie(n).toVar(),r=Ie(e.mul(e)).toVar(),i=Ie(r.mul(r)).toVar();return Ae(15.5).mul(i.mul(r)).sub(sn(40.14,i.mul(e))).add(sn(31.96,i).sub(sn(6.868,r.mul(e))).add(sn(.4298,r).add(sn(.1191,e).sub(.00232))))}),Obe=lt(([n,e])=>{const r=Ie(n).toVar(),i=Ni(Ie(.856627153315983,.137318972929847,.11189821299995),Ie(.0951212405381588,.761241990602591,.0767994186031903),Ie(.0482516061458583,.101439036467562,.811302368396859)),o=Ni(Ie(1.1271005818144368,-.1413297634984383,-.14132976349843826),Ie(-.11060664309660323,1.157823702216272,-.11060664309660294),Ie(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=Ae(-12.47393),a=Ae(4.026069);return r.mulAssign(e),r.assign(Nbe.mul(r)),r.assign(i.mul(r)),r.assign(Ji(r,1e-10)),r.assign(Ba(r)),r.assign(r.sub(s).div(a.sub(s))),r.assign(Ka(r,0,1)),r.assign(Pbe(r)),r.assign(o.mul(r)),r.assign(m_(Ji(Ie(0),r),Ie(2.2))),r.assign(Abe.mul(r)),r.assign(Ka(r,0,1)),r}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Ibe=lt(([n,e])=>{const r=Ae(.76),i=Ae(.15);n=n.mul(e);const o=Nm(n.r,Nm(n.g,n.b)),s=Hi(o.lessThan(.08),o.sub(sn(6.25,o.mul(o))),.04);n.subAssign(s);const a=Ji(n.r,Ji(n.g,n.b));Er(a.lessThan(r),()=>n);const l=$i(1,r),c=$i(1,l.mul(l).div(a.add(l.sub(r))));n.mulAssign(c.div(a));const u=$i(1,Xa(1,i.mul(a.sub(c)).add(1)));return jn(n,Ie(c),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Ir extends Qt{static get type(){return"CodeNode"}constructor(e="",r=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=i,this.includes=r}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const r=this.getIncludes(e);for(const o of r)o.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class Dbe extends Ir{static get type(){return"FunctionNode"}constructor(e="",r=[],i=""){super(e,r,i)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const r=e.getDataFromNode(this);let i=r.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),r.nodeFunction=i),i}generate(e,r){super.generate(e);const i=this.getNodeFunction(e),o=i.name,s=i.type,a=e.getCodeFromNode(this,s);o!==""&&(a.name=o);const l=e.getPropertyName(a),c=this.getNodeFunction(e).getCode(l);return a.code=c+`
`,r==="property"?l:e.format(`${l}()`,s,r)}}class w5 extends Qt{static get type(){return"FogNode"}constructor(e,r){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=r}getViewZNode(e){let r;const i=e.context.getViewZ;return i!==void 0&&(r=i(this)),(r||Lr.z).negate()}setup(){return this.factorNode}}class Lbe extends w5{static get type(){return"FogRangeNode"}constructor(e,r,i){super(e),this.isFogRangeNode=!0,this.nearNode=r,this.farNode=i}setup(e){const r=this.getViewZNode(e);return vu(this.nearNode,this.farNode,r)}}const Fbe=Be(Lbe);class Ube extends w5{static get type(){return"FogExp2Node"}constructor(e,r){super(e),this.isFogExp2Node=!0,this.densityNode=r}setup(e){const r=this.getViewZNode(e),i=this.densityNode;return i.mul(i,r,r).negate().exp().oneMinus()}}const Bbe=Be(Ube);class $be extends Qt{constructor(e){super(),this.scope=e}generate(e){const{scope:r}=this,{renderer:i}=e;i.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${r}Barrier 
`):e.addLineFlowCode(`${r}Barrier()`,this)}}Be($be);class oa extends Mr{static get type(){return"AtomicFunctionNode"}constructor(e,r,i,o=null){super("uint"),this.method=e,this.pointerNode=r,this.valueNode=i,this.storeNode=o}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const r=this.method,i=this.getNodeType(e),o=this.getInputType(e),s=this.pointerNode,a=this.valueNode,l=[];l.push(`&${s.build(e,o)}`),l.push(a.build(e,o));const c=`${e.getMethod(r,i)}( ${l.join(", ")} )`;if(this.storeNode!==null){const u=this.storeNode.build(e,o);e.addLineFlowCode(`${u} = ${c}`,this)}else e.addLineFlowCode(c,this)}}oa.ATOMIC_LOAD="atomicLoad";oa.ATOMIC_STORE="atomicStore";oa.ATOMIC_ADD="atomicAdd";oa.ATOMIC_SUB="atomicSub";oa.ATOMIC_MAX="atomicMax";oa.ATOMIC_MIN="atomicMin";oa.ATOMIC_AND="atomicAnd";oa.ATOMIC_OR="atomicOr";oa.ATOMIC_XOR="atomicXor";Be(oa);let Ov;function pg(n){Ov=Ov||new WeakMap;let e=Ov.get(n);return e===void 0&&Ov.set(n,e={}),e}function C5(n){const e=pg(n);return e.shadowMatrix||(e.shadowMatrix=Xt("mat4").setGroup(jt).onRenderUpdate(()=>(n.shadow.updateMatrices(n),n.shadow.matrix)))}function zbe(n){const e=pg(n);if(e.projectionUV===void 0){const r=C5(n).mul(Om);e.projectionUV=r.xyz.div(r.w)}return e.projectionUV}function E5(n){const e=pg(n);return e.position||(e.position=Xt(new Y).setGroup(jt).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.matrixWorld)))}function kbe(n){const e=pg(n);return e.targetPosition||(e.targetPosition=Xt(new Y).setGroup(jt).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.target.matrixWorld)))}function bR(n){const e=pg(n);return e.viewPosition||(e.viewPosition=Xt(new Y).setGroup(jt).onRenderUpdate(({camera:r},i)=>{i.value=i.value||new Y,i.value.setFromMatrixPosition(n.matrixWorld),i.value.applyMatrix4(r.matrixWorldInverse)}))}const T5=n=>rl.transformDirection(E5(n).sub(kbe(n))),Vbe=n=>n.sort((e,r)=>e.id-r.id),Gbe=(n,e)=>{for(const r of e)if(r.isAnalyticLightNode&&r.light.id===n)return r;return null},ZS=new WeakMap;class M5 extends Qt{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Ie().toVar("totalDiffuse"),this.totalSpecularNode=Ie().toVar("totalSpecular"),this.outgoingLightNode=Ie().toVar("outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const r=[];for(const i of this._lightNodes)r.push(i.getSelf().getHash());this._lightNodesHash="lights-"+r.join(",")}return this._lightNodesHash}analyze(e){const r=e.getDataFromNode(this);for(const i of r.nodes)i.build(e)}setupLightsNode(e){const r=[],i=this._lightNodes,o=Vbe(this._lights),s=e.renderer.library;for(const a of o)if(a.isNode)r.push(nt(a));else{let l=null;if(i!==null&&(l=Gbe(a.id,i)),l===null){const c=s.getLightNodeClass(a.constructor);if(c===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let u=null;ZS.has(a)?u=ZS.get(a):(u=nt(new c(a)),ZS.set(a,u)),r.push(u)}}this._lightNodes=r}setupLights(e,r){for(const i of r)i.build(e)}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const r=e.context,i=r.lightingModel;let o=this.outgoingLightNode;if(i){const{_lightNodes:s,totalDiffuseNode:a,totalSpecularNode:l}=this;r.outgoingLight=o;const c=e.addStack(),u=e.getDataFromNode(this);u.nodes=c.nodes,i.start(r,c,e),this.setupLights(e,s),i.indirect(r,c,e);const{backdrop:d,backdropAlpha:f}=r,{directDiffuse:h,directSpecular:p,indirectDiffuse:g,indirectSpecular:y}=r.reflectedLight;let v=h.add(g);d!==null&&(f!==null?v=Ie(f.mix(v,d)):v=Ie(d),r.material.transparent=!0),a.assign(v),l.assign(p.add(y)),o.assign(a.add(l)),i.finish(r,c,e),o=o.bypass(e.removeStack())}return o}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const pD=new WeakMap,mD=Ie().toVar("shadowWorldPosition"),Hbe=lt(([n,e,r])=>{let i=Om.sub(n).length();return i=i.sub(e).div(r.sub(e)),i=i.saturate(),i}),jbe=n=>{const e=n.shadow.camera,r=Nn("near","float",e).setGroup(jt),i=Nn("far","float",e).setGroup(jt),o=j0e(n);return Hbe(o,r,i)},Wbe=n=>{let e=pD.get(n);if(e===void 0){const r=n.isPointLight?jbe(n):null;e=new Tr,e.colorNode=Yt(0,0,0,1),e.depthNode=r,e.isShadowNodeMaterial=!0,e.blending=Ri,e.name="ShadowMaterial",pD.set(n,e)}return e},qbe=lt(({depthTexture:n,shadowCoord:e})=>gn(n,e.xy).compare(e.z)),Xbe=lt(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(y,v)=>gn(n,y).compare(v),o=Nn("mapSize","vec2",r).setGroup(jt),s=Nn("radius","float",r).setGroup(jt),a=pt(1).div(o),l=a.x.negate().mul(s),c=a.y.negate().mul(s),u=a.x.mul(s),d=a.y.mul(s),f=l.div(2),h=c.div(2),p=u.div(2),g=d.div(2);return Pi(i(e.xy.add(pt(l,c)),e.z),i(e.xy.add(pt(0,c)),e.z),i(e.xy.add(pt(u,c)),e.z),i(e.xy.add(pt(f,h)),e.z),i(e.xy.add(pt(0,h)),e.z),i(e.xy.add(pt(p,h)),e.z),i(e.xy.add(pt(l,0)),e.z),i(e.xy.add(pt(f,0)),e.z),i(e.xy,e.z),i(e.xy.add(pt(p,0)),e.z),i(e.xy.add(pt(u,0)),e.z),i(e.xy.add(pt(f,g)),e.z),i(e.xy.add(pt(0,g)),e.z),i(e.xy.add(pt(p,g)),e.z),i(e.xy.add(pt(l,d)),e.z),i(e.xy.add(pt(0,d)),e.z),i(e.xy.add(pt(u,d)),e.z)).mul(1/17)}),Kbe=lt(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(d,f)=>gn(n,d).compare(f),o=Nn("mapSize","vec2",r).setGroup(jt),s=pt(1).div(o),a=s.x,l=s.y,c=e.xy,u=hc(c.mul(o).add(.5));return c.subAssign(u.mul(s)),Pi(i(c,e.z),i(c.add(pt(a,0)),e.z),i(c.add(pt(0,l)),e.z),i(c.add(s),e.z),jn(i(c.add(pt(a.negate(),0)),e.z),i(c.add(pt(a.mul(2),0)),e.z),u.x),jn(i(c.add(pt(a.negate(),l)),e.z),i(c.add(pt(a.mul(2),l)),e.z),u.x),jn(i(c.add(pt(0,l.negate())),e.z),i(c.add(pt(0,l.mul(2))),e.z),u.y),jn(i(c.add(pt(a,l.negate())),e.z),i(c.add(pt(a,l.mul(2))),e.z),u.y),jn(jn(i(c.add(pt(a.negate(),l.negate())),e.z),i(c.add(pt(a.mul(2),l.negate())),e.z),u.x),jn(i(c.add(pt(a.negate(),l.mul(2))),e.z),i(c.add(pt(a.mul(2),l.mul(2))),e.z),u.x),u.y)).mul(1/9)}),Ybe=lt(({depthTexture:n,shadowCoord:e})=>{const r=Ae(1).toVar(),i=gn(n).uv(e.xy).rg,o=N4(e.z,i.x);return Er(o.notEqual(Ae(1)),()=>{const s=e.z.sub(i.x),a=Ji(0,i.y.mul(i.y));let l=a.div(a.add(s.mul(s)));l=Ka($i(l,.3).div(.95-.3)),r.assign(Ka(Ji(o,l)))}),r}),Qbe=lt(({samples:n,radius:e,size:r,shadowPass:i})=>{const o=Ae(0).toVar(),s=Ae(0).toVar(),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),l=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));ms({start:cr(0),end:cr(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(Ae(u).mul(a)),f=i.uv(Pi(__.xy,pt(0,d).mul(e)).div(r)).x;o.addAssign(f),s.addAssign(f.mul(f))}),o.divAssign(n),s.divAssign(n);const c=lR(s.sub(o.mul(o)));return pt(o,c)}),Zbe=lt(({samples:n,radius:e,size:r,shadowPass:i})=>{const o=Ae(0).toVar(),s=Ae(0).toVar(),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),l=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));ms({start:cr(0),end:cr(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(Ae(u).mul(a)),f=i.uv(Pi(__.xy,pt(d,0).mul(e)).div(r));o.addAssign(f.x),s.addAssign(Pi(f.y.mul(f.y),f.x.mul(f.x)))}),o.divAssign(n),s.divAssign(n);const c=lR(s.sub(o.mul(o)));return pt(o,c)}),Jbe=[qbe,Xbe,Kbe,Ybe],Iv=new S5;class R5 extends Qt{static get type(){return"ShadowNode"}constructor(e,r=null){super(),this.light=e,this.shadow=r||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this.updateBeforeType=on.RENDER,this._node=null,this.isShadowNode=!0}setupShadowFilter(e,{filterFn:r,depthTexture:i,shadowCoord:o,shadow:s}){const a=o.x.greaterThanEqual(0).and(o.x.lessThanEqual(1)).and(o.y.greaterThanEqual(0)).and(o.y.lessThanEqual(1)).and(o.z.lessThanEqual(1)),l=r({depthTexture:i,shadowCoord:o,shadow:s});return a.select(l,Ae(1))}setupShadowCoord(e,r){const{shadow:i}=this,{renderer:o}=e,s=Nn("bias","float",i).setGroup(jt);let a=r,l;if(i.camera.isOrthographicCamera||o.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),l=a.z,o.coordinateSystem===gu&&(l=l.mul(2).sub(1));else{const c=a.w;a=a.xy.div(c);const u=Nn("near","float",i.camera).setGroup(jt),d=Nn("far","float",i.camera).setGroup(jt);l=n5(c.negate(),u,d)}return a=Ie(a.x,a.y.oneMinus(),l.add(s)),a}getShadowFilterFn(e){return Jbe[e]}setupShadow(e){const{renderer:r}=e,{light:i,shadow:o}=this,s=r.shadowMap.type,a=new dc(o.mapSize.width,o.mapSize.height);a.compareFunction=t_;const l=e.createRenderTarget(o.mapSize.width,o.mapSize.height);if(l.depthTexture=a,o.camera.updateProjectionMatrix(),s===ho){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:mu,type:Yr}),this.vsmShadowMapHorizontal=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:mu,type:Yr});const m=gn(a),x=gn(this.vsmShadowMapVertical.texture),b=Nn("blurSamples","float",o).setGroup(jt),S=Nn("radius","float",o).setGroup(jt),w=Nn("mapSize","vec2",o).setGroup(jt);let C=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Tr);C.fragmentNode=Qbe({samples:b,radius:S,size:w,shadowPass:m}).context(e.getSharedContext()),C.name="VSMVertical",C=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Tr),C.fragmentNode=Zbe({samples:b,radius:S,size:w,shadowPass:x}).context(e.getSharedContext()),C.name="VSMHorizontal"}const c=Nn("intensity","float",o).setGroup(jt),u=Nn("normalBias","float",o).setGroup(jt),d=C5(i).mul(mD.add(pR.mul(u))),f=this.setupShadowCoord(e,d),h=o.filterNode||this.getShadowFilterFn(r.shadowMap.type)||null;if(h===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const p=s===ho?this.vsmShadowMapHorizontal.texture:a,g=this.setupShadowFilter(e,{filterFn:h,shadowTexture:l.texture,depthTexture:p,shadowCoord:f,shadow:o}),y=gn(l.texture,f),v=jn(1,g.rgb.mix(y,1),c.mul(y.a)).toVar();return this.shadowMap=l,this.shadow.map=l,v}setup(e){if(e.renderer.shadowMap.enabled!==!1)return lt(({material:r})=>{mD.assign(r.shadowPositionNode||Om);let i=this._node;return i===null&&(this._node=i=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(i=e.material.receivedShadowNode(i)),i})()}renderShadow(e){const{shadow:r,shadowMap:i}=this,{renderer:o,scene:s}=e;i.setSize(r.mapSize.width,r.mapSize.height),o.render(s,r.camera)}updateShadow(e){const{shadowMap:r,light:i,shadow:o}=this,{renderer:s,scene:a,camera:l}=e,c=s.shadowMap.type,u=r.depthTexture.version;this._depthVersionCached=u;const d=a.overrideMaterial;a.overrideMaterial=Wbe(i),o.camera.layers.mask=l.layers.mask;const f=s.getRenderTarget(),h=s.getRenderObjectFunction(),p=s.getMRT();s.setMRT(null),s.setRenderObjectFunction((g,...y)=>{(g.castShadow===!0||g.receiveShadow&&c===ho)&&s.renderObject(g,...y)}),s.setRenderTarget(r),this.renderShadow(e),s.setRenderObjectFunction(h),i.isPointLight!==!0&&c===ho&&this.vsmPass(s),s.setRenderTarget(f),s.setMRT(p),a.overrideMaterial=d}vsmPass(e){const{shadow:r}=this;this.vsmShadowMapVertical.setSize(r.mapSize.width,r.mapSize.height),this.vsmShadowMapHorizontal.setSize(r.mapSize.width,r.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),Iv.material=this.vsmMaterialVertical,Iv.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),Iv.material=this.vsmMaterialHorizontal,Iv.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.updateBeforeType=on.NONE}updateBefore(e){const{shadow:r}=this;(r.needsUpdate||r.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(r.needsUpdate=!1))}}const eSe=(n,e)=>nt(new R5(n,e));class Au extends rh{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Tt,this.colorNode=e&&e.colorNode||Xt(this.color).setGroup(jt),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=on.FRAME}getCacheKey(){return o4(super.getCacheKey(),this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadowNode(){return eSe(this.light)}setupShadow(e){const{renderer:r}=e;if(r.shadowMap.enabled===!1)return;let i=this.shadowColorNode;if(i===null){const o=this.light.shadow.shadowNode;let s;o!==void 0?s=nt(o):s=this.setupShadowNode(e),this.shadowNode=s,this.shadowColorNode=i=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=i}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const A5=lt(n=>{const{lightDistance:e,cutoffDistance:r,decayExponent:i}=n,o=e.pow(i).max(.01).reciprocal();return r.greaterThan(0).select(o.mul(e.div(r).pow4().oneMinus().clamp().pow2()),o)}),tSe=new Tt,Os=lt(([n,e])=>{const r=n.toVar(),i=Fo(r),o=Xa(1,Ji(i.x,Ji(i.y,i.z)));i.mulAssign(o),r.mulAssign(o.mul(e.mul(2).oneMinus()));const s=pt(r.xy).toVar(),l=e.mul(1.5).oneMinus();return Er(i.z.greaterThanEqual(l),()=>{Er(r.z.greaterThan(0),()=>{s.x.assign($i(4,r.x))})}).ElseIf(i.x.greaterThanEqual(l),()=>{const c=Vy(r.x);s.x.assign(r.z.mul(c).add(c.mul(2)))}).ElseIf(i.y.greaterThanEqual(l),()=>{const c=Vy(r.y);s.x.assign(r.x.add(c.mul(2)).add(2)),s.y.assign(r.z.mul(c).sub(2))}),pt(.125,.25).mul(s).add(pt(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),nSe=lt(({depthTexture:n,bd3D:e,dp:r,texelSize:i})=>gn(n,Os(e,i.y)).compare(r)),rSe=lt(({depthTexture:n,bd3D:e,dp:r,texelSize:i,shadow:o})=>{const s=Nn("radius","float",o).setGroup(jt),a=pt(-1,1).mul(s).mul(i.y);return gn(n,Os(e.add(a.xyy),i.y)).compare(r).add(gn(n,Os(e.add(a.yyy),i.y)).compare(r)).add(gn(n,Os(e.add(a.xyx),i.y)).compare(r)).add(gn(n,Os(e.add(a.yyx),i.y)).compare(r)).add(gn(n,Os(e,i.y)).compare(r)).add(gn(n,Os(e.add(a.xxy),i.y)).compare(r)).add(gn(n,Os(e.add(a.yxy),i.y)).compare(r)).add(gn(n,Os(e.add(a.xxx),i.y)).compare(r)).add(gn(n,Os(e.add(a.yxx),i.y)).compare(r)).mul(1/9)}),iSe=lt(({filterFn:n,depthTexture:e,shadowCoord:r,shadow:i})=>{const o=r.xyz.toVar(),s=o.length(),a=Xt("float").setGroup(jt).onRenderUpdate(()=>i.camera.near),l=Xt("float").setGroup(jt).onRenderUpdate(()=>i.camera.far),c=Nn("bias","float",i).setGroup(jt),u=Xt(i.mapSize).setGroup(jt),d=Ae(1).toVar();return Er(s.sub(l).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const f=s.sub(a).div(l.sub(a)).toVar();f.addAssign(c);const h=o.normalize(),p=pt(1).div(u.mul(pt(4,2)));d.assign(n({depthTexture:e,bd3D:h,dp:f,texelSize:p,shadow:i}))}),d}),gD=new qt,id=new je,kh=new je;class oSe extends R5{static get type(){return"PointShadowNode"}constructor(e,r=null){super(e,r)}getShadowFilterFn(e){return e===dle?nSe:rSe}setupShadowCoord(e,r){return r}setupShadowFilter(e,{filterFn:r,shadowTexture:i,depthTexture:o,shadowCoord:s,shadow:a}){return iSe({filterFn:r,shadowTexture:i,depthTexture:o,shadowCoord:s,shadow:a})}renderShadow(e){const{shadow:r,shadowMap:i,light:o}=this,{renderer:s,scene:a}=e,l=r.getFrameExtents();kh.copy(r.mapSize),kh.multiply(l),i.setSize(kh.width,kh.height),id.copy(r.mapSize);const c=s.autoClear,u=s.getClearColor(tSe),d=s.getClearAlpha();s.autoClear=!1,s.setClearColor(r.clearColor,r.clearAlpha),s.clear();const f=r.getViewportCount();for(let h=0;h<f;h++){const p=r.getViewport(h),g=id.x*p.x,y=kh.y-id.y-id.y*p.y;gD.set(g,y,id.x*p.z,id.y*p.w),i.viewport.copy(gD),r.updateMatrices(o,h),s.render(a,r.camera)}s.autoClear=c,s.setClearColor(u,d)}}const sSe=(n,e)=>nt(new oSe(n,e)),aSe=lt(({color:n,lightViewPosition:e,cutoffDistance:r,decayExponent:i},o)=>{const s=o.context.lightingModel,a=e.sub(Lr),l=a.normalize(),c=a.length(),u=A5({lightDistance:c,cutoffDistance:r,decayExponent:i}),d=n.mul(u),f=o.context.reflectedLight;s.direct({lightDirection:l,lightColor:d,reflectedLight:f},o.stack,o)});class lSe extends Au{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Xt(0).setGroup(jt),this.decayExponentNode=Xt(0).setGroup(jt)}update(e){const{light:r}=this;super.update(e),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}setupShadowNode(){return sSe(this.light)}setup(e){super.setup(e),aSe({color:this.colorNode,lightViewPosition:bR(this.light),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode}).append()}}const cSe=lt(([n,e])=>{const r=n.x,i=n.y,o=n.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(i)),s=s.add(e.element(2).mul(2*.511664).mul(o)),s=s.add(e.element(3).mul(2*.511664).mul(r)),s=s.add(e.element(4).mul(2*.429043).mul(r).mul(i)),s=s.add(e.element(5).mul(2*.429043).mul(i).mul(o)),s=s.add(e.element(6).mul(o.mul(o).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(r).mul(o)),s=s.add(e.element(8).mul(.429043).mul(sn(r,r).sub(sn(i,i)))),s}),ma=new _R;class uSe extends pc{constructor(e,r){super(),this.renderer=e,this.nodes=r}update(e,r,i){const o=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)o._clearColor.getRGB(ma,Vo),ma.a=o._clearColor.a;else if(s.isColor===!0)s.getRGB(ma,Vo),ma.a=1,a=!0;else if(s.isNode===!0){const l=this.get(e),c=s;ma.copy(o._clearColor);let u=l.backgroundMesh;if(u===void 0){const f=dR(Yt(c).mul(fD),{getUV:()=>bbe.mul(H4),getTextureLevel:()=>_be});let h=Q4();h=h.setZ(h.w);const p=new Tr;p.name="Background.material",p.side=er,p.depthTest=!1,p.depthWrite=!1,p.fog=!1,p.lights=!1,p.vertexNode=h,p.colorNode=f,l.backgroundMeshNode=f,l.backgroundMesh=u=new Br(new Jf(1,32,32),p),u.frustumCulled=!1,u.name="Background.mesh",u.onBeforeRender=function(g,y,v){this.matrixWorld.copyPosition(v.matrixWorld)}}const d=c.getCacheKey();l.backgroundCacheKey!==d&&(l.backgroundMeshNode.node=Yt(c).mul(fD),l.backgroundMeshNode.needsUpdate=!0,u.material.needsUpdate=!0,l.backgroundCacheKey=d),r.unshift(u,u.geometry,u.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);if(o.autoClear===!0||a===!0){const l=i.clearColorValue;l.r=ma.r,l.g=ma.g,l.b=ma.b,l.a=ma.a,(o.backend.isWebGLBackend===!0||o.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),i.depthClearValue=o._clearDepth,i.stencilClearValue=o._clearStencil,i.clearColor=o.autoClearColor===!0,i.clearDepth=o.autoClearDepth===!0,i.clearStencil=o.autoClearStencil===!0}else i.clearColor=!1,i.clearDepth=!1,i.clearStencil=!1}}let dSe=0;class sE{constructor(e="",r=[],i=0,o=[]){this.name=e,this.bindings=r,this.index=i,this.bindingsReference=o,this.id=dSe++}}class fSe{constructor(e,r,i,o,s,a,l,c,u,d=[]){this.vertexShader=e,this.fragmentShader=r,this.computeShader=i,this.transforms=d,this.nodeAttributes=o,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=l,this.updateAfterNodes=c,this.monitor=u,this.usedTimes=0}createBindings(){const e=[];for(const r of this.bindings)if(r.bindings[0].groupNode.shared!==!0){const o=new sE(r.name,[],r.index,r);e.push(o);for(const s of r.bindings)o.bindings.push(s.clone())}else e.push(r);return e}}class vD{constructor(e,r,i=null){this.isNodeAttribute=!0,this.name=e,this.type=r,this.node=i}}class hSe{constructor(e,r,i){this.isNodeUniform=!0,this.name=e,this.type=r,this.node=i.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class N5{constructor(e,r){this.isNodeVar=!0,this.name=e,this.type=r}}class pSe extends N5{constructor(e,r){super(e,r),this.needsInterpolation=!1,this.isNodeVarying=!0}}class mSe{constructor(e,r,i=""){this.name=e,this.type=r,this.code=i,Object.defineProperty(this,"isNodeCode",{value:!0})}}let gSe=0;class JS{constructor(e=null){this.id=gSe++,this.nodesData=new WeakMap,this.parent=e}getData(e){let r=this.nodesData.get(e);return r===void 0&&this.parent!==null&&(r=this.parent.getData(e)),r}setData(e,r){this.nodesData.set(e,r)}}class Nu{constructor(e,r){this.name=e,this.value=r,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class vSe extends Nu{constructor(e,r=0){super(e,r),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class ySe extends Nu{constructor(e,r=new je){super(e,r),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class xSe extends Nu{constructor(e,r=new Y){super(e,r),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class _Se extends Nu{constructor(e,r=new qt){super(e,r),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class bSe extends Nu{constructor(e,r=new Tt){super(e,r),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class SSe extends Nu{constructor(e,r=new Vt){super(e,r),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class wSe extends Nu{constructor(e,r=new fn){super(e,r),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class CSe extends vSe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class ESe extends ySe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class TSe extends xSe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class MSe extends _Se{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class RSe extends bSe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class ASe extends SSe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class NSe extends wSe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const Ad=4,yD=[.125,.215,.35,.446,.526,.582],$c=20,e1=new lg(-1,1,1,-1,0,1),PSe=new wi(90,1),xD=new Tt;let t1=null,n1=0,r1=0;const Pc=(1+Math.sqrt(5))/2,od=1/Pc,_D=[new Y(-Pc,od,0),new Y(Pc,od,0),new Y(-od,0,Pc),new Y(od,0,Pc),new Y(0,Pc,-od),new Y(0,Pc,od),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)],OSe=[3,1,5,0,4,2],i1=m_e(v_(),Ya("faceIndex")).normalize(),SR=Ie(i1.x,i1.y.negate(),i1.z);class ISe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,r=0,i=.1,o=100,s=null){if(this._setSize(256),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const l=s||this._allocateTargets();return this.fromSceneAsync(e,r,i,o,l),l}t1=this._renderer.getRenderTarget(),n1=this._renderer.getActiveCubeFace(),r1=this._renderer.getActiveMipmapLevel();const a=s||this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,o,a),r>0&&this._blur(a,0,0,r),this._applyPMREM(a),this._cleanup(a),a}async fromSceneAsync(e,r=0,i=.1,o=100,s=null){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,r,i,o,s)}fromEquirectangular(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromEquirectangularAsync(e,i),i}return this._fromTexture(e,r)}async fromEquirectangularAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}fromCubemap(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromCubemapAsync(e,r),i}return this._fromTexture(e,r)}async fromCubemapAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=SD(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=wD(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===qo||e.mapping===Xo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(t1,n1,r1),e.scissorTest=!1,Dv(e,0,0,e.width,e.height)}_fromTexture(e,r){this._setSizeFromTexture(e),t1=this._renderer.getRenderTarget(),n1=this._renderer.getActiveCubeFace(),r1=this._renderer.getActiveMipmapLevel();const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Ur,minFilter:Ur,generateMipmaps:!1,type:Yr,format:ti,colorSpace:Vo},o=bD(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bD(e,r,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=DSe(s)),this._blurMaterial=LSe(s,e,r)}return o}async _compileMaterial(e){const r=new Br(this._lodPlanes[0],e);await this._renderer.compile(r,e1)}_sceneToCubeUV(e,r,i,o){const s=PSe;s.near=r,s.far=i;const a=[-1,1,-1,-1,-1,-1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear;c.getClearColor(xD),c.autoClear=!1;let d=this._backgroundBox;if(d===null){const p=new Zf({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1});d=new Br(new Mu,p)}let f=!1;const h=e.background;h?h.isColor&&(d.material.color.copy(h),e.background=null,f=!0):(d.material.color.copy(xD),f=!0),c.setRenderTarget(o),c.clear(),f&&c.render(d,s);for(let p=0;p<6;p++){const g=p%3;g===0?(s.up.set(0,a[p],0),s.lookAt(l[p],0,0)):g===1?(s.up.set(0,0,a[p]),s.lookAt(0,l[p],0)):(s.up.set(0,a[p],0),s.lookAt(0,0,l[p]));const y=this._cubeSize;Dv(o,g*y,p>2?y:0,y,y),c.render(e,s)}c.autoClear=u,e.background=h}_textureToCubeUV(e,r){const i=this._renderer,o=e.mapping===qo||e.mapping===Xo;o?this._cubemapMaterial===null&&(this._cubemapMaterial=SD(e)):this._equirectMaterial===null&&(this._equirectMaterial=wD(e));const s=o?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const l=this._cubeSize;Dv(r,0,0,3*l,2*l),i.setRenderTarget(r),i.render(a,e1)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const o=this._lodPlanes.length;for(let s=1;s<o;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=_D[(o-s-1)%_D.length];this._blur(e,s-1,s,a,l)}r.autoClear=i}_blur(e,r,i,o,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,r,i,o,"latitudinal",s),this._halfBlur(a,e,i,i,o,"longitudinal",s)}_halfBlur(e,r,i,o,s,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=this._lodMeshes[o];f.material=u;const h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*$c-1),y=s/g,v=isFinite(s)?1+Math.floor(d*y):$c;v>$c&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${$c}`);const m=[];let x=0;for(let E=0;E<$c;++E){const M=E/y,T=Math.exp(-M*M/2);m.push(T),E===0?x+=T:E<v&&(x+=2*T)}for(let E=0;E<m.length;E++)m[E]=m[E]/x;e.texture.frame=(e.texture.frame||0)+1,h.envMap.value=e.texture,h.samples.value=v,h.weights.array=m,h.latitudinal.value=a==="latitudinal"?1:0,l&&(h.poleAxis.value=l);const{_lodMax:b}=this;h.dTheta.value=g,h.mipInt.value=b-i;const S=this._sizeLods[o],w=3*S*(o>b-Ad?o-b+Ad:0),C=4*(this._cubeSize-S);Dv(r,w,C,3*S,2*S),c.setRenderTarget(r),c.render(f,e1)}}function DSe(n){const e=[],r=[],i=[],o=[];let s=n;const a=n-Ad+1+yD.length;for(let l=0;l<a;l++){const c=Math.pow(2,s);r.push(c);let u=1/c;l>n-Ad?u=yD[l-n+Ad-1]:l===0&&(u=0),i.push(u);const d=1/(c-2),f=-d,h=1+d,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,y=6,v=3,m=2,x=1,b=new Float32Array(v*y*g),S=new Float32Array(m*y*g),w=new Float32Array(x*y*g);for(let E=0;E<g;E++){const M=E%3*2/3-1,T=E>2?0:-1,R=[M,T,0,M+2/3,T,0,M+2/3,T+1,0,M,T,0,M+2/3,T+1,0,M,T+1,0],P=OSe[E];b.set(R,v*y*P),S.set(p,m*y*P);const D=[P,P,P,P,P,P];w.set(D,x*y*P)}const C=new Li;C.setAttribute("position",new ri(b,v)),C.setAttribute("uv",new ri(S,m)),C.setAttribute("faceIndex",new ri(w,x)),e.push(C),o.push(new Br(C,null)),s>Ad&&s--}return{lodPlanes:e,sizeLods:r,sigmas:i,lodMeshes:o}}function bD(n,e,r){const i=new Qf(n,e,r);return i.texture.mapping=fu,i.texture.name="PMREM.cubeUv",i.texture.isPMREMTexture=!0,i.scissorTest=!0,i}function Dv(n,e,r,i,o){n.viewport.set(e,r,i,o),n.scissor.set(e,r,i,o)}function wR(n){const e=new Tr;return e.depthTest=!1,e.depthWrite=!1,e.blending=Ri,e.name=`PMREM_${n}`,e}function LSe(n,e,r){const i=Rl(new Array($c).fill(0)),o=Xt(new Y(0,1,0)),s=Xt(0),a=Ae($c),l=Xt(0),c=Xt(1),u=gn(null),d=Xt(0),f=Ae(1/e),h=Ae(1/r),p=Ae(n),g={n:a,latitudinal:l,weights:i,poleAxis:o,outputDirection:SR,dTheta:s,samples:c,envMap:u,mipInt:d,CUBEUV_TEXEL_WIDTH:f,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:p},y=wR("blur");return y.uniforms=g,y.fragmentNode=v_e({...g,latitudinal:l.equal(1)}),y}function SD(n){const e=wR("cubemap");return e.fragmentNode=Im(n,SR),e}function wD(n){const e=wR("equirect");return e.fragmentNode=gn(n,o5(SR),0),e}const CD=new WeakMap,FSe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),Lv=n=>/e/g.test(n)?String(n).replace(/\+/g,""):(n=Number(n),n+(n%1?"":".0"));class P5{constructor(e,r,i){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=r,this.parser=i,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=KS(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new JS,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=CD.get(this.renderer);return e===void 0&&(e=new ea,CD.set(this.renderer,e)),e}createRenderTarget(e,r,i){return new Qf(e,r,i)}createCubeRenderTarget(e,r){return new s5(e,r)}createPMREMGenerator(){return new ISe(this.renderer)}includes(e){return this.nodes.includes(e)}_getBindGroup(e,r){const i=this.getBindGroupsCache(),o=[];let s=!0;for(const l of r)o.push(l),s=s&&l.groupNode.shared!==!0;let a;return s?(a=i.get(o),a===void 0&&(a=new sE(e,o,this.bindingsIndexes[e].group,o),i.set(o,a))):a=new sE(e,o,this.bindingsIndexes[e].group,o),a}getBindGroupArray(e,r){const i=this.bindings[r];let o=i[e];return o===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),i[e]=o=[]),o}getBindings(){let e=this.bindGroups;if(e===null){const r={},i=this.bindings;for(const o of TI)for(const s in i[o]){const a=i[o][s];(r[s]||(r[s]=[])).push(...a)}e=[];for(const o in r){const s=r[o],a=this._getBindGroup(o,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((r,i)=>r.bindings[0].groupNode.order-i.bindings[0].groupNode.order);for(let r=0;r<e.length;r++){const i=e[r];this.bindingsIndexes[i.name].group=r,i.index=r}}setHashNode(e,r){this.hashNodes[r]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==on.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const r=e.getUpdateBeforeType(),i=e.getUpdateAfterType();r!==on.NONE&&this.updateBeforeNodes.push(e.getSelf()),i!==on.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Ur||e.magFilter===kd||e.magFilter===zs||e.magFilter===Vi||e.minFilter===Ur||e.minFilter===kd||e.minFilter===zs||e.minFilter===Vi}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,r){return this.flowNodes[e].push(r),r}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,r=!0){const i=this.getDataFromNode(e);return i.cache===void 0&&(i.cache=new JS(r?this.getCache():null)),i.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const r=this.getDataFromNode(e);return r.usageCount=r.usageCount===void 0?1:r.usageCount+1,r.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateConst(e,r=null){if(r===null&&(e==="float"||e==="int"||e==="uint"?r=0:e==="bool"?r=!1:e==="color"?r=new Tt:e==="vec2"?r=new je:e==="vec3"?r=new Y:e==="vec4"&&(r=new qt)),e==="float")return Lv(r);if(e==="int")return`${Math.round(r)}`;if(e==="uint")return r>=0?`${Math.round(r)}u`:"0u";if(e==="bool")return r?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${Lv(r.r)}, ${Lv(r.g)}, ${Lv(r.b)} )`;const i=this.getTypeLength(e),o=this.getComponentType(e),s=a=>this.generateConst(o,a);if(i===2)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)} )`;if(i===3)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)}, ${s(r.z)} )`;if(i===4)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)}, ${s(r.z)}, ${s(r.w)} )`;if(i>4&&r&&(r.isMatrix3||r.isMatrix4))return`${this.getType(e)}( ${r.elements.map(s).join(", ")} )`;if(i>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,r){const i=this.attributes;for(const s of i)if(s.name===e)return s;const o=new vD(e,r);return i.push(o),o}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const r=e.type;if(e.isDataTexture){if(r===Xr)return"int";if(r===rr)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const r=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return r===null?null:r[1]==="b"?"bool":r[1]==="i"?"int":r[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,r="float"){if(e===1)return r;const i=Rge(e);return(r==="float"?"":r[0])+i}getTypeFromArray(e){return FSe.get(e.constructor)}getTypeFromAttribute(e){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array,o=e.itemSize,s=e.normalized;let a;return!(e instanceof ck)&&s!==!0&&(a=this.getTypeFromArray(i)),this.getTypeFromLength(o,a)}getTypeLength(e){const r=this.getVectorType(e),i=/vec([2-4])/.exec(r);return i!==null?Number(i[1]):r==="float"||r==="bool"||r==="int"||r==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,r){return this.getTypeFromLength(this.getTypeLength(e),r)}getIntegerType(e){const r=this.getComponentType(e);return r==="int"||r==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=KS(this.stack),this.stacks.push(f4()||this.stack),Uy(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,Uy(this.stacks.pop()),e}getDataFromNode(e,r=this.shaderStage,i=null){i=i===null?e.isGlobal(this)?this.globalCache:this.cache:i;let o=i.getData(e);return o===void 0&&(o={},i.setData(e,o)),o[r]===void 0&&(o[r]={}),o[r]}getNodeProperties(e,r="any"){const i=this.getDataFromNode(e,r);return i.properties||(i.properties={outputNode:null})}getBufferAttributeFromNode(e,r){const i=this.getDataFromNode(e);let o=i.bufferAttribute;if(o===void 0){const s=this.uniforms.index++;o=new vD("nodeAttribute"+s,r,e),this.bufferAttributes.push(o),i.bufferAttribute=o}return o}getStructTypeFromNode(e,r=this.shaderStage){const i=this.getDataFromNode(e,r);if(i.structType===void 0){const o=this.structs.index++;e.name=`StructType${o}`,this.structs[r].push(e),i.structType=e}return e}getUniformFromNode(e,r,i=this.shaderStage,o=null){const s=this.getDataFromNode(e,i,this.globalCache);let a=s.uniform;if(a===void 0){const l=this.uniforms.index++;a=new hSe(o||"nodeUniform"+l,r,e),this.uniforms[i].push(a),s.uniform=a}return a}getVarFromNode(e,r=null,i=e.getNodeType(this),o=this.shaderStage){const s=this.getDataFromNode(e,o);let a=s.variable;if(a===void 0){const l=this.vars[o]||(this.vars[o]=[]);r===null&&(r="nodeVar"+l.length),a=new N5(r,i),l.push(a),s.variable=a}return a}getVaryingFromNode(e,r=null,i=e.getNodeType(this)){const o=this.getDataFromNode(e,"any");let s=o.varying;if(s===void 0){const a=this.varyings,l=a.length;r===null&&(r="nodeVarying"+l),s=new pSe(r,i),a.push(s),o.varying=s}return s}getCodeFromNode(e,r,i=this.shaderStage){const o=this.getDataFromNode(e);let s=o.code;if(s===void 0){const a=this.codes[i]||(this.codes[i]=[]),l=a.length;s=new mSe("nodeCode"+l,r),a.push(s),o.code=s}return s}addFlowCodeHierarchy(e,r){const{flowCodes:i,flowCodeBlock:o}=this.getDataFromNode(e);let s=!0,a=r;for(;a;){if(o.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const l of i)this.addLineFlowCode(l)}addLineFlowCodeBlock(e,r,i){const o=this.getDataFromNode(e),s=o.flowCodes||(o.flowCodes=[]),a=o.flowCodeBlock||(o.flowCodeBlock=new WeakMap);s.push(r),a.set(i,!0)}addLineFlowCode(e,r=null){return e===""?this:(r!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(r,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const r=e.getNodeType(this),i=this.flowChildNode(e,r);return this.flowsData.set(e,i),i}buildFunctionNode(e){const r=new Dbe,i=this.currentFunctionNode;return this.currentFunctionNode=r,r.code=this.buildFunctionCode(e),this.currentFunctionNode=i,r}flowShaderNode(e){const r=e.layout,i={[Symbol.iterator](){let a=0;const l=Object.values(this);return{next:()=>({value:l[a],done:a++>=l.length})}}};for(const a of r.inputs)i[a.name]=new mbe(a.type,a.name);e.layout=null;const o=e.call(i),s=this.flowStagesNode(o,r.type);return e.layout=r,s}flowStagesNode(e,r=null){const i=this.flow,o=this.vars,s=this.cache,a=this.buildStage,l=this.stack,c={code:""};this.flow=c,this.vars={},this.cache=new JS,this.stack=KS();for(const u of EI)this.setBuildStage(u),c.result=e.build(this,r);return c.vars=this.getVars(this.shaderStage),this.flow=i,this.vars=o,this.cache=s,this.stack=l,this.setBuildStage(a),c}getFunctionOperator(){return null}flowChildNode(e,r=null){const i=this.flow,o={code:""};return this.flow=o,o.result=e.build(this,r),this.flow=i,o}flowNodeFromShaderStage(e,r,i=null,o=null){const s=this.shaderStage;this.setShaderStage(e);const a=this.flowChildNode(r,i);return o!==null&&(a.code+=`${this.tab+o} = ${a.result};
`),this.flowCode[e]=this.flowCode[e]+a.code,this.setShaderStage(s),a}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,r){return`${this.getType(e)} ${r}`}getVars(e){let r="";const i=this.vars[e];if(i!==void 0)for(const o of i)r+=`${this.getVar(o.type,o.name)}; `;return r}getUniforms(){console.warn("Abstract function.")}getCodes(e){const r=this.codes[e];let i="";if(r!==void 0)for(const o of r)i+=o.code+`
`;return i}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:r,renderer:i}=this;if(r!==null){let o=i.library.fromMaterial(r);o===null&&(console.error(`NodeMaterial: Material "${r.type}" is not compatible.`),o=new Tr),o.build(this)}else this.addFlow("compute",e);for(const o of EI){this.setBuildStage(o),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of TI){this.setShaderStage(s);const a=this.flowNodes[s];for(const l of a)o==="generate"?this.flowNode(l):l.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,r){if(r==="float"||r==="int"||r==="uint")return new CSe(e);if(r==="vec2"||r==="ivec2"||r==="uvec2")return new ESe(e);if(r==="vec3"||r==="ivec3"||r==="uvec3")return new TSe(e);if(r==="vec4"||r==="ivec4"||r==="uvec4")return new MSe(e);if(r==="color")return new RSe(e);if(r==="mat3")return new ASe(e);if(r==="mat4")return new NSe(e);throw new Error(`Uniform "${r}" not declared.`)}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}format(e,r,i){if(r=this.getVectorType(r),i=this.getVectorType(i),r===i||i===null||this.isReference(i))return e;const o=this.getTypeLength(r),s=this.getTypeLength(i);return o===16&&s===9?`${this.getType(i)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:o===9&&s===4?`${this.getType(i)}(${e}[0].xy, ${e}[1].xy)`:o>4||s>4||s===0?e:o===s?`${this.getType(i)}( ${e} )`:o>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(r)),i):s===4&&o>1?`${this.getType(i)}( ${this.format(e,r,"vec3")}, 1.0 )`:o===2?`${this.getType(i)}( ${this.format(e,r,"vec2")}, 0.0 )`:(o===1&&s>1&&r!==this.getComponentType(i)&&(e=`${this.getType(this.getComponentType(i))}( ${e} )`),`${this.getType(i)}( ${e} )`)}getSignature(){return`// Three.js r${qf} - Node System
`}}class ED{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,r){let i=e.get(r);return i===void 0&&(i={renderMap:new WeakMap,frameMap:new WeakMap},e.set(r,i)),i}updateBeforeNode(e){const r=e.getUpdateBeforeType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateBeforeMap,i);o.get(i)!==this.frameId&&e.updateBefore(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateBeforeMap,i);o.get(i)!==this.renderId&&e.updateBefore(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const r=e.getUpdateAfterType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateAfterMap,i);o.get(i)!==this.frameId&&e.updateAfter(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateAfterMap,i);o.get(i)!==this.renderId&&e.updateAfter(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.updateAfter(this)}updateNode(e){const r=e.getUpdateType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateMap,i);o.get(i)!==this.frameId&&e.update(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateMap,i);o.get(i)!==this.renderId&&e.update(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class CR{constructor(e,r,i=null,o="",s=!1){this.type=e,this.name=r,this.count=i,this.qualifier=o,this.isConst=s}}CR.isNodeFunctionInput=!0;class USe extends Au{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const r=e.context.lightingModel,i=this.colorNode,o=T5(this.light),s=e.context.reflectedLight;r.direct({lightDirection:o,lightColor:i,reflectedLight:s},e.stack,e)}}const o1=new fn,Fv=new fn;let Vh=null;class BSe extends Au{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Xt(new Y).setGroup(jt),this.halfWidth=Xt(new Y).setGroup(jt),this.updateType=on.RENDER}update(e){super.update(e);const{light:r}=this,i=e.camera.matrixWorldInverse;Fv.identity(),o1.copy(r.matrixWorld),o1.premultiply(i),Fv.extractRotation(o1),this.halfWidth.value.set(r.width*.5,0,0),this.halfHeight.value.set(0,r.height*.5,0),this.halfWidth.value.applyMatrix4(Fv),this.halfHeight.value.applyMatrix4(Fv)}setup(e){super.setup(e);let r,i;e.isAvailable("float32Filterable")?(r=gn(Vh.LTC_FLOAT_1),i=gn(Vh.LTC_FLOAT_2)):(r=gn(Vh.LTC_HALF_1),i=gn(Vh.LTC_HALF_2));const{colorNode:o,light:s}=this,a=e.context.lightingModel,l=bR(s),c=e.context.reflectedLight;a.directRectArea({lightColor:o,lightPosition:l,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:c,ltc_1:r,ltc_2:i},e.stack,e)}static setLTC(e){Vh=e}}class O5 extends Au{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Xt(0).setGroup(jt),this.penumbraCosNode=Xt(0).setGroup(jt),this.cutoffDistanceNode=Xt(0).setGroup(jt),this.decayExponentNode=Xt(0).setGroup(jt)}update(e){super.update(e);const{light:r}=this;this.coneCosNode.value=Math.cos(r.angle),this.penumbraCosNode.value=Math.cos(r.angle*(1-r.penumbra)),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}getSpotAttenuation(e){const{coneCosNode:r,penumbraCosNode:i}=this;return vu(r,i,e)}setup(e){super.setup(e);const r=e.context.lightingModel,{colorNode:i,cutoffDistanceNode:o,decayExponentNode:s,light:a}=this,l=bR(a).sub(Lr),c=l.normalize(),u=c.dot(T5(a)),d=this.getSpotAttenuation(u),f=l.length(),h=A5({lightDistance:f,cutoffDistance:o,decayExponent:s});let p=i.mul(d).mul(h);if(a.map){const y=zbe(a),v=gn(a.map,y.xy).onRenderUpdate(()=>a.map);p=y.mul(2).sub(1).abs().lessThan(1).all().select(p.mul(v),p)}const g=e.context.reflectedLight;r.direct({lightDirection:c,lightColor:p,reflectedLight:g},e.stack,e)}}class $Se extends O5{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const r=this.light.iesMap;let i=null;if(r&&r.isTexture===!0){const o=e.acos().mul(1/Math.PI);i=gn(r,pt(o,0),0).r}else i=super.getSpotAttenuation(e);return i}}class zSe extends Au{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class kSe extends Au{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=E5(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Xt(new Tt).setGroup(jt)}update(e){const{light:r}=this;super.update(e),this.lightPositionNode.object3d=r,this.groundColorNode.value.copy(r.groundColor).multiplyScalar(r.intensity)}setup(e){const{colorNode:r,groundColorNode:i,lightDirectionNode:o}=this,a=Es.dot(o).mul(.5).add(.5),l=jn(i,r,a);e.context.irradiance.addAssign(l)}}class VSe extends Au{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const r=[];for(let i=0;i<9;i++)r.push(new Y);this.lightProbe=Rl(r)}update(e){const{light:r}=this;super.update(e);for(let i=0;i<9;i++)this.lightProbe.array[i].copy(r.sh.coefficients[i]).multiplyScalar(r.intensity)}setup(e){const r=cSe(H4,this.lightProbe);e.context.irradiance.addAssign(r)}}class I5{parseFunction(){console.warn("Abstract function.")}}class ER{constructor(e,r,i="",o=""){this.type=e,this.inputs=r,this.name=i,this.precision=o}getCode(){console.warn("Abstract function.")}}ER.isNodeFunction=!0;const GSe=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,HSe=/[a-z_0-9]+/ig,TD="#pragma main",jSe=n=>{n=n.trim();const e=n.indexOf(TD),r=e!==-1?n.slice(e+TD.length):n,i=r.match(GSe);if(i!==null&&i.length===5){const o=i[4],s=[];let a=null;for(;(a=HSe.exec(o))!==null;)s.push(a);const l=[];let c=0;for(;c<s.length;){const g=s[c][0]==="const";g===!0&&c++;let y=s[c][0];y==="in"||y==="out"||y==="inout"?c++:y="";const v=s[c++][0];let m=Number.parseInt(s[c][0]);Number.isNaN(m)===!1?c++:m=null;const x=s[c++][0];l.push(new CR(v,x,m,y,g))}const u=r.substring(i[0].length),d=i[3]!==void 0?i[3]:"",f=i[2],h=i[1]!==void 0?i[1]:"",p=e!==-1?n.slice(0,e):"";return{type:f,inputs:l,name:d,precision:h,inputsCode:o,blockCode:u,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class WSe extends ER{constructor(e){const{type:r,inputs:i,name:o,precision:s,inputsCode:a,blockCode:l,headerCode:c}=jSe(e);super(r,i,o,s),this.inputsCode=a,this.blockCode=l,this.headerCode=c}getCode(e=this.name){let r;const i=this.blockCode;if(i!==""){const{type:o,inputsCode:s,headerCode:a,precision:l}=this;let c=`${o} ${e} ( ${s.trim()} )`;l!==""&&(c=`${l} ${c}`),r=a+c+i}else r="";return r}}class qSe extends I5{parseFunction(e){return new WSe(e)}}const MD=new WeakMap;class XSe extends pc{constructor(e,r){super(),this.renderer=e,this.backend=r,this.nodeFrame=new ED,this.nodeBuilderCache=new Map,this.callHashCache=new ea,this.groupsData=new ea}updateGroup(e){const r=e.groupNode,i=r.name;if(i===g4.name)return!0;if(i===jt.name){const a=this.get(e),l=this.nodeFrame.renderId;return a.renderId!==l?(a.renderId=l,!0):!1}if(i===cve.name){const a=this.get(e),l=this.nodeFrame.frameId;return a.frameId!==l?(a.frameId=l,!0):!1}const o=[r,e];let s=this.groupsData.get(o);return s===void 0&&this.groupsData.set(o,s={}),s.version!==r.version?(s.version=r.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const{nodeBuilderCache:o}=this,s=this.getForRenderCacheKey(e);if(i=o.get(s),i===void 0){const a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,a.build(),i=this._createNodeBuilderState(a),o.set(s,i)}i.usedTimes++,r.nodeBuilderState=i}return i}delete(e){if(e.isRenderObject){const r=this.get(e).nodeBuilderState;r.usedTimes--,r.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const o=this.backend.createNodeBuilder(e,this.renderer);o.build(),i=this._createNodeBuilderState(o),r.nodeBuilderState=i}return i}_createNodeBuilderState(e){return new fSe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getCacheKey(e,r){const i=[e,r],o=this.renderer.info.calls;let s=this.callHashCache.get(i);if(s===void 0||s.callId!==o){const a=this.getEnvironmentNode(e),l=this.getFogNode(e),c=[];r&&c.push(r.getCacheKey(!0)),a&&c.push(a.getCacheKey()),l&&c.push(l.getCacheKey()),c.push(this.renderer.shadowMap.enabled?1:0),s={callId:o,cacheKey:i4(c)},this.callHashCache.set(i,s)}return s.cacheKey}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const r=this.get(e),i=e.background;if(i){const o=e.backgroundBlurriness===0&&r.backgroundBlurriness>0||e.backgroundBlurriness>0&&r.backgroundBlurriness===0;if(r.background!==i||o){let s=null;if(i.isCubeTexture===!0||i.mapping===tc||i.mapping===nc||i.mapping===fu)if(e.backgroundBlurriness>0||i.mapping===fu)s=v5(i);else{let a;i.isCubeTexture===!0?a=Im(i):a=gn(i),s=l5(a)}else i.isTexture===!0?s=gn(i,Dm.flipY()).setUpdateMatrix(!0):i.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",i);r.backgroundNode=s,r.background=i,r.backgroundBlurriness=e.backgroundBlurriness}}else r.backgroundNode&&(delete r.backgroundNode,delete r.background)}updateFog(e){const r=this.get(e),i=e.fog;if(i){if(r.fog!==i){let o=null;if(i.isFogExp2){const s=Nn("color","color",i).setGroup(jt),a=Nn("density","float",i).setGroup(jt);o=Bbe(s,a)}else if(i.isFog){const s=Nn("color","color",i).setGroup(jt),a=Nn("near","float",i).setGroup(jt),l=Nn("far","float",i).setGroup(jt);o=Fbe(s,a,l)}else console.error("WebGPUNodes: Unsupported fog configuration.",i);r.fogNode=o,r.fog=i}}else delete r.fogNode,delete r.fog}updateEnvironment(e){const r=this.get(e),i=e.environment;if(i){if(r.environment!==i){let o=null;i.isCubeTexture===!0?o=Im(i):i.isTexture===!0?o=gn(i):console.error("Nodes: Unsupported environment configuration.",i),r.environmentNode=o,r.environment=i}}else r.environmentNode&&(delete r.environmentNode,delete r.environment)}getNodeFrame(e=this.renderer,r=null,i=null,o=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=r,a.object=i,a.camera=o,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return MD.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const r=this.renderer,i=this.getOutputCacheKey(),o=gn(e,Dm).renderOutput(r.toneMapping,r.currentColorSpace);return MD.set(e,i),o}updateBefore(e){const r=e.getNodeBuilderState();for(const i of r.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(i)}updateAfter(e){const r=e.getNodeBuilderState();for(const i of r.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(i)}updateForCompute(e){const r=this.getNodeFrame(),i=this.getForCompute(e);for(const o of i.updateNodes)r.updateNode(o)}updateForRender(e){const r=this.getNodeFrameForRender(e),i=e.getNodeBuilderState();for(const o of i.updateNodes)r.updateNode(o)}needsRefresh(e){const r=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,r)}dispose(){super.dispose(),this.nodeFrame=new ED,this.nodeBuilderCache=new Map}}const s1=new us;class jy{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",e===null?(this.intersectionPlanes=[],this.unionPlanes=[],this.viewNormalMatrix=new Vt,this.clippingGroupContexts=new WeakMap,this.shadowPass=!1):(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix),this.parentVersion=null}projectPlanes(e,r,i){const o=e.length;for(let s=0;s<o;s++){s1.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=r[i+s],l=s1.normal;a.x=-l.x,a.y=-l.y,a.z=-l.z,a.w=s1.constant}}updateGlobal(e,r){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowNodeMaterial,this.viewMatrix=r.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,r){let i=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==r.clipIntersection&&(this.clipIntersection=r.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const o=r.clippingPlanes,s=o.length;let a,l;if(this.clipIntersection?(a=this.intersectionPlanes,l=e.intersectionPlanes.length):(a=this.unionPlanes,l=e.unionPlanes.length),a.length!==l+s){a.length=l+s;for(let c=0;c<s;c++)a[l+c]=new qt;i=!0}this.projectPlanes(o,a,l),i&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let r=this.clippingGroupContexts.get(e);return r===void 0&&(r=new jy(this),this.clippingGroupContexts.set(e,r)),r.update(this,e),r}get unionClippingCount(){return this.unionPlanes.length}}class KSe{constructor(e,r){this.scene=e,this.camera=r}clone(){return Object.assign(new this.constructor,this)}}class YSe{constructor(){this.lists=new ea}get(e,r){const i=this.lists,o=[e,r];let s=i.get(o);return s===void 0&&(s=new KSe(e,r),i.set(o,s)),s}dispose(){this.lists=new ea}}class D5{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let r=null;const i=this.getMaterialNodeClass(e.type);if(i!==null){r=new i;for(const o in e)r[o]=e[o]}return r}addToneMapping(e,r){this.addType(e,r,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,r){this.addType(e,r,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,r){this.addClass(e,r,this.lightNodes)}addType(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r=="function"||typeof r=="object")throw new Error(`Base class ${r} is not a class.`);i.set(r,e)}addClass(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r!="function")throw new Error(`Base class ${r.name} is not a class.`);i.set(r,e)}}const QSe=new M5;class ZSe extends ea{constructor(){super()}createNode(e=[]){return new M5().setLights(e)}getNode(e,r){if(e.isQuadMesh)return QSe;const i=[e,r];let o=this.get(i);return o===void 0&&(o=this.createNode(),this.set(i,o)),o}}const RD=new FM,Uv=new je,a1=new qt,l1=new s_,Bv=new fn,vl=new qt;class JSe{constructor(e,r={}){this.isRenderer=!0;const{logarithmicDepthBuffer:i=!1,alpha:o=!0,depth:s=!0,stencil:a=!1,antialias:l=!1,samples:c=0,getFallback:u=null}=r;this.domElement=e.getDomElement(),this.backend=e,this.samples=c||l===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=o,this.logarithmicDepthBuffer=i,this.outputColorSpace=Dt,this.toneMapping=Qi,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new tbe,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new D5,this.lighting=new ZSe,this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new qt(0,0,this._width,this._height),this._scissor=new qt(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new S5(new Tr),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const d=this.alpha===!0?0:1;this._clearColor=new _R(0,0,0,d),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:aM},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(f,h,p)=>{await this.compileAsync(f,h);const g=this._renderLists.get(f,h),y=this._renderContexts.get(f,h,this._renderTarget),v=f.overrideMaterial||p.material,m=this._objects.get(p,v,f,h,g.lightsNode,y,y.clippingContext),{fragmentShader:x,vertexShader:b}=m.getNodeBuilderState();return{fragmentShader:x,vertexShader:b}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,r)=>{let i=this.backend;try{await i.init(this)}catch(o){if(this._getFallback!==null)try{this.backend=i=this._getFallback(o),await i.init(this)}catch(s){r(s);return}else{r(o);return}}this._nodes=new XSe(this,i),this._animation=new j_e(this._nodes,this.info),this._attributes=new Z_e(i),this._background=new uSe(this,this._nodes),this._geometries=new ebe(this._attributes,this.info),this._textures=new pbe(this,i,this.info),this._pipelines=new obe(i,this._nodes),this._bindings=new sbe(i,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new K_e(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new cbe(this.lighting),this._bundles=new YSe,this._renderContexts=new fbe,this._animation.start(),this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,r,i=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const o=this._nodes.nodeFrame,s=o.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,c=this._compilationPromises,u=e.isScene===!0?e:RD;i===null&&(i=e);const d=this._renderTarget,f=this._renderContexts.get(i,r,d),h=this._activeMipmapLevel,p=[];this._currentRenderContext=f,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=p,o.renderId++,o.update(),f.depth=this.depth,f.stencil=this.stencil,f.clippingContext||(f.clippingContext=new jy),f.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,d);const g=this._renderLists.get(e,r);if(g.begin(),this._projectObject(e,r,0,g,f.clippingContext),i!==e&&i.traverseVisible(function(b){b.isLight&&b.layers.test(r.layers)&&g.pushLight(b)}),g.finish(),d!==null){this._textures.updateRenderTarget(d,h);const b=this._textures.get(d);f.textures=b.textures,f.depthTexture=b.depthTexture}else f.textures=null,f.depthTexture=null;this._nodes.updateScene(u),this._background.update(u,g,f);const y=g.opaque,v=g.transparent,m=g.transparentDoublePass,x=g.lightsNode;this.opaque===!0&&y.length>0&&this._renderObjects(y,r,u,x),this.transparent===!0&&v.length>0&&this._renderTransparents(v,m,r,u,x),o.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=l,this._compilationPromises=c,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(p)}async renderAsync(e,r){this._initialized===!1&&await this.init();const i=this._renderScene(e,r);await this.backend.resolveTimestampAsync(i,"render")}async waitForGPU(){await this.backend.waitForGPU()}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}_onDeviceLost(e){let r=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(r+=`
Reason: ${e.reason}`),console.error(r),this._isDeviceLost=!0}_renderBundle(e,r,i){const{bundleGroup:o,camera:s,renderList:a}=e,l=this._currentRenderContext,c=this._bundles.get(o,s),u=this.backend.get(c);u.renderContexts===void 0&&(u.renderContexts=new Set);const d=o.version!==u.version,f=u.renderContexts.has(l)===!1||d;if(u.renderContexts.add(l),f){this.backend.beginBundle(l),(u.renderObjects===void 0||d)&&(u.renderObjects=[]),this._currentRenderBundle=c;const h=a.opaque;this.opaque===!0&&h.length>0&&this._renderObjects(h,s,r,i),this._currentRenderBundle=null,this.backend.finishBundle(l,c),u.version=o.version}else{const{renderObjects:h}=u;for(let p=0,g=h.length;p<g;p++){const y=h[p];this._nodes.needsRefresh(y)&&(this._nodes.updateBefore(y),this._nodes.updateForRender(y),this._bindings.updateForRender(y),this._nodes.updateAfter(y))}}this.backend.addBundle(l,c)}render(e,r){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,r);this._renderScene(e,r)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:r}=this;if(e!==Qi===!1&&r!==Vo===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(Uv),{depth:l,stencil:c}=this;let u=this._frameBufferTarget;return u===null&&(u=new Qf(s,a,{depthBuffer:l,stencilBuffer:c,type:Yr,format:ti,colorSpace:Vo,generateMipmaps:!1,minFilter:Ur,magFilter:Ur,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u),u.depthBuffer=l,u.stencilBuffer=c,u.setSize(s,a),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u}_renderScene(e,r,i=!0){if(this._isDeviceLost===!0)return;const o=i?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,l=this._currentRenderContext,c=this._currentRenderObjectFunction,u=e.isScene===!0?e:RD,d=this._renderTarget,f=this._activeCubeFace,h=this._activeMipmapLevel;let p;o!==null?(p=o,this.setRenderTarget(p)):p=d;const g=this._renderContexts.get(e,r,p);this._currentRenderContext=g,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const y=this.coordinateSystem;r.coordinateSystem!==y&&(r.coordinateSystem=y,r.updateProjectionMatrix()),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),r.parent===null&&r.matrixWorldAutoUpdate===!0&&r.updateMatrixWorld();let v=this._viewport,m=this._scissor,x=this._pixelRatio;p!==null&&(v=p.viewport,m=p.scissor,x=1),this.getDrawingBufferSize(Uv),a1.set(0,0,Uv.width,Uv.height);const b=v.minDepth===void 0?0:v.minDepth,S=v.maxDepth===void 0?1:v.maxDepth;g.viewportValue.copy(v).multiplyScalar(x).floor(),g.viewportValue.width>>=h,g.viewportValue.height>>=h,g.viewportValue.minDepth=b,g.viewportValue.maxDepth=S,g.viewport=g.viewportValue.equals(a1)===!1,g.scissorValue.copy(m).multiplyScalar(x).floor(),g.scissor=this._scissorTest&&g.scissorValue.equals(a1)===!1,g.scissorValue.width>>=h,g.scissorValue.height>>=h,g.clippingContext||(g.clippingContext=new jy),g.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,p),Bv.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),l1.setFromProjectionMatrix(Bv,y);const w=this._renderLists.get(e,r);if(w.begin(),this._projectObject(e,r,0,w,g.clippingContext),w.finish(),this.sortObjects===!0&&w.sort(this._opaqueSort,this._transparentSort),p!==null){this._textures.updateRenderTarget(p,h);const P=this._textures.get(p);g.textures=P.textures,g.depthTexture=P.depthTexture,g.width=P.width,g.height=P.height,g.renderTarget=p,g.depth=p.depthBuffer,g.stencil=p.stencilBuffer}else g.textures=null,g.depthTexture=null,g.width=this.domElement.width,g.height=this.domElement.height,g.depth=this.depth,g.stencil=this.stencil;g.width>>=h,g.height>>=h,g.activeCubeFace=f,g.activeMipmapLevel=h,g.occlusionQueryCount=w.occlusionQueryCount,this._nodes.updateScene(u),this._background.update(u,w,g),this.backend.beginRender(g);const{bundles:C,lightsNode:E,transparentDoublePass:M,transparent:T,opaque:R}=w;if(C.length>0&&this._renderBundles(C,u,E),this.opaque===!0&&R.length>0&&this._renderObjects(R,r,u,E),this.transparent===!0&&T.length>0&&this._renderTransparents(T,M,r,u,E),this.backend.finishRender(g),s.renderId=a,this._currentRenderContext=l,this._currentRenderObjectFunction=c,o!==null){this.setRenderTarget(d,f,h);const P=this._quad;this._nodes.hasOutputChange(p.texture)&&(P.material.fragmentNode=this._nodes.getOutputNode(p.texture),P.material.needsUpdate=!0),this._renderScene(P,P.camera,!1)}return u.onAfterRender(this,e,r,p),g}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,r,i){this._width=e,this._height=r,this._pixelRatio=i,this.domElement.width=Math.floor(e*i),this.domElement.height=Math.floor(r*i),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setSize(e,r,i=!0){this._width=e,this._height=r,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(r*this._pixelRatio),i===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=r+"px"),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const r=this._scissor;return e.x=r.x,e.y=r.y,e.width=r.width,e.height=r.height,e}setScissor(e,r,i,o){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,r,i,o)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,r,i,o,s=0,a=1){const l=this._viewport;e.isVector4?l.copy(e):l.set(e,r,i,o),l.minDepth=s,l.maxDepth=a}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,r=1){this._clearColor.set(e),this._clearColor.a=r}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const r=this._currentRenderContext;return r&&this.backend.isOccluded(r,e)}clear(e=!0,r=!0,i=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,r,i);const o=this._renderTarget||this._getFrameBufferTarget();let s=null;if(o!==null&&(this._textures.updateRenderTarget(o),s=this._textures.get(o)),this.backend.clear(e,r,i,s),o!==null&&this._renderTarget===null){const a=this._quad;this._nodes.hasOutputChange(o.texture)&&(a.material.fragmentNode=this._nodes.getOutputNode(o.texture),a.material.needsUpdate=!0),this._renderScene(a,a.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,r=!0,i=!0){this._initialized===!1&&await this.init(),this.clear(e,r,i)}clearColorAsync(){return this.clearAsync(!0,!1,!1)}clearDepthAsync(){return this.clearAsync(!1,!0,!1)}clearStencilAsync(){return this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?Qi:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?Vo:this.outputColorSpace}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,r=0,i=0){this._renderTarget=e,this._activeCubeFace=r,this._activeMipmapLevel=i}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this.isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const r=this._nodes.nodeFrame,i=r.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,r.renderId=this.info.calls;const o=this.backend,s=this._pipelines,a=this._bindings,l=this._nodes,c=Array.isArray(e)?e:[e];if(c[0]===void 0||c[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");o.beginCompute(e);for(const u of c){if(s.has(u)===!1){const h=()=>{u.removeEventListener("dispose",h),s.delete(u),a.delete(u),l.delete(u)};u.addEventListener("dispose",h);const p=u.onInitFunction;p!==null&&p.call(u,{renderer:this})}l.updateForCompute(u),a.updateForCompute(u);const d=a.getForCompute(u),f=s.getForCompute(u,d);o.compute(e,u,d,f)}o.finishCompute(e),r.renderId=i}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e),await this.backend.resolveTimestampAsync(e,"compute")}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){if(this._initialized===!1)return console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),!1;this._textures.updateTexture(e)}copyFramebufferToTexture(e,r=null){if(r!==null)if(r.isVector2)r=vl.set(r.x,r.y,e.image.width,e.image.height).floor();else if(r.isVector4)r=vl.copy(r).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else r=vl.set(0,0,e.image.width,e.image.height);let i=this._currentRenderContext,o;i!==null?o=i.renderTarget:(o=this._renderTarget||this._getFrameBufferTarget(),o!==null&&(this._textures.updateRenderTarget(o),i=this._textures.get(o))),this._textures.updateTexture(e,{renderTarget:o}),this.backend.copyFramebufferToTexture(e,i,r)}copyTextureToTexture(e,r,i=null,o=null,s=0){this._textures.updateTexture(e),this._textures.updateTexture(r),this.backend.copyTextureToTexture(e,r,i,o,s)}readRenderTargetPixelsAsync(e,r,i,o,s,a=0,l=0){return this.backend.copyTextureToBuffer(e.textures[a],r,i,o,s,l)}_projectObject(e,r,i,o,s){if(e.visible===!1)return;if(e.layers.test(r.layers)){if(e.isGroup)i=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(r);else if(e.isLight)o.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||l1.intersectsSprite(e)){this.sortObjects===!0&&vl.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Bv);const{geometry:c,material:u}=e;u.visible&&o.push(e,c,u,i,vl.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||l1.intersectsObject(e))){const{geometry:c,material:u}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),vl.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Bv)),Array.isArray(u)){const d=c.groups;for(let f=0,h=d.length;f<h;f++){const p=d[f],g=u[p.materialIndex];g&&g.visible&&o.push(e,c,g,i,vl.z,p,s)}}else u.visible&&o.push(e,c,u,i,vl.z,null,s)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const c=o;o=this._renderLists.get(e,r),o.begin(),c.pushBundle({bundleGroup:e,camera:r,renderList:o}),o.finish()}const l=e.children;for(let c=0,u=l.length;c<u;c++)this._projectObject(l[c],r,i,o,s)}_renderBundles(e,r,i){for(const o of e)this._renderBundle(o,r,i)}_renderTransparents(e,r,i,o,s){if(r.length>0){for(const{material:a}of r)a.side=er;this._renderObjects(r,i,o,s,"backSide");for(const{material:a}of r)a.side=Cs;this._renderObjects(e,i,o,s);for(const{material:a}of r)a.side=Ei}else this._renderObjects(e,i,o,s)}_renderObjects(e,r,i,o,s=null){for(let a=0,l=e.length;a<l;a++){const c=e[a],{object:u,geometry:d,material:f,group:h,clippingContext:p}=c;if(r.isArrayCamera){const g=r.cameras;for(let y=0,v=g.length;y<v;y++){const m=g[y];if(u.layers.test(m.layers)){const x=m.viewport,b=x.minDepth===void 0?0:x.minDepth,S=x.maxDepth===void 0?1:x.maxDepth,w=this._currentRenderContext.viewportValue;w.copy(x).multiplyScalar(this._pixelRatio).floor(),w.minDepth=b,w.maxDepth=S,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(u,i,m,d,f,h,o,p,s)}}}else this._currentRenderObjectFunction(u,i,r,d,f,h,o,p,s)}}renderObject(e,r,i,o,s,a,l,c=null,u=null){let d,f,h;if(e.onBeforeRender(this,r,i,o,s,a),r.overrideMaterial!==null){const p=r.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(d=p.positionNode,p.positionNode=s.positionNode),p.alphaTest=s.alphaTest,p.alphaMap=s.alphaMap,p.isShadowNodeMaterial&&(p.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(h=p.depthNode,p.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(f=p.colorNode,p.colorNode=s.castShadowNode)),s=p}s.transparent===!0&&s.side===Ei&&s.forceSinglePass===!1?(s.side=er,this._handleObjectFunction(e,s,r,i,l,a,c,"backSide"),s.side=Cs,this._handleObjectFunction(e,s,r,i,l,a,c,u),s.side=Ei):this._handleObjectFunction(e,s,r,i,l,a,c,u),d!==void 0&&(r.overrideMaterial.positionNode=d),h!==void 0&&(r.overrideMaterial.depthNode=h),f!==void 0&&(r.overrideMaterial.colorNode=f),e.onAfterRender(this,r,i,o,s,a)}_renderObjectDirect(e,r,i,o,s,a,l,c){const u=this._objects.get(e,r,i,o,s,this._currentRenderContext,l,c);u.drawRange=e.geometry.drawRange,u.group=a;const d=this._nodes.needsRefresh(u);d&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.scene),this.backend.draw(u,this.info),d&&this._nodes.updateAfter(u)}_createObjectPipeline(e,r,i,o,s,a,l){const c=this._objects.get(e,r,i,o,s,this._currentRenderContext,a,l);this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class TR{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function e1e(n){return n+(Nl-n%Nl)%Nl}class L5 extends TR{constructor(e,r=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=r}get byteLength(){return e1e(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class F5 extends L5{constructor(e,r=null){super(e,r),this.isUniformBuffer=!0}}let t1e=0;class U5 extends F5{constructor(e,r){super("UniformBuffer_"+t1e++,e?e.value:null),this.nodeUniform=e,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class n1e extends F5{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const r=this.uniforms.indexOf(e);return r!==-1&&this.uniforms.splice(r,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const r=this.byteLength;e=new Float32Array(new ArrayBuffer(r)),this._buffer=e}return e}get byteLength(){let e=0;for(let r=0,i=this.uniforms.length;r<i;r++){const o=this.uniforms[r],{boundary:s,itemSize:a}=o,l=e%Nl,c=Nl-l;l!==0&&c-s<0?e+=Nl-l:l%s!==0&&(e+=l%s),o.offset=e/this.bytesPerElement,e+=a*this.bytesPerElement}return Math.ceil(e/Nl)*Nl}update(){let e=!1;for(const r of this.uniforms)this.updateByType(r)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s]!==o){const l=this._getBufferForType(a);l[s]=i[s]=o,r=!0}return r}updateVector2(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,r=!0}return r}updateVector3(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y||i[s+2]!==o.z){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,l[s+2]=i[s+2]=o.z,r=!0}return r}updateVector4(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y||i[s+2]!==o.z||i[s+4]!==o.w){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,l[s+2]=i[s+2]=o.z,l[s+3]=i[s+3]=o.w,r=!0}return r}updateColor(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset;if(i[s+0]!==o.r||i[s+1]!==o.g||i[s+2]!==o.b){const a=this.buffer;a[s+0]=i[s+0]=o.r,a[s+1]=i[s+1]=o.g,a[s+2]=i[s+2]=o.b,r=!0}return r}updateMatrix3(e){let r=!1;const i=this.values,o=e.getValue().elements,s=e.offset;if(i[s+0]!==o[0]||i[s+1]!==o[1]||i[s+2]!==o[2]||i[s+4]!==o[3]||i[s+5]!==o[4]||i[s+6]!==o[5]||i[s+8]!==o[6]||i[s+9]!==o[7]||i[s+10]!==o[8]){const a=this.buffer;a[s+0]=i[s+0]=o[0],a[s+1]=i[s+1]=o[1],a[s+2]=i[s+2]=o[2],a[s+4]=i[s+4]=o[3],a[s+5]=i[s+5]=o[4],a[s+6]=i[s+6]=o[5],a[s+8]=i[s+8]=o[6],a[s+9]=i[s+9]=o[7],a[s+10]=i[s+10]=o[8],r=!0}return r}updateMatrix4(e){let r=!1;const i=this.values,o=e.getValue().elements,s=e.offset;return i1e(i,o,s)===!1&&(this.buffer.set(o,s),r1e(i,o,s),r=!0),r}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function r1e(n,e,r){for(let i=0,o=e.length;i<o;i++)n[r+i]=e[i]}function i1e(n,e,r){for(let i=0,o=e.length;i<o;i++)if(n[r+i]!==e[i])return!1;return!0}let o1e=0;class B5 extends n1e{constructor(e,r){super(e),this.id=o1e++,this.groupNode=r,this.isNodeUniformsGroup=!0}getNodes(){const e=[];for(const r of this.uniforms){const i=r.nodeUniform.node;if(!i)throw new Error("NodeUniformsGroup: Uniform has no node.");e.push(i)}return e}}let s1e=0;class a1e extends TR{constructor(e,r){super(e),this.id=s1e++,this.texture=r,this.version=r?r.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:r}=this;return e!==this.generation?(this.generation=e,!0):r.isVideoTexture}update(){const{texture:e,version:r}=this;return r!==e.version?(this.version=e.version,!0):!1}}class C_ extends a1e{constructor(e,r,i,o=null){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i,this.access=o}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class $5 extends C_{constructor(e,r,i,o){super(e,r,i,o),this.isSampledCubeTexture=!0}}class z5 extends C_{constructor(e,r,i,o){super(e,r,i,o),this.isSampledTexture3D=!0}}const l1e={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},c1e={low:"lowp",medium:"mediump",high:"highp"},AD={swizzleAssign:!0,storageBuffer:!1},ND=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class u1e extends P5{constructor(e,r){super(e,r,new qSe),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]},this.useComparisonMethod=!0}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==mo}getMethod(e){return l1e[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),o=[];for(const a of r.inputs)o.push(this.getType(a.type)+" "+a.name);return`${this.getType(r.type)} ${r.name}( ${o.join(", ")} ) {

	${i.vars}

${i.code}
	return ${i.result};

}`}setupPBO(e){const r=e.value;if(r.pbo===void 0){const i=r.array,o=r.count*r.itemSize,{itemSize:s}=r,a=r.array.constructor.name.toLowerCase().includes("int");let l=a?Xf:ag;s===2?l=a?Kf:mu:s===3?l=a?yle:sg:s===4&&(l=a?Yf:ti);const c={Float32Array:hr,Uint8Array:hi,Uint16Array:vs,Uint32Array:rr,Int8Array:Zc,Int16Array:Jc,Int32Array:Xr,Uint8ClampedArray:hi},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(o/s))));let d=Math.ceil(o/s/u);u*d*s<o&&d++;const f=u*d*s,h=new i.constructor(f);h.set(i,0),r.array=h;const p=new _ce(r.array,u,d,l,c[r.array.constructor.name]||hr);p.needsUpdate=!0,p.isPBOTexture=!0;const g=new hg(p,null,null);g.setPrecision("high"),r.pboNode=g,r.pbo=g.value,this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,r=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?r.charAt(0)+"_"+e.name:super.getPropertyName(e,r)}generatePBO(e){const{node:r,indexNode:i}=e,o=r.value;if(this.renderer.backend.has(o)){const d=this.renderer.backend.get(o);d.pbo=o.pbo}const s=this.getUniformFromNode(o.pboNode,"texture",this.shaderStage,this.context.label),a=this.getPropertyName(s);this.increaseUsage(i);const l=i.build(this,"uint"),c=this.getDataFromNode(e);let u=c.propertyName;if(u===void 0){const d=this.getVarFromNode(e);u=this.getPropertyName(d);const f=this.getDataFromNode(r);let h=f.propertySizeName;h===void 0&&(h=u+"Size",this.getVarFromNode(r,h,"uint"),this.addLineFlowCode(`${h} = uint( textureSize( ${a}, 0 ).x )`,e),f.propertySizeName=h);const{itemSize:p}=o,g="."+nh.join("").slice(0,p),y=`ivec2(${l} % ${h}, ${l} / ${h})`,v=this.generateTextureLoad(null,a,y,null,"0");let m="vec4";o.pbo.type===rr?m="uvec4":o.pbo.type===Xr&&(m="ivec4"),this.addLineFlowCode(`${u} = ${m}(${v})${g}`,e),c.propertyName=u}return u}generateTextureLoad(e,r,i,o,s="0"){return o?`texelFetch( ${r}, ivec3( ${i}, ${o} ), ${s} )`:`texelFetch( ${r}, ${i}, ${s} )`}generateTexture(e,r,i,o){return e.isDepthTexture?`texture( ${r}, ${i} ).x`:(o&&(i=`vec3( ${i}, ${o} )`),`texture( ${r}, ${i} )`)}generateTextureLevel(e,r,i,o){return`textureLod( ${r}, ${i}, ${o} )`}generateTextureBias(e,r,i,o){return`texture( ${r}, ${i}, ${o} )`}generateTextureGrad(e,r,i,o){return`textureGrad( ${r}, ${i}, ${o[0]}, ${o[1]} )`}generateTextureCompare(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`texture( ${r}, vec3( ${i}, ${o} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const o of i)r.push(`${this.getVar(o.type,o.name)};`);return r.join(`
	`)}getUniforms(e){const r=this.uniforms[e],i=[],o={};for(const a of r){let l=null,c=!1;if(a.type==="texture"){const d=a.node.value;let f="";d.isDataTexture===!0&&(d.type===rr?f="u":d.type===Xr&&(f="i")),d.compareFunction?l=`sampler2DShadow ${a.name};`:d.isDataArrayTexture===!0||d.isCompressedArrayTexture===!0?l=`${f}sampler2DArray ${a.name};`:l=`${f}sampler2D ${a.name};`}else if(a.type==="cubeTexture")l=`samplerCube ${a.name};`;else if(a.type==="texture3D")l=`sampler3D ${a.name};`;else if(a.type==="buffer"){const d=a.node,f=this.getType(d.bufferType),h=d.bufferCount,p=h>0?h:"";l=`${d.name} {
	${f} ${a.name}[${p}];
};
`}else l=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,c=!0;const u=a.node.precision;if(u!==null&&(l=c1e[u]+" "+l),c){l="	"+l;const d=a.groupNode.name;(o[d]||(o[d]=[])).push(l)}else l="uniform "+l,i.push(l)}let s="";for(const a in o){const l=o[a];s+=this._getGLSLUniformStruct(e+"_"+a,l.join(`
`))+`
`}return s+=i.join(`
`),s}getTypeFromAttribute(e){let r=super.getTypeFromAttribute(e);if(/^[iu]/.test(r)&&e.gpuType!==Xr){let i=e;e.isInterleavedBufferAttribute&&(i=e.data);const o=i.array;o instanceof Uint32Array||o instanceof Int32Array||(r=r.slice(1))}return r}getAttributes(e){let r="";if(e==="vertex"||e==="compute"){const i=this.getAttributesArray();let o=0;for(const s of i)r+=`layout( location = ${o++} ) in ${s.type} ${s.name};
`}return r}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let o=0;o<i.length;o++){const s=i[o];r.push(`layout( location = ${o} ) out ${s} m${o};`)}return r.join(`
`)}getStructs(e){const r=[],i=this.structs[e];if(i.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let o=0,s=i.length;o<s;o++){const a=i[o];let l=`
`;l+=this.getStructMembers(a),l+=`
`,r.push(l)}return r.join(`

`)}getVaryings(e){let r="";const i=this.varyings;if(e==="vertex"||e==="compute")for(const o of i){e==="compute"&&(o.needsInterpolation=!0);const s=this.getType(o.type),a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";r+=`${a}${o.needsInterpolation?"out":"/*out*/"} ${s} ${o.name};
`}else if(e==="fragment"){for(const o of i)if(o.needsInterpolation){const s=this.getType(o.type),a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";r+=`${a}in ${s} ${o.name};
`}}for(const o of this.builtins[e])r+=`${o};
`;return r}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((i,o)=>i*o,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,r,i=this.shaderStage){const o=this.extensions[i]||(this.extensions[i]=new Map);o.has(e)===!1&&o.set(e,{name:e,behavior:r})}getExtensions(e){const r=[];if(e==="vertex"){const o=this.renderer.backend.extensions;this.object.isBatchedMesh&&o.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const i=this.extensions[e];if(i!==void 0)for(const{name:o,behavior:s}of i.values())r.push(`#extension ${o} : ${s}`);return r.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let r=AD[e];if(r===void 0){let i;switch(r=!1,e){case"float32Filterable":i="OES_texture_float_linear";break;case"clipDistance":i="WEBGL_clip_cull_distance";break}if(i!==void 0){const o=this.renderer.backend.extensions;o.has(i)&&(o.get(i),r=!0)}AD[e]=r}return r}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}registerTransform(e,r){this.transforms.push({varyingName:e,attributeNode:r})}getTransforms(){const e=this.transforms;let r="";for(let i=0;i<e.length;i++){const o=e[i],s=this.getPropertyName(o.attributeNode);r+=`${o.varyingName} = ${s};
	`}return r}_getGLSLUniformStruct(e,r){return`
layout( std140 ) uniform ${e} {
${r}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${ND}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${ND}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){let i=`// code

`;i+=this.flowCode[r];const o=this.flowNodes[r],s=o[o.length-1];for(const l of o){const c=this.getFlowData(l),u=l.name;u&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${u}
	`),i+=`${c.code}
	`,l===s&&r!=="compute"&&(i+=`// result
	`,r==="vertex"?(i+="gl_Position = ",i+=`${c.result};`):r==="fragment"&&(l.outputNode.isOutputStructNode||(i+="fragColor = ",i+=`${c.result};`)))}const a=e[r];a.extensions=this.getExtensions(r),a.uniforms=this.getUniforms(r),a.attributes=this.getAttributes(r),a.varyings=this.getVaryings(r),a.vars=this.getVars(r),a.structs=this.getStructs(r),a.codes=this.getCodes(r),a.transforms=this.getTransforms(r),a.flow=i}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,r,i,o=null){const s=super.getUniformFromNode(e,r,i,o),a=this.getDataFromNode(e,i,this.globalCache);let l=a.uniformGPU;if(l===void 0){const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture")l=new C_(s.name,s.node,c),d.push(l);else if(r==="cubeTexture")l=new $5(s.name,s.node,c),d.push(l);else if(r==="texture3D")l=new z5(s.name,s.node,c),d.push(l);else if(r==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const f=new U5(e,c);f.name=e.name,d.push(f),l=f}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new B5(i+"_"+u,c),f[u]=h,d.push(h)),l=this.getNodeUniform(s,r),h.addUniform(l)}a.uniformGPU=l}return s}}let c1=null,u1=null,sd=null;class k5{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(){}finish(){}draw(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}createRenderPipeline(){}createComputePipeline(){}destroyPipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}createDefaultTexture(){}createTexture(){}copyTextureToBuffer(){}createAttribute(){}createIndexAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}resolveTimestampAsync(){}hasFeatureAsync(){}hasFeature(){}getInstanceCount(e){const{object:r,geometry:i}=e;return i.isInstancedBufferGeometry?i.instanceCount:r.count>1?r.count:1}getDrawingBufferSize(){return c1=c1||new je,this.renderer.getDrawingBufferSize(c1)}getScissor(){return u1=u1||new qt,this.renderer.getScissor(u1)}setScissorTest(){}getClearColor(){const e=this.renderer;return sd=sd||new _R,e.getClearColor(sd),sd.getRGB(sd,this.renderer.currentColorSpace),sd}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:sk(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${qf} webgpu`),this.domElement=e),e}set(e,r){this.data.set(e,r)}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let d1e=0;class f1e{constructor(e,r){this.buffers=[e.bufferGPU,r],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class h1e{constructor(e){this.backend=e}createAttribute(e,r){const i=this.backend,{gl:o}=i,s=e.array,a=e.usage||o.STATIC_DRAW,l=e.isInterleavedBufferAttribute?e.data:e,c=i.get(l);let u=c.bufferGPU;u===void 0&&(u=this._createBuffer(o,r,s,a),c.bufferGPU=u,c.bufferType=r,c.version=l.version);let d;if(s instanceof Float32Array)d=o.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?d=o.HALF_FLOAT:d=o.UNSIGNED_SHORT;else if(s instanceof Int16Array)d=o.SHORT;else if(s instanceof Uint32Array)d=o.UNSIGNED_INT;else if(s instanceof Int32Array)d=o.INT;else if(s instanceof Int8Array)d=o.BYTE;else if(s instanceof Uint8Array)d=o.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)d=o.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let f={bufferGPU:u,bufferType:r,type:d,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:d===o.INT||d===o.UNSIGNED_INT||e.gpuType===Xr,id:d1e++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const h=this._createBuffer(o,r,s,a);f=new f1e(f,h)}i.set(e,f)}updateAttribute(e){const r=this.backend,{gl:i}=r,o=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=r.get(s),l=a.bufferType,c=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(i.bindBuffer(l,a.bufferGPU),c.length===0)i.bufferSubData(l,0,o);else{for(let u=0,d=c.length;u<d;u++){const f=c[u];i.bufferSubData(l,f.start*o.BYTES_PER_ELEMENT,o,f.start,f.count)}s.clearUpdateRanges()}i.bindBuffer(l,null),a.version=s.version}destroyAttribute(e){const r=this.backend,{gl:i}=r;e.isInterleavedBufferAttribute&&r.delete(e.data);const o=r.get(e);i.deleteBuffer(o.bufferGPU),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,{gl:i}=r,o=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=r.get(o),a=e.array,l=a.byteLength;i.bindBuffer(i.COPY_READ_BUFFER,s);const c=i.createBuffer();i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.bufferData(i.COPY_WRITE_BUFFER,l,i.STREAM_READ),i.copyBufferSubData(i.COPY_READ_BUFFER,i.COPY_WRITE_BUFFER,0,0,l),await r.utils._clientWaitAsync();const u=new e.array.constructor(a.length);return i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.getBufferSubData(i.COPY_WRITE_BUFFER,0,u),i.deleteBuffer(c),i.bindBuffer(i.COPY_READ_BUFFER,null),i.bindBuffer(i.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,r,i,o){const s=e.createBuffer();return e.bindBuffer(r,s),e.bufferData(r,i,o),e.bindBuffer(r,null),s}}let PD=!1,d1,Gh;class p1e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},PD===!1&&(this._init(this.gl),PD=!0)}_init(e){d1={[po]:e.FUNC_ADD,[cM]:e.FUNC_SUBTRACT,[uM]:e.FUNC_REVERSE_SUBTRACT},Gh={[dM]:e.ZERO,[fM]:e.ONE,[hM]:e.SRC_COLOR,[cm]:e.SRC_ALPHA,[xM]:e.SRC_ALPHA_SATURATE,[vM]:e.DST_COLOR,[mM]:e.DST_ALPHA,[pM]:e.ONE_MINUS_SRC_COLOR,[um]:e.ONE_MINUS_SRC_ALPHA,[yM]:e.ONE_MINUS_DST_COLOR,[gM]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:r}=this;r[e]!==!0&&(this.gl.enable(e),r[e]=!0)}disable(e){const{enabled:r}=this;r[e]!==!1&&(this.gl.disable(e),r[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:r}=this;e?r.frontFace(r.CW):r.frontFace(r.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:r}=this;e!==Wz?(this.enable(r.CULL_FACE),e!==this.currentCullFace&&(e===BC?r.cullFace(r.BACK):e===qz?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):this.disable(r.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:r,gl:i}=this;e!==r&&(i.lineWidth(e),this.currentLineWidth=e)}setBlending(e,r,i,o,s,a,l,c){const{gl:u}=this;if(e===Ri){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==lM){if(e!==this.currentBlending||c!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==po||this.currentBlendEquationAlpha!==po)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=po,this.currentBlendEquationAlpha=po),c)switch(e){case ko:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case du:u.blendFunc(u.ONE,u.ONE);break;case hf:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case pf:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case ko:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case du:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case hf:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case pf:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=c}return}s=s||r,a=a||i,l=l||o,(r!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(d1[r],d1[s]),this.currentBlendEquation=r,this.currentBlendEquationAlpha=s),(i!==this.currentBlendSrc||o!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||l!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(Gh[i],Gh[o],Gh[a],Gh[l]),this.currentBlendSrc=i,this.currentBlendDst=o,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=l),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:r}=this;e?this.enable(r.DEPTH_TEST):this.disable(r.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:r}=this;switch(e){case dm:r.depthFunc(r.NEVER);break;case fm:r.depthFunc(r.ALWAYS);break;case hm:r.depthFunc(r.LESS);break;case ec:r.depthFunc(r.LEQUAL);break;case pm:r.depthFunc(r.EQUAL);break;case mm:r.depthFunc(r.GEQUAL);break;case gm:r.depthFunc(r.GREATER);break;case vm:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:r}=this;e?this.enable(r.STENCIL_TEST):this.disable(r.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,r,i){(this.currentStencilFunc!==e||this.currentStencilRef!==r||this.currentStencilFuncMask!==i)&&(this.gl.stencilFunc(e,r,i),this.currentStencilFunc=e,this.currentStencilRef=r,this.currentStencilFuncMask=i)}setStencilOp(e,r,i){(this.currentStencilFail!==e||this.currentStencilZFail!==r||this.currentStencilZPass!==i)&&(this.gl.stencilOp(e,r,i),this.currentStencilFail=e,this.currentStencilZFail=r,this.currentStencilZPass=i)}setMaterial(e,r,i){const{gl:o}=this;e.side===Ei?this.disable(o.CULL_FACE):this.enable(o.CULL_FACE);let s=e.side===er;r&&(s=!s),this.setFlipSided(s),e.blending===ko&&e.transparent===!1?this.setBlending(Ri):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(o.SAMPLE_ALPHA_TO_COVERAGE):this.disable(o.SAMPLE_ALPHA_TO_COVERAGE),i>0&&this.currentClippingPlanes!==i)for(let c=0;c<8;c++)c<i?this.enable(12288+c):this.disable(12288+c)}setPolygonOffset(e,r,i){const{gl:o}=this;e?(this.enable(o.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==r||this.currentPolygonOffsetUnits!==i)&&(o.polygonOffset(r,i),this.currentPolygonOffsetFactor=r,this.currentPolygonOffsetUnits=i)):this.disable(o.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,r){const{gl:i,currentBoundFramebuffers:o}=this;return o[e]!==r?(i.bindFramebuffer(e,r),o[e]=r,e===i.DRAW_FRAMEBUFFER&&(o[i.FRAMEBUFFER]=r),e===i.FRAMEBUFFER&&(o[i.DRAW_FRAMEBUFFER]=r),!0):!1}drawBuffers(e,r){const{gl:i}=this;let o=[],s=!1;if(e.textures!==null){o=this.currentDrawbuffers.get(r),o===void 0&&(o=[],this.currentDrawbuffers.set(r,o));const a=e.textures;if(o.length!==a.length||o[0]!==i.COLOR_ATTACHMENT0){for(let l=0,c=a.length;l<c;l++)o[l]=i.COLOR_ATTACHMENT0+l;o.length=a.length,s=!0}}else o[0]!==i.BACK&&(o[0]=i.BACK,s=!0);s&&i.drawBuffers(o)}activeTexture(e){const{gl:r,currentTextureSlot:i,maxTextures:o}=this;e===void 0&&(e=r.TEXTURE0+o-1),i!==e&&(r.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,r,i){const{gl:o,currentTextureSlot:s,currentBoundTextures:a,maxTextures:l}=this;i===void 0&&(s===null?i=o.TEXTURE0+l-1:i=s);let c=a[i];c===void 0&&(c={type:void 0,texture:void 0},a[i]=c),(c.type!==e||c.texture!==r)&&(s!==i&&(o.activeTexture(i),this.currentTextureSlot=i),o.bindTexture(e,r),c.type=e,c.texture=r)}bindBufferBase(e,r,i){const{gl:o}=this,s=`${e}-${r}`;return this.currentBoundBufferBases[s]!==i?(o.bindBufferBase(e,r,i),this.currentBoundBufferBases[s]=i,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:r,currentBoundTextures:i}=this,o=i[r];o!==void 0&&o.type!==void 0&&(e.bindTexture(o.type,null),o.type=void 0,o.texture=void 0)}}class m1e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,r=mo){const{gl:i,extensions:o}=this;let s;if(e===hi)return i.UNSIGNED_BYTE;if(e===Zx)return i.UNSIGNED_SHORT_4_4_4_4;if(e===Jx)return i.UNSIGNED_SHORT_5_5_5_1;if(e===e_)return i.UNSIGNED_INT_5_9_9_9_REV;if(e===Zc)return i.BYTE;if(e===Jc)return i.SHORT;if(e===vs)return i.UNSIGNED_SHORT;if(e===Xr)return i.INT;if(e===rr)return i.UNSIGNED_INT;if(e===hr)return i.FLOAT;if(e===Yr)return i.HALF_FLOAT;if(e===bM)return i.ALPHA;if(e===sg)return i.RGB;if(e===ti)return i.RGBA;if(e===SM)return i.LUMINANCE;if(e===wM)return i.LUMINANCE_ALPHA;if(e===Ws)return i.DEPTH_COMPONENT;if(e===Ys)return i.DEPTH_STENCIL;if(e===ag)return i.RED;if(e===Xf)return i.RED_INTEGER;if(e===mu)return i.RG;if(e===Kf)return i.RG_INTEGER;if(e===Yf)return i.RGBA_INTEGER;if(e===eu||e===Hl||e===jl||e===Wl)if(r===Dt)if(s=o.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===eu)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===Hl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===jl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Wl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=o.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===eu)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Hl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===jl)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Wl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===ym||e===xm||e===_m||e===bm)if(s=o.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===ym)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===xm)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===_m)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===bm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===Sm||e===mf||e===gf)if(s=o.get("WEBGL_compressed_texture_etc"),s!==null){if(e===Sm||e===mf)return r===Dt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===gf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===vf||e===yf||e===xf||e===_f||e===bf||e===Sf||e===wf||e===Cf||e===Ef||e===Tf||e===Mf||e===Rf||e===Af||e===Nf)if(s=o.get("WEBGL_compressed_texture_astc"),s!==null){if(e===vf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===yf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===xf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===_f)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===bf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===Sf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===wf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Cf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===Ef)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===Tf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===Mf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===Rf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Af)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Nf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===tu)if(s=o.get("EXT_texture_compression_bptc"),s!==null){if(e===tu)return r===Dt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===CM||e===wm||e===Cm||e===Em)if(s=o.get("EXT_texture_compression_rgtc"),s!==null){if(e===tu)return s.COMPRESSED_RED_RGTC1_EXT;if(e===wm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===Cm)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===Em)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Ks?i.UNSIGNED_INT_24_8:i[e]!==void 0?i[e]:null}_clientWaitAsync(){const{gl:e}=this,r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((i,o)=>{function s(){const a=e.clientWaitSync(r,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(r),o();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(r),i()}s()})}}let OD=!1,$v,f1,ID;class g1e{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},OD===!1&&(this._init(this.gl),OD=!0)}_init(e){$v={[hu]:e.REPEAT,[$s]:e.CLAMP_TO_EDGE,[pu]:e.MIRRORED_REPEAT},f1={[qn]:e.NEAREST,[Ey]:e.NEAREST_MIPMAP_NEAREST,[zs]:e.NEAREST_MIPMAP_LINEAR,[Ur]:e.LINEAR,[kd]:e.LINEAR_MIPMAP_NEAREST,[Vi]:e.LINEAR_MIPMAP_LINEAR},ID={[EM]:e.NEVER,[NM]:e.ALWAYS,[t_]:e.LESS,[n_]:e.LEQUAL,[TM]:e.EQUAL,[AM]:e.GEQUAL,[MM]:e.GREATER,[RM]:e.NOTEQUAL}}filterFallback(e){const{gl:r}=this;return e===qn||e===Ey||e===zs?r.NEAREST:r.LINEAR}getGLTextureType(e){const{gl:r}=this;let i;return e.isCubeTexture===!0?i=r.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?i=r.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?i=r.TEXTURE_3D:i=r.TEXTURE_2D,i}getInternalFormat(e,r,i,o,s=!1){const{gl:a,extensions:l}=this;if(e!==null){if(a[e]!==void 0)return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let c=r;return r===a.RED&&(i===a.FLOAT&&(c=a.R32F),i===a.HALF_FLOAT&&(c=a.R16F),i===a.UNSIGNED_BYTE&&(c=a.R8),i===a.UNSIGNED_SHORT&&(c=a.R16),i===a.UNSIGNED_INT&&(c=a.R32UI),i===a.BYTE&&(c=a.R8I),i===a.SHORT&&(c=a.R16I),i===a.INT&&(c=a.R32I)),r===a.RED_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.R8UI),i===a.UNSIGNED_SHORT&&(c=a.R16UI),i===a.UNSIGNED_INT&&(c=a.R32UI),i===a.BYTE&&(c=a.R8I),i===a.SHORT&&(c=a.R16I),i===a.INT&&(c=a.R32I)),r===a.RG&&(i===a.FLOAT&&(c=a.RG32F),i===a.HALF_FLOAT&&(c=a.RG16F),i===a.UNSIGNED_BYTE&&(c=a.RG8),i===a.UNSIGNED_SHORT&&(c=a.RG16),i===a.UNSIGNED_INT&&(c=a.RG32UI),i===a.BYTE&&(c=a.RG8I),i===a.SHORT&&(c=a.RG16I),i===a.INT&&(c=a.RG32I)),r===a.RG_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RG8UI),i===a.UNSIGNED_SHORT&&(c=a.RG16UI),i===a.UNSIGNED_INT&&(c=a.RG32UI),i===a.BYTE&&(c=a.RG8I),i===a.SHORT&&(c=a.RG16I),i===a.INT&&(c=a.RG32I)),r===a.RGB&&(i===a.FLOAT&&(c=a.RGB32F),i===a.HALF_FLOAT&&(c=a.RGB16F),i===a.UNSIGNED_BYTE&&(c=a.RGB8),i===a.UNSIGNED_SHORT&&(c=a.RGB16),i===a.UNSIGNED_INT&&(c=a.RGB32UI),i===a.BYTE&&(c=a.RGB8I),i===a.SHORT&&(c=a.RGB16I),i===a.INT&&(c=a.RGB32I),i===a.UNSIGNED_BYTE&&(c=o===Dt&&s===!1?a.SRGB8:a.RGB8),i===a.UNSIGNED_SHORT_5_6_5&&(c=a.RGB565),i===a.UNSIGNED_SHORT_5_5_5_1&&(c=a.RGB5_A1),i===a.UNSIGNED_SHORT_4_4_4_4&&(c=a.RGB4),i===a.UNSIGNED_INT_5_9_9_9_REV&&(c=a.RGB9_E5)),r===a.RGB_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RGB8UI),i===a.UNSIGNED_SHORT&&(c=a.RGB16UI),i===a.UNSIGNED_INT&&(c=a.RGB32UI),i===a.BYTE&&(c=a.RGB8I),i===a.SHORT&&(c=a.RGB16I),i===a.INT&&(c=a.RGB32I)),r===a.RGBA&&(i===a.FLOAT&&(c=a.RGBA32F),i===a.HALF_FLOAT&&(c=a.RGBA16F),i===a.UNSIGNED_BYTE&&(c=a.RGBA8),i===a.UNSIGNED_SHORT&&(c=a.RGBA16),i===a.UNSIGNED_INT&&(c=a.RGBA32UI),i===a.BYTE&&(c=a.RGBA8I),i===a.SHORT&&(c=a.RGBA16I),i===a.INT&&(c=a.RGBA32I),i===a.UNSIGNED_BYTE&&(c=o===Dt&&s===!1?a.SRGB8_ALPHA8:a.RGBA8),i===a.UNSIGNED_SHORT_4_4_4_4&&(c=a.RGBA4),i===a.UNSIGNED_SHORT_5_5_5_1&&(c=a.RGB5_A1)),r===a.RGBA_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RGBA8UI),i===a.UNSIGNED_SHORT&&(c=a.RGBA16UI),i===a.UNSIGNED_INT&&(c=a.RGBA32UI),i===a.BYTE&&(c=a.RGBA8I),i===a.SHORT&&(c=a.RGBA16I),i===a.INT&&(c=a.RGBA32I)),r===a.DEPTH_COMPONENT&&(i===a.UNSIGNED_INT&&(c=a.DEPTH24_STENCIL8),i===a.FLOAT&&(c=a.DEPTH_COMPONENT32F)),r===a.DEPTH_STENCIL&&i===a.UNSIGNED_INT_24_8&&(c=a.DEPTH24_STENCIL8),(c===a.R16F||c===a.R32F||c===a.RG16F||c===a.RG32F||c===a.RGBA16F||c===a.RGBA32F)&&l.get("EXT_color_buffer_float"),c}setTextureParameters(e,r){const{gl:i,extensions:o,backend:s}=this;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,r.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,r.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texParameteri(e,i.TEXTURE_WRAP_S,$v[r.wrapS]),i.texParameteri(e,i.TEXTURE_WRAP_T,$v[r.wrapT]),(e===i.TEXTURE_3D||e===i.TEXTURE_2D_ARRAY)&&i.texParameteri(e,i.TEXTURE_WRAP_R,$v[r.wrapR]),i.texParameteri(e,i.TEXTURE_MAG_FILTER,f1[r.magFilter]);const a=r.mipmaps!==void 0&&r.mipmaps.length>0,l=r.minFilter===Ur&&a?Vi:r.minFilter;if(i.texParameteri(e,i.TEXTURE_MIN_FILTER,f1[l]),r.compareFunction&&(i.texParameteri(e,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(e,i.TEXTURE_COMPARE_FUNC,ID[r.compareFunction])),o.has("EXT_texture_filter_anisotropic")===!0){if(r.magFilter===qn||r.minFilter!==zs&&r.minFilter!==Vi||r.type===hr&&o.has("OES_texture_float_linear")===!1)return;if(r.anisotropy>1){const c=o.get("EXT_texture_filter_anisotropic");i.texParameterf(e,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:r,backend:i,defaultTextures:o}=this,s=this.getGLTextureType(e);let a=o[s];a===void 0&&(a=r.createTexture(),i.state.bindTexture(s,a),r.texParameteri(s,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(s,r.TEXTURE_MAG_FILTER,r.NEAREST),o[s]=a),i.set(e,{textureGPU:a,glTextureType:s,isDefault:!0})}createTexture(e,r){const{gl:i,backend:o}=this,{levels:s,width:a,height:l,depth:c}=r,u=o.utils.convert(e.format,e.colorSpace),d=o.utils.convert(e.type),f=this.getInternalFormat(e.internalFormat,u,d,e.colorSpace,e.isVideoTexture),h=i.createTexture(),p=this.getGLTextureType(e);o.state.bindTexture(p,h),this.setTextureParameters(p,e),e.isDataArrayTexture||e.isCompressedArrayTexture?i.texStorage3D(i.TEXTURE_2D_ARRAY,s,f,a,l,c):e.isData3DTexture?i.texStorage3D(i.TEXTURE_3D,s,f,a,l,c):e.isVideoTexture||i.texStorage2D(p,s,f,a,l),o.set(e,{textureGPU:h,glTextureType:p,glFormat:u,glType:d,glInternalFormat:f})}copyBufferToTexture(e,r){const{gl:i,backend:o}=this,{textureGPU:s,glTextureType:a,glFormat:l,glType:c}=o.get(r),{width:u,height:d}=r.source.data;i.bindBuffer(i.PIXEL_UNPACK_BUFFER,e),o.state.bindTexture(a,s),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texSubImage2D(a,0,0,0,u,d,l,c,0),i.bindBuffer(i.PIXEL_UNPACK_BUFFER,null),o.state.unbindTexture()}updateTexture(e,r){const{gl:i}=this,{width:o,height:s}=r,{textureGPU:a,glTextureType:l,glFormat:c,glType:u,glInternalFormat:d}=this.backend.get(e);if(e.isRenderTargetTexture||a===void 0)return;const f=h=>h.isDataTexture?h.image.data:typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&h instanceof ImageBitmap||h instanceof OffscreenCanvas?h:h.data;if(this.backend.state.bindTexture(l,a),this.setTextureParameters(l,e),e.isCompressedTexture){const h=e.mipmaps,p=r.image;for(let g=0;g<h.length;g++){const y=h[g];e.isCompressedArrayTexture?e.format!==i.RGBA?c!==null?i.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,y.width,y.height,p.depth,c,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,y.width,y.height,p.depth,c,u,y.data):c!==null?i.compressedTexSubImage2D(i.TEXTURE_2D,g,0,0,y.width,y.height,c,y.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=r.images;for(let p=0;p<6;p++){const g=f(h[p]);i.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,o,s,c,u,g)}}else if(e.isDataArrayTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isData3DTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isVideoTexture)e.update(),i.texImage2D(l,0,d,c,u,r.image);else{const h=f(r.image);i.texSubImage2D(l,0,0,0,o,s,c,u,h)}}generateMipmaps(e){const{gl:r,backend:i}=this,{textureGPU:o,glTextureType:s}=i.get(e);i.state.bindTexture(s,o),r.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:r,backend:i}=this;if(e){const o=i.get(e);if(o.renderBufferStorageSetup=void 0,o.framebuffers){for(const s in o.framebuffers)r.deleteFramebuffer(o.framebuffers[s]);delete o.framebuffers}if(o.depthRenderbuffer&&(r.deleteRenderbuffer(o.depthRenderbuffer),delete o.depthRenderbuffer),o.stencilRenderbuffer&&(r.deleteRenderbuffer(o.stencilRenderbuffer),delete o.stencilRenderbuffer),o.msaaFrameBuffer&&(r.deleteFramebuffer(o.msaaFrameBuffer),delete o.msaaFrameBuffer),o.msaaRenderbuffers){for(let s=0;s<o.msaaRenderbuffers.length;s++)r.deleteRenderbuffer(o.msaaRenderbuffers[s]);delete o.msaaRenderbuffers}}}destroyTexture(e){const{gl:r,backend:i}=this,{textureGPU:o,renderTarget:s}=i.get(e);this.deallocateRenderBuffers(s),r.deleteTexture(o),i.delete(e)}copyTextureToTexture(e,r,i=null,o=null,s=0){const{gl:a,backend:l}=this,{state:c}=this.backend,{textureGPU:u,glTextureType:d,glType:f,glFormat:h}=l.get(r);let p,g,y,v,m,x;i!==null?(p=i.max.x-i.min.x,g=i.max.y-i.min.y,y=i.min.x,v=i.min.y):(p=e.image.width,g=e.image.height,y=0,v=0),o!==null?(m=o.x,x=o.y):(m=0,x=0),c.bindTexture(d,u),a.pixelStorei(a.UNPACK_ALIGNMENT,r.unpackAlignment),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,r.unpackAlignment);const b=a.getParameter(a.UNPACK_ROW_LENGTH),S=a.getParameter(a.UNPACK_IMAGE_HEIGHT),w=a.getParameter(a.UNPACK_SKIP_PIXELS),C=a.getParameter(a.UNPACK_SKIP_ROWS),E=a.getParameter(a.UNPACK_SKIP_IMAGES),M=e.isCompressedTexture?e.mipmaps[s]:e.image;if(a.pixelStorei(a.UNPACK_ROW_LENGTH,M.width),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,M.height),a.pixelStorei(a.UNPACK_SKIP_PIXELS,y),a.pixelStorei(a.UNPACK_SKIP_ROWS,v),e.isRenderTargetTexture||e.isDepthTexture){const T=l.get(e),R=l.get(r),P=l.get(T.renderTarget),D=l.get(R.renderTarget),L=P.framebuffers[T.cacheKey],A=D.framebuffers[R.cacheKey];c.bindFramebuffer(a.READ_FRAMEBUFFER,L),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,A);let I=a.COLOR_BUFFER_BIT;e.isDepthTexture&&(I=a.DEPTH_BUFFER_BIT),a.blitFramebuffer(y,v,p,g,m,x,p,g,I,a.NEAREST),c.bindFramebuffer(a.READ_FRAMEBUFFER,null),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)}else e.isDataTexture?a.texSubImage2D(a.TEXTURE_2D,s,m,x,p,g,h,f,M.data):e.isCompressedTexture?a.compressedTexSubImage2D(a.TEXTURE_2D,s,m,x,M.width,M.height,h,M.data):a.texSubImage2D(a.TEXTURE_2D,s,m,x,p,g,h,f,M);a.pixelStorei(a.UNPACK_ROW_LENGTH,b),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,S),a.pixelStorei(a.UNPACK_SKIP_PIXELS,w),a.pixelStorei(a.UNPACK_SKIP_ROWS,C),a.pixelStorei(a.UNPACK_SKIP_IMAGES,E),s===0&&r.generateMipmaps&&a.generateMipmap(a.TEXTURE_2D),c.unbindTexture()}copyFramebufferToTexture(e,r,i){const{gl:o}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:l,y:c,z:u,w:d}=i,f=e.isDepthTexture===!0||r.renderTarget&&r.renderTarget.samples>0,h=r.renderTarget?r.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(f){const p=l!==0||c!==0;let g,y;if(e.isDepthTexture===!0?(g=o.DEPTH_BUFFER_BIT,y=o.DEPTH_ATTACHMENT,r.stencil&&(g|=o.STENCIL_BUFFER_BIT)):(g=o.COLOR_BUFFER_BIT,y=o.COLOR_ATTACHMENT0),p){const v=this.backend.get(r.renderTarget),m=v.framebuffers[r.getCacheKey()],x=v.msaaFrameBuffer;s.bindFramebuffer(o.DRAW_FRAMEBUFFER,m),s.bindFramebuffer(o.READ_FRAMEBUFFER,x);const b=h-c-d;o.blitFramebuffer(l,b,l+u,b+d,l,b,l+u,b+d,g,o.NEAREST),s.bindFramebuffer(o.READ_FRAMEBUFFER,m),s.bindTexture(o.TEXTURE_2D,a),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,l,b,u,d),s.unbindTexture()}else{const v=o.createFramebuffer();s.bindFramebuffer(o.DRAW_FRAMEBUFFER,v),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,y,o.TEXTURE_2D,a,0),o.blitFramebuffer(0,0,u,d,0,0,u,d,g,o.NEAREST),o.deleteFramebuffer(v)}}else s.bindTexture(o.TEXTURE_2D,a),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,l,h-d-c,u,d),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(r)}setupRenderBufferStorage(e,r){const{gl:i}=this,o=r.renderTarget,{samples:s,depthTexture:a,depthBuffer:l,stencilBuffer:c,width:u,height:d}=o;if(i.bindRenderbuffer(i.RENDERBUFFER,e),l&&!c){let f=i.DEPTH_COMPONENT24;s>0?(a&&a.isDepthTexture&&a.type===i.FLOAT&&(f=i.DEPTH_COMPONENT32F),i.renderbufferStorageMultisample(i.RENDERBUFFER,s,f,u,d)):i.renderbufferStorage(i.RENDERBUFFER,f,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,e)}else l&&c&&(s>0?i.renderbufferStorageMultisample(i.RENDERBUFFER,s,i.DEPTH24_STENCIL8,u,d):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e))}async copyTextureToBuffer(e,r,i,o,s,a){const{backend:l,gl:c}=this,{textureGPU:u,glFormat:d,glType:f}=this.backend.get(e),h=c.createFramebuffer();c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=e.isCubeTexture?c.TEXTURE_CUBE_MAP_POSITIVE_X+a:c.TEXTURE_2D;c.framebufferTexture2D(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,p,u,0);const g=this._getTypedArrayType(f),y=this._getBytesPerTexel(f,d),m=o*s*y,x=c.createBuffer();c.bindBuffer(c.PIXEL_PACK_BUFFER,x),c.bufferData(c.PIXEL_PACK_BUFFER,m,c.STREAM_READ),c.readPixels(r,i,o,s,d,f,0),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),await l.utils._clientWaitAsync();const b=new g(m/g.BYTES_PER_ELEMENT);return c.bindBuffer(c.PIXEL_PACK_BUFFER,x),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,b),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),c.deleteFramebuffer(h),b}_getTypedArrayType(e){const{gl:r}=this;if(e===r.UNSIGNED_BYTE)return Uint8Array;if(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT)return Uint16Array;if(e===r.UNSIGNED_INT)return Uint32Array;if(e===r.HALF_FLOAT)return Uint16Array;if(e===r.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,r){const{gl:i}=this;let o=0;if(e===i.UNSIGNED_BYTE&&(o=1),(e===i.UNSIGNED_SHORT_4_4_4_4||e===i.UNSIGNED_SHORT_5_5_5_1||e===i.UNSIGNED_SHORT_5_6_5||e===i.UNSIGNED_SHORT||e===i.HALF_FLOAT)&&(o=2),(e===i.UNSIGNED_INT||e===i.FLOAT)&&(o=4),r===i.RGBA)return o*4;if(r===i.RGB)return o*3;if(r===i.ALPHA)return o}}class v1e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let r=this.extensions[e];return r===void 0&&(r=this.gl.getExtension(e),this.extensions[e]=r),r}has(e){return this.availableExtensions.includes(e)}}class y1e{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,r=this.backend.extensions;if(r.has("EXT_texture_filter_anisotropic")===!0){const i=r.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const DD={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class x1e{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,r){const{gl:i,mode:o,object:s,type:a,info:l,index:c}=this;c!==0?i.drawElements(o,r,a,e):i.drawArrays(o,e,r),l.update(s,r,o,1)}renderInstances(e,r,i){const{gl:o,mode:s,type:a,index:l,object:c,info:u}=this;i!==0&&(l!==0?o.drawElementsInstanced(s,r,a,e,i):o.drawArraysInstanced(s,e,r,i),u.update(c,r,s,i))}renderMultiDraw(e,r,i){const{extensions:o,mode:s,object:a,info:l}=this;if(i===0)return;const c=o.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<i;u++)this.render(e[u],r[u]);else{this.index!==0?c.multiDrawElementsWEBGL(s,r,0,this.type,e,0,i):c.multiDrawArraysWEBGL(s,e,0,r,0,i);let u=0;for(let d=0;d<i;d++)u+=r[d];l.update(a,u,s,1)}}renderMultiDrawInstances(e,r,i,o){const{extensions:s,mode:a,object:l,info:c}=this;if(i===0)return;const u=s.get("WEBGL_multi_draw");if(u===null)for(let d=0;d<i;d++)this.renderInstances(e[d],r[d],o[d]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(a,r,0,this.type,e,0,o,0,i):u.multiDrawArraysInstancedWEBGL(a,e,0,r,0,o,0,i);let d=0;for(let f=0;f<i;f++)d+=r[f]*o[f];c.update(l,d,a,1)}}}class LD extends k5{constructor(e={}){super(e),this.isWebGLBackend=!0}init(e){super.init(e);const r=this.parameters,i=r.context!==void 0?r.context:e.domElement.getContext("webgl2");function o(s){s.preventDefault();const a={api:"WebGL",message:s.statusMessage||"Unknown reason",reason:null,originalEvent:s};e.onDeviceLost(a)}this._onContextLost=o,e.domElement.addEventListener("webglcontextlost",o,!1),this.gl=i,this.extensions=new v1e(this),this.capabilities=new y1e(this),this.attributeUtils=new h1e(this),this.textureUtils=new g1e(this),this.bufferRenderer=new x1e(this),this.state=new p1e(this),this.utils=new m1e(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=r.trackTimestamp===!0,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._knownBindings=new WeakSet,this._currentContext=null}get coordinateSystem(){return $o}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(this.queryRunning){r.queryQueue||(r.queryQueue=[]),r.queryQueue.push(e);return}r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.activeQuery=null),r.activeQuery=this.gl.createQuery(),r.activeQuery!==null&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,r.activeQuery),this.queryRunning=!0)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.gpuQueries||(r.gpuQueries=[]),r.gpuQueries.push({query:r.activeQuery}),r.activeQuery=null,this.queryRunning=!1,r.queryQueue&&r.queryQueue.length>0)){const i=r.queryQueue.shift();this.initTimestampQuery(i)}}async resolveTimestampAsync(e,r="render"){if(!this.disjoint||!this.trackTimestamp)return;const i=this.get(e);i.gpuQueries||(i.gpuQueries=[]);for(let o=0;o<i.gpuQueries.length;o++){const s=i.gpuQueries[o],a=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT_AVAILABLE),l=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT);if(a&&!l){const c=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT),u=Number(c)/1e6;this.gl.deleteQuery(s.query),i.gpuQueries.splice(o,1),o--,this.renderer.info.updateTimestamp(r,u)}}}getContext(){return this.gl}beginRender(e){const{gl:r}=this,i=this.get(e);if(this.initTimestampQuery(e),i.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),e.scissor){const{x:s,y:a,width:l,height:c}=e.scissorValue;r.scissor(s,e.height-c-a,l,c)}const o=e.occlusionQueryCount;o>0&&(i.currentOcclusionQueries=i.occlusionQueries,i.currentOcclusionQueryObjects=i.occlusionQueryObjects,i.lastOcclusionObject=null,i.occlusionQueries=new Array(o),i.occlusionQueryObjects=new Array(o),i.occlusionQueryIndex=0)}finishRender(e){const{gl:r,state:i}=this,o=this.get(e),s=o.previousContext,a=e.occlusionQueryCount;a>0&&(a>o.occlusionQueryIndex&&r.endQuery(r.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const l=e.textures;if(l!==null)for(let c=0;c<l.length;c++){const u=l[c];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const c=this.get(e.renderTarget),{samples:u}=e.renderTarget;if(u>0){const d=c.framebuffers[e.getCacheKey()],f=r.COLOR_BUFFER_BIT,h=c.msaaFrameBuffer,p=e.textures;i.bindFramebuffer(r.READ_FRAMEBUFFER,h),i.bindFramebuffer(r.DRAW_FRAMEBUFFER,d);for(let g=0;g<p.length;g++)if(e.scissor){const{x:y,y:v,width:m,height:x}=e.scissorValue,b=e.height-x-v;r.blitFramebuffer(y,b,y+m,b+x,y,b,y+m,b+x,f,r.NEAREST),r.invalidateSubFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray,y,b,m,x)}else r.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,f,r.NEAREST),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueries:i,currentOcclusionQueryObjects:o}=r;if(i&&o){const s=new WeakSet,{gl:a}=this;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueries=null;const l=()=>{let c=0;for(let u=0;u<i.length;u++){const d=i[u];d!==null&&a.getQueryParameter(d,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(d,a.QUERY_RESULT)>0&&s.add(o[u]),i[u]=null,a.deleteQuery(d),c++)}c<i.length?requestAnimationFrame(l):r.occluded=s};l()}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}updateViewport(e){const r=this.gl,{x:i,y:o,width:s,height:a}=e.viewportValue;r.viewport(i,e.height-a-o,s,a)}setScissorTest(e){const r=this.gl;e?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST)}clear(e,r,i,o=null,s=!0){const{gl:a}=this;if(o===null){const c=this.getClearColor();c.r*=c.a,c.g*=c.a,c.b*=c.a,o={textures:null,clearColorValue:c}}let l=0;if(e&&(l|=a.COLOR_BUFFER_BIT),r&&(l|=a.DEPTH_BUFFER_BIT),i&&(l|=a.STENCIL_BUFFER_BIT),l!==0){let c;if(o.clearColorValue?c=o.clearColorValue:(c=this.getClearColor(),c.r*=c.a,c.g*=c.a,c.b*=c.a),r&&this.state.setDepthMask(!0),o.textures===null)a.clearColor(c.r,c.g,c.b,c.a),a.clear(l);else{if(s&&this._setFramebuffer(o),e)for(let u=0;u<o.textures.length;u++)a.clearBufferfv(a.COLOR,u,[c.r,c.g,c.b,c.a]);r&&i?a.clearBufferfi(a.DEPTH_STENCIL,0,1,0):r?a.clearBufferfv(a.DEPTH,0,[1]):i&&a.clearBufferiv(a.STENCIL,0,[0])}}}beginCompute(e){const{state:r,gl:i}=this;r.bindFramebuffer(i.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,r,i,o){const{state:s,gl:a}=this;this.discard||(a.enable(a.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:c,attributes:u}=this.get(o),d=this._getVaoKey(null,u),f=this.vaoCache[d];f===void 0?this._createVao(null,u):a.bindVertexArray(f),s.useProgram(l),this._bindUniforms(i);const h=this._getTransformFeedback(c);a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,h),a.beginTransformFeedback(a.POINTS),u[0].isStorageInstancedBufferAttribute?a.drawArraysInstanced(a.POINTS,0,1,r.count):a.drawArrays(a.POINTS,0,r.count),a.endTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null);for(let p=0;p<c.length;p++){const g=c[p];g.pbo&&this.textureUtils.copyBufferToTexture(g.transformBuffer,g.pbo),g.switchBuffers()}}finishCompute(e){const r=this.gl;this.discard=!1,r.disable(r.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}draw(e){const{object:r,pipeline:i,material:o,context:s,hardwareClippingPlanes:a}=e,{programGPU:l}=this.get(i),{gl:c,state:u}=this,d=this.get(s),f=e.getDrawParameters();if(f===null)return;this._bindUniforms(e.getBindings());const h=r.isMesh&&r.matrixWorld.determinant()<0;u.setMaterial(o,h,a),u.useProgram(l);const p=this.get(e);let g=p.staticVao;if(g===void 0||p.geometryId!==e.geometry.id){const w=this._getVaoKey(e.getIndex(),e.getAttributes());if(g=this.vaoCache[w],g===void 0){let C;({vaoGPU:g,staticVao:C}=this._createVao(e.getIndex(),e.getAttributes())),C&&(p.staticVao=g,p.geometryId=e.geometry.id)}}c.bindVertexArray(g);const y=e.getIndex(),v=d.lastOcclusionObject;if(v!==r&&v!==void 0){if(v!==null&&v.occlusionTest===!0&&(c.endQuery(c.ANY_SAMPLES_PASSED),d.occlusionQueryIndex++),r.occlusionTest===!0){const w=c.createQuery();c.beginQuery(c.ANY_SAMPLES_PASSED,w),d.occlusionQueries[d.occlusionQueryIndex]=w,d.occlusionQueryObjects[d.occlusionQueryIndex]=r}d.lastOcclusionObject=r}const m=this.bufferRenderer;r.isPoints?m.mode=c.POINTS:r.isLineSegments?m.mode=c.LINES:r.isLine?m.mode=c.LINE_STRIP:r.isLineLoop?m.mode=c.LINE_LOOP:o.wireframe===!0?(u.setLineWidth(o.wireframeLinewidth*this.renderer.getPixelRatio()),m.mode=c.LINES):m.mode=c.TRIANGLES;const{vertexCount:x,instanceCount:b}=f;let{firstVertex:S}=f;if(m.object=r,y!==null){S*=y.array.BYTES_PER_ELEMENT;const w=this.get(y);m.index=y.count,m.type=w.type}else m.index=0;r.isBatchedMesh?r._multiDrawInstances!==null?m.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?m.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount):Lc("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):b>1?m.renderInstances(S,x,b):m.render(S,x),c.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,o,s,a){return this.textureUtils.copyTextureToBuffer(e,r,i,o,s,a)}createSampler(){}destroySampler(){}createNodeBuilder(e,r){return new u1e(e,r)}createProgram(e){const r=this.gl,{stage:i,code:o}=e,s=i==="fragment"?r.createShader(r.FRAGMENT_SHADER):r.createShader(r.VERTEX_SHADER);r.shaderSource(s,o),r.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e,r){const i=this.gl,o=e.pipeline,{fragmentProgram:s,vertexProgram:a}=o,l=i.createProgram(),c=this.get(s).shaderGPU,u=this.get(a).shaderGPU;if(i.attachShader(l,c),i.attachShader(l,u),i.linkProgram(l),this.set(o,{programGPU:l,fragmentShader:c,vertexShader:u}),r!==null&&this.parallel){const d=new Promise(f=>{const h=this.parallel,p=()=>{i.getProgramParameter(l,h.COMPLETION_STATUS_KHR)?(this._completeCompile(e,o),f()):requestAnimationFrame(p)};p()});r.push(d);return}this._completeCompile(e,o)}_handleSource(e,r){const i=e.split(`
`),o=[],s=Math.max(r-6,0),a=Math.min(r+6,i.length);for(let l=s;l<a;l++){const c=l+1;o.push(`${c===r?">":" "} ${c}: ${i[l]}`)}return o.join(`
`)}_getShaderErrors(e,r,i){const o=e.getShaderParameter(r,e.COMPILE_STATUS),s=e.getShaderInfoLog(r).trim();if(o&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const l=parseInt(a[1]);return i.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(r),l)}else return s}_logProgramError(e,r,i){if(this.renderer.debug.checkShaderErrors){const o=this.gl,s=o.getProgramInfoLog(e).trim();if(o.getProgramParameter(e,o.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(o,e,i,r);else{const a=this._getShaderErrors(o,i,"vertex"),l=this._getShaderErrors(o,r,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(e,o.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+a+`
`+l)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,r){const{state:i,gl:o}=this,s=this.get(r),{programGPU:a,fragmentShader:l,vertexShader:c}=s;o.getProgramParameter(a,o.LINK_STATUS)===!1&&this._logProgramError(a,l,c),i.useProgram(a);const u=e.getBindings();this._setupBindings(u,a),this.set(r,{programGPU:a})}createComputePipeline(e,r){const{state:i,gl:o}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,l=o.createProgram(),c=this.get(s).shaderGPU,u=this.get(a).shaderGPU,d=a.transforms,f=[],h=[];for(let v=0;v<d.length;v++){const m=d[v];f.push(m.varyingName),h.push(m.attributeNode)}o.attachShader(l,c),o.attachShader(l,u),o.transformFeedbackVaryings(l,f,o.SEPARATE_ATTRIBS),o.linkProgram(l),o.getProgramParameter(l,o.LINK_STATUS)===!1&&this._logProgramError(l,c,u),i.useProgram(l),this._setupBindings(r,l);const p=a.attributes,g=[],y=[];for(let v=0;v<p.length;v++){const m=p[v].node.attribute;g.push(m),this.has(m)||this.attributeUtils.createAttribute(m,o.ARRAY_BUFFER)}for(let v=0;v<h.length;v++){const m=h[v].attribute;this.has(m)||this.attributeUtils.createAttribute(m,o.ARRAY_BUFFER);const x=this.get(m);y.push(x)}this.set(e,{programGPU:l,transformBuffers:y,attributes:g})}createBindings(e,r){if(this._knownBindings.has(r)===!1){this._knownBindings.add(r);let i=0,o=0;for(const s of r){this.set(s,{textures:o,uniformBuffers:i});for(const a of s.bindings)a.isUniformBuffer&&i++,a.isSampledTexture&&o++}}this.updateBindings(e,r)}updateBindings(e){const{gl:r}=this,i=this.get(e);let o=i.uniformBuffers,s=i.textures;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer,c=r.createBuffer();r.bindBuffer(r.UNIFORM_BUFFER,c),r.bufferData(r.UNIFORM_BUFFER,l,r.DYNAMIC_DRAW),this.set(a,{index:o++,bufferGPU:c})}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(a.texture);this.set(a,{index:s++,textureGPU:l,glTextureType:c})}}updateBinding(e){const r=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const o=this.get(e).bufferGPU,s=e.buffer;r.bindBuffer(r.UNIFORM_BUFFER,o),r.bufferData(r.UNIFORM_BUFFER,s,r.DYNAMIC_DRAW)}}createIndexAttribute(e){const r=this.gl;this.attributeUtils.createAttribute(e,r.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){}hasFeature(e){const r=Object.keys(DD).filter(o=>DD[o]===e),i=this.extensions;for(let o=0;o<r.length;o++)if(i.has(r[o]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,r,i,o,s){this.textureUtils.copyTextureToTexture(e,r,i,o,s)}copyFramebufferToTexture(e,r,i){this.textureUtils.copyFramebufferToTexture(e,r,i)}_setFramebuffer(e){const{gl:r,state:i}=this;let o=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:l,depthBuffer:c,stencilBuffer:u}=s,d=s.isWebGLCubeRenderTarget===!0;let f=a.msaaFrameBuffer,h=a.depthRenderbuffer;const p=b5(e);let g;if(d?(a.cubeFramebuffers||(a.cubeFramebuffers={}),g=a.cubeFramebuffers[p]):(a.framebuffers||(a.framebuffers={}),g=a.framebuffers[p]),g===void 0){g=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,g);const y=e.textures;if(d){a.cubeFramebuffers[p]=g;const{textureGPU:v}=this.get(y[0]),m=this.renderer._activeCubeFace;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+m,v,0)}else{a.framebuffers[p]=g;for(let v=0;v<y.length;v++){const m=y[v],x=this.get(m);x.renderTarget=e.renderTarget,x.cacheKey=p;const b=r.COLOR_ATTACHMENT0+v;r.framebufferTexture2D(r.FRAMEBUFFER,b,r.TEXTURE_2D,x.textureGPU,0)}i.drawBuffers(e,g)}if(e.depthTexture!==null){const v=this.get(e.depthTexture),m=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;v.renderTarget=e.renderTarget,v.cacheKey=p,r.framebufferTexture2D(r.FRAMEBUFFER,m,r.TEXTURE_2D,v.textureGPU,0)}}if(l>0){if(f===void 0){const y=[];f=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,f);const v=[],m=e.textures;for(let x=0;x<m.length;x++){if(v[x]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,v[x]),y.push(r.COLOR_ATTACHMENT0+x),c){const w=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;y.push(w)}const b=e.textures[x],S=this.get(b);r.renderbufferStorageMultisample(r.RENDERBUFFER,l,S.glInternalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+x,r.RENDERBUFFER,v[x])}if(a.msaaFrameBuffer=f,a.msaaRenderbuffers=v,h===void 0){h=r.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(h,e),a.depthRenderbuffer=h;const x=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;y.push(x)}a.invalidationArray=y}o=a.msaaFrameBuffer}else o=g}i.bindFramebuffer(r.FRAMEBUFFER,o)}_getVaoKey(e,r){let i=[];if(e!==null){const o=this.get(e);i+=":"+o.id}for(let o=0;o<r.length;o++){const s=this.get(r[o]);i+=":"+s.id}return i}_createVao(e,r){const{gl:i}=this,o=i.createVertexArray();let s="",a=!0;if(i.bindVertexArray(o),e!==null){const l=this.get(e);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,l.bufferGPU),s+=":"+l.id}for(let l=0;l<r.length;l++){const c=r[l],u=this.get(c);s+=":"+u.id,i.bindBuffer(i.ARRAY_BUFFER,u.bufferGPU),i.enableVertexAttribArray(l),(c.isStorageBufferAttribute||c.isStorageInstancedBufferAttribute)&&(a=!1);let d,f;c.isInterleavedBufferAttribute===!0?(d=c.data.stride*u.bytesPerElement,f=c.offset*u.bytesPerElement):(d=0,f=0),u.isInteger?i.vertexAttribIPointer(l,c.itemSize,u.type,d,f):i.vertexAttribPointer(l,c.itemSize,u.type,c.normalized,d,f),c.isInstancedBufferAttribute&&!c.isInterleavedBufferAttribute?i.vertexAttribDivisor(l,c.meshPerAttribute):c.isInterleavedBufferAttribute&&c.data.isInstancedInterleavedBuffer&&i.vertexAttribDivisor(l,c.data.meshPerAttribute)}return i.bindBuffer(i.ARRAY_BUFFER,null),this.vaoCache[s]=o,{vaoGPU:o,staticVao:a}}_getTransformFeedback(e){let r="";for(let s=0;s<e.length;s++)r+=":"+e[s].id;let i=this.transformFeedbackCache[r];if(i!==void 0)return i;const{gl:o}=this;i=o.createTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,i);for(let s=0;s<e.length;s++){const a=e[s];o.bindBufferBase(o.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[r]=i,i}_setupBindings(e,r){const i=this.gl;for(const o of e)for(const s of o.bindings){const l=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const c=i.getUniformBlockIndex(r,s.name);i.uniformBlockBinding(r,c,l)}else if(s.isSampledTexture){const c=i.getUniformLocation(r,s.name);i.uniform1i(c,l)}}}_bindUniforms(e){const{gl:r,state:i}=this;for(const o of e)for(const s of o.bindings){const a=this.get(s),l=a.index;s.isUniformsGroup||s.isUniformBuffer?i.bindBufferBase(r.UNIFORM_BUFFER,l,a.bufferGPU):s.isSampledTexture&&i.bindTexture(a.glTextureType,a.textureGPU,r.TEXTURE0+l)}}dispose(){this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const Nd={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Qr={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Zr={Store:"store"},yr={Load:"load",Clear:"clear"},h1={CCW:"ccw"},p1={None:"none",Front:"front",Back:"back"},Lf={Uint16:"uint16",Uint32:"uint32"},ie={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},m1={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},zc={Linear:"linear",Nearest:"nearest"},Ht={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Ec={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},FD={None:0,All:15},yl={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},g1={Storage:"storage",ReadOnlyStorage:"read-only-storage"},v1={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},Hh={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},UD={TwoD:"2d",ThreeD:"3d"},Oo={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},_1e={All:"all"},zv={Vertex:"vertex",Instance:"instance"},aE={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class b1e extends TR{constructor(e,r){super(e),this.texture=r,this.version=r?r.version:0,this.isSampler=!0}}class S1e extends b1e{constructor(e,r,i){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i}update(){this.texture=this.textureNode.value}}class w1e extends L5{constructor(e,r){super(e,r?r.array:null),this.attribute=r,this.isStorageBuffer=!0}}let C1e=0;class E1e extends w1e{constructor(e,r){super("StorageBuffer_"+C1e++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Pa.READ_WRITE,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class T1e extends pc{constructor(e){super(),this.device=e;const r=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,o=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:zc.Linear}),this.flipYSampler=e.createSampler({minFilter:zc.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:r}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:i}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:o})}getTransferPipeline(e){let r=this.transferPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Nd.TriangleStrip,stripIndexFormat:Lf.Uint32},layout:"auto"}),this.transferPipelines[e]=r),r}getFlipYPipeline(e){let r=this.flipYPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Nd.TriangleStrip,stripIndexFormat:Lf.Uint32},layout:"auto"}),this.flipYPipelines[e]=r),r}flipY(e,r,i=0){const o=r.format,{width:s,height:a}=r.size,l=this.getTransferPipeline(o),c=this.getFlipYPipeline(o),u=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),d=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Oo.TwoD,baseArrayLayer:i}),f=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:Oo.TwoD,baseArrayLayer:0}),h=this.device.createCommandEncoder({}),p=(g,y,v)=>{const m=g.getBindGroupLayout(0),x=this.device.createBindGroup({layout:m,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:y}]}),b=h.beginRenderPass({colorAttachments:[{view:v,loadOp:yr.Clear,storeOp:Zr.Store,clearValue:[0,0,0,0]}]});b.setPipeline(g),b.setBindGroup(0,x),b.draw(4,1,0,0),b.end()};p(l,d,f),p(c,f,d),this.device.queue.submit([h.finish()]),u.destroy()}generateMipmaps(e,r,i=0){const o=this.get(e);o.useCount===void 0&&(o.useCount=0,o.layers=[]);const s=o.layers[i]||this._mipmapCreateBundles(e,r,i),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,s),this.device.queue.submit([a.finish()]),o.useCount!==0&&(o.layers[i]=s),o.useCount++}_mipmapCreateBundles(e,r,i){const o=this.getTransferPipeline(r.format),s=o.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Oo.TwoD,baseArrayLayer:i});const l=[];for(let c=1;c<r.mipLevelCount;c++){const u=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),d=e.createView({baseMipLevel:c,mipLevelCount:1,dimension:Oo.TwoD,baseArrayLayer:i}),f={colorAttachments:[{view:d,loadOp:yr.Clear,storeOp:Zr.Store,clearValue:[0,0,0,0]}]},h=this.device.createRenderBundleEncoder({colorFormats:[r.format]});h.setPipeline(o),h.setBindGroup(0,u),h.draw(4,1,0,0),l.push({renderBundles:[h.finish()],passDescriptor:f}),a=d}return l}_mipmapRunBundles(e,r){const i=r.length;for(let o=0;o<i;o++){const s=r[o],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const M1e={[EM]:"never",[t_]:"less",[TM]:"equal",[n_]:"less-equal",[MM]:"greater",[AM]:"greater-equal",[NM]:"always",[RM]:"not-equal"},R1e=[0,1,3,2,4,5];class A1e{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new dc,this.depthTexture.name="depthBuffer"}createSampler(e){const r=this.backend,i=r.device,o=r.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===zc.Linear&&s.minFilter===zc.Linear&&s.mipmapFilter===zc.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=M1e[e.compareFunction]),o.sampler=i.createSampler(s)}createDefaultTexture(e){let r;const i=lE(e);e.isCubeTexture?r=this._getDefaultCubeTextureGPU(i):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():r=this._getDefaultTextureGPU(i),this.backend.get(e).texture=r}createTexture(e,r={}){const i=this.backend,o=i.get(e);if(o.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");r.needsMipmaps===void 0&&(r.needsMipmaps=!1),r.levels===void 0&&(r.levels=1),r.depth===void 0&&(r.depth=1);const{width:s,height:a,depth:l,levels:c}=r;e.isFramebufferTexture&&(r.renderTarget?r.format=this.backend.utils.getCurrentColorFormat(r.renderTarget):r.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),d=e.internalFormat||r.format||lE(e,i.device);o.format=d;let f=r.sampleCount!==void 0?r.sampleCount:1;f=i.utils.getSampleCount(f);const h=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:f;let p=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(p|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(p|=GPUTextureUsage.RENDER_ATTACHMENT);const g={label:e.name,size:{width:s,height:a,depthOrArrayLayers:l},mipLevelCount:c,sampleCount:h,dimension:u,format:d,usage:p};if(e.isVideoTexture){const y=e.source.data,v=new VideoFrame(y);g.size.width=v.displayWidth,g.size.height=v.displayHeight,v.close(),o.externalTexture=y}else{if(d===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);o.texture=i.device.createTexture(g)}if(e.isRenderTargetTexture&&f>1&&!e.isMultisampleRenderTargetTexture){const y=Object.assign({},g);y.label=y.label+"-msaa",y.sampleCount=f,o.msaaTexture=i.device.createTexture(y)}o.initialized=!0,o.textureDescriptorGPU=g}destroyTexture(e){const r=this.backend,i=r.get(e);i.texture!==void 0&&i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),r.delete(e)}destroySampler(e){const i=this.backend.get(e);delete i.sampler}generateMipmaps(e){const r=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,i);else{const i=e.image.depth||1;for(let o=0;o<i;o++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,o)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:r,height:i}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:r,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,r=!1){const i=this.backend,{width:o,height:s}=i.getDrawingBufferSize(),a=this.depthTexture,l=i.get(a).texture;let c,u;if(r?(c=Ys,u=Ks):e&&(c=Ws,u=rr),l!==void 0){if(a.image.width===o&&a.image.height===s&&a.format===c&&a.type===u)return l;this.destroyTexture(a)}return a.name="depthBuffer",a.format=c,a.type=u,a.image.width=o,a.image.height=s,this.createTexture(a,{sampleCount:i.utils.getSampleCount(i.renderer.samples),width:o,height:s}),i.get(a).texture}updateTexture(e,r){const i=this.backend.get(e),{textureDescriptorGPU:o}=i;if(!(e.isRenderTargetTexture||o===void 0)){if(e.isDataTexture)this._copyBufferToTexture(r.image,i.texture,o,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<r.image.depth;s++)this._copyBufferToTexture(r.image,i.texture,o,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,i.texture,o);else if(e.isCubeTexture)this._copyCubeMapToTexture(r.images,i.texture,o,e.flipY);else if(e.isVideoTexture){const s=e.source.data;i.externalTexture=s}else this._copyImageToTexture(r.image,i.texture,o,0,e.flipY);i.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,r,i,o,s,a){const l=this.backend.device,c=this.backend.get(e),u=c.texture,d=c.textureDescriptorGPU.format,f=this._getBytesPerTexel(d);let h=o*f;h=Math.ceil(h/256)*256;const p=l.createBuffer({size:o*s*f,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),g=l.createCommandEncoder();g.copyTextureToBuffer({texture:u,origin:{x:r,y:i,z:a}},{buffer:p,bytesPerRow:h},{width:o,height:s});const y=this._getTypedArrayType(d);l.queue.submit([g.finish()]),await p.mapAsync(GPUMapMode.READ);const v=p.getMappedRange();return new y(v)}_isEnvironmentTexture(e){const r=e.mapping;return r===tc||r===nc||r===qo||r===Xo}_getDefaultTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new $r;i.minFilter=qn,i.magFilter=qn,this.createTexture(i,{width:1,height:1,format:e}),this.defaultTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultCubeTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new o_;i.minFilter=qn,i.magFilter=qn,this.createTexture(i,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const r={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),r)}return e}_copyCubeMapToTexture(e,r,i,o){for(let s=0;s<6;s++){const a=e[s],l=o===!0?R1e[s]:s;a.isDataTexture?this._copyBufferToTexture(a.image,r,i,l,o):this._copyImageToTexture(a,r,i,l,o)}}_copyImageToTexture(e,r,i,o,s){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:r,mipLevel:0,origin:{x:0,y:0,z:o}},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(r,i,o)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new T1e(this.backend.device)),e}_generateMipmaps(e,r,i=0){this._getPassUtils().generateMipmaps(e,r,i)}_flipY(e,r,i=0){this._getPassUtils().flipY(e,r,i)}_copyBufferToTexture(e,r,i,o,s,a=0){const l=this.backend.device,c=e.data,u=this._getBytesPerTexel(i.format),d=e.width*u;l.queue.writeTexture({texture:r,mipLevel:0,origin:{x:0,y:0,z:o}},c,{offset:e.width*e.height*u*a,bytesPerRow:d},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(r,i,o)}_copyCompressedBufferToTexture(e,r,i){const o=this.backend.device,s=this._getBlockData(i.format),a=i.size.depthOrArrayLayers>1;for(let l=0;l<e.length;l++){const c=e[l],u=c.width,d=c.height,f=a?i.size.depthOrArrayLayers:1,h=Math.ceil(u/s.width)*s.byteLength,p=h*Math.ceil(d/s.height);for(let g=0;g<f;g++)o.queue.writeTexture({texture:r,mipLevel:l,origin:{x:0,y:0,z:g}},c.data,{offset:g*p,bytesPerRow:h,rowsPerImage:Math.ceil(d/s.height)},{width:Math.ceil(u/s.width)*s.width,height:Math.ceil(d/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===ie.BC1RGBAUnorm||e===ie.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.BC2RGBAUnorm||e===ie.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.BC3RGBAUnorm||e===ie.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.BC4RUnorm||e===ie.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===ie.BC5RGUnorm||e===ie.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===ie.BC6HRGBUFloat||e===ie.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===ie.BC7RGBAUnorm||e===ie.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.ETC2RGB8Unorm||e===ie.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.ETC2RGB8A1Unorm||e===ie.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ie.ETC2RGBA8Unorm||e===ie.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===ie.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===ie.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===ie.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===ie.ASTC4x4Unorm||e===ie.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ie.ASTC5x4Unorm||e===ie.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===ie.ASTC5x5Unorm||e===ie.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===ie.ASTC6x5Unorm||e===ie.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===ie.ASTC6x6Unorm||e===ie.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===ie.ASTC8x5Unorm||e===ie.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===ie.ASTC8x6Unorm||e===ie.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===ie.ASTC8x8Unorm||e===ie.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===ie.ASTC10x5Unorm||e===ie.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===ie.ASTC10x6Unorm||e===ie.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===ie.ASTC10x8Unorm||e===ie.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===ie.ASTC10x10Unorm||e===ie.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===ie.ASTC12x10Unorm||e===ie.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===ie.ASTC12x12Unorm||e===ie.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let r=m1.ClampToEdge;return e===hu?r=m1.Repeat:e===pu&&(r=m1.MirrorRepeat),r}_convertFilterMode(e){let r=zc.Linear;return(e===qn||e===Ey||e===zs)&&(r=zc.Nearest),r}_getBytesPerTexel(e){if(e===ie.R8Unorm||e===ie.R8Snorm||e===ie.R8Uint||e===ie.R8Sint)return 1;if(e===ie.R16Uint||e===ie.R16Sint||e===ie.R16Float||e===ie.RG8Unorm||e===ie.RG8Snorm||e===ie.RG8Uint||e===ie.RG8Sint)return 2;if(e===ie.R32Uint||e===ie.R32Sint||e===ie.R32Float||e===ie.RG16Uint||e===ie.RG16Sint||e===ie.RG16Float||e===ie.RGBA8Unorm||e===ie.RGBA8UnormSRGB||e===ie.RGBA8Snorm||e===ie.RGBA8Uint||e===ie.RGBA8Sint||e===ie.BGRA8Unorm||e===ie.BGRA8UnormSRGB||e===ie.RGB9E5UFloat||e===ie.RGB10A2Unorm||e===ie.RG11B10UFloat||e===ie.Depth32Float||e===ie.Depth24Plus||e===ie.Depth24PlusStencil8||e===ie.Depth32FloatStencil8)return 4;if(e===ie.RG32Uint||e===ie.RG32Sint||e===ie.RG32Float||e===ie.RGBA16Uint||e===ie.RGBA16Sint||e===ie.RGBA16Float)return 8;if(e===ie.RGBA32Uint||e===ie.RGBA32Sint||e===ie.RGBA32Float)return 16}_getTypedArrayType(e){if(e===ie.R8Uint)return Uint8Array;if(e===ie.R8Sint)return Int8Array;if(e===ie.R8Unorm)return Uint8Array;if(e===ie.R8Snorm)return Int8Array;if(e===ie.RG8Uint)return Uint8Array;if(e===ie.RG8Sint)return Int8Array;if(e===ie.RG8Unorm)return Uint8Array;if(e===ie.RG8Snorm)return Int8Array;if(e===ie.RGBA8Uint)return Uint8Array;if(e===ie.RGBA8Sint)return Int8Array;if(e===ie.RGBA8Unorm)return Uint8Array;if(e===ie.RGBA8Snorm)return Int8Array;if(e===ie.R16Uint)return Uint16Array;if(e===ie.R16Sint)return Int16Array;if(e===ie.RG16Uint)return Uint16Array;if(e===ie.RG16Sint)return Int16Array;if(e===ie.RGBA16Uint)return Uint16Array;if(e===ie.RGBA16Sint)return Int16Array;if(e===ie.R16Float||e===ie.RG16Float||e===ie.RGBA16Float)return Uint16Array;if(e===ie.R32Uint)return Uint32Array;if(e===ie.R32Sint)return Int32Array;if(e===ie.R32Float)return Float32Array;if(e===ie.RG32Uint)return Uint32Array;if(e===ie.RG32Sint)return Int32Array;if(e===ie.RG32Float)return Float32Array;if(e===ie.RGBA32Uint)return Uint32Array;if(e===ie.RGBA32Sint)return Int32Array;if(e===ie.RGBA32Float)return Float32Array;if(e===ie.BGRA8Unorm||e===ie.BGRA8UnormSRGB)return Uint8Array;if(e===ie.RGB10A2Unorm||e===ie.RGB9E5UFloat||e===ie.RG11B10UFloat)return Uint32Array;if(e===ie.Depth32Float)return Float32Array;if(e===ie.Depth24Plus||e===ie.Depth24PlusStencil8)return Uint32Array;if(e===ie.Depth32FloatStencil8)return Float32Array}_getDimension(e){let r;return e.isData3DTexture?r=UD.ThreeD:r=UD.TwoD,r}}function lE(n,e=null){const r=n.format,i=n.type,o=n.colorSpace;let s;if(n.isCompressedTexture===!0||n.isCompressedArrayTexture===!0)switch(r){case Hl:s=o===Dt?ie.BC1RGBAUnormSRGB:ie.BC1RGBAUnorm;break;case jl:s=o===Dt?ie.BC2RGBAUnormSRGB:ie.BC2RGBAUnorm;break;case Wl:s=o===Dt?ie.BC3RGBAUnormSRGB:ie.BC3RGBAUnorm;break;case mf:s=o===Dt?ie.ETC2RGB8UnormSRGB:ie.ETC2RGB8Unorm;break;case gf:s=o===Dt?ie.ETC2RGBA8UnormSRGB:ie.ETC2RGBA8Unorm;break;case vf:s=o===Dt?ie.ASTC4x4UnormSRGB:ie.ASTC4x4Unorm;break;case yf:s=o===Dt?ie.ASTC5x4UnormSRGB:ie.ASTC5x4Unorm;break;case xf:s=o===Dt?ie.ASTC5x5UnormSRGB:ie.ASTC5x5Unorm;break;case _f:s=o===Dt?ie.ASTC6x5UnormSRGB:ie.ASTC6x5Unorm;break;case bf:s=o===Dt?ie.ASTC6x6UnormSRGB:ie.ASTC6x6Unorm;break;case Sf:s=o===Dt?ie.ASTC8x5UnormSRGB:ie.ASTC8x5Unorm;break;case wf:s=o===Dt?ie.ASTC8x6UnormSRGB:ie.ASTC8x6Unorm;break;case Cf:s=o===Dt?ie.ASTC8x8UnormSRGB:ie.ASTC8x8Unorm;break;case Ef:s=o===Dt?ie.ASTC10x5UnormSRGB:ie.ASTC10x5Unorm;break;case Tf:s=o===Dt?ie.ASTC10x6UnormSRGB:ie.ASTC10x6Unorm;break;case Mf:s=o===Dt?ie.ASTC10x8UnormSRGB:ie.ASTC10x8Unorm;break;case Rf:s=o===Dt?ie.ASTC10x10UnormSRGB:ie.ASTC10x10Unorm;break;case Af:s=o===Dt?ie.ASTC12x10UnormSRGB:ie.ASTC12x10Unorm;break;case Nf:s=o===Dt?ie.ASTC12x12UnormSRGB:ie.ASTC12x12Unorm;break;case ti:s=o===Dt?ie.RGBA8UnormSRGB:ie.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}else switch(r){case ti:switch(i){case Zc:s=ie.RGBA8Snorm;break;case Jc:s=ie.RGBA16Sint;break;case vs:s=ie.RGBA16Uint;break;case rr:s=ie.RGBA32Uint;break;case Xr:s=ie.RGBA32Sint;break;case hi:s=o===Dt?ie.RGBA8UnormSRGB:ie.RGBA8Unorm;break;case Yr:s=ie.RGBA16Float;break;case hr:s=ie.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case sg:switch(i){case e_:s=ie.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",i)}break;case ag:switch(i){case Zc:s=ie.R8Snorm;break;case Jc:s=ie.R16Sint;break;case vs:s=ie.R16Uint;break;case rr:s=ie.R32Uint;break;case Xr:s=ie.R32Sint;break;case hi:s=ie.R8Unorm;break;case Yr:s=ie.R16Float;break;case hr:s=ie.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case mu:switch(i){case Zc:s=ie.RG8Snorm;break;case Jc:s=ie.RG16Sint;break;case vs:s=ie.RG16Uint;break;case rr:s=ie.RG32Uint;break;case Xr:s=ie.RG32Sint;break;case hi:s=ie.RG8Unorm;break;case Yr:s=ie.RG16Float;break;case hr:s=ie.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case Ws:switch(i){case vs:s=ie.Depth16Unorm;break;case rr:s=ie.Depth24Plus;break;case hr:s=ie.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case Ys:switch(i){case Ks:s=ie.Depth24PlusStencil8;break;case hr:e&&e.features.has(aE.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=ie.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;case Xf:switch(i){case Xr:s=ie.R32Sint;break;case rr:s=ie.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",i)}break;case Kf:switch(i){case Xr:s=ie.RG32Sint;break;case rr:s=ie.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",i)}break;case Yf:switch(i){case Xr:s=ie.RGBA32Sint;break;case rr:s=ie.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}return s}const N1e=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,P1e=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,BD={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},O1e=n=>{n=n.trim();const e=n.match(N1e);if(e!==null&&e.length===4){const r=e[2],i=[];let o=null;for(;(o=P1e.exec(r))!==null;)i.push({name:o[1],type:o[2]});const s=[];for(let d=0;d<i.length;d++){const{name:f,type:h}=i[d];let p=h;p.startsWith("ptr")?p="pointer":(p.startsWith("texture")&&(p=h.split("<")[0]),p=BD[p]),s.push(new CR(p,f))}const a=n.substring(e[0].length),l=e[3]||"void",c=e[1]!==void 0?e[1]:"";return{type:BD[l]||l,inputs:s,name:c,inputsCode:r,blockCode:a,outputType:l}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class I1e extends ER{constructor(e){const{type:r,inputs:i,name:o,inputsCode:s,blockCode:a,outputType:l}=O1e(e);super(r,i,o),this.inputsCode=s,this.blockCode=a,this.outputType=l}getCode(e=this.name){const r=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${r}`+this.blockCode}}class D1e extends I5{parseFunction(e){return new I1e(e)}}const ad=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},L1e={[Pa.READ_ONLY]:"read",[Pa.WRITE_ONLY]:"write",[Pa.READ_WRITE]:"read_write"},$D={[hu]:"repeat",[$s]:"clamp",[pu]:"mirror"},kv={vertex:ad?ad.VERTEX:1,fragment:ad?ad.FRAGMENT:2,compute:ad?ad.COMPUTE:4},zD={instance:!0,swizzleAssign:!1,storageBuffer:!0},F1e={"^^":"tsl_xor"},U1e={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},kD={},Io={tsl_xor:new Ir("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Ir("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Ir("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Ir("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Ir("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Ir("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Ir("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Ir("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Ir("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Ir("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Ir("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Ir("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Ir(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},ip={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(Io.pow_float=new Ir("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),Io.pow_vec2=new Ir("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[Io.pow_float]),Io.pow_vec3=new Ir("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[Io.pow_float]),Io.pow_vec4=new Ir("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[Io.pow_float]),ip.pow_float="tsl_pow_float",ip.pow_vec2="tsl_pow_vec2",ip.pow_vec3="tsl_pow_vec3",ip.pow_vec4="tsl_pow_vec4");let V5="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(V5+=`diagnostic( off, derivative_uniformity );
`);class B1e extends P5{constructor(e,r){super(e,r,new D1e),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==mo}_generateTextureSample(e,r,i,o,s=this.shaderStage){return s==="fragment"?o?`textureSample( ${r}, ${r}_sampler, ${i}, ${o} )`:`textureSample( ${r}, ${r}_sampler, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i):this.generateTextureLod(e,r,i,o,"0")}_generateVideoSample(e,r,i=this.shaderStage){if(i==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${r}.x, 1.0 - ${r}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${i} shader.`)}_generateTextureSampleLevel(e,r,i,o,s,a=this.shaderStage){return a==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${r}, ${r}_sampler, ${i}, ${o} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i,o):this.generateTextureLod(e,r,i,s,o)}generateWrapFunction(e){const r=`tsl_coord_${$D[e.wrapS]}S_${$D[e.wrapT]}T`;let i=kD[r];if(i===void 0){const o=[];let s=`fn ${r}( coord : vec2f ) -> vec2f {

	return vec2f(
`;const a=(l,c)=>{l===hu?(o.push(Io.repeatWrapping_float),s+=`		tsl_repeatWrapping_float( coord.${c} )`):l===$s?(o.push(Io.clampWrapping_float),s+=`		tsl_clampWrapping_float( coord.${c} )`):l===pu?(o.push(Io.mirrorWrapping_float),s+=`		tsl_mirrorWrapping_float( coord.${c} )`):(s+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};a(e.wrapS,"x"),s+=`,
`,a(e.wrapT,"y"),s+=`
	);

}
`,kD[r]=i=new Ir(s,o)}return i.build(this),r}generateTextureDimension(e,r,i){const o=this.getDataFromNode(e,this.shaderStage,this.globalCache);o.dimensionsSnippet===void 0&&(o.dimensionsSnippet={});let s=o.dimensionsSnippet[i];if(o.dimensionsSnippet[i]===void 0){let a;e.isMultisampleRenderTargetTexture===!0?a=r:a=`${r}, u32( ${i} )`,s=new L4(new z4(`textureDimensions( ${a} )`,"uvec2")),o.dimensionsSnippet[i]=s}return s.build(this)}generateFilteredTexture(e,r,i,o="0u"){this._include("biquadraticTexture");const s=this.generateWrapFunction(e),a=this.generateTextureDimension(e,r,o);return`tsl_biquadraticTexture( ${r}, ${s}( ${i} ), ${a}, u32( ${o} ) )`}generateTextureLod(e,r,i,o,s="0u"){const a=this.generateWrapFunction(e),l=this.generateTextureDimension(e,r,s),c=`vec2u( ${a}( ${i} ) * vec2f( ${l} ) )`;return this.generateTextureLoad(e,r,c,o,s)}generateTextureLoad(e,r,i,o,s="0u"){return e.isVideoTexture===!0||e.isStorageTexture===!0?`textureLoad( ${r}, ${i} )`:o?`textureLoad( ${r}, ${i}, ${o}, u32( ${s} ) )`:`textureLoad( ${r}, ${i}, u32( ${s} ) )`}generateTextureStore(e,r,i,o){return`textureStore( ${r}, ${i}, ${o} )`}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===hr||this.isSampleCompare(e)===!1&&e.minFilter===qn&&e.magFilter===qn||e.isMultisampleRenderTargetTexture===!0}generateTexture(e,r,i,o,s=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(r,i,s):this.isUnfilterable(e)?a=this.generateTextureLod(e,r,i,o,"0",s):a=this._generateTextureSample(e,r,i,o,s),a}generateTextureGrad(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleGrad( ${r}, ${r}_sampler, ${i},  ${o[0]}, ${o[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${a} shader.`)}generateTextureCompare(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleCompare( ${r}, ${r}_sampler, ${i}, ${o} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}generateTextureLevel(e,r,i,o,s,a=this.shaderStage){let l=null;return e.isVideoTexture===!0?l=this._generateVideoSample(r,i,a):l=this._generateTextureSampleLevel(e,r,i,o,s,a),l}generateTextureBias(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleBias( ${r}, ${r}_sampler, ${i}, ${o} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${a} shader.`)}getPropertyName(e,r=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(r==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const i=e.name,o=e.type;return o==="texture"||o==="cubeTexture"||o==="storageTexture"||o==="texture3D"?i:o==="buffer"||o==="storageBuffer"||o==="indirectStorageBuffer"?`NodeBuffer_${e.id}.${i}`:e.groupNode.name+"."+i}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const r=F1e[e];return r!==void 0?(this._include(r),r):null}getNodeAccess(e,r){return r!=="compute"?Pa.READ_ONLY:e.access}getStorageAccess(e,r){return L1e[this.getNodeAccess(e,r)]}getUniformFromNode(e,r,i,o=null){const s=super.getUniformFromNode(e,r,i,o),a=this.getDataFromNode(e,i,this.globalCache);if(a.uniformGPU===void 0){let l;const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"){let f=null;const h=this.getNodeAccess(e,i);if(r==="texture"||r==="storageTexture"?f=new C_(s.name,s.node,c,h):r==="cubeTexture"?f=new $5(s.name,s.node,c,h):r==="texture3D"&&(f=new z5(s.name,s.node,c,h)),f.store=e.isStorageTextureNode===!0,f.setVisibility(kv[i]),i==="fragment"&&this.isUnfilterable(e.value)===!1&&f.store===!1){const p=new S1e(`${s.name}_sampler`,s.node,c);p.setVisibility(kv[i]),d.push(p,f),l=[p,f]}else d.push(f),l=[f]}else if(r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"){const f=r==="buffer"?U5:E1e,h=new f(e,c);h.setVisibility(kv[i]),d.push(h),l=h}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new B5(u,c),h.setVisibility(kv[i]),f[u]=h,d.push(h)),l=this.getNodeUniform(s,r),h.addUniform(l)}a.uniformGPU=l}return s}getBuiltin(e,r,i,o=this.shaderStage){const s=this.builtins[o]||(this.builtins[o]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:r,type:i}),r}hasBuiltin(e,r=this.shaderStage){return this.builtins[r]!==void 0&&this.builtins[r].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),o=[];for(const a of r.inputs)o.push(a.name+" : "+this.getType(a.type));let s=`fn ${r.name}( ${o.join(", ")} ) -> ${this.getType(r.type)} {
${i.vars}
${i.code}
`;return i.result&&(s+=`	return ${i.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,r=this.shaderStage){(this.directives[r]||(this.directives[r]=new Set)).add(e)}getDirectives(e){const r=[],i=this.directives[e];if(i!==void 0)for(const o of i)r.push(`enable ${o};`);return r.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const r=[],i=this.builtins[e];if(i!==void 0)for(const{name:o,property:s,type:a}of i.values())r.push(`@builtin( ${o} ) ${s} : ${a}`);return r.join(`,
	`)}getScopedArray(e,r,i,o){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:r,bufferType:i,bufferCount:o}),e}getScopedArrays(e){if(e!=="compute")return;const r=[];for(const{name:i,scope:o,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const l=this.getType(s);r.push(`var<${o}> ${i}: array< ${l}, ${a} >;`)}return r.join(`
`)}getAttributes(e){const r=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const i=this.getBuiltins("attribute");i&&r.push(i);const o=this.getAttributesArray();for(let s=0,a=o.length;s<a;s++){const l=o[s],c=l.name,u=this.getType(l.type);r.push(`@location( ${s} ) ${c} : ${u}`)}}return r.join(`,
	`)}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let s=0;s<i.length;s++){const a=i[s];r.push(`	@location( ${s} ) m${s} : ${a}<f32>`)}const o=this.getBuiltins("output");return o&&r.push("	"+o),r.join(`,
`)}getStructs(e){const r=[],i=this.structs[e];for(let o=0,s=i.length;o<s;o++){const a=i[o],l=a.name;let c=`struct ${l} {
`;c+=this.getStructMembers(a),c+=`
}`,r.push(c),r.push(`
var<private> output : ${l};

`)}return r.join(`

`)}getVar(e,r){return`var ${r} : ${this.getType(e)}`}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const o of i)r.push(`	${this.getVar(o.type,o.name)};`);return`
${r.join(`
`)}
`}getVaryings(e){const r=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let l=0;l<s.length;l++){const c=s[l];if(c.needsInterpolation){let u=`@location( ${l} )`;/^(int|uint|ivec|uvec)/.test(c.type)&&(u+=" @interpolate( flat )"),r.push(`${u} ${c.name} : ${this.getType(c.type)}`)}else e==="vertex"&&a.includes(c)===!1&&a.push(c)}}const i=this.getBuiltins(e);i&&r.push(i);const o=r.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+o):o}getUniforms(e){const r=this.uniforms[e],i=[],o=[],s=[],a={};for(const c of r){const u=c.groupNode.name,d=this.bindingsIndexes[u];if(c.type==="texture"||c.type==="cubeTexture"||c.type==="storageTexture"||c.type==="texture3D"){const f=c.node.value;e==="fragment"&&this.isUnfilterable(f)===!1&&c.node.isStorageTextureNode!==!0&&(this.isSampleCompare(f)?i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler_comparison;`):i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler;`));let h,p="";if(f.isMultisampleRenderTargetTexture===!0&&(p="_multisampled"),f.isCubeTexture===!0)h="texture_cube<f32>";else if(f.isDataArrayTexture===!0||f.isCompressedArrayTexture===!0)h="texture_2d_array<f32>";else if(f.isDepthTexture===!0)h=`texture_depth${p}_2d`;else if(f.isVideoTexture===!0)h="texture_external";else if(f.isData3DTexture===!0)h="texture_3d<f32>";else if(c.node.isStorageTextureNode===!0){const g=lE(f),y=this.getStorageAccess(c.node,e);h=`texture_storage_2d<${g}, ${y}>`}else{const g=this.getComponentTypeFromTexture(f).charAt(0);h=`texture${p}_2d<${g}32>`}i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name} : ${h};`)}else if(c.type==="buffer"||c.type==="storageBuffer"||c.type==="indirectStorageBuffer"){const f=c.node,h=this.getType(f.bufferType),p=f.bufferCount,g=p>0&&c.type==="buffer"?", "+p:"",y=f.isAtomic?`atomic<${h}>`:`${h}`,v=`	${c.name} : array< ${y}${g} >
`,m=f.isStorageBufferNode?`storage, ${this.getStorageAccess(f,e)}`:"uniform";o.push(this._getWGSLStructBinding("NodeBuffer_"+f.id,v,m,d.binding++,d.group))}else{const f=this.getType(this.getVectorType(c.type)),h=c.groupNode.name;(a[h]||(a[h]={index:d.binding++,id:d.group,snippets:[]})).snippets.push(`	${c.name} : ${f}`)}}for(const c in a){const u=a[c];s.push(this._getWGSLStructBinding(c,u.snippets.join(`,
`),"uniform",u.index,u.id))}let l=i.join(`
`);return l+=o.join(`
`),l+=s.join(`
`),l}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){const i=e[r];i.uniforms=this.getUniforms(r),i.attributes=this.getAttributes(r),i.varyings=this.getVaryings(r),i.structs=this.getStructs(r),i.vars=this.getVars(r),i.codes=this.getCodes(r),i.directives=this.getDirectives(r),i.scopedArrays=this.getScopedArrays(r);let o=`// code

`;o+=this.flowCode[r];const s=this.flowNodes[r],a=s[s.length-1],l=a.outputNode,c=l!==void 0&&l.isOutputStructNode===!0;for(const u of s){const d=this.getFlowData(u),f=u.name;if(f&&(o.length>0&&(o+=`
`),o+=`	// flow -> ${f}
	`),o+=`${d.code}
	`,u===a&&r!=="compute"){if(o+=`// result

	`,r==="vertex")o+=`varyings.Vertex = ${d.result};`;else if(r==="fragment")if(c)i.returnType=l.nodeType,o+=`return ${d.result};`;else{let h="	@location(0) color: vec4<f32>";const p=this.getBuiltins("output");p&&(h+=`,
	`+p),i.returnType="OutputStruct",i.structs+=this._getWGSLStruct("OutputStruct",h),i.structs+=`
var<private> output : OutputStruct;

`,o+=`output.color = ${d.result};

	return output;`}}}i.flow=o}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,r=null){let i;return r!==null&&(i=this._getWGSLMethod(e+"_"+r)),i===void 0&&(i=this._getWGSLMethod(e)),i||e}getType(e){return U1e[e]||e}isAvailable(e){let r=zD[e];return r===void 0&&(e==="float32Filterable"?r=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(r=this.renderer.hasFeature("clip-distances")),zD[e]=r),r}_getWGSLMethod(e){return Io[e]!==void 0&&this._include(e),ip[e]}_include(e){const r=Io[e];return r.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(r),r}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${V5}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,r){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${r} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x + id.y * numWorkgroups.x * u32(${r}) + id.z * numWorkgroups.x * numWorkgroups.y * u32(${r});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,r){return`
struct ${e} {
${r}
};`}_getWGSLStructBinding(e,r,i,o=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,r)}
@binding( ${o} ) @group( ${s} )
var<${i}> ${e} : ${a};`}}class $1e{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let r;return e.depthTexture!==null?r=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?r=ie.Depth24PlusStencil8:e.depth&&(r=ie.Depth24Plus),r}getTextureFormatGPU(e){return this.backend.get(e).format}getCurrentColorFormat(e){let r;return e.textures!==null?r=this.getTextureFormatGPU(e.textures[0]):r=this.getPreferredCanvasFormat(),r}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,r){if(e.isPoints)return Nd.PointList;if(e.isLineSegments||e.isMesh&&r.wireframe===!0)return Nd.LineList;if(e.isLine)return Nd.LineStrip;if(e.isMesh)return Nd.TriangleList}getSampleCount(e){let r=1;return e>1&&(r=Math.pow(2,Math.floor(Math.log2(e))),r===2&&(r=4)),r}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){return navigator.userAgent.includes("Quest")?ie.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}const z1e=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),k1e=new Map([[ck,["float16"]]]),V1e=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class G1e{constructor(e){this.backend=e}createAttribute(e,r){const i=this._getBufferAttribute(e),o=this.backend,s=o.get(i);let a=s.buffer;if(a===void 0){const l=o.device;let c=i.array;if(e.normalized===!1&&(c.constructor===Int16Array||c.constructor===Uint16Array)){const d=new Uint32Array(c.length);for(let f=0;f<c.length;f++)d[f]=c[f];c=d}if(i.array=c,(i.isStorageBufferAttribute||i.isStorageInstancedBufferAttribute)&&i.itemSize===3){c=new c.constructor(i.count*4);for(let d=0;d<i.count;d++)c.set(i.array.subarray(d*3,d*3+3),d*4);i.itemSize=4,i.array=c}const u=c.byteLength+(4-c.byteLength%4)%4;a=l.createBuffer({label:i.name,size:u,usage:r,mappedAtCreation:!0}),new c.constructor(a.getMappedRange()).set(c),a.unmap(),s.buffer=a}}updateAttribute(e){const r=this._getBufferAttribute(e),i=this.backend,o=i.device,s=i.get(r).buffer,a=r.array,l=this._isTypedArray(a),c=r.updateRanges;if(c.length===0)o.queue.writeBuffer(s,0,a,0);else{const u=l?1:a.BYTES_PER_ELEMENT;for(let d=0,f=c.length;d<f;d++){const h=c[d],p=h.start*u,g=h.count*u;o.queue.writeBuffer(s,0,a,p,g)}r.clearUpdateRanges()}}createShaderVertexBuffers(e){const r=e.getAttributes(),i=new Map;for(let o=0;o<r.length;o++){const s=r[o],a=s.array.BYTES_PER_ELEMENT,l=this._getBufferAttribute(s);let c=i.get(l);if(c===void 0){let f,h;s.isInterleavedBufferAttribute===!0?(f=s.data.stride*a,h=s.data.isInstancedInterleavedBuffer?zv.Instance:zv.Vertex):(f=s.itemSize*a,h=s.isInstancedBufferAttribute?zv.Instance:zv.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(f=4),c={arrayStride:f,attributes:[],stepMode:h},i.set(l,c)}const u=this._getVertexFormat(s),d=s.isInterleavedBufferAttribute===!0?s.offset*a:0;c.attributes.push({shaderLocation:o,offset:d,format:u})}return Array.from(i.values())}destroyAttribute(e){const r=this.backend;r.get(this._getBufferAttribute(e)).buffer.destroy(),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,i=r.device,s=r.get(this._getBufferAttribute(e)).buffer,a=s.size,l=i.createBuffer({label:e.name,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=i.createCommandEncoder({});c.copyBufferToBuffer(s,0,l,0,a),l.unmap();const u=c.finish();return i.queue.submit([u]),await l.mapAsync(GPUMapMode.READ),l.getMappedRange()}_getVertexFormat(e){const{itemSize:r,normalized:i}=e,o=e.array.constructor,s=e.constructor;let a;if(r==1)a=V1e.get(o);else{const c=(k1e.get(s)||z1e.get(o))[i?1:0];if(c){const u=o.BYTES_PER_ELEMENT*r,f=Math.floor((u+3)/4)*4/o.BYTES_PER_ELEMENT;if(f%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${c}x${f}`}}return a||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class H1e{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const i=this.backend.device,o=[];let s=0;for(const a of e.bindings){const l={binding:s++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const c={};a.isStorageBuffer&&(a.visibility&4&&(a.access===Pa.READ_WRITE||a.access===Pa.WRITE_ONLY)?c.type=g1.Storage:c.type=g1.ReadOnlyStorage),l.buffer=c}else if(a.isSampler){const c={};a.texture.isDepthTexture&&a.texture.compareFunction!==null&&(c.type="comparison"),l.sampler=c}else if(a.isSampledTexture&&a.texture.isVideoTexture)l.externalTexture={};else if(a.isSampledTexture&&a.store){const c={};c.format=this.backend.get(a.texture).texture.format;const u=a.access;u===Pa.READ_WRITE?c.access=v1.ReadWrite:u===Pa.WRITE_ONLY?c.access=v1.WriteOnly:c.access=v1.ReadOnly,l.storageTexture=c}else if(a.isSampledTexture){const c={};if(a.texture.isMultisampleRenderTargetTexture===!0&&(c.multisampled=!0),a.texture.isDepthTexture)c.sampleType=Hh.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const u=a.texture.type;u===Xr?c.sampleType=Hh.SInt:u===rr?c.sampleType=Hh.UInt:u===hr&&(this.backend.hasFeature("float32-filterable")?c.sampleType=Hh.Float:c.sampleType=Hh.UnfilterableFloat)}a.isSampledCubeTexture?c.viewDimension=Oo.Cube:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?c.viewDimension=Oo.TwoDArray:a.isSampledTexture3D&&(c.viewDimension=Oo.ThreeD),l.texture=c}else console.error(`WebGPUBindingUtils: Unsupported binding "${a}".`);o.push(l)}return i.createBindGroupLayout({entries:o})}createBindings(e,r,i,o=0){const{backend:s,bindGroupLayoutCache:a}=this,l=s.get(e);let c=a.get(e.bindingsReference);c===void 0&&(c=this.createBindingsLayout(e),a.set(e.bindingsReference,c));let u;i>0&&(l.groups===void 0&&(l.groups=[],l.versions=[]),l.versions[i]===o&&(u=l.groups[i])),u===void 0&&(u=this.createBindGroup(e,c),i>0&&(l.groups[i]=u,l.versions[i]=o)),l.group=u,l.layout=c}updateBinding(e){const r=this.backend,i=r.device,o=e.buffer,s=r.get(e).buffer;i.queue.writeBuffer(s,0,o,0)}createBindGroup(e,r){const i=this.backend,o=i.device;let s=0;const a=[];for(const l of e.bindings){if(l.isUniformBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.byteLength,d=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,f=o.createBuffer({label:"bindingBuffer_"+l.name,size:u,usage:d});c.buffer=f}a.push({binding:s,resource:{buffer:c.buffer}})}else if(l.isStorageBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.attribute;c.buffer=i.get(u).buffer}a.push({binding:s,resource:{buffer:c.buffer}})}else if(l.isSampler){const c=i.get(l.texture);a.push({binding:s,resource:c.sampler})}else if(l.isSampledTexture){const c=i.get(l.texture);let u;if(c.externalTexture!==void 0)u=o.importExternalTexture({source:c.externalTexture});else{const d=l.store?1:c.texture.mipLevelCount,f=`view-${c.texture.width}-${c.texture.height}-${d}`;if(u=c[f],u===void 0){const h=_1e.All;let p;l.isSampledCubeTexture?p=Oo.Cube:l.isSampledTexture3D?p=Oo.ThreeD:l.texture.isDataArrayTexture||l.texture.isCompressedArrayTexture?p=Oo.TwoDArray:p=Oo.TwoD,u=c[f]=c.texture.createView({aspect:h,dimension:p,mipLevelCount:d})}}a.push({binding:s,resource:u})}s++}return o.createBindGroup({label:"bindGroup_"+e.name,layout:r,entries:a})}}class j1e{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,r){const{object:i,material:o,geometry:s,pipeline:a}=e,{vertexProgram:l,fragmentProgram:c}=a,u=this.backend,d=u.device,f=u.utils,h=u.get(a),p=[];for(const L of e.getBindings()){const A=u.get(L);p.push(A.layout)}const g=u.attributeUtils.createShaderVertexBuffers(e);let y;o.transparent===!0&&o.blending!==Ri&&(y=this._getBlending(o));let v={};o.stencilWrite===!0&&(v={compare:this._getStencilCompare(o),failOp:this._getStencilOperation(o.stencilFail),depthFailOp:this._getStencilOperation(o.stencilZFail),passOp:this._getStencilOperation(o.stencilZPass)});const m=this._getColorWriteMask(o),x=[];if(e.context.textures!==null){const L=e.context.textures;for(let A=0;A<L.length;A++){const I=f.getTextureFormatGPU(L[A]);x.push({format:I,blend:y,writeMask:m})}}else{const L=f.getCurrentColorFormat(e.context);x.push({format:L,blend:y,writeMask:m})}const b=u.get(l).module,S=u.get(c).module,w=this._getPrimitiveState(i,s,o),C=this._getDepthCompare(o),E=f.getCurrentDepthStencilFormat(e.context),M=this._getSampleCount(e.context),T={label:`renderPipeline_${o.name||o.type}_${o.id}`,vertex:Object.assign({},b,{buffers:g}),fragment:Object.assign({},S,{targets:x}),primitive:w,multisample:{count:M,alphaToCoverageEnabled:o.alphaToCoverage&&M>1},layout:d.createPipelineLayout({bindGroupLayouts:p})},R={},P=e.context.depth,D=e.context.stencil;if((P===!0||D===!0)&&(P===!0&&(R.format=E,R.depthWriteEnabled=o.depthWrite,R.depthCompare=C),D===!0&&(R.stencilFront=v,R.stencilBack={},R.stencilReadMask=o.stencilFuncMask,R.stencilWriteMask=o.stencilWriteMask),T.depthStencil=R),r===null)h.pipeline=d.createRenderPipeline(T);else{const L=new Promise(A=>{d.createRenderPipelineAsync(T).then(I=>{h.pipeline=I,A()})});r.push(L)}}createBundleEncoder(e){const r=this.backend,{utils:i,device:o}=r,s=i.getCurrentDepthStencilFormat(e),a=i.getCurrentColorFormat(e),l=this._getSampleCount(e),c={label:"renderBundleEncoder",colorFormats:[a],depthStencilFormat:s,sampleCount:l};return o.createRenderBundleEncoder(c)}createComputePipeline(e,r){const i=this.backend,o=i.device,s=i.get(e.computeProgram).module,a=i.get(e),l=[];for(const c of r){const u=i.get(c);l.push(u.layout)}a.pipeline=o.createComputePipeline({compute:s,layout:o.createPipelineLayout({bindGroupLayouts:l})})}_getBlending(e){let r,i;const o=e.blending,s=e.blendSrc,a=e.blendDst,l=e.blendEquation;if(o===lM){const c=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,u=e.blendDstAlpha!==null?e.blendDstAlpha:a,d=e.blendEquationAlpha!==null?e.blendEquationAlpha:l;r={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(l)},i={srcFactor:this._getBlendFactor(c),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(d)}}else{const c=e.premultipliedAlpha,u=(d,f,h,p)=>{r={srcFactor:d,dstFactor:f,operation:Ec.Add},i={srcFactor:h,dstFactor:p,operation:Ec.Add}};if(c)switch(o){case ko:u(Ht.One,Ht.OneMinusSrcAlpha,Ht.One,Ht.OneMinusSrcAlpha);break;case du:u(Ht.One,Ht.One,Ht.One,Ht.One);break;case hf:u(Ht.Zero,Ht.OneMinusSrc,Ht.Zero,Ht.One);break;case pf:u(Ht.Zero,Ht.Src,Ht.Zero,Ht.SrcAlpha);break}else switch(o){case ko:u(Ht.SrcAlpha,Ht.OneMinusSrcAlpha,Ht.One,Ht.OneMinusSrcAlpha);break;case du:u(Ht.SrcAlpha,Ht.One,Ht.SrcAlpha,Ht.One);break;case hf:u(Ht.Zero,Ht.OneMinusSrc,Ht.Zero,Ht.One);break;case pf:u(Ht.Zero,Ht.Src,Ht.Zero,Ht.Src);break}}if(r!==void 0&&i!==void 0)return{color:r,alpha:i};console.error("THREE.WebGPURenderer: Invalid blending: ",o)}_getBlendFactor(e){let r;switch(e){case dM:r=Ht.Zero;break;case fM:r=Ht.One;break;case hM:r=Ht.Src;break;case pM:r=Ht.OneMinusSrc;break;case cm:r=Ht.SrcAlpha;break;case um:r=Ht.OneMinusSrcAlpha;break;case vM:r=Ht.Dst;break;case yM:r=Ht.OneMinusDstColor;break;case mM:r=Ht.DstAlpha;break;case gM:r=Ht.OneMinusDstAlpha;break;case xM:r=Ht.SrcAlphaSaturated;break;case Y_e:r=Ht.Constant;break;case Q_e:r=Ht.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return r}_getStencilCompare(e){let r;const i=e.stencilFunc;switch(i){case Rle:r=Qr.Never;break;case kC:r=Qr.Always;break;case Ale:r=Qr.Less;break;case Ple:r=Qr.LessEqual;break;case Nle:r=Qr.Equal;break;case Dle:r=Qr.GreaterEqual;break;case Ole:r=Qr.Greater;break;case Ile:r=Qr.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",i)}return r}_getStencilOperation(e){let r;switch(e){case Rc:r=yl.Keep;break;case ble:r=yl.Zero;break;case Sle:r=yl.Replace;break;case Mle:r=yl.Invert;break;case wle:r=yl.IncrementClamp;break;case Cle:r=yl.DecrementClamp;break;case Ele:r=yl.IncrementWrap;break;case Tle:r=yl.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",r)}return r}_getBlendOperation(e){let r;switch(e){case po:r=Ec.Add;break;case cM:r=Ec.Subtract;break;case uM:r=Ec.ReverseSubtract;break;case Xz:r=Ec.Min;break;case Kz:r=Ec.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return r}_getPrimitiveState(e,r,i){const o={},s=this.backend.utils;switch(o.topology=s.getPrimitiveTopology(e,i),r.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(o.stripIndexFormat=r.index.array instanceof Uint16Array?Lf.Uint16:Lf.Uint32),i.side){case Cs:o.frontFace=h1.CCW,o.cullMode=p1.Back;break;case er:o.frontFace=h1.CCW,o.cullMode=p1.Front;break;case Ei:o.frontFace=h1.CCW,o.cullMode=p1.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",i.side);break}return o}_getColorWriteMask(e){return e.colorWrite===!0?FD.All:FD.None}_getDepthCompare(e){let r;if(e.depthTest===!1)r=Qr.Always;else{const i=e.depthFunc;switch(i){case dm:r=Qr.Never;break;case fm:r=Qr.Always;break;case hm:r=Qr.Less;break;case ec:r=Qr.LessEqual;break;case pm:r=Qr.Equal;break;case mm:r=Qr.GreaterEqual;break;case gm:r=Qr.Greater;break;case vm:r=Qr.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",i)}}return r}}class W1e extends k5{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new $1e(this),this.attributeUtils=new G1e(this),this.bindingUtils=new H1e(this),this.pipelineUtils=new j1e(this),this.textureUtils=new A1e(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const r=this.parameters;let i;if(r.device===void 0){const a={powerPreference:r.powerPreference},l=typeof navigator<"u"?await navigator.gpu.requestAdapter(a):null;if(l===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const c=Object.values(aE),u=[];for(const f of c)l.features.has(f)&&u.push(f);const d={requiredFeatures:u,requiredLimits:r.requiredLimits};i=await l.requestDevice(d)}else i=r.device;i.lost.then(a=>{const l={api:"WebGPU",message:a.message||"Unknown reason",reason:a.reason||null,originalEvent:a};e.onDeviceLost(l)});const o=r.context!==void 0?r.context:e.domElement.getContext("webgpu");this.device=i,this.context=o;const s=r.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(aE.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return gu}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const i=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(i.depth,i.stencil).createView()});const o=e.colorAttachments[0];this.renderer.samples>0?o.view=this.colorBuffer.createView():o.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const r=e.colorAttachments[0];return this.renderer.samples>0?r.resolveTarget=this.context.getCurrentTexture().createView():r.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e){const r=e.renderTarget,i=this.get(r);let o=i.descriptors;if(o===void 0||i.width!==r.width||i.height!==r.height||i.activeMipmapLevel!==r.activeMipmapLevel||i.samples!==r.samples){o={},i.descriptors=o;const l=()=>{r.removeEventListener("dispose",l),this.delete(r)};r.addEventListener("dispose",l)}const s=e.getCacheKey();let a=o[s];if(a===void 0){const l=e.textures,c=[];for(let u=0;u<l.length;u++){const d=this.get(l[u]),f=d.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:Oo.TwoD});let h,p;d.msaaTexture!==void 0?(h=d.msaaTexture.createView(),p=f):(h=f,p=void 0),c.push({view:h,resolveTarget:p,loadOp:yr.Load,storeOp:Zr.Store})}if(a={colorAttachments:c},e.depth){const d={view:this.get(e.depthTexture).texture.createView()};a.depthStencilAttachment=d}o[s]=a,i.width=r.width,i.height=r.height,i.samples=r.samples,i.activeMipmapLevel=r.activeMipmapLevel}return a}beginRender(e){const r=this.get(e),i=this.device,o=e.occlusionQueryCount;let s;o>0&&(r.currentOcclusionQuerySet&&r.currentOcclusionQuerySet.destroy(),r.currentOcclusionQueryBuffer&&r.currentOcclusionQueryBuffer.destroy(),r.currentOcclusionQuerySet=r.occlusionQuerySet,r.currentOcclusionQueryBuffer=r.occlusionQueryBuffer,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,s=i.createQuerySet({type:"occlusion",count:o,label:`occlusionQuerySet_${e.id}`}),r.occlusionQuerySet=s,r.occlusionQueryIndex=0,r.occlusionQueryObjects=new Array(o),r.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e),this.initTimestampQuery(e,a),a.occlusionQuerySet=s;const l=a.depthStencilAttachment;if(e.textures!==null){const d=a.colorAttachments;for(let f=0;f<d.length;f++){const h=d[f];e.clearColor?(h.clearValue=f===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=yr.Clear,h.storeOp=Zr.Store):(h.loadOp=yr.Load,h.storeOp=Zr.Store)}}else{const d=a.colorAttachments[0];e.clearColor?(d.clearValue=e.clearColorValue,d.loadOp=yr.Clear,d.storeOp=Zr.Store):(d.loadOp=yr.Load,d.storeOp=Zr.Store)}e.depth&&(e.clearDepth?(l.depthClearValue=e.clearDepthValue,l.depthLoadOp=yr.Clear,l.depthStoreOp=Zr.Store):(l.depthLoadOp=yr.Load,l.depthStoreOp=Zr.Store)),e.stencil&&(e.clearStencil?(l.stencilClearValue=e.clearStencilValue,l.stencilLoadOp=yr.Clear,l.stencilStoreOp=Zr.Store):(l.stencilLoadOp=yr.Load,l.stencilStoreOp=Zr.Store));const c=i.createCommandEncoder({label:"renderContext_"+e.id}),u=c.beginRenderPass(a);if(r.descriptor=a,r.encoder=c,r.currentPass=u,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:d,y:f,width:h,height:p}=e.scissorValue;u.setScissorRect(d,f,h,p)}}finishRender(e){const r=this.get(e),i=e.occlusionQueryCount;if(r.renderBundles.length>0&&r.currentPass.executeBundles(r.renderBundles),i>r.occlusionQueryIndex&&r.currentPass.endOcclusionQuery(),r.currentPass.end(),i>0){const o=i*8;let s=this.occludedResolveCache.get(o);s===void 0&&(s=this.device.createBuffer({size:o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(o,s));const a=this.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});r.encoder.resolveQuerySet(r.occlusionQuerySet,0,i,s,0),r.encoder.copyBufferToBuffer(s,0,a,0,o),r.occlusionQueryBuffer=a,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,r.encoder),this.device.queue.submit([r.encoder.finish()]),e.textures!==null){const o=e.textures;for(let s=0;s<o.length;s++){const a=o[s];a.generateMipmaps===!0&&this.textureUtils.generateMipmaps(a)}}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}async resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueryBuffer:i,currentOcclusionQueryObjects:o}=r;if(i&&o){const s=new WeakSet;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueryBuffer=null,await i.mapAsync(GPUMapMode.READ);const a=i.getMappedRange(),l=new BigUint64Array(a);for(let c=0;c<o.length;c++)l[c]!==BigInt(0)&&s.add(o[c]);i.destroy(),r.occluded=s}}updateViewport(e){const{currentPass:r}=this.get(e),{x:i,y:o,width:s,height:a,minDepth:l,maxDepth:c}=e.viewportValue;r.setViewport(i,o,s,a,l,c)}clear(e,r,i,o=null){const s=this.device,a=this.renderer;let l=[],c,u,d,f;if(e){const g=this.getClearColor();if(this.renderer.alpha===!0){const y=g.a;u={r:g.r*y,g:g.g*y,b:g.b*y,a:y}}else u={r:g.r,g:g.g,b:g.b,a:g.a}}if(o===null){d=a.depth,f=a.stencil;const g=this._getDefaultRenderPassDescriptor();if(e){l=g.colorAttachments;const y=l[0];y.clearValue=u,y.loadOp=yr.Clear,y.storeOp=Zr.Store}(d||f)&&(c=g.depthStencilAttachment)}else{if(d=o.depth,f=o.stencil,e)for(const g of o.textures){const y=this.get(g),v=y.texture.createView();let m,x;y.msaaTexture!==void 0?(m=y.msaaTexture.createView(),x=v):(m=v,x=void 0),l.push({view:m,resolveTarget:x,clearValue:u,loadOp:yr.Clear,storeOp:Zr.Store})}(d||f)&&(c={view:this.get(o.depthTexture).texture.createView()})}d&&(r?(c.depthLoadOp=yr.Clear,c.depthClearValue=a.getClearDepth(),c.depthStoreOp=Zr.Store):(c.depthLoadOp=yr.Load,c.depthStoreOp=Zr.Store)),f&&(i?(c.stencilLoadOp=yr.Clear,c.stencilClearValue=a.getClearStencil(),c.stencilStoreOp=Zr.Store):(c.stencilLoadOp=yr.Load,c.stencilStoreOp=Zr.Store));const h=s.createCommandEncoder({});h.beginRenderPass({colorAttachments:l,depthStencilAttachment:c}).end(),s.queue.submit([h.finish()])}beginCompute(e){const r=this.get(e),i={};this.initTimestampQuery(e,i),r.cmdEncoderGPU=this.device.createCommandEncoder(),r.passEncoderGPU=r.cmdEncoderGPU.beginComputePass(i)}compute(e,r,i,o){const{passEncoderGPU:s}=this.get(e),a=this.get(o).pipeline;s.setPipeline(a);for(let d=0,f=i.length;d<f;d++){const h=i[d],p=this.get(h);s.setBindGroup(d,p.group)}const l=this.device.limits.maxComputeWorkgroupsPerDimension,c=this.get(r);c.dispatchSize===void 0&&(c.dispatchSize={x:0,y:1,z:1});const{dispatchSize:u}=c;r.dispatchCount>l?(u.x=Math.min(r.dispatchCount,l),u.y=Math.ceil(r.dispatchCount/l)):u.x=r.dispatchCount,s.dispatchWorkgroups(u.x,u.y,u.z)}finishCompute(e){const r=this.get(e);r.passEncoderGPU.end(),this.prepareTimestampBuffer(e,r.cmdEncoderGPU),this.device.queue.submit([r.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,r){const{object:i,context:o,pipeline:s}=e,a=e.getBindings(),l=this.get(o),c=this.get(s).pipeline,u=l.currentSets,d=l.currentPass,f=e.getDrawParameters();if(f===null)return;u.pipeline!==c&&(d.setPipeline(c),u.pipeline=c);const h=u.bindingGroups;for(let v=0,m=a.length;v<m;v++){const x=a[v],b=this.get(x);h[x.index]!==x.id&&(d.setBindGroup(x.index,b.group),h[x.index]=x.id)}const p=e.getIndex(),g=p!==null;if(g===!0&&u.index!==p){const v=this.get(p).buffer,m=p.array instanceof Uint16Array?Lf.Uint16:Lf.Uint32;d.setIndexBuffer(v,m),u.index=p}const y=e.getVertexBuffers();for(let v=0,m=y.length;v<m;v++){const x=y[v];if(u.attributes[v]!==x){const b=this.get(x).buffer;d.setVertexBuffer(v,b),u.attributes[v]=x}}if(l.occlusionQuerySet!==void 0){const v=l.lastOcclusionObject;v!==i&&(v!==null&&v.occlusionTest===!0&&(d.endOcclusionQuery(),l.occlusionQueryIndex++),i.occlusionTest===!0&&(d.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=i),l.lastOcclusionObject=i)}if(i.isBatchedMesh===!0){const v=i._multiDrawStarts,m=i._multiDrawCounts,x=i._multiDrawCount,b=i._multiDrawInstances,S=g?p.array.BYTES_PER_ELEMENT:1;for(let w=0;w<x;w++){const C=b?b[w]:1,E=C>1?0:w;d.drawIndexed(m[w],C,v[w]/S,0,E)}}else if(g===!0){const{vertexCount:v,instanceCount:m,firstVertex:x}=f,b=e.getIndirect();if(b!==null){const S=this.get(b).buffer;d.drawIndexedIndirect(S,0)}else d.drawIndexed(v,m,x,0,0);r.update(i,v,m)}else{const{vertexCount:v,instanceCount:m,firstVertex:x}=f,b=e.getIndirect();if(b!==null){const S=this.get(b).buffer;d.drawIndirect(S,0)}else d.draw(v,m,x,0);r.update(i,v,m)}}needsRenderUpdate(e){const r=this.get(e),{object:i,material:o}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),l=s.getCurrentColorSpace(e.context),c=s.getCurrentColorFormat(e.context),u=s.getCurrentDepthStencilFormat(e.context),d=s.getPrimitiveTopology(i,o);let f=!1;return(r.material!==o||r.materialVersion!==o.version||r.transparent!==o.transparent||r.blending!==o.blending||r.premultipliedAlpha!==o.premultipliedAlpha||r.blendSrc!==o.blendSrc||r.blendDst!==o.blendDst||r.blendEquation!==o.blendEquation||r.blendSrcAlpha!==o.blendSrcAlpha||r.blendDstAlpha!==o.blendDstAlpha||r.blendEquationAlpha!==o.blendEquationAlpha||r.colorWrite!==o.colorWrite||r.depthWrite!==o.depthWrite||r.depthTest!==o.depthTest||r.depthFunc!==o.depthFunc||r.stencilWrite!==o.stencilWrite||r.stencilFunc!==o.stencilFunc||r.stencilFail!==o.stencilFail||r.stencilZFail!==o.stencilZFail||r.stencilZPass!==o.stencilZPass||r.stencilFuncMask!==o.stencilFuncMask||r.stencilWriteMask!==o.stencilWriteMask||r.side!==o.side||r.alphaToCoverage!==o.alphaToCoverage||r.sampleCount!==a||r.colorSpace!==l||r.colorFormat!==c||r.depthStencilFormat!==u||r.primitiveTopology!==d||r.clippingContextCacheKey!==e.clippingContextCacheKey)&&(r.material=o,r.materialVersion=o.version,r.transparent=o.transparent,r.blending=o.blending,r.premultipliedAlpha=o.premultipliedAlpha,r.blendSrc=o.blendSrc,r.blendDst=o.blendDst,r.blendEquation=o.blendEquation,r.blendSrcAlpha=o.blendSrcAlpha,r.blendDstAlpha=o.blendDstAlpha,r.blendEquationAlpha=o.blendEquationAlpha,r.colorWrite=o.colorWrite,r.depthWrite=o.depthWrite,r.depthTest=o.depthTest,r.depthFunc=o.depthFunc,r.stencilWrite=o.stencilWrite,r.stencilFunc=o.stencilFunc,r.stencilFail=o.stencilFail,r.stencilZFail=o.stencilZFail,r.stencilZPass=o.stencilZPass,r.stencilFuncMask=o.stencilFuncMask,r.stencilWriteMask=o.stencilWriteMask,r.side=o.side,r.alphaToCoverage=o.alphaToCoverage,r.sampleCount=a,r.colorSpace=l,r.colorFormat=c,r.depthStencilFormat=u,r.primitiveTopology=d,r.clippingContextCacheKey=e.clippingContextCacheKey,f=!0),f}getRenderCacheKey(e){const{object:r,material:i}=e,o=this.utils,s=e.context;return[i.transparent,i.blending,i.premultipliedAlpha,i.blendSrc,i.blendDst,i.blendEquation,i.blendSrcAlpha,i.blendDstAlpha,i.blendEquationAlpha,i.colorWrite,i.depthWrite,i.depthTest,i.depthFunc,i.stencilWrite,i.stencilFunc,i.stencilFail,i.stencilZFail,i.stencilZPass,i.stencilFuncMask,i.stencilWriteMask,i.side,o.getSampleCountRenderContext(s),o.getCurrentColorSpace(s),o.getCurrentColorFormat(s),o.getCurrentDepthStencilFormat(s),o.getPrimitiveTopology(r,i),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,o,s,a){return this.textureUtils.copyTextureToBuffer(e,r,i,o,s,a)}initTimestampQuery(e,r){if(!this.trackTimestamp)return;const i=this.get(e);if(!i.timeStampQuerySet){const o=e.isComputeNode?"compute":"render",s=this.device.createQuerySet({type:"timestamp",count:2,label:`timestamp_${o}_${e.id}`});Object.assign(r,{timestampWrites:{querySet:s,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}),i.timeStampQuerySet=s}}prepareTimestampBuffer(e,r){if(!this.trackTimestamp)return;const i=this.get(e),o=2*BigInt64Array.BYTES_PER_ELEMENT;i.currentTimestampQueryBuffers===void 0&&(i.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})});const{resolveBuffer:s,resultBuffer:a}=i.currentTimestampQueryBuffers;r.resolveQuerySet(i.timeStampQuerySet,0,2,s,0),a.mapState==="unmapped"&&r.copyBufferToBuffer(s,0,a,0,o)}async resolveTimestampAsync(e,r="render"){if(!this.trackTimestamp)return;const i=this.get(e);if(i.currentTimestampQueryBuffers===void 0)return;const{resultBuffer:o}=i.currentTimestampQueryBuffers;await this.device.queue.onSubmittedWorkDone(),o.mapState==="unmapped"&&o.mapAsync(GPUMapMode.READ).then(()=>{const s=new BigUint64Array(o.getMappedRange()),a=Number(s[1]-s[0])/1e6;this.renderer.info.updateTimestamp(r,a),o.unmap()})}createNodeBuilder(e,r){return new B1e(e,r)}createProgram(e){const r=this.get(e);r.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,r){this.pipelineUtils.createRenderPipeline(e,r)}createComputePipeline(e,r){this.pipelineUtils.createComputePipeline(e,r)}beginBundle(e){const r=this.get(e);r._currentPass=r.currentPass,r._currentSets=r.currentSets,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,r){const i=this.get(e),s=i.currentPass.finish();this.get(r).bundleGPU=s,i.currentSets=i._currentSets,i.currentPass=i._currentPass}addBundle(e,r){this.get(e).renderBundles.push(this.get(r).bundleGPU)}createBindings(e,r,i,o){this.bindingUtils.createBindings(e,r,i,o)}updateBindings(e,r,i,o){this.bindingUtils.createBindings(e,r,i,o)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,r,i=null,o=null,s=0){let a=0,l=0,c=0,u=0,d=0,f=0,h=e.image.width,p=e.image.height;i!==null&&(u=i.x,d=i.y,f=i.z||0,h=i.width,p=i.height),o!==null&&(a=o.x,l=o.y,c=o.z||0);const g=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+r.id}),y=this.get(e).texture,v=this.get(r).texture;g.copyTextureToTexture({texture:y,mipLevel:s,origin:{x:u,y:d,z:f}},{texture:v,mipLevel:s,origin:{x:a,y:l,z:c}},[h,p,1]),this.device.queue.submit([g.finish()])}copyFramebufferToTexture(e,r,i){const o=this.get(r);let s=null;r.renderTarget?e.isDepthTexture?s=this.get(r.depthTexture).texture:s=this.get(r.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(r.depth,r.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let l;if(o.currentPass?(o.currentPass.end(),l=o.encoder):l=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),l.copyTextureToTexture({texture:s,origin:[i.x,i.y,0]},{texture:a},[i.z,i.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),o.currentPass){const{descriptor:c}=o;for(let u=0;u<c.colorAttachments.length;u++)c.colorAttachments[u].loadOp=yr.Load;if(r.depth&&(c.depthStencilAttachment.depthLoadOp=yr.Load),r.stencil&&(c.depthStencilAttachment.stencilLoadOp=yr.Load),o.currentPass=l.beginRenderPass(c),o.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.viewport&&this.updateViewport(r),r.scissor){const{x:u,y:d,width:f,height:h}=r.scissorValue;o.currentPass.setScissorRect(u,d,f,h)}}else this.device.queue.submit([l.finish()])}}class q1e extends yk{constructor(e,r,i,o,s,a){super(e,r,i,o,s,a),this.iesMap=null}copy(e,r){return super.copy(e,r),this.iesMap=e.iesMap,this}}class X1e extends D5{constructor(){super(),this.addMaterial(kxe,"MeshPhongMaterial"),this.addMaterial(y5,"MeshStandardMaterial"),this.addMaterial(M_e,"MeshPhysicalMaterial"),this.addMaterial(P_e,"MeshToonMaterial"),this.addMaterial(Dxe,"MeshBasicMaterial"),this.addMaterial($xe,"MeshLambertMaterial"),this.addMaterial(Rxe,"MeshNormalMaterial"),this.addMaterial(L_e,"MeshMatcapMaterial"),this.addMaterial(wxe,"LineBasicMaterial"),this.addMaterial(Exe,"LineDashedMaterial"),this.addMaterial(U_e,"PointsMaterial"),this.addMaterial(k_e,"SpriteMaterial"),this.addMaterial(H_e,"ShadowMaterial"),this.addLight(lSe,iue),this.addLight(USe,xk),this.addLight(BSe,sue),this.addLight(O5,yk),this.addLight(zSe,_k),this.addLight(kSe,tue),this.addLight(VSe,lue),this.addLight($Se,q1e),this.addToneMapping(Cbe,Zz),this.addToneMapping(Ebe,Jz),this.addToneMapping(Tbe,ek),this.addToneMapping(Rbe,tk),this.addToneMapping(Obe,nk),this.addToneMapping(Ibe,rk)}}class K1e extends JSe{constructor(e={}){let r;e.forceWebGL?r=LD:(r=W1e,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new LD(e)));const i=new r(e);super(i,e),this.library=new X1e,this.isWebGPURenderer=!0}}const y1={type:"change"},MR={type:"start"},RR={type:"end"},VD=1e-6,wn={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},Vv=new je,xl=new je,Y1e=new Y,Gv=new Y,x1=new Y,ld=new Qs,GD=new Y,Hv=new Y,_1=new Y,jv=new Y;class Q1e extends u_{constructor(e,r=null){super(e,r),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:ei.ROTATE,MIDDLE:ei.DOLLY,RIGHT:ei.PAN},this.state=wn.NONE,this.keyState=wn.NONE,this.target=new Y,this._lastPosition=new Y,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new Y,this._movePrev=new je,this._moveCurr=new je,this._lastAxis=new Y,this._zoomStart=new je,this._zoomEnd=new je,this._panStart=new je,this._panEnd=new je,this._pointers=[],this._pointerPositions={},this._onPointerMove=J1e.bind(this),this._onPointerDown=Z1e.bind(this),this._onPointerUp=ewe.bind(this),this._onPointerCancel=twe.bind(this),this._onContextMenu=lwe.bind(this),this._onMouseWheel=awe.bind(this),this._onKeyDown=rwe.bind(this),this._onKeyUp=nwe.bind(this),this._onTouchStart=cwe.bind(this),this._onTouchMove=uwe.bind(this),this._onTouchEnd=dwe.bind(this),this._onMouseDown=iwe.bind(this),this._onMouseMove=owe.bind(this),this._onMouseUp=swe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,r!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-r.clientLeft,this.screen.top=e.top+window.pageYOffset-r.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>VD&&(this.dispatchEvent(y1),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>VD||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(y1),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=wn.NONE,this.keyState=wn.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(y1),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(xl.copy(this._panEnd).sub(this._panStart),xl.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,r=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;xl.x*=e,xl.y*=r}xl.multiplyScalar(this._eye.length()*this.panSpeed),Gv.copy(this._eye).cross(this.object.up).setLength(xl.x),Gv.add(Y1e.copy(this.object.up).setLength(xl.y)),this.object.position.add(Gv),this.target.add(Gv),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(xl.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){jv.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=jv.length();e?(this._eye.copy(this.object.position).sub(this.target),GD.copy(this._eye).normalize(),Hv.copy(this.object.up).normalize(),_1.crossVectors(Hv,GD).normalize(),Hv.setLength(this._moveCurr.y-this._movePrev.y),_1.setLength(this._moveCurr.x-this._movePrev.x),jv.copy(Hv.add(_1)),x1.crossVectors(jv,this._eye).normalize(),e*=this.rotateSpeed,ld.setFromAxisAngle(x1,e),this._eye.applyQuaternion(ld),this.object.up.applyQuaternion(ld),this._lastAxis.copy(x1),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),ld.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(ld),this.object.up.applyQuaternion(ld)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===wn.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Ry.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=Ry.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,r){return Vv.set((e-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),Vv}_getMouseOnCircle(e,r){return Vv.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),Vv}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r].pointerId==e.pointerId){this._pointers.splice(r,1);return}}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new je,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[r.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function Z1e(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function J1e(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function ewe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function twe(n){this._removePointer(n)}function nwe(){this.enabled!==!1&&(this.keyState=wn.NONE,window.addEventListener("keydown",this._onKeyDown))}function rwe(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===wn.NONE&&(n.code===this.keys[wn.ROTATE]&&!this.noRotate?this.keyState=wn.ROTATE:n.code===this.keys[wn.ZOOM]&&!this.noZoom?this.keyState=wn.ZOOM:n.code===this.keys[wn.PAN]&&!this.noPan&&(this.keyState=wn.PAN)))}function iwe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ei.DOLLY:this.state=wn.ZOOM;break;case ei.ROTATE:this.state=wn.ROTATE;break;case ei.PAN:this.state=wn.PAN;break;default:this.state=wn.NONE}const r=this.keyState!==wn.NONE?this.keyState:this.state;r===wn.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):r===wn.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):r===wn.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(MR)}function owe(n){const e=this.keyState!==wn.NONE?this.keyState:this.state;e===wn.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===wn.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===wn.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function swe(){this.state=wn.NONE,this.dispatchEvent(RR)}function awe(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(MR),this.dispatchEvent(RR)}}function lwe(n){this.enabled!==!1&&n.preventDefault()}function cwe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=wn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=wn.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,r=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+r*r);const i=(this._pointers[0].pageX+this._pointers[1].pageX)/2,o=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(i,o)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(MR)}function uwe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:const e=this._getSecondPointerPosition(n),r=n.pageX-e.x,i=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(r*r+i*i);const o=(n.pageX+e.x)/2,s=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(o,s));break}}function dwe(n){switch(this._pointers.length){case 0:this.state=wn.NONE;break;case 1:this.state=wn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=wn.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){const r=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(r.x,r.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(RR)}const HD={type:"change"},AR={type:"start"},G5={type:"end"},Wv=new i_,jD=new us,fwe=Math.cos(70*Ry.DEG2RAD),Or=new Y,Fi=2*Math.PI,Dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},b1=1e-6;class hwe extends u_{constructor(e,r=null){super(e,r),this.state=Dn.NONE,this.enabled=!0,this.target=new Y,this.cursor=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ei.ROTATE,MIDDLE:ei.DOLLY,RIGHT:ei.PAN},this.touches={ONE:Na.ROTATE,TWO:Na.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Y,this._lastQuaternion=new Qs,this._lastTargetPosition=new Y,this._quat=new Qs().setFromUnitVectors(e.up,new Y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new kO,this._sphericalDelta=new kO,this._scale=1,this._panOffset=new Y,this._rotateStart=new je,this._rotateEnd=new je,this._rotateDelta=new je,this._panStart=new je,this._panEnd=new je,this._panDelta=new je,this._dollyStart=new je,this._dollyEnd=new je,this._dollyDelta=new je,this._dollyDirection=new Y,this._mouse=new je,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=mwe.bind(this),this._onPointerDown=pwe.bind(this),this._onPointerUp=gwe.bind(this),this._onContextMenu=wwe.bind(this),this._onMouseWheel=xwe.bind(this),this._onKeyDown=_we.bind(this),this._onTouchStart=bwe.bind(this),this._onTouchMove=Swe.bind(this),this._onMouseDown=vwe.bind(this),this._onMouseMove=ywe.bind(this),this._interceptControlDown=Cwe.bind(this),this._interceptControlUp=Ewe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(HD),this.update(),this.state=Dn.NONE}update(e=null){const r=this.object.position;Or.copy(r).sub(this.target),Or.applyQuaternion(this._quat),this._spherical.setFromVector3(Or),this.autoRotate&&this.state===Dn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(i)&&isFinite(o)&&(i<-Math.PI?i+=Fi:i>Math.PI&&(i-=Fi),o<-Math.PI?o+=Fi:o>Math.PI&&(o-=Fi),i<=o?this._spherical.theta=Math.max(i,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+o)/2?Math.max(i,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Or.setFromSpherical(this._spherical),Or.applyQuaternion(this._quatInverse),r.copy(this.target).add(Or),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const l=Or.length();a=this._clampDistance(l*this._scale);const c=l-a;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),s=!!c}else if(this.object.isOrthographicCamera){const l=new Y(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=c!==this.object.zoom;const u=new Y(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(l),this.object.updateMatrixWorld(),a=Or.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(Wv.origin.copy(this.object.position),Wv.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Wv.direction))<fwe?this.object.lookAt(this.target):(jD.setFromNormalAndCoplanarPoint(this.object.up,this.target),Wv.intersectPlane(jD,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>b1||8*(1-this._lastQuaternion.dot(this.object.quaternion))>b1||this._lastTargetPosition.distanceToSquared(this.target)>b1?(this.dispatchEvent(HD),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Fi/60*this.autoRotateSpeed*e:Fi/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){Or.setFromMatrixColumn(r,0),Or.multiplyScalar(-e),this._panOffset.add(Or)}_panUp(e,r){this.screenSpacePanning===!0?Or.setFromMatrixColumn(r,1):(Or.setFromMatrixColumn(r,0),Or.crossVectors(this.object.up,Or)),Or.multiplyScalar(e),this._panOffset.add(Or)}_pan(e,r){const i=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;Or.copy(o).sub(this.target);let s=Or.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*r*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),o=e-i.left,s=r-i.top,a=i.width,l=i.height;this._mouse.x=o/a*2-1,this._mouse.y=-(s/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Fi*this._rotateDelta.x/r.clientHeight),this._rotateUp(Fi*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._rotateStart.set(i,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panStart.set(i,o)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,o=e.pageY-r.y,s=Math.sqrt(i*i+o*o);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),o=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this._rotateEnd.set(o,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Fi*this._rotateDelta.x/r.clientHeight),this._rotateUp(Fi*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panEnd.set(i,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,o=e.pageY-r.y,s=Math.sqrt(i*i+o*o);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+r.x)*.5,l=(e.pageY+r.y)*.5;this._updateZoomParameters(a,l)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new je,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function pwe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function mwe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function gwe(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(G5),this.state=Dn.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function vwe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ei.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Dn.DOLLY;break;case ei.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}break;case ei.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(AR)}function ywe(n){switch(this.state){case Dn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Dn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Dn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function xwe(n){this.enabled===!1||this.enableZoom===!1||this.state!==Dn.NONE||(n.preventDefault(),this.dispatchEvent(AR),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(G5))}function _we(n){this.enabled!==!1&&this._handleKeyDown(n)}function bwe(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Na.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Dn.TOUCH_ROTATE;break;case Na.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Dn.TOUCH_PAN;break;default:this.state=Dn.NONE}break;case 2:switch(this.touches.TWO){case Na.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Dn.TOUCH_DOLLY_PAN;break;case Na.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Dn.TOUCH_DOLLY_ROTATE;break;default:this.state=Dn.NONE}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(AR)}function Swe(n){switch(this._trackPointer(n),this.state){case Dn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Dn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Dn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Dn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Dn.NONE}}function wwe(n){this.enabled!==!1&&n.preventDefault()}function Cwe(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Ewe(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const Twe={type:"change"},WD=1e-6,qD=new Qs;class Mwe extends u_{constructor(e,r=null){super(e,r),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new Y(0,0,0),this._rotationVector=new Y(0,0,0),this._lastQuaternion=new Qs,this._lastPosition=new Y,this._status=0,this._onKeyDown=Rwe.bind(this),this._onKeyUp=Awe.bind(this),this._onPointerMove=Pwe.bind(this),this._onPointerDown=Nwe.bind(this),this._onPointerUp=Owe.bind(this),this._onPointerCancel=Iwe.bind(this),this._onContextMenu=Dwe.bind(this),r!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const r=this.object,i=e*this.movementSpeed,o=e*this.rollSpeed;r.translateX(this._moveVector.x*i),r.translateY(this._moveVector.y*i),r.translateZ(this._moveVector.z*i),qD.set(this._rotationVector.x*o,this._rotationVector.y*o,this._rotationVector.z*o,1).normalize(),r.quaternion.multiply(qD),(this._lastPosition.distanceToSquared(r.position)>WD||8*(1-this._lastQuaternion.dot(r.quaternion))>WD)&&(this.dispatchEvent(Twe),this._lastQuaternion.copy(r.quaternion),this._lastPosition.copy(r.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function Rwe(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function Awe(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function Nwe(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function Pwe(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),r=e.size[0]/2,i=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-r)/r,this._moveState.pitchDown=(n.pageY-e.offset[1]-i)/i,this._updateRotationVector()}}function Owe(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function Iwe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function Dwe(n){this.enabled!==!1&&n.preventDefault()}const H5={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class mg{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Lwe=new lg(-1,1,1,-1,0,1);class Fwe extends Li{constructor(){super(),this.setAttribute("position",new mr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new mr([0,2,0,0,2,0],2))}}const Uwe=new Fwe;class j5{constructor(e){this._mesh=new Br(Uwe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Lwe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Bwe extends mg{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof Gi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Ay.clone(e.uniforms),this.material=new Gi({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new j5(this.material)}render(e,r,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class XD extends mg{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,i){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,l;this.inverse?(a=0,l=1):(a=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,a,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class $we extends mg{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class zwe{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const i=e.getSize(new je);this._width=i.width,this._height=i.height,r=new Ss(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Yr}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Bwe(H5),this.copyPass.material.blending=Ri,this.clock=new bk}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let i=!1;for(let o=0,s=this.passes.length;o<s;o++){const a=this.passes[o];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),a.needsSwap){if(i){const l=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}XD!==void 0&&(a instanceof XD?i=!0:a instanceof $we&&(i=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new je);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(i,o),this.renderTarget2.setSize(i,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class kwe extends mg{constructor(e,r,i=null,o=null,s=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=i,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Tt}render(e,r,i){const o=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=o}}function Vwe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,tf(n,e)}var Vs=function(n){Vwe(e,n);function e(r){var i;return i=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+r+" for more information.")||this,nn(i)}return e}(ly(Error));function S1(n){return Math.round(n*255)}function Gwe(n,e,r){return S1(n)+","+S1(e)+","+S1(r)}function Fm(n,e,r,i){if(i===void 0&&(i=Gwe),e===0)return i(r,r,r);var o=(n%360+360)%360/60,s=(1-Math.abs(2*r-1))*e,a=s*(1-Math.abs(o%2-1)),l=0,c=0,u=0;o>=0&&o<1?(l=s,c=a):o>=1&&o<2?(l=a,c=s):o>=2&&o<3?(c=s,u=a):o>=3&&o<4?(c=a,u=s):o>=4&&o<5?(l=a,u=s):o>=5&&o<6&&(l=s,u=a);var d=r-s/2,f=l+d,h=c+d,p=u+d;return i(f,h,p)}var KD={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function Hwe(n){if(typeof n!="string")return n;var e=n.toLowerCase();return KD[e]?"#"+KD[e]:n}var jwe=/^#[a-fA-F0-9]{6}$/,Wwe=/^#[a-fA-F0-9]{8}$/,qwe=/^#[a-fA-F0-9]{3}$/,Xwe=/^#[a-fA-F0-9]{4}$/,w1=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,Kwe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Ywe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Qwe=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function xu(n){if(typeof n!="string")throw new Vs(3);var e=Hwe(n);if(e.match(jwe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(Wwe)){var r=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:r}}if(e.match(qwe))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(Xwe)){var i=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:i}}var o=w1.exec(e);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var s=Kwe.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var a=Ywe.exec(e);if(a){var l=parseInt(""+a[1],10),c=parseInt(""+a[2],10)/100,u=parseInt(""+a[3],10)/100,d="rgb("+Fm(l,c,u)+")",f=w1.exec(d);if(!f)throw new Vs(4,e,d);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)}}var h=Qwe.exec(e.substring(0,50));if(h){var p=parseInt(""+h[1],10),g=parseInt(""+h[2],10)/100,y=parseInt(""+h[3],10)/100,v="rgb("+Fm(p,g,y)+")",m=w1.exec(v);if(!m)throw new Vs(4,e,v);return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new Vs(5)}function Zwe(n){var e=n.red/255,r=n.green/255,i=n.blue/255,o=Math.max(e,r,i),s=Math.min(e,r,i),a=(o+s)/2;if(o===s)return n.alpha!==void 0?{hue:0,saturation:0,lightness:a,alpha:n.alpha}:{hue:0,saturation:0,lightness:a};var l,c=o-s,u=a>.5?c/(2-o-s):c/(o+s);switch(o){case e:l=(r-i)/c+(r<i?6:0);break;case r:l=(i-e)/c+2;break;default:l=(e-r)/c+4;break}return l*=60,n.alpha!==void 0?{hue:l,saturation:u,lightness:a,alpha:n.alpha}:{hue:l,saturation:u,lightness:a}}function mc(n){return Zwe(xu(n))}var Jwe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},cE=Jwe;function Oc(n){var e=n.toString(16);return e.length===1?"0"+e:e}function C1(n){return Oc(Math.round(n*255))}function eCe(n,e,r){return cE("#"+C1(n)+C1(e)+C1(r))}function Wy(n,e,r){return Fm(n,e,r,eCe)}function tCe(n,e,r){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number")return Wy(n,e,r);if(typeof n=="object"&&e===void 0&&r===void 0)return Wy(n.hue,n.saturation,n.lightness);throw new Vs(1)}function nCe(n,e,r,i){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number"&&typeof i=="number")return i>=1?Wy(n,e,r):"rgba("+Fm(n,e,r)+","+i+")";if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?Wy(n.hue,n.saturation,n.lightness):"rgba("+Fm(n.hue,n.saturation,n.lightness)+","+n.alpha+")";throw new Vs(2)}function uE(n,e,r){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number")return cE("#"+Oc(n)+Oc(e)+Oc(r));if(typeof n=="object"&&e===void 0&&r===void 0)return cE("#"+Oc(n.red)+Oc(n.green)+Oc(n.blue));throw new Vs(6)}function E_(n,e,r,i){if(typeof n=="string"&&typeof e=="number"){var o=xu(n);return"rgba("+o.red+","+o.green+","+o.blue+","+e+")"}else{if(typeof n=="number"&&typeof e=="number"&&typeof r=="number"&&typeof i=="number")return i>=1?uE(n,e,r):"rgba("+n+","+e+","+r+","+i+")";if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?uE(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"}throw new Vs(7)}var rCe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},iCe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},oCe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},sCe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function gc(n){if(typeof n!="object")throw new Vs(8);if(iCe(n))return E_(n);if(rCe(n))return uE(n);if(sCe(n))return nCe(n);if(oCe(n))return tCe(n);throw new Vs(8)}function W5(n,e,r){return function(){var o=r.concat(Array.prototype.slice.call(arguments));return o.length>=e?n.apply(this,o):W5(n,e,o)}}function Co(n){return W5(n,n.length,[])}function aCe(n,e){if(e==="transparent")return e;var r=mc(e);return gc(ut({},r,{hue:r.hue+parseFloat(n)}))}Co(aCe);function ih(n,e,r){return Math.max(n,Math.min(e,r))}function lCe(n,e){if(e==="transparent")return e;var r=mc(e);return gc(ut({},r,{lightness:ih(0,1,r.lightness-parseFloat(n))}))}Co(lCe);function cCe(n,e){if(e==="transparent")return e;var r=mc(e);return gc(ut({},r,{saturation:ih(0,1,r.saturation-parseFloat(n))}))}Co(cCe);function uCe(n,e){if(e==="transparent")return e;var r=mc(e);return gc(ut({},r,{lightness:ih(0,1,r.lightness+parseFloat(n))}))}Co(uCe);function dCe(n,e,r){if(e==="transparent")return r;if(r==="transparent")return e;if(n===0)return r;var i=xu(e),o=ut({},i,{alpha:typeof i.alpha=="number"?i.alpha:1}),s=xu(r),a=ut({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),l=o.alpha-a.alpha,c=parseFloat(n)*2-1,u=c*l===-1?c:c+l,d=1+c*l,f=(u/d+1)/2,h=1-f,p={red:Math.floor(o.red*f+a.red*h),green:Math.floor(o.green*f+a.green*h),blue:Math.floor(o.blue*f+a.blue*h),alpha:o.alpha*parseFloat(n)+a.alpha*(1-parseFloat(n))};return E_(p)}var fCe=Co(dCe),q5=fCe;function hCe(n,e){if(e==="transparent")return e;var r=xu(e),i=typeof r.alpha=="number"?r.alpha:1,o=ut({},r,{alpha:ih(0,1,(i*100+parseFloat(n)*100)/100)});return E_(o)}var pCe=Co(hCe),mCe=pCe;function gCe(n,e){if(e==="transparent")return e;var r=mc(e);return gc(ut({},r,{saturation:ih(0,1,r.saturation+parseFloat(n))}))}Co(gCe);function vCe(n,e){return e==="transparent"?e:gc(ut({},mc(e),{hue:parseFloat(n)}))}Co(vCe);function yCe(n,e){return e==="transparent"?e:gc(ut({},mc(e),{lightness:parseFloat(n)}))}Co(yCe);function xCe(n,e){return e==="transparent"?e:gc(ut({},mc(e),{saturation:parseFloat(n)}))}Co(xCe);function _Ce(n,e){return e==="transparent"?e:q5(parseFloat(n),"rgb(0, 0, 0)",e)}Co(_Ce);function bCe(n,e){return e==="transparent"?e:q5(parseFloat(n),"rgb(255, 255, 255)",e)}Co(bCe);function SCe(n,e){if(e==="transparent")return e;var r=xu(e),i=typeof r.alpha=="number"?r.alpha:1,o=ut({},r,{alpha:ih(0,1,+(i*100-parseFloat(n)*100).toFixed(2)/100)});return E_(o)}Co(SCe);function wCe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var CCe=`.scene-nav-info {
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
}

.scene-tooltip {
  top: 0;
  color: lavender;
  font-size: 15px;
}

.scene-nav-info, .scene-tooltip {
  position: absolute;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;wCe(CCe);function dE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function ECe(n){if(Array.isArray(n))return n}function TCe(n){if(Array.isArray(n))return dE(n)}function MCe(n,e,r){return(e=DCe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function RCe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ACe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function NCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OCe(n,e){return ECe(n)||ACe(n,e)||X5(n,e)||NCe()}function jh(n){return TCe(n)||RCe(n)||X5(n)||PCe()}function ICe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DCe(n){var e=ICe(n,"string");return typeof e=="symbol"?e:e+""}function X5(n,e){if(n){if(typeof n=="string")return dE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dE(n,e):void 0}}var Qn=window.THREE?window.THREE:{WebGLRenderer:qpe,Scene:FM,PerspectiveCamera:wi,Raycaster:Sk,SRGBColorSpace:Dt,TextureLoader:eue,Vector2:je,Vector3:Y,Box3:Tu,Color:Tt,Mesh:Br,SphereGeometry:Jf,MeshBasicMaterial:Zf,BackSide:er,Clock:bk},K5=ig({props:{width:{default:window.innerWidth,onChange:function(e,r,i){isNaN(e)&&(r.width=i)}},height:{default:window.innerHeight,onChange:function(e,r,i){isNaN(e)&&(r.height=i)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null,r.toolTipElem&&(r.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var r=null;if(e.hoverDuringDrag||!e.isPointerDragging){var i=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(s){return e.hoverFilter(s.object)}).sort(function(s,a){return e.hoverOrderComparator(s.object,a.object)}),o=i.length?i[0]:null;r=o?o.object:null,e.intersectionPoint=o?o.point:null}r!==e.hoverObj&&(e.onHover(r,e.hoverObj),e.toolTipElem.innerHTML=r&&Nt(e.tooltipContent)(r)||"",e.hoverObj=r)}e.tweenGroup.update()}return this},getPointerPos:function(e){var r=e.pointerPos,i=r.x,o=r.y;return{x:i,y:o}},cameraPosition:function(e,r,i,o){var s=e.camera;if(r&&e.initialised){var a=r,l=i||{x:0,y:0,z:0};if(!o)d(a),f(l);else{var c=Object.assign({},s.position),u=h();e.tweenGroup.add(new Sy(c).to(a,o).easing(Da.Quadratic.Out).onUpdate(d).start()),e.tweenGroup.add(new Sy(u).to(l,o/3).easing(Da.Quadratic.Out).onUpdate(f).start())}return this}return Object.assign({},s.position,{lookAt:h()});function d(p){var g=p.x,y=p.y,v=p.z;g!==void 0&&(s.position.x=g),y!==void 0&&(s.position.y=y),v!==void 0&&(s.position.z=v)}function f(p){var g=new Qn.Vector3(p.x,p.y,p.z);e.controls.target?e.controls.target=g:s.lookAt(g)}function h(){return Object.assign(new Qn.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,s),r,i)},fitToBbox:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(r){var a=new Qn.Vector3(0,0,0),l=Math.max.apply(Math,jh(Object.entries(r).map(function(p){var g=OCe(p,2),y=g[0],v=g[1];return Math.max.apply(Math,jh(v.map(function(m){return Math.abs(a[y]-m)})))})))*2,c=(1-o*2/e.height)*s.fov,u=l/Math.atan(c*Math.PI/180),d=u/s.aspect,f=Math.max(u,d);if(f>0){var h=a.clone().sub(s.position).normalize().multiplyScalar(-f);this.cameraPosition(h,a,i)}}return this},getBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=new Qn.Box3(new Qn.Vector3(0,0,0),new Qn.Vector3(0,0,0)),o=e.objects.filter(r);return o.length?(o.forEach(function(s){return i.expandByObject(s)}),Object.assign.apply(Object,jh(["x","y","z"].map(function(s){return MCe({},s,[i.min[s],i.max[s]])})))):null},getScreenCoords:function(e,r,i,o){var s=new Qn.Vector3(r,i,o);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,r,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new Qn.Vector2(r/e.width*2-1,-(i/e.height)*2+1),a=new Qn.Raycaster;return a.setFromCamera(s,e.camera),Object.assign({},a.ray.at(o,new Qn.Vector3))},intersectingObjects:function(e,r,i){var o=new Qn.Vector2(r/e.width*2-1,-(i/e.height)*2+1),s=new Qn.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.setFromCamera(o,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Qn.Scene,camera:new Qn.PerspectiveCamera,clock:new Qn.Clock,tweenGroup:new eM}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.controlType,s=o===void 0?"trackball":o,a=i.useWebGPU,l=a===void 0?!1:a,c=i.rendererConfig,u=c===void 0?{}:c,d=i.extraRenderers,f=d===void 0?[]:d,h=i.waitForLoadComplete,p=h===void 0?!0:h;e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.className="scene-container",r.container.style.position="relative",r.container.appendChild(r.navInfo=document.createElement("div")),r.navInfo.className="scene-nav-info",r.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",r.navInfo.style.display=r.showNavInfo?null:"none",r.toolTipElem=document.createElement("div"),r.toolTipElem.classList.add("scene-tooltip"),r.container.appendChild(r.toolTipElem),r.pointerPos=new Qn.Vector2,r.pointerPos.x=-2,r.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(g){return r.container.addEventListener(g,function(y){if(g==="pointerdown"&&(r.isPointerPressed=!0),!r.isPointerDragging&&y.type==="pointermove"&&(y.pressure>0||r.isPointerPressed)&&(y.pointerType!=="touch"||y.movementX===void 0||[y.movementX,y.movementY].some(function(x){return Math.abs(x)>1}))&&(r.isPointerDragging=!0),r.enablePointerInteraction){var v=m(r.container);r.pointerPos.x=y.pageX-v.left,r.pointerPos.y=y.pageY-v.top,r.toolTipElem.style.top="".concat(r.pointerPos.y,"px"),r.toolTipElem.style.left="".concat(r.pointerPos.x,"px"),r.toolTipElem.style.transform="translate(-".concat(r.pointerPos.x/r.width*100,"%, ").concat(r.height-r.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function m(x){var b=x.getBoundingClientRect(),S=window.pageXOffset||document.documentElement.scrollLeft,w=window.pageYOffset||document.documentElement.scrollTop;return{top:b.top+w,left:b.left+S}}},{passive:!0})}),r.container.addEventListener("pointerup",function(g){r.isPointerPressed=!1,!(r.isPointerDragging&&(r.isPointerDragging=!1,!r.clickAfterDrag))&&requestAnimationFrame(function(){g.button===0&&r.onClick(r.hoverObj||null,g,r.intersectionPoint),g.button===2&&r.onRightClick&&r.onRightClick(r.hoverObj||null,g,r.intersectionPoint)})},{passive:!0,capture:!0}),r.container.addEventListener("contextmenu",function(g){r.onRightClick&&g.preventDefault()}),r.renderer=new(l?K1e:Qn.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),r.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),r.container.appendChild(r.renderer.domElement),r.extraRenderers=f,r.extraRenderers.forEach(function(g){g.domElement.style.position="absolute",g.domElement.style.top="0px",g.domElement.style.pointerEvents="none",r.container.appendChild(g.domElement)}),r.postProcessingComposer=new zwe(r.renderer),r.postProcessingComposer.addPass(new kwe(r.scene,r.camera)),r.controls=new{trackball:Q1e,orbit:hwe,fly:Mwe}[s](r.camera,r.renderer.domElement),s==="fly"&&(r.controls.movementSpeed=300,r.controls.rollSpeed=Math.PI/6,r.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(r.controls.minDistance=.1,r.controls.maxDistance=r.skyRadius,r.controls.addEventListener("start",function(){r.controlsEngaged=!0}),r.controls.addEventListener("change",function(){r.controlsEngaged&&(r.controlsDragging=!0)}),r.controls.addEventListener("end",function(){r.controlsEngaged=!1,r.controlsDragging=!1})),[r.renderer,r.postProcessingComposer].concat(jh(r.extraRenderers)).forEach(function(g){return g.setSize(r.width,r.height)}),r.camera.aspect=r.width/r.height,r.camera.updateProjectionMatrix(),r.camera.position.z=1e3,r.scene.add(r.skysphere=new Qn.Mesh),r.skysphere.visible=!1,r.loadComplete=r.scene.visible=!p,window.scene=r.scene},update:function(e,r){if(e.width&&e.height&&(r.hasOwnProperty("width")||r.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(jh(e.extraRenderers)).forEach(function(s){return s.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),r.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&r.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Qn.SphereGeometry(e.skyRadius)),r.hasOwnProperty("backgroundColor")){var i=xu(e.backgroundColor).alpha;i===void 0&&(i=1),e.renderer.setClearColor(new Qn.Color(mCe(1,e.backgroundColor)),i)}r.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Qn.TextureLoader().load(e.backgroundImageUrl,function(s){s.colorSpace=Qn.SRGBColorSpace,e.skysphere.material=new Qn.MeshBasicMaterial({map:s,side:Qn.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&o()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&o())),r.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),r.hasOwnProperty("lights")&&((r.lights||[]).forEach(function(s){return e.scene.remove(s)}),e.lights.forEach(function(s){return e.scene.add(s)})),r.hasOwnProperty("objects")&&((r.objects||[]).forEach(function(s){return e.scene.remove(s)}),e.objects.forEach(function(s){return e.scene.add(s)}));function o(){e.loadComplete=e.scene.visible=!0}}});function LCe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var FCe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;LCe(FCe);function fE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function UCe(n){if(Array.isArray(n))return fE(n)}function gg(n,e,r){return(e=kCe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function BCe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YD(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function qv(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(r),!0).forEach(function(i){gg(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):YD(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function T_(n){return UCe(n)||BCe(n)||VCe(n)||$Ce()}function zCe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kCe(n){var e=zCe(n,"string");return typeof e=="symbol"?e:e+""}function VCe(n,e){if(n){if(typeof n=="string")return fE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fE(n,e):void 0}}function Y5(n,e){var r=new e;return r._destructor&&r._destructor(),{linkProp:function(o){return{default:r[o](),onChange:function(a,l){l[n][o](a)},triggerUpdate:!1}},linkMethod:function(o){return function(s){for(var a=s[n],l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=a[o].apply(a,c);return d===a?this:d}}}}var E1=window.THREE?window.THREE:{AmbientLight:_k,DirectionalLight:xk,REVISION:qf},GCe=170,Q5=Y5("forceGraph",r4),HCe=Object.assign.apply(Object,T_(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return gg({},n,Q5.linkProp(n))}))),jCe=Object.assign.apply(Object,T_(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return gg({},n,Q5.linkMethod(n))}))),M0=Y5("renderObjs",K5),WCe=Object.assign.apply(Object,T_(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return gg({},n,M0.linkProp(n))}))),qCe=Object.assign.apply(Object,T_(["lights","cameraPosition","postProcessingComposer"].map(function(n){return gg({},n,M0.linkMethod(n))})).concat([{graph2ScreenCoords:M0.linkMethod("getScreenCoords"),screen2GraphCoords:M0.linkMethod("getSceneCoords")}])),XCe=ig({props:qv(qv({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,r){return r.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,r){var i=r.renderObjs.controls();i&&(i.enabled=e,e&&i.domElement&&i.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},HCe),WCe),methods:qv(qv({zoomToFit:function(e,r,i){for(var o,s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return e.renderObjs.fitToBbox((o=e.forceGraph).getGraphBbox.apply(o,a),r,i),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},jCe),qCe),stateInit:function(e){var r=e.controlType,i=e.rendererConfig,o=e.extraRenderers,s=new r4;return{forceGraph:s,renderObjs:K5({controlType:r,rendererConfig:i,extraRenderers:o}).objects([s]).lights([new E1.AmbientLight(13421772,Math.PI),new E1.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,r){e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.style.position="relative";var i=document.createElement("div");r.container.appendChild(i),r.renderObjs(i);var o=r.renderObjs.camera(),s=r.renderObjs.renderer(),a=r.renderObjs.controls();a.enabled=!!r.enableNavigationControls,r.lastSetCameraZ=o.position.z;var l;r.container.appendChild(l=document.createElement("div")),l.className="graph-info-msg",l.textContent="",r.forceGraph.onLoading(function(){l.textContent="Loading..."}).onFinishLoading(function(){l.textContent=""}).onUpdate(function(){r.graphData=r.forceGraph.graphData(),o.position.x===0&&o.position.y===0&&o.position.z===r.lastSetCameraZ&&r.graphData.nodes.length&&(o.lookAt(r.forceGraph.position),r.lastSetCameraZ=o.position.z=Math.cbrt(r.graphData.nodes.length)*GCe)}).onFinishUpdate(function(){if(r._dragControls){var c=r.graphData.nodes.find(function(d){return d.__initialFixedPos&&!d.__disposeControlsAfterDrag});c?c.__disposeControlsAfterDrag=!0:r._dragControls.dispose(),r._dragControls=void 0}if(r.enableNodeDrag&&r.enablePointerInteraction&&r.forceEngine==="d3"){var u=r._dragControls=new Xpe(r.graphData.nodes.map(function(d){return d.__threeObj}).filter(function(d){return d}),o,s.domElement);u.addEventListener("dragstart",function(d){a.enabled=!1,d.object.__initialPos=d.object.position.clone(),d.object.__prevPos=d.object.position.clone();var f=ga(d.object).__data;!f.__initialFixedPos&&(f.__initialFixedPos={fx:f.fx,fy:f.fy,fz:f.fz}),!f.__initialPos&&(f.__initialPos={x:f.x,y:f.y,z:f.z}),["x","y","z"].forEach(function(h){return f["f".concat(h)]=f[h]}),s.domElement.classList.add("grabbable")}),u.addEventListener("drag",function(d){var f=ga(d.object);if(!d.object.hasOwnProperty("__graphObjType")){var h=d.object.__initialPos,p=d.object.__prevPos,g=d.object.position;f.position.add(g.clone().sub(p)),p.copy(g),g.copy(h)}var y=f.__data,v=f.position,m={x:v.x-y.x,y:v.y-y.y,z:v.z-y.z};["x","y","z"].forEach(function(x){return y["f".concat(x)]=y[x]=v[x]}),r.forceGraph.d3AlphaTarget(.3).resetCountdown(),y.__dragged=!0,r.onNodeDrag(y,m)}),u.addEventListener("dragend",function(d){delete d.object.__initialPos,delete d.object.__prevPos;var f=ga(d.object).__data;f.__disposeControlsAfterDrag&&(u.dispose(),delete f.__disposeControlsAfterDrag);var h=f.__initialFixedPos,p=f.__initialPos,g={x:p.x-f.x,y:p.y-f.y,z:p.z-f.z};h&&(["x","y","z"].forEach(function(y){var v="f".concat(y);h[v]===void 0&&delete f[v]}),delete f.__initialFixedPos,delete f.__initialPos,f.__dragged&&(delete f.__dragged,r.onNodeDragEnd(f,g))),r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.enableNavigationControls&&(a.enabled=!0,a.domElement&&a.domElement.ownerDocument&&a.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),s.domElement.classList.remove("grabbable")})}}),E1.REVISION<155&&(r.renderObjs.renderer().useLegacyLights=!1),r.renderObjs.hoverOrderComparator(function(c,u){var d=ga(c);if(!d)return 1;var f=ga(u);if(!f)return-1;var h=function(g){return g.__graphObjType==="node"};return h(f)-h(d)}).tooltipContent(function(c){var u=ga(c);return u&&Nt(r["".concat(u.__graphObjType,"Label")])(u.__data)||""}).hoverDuringDrag(!1).onHover(function(c){var u=ga(c);if(u!==r.hoverObj){var d=r.hoverObj?r.hoverObj.__graphObjType:null,f=r.hoverObj?r.hoverObj.__data:null,h=u?u.__graphObjType:null,p=u?u.__data:null;if(d&&d!==h){var g=r["on".concat(d==="node"?"Node":"Link","Hover")];g&&g(null,f)}if(h){var y=r["on".concat(h==="node"?"Node":"Link","Hover")];y&&y(p,d===h?f:null)}s.domElement.classList[u&&r["on".concat(h==="node"?"Node":"Link","Click")]||!u&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=u}}).clickAfterDrag(!1).onClick(function(c,u){var d=ga(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","Click")];f&&f(d.__data,u)}else r.onBackgroundClick&&r.onBackgroundClick(u)}).onRightClick(function(c,u){var d=ga(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","RightClick")];f&&f(d.__data,u)}else r.onBackgroundRightClick&&r.onBackgroundRightClick(u)}),this._animationCycle()}});function ga(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}const M_={width:G.number,height:G.number,graphData:G.shape({nodes:G.arrayOf(G.object).isRequired,links:G.arrayOf(G.object).isRequired}),backgroundColor:G.string,nodeRelSize:G.number,nodeId:G.string,nodeLabel:G.oneOfType([G.string,G.func]),nodeVal:G.oneOfType([G.number,G.string,G.func]),nodeVisibility:G.oneOfType([G.bool,G.string,G.func]),nodeColor:G.oneOfType([G.string,G.func]),nodeAutoColorBy:G.oneOfType([G.string,G.func]),onNodeHover:G.func,onNodeClick:G.func,linkSource:G.string,linkTarget:G.string,linkLabel:G.oneOfType([G.string,G.func]),linkVisibility:G.oneOfType([G.bool,G.string,G.func]),linkColor:G.oneOfType([G.string,G.func]),linkAutoColorBy:G.oneOfType([G.string,G.func]),linkWidth:G.oneOfType([G.number,G.string,G.func]),linkCurvature:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowLength:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowColor:G.oneOfType([G.string,G.func]),linkDirectionalArrowRelPos:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticles:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleSpeed:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleWidth:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleColor:G.oneOfType([G.string,G.func]),onLinkHover:G.func,onLinkClick:G.func,dagMode:G.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:G.number,dagNodeFilter:G.func,onDagError:G.func,d3AlphaMin:G.number,d3AlphaDecay:G.number,d3VelocityDecay:G.number,warmupTicks:G.number,cooldownTicks:G.number,cooldownTime:G.number,onEngineTick:G.func,onEngineStop:G.func,getGraphBbox:G.func},Z5={zoomToFit:G.func,onNodeRightClick:G.func,onNodeDrag:G.func,onNodeDragEnd:G.func,onLinkRightClick:G.func,linkHoverPrecision:G.number,onBackgroundClick:G.func,onBackgroundRightClick:G.func,enablePointerInteraction:G.bool,enableNodeDrag:G.bool},NR={showNavInfo:G.bool,nodeOpacity:G.number,nodeResolution:G.number,nodeThreeObject:G.oneOfType([G.object,G.string,G.func]),nodeThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkOpacity:G.number,linkResolution:G.number,linkCurveRotation:G.oneOfType([G.number,G.string,G.func]),linkMaterial:G.oneOfType([G.object,G.string,G.func]),linkThreeObject:G.oneOfType([G.object,G.string,G.func]),linkThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkPositionUpdate:G.func,linkDirectionalArrowResolution:G.number,linkDirectionalParticleResolution:G.number,forceEngine:G.oneOf(["d3","ngraph"]),ngraphPhysics:G.object,numDimensions:G.oneOf([1,2,3])};Object.assign({},M_,Z5,{linkLineDash:G.oneOfType([G.arrayOf(G.number),G.string,G.func]),nodeCanvasObjectMode:G.oneOfType([G.string,G.func]),nodeCanvasObject:G.func,nodePointerAreaPaint:G.func,linkCanvasObjectMode:G.oneOfType([G.string,G.func]),linkCanvasObject:G.func,linkPointerAreaPaint:G.func,autoPauseRedraw:G.bool,minZoom:G.number,maxZoom:G.number,enableZoomInteraction:G.oneOfType([G.bool,G.func]),enablePanInteraction:G.oneOfType([G.bool,G.func]),onZoom:G.func,onZoomEnd:G.func,onRenderFramePre:G.func,onRenderFramePost:G.func});const KCe=Object.assign({},M_,Z5,NR,{enableNavigationControls:G.bool,controlType:G.oneOf(["trackball","orbit","fly"]),rendererConfig:G.object,extraRenderers:G.arrayOf(G.shape({render:G.func.isRequired}))});Object.assign({},M_,NR,{nodeDesc:G.oneOfType([G.string,G.func]),linkDesc:G.oneOfType([G.string,G.func])});Object.assign({},M_,NR,{markerAttrs:G.object,yOffset:G.number,glScale:G.number});const PR=k$(XCe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});PR.displayName="ForceGraph3D";PR.propTypes=KCe;const YCe={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Tt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Ff extends mg{constructor(e,r,i,o){super(),this.strength=r!==void 0?r:1,this.radius=i,this.threshold=o,this.resolution=e!==void 0?new je(e.x,e.y):new je(256,256),this.clearColor=new Tt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Ss(s,a,{type:Yr}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let f=0;f<this.nMips;f++){const h=new Ss(s,a,{type:Yr});h.texture.name="UnrealBloomPass.h"+f,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);const p=new Ss(s,a,{type:Yr});p.texture.name="UnrealBloomPass.v"+f,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),s=Math.round(s/2),a=Math.round(a/2)}const l=YCe;this.highPassUniforms=Ay.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Gi({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let f=0;f<this.nMips;f++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[f])),this.separableBlurMaterials[f].uniforms.invSize.value=new je(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const u=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=u,this.bloomTintColors=[new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=H5;this.copyUniforms=Ay.clone(d.uniforms),this.blendMaterial=new Gi({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:du,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Tt,this.oldClearAlpha=1,this.basic=new Zf,this.fsQuad=new j5(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let i=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(i,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(i,o),this.renderTargetsVertical[s].setSize(i,o),this.separableBlurMaterials[s].uniforms.invSize.value=new je(1/i,1/o),i=Math.round(i/2),o=Math.round(o/2)}render(e,r,i,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[c].uniforms.direction.value=Ff.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=Ff.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}getSeperableBlurMaterial(e){const r=[];for(let i=0;i<e;i++)r.push(.39894*Math.exp(-.5*i*i/(e*e))/e);return new Gi({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new je(.5,.5)},direction:{value:new je(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Gi({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Ff.BlurDirectionX=new je(1,0);Ff.BlurDirectionY=new je(0,1);const QCe=32,ZCe=6,QD=32,ZD=2,JCe=({articles:n,selectedId:e,selectCallback:r})=>{const{graphData:i,forceGraphRef:o,forceGraphWidth:s}=jz(n);_.useEffect(()=>{const c=new Ff(new je(window.innerWidth,window.innerHeight),.25,.1,.1);o.current.postProcessingComposer().addPass(c)},[]);const a=_.useCallback(c=>r(c.id),[o]),l=c=>new Br(new Jf(c.size?c.size:10),new VM({color:c.id==e?"#1677ff":c.color,transparent:!1,opacity:1}));return Ut.jsx(PR,{graphData:i,ref:o,width:s,backgroundColor:"#000001",onNodeClick:a,nodeThreeObject:l,nodeResolution:QCe,nodeOpacity:1,nodeRelSize:ZCe,linkResolution:QD,linkWidth:ZD,linkOpacity:.75,linkDirectionalParticles:1,linkDirectionalParticleWidth:ZD,linkDirectionalParticleSpeed:.005,linkDirectionalParticleColor:()=>"#fff",linkDirectionalParticleResolution:QD/2})},eEe=({articleData:n})=>{const[e,r]=_.useState(!1),[i,o]=_.useState(null),[s,a]=_.useState(!0),l=u=>{u!==0?o(d=>d===u?null:u):a(!0)},c=(u,d)=>Ut.jsx("span",{onClick:()=>l(d+1),children:Ut.jsxs(m0.Item,{style:{padding:"1rem",backgroundColor:i==d+1?"#cfcaca":"",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[Ut.jsx(m0.Item.Meta,{title:u.title,description:u.abstract},d),Ut.jsxs("div",{children:[Ut.jsx("b",{children:"Authors: "}),u.authors.map((f,h)=>Ut.jsxs("span",{children:[f,h<u.authors.length-1?", ":""]},h))]}),Ut.jsxs("div",{children:[u.ids.arxiv_id&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"Arxiv ID:"})," ",u.ids.arxiv_id]}),u.ids.doi&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"DOI:"})," ",u.ids.doi]}),u.ids.scopus_id&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"Scopus ID:"})," ",u.ids.scopus_id]})]}),Ut.jsx("b",{children:"Similarity: "})," ",(u.similarity*100).toFixed(2),"%"]})});return Ut.jsxs("div",{style:{height:"100%",display:"flex"},children:[Ut.jsx(m0,{itemLayout:"vertical",dataSource:n.similar_articles,style:{height:"100vh",overflow:"auto"},renderItem:c}),Ut.jsxs(Ts,{open:s,onCancel:()=>a(!1),mask:!1,footer:null,style:{right:"5rem",top:"15vh",margin:0,position:"fixed",width:"10vw",height:"45vh"},children:[Ut.jsx("h3",{children:Ut.jsx("b",{style:{fontSize:"1.5rem",lineHeight:"1.75rem",letterSpacing:"0.1px"},children:n.original_article.title})}),Ut.jsx("p",{children:n.original_article.authors.map((u,d)=>Ut.jsxs("b",{style:{opacity:"0.5"},children:[u,d<n.original_article.authors.length-1?", ":""]},d))}),Ut.jsxs("p",{style:{paddingTop:"0.75rem"},children:[Ut.jsx(B$,{style:{fontSize:"1rem",maxHeight:"25vh",overflowY:"scroll"},children:n.original_article.abstract}),Ut.jsxs("div",{children:[n.original_article.ids.arxiv_id&&Ut.jsxs("a",{href:n.original_article.ids.arxiv_id,children:[Ut.jsx("strong",{children:"Arxiv ID:"})," ",n.original_article.ids.arxiv_id]}),n.original_article.ids.doi&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"DOI:"})," ",n.original_article.ids.doi]}),n.original_article.ids.scopus_id&&Ut.jsxs("a",{href:n.original_article.ids.scopus_id,children:[Ut.jsx("strong",{children:"Scopus ID:"})," ",n.original_article.ids.scopus_id]})]})]})]}),Ut.jsx(L$,{style:{position:"absolute",zIndex:2,right:50,bottom:50},checkedChildren:"3D",unCheckedChildren:"2D",onChange:()=>r(!e)}),e?Ut.jsx(JCe,{articles:n,selectedId:i,selectCallback:l}):Ut.jsx(ule,{articles:n,selectedId:i,selectCallback:l})]})},{Search:tEe}=Wf,{Title:nEe}=eg,rEe=({handleSearch:n,isActive:e})=>{const[r,i]=_.useState(""),[o,s]=_.useState(5),a=()=>{n(ile(r,o))};return Ut.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:Ut.jsxs("div",{style:e?{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"clamp(300px, 50%, 500px)"}:{position:"absolute",zIndex:99,top:0,display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"1rem",alignItems:"center",width:"clamp(300px, 50%, 500px)"},children:[e&&Ut.jsx(nEe,{children:"Article Explorer"}),Ut.jsxs(C$.Compact,{style:{display:"flex",width:"100%"},children:[Ut.jsx(Eu,{defaultValue:"5",style:{width:70},onChange:l=>s(Number.parseInt(l)),options:[{value:"5",label:"5"},{value:"10",label:"10"},{value:"15",label:"15"},{value:"20",label:"20"}]}),Ut.jsx(Jm,{trigger:["focus"],title:"An article ID (e.g. 2412.12081) or a link to arXiv or Scopus is required",placement:"bottomLeft",children:Ut.jsx(tEe,{style:{width:"100%"},placeholder:"Link to article...",onChange:l=>i(l.target.value),onSearch:a,enterButton:!0})})]})]})})},iEe="https://articlewebapp-h0heexfzapaga3bw.polandcentral-01.azurewebsites.net",oEe="article/similar/";class sEe{static async fetchPosts(e){const r=new URLSearchParams({article_id:e.article_id,site:e.site,id_type:e.id_type,...e.top_n&&{top_n:e.top_n.toString()}}).toString(),i=new URL(`${iEe}/${oEe}?${r}`),o=await fetch(i);if(!o.ok)throw new Error(`HTTP error status: ${o.status}`);return await o.json()}}const aEe=()=>{const[n,e]=_.useState(null),[r,i]=_.useState(!1),[o,s]=O$.useMessage(),a=async l=>{if(l!==null)try{i(!0);const c=await sEe.fetchPosts(l);e(c),i(!1)}catch{o.open({type:"error",content:"Failed to fetch posts. Please try again later."}),i(!1)}};return Ut.jsxs(Ut.Fragment,{children:[s,Ut.jsxs("div",{style:n?{}:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:[Ut.jsx(rEe,{handleSearch:a,isActive:!n}),Ut.jsx(GT,{spinning:r,fullscreen:!0,size:"large"}),n&&Ut.jsx(eEe,{articleData:n})]})]})};f3(document.getElementById("root")).render(Ut.jsx(_.StrictMode,{children:Ut.jsx(aEe,{})}));
